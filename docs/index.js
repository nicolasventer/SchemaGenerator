const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./javascript.chunk.js","./typescript.chunk.js"])))=>i.map(i=>d[i]);
var eee=Object.defineProperty;var tee=(s,e,t)=>e in s?eee(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var Bn=(s,e,t)=>tee(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var d0,xt,yU,SU,af,p7,kU,v2,J5,C2,w2,LU,Dw={},xU=[],nee=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,rT=Array.isArray;function zc(s,e){for(var t in e)s[t]=e[t];return s}function DU(s){s&&s.parentNode&&s.parentNode.removeChild(s)}function jn(s,e,t){var n,i,o,r={};for(o in e)o=="key"?n=e[o]:o=="ref"?i=e[o]:r[o]=e[o];if(arguments.length>2&&(r.children=arguments.length>3?d0.call(arguments,2):t),typeof s=="function"&&s.defaultProps!=null)for(o in s.defaultProps)r[o]===void 0&&(r[o]=s.defaultProps[o]);return wC(s,r,n,i,null)}function wC(s,e,t,n,i){var o={type:s,props:e,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++yU,__i:-1,__u:0};return i==null&&xt.vnode!=null&&xt.vnode(o),o}function IU(){return{current:null}}function Yo(s){return s.children}function Xr(s,e){this.props=s,this.context=e}function eb(s,e){if(e==null)return s.__?eb(s.__,s.__i+1):null;for(var t;e<s.__k.length;e++)if((t=s.__k[e])!=null&&t.__e!=null)return t.__e;return typeof s.type=="function"?eb(s):null}function TU(s){var e,t;if((s=s.__)!=null&&s.__c!=null){for(s.__e=s.__c.base=null,e=0;e<s.__k.length;e++)if((t=s.__k[e])!=null&&t.__e!=null){s.__e=s.__c.base=t.__e;break}return TU(s)}}function y2(s){(!s.__d&&(s.__d=!0)&&af.push(s)&&!vk.__r++||p7!==xt.debounceRendering)&&((p7=xt.debounceRendering)||kU)(vk)}function vk(){var s,e,t,n,i,o,r,a;for(af.sort(v2);s=af.shift();)s.__d&&(e=af.length,n=void 0,o=(i=(t=s).__v).__e,r=[],a=[],t.__P&&((n=zc({},i)).__v=i.__v+1,xt.vnode&&xt.vnode(n),e3(t.__P,n,i,t.__n,t.__P.namespaceURI,32&i.__u?[o]:null,r,o??eb(i),!!(32&i.__u),a),n.__v=i.__v,n.__.__k[n.__i]=n,RU(r,n,a),n.__e!=o&&TU(n)),af.length>e&&af.sort(v2));vk.__r=0}function EU(s,e,t,n,i,o,r,a,l,c,d){var h,u,f,g,p,_=n&&n.__k||xU,b=e.length;for(t.__d=l,iee(t,e,_),l=t.__d,h=0;h<b;h++)(f=t.__k[h])!=null&&(u=f.__i===-1?Dw:_[f.__i]||Dw,f.__i=h,e3(s,f,u,i,o,r,a,l,c,d),g=f.__e,f.ref&&u.ref!=f.ref&&(u.ref&&t3(u.ref,null,f),d.push(f.ref,f.__c||g,f)),p==null&&g!=null&&(p=g),65536&f.__u||u.__k===f.__k?l=NU(f,l,s):typeof f.type=="function"&&f.__d!==void 0?l=f.__d:g&&(l=g.nextSibling),f.__d=void 0,f.__u&=-196609);t.__d=l,t.__e=p}function iee(s,e,t){var n,i,o,r,a,l=e.length,c=t.length,d=c,h=0;for(s.__k=[],n=0;n<l;n++)(i=e[n])!=null&&typeof i!="boolean"&&typeof i!="function"?(r=n+h,(i=s.__k[n]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?wC(null,i,null,null,null):rT(i)?wC(Yo,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?wC(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=s,i.__b=s.__b+1,o=null,(a=i.__i=see(i,t,r,d))!==-1&&(d--,(o=t[a])&&(o.__u|=131072)),o==null||o.__v===null?(a==-1&&h--,typeof i.type!="function"&&(i.__u|=65536)):a!==r&&(a==r-1?h--:a==r+1?h++:(a>r?h--:h++,i.__u|=65536))):i=s.__k[n]=null;if(d)for(n=0;n<c;n++)(o=t[n])!=null&&!(131072&o.__u)&&(o.__e==s.__d&&(s.__d=eb(o)),MU(o,o))}function NU(s,e,t){var n,i;if(typeof s.type=="function"){for(n=s.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=s,e=NU(n[i],e,t));return e}s.__e!=e&&(e&&s.type&&!t.contains(e)&&(e=eb(s)),t.insertBefore(s.__e,e||null),e=s.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function id(s,e){return e=e||[],s==null||typeof s=="boolean"||(rT(s)?s.some(function(t){id(t,e)}):e.push(s)),e}function see(s,e,t,n){var i=s.key,o=s.type,r=t-1,a=t+1,l=e[t];if(l===null||l&&i==l.key&&o===l.type&&!(131072&l.__u))return t;if(n>(l!=null&&!(131072&l.__u)?1:0))for(;r>=0||a<e.length;){if(r>=0){if((l=e[r])&&!(131072&l.__u)&&i==l.key&&o===l.type)return r;r--}if(a<e.length){if((l=e[a])&&!(131072&l.__u)&&i==l.key&&o===l.type)return a;a++}}return-1}function _7(s,e,t){e[0]==="-"?s.setProperty(e,t??""):s[e]=t==null?"":typeof t!="number"||nee.test(e)?t:t+"px"}function dy(s,e,t,n,i){var o;e:if(e==="style")if(typeof t=="string")s.style.cssText=t;else{if(typeof n=="string"&&(s.style.cssText=n=""),n)for(e in n)t&&e in t||_7(s.style,e,"");if(t)for(e in t)n&&t[e]===n[e]||_7(s.style,e,t[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in s||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),s.l||(s.l={}),s.l[e+o]=t,t?n?t.u=n.u:(t.u=J5,s.addEventListener(e,o?w2:C2,o)):s.removeEventListener(e,o?w2:C2,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in s)try{s[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!=="-"?s.removeAttribute(e):s.setAttribute(e,e=="popover"&&t==1?"":t))}}function b7(s){return function(e){if(this.l){var t=this.l[e.type+s];if(e.t==null)e.t=J5++;else if(e.t<t.u)return;return t(xt.event?xt.event(e):e)}}}function e3(s,e,t,n,i,o,r,a,l,c){var d,h,u,f,g,p,_,b,v,C,w,y,k,x,D,N,W=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(l=!!(32&t.__u),o=[a=e.__e=t.__e]),(d=xt.__b)&&d(e);e:if(typeof W=="function")try{if(b=e.props,v="prototype"in W&&W.prototype.render,C=(d=W.contextType)&&n[d.__c],w=d?C?C.props.value:d.__:n,t.__c?_=(h=e.__c=t.__c).__=h.__E:(v?e.__c=h=new W(b,w):(e.__c=h=new Xr(b,w),h.constructor=W,h.render=ree),C&&C.sub(h),h.props=b,h.state||(h.state={}),h.context=w,h.__n=n,u=h.__d=!0,h.__h=[],h._sb=[]),v&&h.__s==null&&(h.__s=h.state),v&&W.getDerivedStateFromProps!=null&&(h.__s==h.state&&(h.__s=zc({},h.__s)),zc(h.__s,W.getDerivedStateFromProps(b,h.__s))),f=h.props,g=h.state,h.__v=e,u)v&&W.getDerivedStateFromProps==null&&h.componentWillMount!=null&&h.componentWillMount(),v&&h.componentDidMount!=null&&h.__h.push(h.componentDidMount);else{if(v&&W.getDerivedStateFromProps==null&&b!==f&&h.componentWillReceiveProps!=null&&h.componentWillReceiveProps(b,w),!h.__e&&(h.shouldComponentUpdate!=null&&h.shouldComponentUpdate(b,h.__s,w)===!1||e.__v===t.__v)){for(e.__v!==t.__v&&(h.props=b,h.state=h.__s,h.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(B){B&&(B.__=e)}),y=0;y<h._sb.length;y++)h.__h.push(h._sb[y]);h._sb=[],h.__h.length&&r.push(h);break e}h.componentWillUpdate!=null&&h.componentWillUpdate(b,h.__s,w),v&&h.componentDidUpdate!=null&&h.__h.push(function(){h.componentDidUpdate(f,g,p)})}if(h.context=w,h.props=b,h.__P=s,h.__e=!1,k=xt.__r,x=0,v){for(h.state=h.__s,h.__d=!1,k&&k(e),d=h.render(h.props,h.state,h.context),D=0;D<h._sb.length;D++)h.__h.push(h._sb[D]);h._sb=[]}else do h.__d=!1,k&&k(e),d=h.render(h.props,h.state,h.context),h.state=h.__s;while(h.__d&&++x<25);h.state=h.__s,h.getChildContext!=null&&(n=zc(zc({},n),h.getChildContext())),v&&!u&&h.getSnapshotBeforeUpdate!=null&&(p=h.getSnapshotBeforeUpdate(f,g)),EU(s,rT(N=d!=null&&d.type===Yo&&d.key==null?d.props.children:d)?N:[N],e,t,n,i,o,r,a,l,c),h.base=e.__e,e.__u&=-161,h.__h.length&&r.push(h),_&&(h.__E=h.__=null)}catch(B){if(e.__v=null,l||o!=null){for(e.__u|=l?160:128;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,e.__e=a}else e.__e=t.__e,e.__k=t.__k;xt.__e(B,e,t)}else o==null&&e.__v===t.__v?(e.__k=t.__k,e.__e=t.__e):e.__e=oee(t.__e,e,t,n,i,o,r,l,c);(d=xt.diffed)&&d(e)}function RU(s,e,t){e.__d=void 0;for(var n=0;n<t.length;n++)t3(t[n],t[++n],t[++n]);xt.__c&&xt.__c(e,s),s.some(function(i){try{s=i.__h,i.__h=[],s.some(function(o){o.call(i)})}catch(o){xt.__e(o,i.__v)}})}function oee(s,e,t,n,i,o,r,a,l){var c,d,h,u,f,g,p,_=t.props,b=e.props,v=e.type;if(v==="svg"?i="http://www.w3.org/2000/svg":v==="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((f=o[c])&&"setAttribute"in f==!!v&&(v?f.localName===v:f.nodeType===3)){s=f,o[c]=null;break}}if(s==null){if(v===null)return document.createTextNode(b);s=document.createElementNS(i,v,b.is&&b),a&&(xt.__m&&xt.__m(e,o),a=!1),o=null}if(v===null)_===b||a&&s.data===b||(s.data=b);else{if(o=o&&d0.call(s.childNodes),_=t.props||Dw,!a&&o!=null)for(_={},c=0;c<s.attributes.length;c++)_[(f=s.attributes[c]).name]=f.value;for(c in _)if(f=_[c],c!="children"){if(c=="dangerouslySetInnerHTML")h=f;else if(!(c in b)){if(c=="value"&&"defaultValue"in b||c=="checked"&&"defaultChecked"in b)continue;dy(s,c,null,f,i)}}for(c in b)f=b[c],c=="children"?u=f:c=="dangerouslySetInnerHTML"?d=f:c=="value"?g=f:c=="checked"?p=f:a&&typeof f!="function"||_[c]===f||dy(s,c,f,_[c],i);if(d)a||h&&(d.__html===h.__html||d.__html===s.innerHTML)||(s.innerHTML=d.__html),e.__k=[];else if(h&&(s.innerHTML=""),EU(s,rT(u)?u:[u],e,t,n,v==="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,r,o?o[0]:t.__k&&eb(t,0),a,l),o!=null)for(c=o.length;c--;)DU(o[c]);a||(c="value",v==="progress"&&g==null?s.removeAttribute("value"):g!==void 0&&(g!==s[c]||v==="progress"&&!g||v==="option"&&g!==_[c])&&dy(s,c,g,_[c],i),c="checked",p!==void 0&&p!==s[c]&&dy(s,c,p,_[c],i))}return s}function t3(s,e,t){try{if(typeof s=="function"){var n=typeof s.__u=="function";n&&s.__u(),n&&e==null||(s.__u=s(e))}else s.current=e}catch(i){xt.__e(i,t)}}function MU(s,e,t){var n,i;if(xt.unmount&&xt.unmount(s),(n=s.ref)&&(n.current&&n.current!==s.__e||t3(n,null,e)),(n=s.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){xt.__e(o,e)}n.base=n.__P=null}if(n=s.__k)for(i=0;i<n.length;i++)n[i]&&MU(n[i],e,t||typeof s.type!="function");t||DU(s.__e),s.__c=s.__=s.__e=s.__d=void 0}function ree(s,e,t){return this.constructor(s,t)}function tb(s,e,t){var n,i,o,r;xt.__&&xt.__(s,e),i=(n=typeof t=="function")?null:t&&t.__k||e.__k,o=[],r=[],e3(e,s=(!n&&t||e).__k=jn(Yo,null,[s]),i||Dw,Dw,e.namespaceURI,!n&&t?[t]:i?null:e.firstChild?d0.call(e.childNodes):null,o,!n&&t?t:i?i.__e:e.firstChild,n,r),RU(o,s,r)}function AU(s,e){tb(s,e,AU)}function aee(s,e,t){var n,i,o,r,a=zc({},s.props);for(o in s.type&&s.type.defaultProps&&(r=s.type.defaultProps),e)o=="key"?n=e[o]:o=="ref"?i=e[o]:a[o]=e[o]===void 0&&r!==void 0?r[o]:e[o];return arguments.length>2&&(a.children=arguments.length>3?d0.call(arguments,2):t),wC(s.type,a,n||s.key,i||s.ref,null)}function aT(s,e){var t={__c:e="__cC"+LU++,__:s,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,o;return this.getChildContext||(i=new Set,(o={})[e]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(r){this.props.value!==r.value&&i.forEach(function(a){a.__e=!0,y2(a)})},this.sub=function(r){i.add(r);var a=r.componentWillUnmount;r.componentWillUnmount=function(){i&&i.delete(r),a&&a.call(r)}}),n.children}};return t.Provider.__=t.Consumer.contextType=t}d0=xU.slice,xt={__e:function(s,e,t,n){for(var i,o,r;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(s)),r=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(s,n||{}),r=i.__d),r)return i.__E=i}catch(a){s=a}throw s}},yU=0,SU=function(s){return s!=null&&s.constructor==null},Xr.prototype.setState=function(s,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=zc({},this.state),typeof s=="function"&&(s=s(zc({},t),this.props)),s&&zc(t,s),s!=null&&this.__v&&(e&&this._sb.push(e),y2(this))},Xr.prototype.forceUpdate=function(s){this.__v&&(this.__e=!0,s&&this.__h.push(s),y2(this))},Xr.prototype.render=Yo,af=[],kU=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,v2=function(s,e){return s.__v.__b-e.__v.__b},vk.__r=0,J5=0,C2=b7(!1),w2=b7(!0),LU=0;var lee=0;function ui(s,e,t,n,i,o){e||(e={});var r,a,l=e;"ref"in e&&(r=e.ref,delete e.ref);var c={type:s,props:l,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--lee,__i:-1,__u:0,__source:i,__self:o};if(typeof s=="function"&&(r=s.defaultProps))for(a in r)l[a]===void 0&&(l[a]=r[a]);return xt.vnode&&xt.vnode(c),c}var hd,On,nN,v7,nb=0,PU=[],ei=xt,C7=ei.__b,w7=ei.__r,y7=ei.diffed,S7=ei.__c,k7=ei.unmount,L7=ei.__;function wm(s,e){ei.__h&&ei.__h(On,s,nb||e),nb=0;var t=On.__H||(On.__H={__:[],__h:[]});return s>=t.__.length&&t.__.push({}),t.__[s]}function Id(s){return nb=1,lT(OU,s)}function lT(s,e,t){var n=wm(hd++,2);if(n.t=s,!n.__c&&(n.__=[t?t(e):OU(void 0,e),function(a){var l=n.__N?n.__N[0]:n.__[0],c=n.t(l,a);l!==c&&(n.__N=[c,n.__[1]],n.__c.setState({}))}],n.__c=On,!On.u)){var i=function(a,l,c){if(!n.__c.__H)return!0;var d=n.__c.__H.__.filter(function(u){return!!u.__c});if(d.every(function(u){return!u.__N}))return!o||o.call(this,a,l,c);var h=!1;return d.forEach(function(u){if(u.__N){var f=u.__[0];u.__=u.__N,u.__N=void 0,f!==u.__[0]&&(h=!0)}}),!(!h&&n.__c.props===a)&&(!o||o.call(this,a,l,c))};On.u=!0;var o=On.shouldComponentUpdate,r=On.componentWillUpdate;On.componentWillUpdate=function(a,l,c){if(this.__e){var d=o;o=void 0,i(a,l,c),o=d}r&&r.call(this,a,l,c)},On.shouldComponentUpdate=i}return n.__N||n.__}function Ss(s,e){var t=wm(hd++,3);!ei.__s&&o3(t.__H,e)&&(t.__=s,t.i=e,On.__H.__h.push(t))}function ym(s,e){var t=wm(hd++,4);!ei.__s&&o3(t.__H,e)&&(t.__=s,t.i=e,On.__h.push(t))}function Ub(s){return nb=5,Td(function(){return{current:s}},[])}function n3(s,e,t){nb=6,ym(function(){return typeof s=="function"?(s(e()),function(){return s(null)}):s?(s.current=e(),function(){return s.current=null}):void 0},t==null?t:t.concat(s))}function Td(s,e){var t=wm(hd++,7);return o3(t.__H,e)&&(t.__=s(),t.__H=e,t.__h=s),t.__}function ud(s,e){return nb=8,Td(function(){return s},e)}function jb(s){var e=On.context[s.__c],t=wm(hd++,9);return t.c=s,e?(t.__==null&&(t.__=!0,e.sub(On)),e.props.value):s.__}function i3(s,e){ei.useDebugValue&&ei.useDebugValue(e?e(s):s)}function cee(s){var e=wm(hd++,10),t=Id();return e.__=s,On.componentDidCatch||(On.componentDidCatch=function(n,i){e.__&&e.__(n,i),t[1](n)}),[t[0],function(){t[1](void 0)}]}function s3(){var s=wm(hd++,11);if(!s.__){for(var e=On.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var t=e.__m||(e.__m=[0,0]);s.__="P"+t[0]+"-"+t[1]++}return s.__}function dee(){for(var s;s=PU.shift();)if(s.__P&&s.__H)try{s.__H.__h.forEach(xS),s.__H.__h.forEach(S2),s.__H.__h=[]}catch(e){s.__H.__h=[],ei.__e(e,s.__v)}}ei.__b=function(s){On=null,C7&&C7(s)},ei.__=function(s,e){s&&e.__k&&e.__k.__m&&(s.__m=e.__k.__m),L7&&L7(s,e)},ei.__r=function(s){w7&&w7(s),hd=0;var e=(On=s.__c).__H;e&&(nN===On?(e.__h=[],On.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.i=t.__N=void 0})):(e.__h.forEach(xS),e.__h.forEach(S2),e.__h=[],hd=0)),nN=On},ei.diffed=function(s){y7&&y7(s);var e=s.__c;e&&e.__H&&(e.__H.__h.length&&(PU.push(e)!==1&&v7===ei.requestAnimationFrame||((v7=ei.requestAnimationFrame)||hee)(dee)),e.__H.__.forEach(function(t){t.i&&(t.__H=t.i),t.i=void 0})),nN=On=null},ei.__c=function(s,e){e.some(function(t){try{t.__h.forEach(xS),t.__h=t.__h.filter(function(n){return!n.__||S2(n)})}catch(n){e.some(function(i){i.__h&&(i.__h=[])}),e=[],ei.__e(n,t.__v)}}),S7&&S7(s,e)},ei.unmount=function(s){k7&&k7(s);var e,t=s.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{xS(n)}catch(i){e=i}}),t.__H=void 0,e&&ei.__e(e,t.__v))};var x7=typeof requestAnimationFrame=="function";function hee(s){var e,t=function(){clearTimeout(n),x7&&cancelAnimationFrame(e),setTimeout(s)},n=setTimeout(t,100);x7&&(e=requestAnimationFrame(t))}function xS(s){var e=On,t=s.__c;typeof t=="function"&&(s.__c=void 0,t()),On=e}function S2(s){var e=On;s.__c=s.__(),On=e}function o3(s,e){return!s||s.length!==e.length||e.some(function(t,n){return t!==s[n]})}function OU(s,e){return typeof e=="function"?e(s):e}function k2(s,e){for(var t in s)if(t!=="__source"&&!(t in e))return!0;for(var n in e)if(n!=="__source"&&s[n]!==e[n])return!0;return!1}function Ck(s,e){this.props=s,this.context=e}function r3(s,e){function t(i){var o=this.props.ref,r=o==i.ref;return!r&&o&&(o.call?o(null):o.current=null),e?!e(this.props,i)||!r:k2(this.props,i)}function n(i){return this.shouldComponentUpdate=t,jn(s,i)}return n.displayName="Memo("+(s.displayName||s.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n}(Ck.prototype=new Xr).isPureReactComponent=!0,Ck.prototype.shouldComponentUpdate=function(s,e){return k2(this.props,s)||k2(this.state,e)};var D7=xt.__b;xt.__b=function(s){s.type&&s.type.__f&&s.ref&&(s.props.ref=s.ref,s.ref=null),D7&&D7(s)};var uee=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Sm(s){function e(t){if(!("ref"in t))return s(t,null);var n=t.ref;delete t.ref;var i=s(t,n);return t.ref=n,i}return e.$$typeof=uee,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(s.displayName||s.name)+")",e}var I7=function(s,e){return s==null?null:id(id(s).map(e))},FU={map:I7,forEach:I7,count:function(s){return s?id(s).length:0},only:function(s){var e=id(s);if(e.length!==1)throw"Children.only";return e[0]},toArray:id},fee=xt.__e;xt.__e=function(s,e,t,n){if(s.then){for(var i,o=e;o=o.__;)if((i=o.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(s,e)}fee(s,e,t,n)};var T7=xt.unmount;function WU(s,e,t){return s&&(s.__c&&s.__c.__H&&(s.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),s.__c.__H=null),(s=function(n,i){for(var o in i)n[o]=i[o];return n}({},s)).__c!=null&&(s.__c.__P===t&&(s.__c.__P=e),s.__c=null),s.__k=s.__k&&s.__k.map(function(n){return WU(n,e,t)})),s}function BU(s,e,t){return s&&t&&(s.__v=null,s.__k=s.__k&&s.__k.map(function(n){return BU(n,e,t)}),s.__c&&s.__c.__P===e&&(s.__e&&t.appendChild(s.__e),s.__c.__e=!0,s.__c.__P=t)),s}function m_(){this.__u=0,this.t=null,this.__b=null}function HU(s){var e=s.__.__c;return e&&e.__a&&e.__a(s)}function a3(s){var e,t,n;function i(o){if(e||(e=s()).then(function(r){t=r.default||r},function(r){n=r}),n)throw n;if(!t)throw e;return jn(t,o)}return i.displayName="Lazy",i.__f=!0,i}function Dp(){this.u=null,this.o=null}xt.unmount=function(s){var e=s.__c;e&&e.__R&&e.__R(),e&&32&s.__u&&(s.type=null),T7&&T7(s)},(m_.prototype=new Xr).__c=function(s,e){var t=e.__c,n=this;n.t==null&&(n.t=[]),n.t.push(t);var i=HU(n.__v),o=!1,r=function(){o||(o=!0,t.__R=null,i?i(a):a())};t.__R=r;var a=function(){if(!--n.__u){if(n.state.__a){var l=n.state.__a;n.__v.__k[0]=BU(l,l.__c.__P,l.__c.__O)}var c;for(n.setState({__a:n.__b=null});c=n.t.pop();)c.forceUpdate()}};n.__u++||32&e.__u||n.setState({__a:n.__b=n.__v.__k[0]}),s.then(r,r)},m_.prototype.componentWillUnmount=function(){this.t=[]},m_.prototype.render=function(s,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=WU(this.__b,t,n.__O=n.__P)}this.__b=null}var i=e.__a&&jn(Yo,null,s.fallback);return i&&(i.__u&=-33),[jn(Yo,null,e.__a?null:s.children),i]};var E7=function(s,e,t){if(++t[1]===t[0]&&s.o.delete(e),s.props.revealOrder&&(s.props.revealOrder[0]!=="t"||!s.o.size))for(t=s.u;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;s.u=t=t[2]}};function gee(s){return this.getChildContext=function(){return s.context},s.children}function mee(s){var e=this,t=s.i;e.componentWillUnmount=function(){tb(null,e.l),e.l=null,e.i=null},e.i&&e.i!==t&&e.componentWillUnmount(),e.l||(e.i=t,e.l={nodeType:1,parentNode:t,childNodes:[],contains:function(){return!0},appendChild:function(n){this.childNodes.push(n),e.i.appendChild(n)},insertBefore:function(n,i){this.childNodes.push(n),e.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),e.i.removeChild(n)}}),tb(jn(gee,{context:e.context},s.__v),e.l)}function VU(s,e){var t=jn(mee,{__v:s,i:e});return t.containerInfo=e,t}(Dp.prototype=new Xr).__a=function(s){var e=this,t=HU(e.__v),n=e.o.get(s);return n[0]++,function(i){var o=function(){e.props.revealOrder?(n.push(i),E7(e,s,n)):i()};t?t(o):o()}},Dp.prototype.render=function(s){this.u=null,this.o=new Map;var e=id(s.children);s.revealOrder&&s.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.o.set(e[t],this.u=[1,0,this.u]);return s.children},Dp.prototype.componentDidUpdate=Dp.prototype.componentDidMount=function(){var s=this;this.o.forEach(function(e,t){E7(s,t,e)})};var zU=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,pee=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,_ee=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,bee=/[A-Z0-9]/g,vee=typeof document<"u",Cee=function(s){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(s)};function $U(s,e,t){return e.__k==null&&(e.textContent=""),tb(s,e),typeof t=="function"&&t(),s?s.__c:null}function UU(s,e,t){return AU(s,e),typeof t=="function"&&t(),s?s.__c:null}Xr.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(s){Object.defineProperty(Xr.prototype,s,{configurable:!0,get:function(){return this["UNSAFE_"+s]},set:function(e){Object.defineProperty(this,s,{configurable:!0,writable:!0,value:e})}})});var N7=xt.event;function wee(){}function yee(){return this.cancelBubble}function See(){return this.defaultPrevented}xt.event=function(s){return N7&&(s=N7(s)),s.persist=wee,s.isPropagationStopped=yee,s.isDefaultPrevented=See,s.nativeEvent=s};var l3,kee={enumerable:!1,configurable:!0,get:function(){return this.class}},R7=xt.vnode;xt.vnode=function(s){typeof s.type=="string"&&function(e){var t=e.props,n=e.type,i={},o=n.indexOf("-")===-1;for(var r in t){var a=t[r];if(!(r==="value"&&"defaultValue"in t&&a==null||vee&&r==="children"&&n==="noscript"||r==="class"||r==="className")){var l=r.toLowerCase();r==="defaultValue"&&"value"in t&&t.value==null?r="value":r==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?r="ondblclick":l!=="onchange"||n!=="input"&&n!=="textarea"||Cee(t.type)?l==="onfocus"?r="onfocusin":l==="onblur"?r="onfocusout":_ee.test(r)&&(r=l):l=r="oninput":o&&pee.test(r)?r=r.replace(bee,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&i[r=l]&&(r="oninputCapture"),i[r]=a}}n=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=id(t.children).forEach(function(c){c.props.selected=i.value.indexOf(c.props.value)!=-1})),n=="select"&&i.defaultValue!=null&&(i.value=id(t.children).forEach(function(c){c.props.selected=i.multiple?i.defaultValue.indexOf(c.props.value)!=-1:i.defaultValue==c.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",kee)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i}(s),s.$$typeof=zU,R7&&R7(s)};var M7=xt.__r;xt.__r=function(s){M7&&M7(s),l3=s.__c};var A7=xt.diffed;xt.diffed=function(s){A7&&A7(s);var e=s.props,t=s.__e;t!=null&&s.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value),l3=null};var jU={ReactCurrentDispatcher:{current:{readContext:function(s){return l3.__n[s.__c].props.value},useCallback:ud,useContext:jb,useDebugValue:i3,useDeferredValue:d3,useEffect:Ss,useId:s3,useImperativeHandle:n3,useInsertionEffect:u3,useLayoutEffect:ym,useMemo:Td,useReducer:lT,useRef:Ub,useState:Id,useSyncExternalStore:f3,useTransition:h3}}},Lee="18.3.1";function qU(s){return jn.bind(null,s)}function h0(s){return!!s&&s.$$typeof===zU}function KU(s){return h0(s)&&s.type===Yo}function GU(s){return!!s&&!!s.displayName&&(typeof s.displayName=="string"||s.displayName instanceof String)&&s.displayName.startsWith("Memo(")}function ZU(s){return h0(s)?aee.apply(null,arguments):s}function YU(s){return!!s.__k&&(tb(null,s),!0)}function XU(s){return s&&(s.base||s.nodeType===1&&s)||null}var QU=function(s,e){return s(e)},JU=function(s,e){return s(e)},ej=Yo;function c3(s){s()}function d3(s){return s}function h3(){return[!1,c3]}var u3=ym,tj=h0;function f3(s,e){var t=e(),n=Id({h:{__:t,v:e}}),i=n[0].h,o=n[1];return ym(function(){i.__=t,i.v=e,iN(i)&&o({h:i})},[s,t,e]),Ss(function(){return iN(i)&&o({h:i}),s(function(){iN(i)&&o({h:i})})},[s]),t}function iN(s){var e,t,n=s.v,i=s.__;try{var o=n();return!((e=i)===(t=o)&&(e!==0||1/e==1/t)||e!=e&&t!=t)}catch{return!0}}var xee={useState:Id,useId:s3,useReducer:lT,useEffect:Ss,useLayoutEffect:ym,useInsertionEffect:u3,useTransition:h3,useDeferredValue:d3,useSyncExternalStore:f3,startTransition:c3,useRef:Ub,useImperativeHandle:n3,useMemo:Td,useCallback:ud,useContext:jb,useDebugValue:i3,version:"18.3.1",Children:FU,render:$U,hydrate:UU,unmountComponentAtNode:YU,createPortal:VU,createElement:jn,createContext:aT,createFactory:qU,cloneElement:ZU,createRef:IU,Fragment:Yo,isValidElement:h0,isElement:tj,isFragment:KU,isMemo:GU,findDOMNode:XU,Component:Xr,PureComponent:Ck,memo:r3,forwardRef:Sm,flushSync:JU,unstable_batchedUpdates:QU,StrictMode:ej,Suspense:m_,SuspenseList:Dp,lazy:a3,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:jU};const FPe=Object.freeze(Object.defineProperty({__proto__:null,Children:FU,Component:Xr,Fragment:Yo,PureComponent:Ck,StrictMode:ej,Suspense:m_,SuspenseList:Dp,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:jU,cloneElement:ZU,createContext:aT,createElement:jn,createFactory:qU,createPortal:VU,createRef:IU,default:xee,findDOMNode:XU,flushSync:JU,forwardRef:Sm,hydrate:UU,isElement:tj,isFragment:KU,isMemo:GU,isValidElement:h0,lazy:a3,memo:r3,render:$U,startTransition:c3,unmountComponentAtNode:YU,unstable_batchedUpdates:QU,useCallback:ud,useContext:jb,useDebugValue:i3,useDeferredValue:d3,useEffect:Ss,useErrorBoundary:cee,useId:s3,useImperativeHandle:n3,useInsertionEffect:u3,useLayoutEffect:ym,useMemo:Td,useReducer:lT,useRef:Ub,useState:Id,useSyncExternalStore:f3,useTransition:h3,version:Lee},Symbol.toStringTag,{value:"Module"}));function Pf(s){return Object.keys(s)}function sN(s){return s&&typeof s=="object"&&!Array.isArray(s)}function g3(s,e){const t={...s},n=e;return sN(s)&&sN(e)&&Object.keys(e).forEach(i=>{sN(n[i])&&i in s?t[i]=g3(t[i],n[i]):t[i]=n[i]}),t}function Dee(s){var e;return typeof s!="string"||!s.includes("var(--mantine-scale)")?s:(e=s.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function Iee(s){const e=Dee(s);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function oN(s){return s==="0rem"?"0rem":`calc(${s} * var(--mantine-scale))`}function nj(s,{shouldScale:e=!1}={}){function t(n){if(n===0||n==="0")return`0${s}`;if(typeof n=="number"){const i=`${n/16}${s}`;return e?oN(i):i}if(typeof n=="string"){if(n===""||n.startsWith("calc(")||n.startsWith("clamp(")||n.includes("rgba("))return n;if(n.includes(","))return n.split(",").map(o=>t(o)).join(",");if(n.includes(" "))return n.split(" ").map(o=>t(o)).join(" ");if(n.includes(s))return e?oN(n):n;const i=n.replace("px","");if(!Number.isNaN(Number(i))){const o=`${Number(i)/16}${s}`;return e?oN(o):o}}return n}return t}const Re=nj("rem",{shouldScale:!0}),P7=nj("em");function Tee(s,e){try{return s.addEventListener("change",e),()=>s.removeEventListener("change",e)}catch{return s.addListener(e),()=>s.removeListener(e)}}function Eee(s,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(s).matches:!1}function O7(s,e,{getInitialValueInEffect:t}={getInitialValueInEffect:!0}){const[n,i]=Id(t?e:Eee(s)),o=Ub();return Ss(()=>{if("matchMedia"in window)return o.current=window.matchMedia(s),i(o.current.matches),Tee(o.current,r=>i(r.matches))},[s]),n}const ij=typeof document<"u"?ym:Ss;function F7(s,e,t){Ss(()=>(window.addEventListener(s,e,t),()=>window.removeEventListener(s,e,t)),[s,e])}const W7={passive:!0};function Nee(){const[s,e]=Id({width:0,height:0}),t=ud(()=>{e({width:window.innerWidth||0,height:window.innerHeight||0})},[]);return F7("resize",t,W7),F7("orientationchange",t,W7),Ss(t,[]),s}function sj(s){var e,t,n="";if(typeof s=="string"||typeof s=="number")n+=s;else if(typeof s=="object")if(Array.isArray(s)){var i=s.length;for(e=0;e<i;e++)s[e]&&(t=sj(s[e]))&&(n&&(n+=" "),n+=t)}else for(t in s)s[t]&&(n&&(n+=" "),n+=t);return n}function Ree(){for(var s,e,t=0,n="",i=arguments.length;t<i;t++)(s=arguments[t])&&(e=sj(s))&&(n&&(n+=" "),n+=e);return n}const oj=aT(null);function km(){const s=jb(oj);if(!s)throw new Error("[@mantine/core] MantineProvider was not found in tree");return s}function Mee(){return km().cssVariablesResolver}function WPe(){return km().classNamesPrefix}function rj(){return km().getStyleNonce}function BPe(){return km().withStaticClasses}function HPe(){return km().headless}function VPe(){var s;return(s=km().stylesTransform)==null?void 0:s.sx}function zPe(){var s;return(s=km().stylesTransform)==null?void 0:s.styles}function Aee(s){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(s)}function Pee(s){let e=s.replace("#","");if(e.length===3){const r=e.split("");e=[r[0],r[0],r[1],r[1],r[2],r[2]].join("")}if(e.length===8){const r=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:r}}const t=parseInt(e,16),n=t>>16&255,i=t>>8&255,o=t&255;return{r:n,g:i,b:o,a:1}}function Oee(s){const[e,t,n,i]=s.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:t,b:n,a:i||1}}function Fee(s){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,t=s.match(e);if(!t)return{r:0,g:0,b:0,a:1};const n=parseInt(t[1],10),i=parseInt(t[2],10)/100,o=parseInt(t[3],10)/100,r=t[5]?parseFloat(t[5]):void 0,a=(1-Math.abs(2*o-1))*i,l=n/60,c=a*(1-Math.abs(l%2-1)),d=o-a/2;let h,u,f;return l>=0&&l<1?(h=a,u=c,f=0):l>=1&&l<2?(h=c,u=a,f=0):l>=2&&l<3?(h=0,u=a,f=c):l>=3&&l<4?(h=0,u=c,f=a):l>=4&&l<5?(h=c,u=0,f=a):(h=a,u=0,f=c),{r:Math.round((h+d)*255),g:Math.round((u+d)*255),b:Math.round((f+d)*255),a:r||1}}function m3(s){return Aee(s)?Pee(s):s.startsWith("rgb")?Oee(s):s.startsWith("hsl")?Fee(s):{r:0,g:0,b:0,a:1}}function hy(s,e){if(s.startsWith("var("))return`color-mix(in srgb, ${s}, black ${e*100}%)`;const{r:t,g:n,b:i,a:o}=m3(s),r=1-e,a=l=>Math.round(l*r);return`rgba(${a(t)}, ${a(n)}, ${a(i)}, ${o})`}function Iw(s,e){return typeof s.primaryShade=="number"?s.primaryShade:e==="dark"?s.primaryShade.dark:s.primaryShade.light}function rN(s){return s<=.03928?s/12.92:((s+.055)/1.055)**2.4}function Wee(s){const e=s.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function Bee(s){if(s.startsWith("oklch("))return(Wee(s)||0)/100;const{r:e,g:t,b:n}=m3(s),i=e/255,o=t/255,r=n/255,a=rN(i),l=rN(o),c=rN(r);return .2126*a+.7152*l+.0722*c}function Sv(s,e=.179){return s.startsWith("var(")?!1:Bee(s)>e}function p3({color:s,theme:e,colorScheme:t}){if(typeof s!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof s}`);if(s==="bright")return{color:s,value:t==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Sv(t==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(s==="dimmed")return{color:s,value:t==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:Sv(t==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(s==="white"||s==="black")return{color:s,value:s==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:Sv(s==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${s}`};const[n,i]=s.split("."),o=i?Number(i):void 0,r=n in e.colors;if(r){const a=o!==void 0?e.colors[n][o]:e.colors[n][Iw(e,t||"light")];return{color:n,value:a,shade:o,isThemeColor:r,isLight:Sv(a,e.luminanceThreshold),variable:i?`--mantine-color-${n}-${o}`:`--mantine-color-${n}-filled`}}return{color:s,value:s,isThemeColor:r,isLight:Sv(s,e.luminanceThreshold),shade:o,variable:void 0}}function B7(s,e){const t=p3({color:s||e.primaryColor,theme:e});return t.variable?`var(${t.variable})`:s}function H7(s,e){const t={from:(s==null?void 0:s.from)||e.defaultGradient.from,to:(s==null?void 0:s.to)||e.defaultGradient.to,deg:(s==null?void 0:s.deg)||e.defaultGradient.deg||0},n=B7(t.from,e),i=B7(t.to,e);return`linear-gradient(${t.deg}deg, ${n} 0%, ${i} 100%)`}function vc(s,e){if(typeof s!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(s.startsWith("var(")){const o=(1-e)*100;return`color-mix(in srgb, ${s}, transparent ${o}%)`}if(s.startsWith("oklch"))return s.includes("/")?s.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):s.replace(")",` / ${e})`);const{r:t,g:n,b:i}=m3(s);return`rgba(${t}, ${n}, ${i}, ${e})`}const Km=vc,Hee=({color:s,theme:e,variant:t,gradient:n,autoContrast:i})=>{const o=p3({color:s,theme:e}),r=typeof i=="boolean"?i:e.autoContrast;if(t==="filled"){const a=r&&o.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return o.isThemeColor?o.shade===void 0?{background:`var(--mantine-color-${s}-filled)`,hover:`var(--mantine-color-${s}-filled-hover)`,color:a,border:`${Re(1)} solid transparent`}:{background:`var(--mantine-color-${o.color}-${o.shade})`,hover:`var(--mantine-color-${o.color}-${o.shade===9?8:o.shade+1})`,color:a,border:`${Re(1)} solid transparent`}:{background:s,hover:hy(s,.1),color:a,border:`${Re(1)} solid transparent`}}if(t==="light"){if(o.isThemeColor){if(o.shade===void 0)return{background:`var(--mantine-color-${s}-light)`,hover:`var(--mantine-color-${s}-light-hover)`,color:`var(--mantine-color-${s}-light-color)`,border:`${Re(1)} solid transparent`};const a=e.colors[o.color][o.shade];return{background:vc(a,.1),hover:vc(a,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${Re(1)} solid transparent`}}return{background:vc(s,.1),hover:vc(s,.12),color:s,border:`${Re(1)} solid transparent`}}if(t==="outline")return o.isThemeColor?o.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${s}-outline-hover)`,color:`var(--mantine-color-${s}-outline)`,border:`${Re(1)} solid var(--mantine-color-${s}-outline)`}:{background:"transparent",hover:vc(e.colors[o.color][o.shade],.05),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${Re(1)} solid var(--mantine-color-${o.color}-${o.shade})`}:{background:"transparent",hover:vc(s,.05),color:s,border:`${Re(1)} solid ${s}`};if(t==="subtle"){if(o.isThemeColor){if(o.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${s}-light-hover)`,color:`var(--mantine-color-${s}-light-color)`,border:`${Re(1)} solid transparent`};const a=e.colors[o.color][o.shade];return{background:"transparent",hover:vc(a,.12),color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${Re(1)} solid transparent`}}return{background:"transparent",hover:vc(s,.12),color:s,border:`${Re(1)} solid transparent`}}return t==="transparent"?o.isThemeColor?o.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s}-light-color)`,border:`${Re(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${o.color}-${Math.min(o.shade,6)})`,border:`${Re(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:s,border:`${Re(1)} solid transparent`}:t==="white"?o.isThemeColor?o.shade===void 0?{background:"var(--mantine-color-white)",hover:hy(e.white,.01),color:`var(--mantine-color-${s}-filled)`,border:`${Re(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:hy(e.white,.01),color:`var(--mantine-color-${o.color}-${o.shade})`,border:`${Re(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:hy(e.white,.01),color:s,border:`${Re(1)} solid transparent`}:t==="gradient"?{background:H7(n,e),hover:H7(n,e),color:"var(--mantine-color-white)",border:"none"}:t==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Re(1)} solid var(--mantine-color-default-border)`}:{}},Vee={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},V7="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",_3={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:Vee,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:Hee,autoContrast:!1,luminanceThreshold:.3,fontFamily:V7,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:V7,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Re(34),lineHeight:"1.3"},h2:{fontSize:Re(26),lineHeight:"1.35"},h3:{fontSize:Re(22),lineHeight:"1.4"},h4:{fontSize:Re(18),lineHeight:"1.45"},h5:{fontSize:Re(16),lineHeight:"1.5"},h6:{fontSize:Re(14),lineHeight:"1.5"}}},fontSizes:{xs:Re(12),sm:Re(14),md:Re(16),lg:Re(18),xl:Re(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Re(2),sm:Re(4),md:Re(8),lg:Re(16),xl:Re(32)},spacing:{xs:Re(10),sm:Re(12),md:Re(16),lg:Re(20),xl:Re(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Re(1)} ${Re(3)} rgba(0, 0, 0, 0.05), 0 ${Re(1)} ${Re(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Re(1)} ${Re(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Re(10)} ${Re(15)} ${Re(-5)}, rgba(0, 0, 0, 0.04) 0 ${Re(7)} ${Re(7)} ${Re(-5)}`,md:`0 ${Re(1)} ${Re(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Re(20)} ${Re(25)} ${Re(-5)}, rgba(0, 0, 0, 0.04) 0 ${Re(10)} ${Re(10)} ${Re(-5)}`,lg:`0 ${Re(1)} ${Re(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Re(28)} ${Re(23)} ${Re(-7)}, rgba(0, 0, 0, 0.04) 0 ${Re(12)} ${Re(12)} ${Re(-7)}`,xl:`0 ${Re(1)} ${Re(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Re(36)} ${Re(28)} ${Re(-7)}, rgba(0, 0, 0, 0.04) 0 ${Re(17)} ${Re(17)} ${Re(-7)}`},other:{},components:{}};function z7(s){return s==="auto"||s==="dark"||s==="light"}function zee({key:s="mantine-color-scheme-value"}={}){let e;return{get:t=>{if(typeof window>"u")return t;try{const n=window.localStorage.getItem(s);return z7(n)?n:t}catch{return t}},set:t=>{try{window.localStorage.setItem(s,t)}catch(n){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",n)}},subscribe:t=>{e=n=>{n.storageArea===window.localStorage&&n.key===s&&z7(n.newValue)&&t(n.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(s)}}}const $ee="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",$7="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function aN(s){return s<0||s>9?!1:parseInt(s.toString(),10)===s}function U7(s){if(!(s.primaryColor in s.colors))throw new Error($ee);if(typeof s.primaryShade=="object"&&(!aN(s.primaryShade.dark)||!aN(s.primaryShade.light)))throw new Error($7);if(typeof s.primaryShade=="number"&&!aN(s.primaryShade))throw new Error($7)}function Uee(s,e){var n;if(!e)return U7(s),s;const t=g3(s,e);return e.fontFamily&&!((n=e.headings)!=null&&n.fontFamily)&&(t.headings.fontFamily=e.fontFamily),U7(t),t}const b3=aT(null),jee=()=>jb(b3)||_3;function aj(){const s=jb(b3);if(!s)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return s}function lj({theme:s,children:e,inherit:t=!0}){const n=jee(),i=Td(()=>Uee(t?n:_3,s),[s,n,t]);return ui(b3.Provider,{value:i,children:e})}lj.displayName="@mantine/core/MantineThemeProvider";function qee(){const s=aj(),e=rj(),t=Pf(s.breakpoints).reduce((n,i)=>{const o=s.breakpoints[i].includes("px"),r=Iee(s.breakpoints[i]),a=o?`${r-.1}px`:P7(r-.1),l=o?`${r}px`:P7(r);return`${n}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return ui("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:t}})}function lN(s){return Object.entries(s).map(([e,t])=>`${e}: ${t};`).join("")}function kv(s,e){return(Array.isArray(s)?s:[s]).reduce((n,i)=>`${i}{${n}}`,e)}function Kee(s,e){const t=lN(s.variables),n=t?kv(e,t):"",i=lN(s.dark),o=lN(s.light),r=i?kv(e===":host"?`${e}([data-mantine-color-scheme="dark"])`:`${e}[data-mantine-color-scheme="dark"]`,i):"",a=o?kv(e===":host"?`${e}([data-mantine-color-scheme="light"])`:`${e}[data-mantine-color-scheme="light"]`,o):"";return`${n}${r}${a}`}function Gee({color:s,theme:e,autoContrast:t}){return(typeof t=="boolean"?t:e.autoContrast)&&p3({color:s||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function j7(s,e){return Gee({color:s.colors[s.primaryColor][Iw(s,e)],theme:s,autoContrast:null})}function uy({theme:s,color:e,colorScheme:t,name:n=e,withColorValues:i=!0}){if(!s.colors[e])return{};if(t==="light"){const a=Iw(s,"light"),l={[`--mantine-color-${n}-text`]:`var(--mantine-color-${n}-filled)`,[`--mantine-color-${n}-filled`]:`var(--mantine-color-${n}-${a})`,[`--mantine-color-${n}-filled-hover`]:`var(--mantine-color-${n}-${a===9?8:a+1})`,[`--mantine-color-${n}-light`]:Km(s.colors[e][a],.1),[`--mantine-color-${n}-light-hover`]:Km(s.colors[e][a],.12),[`--mantine-color-${n}-light-color`]:`var(--mantine-color-${n}-${a})`,[`--mantine-color-${n}-outline`]:`var(--mantine-color-${n}-${a})`,[`--mantine-color-${n}-outline-hover`]:Km(s.colors[e][a],.05)};return i?{[`--mantine-color-${n}-0`]:s.colors[e][0],[`--mantine-color-${n}-1`]:s.colors[e][1],[`--mantine-color-${n}-2`]:s.colors[e][2],[`--mantine-color-${n}-3`]:s.colors[e][3],[`--mantine-color-${n}-4`]:s.colors[e][4],[`--mantine-color-${n}-5`]:s.colors[e][5],[`--mantine-color-${n}-6`]:s.colors[e][6],[`--mantine-color-${n}-7`]:s.colors[e][7],[`--mantine-color-${n}-8`]:s.colors[e][8],[`--mantine-color-${n}-9`]:s.colors[e][9],...l}:l}const o=Iw(s,"dark"),r={[`--mantine-color-${n}-text`]:`var(--mantine-color-${n}-4)`,[`--mantine-color-${n}-filled`]:`var(--mantine-color-${n}-${o})`,[`--mantine-color-${n}-filled-hover`]:`var(--mantine-color-${n}-${o===9?8:o+1})`,[`--mantine-color-${n}-light`]:Km(s.colors[e][Math.max(0,o-2)],.15),[`--mantine-color-${n}-light-hover`]:Km(s.colors[e][Math.max(0,o-2)],.2),[`--mantine-color-${n}-light-color`]:`var(--mantine-color-${n}-${Math.max(o-5,0)})`,[`--mantine-color-${n}-outline`]:`var(--mantine-color-${n}-${Math.max(o-4,0)})`,[`--mantine-color-${n}-outline-hover`]:Km(s.colors[e][Math.max(o-4,0)],.05)};return i?{[`--mantine-color-${n}-0`]:s.colors[e][0],[`--mantine-color-${n}-1`]:s.colors[e][1],[`--mantine-color-${n}-2`]:s.colors[e][2],[`--mantine-color-${n}-3`]:s.colors[e][3],[`--mantine-color-${n}-4`]:s.colors[e][4],[`--mantine-color-${n}-5`]:s.colors[e][5],[`--mantine-color-${n}-6`]:s.colors[e][6],[`--mantine-color-${n}-7`]:s.colors[e][7],[`--mantine-color-${n}-8`]:s.colors[e][8],[`--mantine-color-${n}-9`]:s.colors[e][9],...r}:r}function Zee(s){return!!s&&typeof s=="object"&&"mantine-virtual-color"in s}function Gm(s,e,t){Pf(e).forEach(n=>Object.assign(s,{[`--mantine-${t}-${n}`]:e[n]}))}const cj=s=>{const e=Iw(s,"light"),t=s.defaultRadius in s.radius?s.radius[s.defaultRadius]:Re(s.defaultRadius),n={variables:{"--mantine-scale":s.scale.toString(),"--mantine-cursor-type":s.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":s.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":s.fontSmoothing?"grayscale":"unset","--mantine-color-white":s.white,"--mantine-color-black":s.black,"--mantine-line-height":s.lineHeights.md,"--mantine-font-family":s.fontFamily,"--mantine-font-family-monospace":s.fontFamilyMonospace,"--mantine-font-family-headings":s.headings.fontFamily,"--mantine-heading-font-weight":s.headings.fontWeight,"--mantine-heading-text-wrap":s.headings.textWrap,"--mantine-radius-default":t,"--mantine-primary-color-filled":`var(--mantine-color-${s.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${s.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${s.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${s.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${s.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":j7(s,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":s.black,"--mantine-color-body":s.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${s.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":j7(s,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${s.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Gm(n.variables,s.breakpoints,"breakpoint"),Gm(n.variables,s.spacing,"spacing"),Gm(n.variables,s.fontSizes,"font-size"),Gm(n.variables,s.lineHeights,"line-height"),Gm(n.variables,s.shadows,"shadow"),Gm(n.variables,s.radius,"radius"),s.colors[s.primaryColor].forEach((o,r)=>{n.variables[`--mantine-primary-color-${r}`]=`var(--mantine-color-${s.primaryColor}-${r})`}),Pf(s.colors).forEach(o=>{const r=s.colors[o];if(Zee(r)){Object.assign(n.light,uy({theme:s,name:r.name,color:r.light,colorScheme:"light",withColorValues:!0})),Object.assign(n.dark,uy({theme:s,name:r.name,color:r.dark,colorScheme:"dark",withColorValues:!0}));return}r.forEach((a,l)=>{n.variables[`--mantine-color-${o}-${l}`]=a}),Object.assign(n.light,uy({theme:s,color:o,colorScheme:"light",withColorValues:!1})),Object.assign(n.dark,uy({theme:s,color:o,colorScheme:"dark",withColorValues:!1}))});const i=s.headings.sizes;return Pf(i).forEach(o=>{n.variables[`--mantine-${o}-font-size`]=i[o].fontSize,n.variables[`--mantine-${o}-line-height`]=i[o].lineHeight,n.variables[`--mantine-${o}-font-weight`]=i[o].fontWeight||s.headings.fontWeight}),n};function Yee({theme:s,generator:e}){const t=cj(s),n=e==null?void 0:e(s);return n?g3(t,n):t}const cN=cj(_3);function Xee(s){const e={variables:{},light:{},dark:{}};return Pf(s.variables).forEach(t=>{cN.variables[t]!==s.variables[t]&&(e.variables[t]=s.variables[t])}),Pf(s.light).forEach(t=>{cN.light[t]!==s.light[t]&&(e.light[t]=s.light[t])}),Pf(s.dark).forEach(t=>{cN.dark[t]!==s.dark[t]&&(e.dark[t]=s.dark[t])}),e}function Qee(s){return`
  ${s}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${s}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function dj({cssVariablesSelector:s,deduplicateCssVariables:e}){const t=aj(),n=rj(),i=Mee(),o=Yee({theme:t,generator:i}),r=s===":root"&&e,a=r?Xee(o):o,l=Kee(a,s);return l?ui("style",{"data-mantine-styles":!0,nonce:n==null?void 0:n(),dangerouslySetInnerHTML:{__html:`${l}${r?"":Qee(s)}`}}):null}dj.displayName="@mantine/CssVariables";function Jee(){const s=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||s(...e)}}function Zm(s,e){var n;const t=s!=="auto"?s:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(n=e())==null||n.setAttribute("data-mantine-color-scheme",t)}function ete({manager:s,defaultColorScheme:e,getRootElement:t,forceColorScheme:n}){const i=Ub(),[o,r]=Id(()=>s.get(e)),a=n||o,l=ud(d=>{n||(Zm(d,t),r(d),s.set(d))},[s.set,a,n]),c=ud(()=>{r(e),Zm(e,t),s.clear()},[s.clear,e]);return Ss(()=>(s.subscribe(l),s.unsubscribe),[s.subscribe,s.unsubscribe]),ij(()=>{Zm(s.get(e),t)},[]),Ss(()=>{var h;if(n)return Zm(n,t),()=>{};n===void 0&&Zm(o,t),i.current=window.matchMedia("(prefers-color-scheme: dark)");const d=u=>{o==="auto"&&Zm(u.matches?"dark":"light",t)};return(h=i.current)==null||h.addEventListener("change",d),()=>{var u;return(u=i.current)==null?void 0:u.removeEventListener("change",d)}},[o,n]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function tte({respectReducedMotion:s,getRootElement:e}){ij(()=>{var t;s&&((t=e())==null||t.setAttribute("data-respect-reduced-motion","true"))},[s])}Jee();function hj({theme:s,children:e,getStyleNonce:t,withStaticClasses:n=!0,withGlobalClasses:i=!0,deduplicateCssVariables:o=!0,withCssVariables:r=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=zee(),defaultColorScheme:d="light",getRootElement:h=()=>document.documentElement,cssVariablesResolver:u,forceColorScheme:f,stylesTransform:g}){const{colorScheme:p,setColorScheme:_,clearColorScheme:b}=ete({defaultColorScheme:d,forceColorScheme:f,manager:c,getRootElement:h});return tte({respectReducedMotion:(s==null?void 0:s.respectReducedMotion)||!1,getRootElement:h}),ui(oj.Provider,{value:{colorScheme:p,setColorScheme:_,clearColorScheme:b,getRootElement:h,classNamesPrefix:l,getStyleNonce:t,cssVariablesResolver:u,cssVariablesSelector:a,withStaticClasses:n,stylesTransform:g},children:ui(lj,{theme:s,children:[r&&ui(dj,{cssVariablesSelector:a,deduplicateCssVariables:o}),i&&ui(qee,{}),e]})})}hj.displayName="@mantine/core/MantineProvider";function ar(s,e=0){return s[s.length-(1+e)]}function nte(s){if(s.length===0)throw new Error("Invalid tail call");return[s.slice(0,s.length-1),s[s.length-1]]}function en(s,e,t=(n,i)=>n===i){if(s===e)return!0;if(!s||!e||s.length!==e.length)return!1;for(let n=0,i=s.length;n<i;n++)if(!t(s[n],e[n]))return!1;return!0}function ite(s,e){const t=s.length-1;e<t&&(s[e]=s[t]),s.pop()}function Tw(s,e,t){return ste(s.length,n=>t(s[n],e))}function ste(s,e){let t=0,n=s-1;for(;t<=n;){const i=(t+n)/2|0,o=e(i);if(o<0)t=i+1;else if(o>0)n=i-1;else return i}return-(t+1)}function L2(s,e,t){if(s=s|0,s>=e.length)throw new TypeError("invalid index");const n=e[Math.floor(e.length*Math.random())],i=[],o=[],r=[];for(const a of e){const l=t(a,n);l<0?i.push(a):l>0?o.push(a):r.push(a)}return s<i.length?L2(s,i,t):s<i.length+r.length?r[0]:L2(s-(i.length+r.length),o,t)}function q7(s,e){const t=[];let n;for(const i of s.slice(0).sort(e))!n||e(n[0],i)!==0?(n=[i],t.push(n)):n.push(i);return t}function*v3(s,e){let t,n;for(const i of s)n!==void 0&&e(n,i)?t.push(i):(t&&(yield t),t=[i]),n=i;t&&(yield t)}function uj(s,e){for(let t=0;t<=s.length;t++)e(t===0?void 0:s[t-1],t===s.length?void 0:s[t])}function ote(s,e){for(let t=0;t<s.length;t++)e(t===0?void 0:s[t-1],s[t],t+1===s.length?void 0:s[t+1])}function ea(s){return s.filter(e=>!!e)}function K7(s){let e=0;for(let t=0;t<s.length;t++)s[t]&&(s[e]=s[t],e+=1);s.length=e}function fj(s){return!Array.isArray(s)||s.length===0}function cs(s){return Array.isArray(s)&&s.length>0}function fd(s,e=t=>t){const t=new Set;return s.filter(n=>{const i=e(n);return t.has(i)?!1:(t.add(i),!0)})}function C3(s,e){return s.length>0?s[0]:e}function Hs(s,e){let t=typeof e=="number"?s:0;typeof e=="number"?t=s:(t=0,e=s);const n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}function cT(s,e,t){const n=s.slice(0,e),i=s.slice(e);return n.concat(t,i)}function dN(s,e){const t=s.indexOf(e);t>-1&&(s.splice(t,1),s.unshift(e))}function fy(s,e){const t=s.indexOf(e);t>-1&&(s.splice(t,1),s.push(e))}function x2(s,e){for(const t of e)s.push(t)}function w3(s){return Array.isArray(s)?s:[s]}function rte(s,e,t){const n=gj(s,e),i=s.length,o=t.length;s.length=i+o;for(let r=i-1;r>=n;r--)s[r+o]=s[r];for(let r=0;r<o;r++)s[r+n]=t[r]}function G7(s,e,t,n){const i=gj(s,e);let o=s.splice(i,t);return o===void 0&&(o=[]),rte(s,i,n),o}function gj(s,e){return e<0?Math.max(e+s.length,0):Math.min(e,s.length)}var Ew;(function(s){function e(o){return o<0}s.isLessThan=e;function t(o){return o<=0}s.isLessThanOrEqual=t;function n(o){return o>0}s.isGreaterThan=n;function i(o){return o===0}s.isNeitherLessOrGreaterThan=i,s.greaterThan=1,s.lessThan=-1,s.neitherLessOrGreaterThan=0})(Ew||(Ew={}));function ks(s,e){return(t,n)=>e(s(t),s(n))}function ate(...s){return(e,t)=>{for(const n of s){const i=n(e,t);if(!Ew.isNeitherLessOrGreaterThan(i))return i}return Ew.neitherLessOrGreaterThan}}const Qr=(s,e)=>s-e,lte=(s,e)=>Qr(s?1:0,e?1:0);function mj(s){return(e,t)=>-s(e,t)}class gd{constructor(e){this.items=e,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}const Jp=class Jp{constructor(e){this.iterate=e}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new Jp(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new Jp(t=>this.iterate(n=>t(e(n))))}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(i=>((n||Ew.isGreaterThan(e(i,t)))&&(n=!1,t=i),!0)),t}};Jp.empty=new Jp(e=>{});let Of=Jp;class wk{constructor(e){this._indexMap=e}static createSortPermutation(e,t){const n=Array.from(e.keys()).sort((i,o)=>t(e[i],e[o]));return new wk(n)}apply(e){return e.map((t,n)=>e[this._indexMap[n]])}inverse(){const e=this._indexMap.slice();for(let t=0;t<this._indexMap.length;t++)e[this._indexMap[t]]=t;return new wk(e)}}function qs(s){return typeof s=="string"}function fi(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&!(s instanceof RegExp)&&!(s instanceof Date)}function cte(s){const e=Object.getPrototypeOf(Uint8Array);return typeof s=="object"&&s instanceof e}function tu(s){return typeof s=="number"&&!isNaN(s)}function Z7(s){return!!s&&typeof s[Symbol.iterator]=="function"}function pj(s){return s===!0||s===!1}function ls(s){return typeof s>"u"}function Vl(s){return!Bo(s)}function Bo(s){return ls(s)||s===null}function gt(s,e){if(!s)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function mh(s){if(Bo(s))throw new Error("Assertion Failed: argument is undefined or null");return s}function Nw(s){return typeof s=="function"}function dte(s,e){const t=Math.min(s.length,e.length);for(let n=0;n<t;n++)hte(s[n],e[n])}function hte(s,e){if(qs(e)){if(typeof s!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Nw(e)){try{if(s instanceof e)return}catch{}if(!Bo(s)&&s.constructor===e||e.length===1&&e.call(void 0,s)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function Rc(s){if(!s||typeof s!="object"||s instanceof RegExp)return s;const e=Array.isArray(s)?[]:{};return Object.entries(s).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?Rc(n):n}),e}function ute(s){if(!s||typeof s!="object")return s;const e=[s];for(;e.length>0;){const t=e.shift();Object.freeze(t);for(const n in t)if(_j.call(t,n)){const i=t[n];typeof i=="object"&&!Object.isFrozen(i)&&!cte(i)&&e.push(i)}}return s}const _j=Object.prototype.hasOwnProperty;function bj(s,e){return D2(s,e,new Set)}function D2(s,e,t){if(Bo(s))return s;const n=e(s);if(typeof n<"u")return n;if(Array.isArray(s)){const i=[];for(const o of s)i.push(D2(o,e,t));return i}if(fi(s)){if(t.has(s))throw new Error("Cannot clone recursive data-structure");t.add(s);const i={};for(const o in s)_j.call(s,o)&&(i[o]=D2(s[o],e,t));return t.delete(s),i}return s}function dT(s,e,t=!0){return fi(s)?(fi(e)&&Object.keys(e).forEach(n=>{n in s?t&&(fi(s[n])&&fi(e[n])?dT(s[n],e[n],t):s[n]=e[n]):s[n]=e[n]}),s):e}function po(s,e){if(s===e)return!0;if(s==null||e===null||e===void 0||typeof s!=typeof e||typeof s!="object"||Array.isArray(s)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(s)){if(s.length!==e.length)return!1;for(t=0;t<s.length;t++)if(!po(s[t],e[t]))return!1}else{const i=[];for(n in s)i.push(n);i.sort();const o=[];for(n in e)o.push(n);if(o.sort(),!po(i,o))return!1;for(t=0;t<i.length;t++)if(!po(s[i[t]],e[i[t]]))return!1}return!0}function fte(s){let e=[];for(;Object.prototype!==s;)e=e.concat(Object.getOwnPropertyNames(s)),s=Object.getPrototypeOf(s);return e}function I2(s){const e=[];for(const t of fte(s))typeof s[t]=="function"&&e.push(t);return e}function gte(s,e){const t=i=>function(){const o=Array.prototype.slice.call(arguments,0);return e(i,o)},n={};for(const i of s)n[i]=t(i);return n}function vj(){return globalThis._VSCODE_NLS_MESSAGES}function y3(){return globalThis._VSCODE_NLS_LANGUAGE}const mte=y3()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function yk(s,e){let t;return e.length===0?t=s:t=s.replace(/\{(\d+)\}/g,(n,i)=>{const o=i[0],r=e[o];let a=n;return typeof r=="string"?a=r:(typeof r=="number"||typeof r=="boolean"||r===void 0||r===null)&&(a=String(r)),a}),mte&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}function m(s,e,...t){return yk(typeof s=="number"?Cj(s,e):e,t)}function Cj(s,e){var n;const t=(n=vj())==null?void 0:n[s];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${s} !!!`)}return t}function Ee(s,e,...t){let n;typeof s=="number"?n=Cj(s,e):n=e;const i=yk(n,t);return{value:i,original:e===n?i:yk(e,t)}}const Ip="en";let Sk=!1,kk=!1,DS=!1,wj=!1,S3=!1,k3=!1,yj=!1,gy,IS=Ip,Y7=Ip,pte,ga;const sd=globalThis;let gs;var bU;typeof sd.vscode<"u"&&typeof sd.vscode.process<"u"?gs=sd.vscode.process:typeof process<"u"&&typeof((bU=process==null?void 0:process.versions)==null?void 0:bU.node)=="string"&&(gs=process);var vU;const _te=typeof((vU=gs==null?void 0:gs.versions)==null?void 0:vU.electron)=="string",bte=_te&&(gs==null?void 0:gs.type)==="renderer";var CU;if(typeof gs=="object"){Sk=gs.platform==="win32",kk=gs.platform==="darwin",DS=gs.platform==="linux",DS&&gs.env.SNAP&&gs.env.SNAP_REVISION,gs.env.CI||gs.env.BUILD_ARTIFACTSTAGINGDIRECTORY,gy=Ip,IS=Ip;const s=gs.env.VSCODE_NLS_CONFIG;if(s)try{const e=JSON.parse(s);gy=e.userLocale,Y7=e.osLocale,IS=e.resolvedLanguage||Ip,pte=(CU=e.languagePack)==null?void 0:CU.translationsConfigFile}catch{}wj=!0}else typeof navigator=="object"&&!bte?(ga=navigator.userAgent,Sk=ga.indexOf("Windows")>=0,kk=ga.indexOf("Macintosh")>=0,k3=(ga.indexOf("Macintosh")>=0||ga.indexOf("iPad")>=0||ga.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,DS=ga.indexOf("Linux")>=0,yj=(ga==null?void 0:ga.indexOf("Mobi"))>=0,S3=!0,IS=y3()||Ip,gy=navigator.language.toLowerCase(),Y7=gy):console.error("Unable to resolve platform.");const Bi=Sk,et=kk,Ds=DS,Oa=wj,Lm=S3,vte=S3&&typeof sd.importScripts=="function",Cte=vte?sd.origin:void 0,Ua=k3,Sj=yj,jl=ga,wte=IS,yte=typeof sd.postMessage=="function"&&!sd.importScripts,kj=(()=>{if(yte){const s=[];sd.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=s.length;n<i;n++){const o=s[n];if(o.id===t.data.vscodeScheduleAsyncWork){s.splice(n,1),o.callback();return}}});let e=0;return t=>{const n=++e;s.push({id:n,callback:t}),sd.postMessage({vscodeScheduleAsyncWork:n},"*")}}return s=>setTimeout(s)})(),mo=kk||k3?2:Sk?1:3;let X7=!0,Q7=!1;function Lj(){if(!Q7){Q7=!0;const s=new Uint8Array(2);s[0]=1,s[1]=2,X7=new Uint16Array(s.buffer)[0]===513}return X7}const xj=!!(jl&&jl.indexOf("Chrome")>=0),Ste=!!(jl&&jl.indexOf("Firefox")>=0),kte=!!(!xj&&jl&&jl.indexOf("Safari")>=0),Lte=!!(jl&&jl.indexOf("Edg/")>=0),xte=!!(jl&&jl.indexOf("Android")>=0),Ui={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var ot;(function(s){function e(w){return w&&typeof w=="object"&&typeof w[Symbol.iterator]=="function"}s.is=e;const t=Object.freeze([]);function n(){return t}s.empty=n;function*i(w){yield w}s.single=i;function o(w){return e(w)?w:i(w)}s.wrap=o;function r(w){return w||t}s.from=r;function*a(w){for(let y=w.length-1;y>=0;y--)yield w[y]}s.reverse=a;function l(w){return!w||w[Symbol.iterator]().next().done===!0}s.isEmpty=l;function c(w){return w[Symbol.iterator]().next().value}s.first=c;function d(w,y){let k=0;for(const x of w)if(y(x,k++))return!0;return!1}s.some=d;function h(w,y){for(const k of w)if(y(k))return k}s.find=h;function*u(w,y){for(const k of w)y(k)&&(yield k)}s.filter=u;function*f(w,y){let k=0;for(const x of w)yield y(x,k++)}s.map=f;function*g(w,y){let k=0;for(const x of w)yield*y(x,k++)}s.flatMap=g;function*p(...w){for(const y of w)yield*y}s.concat=p;function _(w,y,k){let x=k;for(const D of w)x=y(x,D);return x}s.reduce=_;function*b(w,y,k=w.length){for(y<0&&(y+=w.length),k<0?k+=w.length:k>w.length&&(k=w.length);y<k;y++)yield w[y]}s.slice=b;function v(w,y=Number.POSITIVE_INFINITY){const k=[];if(y===0)return[k,w];const x=w[Symbol.iterator]();for(let D=0;D<y;D++){const N=x.next();if(N.done)return[k,s.empty()];k.push(N.value)}return[k,{[Symbol.iterator](){return x}}]}s.consume=v;async function C(w){const y=[];for await(const k of w)y.push(k);return Promise.resolve(y)}s.asyncToArray=C})(ot||(ot={}));var Xc;let Qn=(Xc=class{constructor(e){this.element=e,this.next=Xc.Undefined,this.prev=Xc.Undefined}},Xc.Undefined=new Xc(void 0),Xc);class vs{constructor(){this._first=Qn.Undefined,this._last=Qn.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Qn.Undefined}clear(){let e=this._first;for(;e!==Qn.Undefined;){const t=e.next;e.prev=Qn.Undefined,e.next=Qn.Undefined,e=t}this._first=Qn.Undefined,this._last=Qn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new Qn(e);if(this._first===Qn.Undefined)this._first=n,this._last=n;else if(t){const o=this._last;this._last=n,n.prev=o,o.next=n}else{const o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Qn.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Qn.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Qn.Undefined&&e.next!==Qn.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Qn.Undefined&&e.next===Qn.Undefined?(this._first=Qn.Undefined,this._last=Qn.Undefined):e.next===Qn.Undefined?(this._last=this._last.prev,this._last.next=Qn.Undefined):e.prev===Qn.Undefined&&(this._first=this._first.next,this._first.prev=Qn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Qn.Undefined;)yield e.element,e=e.next}}const Lk="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function Dte(s=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of Lk)s.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const L3=Dte();function x3(s){let e=L3;if(s&&s instanceof RegExp)if(s.global)e=s;else{let t="g";s.ignoreCase&&(t+="i"),s.multiline&&(t+="m"),s.unicode&&(t+="u"),e=new RegExp(s.source,t)}return e.lastIndex=0,e}const Dj=new vs;Dj.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Rw(s,e,t,n,i){if(e=x3(e),i||(i=ot.first(Dj)),t.length>i.maxLen){let c=s-i.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,s+i.maxLen/2),Rw(s,e,t,n,i)}const o=Date.now(),r=s-1-n;let a=-1,l=null;for(let c=1;!(Date.now()-o>=i.timeBudget);c++){const d=r-i.windowSize*c;e.lastIndex=Math.max(0,d);const h=Ite(e,t,r,a);if(!h&&l||(l=h,d<=0))break;a=d}if(l){const c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function Ite(s,e,t,n){let i;for(;i=s.exec(e);){const o=i.index||0;if(o<=t&&s.lastIndex>=t)return i;if(n>0&&o>n)return null}return null}const gl=8;class Ij{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class Tj{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Xt{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return hT(e,t)}compute(e,t,n){return n}}class yC{constructor(e,t){this.newValue=e,this.didChange=t}}function hT(s,e){if(typeof s!="object"||typeof e!="object"||!s||!e)return new yC(e,s!==e);if(Array.isArray(s)||Array.isArray(e)){const n=Array.isArray(s)&&Array.isArray(e)&&en(s,e);return new yC(e,!n)}let t=!1;for(const n in e)if(e.hasOwnProperty(n)){const i=hT(s[n],e[n]);i.didChange&&(s[n]=i.newValue,t=!0)}return new yC(s,t)}class u0{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return hT(e,t)}validate(e){return this.defaultValue}}class qb{constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return hT(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function be(s,e){return typeof s>"u"?e:s==="false"?!1:!!s}class ut extends qb{constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return be(e,this.defaultValue)}}function Zu(s,e,t,n){if(typeof s>"u")return e;let i=parseInt(s,10);return isNaN(i)?e:(i=Math.max(t,i),i=Math.min(n,i),i|0)}class At extends qb{static clampedInt(e,t,n,i){return Zu(e,t,n,i)}constructor(e,t,n,i,o,r=void 0){typeof r<"u"&&(r.type="integer",r.default=n,r.minimum=i,r.maximum=o),super(e,t,n,r),this.minimum=i,this.maximum=o}validate(e){return At.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function Tte(s,e,t,n){if(typeof s>"u")return e;const i=$o.float(s,e);return $o.clamp(i,t,n)}class $o extends qb{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}constructor(e,t,n,i,o){typeof o<"u"&&(o.type="number",o.default=n),super(e,t,n,o),this.validationFn=i}validate(e){return this.validationFn($o.float(e,this.defaultValue))}}class rs extends qb{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return rs.string(e,this.defaultValue)}}function gn(s,e,t,n){return typeof s!="string"?e:n&&s in n?n[s]:t.indexOf(s)===-1?e:s}class fn extends qb{constructor(e,t,n,i,o=void 0){typeof o<"u"&&(o.type="string",o.enum=i,o.default=n),super(e,t,n,o),this._allowedValues=i}validate(e){return gn(e,this.defaultValue,this._allowedValues)}}class my extends Xt{constructor(e,t,n,i,o,r,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=i),super(e,t,n,a),this._allowedValues=o,this._convert=r}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function Ete(s){switch(s){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class Nte extends Xt{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[m("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),m("accessibilitySupport.on","Optimize for usage with a Screen Reader."),m("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:m("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}}class Rte extends Xt{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:m("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:m("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:be(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:be(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function Mte(s){switch(s){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var ki;(function(s){s[s.Line=1]="Line",s[s.Block=2]="Block",s[s.Underline=3]="Underline",s[s.LineThin=4]="LineThin",s[s.BlockOutline=5]="BlockOutline",s[s.UnderlineThin=6]="UnderlineThin"})(ki||(ki={}));function Ate(s){switch(s){case"line":return ki.Line;case"block":return ki.Block;case"underline":return ki.Underline;case"line-thin":return ki.LineThin;case"block-outline":return ki.BlockOutline;case"underline-thin":return ki.UnderlineThin}}class Pte extends u0{constructor(){super(143)}compute(e,t,n){const i=["monaco-editor"];return t.get(39)&&i.push(t.get(39)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(74)==="default"?i.push("mouse-default"):t.get(74)==="copy"&&i.push("mouse-copy"),t.get(112)&&i.push("showUnused"),t.get(141)&&i.push("showDeprecated"),i.join(" ")}}class Ote extends ut{constructor(){super(37,"emptySelectionClipboard",!0,{description:m("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class Fte extends Xt{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:m("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[m("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),m("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),m("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:m("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[m("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),m("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),m("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:m("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:m("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:et},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:m("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:m("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:be(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":gn(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":gn(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:be(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:be(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:be(t.loop,this.defaultValue.loop)}}}const Dc=class Dc extends Xt{constructor(){super(51,"fontLigatures",Dc.OFF,{anyOf:[{type:"boolean",description:m("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:m("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:m("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?Dc.OFF:e==="true"?Dc.ON:e:e?Dc.ON:Dc.OFF}};Dc.OFF='"liga" off, "calt" off',Dc.ON='"liga" on, "calt" on';let nu=Dc;const Ic=class Ic extends Xt{constructor(){super(54,"fontVariations",Ic.OFF,{anyOf:[{type:"boolean",description:m("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:m("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:m("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Ic.OFF:e==="true"?Ic.TRANSLATE:e:e?Ic.TRANSLATE:Ic.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}};Ic.OFF="normal",Ic.TRANSLATE="translate";let Mw=Ic;class Wte extends u0{constructor(){super(50)}compute(e,t,n){return e.fontInfo}}class Bte extends qb{constructor(){super(52,"fontSize",Ls.fontSize,{type:"number",minimum:6,maximum:100,default:Ls.fontSize,description:m("fontSize","Controls the font size in pixels.")})}validate(e){const t=$o.float(e,this.defaultValue);return t===0?Ls.fontSize:$o.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}const vl=class vl extends Xt{constructor(){super(53,"fontWeight",Ls.fontWeight,{anyOf:[{type:"number",minimum:vl.MINIMUM_VALUE,maximum:vl.MAXIMUM_VALUE,errorMessage:m("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:vl.SUGGESTION_VALUES}],default:Ls.fontWeight,description:m("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(At.clampedInt(e,Ls.fontWeight,vl.MINIMUM_VALUE,vl.MAXIMUM_VALUE))}};vl.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],vl.MINIMUM_VALUE=1,vl.MAXIMUM_VALUE=1e3;let T2=vl;class Hte extends Xt{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[m("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),m("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),m("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:m("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:m("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:m("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:m("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:m("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:m("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:m("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:m("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:m("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:m("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:m("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:gn(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??gn(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??gn(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??gn(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??gn(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??gn(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??gn(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:rs.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:rs.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:rs.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:rs.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:rs.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:rs.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class Vte extends Xt{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:m("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:m("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:m("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:m("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:m("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:be(t.enabled,this.defaultValue.enabled),delay:At.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:be(t.sticky,this.defaultValue.sticky),hidingDelay:At.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:be(t.above,this.defaultValue.above)}}}class p_ extends u0{constructor(){super(146)}compute(e,t,n){return p_.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight);let i=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(i=Math.max(i,t-1));const o=(n+e.viewLineCount+i)/(e.pixelRatio*e.height),r=Math.floor(e.viewLineCount/o);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:i,desiredRatio:o,minimapLineCount:r}}static _computeMinimapLayout(e,t){const n=e.outerWidth,i=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};const r=t.stableMinimapLayoutInput,a=r&&e.outerHeight===r.outerHeight&&e.lineHeight===r.lineHeight&&e.typicalHalfwidthCharacterWidth===r.typicalHalfwidthCharacterWidth&&e.pixelRatio===r.pixelRatio&&e.scrollBeyondLastLine===r.scrollBeyondLastLine&&e.paddingTop===r.paddingTop&&e.paddingBottom===r.paddingBottom&&e.minimap.enabled===r.minimap.enabled&&e.minimap.side===r.minimap.side&&e.minimap.size===r.minimap.size&&e.minimap.showSlider===r.minimap.showSlider&&e.minimap.renderCharacters===r.minimap.renderCharacters&&e.minimap.maxColumn===r.minimap.maxColumn&&e.minimap.scale===r.minimap.scale&&e.verticalScrollbarWidth===r.verticalScrollbarWidth&&e.isViewportWrapping===r.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,d=e.scrollBeyondLastLine,h=e.minimap.renderCharacters;let u=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const f=e.minimap.maxColumn,g=e.minimap.size,p=e.minimap.side,_=e.verticalScrollbarWidth,b=e.viewLineCount,v=e.remainingWidth,C=e.isViewportWrapping,w=h?2:3;let y=Math.floor(o*i);const k=y/o;let x=!1,D=!1,N=w*u,W=u/o,B=1;if(g==="fill"||g==="fit"){const{typicalViewportLineCount:pe,extraLinesBeforeFirstLine:ce,extraLinesBeyondLastLine:Oe,desiredRatio:Fe,minimapLineCount:un}=p_.computeContainedMinimapLineCount({viewLineCount:b,scrollBeyondLastLine:d,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:i,lineHeight:l,pixelRatio:o});if(b/un>1)x=!0,D=!0,u=1,N=1,W=u/o;else{let yt=!1,$n=u+1;if(g==="fit"){const qn=Math.ceil((ce+b+Oe)*N);C&&a&&v<=t.stableFitRemainingWidth?(yt=!0,$n=t.stableFitMaxMinimapScale):yt=qn>y}if(g==="fill"||yt){x=!0;const qn=u;N=Math.min(l*o,Math.max(1,Math.floor(1/Fe))),C&&a&&v<=t.stableFitRemainingWidth&&($n=t.stableFitMaxMinimapScale),u=Math.min($n,Math.max(1,Math.floor(N/w))),u>qn&&(B=Math.min(2,u/qn)),W=u/o/B,y=Math.ceil(Math.max(pe,ce+b+Oe)*N),C?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=v,t.stableFitMaxMinimapScale=u):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const z=Math.floor(f*W),U=Math.min(z,Math.max(0,Math.floor((v-_-2)*W/(c+W)))+gl);let H=Math.floor(o*U);const X=H/o;H=Math.floor(H*B);const re=h?1:2,fe=p==="left"?0:n-U-_;return{renderMinimap:re,minimapLeft:fe,minimapWidth:U,minimapHeightIsEditorHeight:x,minimapIsSampling:D,minimapScale:u,minimapLineHeight:N,minimapCanvasInnerWidth:H,minimapCanvasInnerHeight:y,minimapCanvasOuterWidth:X,minimapCanvasOuterHeight:k}}static computeLayout(e,t){const n=t.outerWidth|0,i=t.outerHeight|0,o=t.lineHeight|0,r=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,d=t.viewLineCount,h=e.get(138),u=h==="inherit"?e.get(137):h,f=u==="inherit"?e.get(133):u,g=e.get(136),p=t.isDominatedByLongLines,_=e.get(57),b=e.get(68).renderType!==0,v=e.get(69),C=e.get(106),w=e.get(84),y=e.get(73),k=e.get(104),x=k.verticalScrollbarSize,D=k.verticalHasArrows,N=k.arrowSize,W=k.horizontalScrollbarSize,B=e.get(43),z=e.get(111)!=="never";let U=e.get(66);B&&z&&(U+=16);let H=0;if(b){const Fs=Math.max(r,v);H=Math.round(Fs*l)}let X=0;_&&(X=o*t.glyphMarginDecorationLaneCount);let re=0,fe=re+X,pe=fe+H,ce=pe+U;const Oe=n-X-H-U;let Fe=!1,un=!1,Be=-1;u==="inherit"&&p?(Fe=!0,un=!0):f==="on"||f==="bounded"?un=!0:f==="wordWrapColumn"&&(Be=g);const yt=p_._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:C,paddingTop:w.top,paddingBottom:w.bottom,minimap:y,verticalScrollbarWidth:x,viewLineCount:d,remainingWidth:Oe,isViewportWrapping:un},t.memory||new Tj);yt.renderMinimap!==0&&yt.minimapLeft===0&&(re+=yt.minimapWidth,fe+=yt.minimapWidth,pe+=yt.minimapWidth,ce+=yt.minimapWidth);const $n=Oe-yt.minimapWidth,qn=Math.max(1,Math.floor(($n-x-2)/a)),us=D?N:0;return un&&(Be=Math.max(1,qn),f==="bounded"&&(Be=Math.min(Be,g))),{width:n,height:i,glyphMarginLeft:re,glyphMarginWidth:X,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:fe,lineNumbersWidth:H,decorationsLeft:pe,decorationsWidth:U,contentLeft:ce,contentWidth:$n,minimap:yt,viewportColumn:qn,isWordWrapMinified:Fe,isViewportWrapping:un,wrappingColumn:Be,verticalScrollbarWidth:x,horizontalScrollbarHeight:W,overviewRuler:{top:us,width:x,height:i-2*us,right:0}}}}class zte extends Xt{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[m("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),m("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:m("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return gn(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(2)===2?"advanced":n}}var $r;(function(s){s.Off="off",s.OnCode="onCode",s.On="on"})($r||($r={}));class $te extends Xt{constructor(){const e={enabled:$r.OnCode};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[$r.Off,$r.OnCode,$r.On],default:e.enabled,enumDescriptions:[m("editor.lightbulb.enabled.off","Disable the code action menu."),m("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),m("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:m("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:gn(e.enabled,this.defaultValue.enabled,[$r.Off,$r.OnCode,$r.On])}}}class Ute extends Xt{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:m("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:m("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:m("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:m("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:be(t.enabled,this.defaultValue.enabled),maxLineCount:At.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:gn(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:be(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class jte extends Xt{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:m("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[m("editor.inlayHints.on","Inlay hints are enabled"),m("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",et?"Ctrl+Option":"Ctrl+Alt"),m("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",et?"Ctrl+Option":"Ctrl+Alt"),m("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:m("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:m("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:m("inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:gn(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:At.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:rs.string(t.fontFamily,this.defaultValue.fontFamily),padding:be(t.padding,this.defaultValue.padding)}}}class qte extends Xt{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):At.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?At.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}}class Kte extends $o{constructor(){super(67,"lineHeight",Ls.lineHeight,e=>$o.clamp(e,0,150),{markdownDescription:m("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class Gte extends Xt{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:m("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:m("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[m("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),m("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),m("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:m("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:m("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:m("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:m("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:m("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:m("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:m("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:m("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:m("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:m("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:be(t.enabled,this.defaultValue.enabled),autohide:be(t.autohide,this.defaultValue.autohide),size:gn(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:gn(t.side,this.defaultValue.side,["right","left"]),showSlider:gn(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:be(t.renderCharacters,this.defaultValue.renderCharacters),scale:At.clampedInt(t.scale,1,1,3),maxColumn:At.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:be(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:be(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:$o.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:$o.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function Zte(s){return s==="ctrlCmd"?et?"metaKey":"ctrlKey":"altKey"}class Yte extends Xt{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:m("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:m("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:At.clampedInt(t.top,0,0,1e3),bottom:At.clampedInt(t.bottom,0,0,1e3)}}}class Xte extends Xt{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:m("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:m("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:be(t.enabled,this.defaultValue.enabled),cycle:be(t.cycle,this.defaultValue.cycle)}}}class Qte extends u0{constructor(){super(144)}compute(e,t,n){return e.pixelRatio}}class Jte extends Xt{constructor(){super(88,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class ene extends Xt{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[m("on","Quick suggestions show inside the suggest widget"),m("inline","Quick suggestions show as ghost text"),m("off","Quick suggestions are disabled")]}];super(90,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:m("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:m("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:m("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:m("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:n,strings:i}=e,o=["on","inline","off"];let r,a,l;return typeof t=="boolean"?r=t?"on":"off":r=gn(t,this.defaultValue.other,o),typeof n=="boolean"?a=n?"on":"off":a=gn(n,this.defaultValue.comments,o),typeof i=="boolean"?l=i?"on":"off":l=gn(i,this.defaultValue.strings,o),{other:r,comments:a,strings:l}}}class tne extends Xt{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[m("lineNumbers.off","Line numbers are not rendered."),m("lineNumbers.on","Line numbers are rendered as absolute number."),m("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),m("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:m("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}}function xk(s){const e=s.get(99);return e==="editable"?s.get(92):e!=="on"}class nne extends Xt{constructor(){const e=[],t={type:"number",description:m("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:m("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:m("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="number")t.push({column:At.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const i=n;t.push({column:At.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}}class ine extends Xt{constructor(){super(93,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function J7(s,e){if(typeof s!="string")return e;switch(s){case"hidden":return 2;case"visible":return 3;default:return 1}}let sne=class extends Xt{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),m("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),m("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:m("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[m("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),m("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),m("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:m("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:m("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:m("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:m("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:m("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=At.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=At.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:At.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:J7(t.vertical,this.defaultValue.vertical),horizontal:J7(t.horizontal,this.defaultValue.horizontal),useShadows:be(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:be(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:be(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:be(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:be(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:At.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:At.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:be(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:be(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}};const Ro="inUntrustedWorkspace",Vs={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class one extends Xt{constructor(){const e={nonBasicASCII:Ro,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Ro,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",e,{[Vs.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ro],default:e.nonBasicASCII,description:m("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Vs.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:m("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Vs.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:m("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Vs.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ro],default:e.includeComments,description:m("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[Vs.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ro],default:e.includeStrings,description:m("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[Vs.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:m("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Vs.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:m("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(po(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},n=!0)),t.allowedLocales&&e&&(po(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},n=!0));const i=super.applyUpdate(e,t);return n?new yC(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:__(t.nonBasicASCII,Ro,[!0,!1,Ro]),invisibleCharacters:be(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:be(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:__(t.includeComments,Ro,[!0,!1,Ro]),includeStrings:__(t.includeStrings,Ro,[!0,!1,Ro]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[i,o]of Object.entries(e))o===!0&&(n[i]=!0);return n}}class rne extends Xt{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:m("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[m("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),m("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),m("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:m("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:m("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:m("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:be(t.enabled,this.defaultValue.enabled),mode:gn(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:gn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:be(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:be(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:rs.string(t.fontFamily,this.defaultValue.fontFamily)}}}class ane extends Xt{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:m("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[m("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),m("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),m("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:m("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:m("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:be(t.enabled,this.defaultValue.enabled),showToolbar:gn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:rs.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:be(t.keepOnBlur,this.defaultValue.keepOnBlur)}}}class lne extends Xt{constructor(){const e={enabled:Ui.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Ui.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:m("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:be(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:be(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class cne extends Xt{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m("editor.guides.bracketPairs.true","Enables bracket pair guides."),m("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),m("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:m("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[m("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),m("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),m("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:m("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:m("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:m("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[m("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),m("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),m("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:m("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:__(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:__(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:be(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:be(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:__(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function __(s,e,t){const n=t.indexOf(s);return n===-1?e:t[n]}class dne extends Xt{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[m("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),m("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:m("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:m("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:m("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:m("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[m("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),m("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),m("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),m("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:m("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:m("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:m("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:m("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:m("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:m("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:m("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:m("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:m("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:gn(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:be(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:be(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:be(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:be(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:gn(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:be(t.showIcons,this.defaultValue.showIcons),showStatusBar:be(t.showStatusBar,this.defaultValue.showStatusBar),preview:be(t.preview,this.defaultValue.preview),previewMode:gn(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:be(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:be(t.showMethods,this.defaultValue.showMethods),showFunctions:be(t.showFunctions,this.defaultValue.showFunctions),showConstructors:be(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:be(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:be(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:be(t.showFields,this.defaultValue.showFields),showVariables:be(t.showVariables,this.defaultValue.showVariables),showClasses:be(t.showClasses,this.defaultValue.showClasses),showStructs:be(t.showStructs,this.defaultValue.showStructs),showInterfaces:be(t.showInterfaces,this.defaultValue.showInterfaces),showModules:be(t.showModules,this.defaultValue.showModules),showProperties:be(t.showProperties,this.defaultValue.showProperties),showEvents:be(t.showEvents,this.defaultValue.showEvents),showOperators:be(t.showOperators,this.defaultValue.showOperators),showUnits:be(t.showUnits,this.defaultValue.showUnits),showValues:be(t.showValues,this.defaultValue.showValues),showConstants:be(t.showConstants,this.defaultValue.showConstants),showEnums:be(t.showEnums,this.defaultValue.showEnums),showEnumMembers:be(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:be(t.showKeywords,this.defaultValue.showKeywords),showWords:be(t.showWords,this.defaultValue.showWords),showColors:be(t.showColors,this.defaultValue.showColors),showFiles:be(t.showFiles,this.defaultValue.showFiles),showReferences:be(t.showReferences,this.defaultValue.showReferences),showFolders:be(t.showFolders,this.defaultValue.showFolders),showTypeParameters:be(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:be(t.showSnippets,this.defaultValue.showSnippets),showUsers:be(t.showUsers,this.defaultValue.showUsers),showIssues:be(t.showIssues,this.defaultValue.showIssues)}}}class hne extends Xt{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:m("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:m("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:be(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:be(e.selectSubwords,this.defaultValue.selectSubwords)}}}class une extends Xt{constructor(){const e=[];super(131,"wordSegmenterLocales",e,{anyOf:[{description:m("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:m("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="string")try{Intl.Segmenter.supportedLocalesOf(n).length>0&&t.push(n)}catch{}return t}return this.defaultValue}}class fne extends Xt{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[m("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),m("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),m("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),m("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:m("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return t.get(2)===2?0:n}}class gne extends u0{constructor(){super(147)}compute(e,t,n){const i=t.get(146);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}}class mne extends Xt{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:m("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[m("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),m("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:be(t.enabled,this.defaultValue.enabled),showDropSelector:gn(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class pne extends Xt{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:m("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:m("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[m("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),m("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:be(t.enabled,this.defaultValue.enabled),showPasteSelector:gn(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const _ne="Consolas, 'Courier New', monospace",bne="Menlo, Monaco, 'Courier New', monospace",vne="'Droid Sans Mono', 'monospace', monospace",Ls={fontFamily:et?bne:Ds?vne:_ne,fontWeight:"normal",fontSize:et?12:14,lineHeight:0,letterSpacing:0},Tp=[];function ie(s){return Tp[s.id]=s,s}const Ja={acceptSuggestionOnCommitCharacter:ie(new ut(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:m("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:ie(new fn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",m("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:m("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:ie(new Nte),accessibilityPageSize:ie(new At(3,"accessibilityPageSize",10,1,1073741824,{description:m("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:ie(new rs(4,"ariaLabel",m("editorViewAccessibleLabel","Editor content"))),ariaRequired:ie(new ut(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:ie(new ut(8,"screenReaderAnnounceInlineSuggestion",!0,{description:m("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:ie(new fn(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),m("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:m("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:ie(new fn(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),m("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:m("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:ie(new fn(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",m("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:m("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:ie(new fn(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",m("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:m("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:ie(new fn(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",m("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),m("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:m("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:ie(new my(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],Ete,{enumDescriptions:[m("editor.autoIndent.none","The editor will not insert indentation automatically."),m("editor.autoIndent.keep","The editor will keep the current line's indentation."),m("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),m("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),m("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:m("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:ie(new ut(13,"automaticLayout",!1)),autoSurround:ie(new fn(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[m("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),m("editor.autoSurround.quotes","Surround with quotes but not brackets."),m("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:m("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:ie(new lne),bracketPairGuides:ie(new cne),stickyTabStops:ie(new ut(117,"stickyTabStops",!1,{description:m("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:ie(new ut(17,"codeLens",!0,{description:m("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:ie(new rs(18,"codeLensFontFamily","",{description:m("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:ie(new At(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:m("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:ie(new ut(20,"colorDecorators",!0,{description:m("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:ie(new fn(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[m("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),m("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),m("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:m("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:ie(new At(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:m("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:ie(new ut(22,"columnSelection",!1,{description:m("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:ie(new Rte),contextmenu:ie(new ut(24,"contextmenu",!0)),copyWithSyntaxHighlighting:ie(new ut(25,"copyWithSyntaxHighlighting",!0,{description:m("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:ie(new my(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],Mte,{description:m("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:ie(new fn(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[m("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),m("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),m("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:m("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:ie(new my(28,"cursorStyle",ki.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],Ate,{description:m("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:ie(new At(29,"cursorSurroundingLines",0,0,1073741824,{description:m("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:ie(new fn(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[m("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),m("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:m("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:ie(new At(31,"cursorWidth",0,0,1073741824,{markdownDescription:m("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:ie(new ut(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:ie(new ut(33,"disableMonospaceOptimizations",!1)),domReadOnly:ie(new ut(34,"domReadOnly",!1)),dragAndDrop:ie(new ut(35,"dragAndDrop",!0,{description:m("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:ie(new Ote),dropIntoEditor:ie(new mne),stickyScroll:ie(new Ute),experimentalWhitespaceRendering:ie(new fn(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[m("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),m("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),m("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:m("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:ie(new rs(39,"extraEditorClassName","")),fastScrollSensitivity:ie(new $o(40,"fastScrollSensitivity",5,s=>s<=0?5:s,{markdownDescription:m("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:ie(new Fte),fixedOverflowWidgets:ie(new ut(42,"fixedOverflowWidgets",!1)),folding:ie(new ut(43,"folding",!0,{description:m("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:ie(new fn(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[m("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),m("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:m("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:ie(new ut(45,"foldingHighlight",!0,{description:m("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:ie(new ut(46,"foldingImportsByDefault",!1,{description:m("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:ie(new At(47,"foldingMaximumRegions",5e3,10,65e3,{description:m("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:ie(new ut(48,"unfoldOnClickAfterEndOfLine",!1,{description:m("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:ie(new rs(49,"fontFamily",Ls.fontFamily,{description:m("fontFamily","Controls the font family.")})),fontInfo:ie(new Wte),fontLigatures2:ie(new nu),fontSize:ie(new Bte),fontWeight:ie(new T2),fontVariations:ie(new Mw),formatOnPaste:ie(new ut(55,"formatOnPaste",!1,{description:m("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:ie(new ut(56,"formatOnType",!1,{description:m("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:ie(new ut(57,"glyphMargin",!0,{description:m("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:ie(new Hte),hideCursorInOverviewRuler:ie(new ut(59,"hideCursorInOverviewRuler",!1,{description:m("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:ie(new Vte),inDiffEditor:ie(new ut(61,"inDiffEditor",!1)),letterSpacing:ie(new $o(64,"letterSpacing",Ls.letterSpacing,s=>$o.clamp(s,-5,20),{description:m("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:ie(new $te),lineDecorationsWidth:ie(new qte),lineHeight:ie(new Kte),lineNumbers:ie(new tne),lineNumbersMinChars:ie(new At(69,"lineNumbersMinChars",5,1,300)),linkedEditing:ie(new ut(70,"linkedEditing",!1,{description:m("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:ie(new ut(71,"links",!0,{description:m("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:ie(new fn(72,"matchBrackets","always",["always","near","never"],{description:m("matchBrackets","Highlight matching brackets.")})),minimap:ie(new Gte),mouseStyle:ie(new fn(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:ie(new $o(75,"mouseWheelScrollSensitivity",1,s=>s===0?1:s,{markdownDescription:m("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:ie(new ut(76,"mouseWheelZoom",!1,{markdownDescription:et?m("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):m("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:ie(new ut(77,"multiCursorMergeOverlapping",!0,{description:m("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:ie(new my(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],Zte,{markdownEnumDescriptions:[m("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:m({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:ie(new fn(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[m("multiCursorPaste.spread","Each cursor pastes a single line of the text."),m("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:m("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:ie(new At(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:m("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:ie(new fn(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[m("occurrencesHighlight.off","Does not highlight occurrences."),m("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),m("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:m("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:ie(new ut(82,"overviewRulerBorder",!0,{description:m("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:ie(new At(83,"overviewRulerLanes",3,0,3)),padding:ie(new Yte),pasteAs:ie(new pne),parameterHints:ie(new Xte),peekWidgetDefaultFocus:ie(new fn(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[m("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),m("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:m("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:ie(new Jte),definitionLinkOpensInPeek:ie(new ut(89,"definitionLinkOpensInPeek",!1,{description:m("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:ie(new ene),quickSuggestionsDelay:ie(new At(91,"quickSuggestionsDelay",10,0,1073741824,{description:m("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:ie(new ut(92,"readOnly",!1)),readOnlyMessage:ie(new ine),renameOnType:ie(new ut(94,"renameOnType",!1,{description:m("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:m("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:ie(new ut(95,"renderControlCharacters",!0,{description:m("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:ie(new fn(96,"renderFinalNewline",Ds?"dimmed":"on",["off","on","dimmed"],{description:m("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:ie(new fn(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",m("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:m("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:ie(new ut(98,"renderLineHighlightOnlyWhenFocus",!1,{description:m("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:ie(new fn(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:ie(new fn(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",m("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),m("renderWhitespace.selection","Render whitespace characters only on selected text."),m("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:m("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:ie(new At(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:ie(new ut(102,"roundedSelection",!0,{description:m("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:ie(new nne),scrollbar:ie(new sne),scrollBeyondLastColumn:ie(new At(105,"scrollBeyondLastColumn",4,0,1073741824,{description:m("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:ie(new ut(106,"scrollBeyondLastLine",!0,{description:m("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:ie(new ut(107,"scrollPredominantAxis",!0,{description:m("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:ie(new ut(108,"selectionClipboard",!0,{description:m("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Ds})),selectionHighlight:ie(new ut(109,"selectionHighlight",!0,{description:m("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:ie(new ut(110,"selectOnLineNumbers",!0)),showFoldingControls:ie(new fn(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[m("showFoldingControls.always","Always show the folding controls."),m("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),m("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:m("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:ie(new ut(112,"showUnused",!0,{description:m("showUnused","Controls fading out of unused code.")})),showDeprecated:ie(new ut(141,"showDeprecated",!0,{description:m("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:ie(new jte),snippetSuggestions:ie(new fn(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[m("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),m("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),m("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),m("snippetSuggestions.none","Do not show snippet suggestions.")],description:m("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:ie(new hne),smoothScrolling:ie(new ut(115,"smoothScrolling",!1,{description:m("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:ie(new At(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:ie(new dne),inlineSuggest:ie(new rne),inlineEdit:ie(new ane),inlineCompletionsAccessibilityVerbose:ie(new ut(150,"inlineCompletionsAccessibilityVerbose",!1,{description:m("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:ie(new At(120,"suggestFontSize",0,0,1e3,{markdownDescription:m("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:ie(new At(121,"suggestLineHeight",0,0,1e3,{markdownDescription:m("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:ie(new ut(122,"suggestOnTriggerCharacters",!0,{description:m("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:ie(new fn(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[m("suggestSelection.first","Always select the first suggestion."),m("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),m("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:m("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:ie(new fn(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[m("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),m("tabCompletion.off","Disable tab completions."),m("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:m("tabCompletion","Enables tab completions.")})),tabIndex:ie(new At(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:ie(new one),unusualLineTerminators:ie(new fn(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[m("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),m("unusualLineTerminators.off","Unusual line terminators are ignored."),m("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:m("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:ie(new ut(128,"useShadowDOM",!0)),useTabStops:ie(new ut(129,"useTabStops",!0,{description:m("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:ie(new fn(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[m("wordBreak.normal","Use the default line break rule."),m("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:m("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:ie(new une),wordSeparators:ie(new rs(132,"wordSeparators",Lk,{description:m("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:ie(new fn(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[m("wordWrap.off","Lines will never wrap."),m("wordWrap.on","Lines will wrap at the viewport width."),m({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),m({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:m({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:ie(new rs(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:ie(new rs(135,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:ie(new At(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:m({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:ie(new fn(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:ie(new fn(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:ie(new Pte),defaultColorDecorators:ie(new ut(148,"defaultColorDecorators",!1,{markdownDescription:m("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:ie(new Qte),tabFocusMode:ie(new ut(145,"tabFocusMode",!1,{markdownDescription:m("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:ie(new p_),wrappingInfo:ie(new gne),wrappingIndent:ie(new fne),wrappingStrategy:ie(new zte)};class Cne{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?ib.isErrorNoTelemetry(e)?new ib(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}emit(e){this.listeners.forEach(t=>{t(e)})}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const Ej=new Cne;function Pe(s){Tr(s)||Ej.onUnexpectedError(s)}function kn(s){Tr(s)||Ej.onUnexpectedExternalError(s)}function e8(s){if(s instanceof Error){const{name:e,message:t}=s,n=s.stacktrace||s.stack;return{$isError:!0,name:e,message:t,stack:n,noTelemetry:ib.isErrorNoTelemetry(s)}}return s}const Dk="Canceled";function Tr(s){return s instanceof ta?!0:s instanceof Error&&s.name===Dk&&s.message===Dk}class ta extends Error{constructor(){super(Dk),this.name=this.message}}function wne(){const s=new Error(Dk);return s.name=s.message,s}function Cr(s){return s?new Error(`Illegal argument: ${s}`):new Error("Illegal argument")}function D3(s){return s?new Error(`Illegal state: ${s}`):new Error("Illegal state")}class yne extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class ib extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof ib)return e;const t=new ib;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class _t extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,_t.prototype)}}function iu(s,e){const t=this;let n=!1,i;return function(){return n||(n=!0,i=s.apply(t,arguments)),i}}function uT(s){return typeof s=="object"&&s!==null&&typeof s.dispose=="function"&&s.dispose.length===0}function Mt(s){if(ot.is(s)){const e=[];for(const t of s)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(s)?[]:s}else if(s)return s.dispose(),s}function Jr(...s){return ve(()=>Mt(s))}function ve(s){return{dispose:iu(()=>{s()})}}const LD=class LD{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{Mt(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?LD.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}};LD.DISABLE_DISPOSED_WARNING=!1;let q=LD;const r7=class r7{constructor(){this._store=new q,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};r7.None=Object.freeze({dispose(){}});let F=r7;class ai{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}}class Sne{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}class kne{constructor(e){this.object=e}dispose(){}}class I3{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{Mt(this._store.values())}finally{this._store.clear()}}get(e){return this._store.get(e)}set(e,t,n=!1){var i;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||(i=this._store.get(e))==null||i.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))==null||t.dispose(),this._store.delete(e)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const Lne=globalThis.performance&&typeof globalThis.performance.now=="function";class pi{static create(e){return new pi(e)}constructor(e){this._now=Lne&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var se;(function(s){s.None=()=>F.None;function e(U,H){return u(U,()=>{},0,void 0,!0,void 0,H)}s.defer=e;function t(U){return(H,X=null,re)=>{let fe=!1,pe;return pe=U(ce=>{if(!fe)return pe?pe.dispose():fe=!0,H.call(X,ce)},null,re),fe&&pe.dispose(),pe}}s.once=t;function n(U,H){return s.once(s.filter(U,H))}s.onceIf=n;function i(U,H,X){return d((re,fe=null,pe)=>U(ce=>re.call(fe,H(ce)),null,pe),X)}s.map=i;function o(U,H,X){return d((re,fe=null,pe)=>U(ce=>{H(ce),re.call(fe,ce)},null,pe),X)}s.forEach=o;function r(U,H,X){return d((re,fe=null,pe)=>U(ce=>H(ce)&&re.call(fe,ce),null,pe),X)}s.filter=r;function a(U){return U}s.signal=a;function l(...U){return(H,X=null,re)=>{const fe=Jr(...U.map(pe=>pe(ce=>H.call(X,ce))));return h(fe,re)}}s.any=l;function c(U,H,X,re){let fe=X;return i(U,pe=>(fe=H(fe,pe),fe),re)}s.reduce=c;function d(U,H){let X;const re={onWillAddFirstListener(){X=U(fe.fire,fe)},onDidRemoveLastListener(){X==null||X.dispose()}},fe=new O(re);return H==null||H.add(fe),fe.event}function h(U,H){return H instanceof Array?H.push(U):H&&H.add(U),U}function u(U,H,X=100,re=!1,fe=!1,pe,ce){let Oe,Fe,un,Be=0,yt;const $n={leakWarningThreshold:pe,onWillAddFirstListener(){Oe=U(us=>{Be++,Fe=H(Fe,us),re&&!un&&(qn.fire(Fe),Fe=void 0),yt=()=>{const Fs=Fe;Fe=void 0,un=void 0,(!re||Be>1)&&qn.fire(Fs),Be=0},typeof X=="number"?(clearTimeout(un),un=setTimeout(yt,X)):un===void 0&&(un=0,queueMicrotask(yt))})},onWillRemoveListener(){fe&&Be>0&&(yt==null||yt())},onDidRemoveLastListener(){yt=void 0,Oe.dispose()}},qn=new O($n);return ce==null||ce.add(qn),qn.event}s.debounce=u;function f(U,H=0,X){return s.debounce(U,(re,fe)=>re?(re.push(fe),re):[fe],H,void 0,!0,void 0,X)}s.accumulate=f;function g(U,H=(re,fe)=>re===fe,X){let re=!0,fe;return r(U,pe=>{const ce=re||!H(pe,fe);return re=!1,fe=pe,ce},X)}s.latch=g;function p(U,H,X){return[s.filter(U,H,X),s.filter(U,re=>!H(re),X)]}s.split=p;function _(U,H=!1,X=[],re){let fe=X.slice(),pe=U(Fe=>{fe?fe.push(Fe):Oe.fire(Fe)});re&&re.add(pe);const ce=()=>{fe==null||fe.forEach(Fe=>Oe.fire(Fe)),fe=null},Oe=new O({onWillAddFirstListener(){pe||(pe=U(Fe=>Oe.fire(Fe)),re&&re.add(pe))},onDidAddFirstListener(){fe&&(H?setTimeout(ce):ce())},onDidRemoveLastListener(){pe&&pe.dispose(),pe=null}});return re&&re.add(Oe),Oe.event}s.buffer=_;function b(U,H){return(re,fe,pe)=>{const ce=H(new C);return U(function(Oe){const Fe=ce.evaluate(Oe);Fe!==v&&re.call(fe,Fe)},void 0,pe)}}s.chain=b;const v=Symbol("HaltChainable");class C{constructor(){this.steps=[]}map(H){return this.steps.push(H),this}forEach(H){return this.steps.push(X=>(H(X),X)),this}filter(H){return this.steps.push(X=>H(X)?X:v),this}reduce(H,X){let re=X;return this.steps.push(fe=>(re=H(re,fe),re)),this}latch(H=(X,re)=>X===re){let X=!0,re;return this.steps.push(fe=>{const pe=X||!H(fe,re);return X=!1,re=fe,pe?fe:v}),this}evaluate(H){for(const X of this.steps)if(H=X(H),H===v)break;return H}}function w(U,H,X=re=>re){const re=(...Oe)=>ce.fire(X(...Oe)),fe=()=>U.on(H,re),pe=()=>U.removeListener(H,re),ce=new O({onWillAddFirstListener:fe,onDidRemoveLastListener:pe});return ce.event}s.fromNodeEventEmitter=w;function y(U,H,X=re=>re){const re=(...Oe)=>ce.fire(X(...Oe)),fe=()=>U.addEventListener(H,re),pe=()=>U.removeEventListener(H,re),ce=new O({onWillAddFirstListener:fe,onDidRemoveLastListener:pe});return ce.event}s.fromDOMEventEmitter=y;function k(U){return new Promise(H=>t(U)(H))}s.toPromise=k;function x(U){const H=new O;return U.then(X=>{H.fire(X)},()=>{H.fire(void 0)}).finally(()=>{H.dispose()}),H.event}s.fromPromise=x;function D(U,H){return U(X=>H.fire(X))}s.forward=D;function N(U,H,X){return H(X),U(re=>H(re))}s.runAndSubscribe=N;class W{constructor(H,X){this._observable=H,this._counter=0,this._hasChanged=!1;const re={onWillAddFirstListener:()=>{H.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{H.removeObserver(this)}};this.emitter=new O(re),X&&X.add(this.emitter)}beginUpdate(H){this._counter++}handlePossibleChange(H){}handleChange(H,X){this._hasChanged=!0}endUpdate(H){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function B(U,H){return new W(U,H).emitter.event}s.fromObservable=B;function z(U){return(H,X,re)=>{let fe=0,pe=!1;const ce={beginUpdate(){fe++},endUpdate(){fe--,fe===0&&(U.reportChanges(),pe&&(pe=!1,H.call(X)))},handlePossibleChange(){},handleChange(){pe=!0}};U.addObserver(ce),U.reportChanges();const Oe={dispose(){U.removeObserver(ce)}};return re instanceof q?re.add(Oe):Array.isArray(re)&&re.push(Oe),Oe}}s.fromObservableLight=z})(se||(se={}));const e_=class e_{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${e_._idPool++}`,e_.all.add(this)}start(e){this._stopWatch=new pi,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};e_.all=new Set,e_._idPool=0;let E2=e_,xne=-1;const xD=class xD{constructor(e,t,n=(xD._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=n,this._warnCountdown=0}dispose(){var e;(e=this._stacks)==null||e.clear()}check(e,t){const n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);const i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;const[o,r]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${r}):`;console.warn(a),console.warn(o);const l=new Dne(a,o);this._errorHandler(l)}return()=>{const o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[n,i]of this._stacks)(!e||t<i)&&(e=[n,i],t=i);return e}};xD._idPool=1;let N2=xD;class T3{static create(){const e=new Error;return new T3(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class Dne extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class Ine extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}class hN{constructor(e){this.value=e}}const Tne=2;let O=class{constructor(e){var t,n,i,o;this._size=0,this._options=e,this._leakageMon=(t=this._options)!=null&&t.leakWarningThreshold?new N2((e==null?void 0:e.onListenerError)??Pe,((n=this._options)==null?void 0:n.leakWarningThreshold)??xne):void 0,this._perfMon=(i=this._options)!=null&&i._profName?new E2(this._options._profName):void 0,this._deliveryQueue=(o=this._options)==null?void 0:o.deliveryQueue}dispose(){var e,t,n,i;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(n=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||n.call(t),(i=this._leakageMon)==null||i.dispose())}get event(){return this._event??(this._event=(e,t,n)=>{var a,l,c,d,h;if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const u=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(u);const f=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],g=new Ine(`${u}. HINT: Stack shows most frequent listener (${f[1]}-times)`,f[0]);return(((a=this._options)==null?void 0:a.onListenerError)||Pe)(g),F.None}if(this._disposed)return F.None;t&&(e=e.bind(t));const i=new hN(e);let o;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=T3.create(),o=this._leakageMon.check(i.stack,this._size+1)),this._listeners?this._listeners instanceof hN?(this._deliveryQueue??(this._deliveryQueue=new Nj),this._listeners=[this._listeners,i]):this._listeners.push(i):((c=(l=this._options)==null?void 0:l.onWillAddFirstListener)==null||c.call(l,this),this._listeners=i,(h=(d=this._options)==null?void 0:d.onDidAddFirstListener)==null||h.call(d,this)),this._size++;const r=ve(()=>{o==null||o(),this._removeListener(i)});return n instanceof q?n.add(r):Array.isArray(n)&&n.push(r),r}),this._event}_removeListener(e){var o,r,a,l;if((r=(o=this._options)==null?void 0:o.onWillRemoveListener)==null||r.call(o,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(l=(a=this._options)==null?void 0:a.onDidRemoveLastListener)==null||l.call(a,this),this._size=0;return}const t=this._listeners,n=t.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[n]=void 0;const i=this._deliveryQueue.current===this;if(this._size*Tne<=t.length){let c=0;for(let d=0;d<t.length;d++)t[d]?t[c++]=t[d]:i&&(this._deliveryQueue.end--,c<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=c}}_deliver(e,t){var i;if(!e)return;const n=((i=this._options)==null?void 0:i.onListenerError)||Pe;if(!n){e.value(t);return}try{e.value(t)}catch(o){n(o)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,n,i,o;if((t=this._deliveryQueue)!=null&&t.current&&(this._deliverQueue(this._deliveryQueue),(n=this._perfMon)==null||n.stop()),(i=this._perfMon)==null||i.start(this._size),this._listeners)if(this._listeners instanceof hN)this._deliver(this._listeners,e);else{const r=this._deliveryQueue;r.enqueue(this,e,this._listeners.length),this._deliverQueue(r)}(o=this._perfMon)==null||o.stop()}hasListeners(){return this._size>0}};const Ene=()=>new Nj;class Nj{constructor(){this.i=-1,this.end=0}enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class Kg extends O{constructor(e){super(e),this._isPaused=0,this._eventQueue=new vs,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class Rj extends Kg{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class Nne extends O{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e==null?void 0:e.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class Rne{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new O({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),ve(iu(()=>{this.hasListeners&&this.unhook(t);const i=this.events.indexOf(t);this.events.splice(i,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){var t;(t=e.listener)==null||t.dispose(),e.listener=null}dispose(){var e;this.emitter.dispose();for(const t of this.events)(e=t.listener)==null||e.dispose();this.events=[]}}class f0{constructor(){this.data=[]}wrapEvent(e,t,n){return(i,o,r)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>i.call(o,a)):i.call(o,a);return}const c=l;if(!c){i.call(o,t(n,a));return}c.items??(c.items=[]),c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??(c.reducedResult=n?c.items.reduce(t,n):c.items.reduce(t)),i.call(o,c.reducedResult)})},void 0,r)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const n=e();return this.data.pop(),t.buffers.forEach(i=>i()),n}}class t8{constructor(){this.listening=!1,this.inputEvent=se.None,this.inputEventListener=F.None,this.emitter=new O({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}const Mj=Object.freeze(function(s,e){const t=setTimeout(s.bind(e),0);return{dispose(){clearTimeout(t)}}});var Ue;(function(s){function e(t){return t===s.None||t===s.Cancelled||t instanceof TS?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}s.isCancellationToken=e,s.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:se.None}),s.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Mj})})(Ue||(Ue={}));class TS{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Mj:(this._emitter||(this._emitter=new O),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}let an=class{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new TS),this._token}cancel(){this._token?this._token instanceof TS&&this._token.cancel():this._token=Ue.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)==null||t.dispose(),this._token?this._token instanceof TS&&this._token.dispose():this._token=Ue.None}};function R2(s){const e=new an;return s.add({dispose(){e.cancel()}}),e.token}class E3{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}}const ES=new E3,M2=new E3,A2=new E3,Aj=new Array(230),Mne=Object.create(null),Ane=Object.create(null),N3=[];for(let s=0;s<=193;s++)N3[s]=-1;(function(){const s="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",s,s],[1,1,"Hyper",0,s,0,s,s,s],[1,2,"Super",0,s,0,s,s,s],[1,3,"Fn",0,s,0,s,s,s],[1,4,"FnLock",0,s,0,s,s,s],[1,5,"Suspend",0,s,0,s,s,s],[1,6,"Resume",0,s,0,s,s,s],[1,7,"Turbo",0,s,0,s,s,s],[1,8,"Sleep",0,s,0,"VK_SLEEP",s,s],[1,9,"WakeUp",0,s,0,s,s,s],[0,10,"KeyA",31,"A",65,"VK_A",s,s],[0,11,"KeyB",32,"B",66,"VK_B",s,s],[0,12,"KeyC",33,"C",67,"VK_C",s,s],[0,13,"KeyD",34,"D",68,"VK_D",s,s],[0,14,"KeyE",35,"E",69,"VK_E",s,s],[0,15,"KeyF",36,"F",70,"VK_F",s,s],[0,16,"KeyG",37,"G",71,"VK_G",s,s],[0,17,"KeyH",38,"H",72,"VK_H",s,s],[0,18,"KeyI",39,"I",73,"VK_I",s,s],[0,19,"KeyJ",40,"J",74,"VK_J",s,s],[0,20,"KeyK",41,"K",75,"VK_K",s,s],[0,21,"KeyL",42,"L",76,"VK_L",s,s],[0,22,"KeyM",43,"M",77,"VK_M",s,s],[0,23,"KeyN",44,"N",78,"VK_N",s,s],[0,24,"KeyO",45,"O",79,"VK_O",s,s],[0,25,"KeyP",46,"P",80,"VK_P",s,s],[0,26,"KeyQ",47,"Q",81,"VK_Q",s,s],[0,27,"KeyR",48,"R",82,"VK_R",s,s],[0,28,"KeyS",49,"S",83,"VK_S",s,s],[0,29,"KeyT",50,"T",84,"VK_T",s,s],[0,30,"KeyU",51,"U",85,"VK_U",s,s],[0,31,"KeyV",52,"V",86,"VK_V",s,s],[0,32,"KeyW",53,"W",87,"VK_W",s,s],[0,33,"KeyX",54,"X",88,"VK_X",s,s],[0,34,"KeyY",55,"Y",89,"VK_Y",s,s],[0,35,"KeyZ",56,"Z",90,"VK_Z",s,s],[0,36,"Digit1",22,"1",49,"VK_1",s,s],[0,37,"Digit2",23,"2",50,"VK_2",s,s],[0,38,"Digit3",24,"3",51,"VK_3",s,s],[0,39,"Digit4",25,"4",52,"VK_4",s,s],[0,40,"Digit5",26,"5",53,"VK_5",s,s],[0,41,"Digit6",27,"6",54,"VK_6",s,s],[0,42,"Digit7",28,"7",55,"VK_7",s,s],[0,43,"Digit8",29,"8",56,"VK_8",s,s],[0,44,"Digit9",30,"9",57,"VK_9",s,s],[0,45,"Digit0",21,"0",48,"VK_0",s,s],[1,46,"Enter",3,"Enter",13,"VK_RETURN",s,s],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",s,s],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",s,s],[1,49,"Tab",2,"Tab",9,"VK_TAB",s,s],[1,50,"Space",10,"Space",32,"VK_SPACE",s,s],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,s,0,s,s,s],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",s,s],[1,64,"F1",59,"F1",112,"VK_F1",s,s],[1,65,"F2",60,"F2",113,"VK_F2",s,s],[1,66,"F3",61,"F3",114,"VK_F3",s,s],[1,67,"F4",62,"F4",115,"VK_F4",s,s],[1,68,"F5",63,"F5",116,"VK_F5",s,s],[1,69,"F6",64,"F6",117,"VK_F6",s,s],[1,70,"F7",65,"F7",118,"VK_F7",s,s],[1,71,"F8",66,"F8",119,"VK_F8",s,s],[1,72,"F9",67,"F9",120,"VK_F9",s,s],[1,73,"F10",68,"F10",121,"VK_F10",s,s],[1,74,"F11",69,"F11",122,"VK_F11",s,s],[1,75,"F12",70,"F12",123,"VK_F12",s,s],[1,76,"PrintScreen",0,s,0,s,s,s],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",s,s],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",s,s],[1,79,"Insert",19,"Insert",45,"VK_INSERT",s,s],[1,80,"Home",14,"Home",36,"VK_HOME",s,s],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",s,s],[1,82,"Delete",20,"Delete",46,"VK_DELETE",s,s],[1,83,"End",13,"End",35,"VK_END",s,s],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",s,s],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",s],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",s],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",s],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",s],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",s,s],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",s,s],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",s,s],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",s,s],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",s,s],[1,94,"NumpadEnter",3,s,0,s,s,s],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",s,s],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",s,s],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",s,s],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",s,s],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",s,s],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",s,s],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",s,s],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",s,s],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",s,s],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",s,s],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",s,s],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",s,s],[1,107,"ContextMenu",58,"ContextMenu",93,s,s,s],[1,108,"Power",0,s,0,s,s,s],[1,109,"NumpadEqual",0,s,0,s,s,s],[1,110,"F13",71,"F13",124,"VK_F13",s,s],[1,111,"F14",72,"F14",125,"VK_F14",s,s],[1,112,"F15",73,"F15",126,"VK_F15",s,s],[1,113,"F16",74,"F16",127,"VK_F16",s,s],[1,114,"F17",75,"F17",128,"VK_F17",s,s],[1,115,"F18",76,"F18",129,"VK_F18",s,s],[1,116,"F19",77,"F19",130,"VK_F19",s,s],[1,117,"F20",78,"F20",131,"VK_F20",s,s],[1,118,"F21",79,"F21",132,"VK_F21",s,s],[1,119,"F22",80,"F22",133,"VK_F22",s,s],[1,120,"F23",81,"F23",134,"VK_F23",s,s],[1,121,"F24",82,"F24",135,"VK_F24",s,s],[1,122,"Open",0,s,0,s,s,s],[1,123,"Help",0,s,0,s,s,s],[1,124,"Select",0,s,0,s,s,s],[1,125,"Again",0,s,0,s,s,s],[1,126,"Undo",0,s,0,s,s,s],[1,127,"Cut",0,s,0,s,s,s],[1,128,"Copy",0,s,0,s,s,s],[1,129,"Paste",0,s,0,s,s,s],[1,130,"Find",0,s,0,s,s,s],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",s,s],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",s,s],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",s,s],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",s,s],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",s,s],[1,136,"KanaMode",0,s,0,s,s,s],[0,137,"IntlYen",0,s,0,s,s,s],[1,138,"Convert",0,s,0,s,s,s],[1,139,"NonConvert",0,s,0,s,s,s],[1,140,"Lang1",0,s,0,s,s,s],[1,141,"Lang2",0,s,0,s,s,s],[1,142,"Lang3",0,s,0,s,s,s],[1,143,"Lang4",0,s,0,s,s,s],[1,144,"Lang5",0,s,0,s,s,s],[1,145,"Abort",0,s,0,s,s,s],[1,146,"Props",0,s,0,s,s,s],[1,147,"NumpadParenLeft",0,s,0,s,s,s],[1,148,"NumpadParenRight",0,s,0,s,s,s],[1,149,"NumpadBackspace",0,s,0,s,s,s],[1,150,"NumpadMemoryStore",0,s,0,s,s,s],[1,151,"NumpadMemoryRecall",0,s,0,s,s,s],[1,152,"NumpadMemoryClear",0,s,0,s,s,s],[1,153,"NumpadMemoryAdd",0,s,0,s,s,s],[1,154,"NumpadMemorySubtract",0,s,0,s,s,s],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",s,s],[1,156,"NumpadClearEntry",0,s,0,s,s,s],[1,0,s,5,"Ctrl",17,"VK_CONTROL",s,s],[1,0,s,4,"Shift",16,"VK_SHIFT",s,s],[1,0,s,6,"Alt",18,"VK_MENU",s,s],[1,0,s,57,"Meta",91,"VK_COMMAND",s,s],[1,157,"ControlLeft",5,s,0,"VK_LCONTROL",s,s],[1,158,"ShiftLeft",4,s,0,"VK_LSHIFT",s,s],[1,159,"AltLeft",6,s,0,"VK_LMENU",s,s],[1,160,"MetaLeft",57,s,0,"VK_LWIN",s,s],[1,161,"ControlRight",5,s,0,"VK_RCONTROL",s,s],[1,162,"ShiftRight",4,s,0,"VK_RSHIFT",s,s],[1,163,"AltRight",6,s,0,"VK_RMENU",s,s],[1,164,"MetaRight",57,s,0,"VK_RWIN",s,s],[1,165,"BrightnessUp",0,s,0,s,s,s],[1,166,"BrightnessDown",0,s,0,s,s,s],[1,167,"MediaPlay",0,s,0,s,s,s],[1,168,"MediaRecord",0,s,0,s,s,s],[1,169,"MediaFastForward",0,s,0,s,s,s],[1,170,"MediaRewind",0,s,0,s,s,s],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",s,s],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",s,s],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",s,s],[1,174,"Eject",0,s,0,s,s,s],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",s,s],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",s,s],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",s,s],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",s,s],[1,179,"LaunchApp1",0,s,0,"VK_MEDIA_LAUNCH_APP1",s,s],[1,180,"SelectTask",0,s,0,s,s,s],[1,181,"LaunchScreenSaver",0,s,0,s,s,s],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",s,s],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",s,s],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",s,s],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",s,s],[1,186,"BrowserStop",0,s,0,"VK_BROWSER_STOP",s,s],[1,187,"BrowserRefresh",0,s,0,"VK_BROWSER_REFRESH",s,s],[1,188,"BrowserFavorites",0,s,0,"VK_BROWSER_FAVORITES",s,s],[1,189,"ZoomToggle",0,s,0,s,s,s],[1,190,"MailReply",0,s,0,s,s,s],[1,191,"MailForward",0,s,0,s,s,s],[1,192,"MailSend",0,s,0,s,s,s],[1,0,s,114,"KeyInComposition",229,s,s,s],[1,0,s,116,"ABNT_C2",194,"VK_ABNT_C2",s,s],[1,0,s,96,"OEM_8",223,"VK_OEM_8",s,s],[1,0,s,0,s,0,"VK_KANA",s,s],[1,0,s,0,s,0,"VK_HANGUL",s,s],[1,0,s,0,s,0,"VK_JUNJA",s,s],[1,0,s,0,s,0,"VK_FINAL",s,s],[1,0,s,0,s,0,"VK_HANJA",s,s],[1,0,s,0,s,0,"VK_KANJI",s,s],[1,0,s,0,s,0,"VK_CONVERT",s,s],[1,0,s,0,s,0,"VK_NONCONVERT",s,s],[1,0,s,0,s,0,"VK_ACCEPT",s,s],[1,0,s,0,s,0,"VK_MODECHANGE",s,s],[1,0,s,0,s,0,"VK_SELECT",s,s],[1,0,s,0,s,0,"VK_PRINT",s,s],[1,0,s,0,s,0,"VK_EXECUTE",s,s],[1,0,s,0,s,0,"VK_SNAPSHOT",s,s],[1,0,s,0,s,0,"VK_HELP",s,s],[1,0,s,0,s,0,"VK_APPS",s,s],[1,0,s,0,s,0,"VK_PROCESSKEY",s,s],[1,0,s,0,s,0,"VK_PACKET",s,s],[1,0,s,0,s,0,"VK_DBE_SBCSCHAR",s,s],[1,0,s,0,s,0,"VK_DBE_DBCSCHAR",s,s],[1,0,s,0,s,0,"VK_ATTN",s,s],[1,0,s,0,s,0,"VK_CRSEL",s,s],[1,0,s,0,s,0,"VK_EXSEL",s,s],[1,0,s,0,s,0,"VK_EREOF",s,s],[1,0,s,0,s,0,"VK_PLAY",s,s],[1,0,s,0,s,0,"VK_ZOOM",s,s],[1,0,s,0,s,0,"VK_NONAME",s,s],[1,0,s,0,s,0,"VK_PA1",s,s],[1,0,s,0,s,0,"VK_OEM_CLEAR",s,s]],t=[],n=[];for(const i of e){const[o,r,a,l,c,d,h,u,f]=i;if(n[r]||(n[r]=!0,Mne[a]=r,Ane[a.toLowerCase()]=r,o&&(N3[r]=l)),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);ES.define(l,c),M2.define(l,u||c),A2.define(l,f||u||c)}d&&(Aj[d]=l)}})();var Fc;(function(s){function e(a){return ES.keyCodeToStr(a)}s.toString=e;function t(a){return ES.strToKeyCode(a)}s.fromString=t;function n(a){return M2.keyCodeToStr(a)}s.toUserSettingsUS=n;function i(a){return A2.keyCodeToStr(a)}s.toUserSettingsGeneral=i;function o(a){return M2.strToKeyCode(a)||A2.strToKeyCode(a)}s.fromUserSettings=o;function r(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return ES.keyCodeToStr(a)}s.toElectronAccelerator=r})(Fc||(Fc={}));function zn(s,e){const t=(e&65535)<<16>>>0;return(s|t)>>>0}var n8={};let b_;const uN=globalThis.vscode;var wU;if(typeof uN<"u"&&typeof uN.process<"u"){const s=uN.process;b_={get platform(){return s.platform},get arch(){return s.arch},get env(){return s.env},cwd(){return s.cwd()}}}else typeof process<"u"&&typeof((wU=process==null?void 0:process.versions)==null?void 0:wU.node)=="string"?b_={get platform(){return process.platform},get arch(){return process.arch},get env(){return n8},cwd(){return n8.VSCODE_CWD||process.cwd()}}:b_={get platform(){return Bi?"win32":et?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const Ik=b_.cwd,P2=b_.env,Pne=b_.platform,One=65,Fne=97,Wne=90,Bne=122,Th=46,ts=47,Eo=92,zd=58,Hne=63;class Pj extends Error{constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";const o=e.indexOf(".")!==-1?"property":"argument";let r=`The "${e}" ${o} ${i} of type ${t}`;r+=`. Received type ${typeof n}`,super(r),this.code="ERR_INVALID_ARG_TYPE"}}function Vne(s,e){if(s===null||typeof s!="object")throw new Pj(e,"Object",s)}function di(s,e){if(typeof s!="string")throw new Pj(e,"string",s)}const Ed=Pne==="win32";function Dt(s){return s===ts||s===Eo}function O2(s){return s===ts}function $d(s){return s>=One&&s<=Wne||s>=Fne&&s<=Bne}function Tk(s,e,t,n){let i="",o=0,r=-1,a=0,l=0;for(let c=0;c<=s.length;++c){if(c<s.length)l=s.charCodeAt(c);else{if(n(l))break;l=ts}if(n(l)){if(!(r===c-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==Th||i.charCodeAt(i.length-2)!==Th){if(i.length>2){const d=i.lastIndexOf(t);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(t)),r=c,a=0;continue}else if(i.length!==0){i="",o=0,r=c,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",o=2)}else i.length>0?i+=`${t}${s.slice(r+1,c)}`:i=s.slice(r+1,c),o=c-r-1;r=c,a=0}else l===Th&&a!==-1?++a:a=-1}return i}function zne(s){return s?`${s[0]==="."?"":"."}${s}`:""}function Oj(s,e){Vne(e,"pathObject");const t=e.dir||e.root,n=e.base||`${e.name||""}${zne(e.ext)}`;return t?t===e.root?`${t}${n}`:`${t}${s}${n}`:n}const js={resolve(...s){let e="",t="",n=!1;for(let i=s.length-1;i>=-1;i--){let o;if(i>=0){if(o=s[i],di(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=Ik():(o=P2[`=${e}`]||Ik(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Eo)&&(o=`${e}\\`));const r=o.length;let a=0,l="",c=!1;const d=o.charCodeAt(0);if(r===1)Dt(d)&&(a=1,c=!0);else if(Dt(d))if(c=!0,Dt(o.charCodeAt(1))){let h=2,u=h;for(;h<r&&!Dt(o.charCodeAt(h));)h++;if(h<r&&h!==u){const f=o.slice(u,h);for(u=h;h<r&&Dt(o.charCodeAt(h));)h++;if(h<r&&h!==u){for(u=h;h<r&&!Dt(o.charCodeAt(h));)h++;(h===r||h!==u)&&(l=`\\\\${f}\\${o.slice(u,h)}`,a=h)}}}else a=1;else $d(d)&&o.charCodeAt(1)===zd&&(l=o.slice(0,2),a=2,r>2&&Dt(o.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=Tk(t,!n,"\\",Dt),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(s){di(s,"path");const e=s.length;if(e===0)return".";let t=0,n,i=!1;const o=s.charCodeAt(0);if(e===1)return O2(o)?"\\":s;if(Dt(o))if(i=!0,Dt(s.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Dt(s.charCodeAt(a));)a++;if(a<e&&a!==l){const c=s.slice(l,a);for(l=a;a<e&&Dt(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Dt(s.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${s.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${s.slice(l,a)}`,t=a)}}}else t=1;else $d(o)&&s.charCodeAt(1)===zd&&(n=s.slice(0,2),t=2,e>2&&Dt(s.charCodeAt(2))&&(i=!0,t=3));let r=t<e?Tk(s.slice(t),!i,"\\",Dt):"";return r.length===0&&!i&&(r="."),r.length>0&&Dt(s.charCodeAt(e-1))&&(r+="\\"),n===void 0?i?`\\${r}`:r:i?`${n}\\${r}`:`${n}${r}`},isAbsolute(s){di(s,"path");const e=s.length;if(e===0)return!1;const t=s.charCodeAt(0);return Dt(t)||e>2&&$d(t)&&s.charCodeAt(1)===zd&&Dt(s.charCodeAt(2))},join(...s){if(s.length===0)return".";let e,t;for(let o=0;o<s.length;++o){const r=s[o];di(r,"path"),r.length>0&&(e===void 0?e=t=r:e+=`\\${r}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&Dt(t.charCodeAt(0))){++i;const o=t.length;o>1&&Dt(t.charCodeAt(1))&&(++i,o>2&&(Dt(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Dt(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return js.normalize(e)},relative(s,e){if(di(s,"from"),di(e,"to"),s===e)return"";const t=js.resolve(s),n=js.resolve(e);if(t===n||(s=t.toLowerCase(),e=n.toLowerCase(),s===e))return"";let i=0;for(;i<s.length&&s.charCodeAt(i)===Eo;)i++;let o=s.length;for(;o-1>i&&s.charCodeAt(o-1)===Eo;)o--;const r=o-i;let a=0;for(;a<e.length&&e.charCodeAt(a)===Eo;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Eo;)l--;const c=l-a,d=r<c?r:c;let h=-1,u=0;for(;u<d;u++){const g=s.charCodeAt(i+u);if(g!==e.charCodeAt(a+u))break;g===Eo&&(h=u)}if(u!==d){if(h===-1)return n}else{if(c>d){if(e.charCodeAt(a+u)===Eo)return n.slice(a+u+1);if(u===2)return n.slice(a+u)}r>d&&(s.charCodeAt(i+u)===Eo?h=u:u===2&&(h=3)),h===-1&&(h=0)}let f="";for(u=i+h+1;u<=o;++u)(u===o||s.charCodeAt(u)===Eo)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${n.slice(a,l)}`:(n.charCodeAt(a)===Eo&&++a,n.slice(a,l))},toNamespacedPath(s){if(typeof s!="string"||s.length===0)return s;const e=js.resolve(s);if(e.length<=2)return s;if(e.charCodeAt(0)===Eo){if(e.charCodeAt(1)===Eo){const t=e.charCodeAt(2);if(t!==Hne&&t!==Th)return`\\\\?\\UNC\\${e.slice(2)}`}}else if($d(e.charCodeAt(0))&&e.charCodeAt(1)===zd&&e.charCodeAt(2)===Eo)return`\\\\?\\${e}`;return s},dirname(s){di(s,"path");const e=s.length;if(e===0)return".";let t=-1,n=0;const i=s.charCodeAt(0);if(e===1)return Dt(i)?s:".";if(Dt(i)){if(t=n=1,Dt(s.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Dt(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Dt(s.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Dt(s.charCodeAt(a));)a++;if(a===e)return s;a!==l&&(t=n=a+1)}}}}else $d(i)&&s.charCodeAt(1)===zd&&(t=e>2&&Dt(s.charCodeAt(2))?3:2,n=t);let o=-1,r=!0;for(let a=e-1;a>=n;--a)if(Dt(s.charCodeAt(a))){if(!r){o=a;break}}else r=!1;if(o===-1){if(t===-1)return".";o=t}return s.slice(0,o)},basename(s,e){e!==void 0&&di(e,"suffix"),di(s,"path");let t=0,n=-1,i=!0,o;if(s.length>=2&&$d(s.charCodeAt(0))&&s.charCodeAt(1)===zd&&(t=2),e!==void 0&&e.length>0&&e.length<=s.length){if(e===s)return"";let r=e.length-1,a=-1;for(o=s.length-1;o>=t;--o){const l=s.charCodeAt(o);if(Dt(l)){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(n=o):(r=-1,n=a))}return t===n?n=a:n===-1&&(n=s.length),s.slice(t,n)}for(o=s.length-1;o>=t;--o)if(Dt(s.charCodeAt(o))){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":s.slice(t,n)},extname(s){di(s,"path");let e=0,t=-1,n=0,i=-1,o=!0,r=0;s.length>=2&&s.charCodeAt(1)===zd&&$d(s.charCodeAt(0))&&(e=n=2);for(let a=s.length-1;a>=e;--a){const l=s.charCodeAt(a);if(Dt(l)){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),l===Th?t===-1?t=a:r!==1&&(r=1):t!==-1&&(r=-1)}return t===-1||i===-1||r===0||r===1&&t===i-1&&t===n+1?"":s.slice(t,i)},format:Oj.bind(null,"\\"),parse(s){di(s,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return e;const t=s.length;let n=0,i=s.charCodeAt(0);if(t===1)return Dt(i)?(e.root=e.dir=s,e):(e.base=e.name=s,e);if(Dt(i)){if(n=1,Dt(s.charCodeAt(1))){let h=2,u=h;for(;h<t&&!Dt(s.charCodeAt(h));)h++;if(h<t&&h!==u){for(u=h;h<t&&Dt(s.charCodeAt(h));)h++;if(h<t&&h!==u){for(u=h;h<t&&!Dt(s.charCodeAt(h));)h++;h===t?n=h:h!==u&&(n=h+1)}}}}else if($d(i)&&s.charCodeAt(1)===zd){if(t<=2)return e.root=e.dir=s,e;if(n=2,Dt(s.charCodeAt(2))){if(t===3)return e.root=e.dir=s,e;n=3}}n>0&&(e.root=s.slice(0,n));let o=-1,r=n,a=-1,l=!0,c=s.length-1,d=0;for(;c>=n;--c){if(i=s.charCodeAt(c),Dt(i)){if(!l){r=c+1;break}continue}a===-1&&(l=!1,a=c+1),i===Th?o===-1?o=c:d!==1&&(d=1):o!==-1&&(d=-1)}return a!==-1&&(o===-1||d===0||d===1&&o===a-1&&o===r+1?e.base=e.name=s.slice(r,a):(e.name=s.slice(r,o),e.base=s.slice(r,a),e.ext=s.slice(o,a))),r>0&&r!==n?e.dir=s.slice(0,r-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},$ne=(()=>{if(Ed){const s=/\\/g;return()=>{const e=Ik().replace(s,"/");return e.slice(e.indexOf("/"))}}return()=>Ik()})(),Fn={resolve(...s){let e="",t=!1;for(let n=s.length-1;n>=-1&&!t;n--){const i=n>=0?s[n]:$ne();di(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===ts)}return e=Tk(e,!t,"/",O2),t?`/${e}`:e.length>0?e:"."},normalize(s){if(di(s,"path"),s.length===0)return".";const e=s.charCodeAt(0)===ts,t=s.charCodeAt(s.length-1)===ts;return s=Tk(s,!e,"/",O2),s.length===0?e?"/":t?"./":".":(t&&(s+="/"),e?`/${s}`:s)},isAbsolute(s){return di(s,"path"),s.length>0&&s.charCodeAt(0)===ts},join(...s){if(s.length===0)return".";let e;for(let t=0;t<s.length;++t){const n=s[t];di(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Fn.normalize(e)},relative(s,e){if(di(s,"from"),di(e,"to"),s===e||(s=Fn.resolve(s),e=Fn.resolve(e),s===e))return"";const t=1,n=s.length,i=n-t,o=1,r=e.length-o,a=i<r?i:r;let l=-1,c=0;for(;c<a;c++){const h=s.charCodeAt(t+c);if(h!==e.charCodeAt(o+c))break;h===ts&&(l=c)}if(c===a)if(r>a){if(e.charCodeAt(o+c)===ts)return e.slice(o+c+1);if(c===0)return e.slice(o+c)}else i>a&&(s.charCodeAt(t+c)===ts?l=c:c===0&&(l=0));let d="";for(c=t+l+1;c<=n;++c)(c===n||s.charCodeAt(c)===ts)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+l)}`},toNamespacedPath(s){return s},dirname(s){if(di(s,"path"),s.length===0)return".";const e=s.charCodeAt(0)===ts;let t=-1,n=!0;for(let i=s.length-1;i>=1;--i)if(s.charCodeAt(i)===ts){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":s.slice(0,t)},basename(s,e){e!==void 0&&di(e,"ext"),di(s,"path");let t=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=s.length){if(e===s)return"";let r=e.length-1,a=-1;for(o=s.length-1;o>=0;--o){const l=s.charCodeAt(o);if(l===ts){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(n=o):(r=-1,n=a))}return t===n?n=a:n===-1&&(n=s.length),s.slice(t,n)}for(o=s.length-1;o>=0;--o)if(s.charCodeAt(o)===ts){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":s.slice(t,n)},extname(s){di(s,"path");let e=-1,t=0,n=-1,i=!0,o=0;for(let r=s.length-1;r>=0;--r){const a=s.charCodeAt(r);if(a===ts){if(!i){t=r+1;break}continue}n===-1&&(i=!1,n=r+1),a===Th?e===-1?e=r:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===t+1?"":s.slice(e,n)},format:Oj.bind(null,"/"),parse(s){di(s,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return e;const t=s.charCodeAt(0)===ts;let n;t?(e.root="/",n=1):n=0;let i=-1,o=0,r=-1,a=!0,l=s.length-1,c=0;for(;l>=n;--l){const d=s.charCodeAt(l);if(d===ts){if(!a){o=l+1;break}continue}r===-1&&(a=!1,r=l+1),d===Th?i===-1?i=l:c!==1&&(c=1):i!==-1&&(c=-1)}if(r!==-1){const d=o===0&&t?1:o;i===-1||c===0||c===1&&i===r-1&&i===o+1?e.base=e.name=s.slice(d,r):(e.name=s.slice(d,i),e.base=s.slice(d,r),e.ext=s.slice(i,r))}return o>0?e.dir=s.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Fn.win32=js.win32=js;Fn.posix=js.posix=Fn;const Fj=Ed?js.normalize:Fn.normalize,Une=Ed?js.join:Fn.join,jne=Ed?js.resolve:Fn.resolve,qne=Ed?js.relative:Fn.relative,Wj=Ed?js.dirname:Fn.dirname,Eh=Ed?js.basename:Fn.basename,Kne=Ed?js.extname:Fn.extname,Fa=Ed?js.sep:Fn.sep,Gne=/^\w[\w\d+.-]*$/,Zne=/^\//,Yne=/^\/\//;function Xne(s,e){if(!s.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${s.authority}", path: "${s.path}", query: "${s.query}", fragment: "${s.fragment}"}`);if(s.scheme&&!Gne.test(s.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(s.path){if(s.authority){if(!Zne.test(s.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(Yne.test(s.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function Qne(s,e){return!s&&!e?"file":s}function Jne(s,e){switch(s){case"https":case"http":case"file":e?e[0]!==Da&&(e=Da+e):e=Da;break}return e}const Mn="",Da="/",eie=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Se{static isUri(e){return e instanceof Se?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,n,i,o,r=!1){typeof e=="object"?(this.scheme=e.scheme||Mn,this.authority=e.authority||Mn,this.path=e.path||Mn,this.query=e.query||Mn,this.fragment=e.fragment||Mn):(this.scheme=Qne(e,r),this.authority=t||Mn,this.path=Jne(this.scheme,n||Mn),this.query=i||Mn,this.fragment=o||Mn,Xne(this,r))}get fsPath(){return Ek(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:o,fragment:r}=e;return t===void 0?t=this.scheme:t===null&&(t=Mn),n===void 0?n=this.authority:n===null&&(n=Mn),i===void 0?i=this.path:i===null&&(i=Mn),o===void 0?o=this.query:o===null&&(o=Mn),r===void 0?r=this.fragment:r===null&&(r=Mn),t===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&r===this.fragment?this:new Ym(t,n,i,o,r)}static parse(e,t=!1){const n=eie.exec(e);return n?new Ym(n[2]||Mn,py(n[4]||Mn),py(n[5]||Mn),py(n[7]||Mn),py(n[9]||Mn),t):new Ym(Mn,Mn,Mn,Mn,Mn)}static file(e){let t=Mn;if(Bi&&(e=e.replace(/\\/g,Da)),e[0]===Da&&e[1]===Da){const n=e.indexOf(Da,2);n===-1?(t=e.substring(2),e=Da):(t=e.substring(2,n),e=e.substring(n)||Da)}return new Ym("file",t,e,Mn,Mn)}static from(e,t){return new Ym(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Bi&&e.scheme==="file"?n=Se.file(js.join(Ek(e,!0),...t)).path:n=Fn.join(e.path,...t),e.with({path:n})}toString(e=!1){return F2(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Se)return e;{const t=new Ym(e);return t._formatted=e.external??null,t._fsPath=e._sep===Bj?e.fsPath??null:null,t}}else return e}}const Bj=Bi?1:void 0;let Ym=class extends Se{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Ek(this,!1)),this._fsPath}toString(e=!1){return e?F2(this,!0):(this._formatted||(this._formatted=F2(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Bj),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}};const Hj={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function i8(s,e,t){let n,i=-1;for(let o=0;o<s.length;o++){const r=s.charCodeAt(o);if(r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||r===45||r===46||r===95||r===126||e&&r===47||t&&r===91||t&&r===93||t&&r===58)i!==-1&&(n+=encodeURIComponent(s.substring(i,o)),i=-1),n!==void 0&&(n+=s.charAt(o));else{n===void 0&&(n=s.substr(0,o));const a=Hj[r];a!==void 0?(i!==-1&&(n+=encodeURIComponent(s.substring(i,o)),i=-1),n+=a):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(s.substring(i))),n!==void 0?n:s}function tie(s){let e;for(let t=0;t<s.length;t++){const n=s.charCodeAt(t);n===35||n===63?(e===void 0&&(e=s.substr(0,t)),e+=Hj[n]):e!==void 0&&(e+=s[t])}return e!==void 0?e:s}function Ek(s,e){let t;return s.authority&&s.path.length>1&&s.scheme==="file"?t=`//${s.authority}${s.path}`:s.path.charCodeAt(0)===47&&(s.path.charCodeAt(1)>=65&&s.path.charCodeAt(1)<=90||s.path.charCodeAt(1)>=97&&s.path.charCodeAt(1)<=122)&&s.path.charCodeAt(2)===58?e?t=s.path.substr(1):t=s.path[1].toLowerCase()+s.path.substr(2):t=s.path,Bi&&(t=t.replace(/\//g,"\\")),t}function F2(s,e){const t=e?tie:i8;let n="",{scheme:i,authority:o,path:r,query:a,fragment:l}=s;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=Da,n+=Da),o){let c=o.indexOf("@");if(c!==-1){const d=o.substr(0,c);o=o.substr(c+1),c=d.lastIndexOf(":"),c===-1?n+=t(d,!1,!1):(n+=t(d.substr(0,c),!1,!1),n+=":",n+=t(d.substr(c+1),!1,!0)),n+="@"}o=o.toLowerCase(),c=o.lastIndexOf(":"),c===-1?n+=t(o,!1,!0):(n+=t(o.substr(0,c),!1,!0),n+=o.substr(c))}if(r){if(r.length>=3&&r.charCodeAt(0)===47&&r.charCodeAt(2)===58){const c=r.charCodeAt(1);c>=65&&c<=90&&(r=`/${String.fromCharCode(c+32)}:${r.substr(3)}`)}else if(r.length>=2&&r.charCodeAt(1)===58){const c=r.charCodeAt(0);c>=65&&c<=90&&(r=`${String.fromCharCode(c+32)}:${r.substr(2)}`)}n+=t(r,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:i8(l,!1,!1)),n}function Vj(s){try{return decodeURIComponent(s)}catch{return s.length>3?s.substr(0,3)+Vj(s.substr(3)):s}}const s8=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function py(s){return s.match(s8)?s.replace(s8,e=>Vj(e)):s}let A=class Yu{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new Yu(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return Yu.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return Yu.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return Yu.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){const o=e.column|0,r=t.column|0;return o-r}return n-i}clone(){return new Yu(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new Yu(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},L=class wi{constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return wi.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return wi.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return wi.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return wi.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return wi.plusRange(this,e)}static plusRange(e,t){let n,i,o,r;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,r=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,r=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,r=e.endColumn),new wi(n,i,o,r)}intersectRanges(e){return wi.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,r=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,d=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),o>c?(o=c,r=d):o===c&&(r=Math.min(r,d)),n>o||n===o&&i>r?null:new wi(n,i,o,r)}equalsRange(e){return wi.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return wi.getEndPosition(this)}static getEndPosition(e){return new A(e.endLineNumber,e.endColumn)}getStartPosition(){return wi.getStartPosition(this)}static getStartPosition(e){return new A(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new wi(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new wi(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return wi.collapseToStart(this)}static collapseToStart(e){return new wi(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return wi.collapseToEnd(this)}static collapseToEnd(e){return new wi(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new wi(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new wi(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new wi(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const o=e.startLineNumber|0,r=t.startLineNumber|0;if(o===r){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,d=t.endLineNumber|0;if(c===d){const h=e.endColumn|0,u=t.endColumn|0;return h-u}return c-d}return a-l}return o-r}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}},me=class Fr extends L{constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Fr.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Fr(this.startLineNumber,this.startColumn,e,t):new Fr(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new A(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new A(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Fr(e,t,this.endLineNumber,this.endColumn):new Fr(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Fr(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Fr(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Fr(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Fr(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,o){return o===0?new Fr(e,t,n,i):new Fr(n,i,e,t)}};const W2=Object.create(null);function S(s,e){if(qs(e)){const t=W2[e];if(t===void 0)throw new Error(`${s} references an unknown codicon: ${e}`);e=t}return W2[s]=e,{id:s}}function zj(){return W2}const nie={add:S("add",6e4),plus:S("plus",6e4),gistNew:S("gist-new",6e4),repoCreate:S("repo-create",6e4),lightbulb:S("lightbulb",60001),lightBulb:S("light-bulb",60001),repo:S("repo",60002),repoDelete:S("repo-delete",60002),gistFork:S("gist-fork",60003),repoForked:S("repo-forked",60003),gitPullRequest:S("git-pull-request",60004),gitPullRequestAbandoned:S("git-pull-request-abandoned",60004),recordKeys:S("record-keys",60005),keyboard:S("keyboard",60005),tag:S("tag",60006),gitPullRequestLabel:S("git-pull-request-label",60006),tagAdd:S("tag-add",60006),tagRemove:S("tag-remove",60006),person:S("person",60007),personFollow:S("person-follow",60007),personOutline:S("person-outline",60007),personFilled:S("person-filled",60007),gitBranch:S("git-branch",60008),gitBranchCreate:S("git-branch-create",60008),gitBranchDelete:S("git-branch-delete",60008),sourceControl:S("source-control",60008),mirror:S("mirror",60009),mirrorPublic:S("mirror-public",60009),star:S("star",60010),starAdd:S("star-add",60010),starDelete:S("star-delete",60010),starEmpty:S("star-empty",60010),comment:S("comment",60011),commentAdd:S("comment-add",60011),alert:S("alert",60012),warning:S("warning",60012),search:S("search",60013),searchSave:S("search-save",60013),logOut:S("log-out",60014),signOut:S("sign-out",60014),logIn:S("log-in",60015),signIn:S("sign-in",60015),eye:S("eye",60016),eyeUnwatch:S("eye-unwatch",60016),eyeWatch:S("eye-watch",60016),circleFilled:S("circle-filled",60017),primitiveDot:S("primitive-dot",60017),closeDirty:S("close-dirty",60017),debugBreakpoint:S("debug-breakpoint",60017),debugBreakpointDisabled:S("debug-breakpoint-disabled",60017),debugHint:S("debug-hint",60017),terminalDecorationSuccess:S("terminal-decoration-success",60017),primitiveSquare:S("primitive-square",60018),edit:S("edit",60019),pencil:S("pencil",60019),info:S("info",60020),issueOpened:S("issue-opened",60020),gistPrivate:S("gist-private",60021),gitForkPrivate:S("git-fork-private",60021),lock:S("lock",60021),mirrorPrivate:S("mirror-private",60021),close:S("close",60022),removeClose:S("remove-close",60022),x:S("x",60022),repoSync:S("repo-sync",60023),sync:S("sync",60023),clone:S("clone",60024),desktopDownload:S("desktop-download",60024),beaker:S("beaker",60025),microscope:S("microscope",60025),vm:S("vm",60026),deviceDesktop:S("device-desktop",60026),file:S("file",60027),fileText:S("file-text",60027),more:S("more",60028),ellipsis:S("ellipsis",60028),kebabHorizontal:S("kebab-horizontal",60028),mailReply:S("mail-reply",60029),reply:S("reply",60029),organization:S("organization",60030),organizationFilled:S("organization-filled",60030),organizationOutline:S("organization-outline",60030),newFile:S("new-file",60031),fileAdd:S("file-add",60031),newFolder:S("new-folder",60032),fileDirectoryCreate:S("file-directory-create",60032),trash:S("trash",60033),trashcan:S("trashcan",60033),history:S("history",60034),clock:S("clock",60034),folder:S("folder",60035),fileDirectory:S("file-directory",60035),symbolFolder:S("symbol-folder",60035),logoGithub:S("logo-github",60036),markGithub:S("mark-github",60036),github:S("github",60036),terminal:S("terminal",60037),console:S("console",60037),repl:S("repl",60037),zap:S("zap",60038),symbolEvent:S("symbol-event",60038),error:S("error",60039),stop:S("stop",60039),variable:S("variable",60040),symbolVariable:S("symbol-variable",60040),array:S("array",60042),symbolArray:S("symbol-array",60042),symbolModule:S("symbol-module",60043),symbolPackage:S("symbol-package",60043),symbolNamespace:S("symbol-namespace",60043),symbolObject:S("symbol-object",60043),symbolMethod:S("symbol-method",60044),symbolFunction:S("symbol-function",60044),symbolConstructor:S("symbol-constructor",60044),symbolBoolean:S("symbol-boolean",60047),symbolNull:S("symbol-null",60047),symbolNumeric:S("symbol-numeric",60048),symbolNumber:S("symbol-number",60048),symbolStructure:S("symbol-structure",60049),symbolStruct:S("symbol-struct",60049),symbolParameter:S("symbol-parameter",60050),symbolTypeParameter:S("symbol-type-parameter",60050),symbolKey:S("symbol-key",60051),symbolText:S("symbol-text",60051),symbolReference:S("symbol-reference",60052),goToFile:S("go-to-file",60052),symbolEnum:S("symbol-enum",60053),symbolValue:S("symbol-value",60053),symbolRuler:S("symbol-ruler",60054),symbolUnit:S("symbol-unit",60054),activateBreakpoints:S("activate-breakpoints",60055),archive:S("archive",60056),arrowBoth:S("arrow-both",60057),arrowDown:S("arrow-down",60058),arrowLeft:S("arrow-left",60059),arrowRight:S("arrow-right",60060),arrowSmallDown:S("arrow-small-down",60061),arrowSmallLeft:S("arrow-small-left",60062),arrowSmallRight:S("arrow-small-right",60063),arrowSmallUp:S("arrow-small-up",60064),arrowUp:S("arrow-up",60065),bell:S("bell",60066),bold:S("bold",60067),book:S("book",60068),bookmark:S("bookmark",60069),debugBreakpointConditionalUnverified:S("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:S("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:S("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:S("debug-breakpoint-data-unverified",60072),debugBreakpointData:S("debug-breakpoint-data",60073),debugBreakpointDataDisabled:S("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:S("debug-breakpoint-log-unverified",60074),debugBreakpointLog:S("debug-breakpoint-log",60075),debugBreakpointLogDisabled:S("debug-breakpoint-log-disabled",60075),briefcase:S("briefcase",60076),broadcast:S("broadcast",60077),browser:S("browser",60078),bug:S("bug",60079),calendar:S("calendar",60080),caseSensitive:S("case-sensitive",60081),check:S("check",60082),checklist:S("checklist",60083),chevronDown:S("chevron-down",60084),chevronLeft:S("chevron-left",60085),chevronRight:S("chevron-right",60086),chevronUp:S("chevron-up",60087),chromeClose:S("chrome-close",60088),chromeMaximize:S("chrome-maximize",60089),chromeMinimize:S("chrome-minimize",60090),chromeRestore:S("chrome-restore",60091),circleOutline:S("circle-outline",60092),circle:S("circle",60092),debugBreakpointUnverified:S("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:S("terminal-decoration-incomplete",60092),circleSlash:S("circle-slash",60093),circuitBoard:S("circuit-board",60094),clearAll:S("clear-all",60095),clippy:S("clippy",60096),closeAll:S("close-all",60097),cloudDownload:S("cloud-download",60098),cloudUpload:S("cloud-upload",60099),code:S("code",60100),collapseAll:S("collapse-all",60101),colorMode:S("color-mode",60102),commentDiscussion:S("comment-discussion",60103),creditCard:S("credit-card",60105),dash:S("dash",60108),dashboard:S("dashboard",60109),database:S("database",60110),debugContinue:S("debug-continue",60111),debugDisconnect:S("debug-disconnect",60112),debugPause:S("debug-pause",60113),debugRestart:S("debug-restart",60114),debugStart:S("debug-start",60115),debugStepInto:S("debug-step-into",60116),debugStepOut:S("debug-step-out",60117),debugStepOver:S("debug-step-over",60118),debugStop:S("debug-stop",60119),debug:S("debug",60120),deviceCameraVideo:S("device-camera-video",60121),deviceCamera:S("device-camera",60122),deviceMobile:S("device-mobile",60123),diffAdded:S("diff-added",60124),diffIgnored:S("diff-ignored",60125),diffModified:S("diff-modified",60126),diffRemoved:S("diff-removed",60127),diffRenamed:S("diff-renamed",60128),diff:S("diff",60129),diffSidebyside:S("diff-sidebyside",60129),discard:S("discard",60130),editorLayout:S("editor-layout",60131),emptyWindow:S("empty-window",60132),exclude:S("exclude",60133),extensions:S("extensions",60134),eyeClosed:S("eye-closed",60135),fileBinary:S("file-binary",60136),fileCode:S("file-code",60137),fileMedia:S("file-media",60138),filePdf:S("file-pdf",60139),fileSubmodule:S("file-submodule",60140),fileSymlinkDirectory:S("file-symlink-directory",60141),fileSymlinkFile:S("file-symlink-file",60142),fileZip:S("file-zip",60143),files:S("files",60144),filter:S("filter",60145),flame:S("flame",60146),foldDown:S("fold-down",60147),foldUp:S("fold-up",60148),fold:S("fold",60149),folderActive:S("folder-active",60150),folderOpened:S("folder-opened",60151),gear:S("gear",60152),gift:S("gift",60153),gistSecret:S("gist-secret",60154),gist:S("gist",60155),gitCommit:S("git-commit",60156),gitCompare:S("git-compare",60157),compareChanges:S("compare-changes",60157),gitMerge:S("git-merge",60158),githubAction:S("github-action",60159),githubAlt:S("github-alt",60160),globe:S("globe",60161),grabber:S("grabber",60162),graph:S("graph",60163),gripper:S("gripper",60164),heart:S("heart",60165),home:S("home",60166),horizontalRule:S("horizontal-rule",60167),hubot:S("hubot",60168),inbox:S("inbox",60169),issueReopened:S("issue-reopened",60171),issues:S("issues",60172),italic:S("italic",60173),jersey:S("jersey",60174),json:S("json",60175),kebabVertical:S("kebab-vertical",60176),key:S("key",60177),law:S("law",60178),lightbulbAutofix:S("lightbulb-autofix",60179),linkExternal:S("link-external",60180),link:S("link",60181),listOrdered:S("list-ordered",60182),listUnordered:S("list-unordered",60183),liveShare:S("live-share",60184),loading:S("loading",60185),location:S("location",60186),mailRead:S("mail-read",60187),mail:S("mail",60188),markdown:S("markdown",60189),megaphone:S("megaphone",60190),mention:S("mention",60191),milestone:S("milestone",60192),gitPullRequestMilestone:S("git-pull-request-milestone",60192),mortarBoard:S("mortar-board",60193),move:S("move",60194),multipleWindows:S("multiple-windows",60195),mute:S("mute",60196),noNewline:S("no-newline",60197),note:S("note",60198),octoface:S("octoface",60199),openPreview:S("open-preview",60200),package:S("package",60201),paintcan:S("paintcan",60202),pin:S("pin",60203),play:S("play",60204),run:S("run",60204),plug:S("plug",60205),preserveCase:S("preserve-case",60206),preview:S("preview",60207),project:S("project",60208),pulse:S("pulse",60209),question:S("question",60210),quote:S("quote",60211),radioTower:S("radio-tower",60212),reactions:S("reactions",60213),references:S("references",60214),refresh:S("refresh",60215),regex:S("regex",60216),remoteExplorer:S("remote-explorer",60217),remote:S("remote",60218),remove:S("remove",60219),replaceAll:S("replace-all",60220),replace:S("replace",60221),repoClone:S("repo-clone",60222),repoForcePush:S("repo-force-push",60223),repoPull:S("repo-pull",60224),repoPush:S("repo-push",60225),report:S("report",60226),requestChanges:S("request-changes",60227),rocket:S("rocket",60228),rootFolderOpened:S("root-folder-opened",60229),rootFolder:S("root-folder",60230),rss:S("rss",60231),ruby:S("ruby",60232),saveAll:S("save-all",60233),saveAs:S("save-as",60234),save:S("save",60235),screenFull:S("screen-full",60236),screenNormal:S("screen-normal",60237),searchStop:S("search-stop",60238),server:S("server",60240),settingsGear:S("settings-gear",60241),settings:S("settings",60242),shield:S("shield",60243),smiley:S("smiley",60244),sortPrecedence:S("sort-precedence",60245),splitHorizontal:S("split-horizontal",60246),splitVertical:S("split-vertical",60247),squirrel:S("squirrel",60248),starFull:S("star-full",60249),starHalf:S("star-half",60250),symbolClass:S("symbol-class",60251),symbolColor:S("symbol-color",60252),symbolConstant:S("symbol-constant",60253),symbolEnumMember:S("symbol-enum-member",60254),symbolField:S("symbol-field",60255),symbolFile:S("symbol-file",60256),symbolInterface:S("symbol-interface",60257),symbolKeyword:S("symbol-keyword",60258),symbolMisc:S("symbol-misc",60259),symbolOperator:S("symbol-operator",60260),symbolProperty:S("symbol-property",60261),wrench:S("wrench",60261),wrenchSubaction:S("wrench-subaction",60261),symbolSnippet:S("symbol-snippet",60262),tasklist:S("tasklist",60263),telescope:S("telescope",60264),textSize:S("text-size",60265),threeBars:S("three-bars",60266),thumbsdown:S("thumbsdown",60267),thumbsup:S("thumbsup",60268),tools:S("tools",60269),triangleDown:S("triangle-down",60270),triangleLeft:S("triangle-left",60271),triangleRight:S("triangle-right",60272),triangleUp:S("triangle-up",60273),twitter:S("twitter",60274),unfold:S("unfold",60275),unlock:S("unlock",60276),unmute:S("unmute",60277),unverified:S("unverified",60278),verified:S("verified",60279),versions:S("versions",60280),vmActive:S("vm-active",60281),vmOutline:S("vm-outline",60282),vmRunning:S("vm-running",60283),watch:S("watch",60284),whitespace:S("whitespace",60285),wholeWord:S("whole-word",60286),window:S("window",60287),wordWrap:S("word-wrap",60288),zoomIn:S("zoom-in",60289),zoomOut:S("zoom-out",60290),listFilter:S("list-filter",60291),listFlat:S("list-flat",60292),listSelection:S("list-selection",60293),selection:S("selection",60293),listTree:S("list-tree",60294),debugBreakpointFunctionUnverified:S("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:S("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:S("debug-breakpoint-function-disabled",60296),debugStackframeActive:S("debug-stackframe-active",60297),circleSmallFilled:S("circle-small-filled",60298),debugStackframeDot:S("debug-stackframe-dot",60298),terminalDecorationMark:S("terminal-decoration-mark",60298),debugStackframe:S("debug-stackframe",60299),debugStackframeFocused:S("debug-stackframe-focused",60299),debugBreakpointUnsupported:S("debug-breakpoint-unsupported",60300),symbolString:S("symbol-string",60301),debugReverseContinue:S("debug-reverse-continue",60302),debugStepBack:S("debug-step-back",60303),debugRestartFrame:S("debug-restart-frame",60304),debugAlt:S("debug-alt",60305),callIncoming:S("call-incoming",60306),callOutgoing:S("call-outgoing",60307),menu:S("menu",60308),expandAll:S("expand-all",60309),feedback:S("feedback",60310),gitPullRequestReviewer:S("git-pull-request-reviewer",60310),groupByRefType:S("group-by-ref-type",60311),ungroupByRefType:S("ungroup-by-ref-type",60312),account:S("account",60313),gitPullRequestAssignee:S("git-pull-request-assignee",60313),bellDot:S("bell-dot",60314),debugConsole:S("debug-console",60315),library:S("library",60316),output:S("output",60317),runAll:S("run-all",60318),syncIgnored:S("sync-ignored",60319),pinned:S("pinned",60320),githubInverted:S("github-inverted",60321),serverProcess:S("server-process",60322),serverEnvironment:S("server-environment",60323),pass:S("pass",60324),issueClosed:S("issue-closed",60324),stopCircle:S("stop-circle",60325),playCircle:S("play-circle",60326),record:S("record",60327),debugAltSmall:S("debug-alt-small",60328),vmConnect:S("vm-connect",60329),cloud:S("cloud",60330),merge:S("merge",60331),export:S("export",60332),graphLeft:S("graph-left",60333),magnet:S("magnet",60334),notebook:S("notebook",60335),redo:S("redo",60336),checkAll:S("check-all",60337),pinnedDirty:S("pinned-dirty",60338),passFilled:S("pass-filled",60339),circleLargeFilled:S("circle-large-filled",60340),circleLarge:S("circle-large",60341),circleLargeOutline:S("circle-large-outline",60341),combine:S("combine",60342),gather:S("gather",60342),table:S("table",60343),variableGroup:S("variable-group",60344),typeHierarchy:S("type-hierarchy",60345),typeHierarchySub:S("type-hierarchy-sub",60346),typeHierarchySuper:S("type-hierarchy-super",60347),gitPullRequestCreate:S("git-pull-request-create",60348),runAbove:S("run-above",60349),runBelow:S("run-below",60350),notebookTemplate:S("notebook-template",60351),debugRerun:S("debug-rerun",60352),workspaceTrusted:S("workspace-trusted",60353),workspaceUntrusted:S("workspace-untrusted",60354),workspaceUnknown:S("workspace-unknown",60355),terminalCmd:S("terminal-cmd",60356),terminalDebian:S("terminal-debian",60357),terminalLinux:S("terminal-linux",60358),terminalPowershell:S("terminal-powershell",60359),terminalTmux:S("terminal-tmux",60360),terminalUbuntu:S("terminal-ubuntu",60361),terminalBash:S("terminal-bash",60362),arrowSwap:S("arrow-swap",60363),copy:S("copy",60364),personAdd:S("person-add",60365),filterFilled:S("filter-filled",60366),wand:S("wand",60367),debugLineByLine:S("debug-line-by-line",60368),inspect:S("inspect",60369),layers:S("layers",60370),layersDot:S("layers-dot",60371),layersActive:S("layers-active",60372),compass:S("compass",60373),compassDot:S("compass-dot",60374),compassActive:S("compass-active",60375),azure:S("azure",60376),issueDraft:S("issue-draft",60377),gitPullRequestClosed:S("git-pull-request-closed",60378),gitPullRequestDraft:S("git-pull-request-draft",60379),debugAll:S("debug-all",60380),debugCoverage:S("debug-coverage",60381),runErrors:S("run-errors",60382),folderLibrary:S("folder-library",60383),debugContinueSmall:S("debug-continue-small",60384),beakerStop:S("beaker-stop",60385),graphLine:S("graph-line",60386),graphScatter:S("graph-scatter",60387),pieChart:S("pie-chart",60388),bracket:S("bracket",60175),bracketDot:S("bracket-dot",60389),bracketError:S("bracket-error",60390),lockSmall:S("lock-small",60391),azureDevops:S("azure-devops",60392),verifiedFilled:S("verified-filled",60393),newline:S("newline",60394),layout:S("layout",60395),layoutActivitybarLeft:S("layout-activitybar-left",60396),layoutActivitybarRight:S("layout-activitybar-right",60397),layoutPanelLeft:S("layout-panel-left",60398),layoutPanelCenter:S("layout-panel-center",60399),layoutPanelJustify:S("layout-panel-justify",60400),layoutPanelRight:S("layout-panel-right",60401),layoutPanel:S("layout-panel",60402),layoutSidebarLeft:S("layout-sidebar-left",60403),layoutSidebarRight:S("layout-sidebar-right",60404),layoutStatusbar:S("layout-statusbar",60405),layoutMenubar:S("layout-menubar",60406),layoutCentered:S("layout-centered",60407),target:S("target",60408),indent:S("indent",60409),recordSmall:S("record-small",60410),errorSmall:S("error-small",60411),terminalDecorationError:S("terminal-decoration-error",60411),arrowCircleDown:S("arrow-circle-down",60412),arrowCircleLeft:S("arrow-circle-left",60413),arrowCircleRight:S("arrow-circle-right",60414),arrowCircleUp:S("arrow-circle-up",60415),layoutSidebarRightOff:S("layout-sidebar-right-off",60416),layoutPanelOff:S("layout-panel-off",60417),layoutSidebarLeftOff:S("layout-sidebar-left-off",60418),blank:S("blank",60419),heartFilled:S("heart-filled",60420),map:S("map",60421),mapHorizontal:S("map-horizontal",60421),foldHorizontal:S("fold-horizontal",60421),mapFilled:S("map-filled",60422),mapHorizontalFilled:S("map-horizontal-filled",60422),foldHorizontalFilled:S("fold-horizontal-filled",60422),circleSmall:S("circle-small",60423),bellSlash:S("bell-slash",60424),bellSlashDot:S("bell-slash-dot",60425),commentUnresolved:S("comment-unresolved",60426),gitPullRequestGoToChanges:S("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:S("git-pull-request-new-changes",60428),searchFuzzy:S("search-fuzzy",60429),commentDraft:S("comment-draft",60430),send:S("send",60431),sparkle:S("sparkle",60432),insert:S("insert",60433),mic:S("mic",60434),thumbsdownFilled:S("thumbsdown-filled",60435),thumbsupFilled:S("thumbsup-filled",60436),coffee:S("coffee",60437),snake:S("snake",60438),game:S("game",60439),vr:S("vr",60440),chip:S("chip",60441),piano:S("piano",60442),music:S("music",60443),micFilled:S("mic-filled",60444),repoFetch:S("repo-fetch",60445),copilot:S("copilot",60446),lightbulbSparkle:S("lightbulb-sparkle",60447),robot:S("robot",60448),sparkleFilled:S("sparkle-filled",60449),diffSingle:S("diff-single",60450),diffMultiple:S("diff-multiple",60451),surroundWith:S("surround-with",60452),share:S("share",60453),gitStash:S("git-stash",60454),gitStashApply:S("git-stash-apply",60455),gitStashPop:S("git-stash-pop",60456),vscode:S("vscode",60457),vscodeInsiders:S("vscode-insiders",60458),codeOss:S("code-oss",60459),runCoverage:S("run-coverage",60460),runAllCoverage:S("run-all-coverage",60461),coverage:S("coverage",60462),githubProject:S("github-project",60463),mapVertical:S("map-vertical",60464),foldVertical:S("fold-vertical",60464),mapVerticalFilled:S("map-vertical-filled",60465),foldVerticalFilled:S("fold-vertical-filled",60465),goToSearch:S("go-to-search",60466),percentage:S("percentage",60467),sortPercentage:S("sort-percentage",60467),attach:S("attach",60468)},iie={dialogError:S("dialog-error","error"),dialogWarning:S("dialog-warning","warning"),dialogInfo:S("dialog-info","info"),dialogClose:S("dialog-close","close"),treeItemExpanded:S("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:S("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:S("tree-filter-on-type-off","list-selection"),treeFilterClear:S("tree-filter-clear","close"),treeItemLoading:S("tree-item-loading","loading"),menuSelection:S("menu-selection","check"),menuSubmenu:S("menu-submenu","chevron-right"),menuBarMore:S("menubar-more","more"),scrollbarButtonLeft:S("scrollbar-button-left","triangle-left"),scrollbarButtonRight:S("scrollbar-button-right","triangle-right"),scrollbarButtonUp:S("scrollbar-button-up","triangle-up"),scrollbarButtonDown:S("scrollbar-button-down","triangle-down"),toolBarMore:S("toolbar-more","more"),quickInputBack:S("quick-input-back","arrow-left"),dropDownButton:S("drop-down-button",60084),symbolCustomColor:S("symbol-customcolor",60252),exportIcon:S("export",60332),workspaceUnspecified:S("workspace-unspecified",60355),newLine:S("newline",60394),thumbsDownFilled:S("thumbsdown-filled",60435),thumbsUpFilled:S("thumbsup-filled",60436),gitFetch:S("git-fetch",60445),lightbulbSparkleAutofix:S("lightbulb-sparkle-autofix",60447),debugBreakpointPending:S("debug-breakpoint-pending",60377)},J={...nie,...iie};let $j=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new O,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),ve(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var i;(i=this._factories.get(e))==null||i.dispose();const n=new sie(this,e,t);return this._factories.set(e,n),ve(()=>{const o=this._factories.get(e);!o||o!==n||(this._factories.delete(e),o.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}};class sie extends F{get isResolved(){return this._isResolved}constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let Aw=class{constructor(e,t,n){this.offset=e,this.type=t,this.language=n,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class R3{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class fT{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var ho;(function(s){s[s.Increase=0]="Increase",s[s.Decrease=1]="Decrease"})(ho||(ho={}));var Pw;(function(s){const e=new Map;e.set(0,J.symbolMethod),e.set(1,J.symbolFunction),e.set(2,J.symbolConstructor),e.set(3,J.symbolField),e.set(4,J.symbolVariable),e.set(5,J.symbolClass),e.set(6,J.symbolStruct),e.set(7,J.symbolInterface),e.set(8,J.symbolModule),e.set(9,J.symbolProperty),e.set(10,J.symbolEvent),e.set(11,J.symbolOperator),e.set(12,J.symbolUnit),e.set(13,J.symbolValue),e.set(15,J.symbolEnum),e.set(14,J.symbolConstant),e.set(15,J.symbolEnum),e.set(16,J.symbolEnumMember),e.set(17,J.symbolKeyword),e.set(27,J.symbolSnippet),e.set(18,J.symbolText),e.set(19,J.symbolColor),e.set(20,J.symbolFile),e.set(21,J.symbolReference),e.set(22,J.symbolCustomColor),e.set(23,J.symbolFolder),e.set(24,J.symbolTypeParameter),e.set(25,J.account),e.set(26,J.issues);function t(o){let r=e.get(o);return r||(console.info("No codicon found for CompletionItemKind "+o),r=J.symbolProperty),r}s.toIcon=t;const n=new Map;n.set("method",0),n.set("function",1),n.set("constructor",2),n.set("field",3),n.set("variable",4),n.set("class",5),n.set("struct",6),n.set("interface",7),n.set("module",8),n.set("property",9),n.set("event",10),n.set("operator",11),n.set("unit",12),n.set("value",13),n.set("constant",14),n.set("enum",15),n.set("enum-member",16),n.set("enumMember",16),n.set("keyword",17),n.set("snippet",27),n.set("text",18),n.set("color",19),n.set("file",20),n.set("reference",21),n.set("customcolor",22),n.set("folder",23),n.set("type-parameter",24),n.set("typeParameter",24),n.set("account",25),n.set("issue",26);function i(o,r){let a=n.get(o);return typeof a>"u"&&!r&&(a=9),a}s.fromString=i})(Pw||(Pw={}));var Wa;(function(s){s[s.Automatic=0]="Automatic",s[s.Explicit=1]="Explicit"})(Wa||(Wa={}));class Uj{constructor(e,t,n,i){this.range=e,this.text=t,this.completionKind=n,this.isSnippetText=i}equals(e){return L.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var Ow;(function(s){s[s.Automatic=0]="Automatic",s[s.PasteAs=1]="PasteAs"})(Ow||(Ow={}));var zl;(function(s){s[s.Invoke=1]="Invoke",s[s.TriggerCharacter=2]="TriggerCharacter",s[s.ContentChange=3]="ContentChange"})(zl||(zl={}));var sb;(function(s){s[s.Text=0]="Text",s[s.Read=1]="Read",s[s.Write=2]="Write"})(sb||(sb={}));function oie(s){return s&&Se.isUri(s.uri)&&L.isIRange(s.range)&&(L.isIRange(s.originSelectionRange)||L.isIRange(s.targetSelectionRange))}const rie={17:m("Array","array"),16:m("Boolean","boolean"),4:m("Class","class"),13:m("Constant","constant"),8:m("Constructor","constructor"),9:m("Enum","enumeration"),21:m("EnumMember","enumeration member"),23:m("Event","event"),7:m("Field","field"),0:m("File","file"),11:m("Function","function"),10:m("Interface","interface"),19:m("Key","key"),5:m("Method","method"),1:m("Module","module"),2:m("Namespace","namespace"),20:m("Null","null"),15:m("Number","number"),18:m("Object","object"),24:m("Operator","operator"),3:m("Package","package"),6:m("Property","property"),14:m("String","string"),22:m("Struct","struct"),25:m("TypeParameter","type parameter"),12:m("Variable","variable")};function aie(s,e){return m("symbolAriaLabel","{0} ({1})",s,rie[e])}var Nk;(function(s){const e=new Map;e.set(0,J.symbolFile),e.set(1,J.symbolModule),e.set(2,J.symbolNamespace),e.set(3,J.symbolPackage),e.set(4,J.symbolClass),e.set(5,J.symbolMethod),e.set(6,J.symbolProperty),e.set(7,J.symbolField),e.set(8,J.symbolConstructor),e.set(9,J.symbolEnum),e.set(10,J.symbolInterface),e.set(11,J.symbolFunction),e.set(12,J.symbolVariable),e.set(13,J.symbolConstant),e.set(14,J.symbolString),e.set(15,J.symbolNumber),e.set(16,J.symbolBoolean),e.set(17,J.symbolArray),e.set(18,J.symbolObject),e.set(19,J.symbolKey),e.set(20,J.symbolNull),e.set(21,J.symbolEnumMember),e.set(22,J.symbolStruct),e.set(23,J.symbolEvent),e.set(24,J.symbolOperator),e.set(25,J.symbolTypeParameter);function t(n){let i=e.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=J.symbolProperty),i}s.toIcon=t})(Nk||(Nk={}));const Br=class Br{static fromValue(e){switch(e){case"comment":return Br.Comment;case"imports":return Br.Imports;case"region":return Br.Region}return new Br(e)}constructor(e){this.value=e}};Br.Comment=new Br("comment"),Br.Imports=new Br("imports"),Br.Region=new Br("region");let su=Br;var B2;(function(s){s[s.AIGenerated=1]="AIGenerated"})(B2||(B2={}));var Fw;(function(s){s[s.Invoke=0]="Invoke",s[s.Automatic=1]="Automatic"})(Fw||(Fw={}));var H2;(function(s){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}s.is=e})(H2||(H2={}));var Rk;(function(s){s[s.Type=1]="Type",s[s.Parameter=2]="Parameter"})(Rk||(Rk={}));class lie{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const mn=new $j,V2=new $j;var Mk;(function(s){s[s.Invoke=0]="Invoke",s[s.Automatic=1]="Automatic"})(Mk||(Mk={}));var z2;(function(s){s[s.Unknown=0]="Unknown",s[s.Disabled=1]="Disabled",s[s.Enabled=2]="Enabled"})(z2||(z2={}));var $2;(function(s){s[s.Invoke=1]="Invoke",s[s.Auto=2]="Auto"})($2||($2={}));var U2;(function(s){s[s.None=0]="None",s[s.KeepWhitespace=1]="KeepWhitespace",s[s.InsertAsSnippet=4]="InsertAsSnippet"})(U2||(U2={}));var j2;(function(s){s[s.Method=0]="Method",s[s.Function=1]="Function",s[s.Constructor=2]="Constructor",s[s.Field=3]="Field",s[s.Variable=4]="Variable",s[s.Class=5]="Class",s[s.Struct=6]="Struct",s[s.Interface=7]="Interface",s[s.Module=8]="Module",s[s.Property=9]="Property",s[s.Event=10]="Event",s[s.Operator=11]="Operator",s[s.Unit=12]="Unit",s[s.Value=13]="Value",s[s.Constant=14]="Constant",s[s.Enum=15]="Enum",s[s.EnumMember=16]="EnumMember",s[s.Keyword=17]="Keyword",s[s.Text=18]="Text",s[s.Color=19]="Color",s[s.File=20]="File",s[s.Reference=21]="Reference",s[s.Customcolor=22]="Customcolor",s[s.Folder=23]="Folder",s[s.TypeParameter=24]="TypeParameter",s[s.User=25]="User",s[s.Issue=26]="Issue",s[s.Snippet=27]="Snippet"})(j2||(j2={}));var q2;(function(s){s[s.Deprecated=1]="Deprecated"})(q2||(q2={}));var K2;(function(s){s[s.Invoke=0]="Invoke",s[s.TriggerCharacter=1]="TriggerCharacter",s[s.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(K2||(K2={}));var G2;(function(s){s[s.EXACT=0]="EXACT",s[s.ABOVE=1]="ABOVE",s[s.BELOW=2]="BELOW"})(G2||(G2={}));var Z2;(function(s){s[s.NotSet=0]="NotSet",s[s.ContentFlush=1]="ContentFlush",s[s.RecoverFromMarkers=2]="RecoverFromMarkers",s[s.Explicit=3]="Explicit",s[s.Paste=4]="Paste",s[s.Undo=5]="Undo",s[s.Redo=6]="Redo"})(Z2||(Z2={}));var Y2;(function(s){s[s.LF=1]="LF",s[s.CRLF=2]="CRLF"})(Y2||(Y2={}));var X2;(function(s){s[s.Text=0]="Text",s[s.Read=1]="Read",s[s.Write=2]="Write"})(X2||(X2={}));var Q2;(function(s){s[s.None=0]="None",s[s.Keep=1]="Keep",s[s.Brackets=2]="Brackets",s[s.Advanced=3]="Advanced",s[s.Full=4]="Full"})(Q2||(Q2={}));var J2;(function(s){s[s.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",s[s.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",s[s.accessibilitySupport=2]="accessibilitySupport",s[s.accessibilityPageSize=3]="accessibilityPageSize",s[s.ariaLabel=4]="ariaLabel",s[s.ariaRequired=5]="ariaRequired",s[s.autoClosingBrackets=6]="autoClosingBrackets",s[s.autoClosingComments=7]="autoClosingComments",s[s.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",s[s.autoClosingDelete=9]="autoClosingDelete",s[s.autoClosingOvertype=10]="autoClosingOvertype",s[s.autoClosingQuotes=11]="autoClosingQuotes",s[s.autoIndent=12]="autoIndent",s[s.automaticLayout=13]="automaticLayout",s[s.autoSurround=14]="autoSurround",s[s.bracketPairColorization=15]="bracketPairColorization",s[s.guides=16]="guides",s[s.codeLens=17]="codeLens",s[s.codeLensFontFamily=18]="codeLensFontFamily",s[s.codeLensFontSize=19]="codeLensFontSize",s[s.colorDecorators=20]="colorDecorators",s[s.colorDecoratorsLimit=21]="colorDecoratorsLimit",s[s.columnSelection=22]="columnSelection",s[s.comments=23]="comments",s[s.contextmenu=24]="contextmenu",s[s.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",s[s.cursorBlinking=26]="cursorBlinking",s[s.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",s[s.cursorStyle=28]="cursorStyle",s[s.cursorSurroundingLines=29]="cursorSurroundingLines",s[s.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",s[s.cursorWidth=31]="cursorWidth",s[s.disableLayerHinting=32]="disableLayerHinting",s[s.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",s[s.domReadOnly=34]="domReadOnly",s[s.dragAndDrop=35]="dragAndDrop",s[s.dropIntoEditor=36]="dropIntoEditor",s[s.emptySelectionClipboard=37]="emptySelectionClipboard",s[s.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",s[s.extraEditorClassName=39]="extraEditorClassName",s[s.fastScrollSensitivity=40]="fastScrollSensitivity",s[s.find=41]="find",s[s.fixedOverflowWidgets=42]="fixedOverflowWidgets",s[s.folding=43]="folding",s[s.foldingStrategy=44]="foldingStrategy",s[s.foldingHighlight=45]="foldingHighlight",s[s.foldingImportsByDefault=46]="foldingImportsByDefault",s[s.foldingMaximumRegions=47]="foldingMaximumRegions",s[s.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",s[s.fontFamily=49]="fontFamily",s[s.fontInfo=50]="fontInfo",s[s.fontLigatures=51]="fontLigatures",s[s.fontSize=52]="fontSize",s[s.fontWeight=53]="fontWeight",s[s.fontVariations=54]="fontVariations",s[s.formatOnPaste=55]="formatOnPaste",s[s.formatOnType=56]="formatOnType",s[s.glyphMargin=57]="glyphMargin",s[s.gotoLocation=58]="gotoLocation",s[s.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",s[s.hover=60]="hover",s[s.inDiffEditor=61]="inDiffEditor",s[s.inlineSuggest=62]="inlineSuggest",s[s.inlineEdit=63]="inlineEdit",s[s.letterSpacing=64]="letterSpacing",s[s.lightbulb=65]="lightbulb",s[s.lineDecorationsWidth=66]="lineDecorationsWidth",s[s.lineHeight=67]="lineHeight",s[s.lineNumbers=68]="lineNumbers",s[s.lineNumbersMinChars=69]="lineNumbersMinChars",s[s.linkedEditing=70]="linkedEditing",s[s.links=71]="links",s[s.matchBrackets=72]="matchBrackets",s[s.minimap=73]="minimap",s[s.mouseStyle=74]="mouseStyle",s[s.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",s[s.mouseWheelZoom=76]="mouseWheelZoom",s[s.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",s[s.multiCursorModifier=78]="multiCursorModifier",s[s.multiCursorPaste=79]="multiCursorPaste",s[s.multiCursorLimit=80]="multiCursorLimit",s[s.occurrencesHighlight=81]="occurrencesHighlight",s[s.overviewRulerBorder=82]="overviewRulerBorder",s[s.overviewRulerLanes=83]="overviewRulerLanes",s[s.padding=84]="padding",s[s.pasteAs=85]="pasteAs",s[s.parameterHints=86]="parameterHints",s[s.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",s[s.placeholder=88]="placeholder",s[s.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",s[s.quickSuggestions=90]="quickSuggestions",s[s.quickSuggestionsDelay=91]="quickSuggestionsDelay",s[s.readOnly=92]="readOnly",s[s.readOnlyMessage=93]="readOnlyMessage",s[s.renameOnType=94]="renameOnType",s[s.renderControlCharacters=95]="renderControlCharacters",s[s.renderFinalNewline=96]="renderFinalNewline",s[s.renderLineHighlight=97]="renderLineHighlight",s[s.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",s[s.renderValidationDecorations=99]="renderValidationDecorations",s[s.renderWhitespace=100]="renderWhitespace",s[s.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",s[s.roundedSelection=102]="roundedSelection",s[s.rulers=103]="rulers",s[s.scrollbar=104]="scrollbar",s[s.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",s[s.scrollBeyondLastLine=106]="scrollBeyondLastLine",s[s.scrollPredominantAxis=107]="scrollPredominantAxis",s[s.selectionClipboard=108]="selectionClipboard",s[s.selectionHighlight=109]="selectionHighlight",s[s.selectOnLineNumbers=110]="selectOnLineNumbers",s[s.showFoldingControls=111]="showFoldingControls",s[s.showUnused=112]="showUnused",s[s.snippetSuggestions=113]="snippetSuggestions",s[s.smartSelect=114]="smartSelect",s[s.smoothScrolling=115]="smoothScrolling",s[s.stickyScroll=116]="stickyScroll",s[s.stickyTabStops=117]="stickyTabStops",s[s.stopRenderingLineAfter=118]="stopRenderingLineAfter",s[s.suggest=119]="suggest",s[s.suggestFontSize=120]="suggestFontSize",s[s.suggestLineHeight=121]="suggestLineHeight",s[s.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",s[s.suggestSelection=123]="suggestSelection",s[s.tabCompletion=124]="tabCompletion",s[s.tabIndex=125]="tabIndex",s[s.unicodeHighlighting=126]="unicodeHighlighting",s[s.unusualLineTerminators=127]="unusualLineTerminators",s[s.useShadowDOM=128]="useShadowDOM",s[s.useTabStops=129]="useTabStops",s[s.wordBreak=130]="wordBreak",s[s.wordSegmenterLocales=131]="wordSegmenterLocales",s[s.wordSeparators=132]="wordSeparators",s[s.wordWrap=133]="wordWrap",s[s.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",s[s.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",s[s.wordWrapColumn=136]="wordWrapColumn",s[s.wordWrapOverride1=137]="wordWrapOverride1",s[s.wordWrapOverride2=138]="wordWrapOverride2",s[s.wrappingIndent=139]="wrappingIndent",s[s.wrappingStrategy=140]="wrappingStrategy",s[s.showDeprecated=141]="showDeprecated",s[s.inlayHints=142]="inlayHints",s[s.editorClassName=143]="editorClassName",s[s.pixelRatio=144]="pixelRatio",s[s.tabFocusMode=145]="tabFocusMode",s[s.layoutInfo=146]="layoutInfo",s[s.wrappingInfo=147]="wrappingInfo",s[s.defaultColorDecorators=148]="defaultColorDecorators",s[s.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",s[s.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(J2||(J2={}));var eM;(function(s){s[s.TextDefined=0]="TextDefined",s[s.LF=1]="LF",s[s.CRLF=2]="CRLF"})(eM||(eM={}));var tM;(function(s){s[s.LF=0]="LF",s[s.CRLF=1]="CRLF"})(tM||(tM={}));var nM;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=3]="Right"})(nM||(nM={}));var iM;(function(s){s[s.Increase=0]="Increase",s[s.Decrease=1]="Decrease"})(iM||(iM={}));var sM;(function(s){s[s.None=0]="None",s[s.Indent=1]="Indent",s[s.IndentOutdent=2]="IndentOutdent",s[s.Outdent=3]="Outdent"})(sM||(sM={}));var oM;(function(s){s[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None"})(oM||(oM={}));var rM;(function(s){s[s.Type=1]="Type",s[s.Parameter=2]="Parameter"})(rM||(rM={}));var aM;(function(s){s[s.Automatic=0]="Automatic",s[s.Explicit=1]="Explicit"})(aM||(aM={}));var lM;(function(s){s[s.Invoke=0]="Invoke",s[s.Automatic=1]="Automatic"})(lM||(lM={}));var cM;(function(s){s[s.DependsOnKbLayout=-1]="DependsOnKbLayout",s[s.Unknown=0]="Unknown",s[s.Backspace=1]="Backspace",s[s.Tab=2]="Tab",s[s.Enter=3]="Enter",s[s.Shift=4]="Shift",s[s.Ctrl=5]="Ctrl",s[s.Alt=6]="Alt",s[s.PauseBreak=7]="PauseBreak",s[s.CapsLock=8]="CapsLock",s[s.Escape=9]="Escape",s[s.Space=10]="Space",s[s.PageUp=11]="PageUp",s[s.PageDown=12]="PageDown",s[s.End=13]="End",s[s.Home=14]="Home",s[s.LeftArrow=15]="LeftArrow",s[s.UpArrow=16]="UpArrow",s[s.RightArrow=17]="RightArrow",s[s.DownArrow=18]="DownArrow",s[s.Insert=19]="Insert",s[s.Delete=20]="Delete",s[s.Digit0=21]="Digit0",s[s.Digit1=22]="Digit1",s[s.Digit2=23]="Digit2",s[s.Digit3=24]="Digit3",s[s.Digit4=25]="Digit4",s[s.Digit5=26]="Digit5",s[s.Digit6=27]="Digit6",s[s.Digit7=28]="Digit7",s[s.Digit8=29]="Digit8",s[s.Digit9=30]="Digit9",s[s.KeyA=31]="KeyA",s[s.KeyB=32]="KeyB",s[s.KeyC=33]="KeyC",s[s.KeyD=34]="KeyD",s[s.KeyE=35]="KeyE",s[s.KeyF=36]="KeyF",s[s.KeyG=37]="KeyG",s[s.KeyH=38]="KeyH",s[s.KeyI=39]="KeyI",s[s.KeyJ=40]="KeyJ",s[s.KeyK=41]="KeyK",s[s.KeyL=42]="KeyL",s[s.KeyM=43]="KeyM",s[s.KeyN=44]="KeyN",s[s.KeyO=45]="KeyO",s[s.KeyP=46]="KeyP",s[s.KeyQ=47]="KeyQ",s[s.KeyR=48]="KeyR",s[s.KeyS=49]="KeyS",s[s.KeyT=50]="KeyT",s[s.KeyU=51]="KeyU",s[s.KeyV=52]="KeyV",s[s.KeyW=53]="KeyW",s[s.KeyX=54]="KeyX",s[s.KeyY=55]="KeyY",s[s.KeyZ=56]="KeyZ",s[s.Meta=57]="Meta",s[s.ContextMenu=58]="ContextMenu",s[s.F1=59]="F1",s[s.F2=60]="F2",s[s.F3=61]="F3",s[s.F4=62]="F4",s[s.F5=63]="F5",s[s.F6=64]="F6",s[s.F7=65]="F7",s[s.F8=66]="F8",s[s.F9=67]="F9",s[s.F10=68]="F10",s[s.F11=69]="F11",s[s.F12=70]="F12",s[s.F13=71]="F13",s[s.F14=72]="F14",s[s.F15=73]="F15",s[s.F16=74]="F16",s[s.F17=75]="F17",s[s.F18=76]="F18",s[s.F19=77]="F19",s[s.F20=78]="F20",s[s.F21=79]="F21",s[s.F22=80]="F22",s[s.F23=81]="F23",s[s.F24=82]="F24",s[s.NumLock=83]="NumLock",s[s.ScrollLock=84]="ScrollLock",s[s.Semicolon=85]="Semicolon",s[s.Equal=86]="Equal",s[s.Comma=87]="Comma",s[s.Minus=88]="Minus",s[s.Period=89]="Period",s[s.Slash=90]="Slash",s[s.Backquote=91]="Backquote",s[s.BracketLeft=92]="BracketLeft",s[s.Backslash=93]="Backslash",s[s.BracketRight=94]="BracketRight",s[s.Quote=95]="Quote",s[s.OEM_8=96]="OEM_8",s[s.IntlBackslash=97]="IntlBackslash",s[s.Numpad0=98]="Numpad0",s[s.Numpad1=99]="Numpad1",s[s.Numpad2=100]="Numpad2",s[s.Numpad3=101]="Numpad3",s[s.Numpad4=102]="Numpad4",s[s.Numpad5=103]="Numpad5",s[s.Numpad6=104]="Numpad6",s[s.Numpad7=105]="Numpad7",s[s.Numpad8=106]="Numpad8",s[s.Numpad9=107]="Numpad9",s[s.NumpadMultiply=108]="NumpadMultiply",s[s.NumpadAdd=109]="NumpadAdd",s[s.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",s[s.NumpadSubtract=111]="NumpadSubtract",s[s.NumpadDecimal=112]="NumpadDecimal",s[s.NumpadDivide=113]="NumpadDivide",s[s.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",s[s.ABNT_C1=115]="ABNT_C1",s[s.ABNT_C2=116]="ABNT_C2",s[s.AudioVolumeMute=117]="AudioVolumeMute",s[s.AudioVolumeUp=118]="AudioVolumeUp",s[s.AudioVolumeDown=119]="AudioVolumeDown",s[s.BrowserSearch=120]="BrowserSearch",s[s.BrowserHome=121]="BrowserHome",s[s.BrowserBack=122]="BrowserBack",s[s.BrowserForward=123]="BrowserForward",s[s.MediaTrackNext=124]="MediaTrackNext",s[s.MediaTrackPrevious=125]="MediaTrackPrevious",s[s.MediaStop=126]="MediaStop",s[s.MediaPlayPause=127]="MediaPlayPause",s[s.LaunchMediaPlayer=128]="LaunchMediaPlayer",s[s.LaunchMail=129]="LaunchMail",s[s.LaunchApp2=130]="LaunchApp2",s[s.Clear=131]="Clear",s[s.MAX_VALUE=132]="MAX_VALUE"})(cM||(cM={}));var dM;(function(s){s[s.Hint=1]="Hint",s[s.Info=2]="Info",s[s.Warning=4]="Warning",s[s.Error=8]="Error"})(dM||(dM={}));var hM;(function(s){s[s.Unnecessary=1]="Unnecessary",s[s.Deprecated=2]="Deprecated"})(hM||(hM={}));var uM;(function(s){s[s.Inline=1]="Inline",s[s.Gutter=2]="Gutter"})(uM||(uM={}));var fM;(function(s){s[s.Normal=1]="Normal",s[s.Underlined=2]="Underlined"})(fM||(fM={}));var gM;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.TEXTAREA=1]="TEXTAREA",s[s.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",s[s.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",s[s.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",s[s.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",s[s.CONTENT_TEXT=6]="CONTENT_TEXT",s[s.CONTENT_EMPTY=7]="CONTENT_EMPTY",s[s.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",s[s.CONTENT_WIDGET=9]="CONTENT_WIDGET",s[s.OVERVIEW_RULER=10]="OVERVIEW_RULER",s[s.SCROLLBAR=11]="SCROLLBAR",s[s.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",s[s.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(gM||(gM={}));var mM;(function(s){s[s.AIGenerated=1]="AIGenerated"})(mM||(mM={}));var pM;(function(s){s[s.Invoke=0]="Invoke",s[s.Automatic=1]="Automatic"})(pM||(pM={}));var _M;(function(s){s[s.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",s[s.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",s[s.TOP_CENTER=2]="TOP_CENTER"})(_M||(_M={}));var bM;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=4]="Right",s[s.Full=7]="Full"})(bM||(bM={}));var vM;(function(s){s[s.Word=0]="Word",s[s.Line=1]="Line",s[s.Suggest=2]="Suggest"})(vM||(vM={}));var CM;(function(s){s[s.Left=0]="Left",s[s.Right=1]="Right",s[s.None=2]="None",s[s.LeftOfInjectedText=3]="LeftOfInjectedText",s[s.RightOfInjectedText=4]="RightOfInjectedText"})(CM||(CM={}));var wM;(function(s){s[s.Off=0]="Off",s[s.On=1]="On",s[s.Relative=2]="Relative",s[s.Interval=3]="Interval",s[s.Custom=4]="Custom"})(wM||(wM={}));var yM;(function(s){s[s.None=0]="None",s[s.Text=1]="Text",s[s.Blocks=2]="Blocks"})(yM||(yM={}));var SM;(function(s){s[s.Smooth=0]="Smooth",s[s.Immediate=1]="Immediate"})(SM||(SM={}));var kM;(function(s){s[s.Auto=1]="Auto",s[s.Hidden=2]="Hidden",s[s.Visible=3]="Visible"})(kM||(kM={}));var LM;(function(s){s[s.LTR=0]="LTR",s[s.RTL=1]="RTL"})(LM||(LM={}));var xM;(function(s){s.Off="off",s.OnCode="onCode",s.On="on"})(xM||(xM={}));var DM;(function(s){s[s.Invoke=1]="Invoke",s[s.TriggerCharacter=2]="TriggerCharacter",s[s.ContentChange=3]="ContentChange"})(DM||(DM={}));var IM;(function(s){s[s.File=0]="File",s[s.Module=1]="Module",s[s.Namespace=2]="Namespace",s[s.Package=3]="Package",s[s.Class=4]="Class",s[s.Method=5]="Method",s[s.Property=6]="Property",s[s.Field=7]="Field",s[s.Constructor=8]="Constructor",s[s.Enum=9]="Enum",s[s.Interface=10]="Interface",s[s.Function=11]="Function",s[s.Variable=12]="Variable",s[s.Constant=13]="Constant",s[s.String=14]="String",s[s.Number=15]="Number",s[s.Boolean=16]="Boolean",s[s.Array=17]="Array",s[s.Object=18]="Object",s[s.Key=19]="Key",s[s.Null=20]="Null",s[s.EnumMember=21]="EnumMember",s[s.Struct=22]="Struct",s[s.Event=23]="Event",s[s.Operator=24]="Operator",s[s.TypeParameter=25]="TypeParameter"})(IM||(IM={}));var TM;(function(s){s[s.Deprecated=1]="Deprecated"})(TM||(TM={}));var EM;(function(s){s[s.Hidden=0]="Hidden",s[s.Blink=1]="Blink",s[s.Smooth=2]="Smooth",s[s.Phase=3]="Phase",s[s.Expand=4]="Expand",s[s.Solid=5]="Solid"})(EM||(EM={}));var NM;(function(s){s[s.Line=1]="Line",s[s.Block=2]="Block",s[s.Underline=3]="Underline",s[s.LineThin=4]="LineThin",s[s.BlockOutline=5]="BlockOutline",s[s.UnderlineThin=6]="UnderlineThin"})(NM||(NM={}));var RM;(function(s){s[s.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",s[s.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",s[s.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",s[s.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(RM||(RM={}));var MM;(function(s){s[s.None=0]="None",s[s.Same=1]="Same",s[s.Indent=2]="Indent",s[s.DeepIndent=3]="DeepIndent"})(MM||(MM={}));var Qc;let cie=(Qc=class{static chord(e,t){return zn(e,t)}},Qc.CtrlCmd=2048,Qc.Shift=1024,Qc.Alt=512,Qc.WinCtrl=256,Qc);function jj(){return{editor:void 0,languages:void 0,CancellationTokenSource:an,Emitter:O,KeyCode:cM,KeyMod:cie,Position:A,Range:L,Selection:me,SelectionDirection:LM,MarkerSeverity:dM,MarkerTag:hM,Uri:Se,Token:Aw}}function die(s,e){const t=s;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const Et=window;function qj(s){return s}class hie{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=qj):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class o8{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=qj):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const n=this._fn(e);return this._map.set(e,n),this._map2.set(t,n),n}}class ja{constructor(e){this.executor=e,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}function Kj(s){return!s||typeof s!="string"?!0:s.trim().length===0}const uie=/{(\d+)}/g;function Gg(s,...e){return e.length===0?s:s.replace(uie,function(t,n){const i=parseInt(n,10);return isNaN(i)||i<0||i>=e.length?t:e[i]})}function fie(s){return s.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function SC(s){return s.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Xo(s){return s.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function gie(s,e=" "){const t=g0(s,e);return Gj(t,e)}function g0(s,e){if(!s||!e)return s;const t=e.length;if(t===0||s.length===0)return s;let n=0;for(;s.indexOf(e,n)===n;)n=n+t;return s.substring(n)}function Gj(s,e){if(!s||!e)return s;const t=e.length,n=s.length;if(t===0||n===0)return s;let i=n,o=-1;for(;o=s.lastIndexOf(e,i-1),!(o===-1||o+t!==i);){if(o===0)return"";i=o}return s.substring(0,i)}function mie(s){return s.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function pie(s){return s.replace(/\*/g,"")}function Zj(s,e,t={}){if(!s)throw new Error("Cannot create regex from empty string");e||(s=Xo(s)),t.wholeWord&&(/\B/.test(s.charAt(0))||(s="\\b"+s),/\B/.test(s.charAt(s.length-1))||(s=s+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(s,n)}function _ie(s){return s.source==="^"||s.source==="^$"||s.source==="$"||s.source==="^\\s*$"?!1:!!(s.exec("")&&s.lastIndex===0)}function tc(s){return s.split(/\r\n|\r|\n/)}function bie(s){const e=[],t=s.split(/(\r\n|\r|\n)/);for(let n=0;n<Math.ceil(t.length/2);n++)e.push(t[2*n]+(t[2*n+1]??""));return e}function ds(s){for(let e=0,t=s.length;e<t;e++){const n=s.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function Rt(s,e=0,t=s.length){for(let n=e;n<t;n++){const i=s.charCodeAt(n);if(i!==32&&i!==9)return s.substring(e,n)}return s.substring(e,t)}function Ba(s,e=s.length-1){for(let t=e;t>=0;t--){const n=s.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function Ww(s,e){return s<e?-1:s>e?1:0}function M3(s,e,t=0,n=s.length,i=0,o=e.length){for(;t<n&&i<o;t++,i++){const l=s.charCodeAt(t),c=e.charCodeAt(i);if(l<c)return-1;if(l>c)return 1}const r=n-t,a=o-i;return r<a?-1:r>a?1:0}function AM(s,e){return m0(s,e,0,s.length,0,e.length)}function m0(s,e,t=0,n=s.length,i=0,o=e.length){for(;t<n&&i<o;t++,i++){let l=s.charCodeAt(t),c=e.charCodeAt(i);if(l===c)continue;if(l>=128||c>=128)return M3(s.toLowerCase(),e.toLowerCase(),t,n,i,o);ph(l)&&(l-=32),ph(c)&&(c-=32);const d=l-c;if(d!==0)return d}const r=n-t,a=o-i;return r<a?-1:r>a?1:0}function _y(s){return s>=48&&s<=57}function ph(s){return s>=97&&s<=122}function Il(s){return s>=65&&s<=90}function Ep(s,e){return s.length===e.length&&m0(s,e)===0}function A3(s,e){const t=e.length;return e.length>s.length?!1:m0(s,e,0,t)===0}function ou(s,e){const t=Math.min(s.length,e.length);let n;for(n=0;n<t;n++)if(s.charCodeAt(n)!==e.charCodeAt(n))return n;return t}function Ak(s,e){const t=Math.min(s.length,e.length);let n;const i=s.length-1,o=e.length-1;for(n=0;n<t;n++)if(s.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return t}function ni(s){return 55296<=s&&s<=56319}function Zg(s){return 56320<=s&&s<=57343}function P3(s,e){return(s-55296<<10)+(e-56320)+65536}function Pk(s,e,t){const n=s.charCodeAt(t);if(ni(n)&&t+1<e){const i=s.charCodeAt(t+1);if(Zg(i))return P3(n,i)}return n}function vie(s,e){const t=s.charCodeAt(e-1);if(Zg(t)&&e>1){const n=s.charCodeAt(e-2);if(ni(n))return P3(n,t)}return t}class O3{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=vie(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=Pk(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class Ok{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new O3(e,t)}nextGraphemeLength(){const e=Fk.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const o=t.offset,r=e.getGraphemeBreakType(t.nextCodePoint());if(r8(i,r)){t.setOffset(o);break}i=r}return t.offset-n}prevGraphemeLength(){const e=Fk.getInstance(),t=this._iterator,n=t.offset;let i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const o=t.offset,r=e.getGraphemeBreakType(t.prevCodePoint());if(r8(r,i)){t.setOffset(o);break}i=r}return n-t.offset}eol(){return this._iterator.eol()}}function F3(s,e){return new Ok(s,e).nextGraphemeLength()}function Yj(s,e){return new Ok(s,e).prevGraphemeLength()}function Cie(s,e){e>0&&Zg(s.charCodeAt(e))&&e--;const t=e+F3(s,e);return[t-Yj(s,t),t]}let fN;function wie(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function ob(s){return fN||(fN=wie()),fN.test(s)}const yie=/^[\t\n\r\x20-\x7E]*$/;function p0(s){return yie.test(s)}const Xj=/[\u2028\u2029]/;function Qj(s){return Xj.test(s)}function ru(s){return s>=11904&&s<=55215||s>=63744&&s<=64255||s>=65281&&s<=65374}function W3(s){return s>=127462&&s<=127487||s===8986||s===8987||s===9200||s===9203||s>=9728&&s<=10175||s===11088||s===11093||s>=127744&&s<=128591||s>=128640&&s<=128764||s>=128992&&s<=129008||s>=129280&&s<=129535||s>=129648&&s<=129782}const Sie="\uFEFF";function B3(s){return!!(s&&s.length>0&&s.charCodeAt(0)===65279)}function kie(s,e=!1){return s?(e&&(s=s.replace(/\\./g,"")),s.toLowerCase()!==s):!1}function Jj(s){return s=s%(2*26),s<26?String.fromCharCode(97+s):String.fromCharCode(65+s-26)}function r8(s,e){return s===0?e!==5&&e!==7:s===2&&e===3?!1:s===4||s===2||s===3||e===4||e===2||e===3?!0:!(s===8&&(e===8||e===9||e===11||e===12)||(s===11||s===9)&&(e===9||e===10)||(s===12||s===10)&&e===10||e===5||e===13||e===7||s===1||s===13&&e===14||s===6&&e===6)}const wf=class wf{static getInstance(){return wf._INSTANCE||(wf._INSTANCE=new wf),wf._INSTANCE}constructor(){this._data=Lie()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,n=t.length/3;let i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}};wf._INSTANCE=null;let Fk=wf;function Lie(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function xie(s,e){if(s===0)return 0;const t=Die(s,e);if(t!==void 0)return t;const n=new O3(e,s);return n.prevCodePoint(),n.offset}function Die(s,e){const t=new O3(e,s);let n=t.prevCodePoint();for(;Iie(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!W3(n))return;let i=t.offset;return i>0&&t.prevCodePoint()===8205&&(i=t.offset),i}function Iie(s){return 127995<=s&&s<=127999}const eq=" ",Cl=class Cl{static getInstance(e){return Cl.cache.get(Array.from(e))}static getLocales(){return Cl._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};Cl.ambiguousCharacterData=new ja(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),Cl.cache=new hie({getCacheKey:JSON.stringify},e=>{function t(d){const h=new Map;for(let u=0;u<d.length;u+=2)h.set(d[u],d[u+1]);return h}function n(d,h){const u=new Map(d);for(const[f,g]of h)u.set(f,g);return u}function i(d,h){if(!d)return h;const u=new Map;for(const[f,g]of d)h.has(f)&&u.set(f,g);return u}const o=Cl.ambiguousCharacterData.value;let r=e.filter(d=>!d.startsWith("_")&&d in o);r.length===0&&(r=["_default"]);let a;for(const d of r){const h=t(o[d]);a=i(a,h)}const l=t(o._common),c=n(l,a);return new Cl(c)}),Cl._locales=new ja(()=>Object.keys(Cl.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let Bw=Cl;const t_=class t_{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(t_.getRawData())),this._data}static isInvisibleCharacter(e){return t_.getData().has(e)}static get codePoints(){return t_.getData()}};t_._data=void 0;let Ff=t_;const DD=class DD{constructor(){this.mapWindowIdToZoomFactor=new Map}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}getWindowId(e){return e.vscodeWindowId}};DD.INSTANCE=new DD;let PM=DD;function tq(s,e,t){typeof e=="string"&&(e=s.matchMedia(e)),e.addEventListener("change",t)}function Tie(s){return PM.INSTANCE.getZoomFactor(s)}const Kb=navigator.userAgent,Sr=Kb.indexOf("Firefox")>=0,Wf=Kb.indexOf("AppleWebKit")>=0,_0=Kb.indexOf("Chrome")>=0,md=!_0&&Kb.indexOf("Safari")>=0,nq=!_0&&!md&&Wf;Kb.indexOf("Electron/")>=0;const a8=Kb.indexOf("Android")>=0;let NS=!1;if(typeof Et.matchMedia=="function"){const s=Et.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=Et.matchMedia("(display-mode: fullscreen)");NS=s.matches,tq(Et,s,({matches:t})=>{NS&&e.matches||(NS=t)})}function Eie(){return NS}const H3={clipboard:{writeText:Oa||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Oa||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:Oa||Eie()?0:navigator.keyboard||md?1:2,touch:"ontouchstart"in Et||navigator.maxTouchPoints>0,pointerEvents:Et.PointerEvent&&("ontouchstart"in Et||navigator.maxTouchPoints>0)};function OM(s,e){if(typeof s=="number"){if(s===0)return null;const t=(s&65535)>>>0,n=(s&4294901760)>>>16;return n!==0?new gN([by(t,e),by(n,e)]):new gN([by(t,e)])}else{const t=[];for(let n=0;n<s.length;n++)t.push(by(s[n],e));return new gN(t)}}function by(s,e){const t=!!(s&2048),n=!!(s&256),i=e===2?n:t,o=!!(s&1024),r=!!(s&512),a=e===2?t:n,l=s&255;return new pd(i,o,r,a,l)}class pd{constructor(e,t,n,i,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyCode=o}equals(e){return e instanceof pd&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}class gN{constructor(e){if(e.length===0)throw Cr("chords");this.chords=e}}class Nie{constructor(e,t,n,i,o,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=i,this.keyLabel=o,this.keyAriaLabel=r}}class Rie{}function Mie(s){if(s.charCode){const t=String.fromCharCode(s.charCode).toUpperCase();return Fc.fromString(t)}const e=s.keyCode;if(e===3)return 7;if(Sr)switch(e){case 59:return 85;case 60:if(Ds)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(et)return 57;break}else if(Wf){if(et&&e===93)return 57;if(!et&&e===92)return 57}return Aj[e]||0}const Aie=et?256:2048,Pie=512,Oie=1024,Fie=et?2048:256;class Pt{constructor(e){var n;this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=(n=t.getModifierState)==null?void 0:n.call(t,"AltGraph"),this.keyCode=Mie(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Aie),this.altKey&&(t|=Pie),this.shiftKey&&(t|=Oie),this.metaKey&&(t|=Fie),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new pd(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const l8=new WeakMap;function Wie(s){if(!s.parent||s.parent===s)return null;try{const e=s.location,t=s.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return s.parent}class Bie{static getSameOriginWindowChain(e){let t=l8.get(e);if(!t){t=[],l8.set(e,t);let n=e,i;do i=Wie(n),i?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=i;while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0;const o=this.getSameOriginWindowChain(e);for(const r of o){const a=r.window.deref();if(n+=(a==null?void 0:a.scrollY)??0,i+=(a==null?void 0:a.scrollX)??0,a===t||!r.iframeElement)break;const l=r.iframeElement.getBoundingClientRect();n+=l.top,i+=l.left}return{top:n,left:i}}}class Gr{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const n=Bie.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Yg{constructor(e,t=0,n=0){var o;this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t;let i=!1;if(_0){const r=navigator.userAgent.match(/Chrome\/(\d+)/);i=(r?parseInt(r[1]):123)<=122}if(e){const r=e,a=e,l=((o=e.view)==null?void 0:o.devicePixelRatio)||1;if(typeof r.wheelDeltaY<"u")i?this.deltaY=r.wheelDeltaY/(120*l):this.deltaY=r.wheelDeltaY/120;else if(typeof a.VERTICAL_AXIS<"u"&&a.axis===a.VERTICAL_AXIS)this.deltaY=-a.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?Sr&&!et?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")md&&Bi?this.deltaX=-(r.wheelDeltaX/120):i?this.deltaX=r.wheelDeltaX/(120*l):this.deltaX=r.wheelDeltaX/120;else if(typeof a.HORIZONTAL_AXIS<"u"&&a.axis===a.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const c=e;c.deltaMode===c.DOM_DELTA_LINE?Sr&&!et?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(i?this.deltaY=e.wheelDelta/(120*l):this.deltaY=e.wheelDelta/120)}}preventDefault(){var e;(e=this.browserEvent)==null||e.preventDefault()}stopPropagation(){var e;(e=this.browserEvent)==null||e.stopPropagation()}}const iq=Symbol("MicrotaskDelay");function FM(s){return!!s&&typeof s.then=="function"}function si(s){const e=new an,t=s(e.token),n=new Promise((i,o)=>{const r=e.token.onCancellationRequested(()=>{r.dispose(),o(new ta)});Promise.resolve(t).then(a=>{r.dispose(),e.dispose(),i(a)},a=>{r.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}function b0(s,e,t){return new Promise((n,i)=>{const o=e.onCancellationRequested(()=>{o.dispose(),n(t)});s.then(n,i).finally(()=>o.dispose())})}class Hie{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}dispose(){this.isDisposed=!0}}const Vie=(s,e)=>{let t=!0;const n=setTimeout(()=>{t=!1,e()},s);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},zie=s=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,s())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class kr{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,o)=>{this.doResolve=i,this.doReject=o}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const i=this.task;return this.task=null,i()}}));const n=()=>{var i;this.deferred=null,(i=this.doResolve)==null||i.call(this,null)};return this.deferred=t===iq?zie(n):Vie(t,n),this.completionPromise}isTriggered(){var e;return!!((e=this.deferred)!=null&&e.isTriggered())}cancel(){var e;this.cancelTimeout(),this.completionPromise&&((e=this.doReject)==null||e.call(this,new ta),this.completionPromise=null)}cancelTimeout(){var e;(e=this.deferred)==null||e.dispose(),this.deferred=null}dispose(){this.cancel()}}class sq{constructor(e){this.delayer=new kr(e),this.throttler=new Hie}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}function _d(s,e){return e?new Promise((t,n)=>{const i=setTimeout(()=>{o.dispose(),t()},s),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new ta)})}):si(t=>_d(s,t))}function au(s,e=0,t){const n=setTimeout(()=>{s(),t&&i.dispose()},e),i=ve(()=>{clearTimeout(n),t==null||t.deleteAndLeak(i)});return t==null||t.add(i),i}function V3(s,e=n=>!!n,t=null){let n=0;const i=s.length,o=()=>{if(n>=i)return Promise.resolve(t);const r=s[n++];return Promise.resolve(r()).then(l=>e(l)?Promise.resolve(l):o())};return o()}class la{constructor(e,t){this._isDisposed=!1,this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new _t("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new _t("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}}class z3{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,n=globalThis){if(this.isDisposed)throw new _t("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const i=n.setInterval(()=>{e()},t);this.disposable=ve(()=>{n.clearInterval(i),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class It{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)==null||e.call(this)}}let oq,kC;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?kC=(s,e)=>{kj(()=>{if(t)return;const n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:kC=(s,e,t)=>{const n=s.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let i=!1;return{dispose(){i||(i=!0,s.cancelIdleCallback(n))}}},oq=s=>kC(globalThis,s)})();class rq{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=kC(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class $ie extends rq{constructor(e){super(globalThis,e)}}class Gb{get isRejected(){var e;return((e=this.outcome)==null?void 0:e.outcome)===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new ta)}}var WM;(function(s){async function e(n){let i;const o=await Promise.all(n.map(r=>r.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return o}s.settled=e;function t(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(r){o(r)}})}s.withAsyncBody=t})(WM||(WM={}));const oo=class oo{static fromArray(e){return new oo(t=>{t.emitMany(e)})}static fromPromise(e){return new oo(async t=>{t.emitMany(await e)})}static fromPromises(e){return new oo(async t=>{await Promise.all(e.map(async n=>t.emitOne(await n)))})}static merge(e){return new oo(async t=>{await Promise.all(e.map(async n=>{for await(const i of n)t.emitOne(i)}))})}constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new O,queueMicrotask(async()=>{const n={emitOne:i=>this.emitOne(i),emitMany:i=>this.emitMany(i),reject:i=>this.reject(i)};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await se.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>{var t;return(t=this._onReturn)==null||t.call(this),{done:!0,value:void 0}}}}static map(e,t){return new oo(async n=>{for await(const i of e)n.emitOne(t(i))})}map(e){return oo.map(this,e)}static filter(e,t){return new oo(async n=>{for await(const i of e)t(i)&&n.emitOne(i)})}filter(e){return oo.filter(this,e)}static coalesce(e){return oo.filter(e,t=>!!t)}coalesce(){return oo.coalesce(this)}static async toPromise(e){const t=[];for await(const n of e)t.push(n);return t}toPromise(){return oo.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};oo.EMPTY=oo.fromArray([]);let Uo=oo;class Uie extends Uo{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function jie(s){const e=new an,t=s(e.token);return new Uie(e,async n=>{const i=e.token.onCancellationRequested(()=>{i.dispose(),e.dispose(),n.reject(new ta)});try{for await(const o of t){if(e.token.isCancellationRequested)return;n.emitOne(o)}i.dispose(),e.dispose()}catch(o){i.dispose(),e.dispose(),n.reject(o)}})}/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:aq,setPrototypeOf:c8,isFrozen:qie,getPrototypeOf:Kie,getOwnPropertyDescriptor:Gie}=Object;let{freeze:yo,seal:qa,create:Zie}=Object,{apply:BM,construct:HM}=typeof Reflect<"u"&&Reflect;BM||(BM=function(e,t,n){return e.apply(t,n)});yo||(yo=function(e){return e});qa||(qa=function(e){return e});HM||(HM=function(e,t){return new e(...t)});const Yie=na(Array.prototype.forEach),d8=na(Array.prototype.pop),Lv=na(Array.prototype.push),RS=na(String.prototype.toLowerCase),mN=na(String.prototype.toString),Xie=na(String.prototype.match),ua=na(String.prototype.replace),Qie=na(String.prototype.indexOf),Jie=na(String.prototype.trim),lr=na(RegExp.prototype.test),xv=ese(TypeError);function na(s){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return BM(s,e,n)}}function ese(s){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return HM(s,t)}}function Tt(s,e,t){var n;t=(n=t)!==null&&n!==void 0?n:RS,c8&&c8(s,null);let i=e.length;for(;i--;){let o=e[i];if(typeof o=="string"){const r=t(o);r!==o&&(qie(e)||(e[i]=r),o=r)}s[o]=!0}return s}function Xm(s){const e=Zie(null);for(const[t,n]of aq(s))e[t]=n;return e}function vy(s,e){for(;s!==null;){const n=Gie(s,e);if(n){if(n.get)return na(n.get);if(typeof n.value=="function")return na(n.value)}s=Kie(s)}function t(n){return console.warn("fallback value for",n),null}return t}const h8=yo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),pN=yo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),_N=yo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),tse=yo(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),bN=yo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),nse=yo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),u8=yo(["#text"]),f8=yo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),vN=yo(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),g8=yo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Cy=yo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ise=qa(/\{\{[\w\W]*|[\w\W]*\}\}/gm),sse=qa(/<%[\w\W]*|[\w\W]*%>/gm),ose=qa(/\${[\w\W]*}/gm),rse=qa(/^data-[\-\w.\u00B7-\uFFFF]/),ase=qa(/^aria-[\-\w]+$/),lq=qa(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),lse=qa(/^(?:\w+script|data):/i),cse=qa(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),cq=qa(/^html$/i);var m8=Object.freeze({__proto__:null,MUSTACHE_EXPR:ise,ERB_EXPR:sse,TMPLIT_EXPR:ose,DATA_ATTR:rse,ARIA_ATTR:ase,IS_ALLOWED_URI:lq,IS_SCRIPT_OR_DATA:lse,ATTR_WHITESPACE:cse,DOCTYPE_NAME:cq});const dse=()=>typeof window>"u"?null:window,hse=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));const o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function dq(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dse();const e=He=>dq(He);if(e.version="3.0.5",e.removed=[],!s||!s.document||s.document.nodeType!==9)return e.isSupported=!1,e;const t=s.document,n=t.currentScript;let{document:i}=s;const{DocumentFragment:o,HTMLTemplateElement:r,Node:a,Element:l,NodeFilter:c,NamedNodeMap:d=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:h,DOMParser:u,trustedTypes:f}=s,g=l.prototype,p=vy(g,"cloneNode"),_=vy(g,"nextSibling"),b=vy(g,"childNodes"),v=vy(g,"parentNode");if(typeof r=="function"){const He=i.createElement("template");He.content&&He.content.ownerDocument&&(i=He.content.ownerDocument)}let C,w="";const{implementation:y,createNodeIterator:k,createDocumentFragment:x,getElementsByTagName:D}=i,{importNode:N}=t;let W={};e.isSupported=typeof aq=="function"&&typeof v=="function"&&y&&y.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:B,ERB_EXPR:z,TMPLIT_EXPR:U,DATA_ATTR:H,ARIA_ATTR:X,IS_SCRIPT_OR_DATA:re,ATTR_WHITESPACE:fe}=m8;let{IS_ALLOWED_URI:pe}=m8,ce=null;const Oe=Tt({},[...h8,...pN,..._N,...bN,...u8]);let Fe=null;const un=Tt({},[...f8,...vN,...g8,...Cy]);let Be=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),yt=null,$n=null,qn=!0,us=!0,Fs=!1,ha=!0,Qi=!1,Mr=!1,bi=!1,Ar=!1,Fd=!1,Um=!1,jm=!1,ny=!0,iy=!1;const QE="user-content-";let Wd=!0,Pu=!1,cc={},dc=null;const sy=Tt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qm=null;const oy=Tt({},["audio","video","img","source","image","track"]);let Ou=null;const ry=Tt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),hc="http://www.w3.org/1998/Math/MathML",sl="http://www.w3.org/2000/svg",vi="http://www.w3.org/1999/xhtml";let Pr=vi,Bd=!1,no=null;const Hd=Tt({},[hc,sl,vi],mN);let ol;const uc=["application/xhtml+xml","text/html"],nn="text/html";let Ti,Vd=null;const JE=i.createElement("form"),ay=function(G){return G instanceof RegExp||G instanceof Function},yv=function(G){if(!(Vd&&Vd===G)){if((!G||typeof G!="object")&&(G={}),G=Xm(G),ol=uc.indexOf(G.PARSER_MEDIA_TYPE)===-1?ol=nn:ol=G.PARSER_MEDIA_TYPE,Ti=ol==="application/xhtml+xml"?mN:RS,ce="ALLOWED_TAGS"in G?Tt({},G.ALLOWED_TAGS,Ti):Oe,Fe="ALLOWED_ATTR"in G?Tt({},G.ALLOWED_ATTR,Ti):un,no="ALLOWED_NAMESPACES"in G?Tt({},G.ALLOWED_NAMESPACES,mN):Hd,Ou="ADD_URI_SAFE_ATTR"in G?Tt(Xm(ry),G.ADD_URI_SAFE_ATTR,Ti):ry,qm="ADD_DATA_URI_TAGS"in G?Tt(Xm(oy),G.ADD_DATA_URI_TAGS,Ti):oy,dc="FORBID_CONTENTS"in G?Tt({},G.FORBID_CONTENTS,Ti):sy,yt="FORBID_TAGS"in G?Tt({},G.FORBID_TAGS,Ti):{},$n="FORBID_ATTR"in G?Tt({},G.FORBID_ATTR,Ti):{},cc="USE_PROFILES"in G?G.USE_PROFILES:!1,qn=G.ALLOW_ARIA_ATTR!==!1,us=G.ALLOW_DATA_ATTR!==!1,Fs=G.ALLOW_UNKNOWN_PROTOCOLS||!1,ha=G.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Qi=G.SAFE_FOR_TEMPLATES||!1,Mr=G.WHOLE_DOCUMENT||!1,Fd=G.RETURN_DOM||!1,Um=G.RETURN_DOM_FRAGMENT||!1,jm=G.RETURN_TRUSTED_TYPE||!1,Ar=G.FORCE_BODY||!1,ny=G.SANITIZE_DOM!==!1,iy=G.SANITIZE_NAMED_PROPS||!1,Wd=G.KEEP_CONTENT!==!1,Pu=G.IN_PLACE||!1,pe=G.ALLOWED_URI_REGEXP||lq,Pr=G.NAMESPACE||vi,Be=G.CUSTOM_ELEMENT_HANDLING||{},G.CUSTOM_ELEMENT_HANDLING&&ay(G.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Be.tagNameCheck=G.CUSTOM_ELEMENT_HANDLING.tagNameCheck),G.CUSTOM_ELEMENT_HANDLING&&ay(G.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Be.attributeNameCheck=G.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),G.CUSTOM_ELEMENT_HANDLING&&typeof G.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Be.allowCustomizedBuiltInElements=G.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qi&&(us=!1),Um&&(Fd=!0),cc&&(ce=Tt({},[...u8]),Fe=[],cc.html===!0&&(Tt(ce,h8),Tt(Fe,f8)),cc.svg===!0&&(Tt(ce,pN),Tt(Fe,vN),Tt(Fe,Cy)),cc.svgFilters===!0&&(Tt(ce,_N),Tt(Fe,vN),Tt(Fe,Cy)),cc.mathMl===!0&&(Tt(ce,bN),Tt(Fe,g8),Tt(Fe,Cy))),G.ADD_TAGS&&(ce===Oe&&(ce=Xm(ce)),Tt(ce,G.ADD_TAGS,Ti)),G.ADD_ATTR&&(Fe===un&&(Fe=Xm(Fe)),Tt(Fe,G.ADD_ATTR,Ti)),G.ADD_URI_SAFE_ATTR&&Tt(Ou,G.ADD_URI_SAFE_ATTR,Ti),G.FORBID_CONTENTS&&(dc===sy&&(dc=Xm(dc)),Tt(dc,G.FORBID_CONTENTS,Ti)),Wd&&(ce["#text"]=!0),Mr&&Tt(ce,["html","head","body"]),ce.table&&(Tt(ce,["tbody"]),delete yt.tbody),G.TRUSTED_TYPES_POLICY){if(typeof G.TRUSTED_TYPES_POLICY.createHTML!="function")throw xv('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof G.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw xv('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');C=G.TRUSTED_TYPES_POLICY,w=C.createHTML("")}else C===void 0&&(C=hse(f,n)),C!==null&&typeof w=="string"&&(w=C.createHTML(""));yo&&yo(G),Vd=G}},ly=Tt({},["mi","mo","mn","ms","mtext"]),cy=Tt({},["foreignobject","desc","title","annotation-xml"]),eN=Tt({},["title","style","font","a","script"]),at=Tt({},pN);Tt(at,_N),Tt(at,tse);const R=Tt({},bN);Tt(R,nse);const M=function(G){let we=v(G);(!we||!we.tagName)&&(we={namespaceURI:Pr,tagName:"template"});const Me=RS(G.tagName),dn=RS(we.tagName);return no[G.namespaceURI]?G.namespaceURI===sl?we.namespaceURI===vi?Me==="svg":we.namespaceURI===hc?Me==="svg"&&(dn==="annotation-xml"||ly[dn]):!!at[Me]:G.namespaceURI===hc?we.namespaceURI===vi?Me==="math":we.namespaceURI===sl?Me==="math"&&cy[dn]:!!R[Me]:G.namespaceURI===vi?we.namespaceURI===sl&&!cy[dn]||we.namespaceURI===hc&&!ly[dn]?!1:!R[Me]&&(eN[Me]||!at[Me]):!!(ol==="application/xhtml+xml"&&no[G.namespaceURI]):!1},P=function(G){Lv(e.removed,{element:G});try{G.parentNode.removeChild(G)}catch{G.remove()}},V=function(G,we){try{Lv(e.removed,{attribute:we.getAttributeNode(G),from:we})}catch{Lv(e.removed,{attribute:null,from:we})}if(we.removeAttribute(G),G==="is"&&!Fe[G])if(Fd||Um)try{P(we)}catch{}else try{we.setAttribute(G,"")}catch{}},j=function(G){let we,Me;if(Ar)G="<remove></remove>"+G;else{const Ws=Xie(G,/^[\r\n\t ]+/);Me=Ws&&Ws[0]}ol==="application/xhtml+xml"&&Pr===vi&&(G='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+G+"</body></html>");const dn=C?C.createHTML(G):G;if(Pr===vi)try{we=new u().parseFromString(dn,ol)}catch{}if(!we||!we.documentElement){we=y.createDocument(Pr,"template",null);try{we.documentElement.innerHTML=Bd?w:dn}catch{}}const Ci=we.body||we.documentElement;return G&&Me&&Ci.insertBefore(i.createTextNode(Me),Ci.childNodes[0]||null),Pr===vi?D.call(we,Mr?"html":"body")[0]:Mr?we.documentElement:Ci},ne=function(G){return k.call(G.ownerDocument||G,G,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},ae=function(G){return G instanceof h&&(typeof G.nodeName!="string"||typeof G.textContent!="string"||typeof G.removeChild!="function"||!(G.attributes instanceof d)||typeof G.removeAttribute!="function"||typeof G.setAttribute!="function"||typeof G.namespaceURI!="string"||typeof G.insertBefore!="function"||typeof G.hasChildNodes!="function")},ke=function(G){return typeof a=="object"?G instanceof a:G&&typeof G=="object"&&typeof G.nodeType=="number"&&typeof G.nodeName=="string"},Te=function(G,we,Me){W[G]&&Yie(W[G],dn=>{dn.call(e,we,Me,Vd)})},lt=function(G){let we;if(Te("beforeSanitizeElements",G,null),ae(G))return P(G),!0;const Me=Ti(G.nodeName);if(Te("uponSanitizeElement",G,{tagName:Me,allowedTags:ce}),G.hasChildNodes()&&!ke(G.firstElementChild)&&(!ke(G.content)||!ke(G.content.firstElementChild))&&lr(/<[/\w]/g,G.innerHTML)&&lr(/<[/\w]/g,G.textContent))return P(G),!0;if(!ce[Me]||yt[Me]){if(!yt[Me]&&vn(Me)&&(Be.tagNameCheck instanceof RegExp&&lr(Be.tagNameCheck,Me)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(Me)))return!1;if(Wd&&!dc[Me]){const dn=v(G)||G.parentNode,Ci=b(G)||G.childNodes;if(Ci&&dn){const Ws=Ci.length;for(let Xn=Ws-1;Xn>=0;--Xn)dn.insertBefore(p(Ci[Xn],!0),_(G))}}return P(G),!0}return G instanceof l&&!M(G)||(Me==="noscript"||Me==="noembed"||Me==="noframes")&&lr(/<\/no(script|embed|frames)/i,G.innerHTML)?(P(G),!0):(Qi&&G.nodeType===3&&(we=G.textContent,we=ua(we,B," "),we=ua(we,z," "),we=ua(we,U," "),G.textContent!==we&&(Lv(e.removed,{element:G.cloneNode()}),G.textContent=we)),Te("afterSanitizeElements",G,null),!1)},Nt=function(G,we,Me){if(ny&&(we==="id"||we==="name")&&(Me in i||Me in JE))return!1;if(!(us&&!$n[we]&&lr(H,we))){if(!(qn&&lr(X,we))){if(!Fe[we]||$n[we]){if(!(vn(G)&&(Be.tagNameCheck instanceof RegExp&&lr(Be.tagNameCheck,G)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(G))&&(Be.attributeNameCheck instanceof RegExp&&lr(Be.attributeNameCheck,we)||Be.attributeNameCheck instanceof Function&&Be.attributeNameCheck(we))||we==="is"&&Be.allowCustomizedBuiltInElements&&(Be.tagNameCheck instanceof RegExp&&lr(Be.tagNameCheck,Me)||Be.tagNameCheck instanceof Function&&Be.tagNameCheck(Me))))return!1}else if(!Ou[we]){if(!lr(pe,ua(Me,fe,""))){if(!((we==="src"||we==="xlink:href"||we==="href")&&G!=="script"&&Qie(Me,"data:")===0&&qm[G])){if(!(Fs&&!lr(re,ua(Me,fe,"")))){if(Me)return!1}}}}}}return!0},vn=function(G){return G.indexOf("-")>0},Ln=function(G){let we,Me,dn,Ci;Te("beforeSanitizeAttributes",G,null);const{attributes:Ws}=G;if(!Ws)return;const Xn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Fe};for(Ci=Ws.length;Ci--;){we=Ws[Ci];const{name:rl,namespaceURI:tN}=we;if(Me=rl==="value"?we.value:Jie(we.value),dn=Ti(rl),Xn.attrName=dn,Xn.attrValue=Me,Xn.keepAttr=!0,Xn.forceKeepAttr=void 0,Te("uponSanitizeAttribute",G,Xn),Me=Xn.attrValue,Xn.forceKeepAttr||(V(rl,G),!Xn.keepAttr))continue;if(!ha&&lr(/\/>/i,Me)){V(rl,G);continue}Qi&&(Me=ua(Me,B," "),Me=ua(Me,z," "),Me=ua(Me,U," "));const m7=Ti(G.nodeName);if(Nt(m7,dn,Me)){if(iy&&(dn==="id"||dn==="name")&&(V(rl,G),Me=QE+Me),C&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!tN)switch(f.getAttributeType(m7,dn)){case"TrustedHTML":{Me=C.createHTML(Me);break}case"TrustedScriptURL":{Me=C.createScriptURL(Me);break}}try{tN?G.setAttributeNS(tN,rl,Me):G.setAttribute(rl,Me),d8(e.removed)}catch{}}}Te("afterSanitizeAttributes",G,null)},Rn=function He(G){let we;const Me=ne(G);for(Te("beforeSanitizeShadowDOM",G,null);we=Me.nextNode();)Te("uponSanitizeShadowNode",we,null),!lt(we)&&(we.content instanceof o&&He(we.content),Ln(we));Te("afterSanitizeShadowDOM",G,null)};return e.sanitize=function(He){let G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we,Me,dn,Ci;if(Bd=!He,Bd&&(He="<!-->"),typeof He!="string"&&!ke(He))if(typeof He.toString=="function"){if(He=He.toString(),typeof He!="string")throw xv("dirty is not a string, aborting")}else throw xv("toString is not a function");if(!e.isSupported)return He;if(bi||yv(G),e.removed=[],typeof He=="string"&&(Pu=!1),Pu){if(He.nodeName){const rl=Ti(He.nodeName);if(!ce[rl]||yt[rl])throw xv("root node is forbidden and cannot be sanitized in-place")}}else if(He instanceof a)we=j("<!---->"),Me=we.ownerDocument.importNode(He,!0),Me.nodeType===1&&Me.nodeName==="BODY"||Me.nodeName==="HTML"?we=Me:we.appendChild(Me);else{if(!Fd&&!Qi&&!Mr&&He.indexOf("<")===-1)return C&&jm?C.createHTML(He):He;if(we=j(He),!we)return Fd?null:jm?w:""}we&&Ar&&P(we.firstChild);const Ws=ne(Pu?He:we);for(;dn=Ws.nextNode();)lt(dn)||(dn.content instanceof o&&Rn(dn.content),Ln(dn));if(Pu)return He;if(Fd){if(Um)for(Ci=x.call(we.ownerDocument);we.firstChild;)Ci.appendChild(we.firstChild);else Ci=we;return(Fe.shadowroot||Fe.shadowrootmode)&&(Ci=N.call(t,Ci,!0)),Ci}let Xn=Mr?we.outerHTML:we.innerHTML;return Mr&&ce["!doctype"]&&we.ownerDocument&&we.ownerDocument.doctype&&we.ownerDocument.doctype.name&&lr(cq,we.ownerDocument.doctype.name)&&(Xn="<!DOCTYPE "+we.ownerDocument.doctype.name+`>
`+Xn),Qi&&(Xn=ua(Xn,B," "),Xn=ua(Xn,z," "),Xn=ua(Xn,U," ")),C&&jm?C.createHTML(Xn):Xn},e.setConfig=function(He){yv(He),bi=!0},e.clearConfig=function(){Vd=null,bi=!1},e.isValidAttribute=function(He,G,we){Vd||yv({});const Me=Ti(He),dn=Ti(G);return Nt(Me,dn,we)},e.addHook=function(He,G){typeof G=="function"&&(W[He]=W[He]||[],Lv(W[He],G))},e.removeHook=function(He){if(W[He])return d8(W[He])},e.removeHooks=function(He){W[He]&&(W[He]=[])},e.removeAllHooks=function(){W={}},e}var nc=dq();nc.version;nc.isSupported;const hq=nc.sanitize;nc.setConfig;nc.clearConfig;nc.isValidAttribute;const uq=nc.addHook,fq=nc.removeHook;nc.removeHooks;nc.removeAllHooks;var We;(function(s){s.inMemory="inmemory",s.vscode="vscode",s.internal="private",s.walkThrough="walkThrough",s.walkThroughSnippet="walkThroughSnippet",s.http="http",s.https="https",s.file="file",s.mailto="mailto",s.untitled="untitled",s.data="data",s.command="command",s.vscodeRemote="vscode-remote",s.vscodeRemoteResource="vscode-remote-resource",s.vscodeManagedRemoteResource="vscode-managed-remote-resource",s.vscodeUserData="vscode-userdata",s.vscodeCustomEditor="vscode-custom-editor",s.vscodeNotebookCell="vscode-notebook-cell",s.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",s.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",s.vscodeNotebookCellOutput="vscode-notebook-cell-output",s.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",s.vscodeNotebookMetadata="vscode-notebook-metadata",s.vscodeInteractiveInput="vscode-interactive-input",s.vscodeSettings="vscode-settings",s.vscodeWorkspaceTrust="vscode-workspace-trust",s.vscodeTerminal="vscode-terminal",s.vscodeChatCodeBlock="vscode-chat-code-block",s.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",s.vscodeChatSesssion="vscode-chat-editor",s.webviewPanel="webview-panel",s.vscodeWebview="vscode-webview",s.extension="extension",s.vscodeFileResource="vscode-file",s.tmp="tmp",s.vsls="vsls",s.vscodeSourceControl="vscode-scm",s.commentsInput="comment",s.codeSetting="code-setting",s.outputChannel="output"})(We||(We={}));function gT(s,e){return Se.isUri(s)?Ep(s.scheme,e):A3(s,e+":")}function VM(s,...e){return e.some(t=>gT(s,t))}const use="tkn";class fse{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}get _remoteResourcesPath(){return Fn.join(this._serverRootPath,We.vscodeRemoteResource)}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Pe(a),e}const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);const i=this._ports[t],o=this._connectionTokens[t];let r=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(r+=`&${use}=${encodeURIComponent(o)}`),Se.from({scheme:Lm?this._preferredWebSchema:We.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:r})}}const gq=new fse,gse="vscode-app",cw=class cw{asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===We.vscodeRemote?gq.rewrite(e):e.scheme===We.file&&(Oa||Cte===`${We.vscodeFileResource}://${cw.FALLBACK_AUTHORITY}`)?e.with({scheme:We.vscodeFileResource,authority:e.authority||cw.FALLBACK_AUTHORITY,query:null,fragment:null}):e}toUri(e,t){if(Se.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const n=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(n))return Se.joinPath(Se.parse(n,!0),e);const i=Une(n,e);return Se.file(i)}return Se.parse(t.toUrl(e))}};cw.FALLBACK_AUTHORITY=gse;let zM=cw;const mT=new zM;var $M;(function(s){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);s.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function n(o){let r;typeof o=="string"?r=new URL(o).searchParams:o instanceof URL?r=o.searchParams:Se.isUri(o)&&(r=new URL(o.toString(!0)).searchParams);const a=r==null?void 0:r.get(t);if(a)return e.get(a)}s.getHeadersFromQuery=n;function i(o,r,a){if(!globalThis.crossOriginIsolated)return;const l=r&&a?"3":a?"2":"1";o instanceof URLSearchParams?o.set(t,l):o[t]=l}s.addSearchParam=i})($M||($M={}));function pT(s){return _T(s,0)}function _T(s,e){switch(typeof s){case"object":return s===null?$c(349,e):Array.isArray(s)?pse(s,e):_se(s,e);case"string":return $3(s,e);case"boolean":return mse(s,e);case"number":return $c(s,e);case"undefined":return $c(937,e);default:return $c(617,e)}}function $c(s,e){return(e<<5)-e+s|0}function mse(s,e){return $c(s?433:863,e)}function $3(s,e){e=$c(149417,e);for(let t=0,n=s.length;t<n;t++)e=$c(s.charCodeAt(t),e);return e}function pse(s,e){return e=$c(104579,e),s.reduce((t,n)=>_T(n,t),e)}function _se(s,e){return e=$c(181387,e),Object.keys(s).sort().reduce((t,n)=>(t=$3(n,t),_T(s[n],t)),e)}function CN(s,e,t=32){const n=t-e,i=~((1<<n)-1);return(s<<e|(i&s)>>>n)>>>0}function p8(s,e=0,t=s.byteLength,n=0){for(let i=0;i<t;i++)s[e+i]=n}function bse(s,e,t="0"){for(;s.length<e;)s=t+s;return s}function Dv(s,e=32){return s instanceof ArrayBuffer?Array.from(new Uint8Array(s)).map(t=>t.toString(16).padStart(2,"0")).join(""):bse((s>>>0).toString(16),e/4)}const ID=class ID{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let i=this._buffLen,o=this._leftoverHighSurrogate,r,a;for(o!==0?(r=o,a=-1,o=0):(r=e.charCodeAt(0),a=0);;){let l=r;if(ni(r))if(a+1<t){const c=e.charCodeAt(a+1);Zg(c)?(a++,l=P3(r,c)):l=65533}else{o=r;break}else Zg(r)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)r=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=o}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Dv(this._h0)+Dv(this._h1)+Dv(this._h2)+Dv(this._h3)+Dv(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,p8(this._buff,this._buffLen),this._buffLen>56&&(this._step(),p8(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=ID._bigBlock32,t=this._buffDV;for(let h=0;h<64;h+=4)e.setUint32(h,t.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)e.setUint32(h,CN(e.getUint32(h-12,!1)^e.getUint32(h-32,!1)^e.getUint32(h-56,!1)^e.getUint32(h-64,!1),1),!1);let n=this._h0,i=this._h1,o=this._h2,r=this._h3,a=this._h4,l,c,d;for(let h=0;h<80;h++)h<20?(l=i&o|~i&r,c=1518500249):h<40?(l=i^o^r,c=1859775393):h<60?(l=i&o|i&r|o&r,c=2400959708):(l=i^o^r,c=3395469782),d=CN(n,5)+l+a+c+e.getUint32(h*4,!1)&4294967295,a=r,r=o,o=CN(i,30),i=n,n=d;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+r&4294967295,this._h4=this._h4+a&4294967295}};ID._bigBlock32=new DataView(new ArrayBuffer(320));let UM=ID;const{registerWindow:ZPe,getWindow:Le,getDocument:YPe,getWindows:mq,getWindowsCount:vse,getWindowId:Wk,getWindowById:_8,hasWindow:XPe,onDidRegisterWindow:bT,onWillUnregisterWindow:Cse,onDidUnregisterWindow:wse}=function(){const s=new Map;die(Et,1);const e={window:Et,disposables:new q};s.set(Et.vscodeWindowId,e);const t=new O,n=new O,i=new O;function o(r,a){return(typeof r=="number"?s.get(r):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:i.event,onDidUnregisterWindow:n.event,registerWindow(r){if(s.has(r.vscodeWindowId))return F.None;const a=new q,l={window:r,disposables:a.add(new q)};return s.set(r.vscodeWindowId,l),a.add(ve(()=>{s.delete(r.vscodeWindowId),n.fire(r)})),a.add($(r,ee.BEFORE_UNLOAD,()=>{i.fire(r)})),t.fire(l),a},getWindows(){return s.values()},getWindowsCount(){return s.size},getWindowId(r){return r.vscodeWindowId},hasWindow(r){return s.has(r)},getWindowById:o,getWindow(r){var c;const a=r;if((c=a==null?void 0:a.ownerDocument)!=null&&c.defaultView)return a.ownerDocument.defaultView.window;const l=r;return l!=null&&l.view?l.view.window:Et},getDocument(r){return Le(r).document}}}();function xi(s){for(;s.firstChild;)s.firstChild.remove()}class yse{constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function $(s,e,t,n){return new yse(s,e,t,n)}function pq(s,e){return function(t){return e(new Gr(s,t))}}function Sse(s){return function(e){return s(new Pt(e))}}const hn=function(e,t,n,i){let o=n;return t==="click"||t==="mousedown"||t==="contextmenu"?o=pq(Le(e),n):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=Sse(n)),$(e,t,o,i)},kse=function(e,t,n){const i=pq(Le(e),t);return Lse(e,i,n)};function Lse(s,e,t){return $(s,Ua&&H3.pointerEvents?ee.POINTER_DOWN:ee.MOUSE_DOWN,e,t)}function Qv(s,e,t){return kC(s,e,t)}class wN extends rq{constructor(e,t){super(e,t)}}let Bk,So;class U3 extends z3{constructor(e){super(),this.defaultTarget=e&&Le(e)}cancelAndSet(e,t,n){return super.cancelAndSet(e,t,n??this.defaultTarget)}}class yN{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Pe(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const s=new Map,e=new Map,t=new Map,n=new Map,i=o=>{t.set(o,!1);const r=s.get(o)??[];for(e.set(o,r),s.set(o,[]),n.set(o,!0);r.length>0;)r.sort(yN.sort),r.shift().execute();n.set(o,!1)};So=(o,r,a=0)=>{const l=Wk(o),c=new yN(r,a);let d=s.get(l);return d||(d=[],s.set(l,d)),d.push(c),t.get(l)||(t.set(l,!0),o.requestAnimationFrame(()=>i(l))),c},Bk=(o,r,a)=>{const l=Wk(o);if(n.get(l)){const c=new yN(r,a);let d=e.get(l);return d||(d=[],e.set(l,d)),d.push(c),c}else return So(o,r,a)}})();function vT(s){return Le(s).getComputedStyle(s,null)}function lu(s,e){const t=Le(s),n=t.document;if(s!==n.body)return new Lt(s.clientWidth,s.clientHeight);if(Ua&&(t!=null&&t.visualViewport))return new Lt(t.visualViewport.width,t.visualViewport.height);if(t!=null&&t.innerWidth&&t.innerHeight)return new Lt(t.innerWidth,t.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new Lt(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new Lt(n.documentElement.clientWidth,n.documentElement.clientHeight);throw new Error("Unable to figure out browser width and height")}class In{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){const i=vT(e),o=i?i.getPropertyValue(t):"0";return In.convertToPixels(e,o)}static getBorderLeftWidth(e){return In.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return In.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return In.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return In.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return In.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return In.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return In.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return In.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return In.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return In.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return In.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return In.getDimension(e,"margin-bottom","marginBottom")}}const yf=class yf{constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new yf(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof yf?e:new yf(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};yf.None=new yf(0,0);let Lt=yf;function _q(s){let e=s.offsetParent,t=s.offsetTop,n=s.offsetLeft;for(;(s=s.parentNode)!==null&&s!==s.ownerDocument.body&&s!==s.ownerDocument.documentElement;){t-=s.scrollTop;const i=vq(s)?null:vT(s);i&&(n-=i.direction!=="rtl"?s.scrollLeft:-s.scrollLeft),s===e&&(n+=In.getBorderLeftWidth(s),t+=In.getBorderTopWidth(s),t+=s.offsetTop,n+=s.offsetLeft,e=s.offsetParent)}return{left:n,top:t}}function xse(s,e,t){typeof e=="number"&&(s.style.width=`${e}px`),typeof t=="number"&&(s.style.height=`${t}px`)}function Sn(s){const e=s.getBoundingClientRect(),t=Le(s);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function bq(s){let e=s,t=1;do{const n=vT(e).zoom;n!=null&&n!=="1"&&(t*=n),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function ao(s){const e=In.getMarginLeft(s)+In.getMarginRight(s);return s.offsetWidth+e}function SN(s){const e=In.getBorderLeftWidth(s)+In.getBorderRightWidth(s),t=In.getPaddingLeft(s)+In.getPaddingRight(s);return s.offsetWidth-e-t}function Dse(s){const e=In.getBorderTopWidth(s)+In.getBorderBottomWidth(s),t=In.getPaddingTop(s)+In.getPaddingBottom(s);return s.offsetHeight-e-t}function Uc(s){const e=In.getMarginTop(s)+In.getMarginBottom(s);return s.offsetHeight+e}function ii(s,e){return!!(e!=null&&e.contains(s))}function Ise(s,e,t){for(;s&&s.nodeType===s.ELEMENT_NODE;){if(s.classList.contains(e))return s;if(t){if(typeof t=="string"){if(s.classList.contains(t))return null}else if(s===t)return null}s=s.parentNode}return null}function kN(s,e,t){return!!Ise(s,e,t)}function vq(s){return s&&!!s.host&&!!s.mode}function Hk(s){return!!Xg(s)}function Xg(s){var e;for(;s.parentNode;){if(s===((e=s.ownerDocument)==null?void 0:e.body))return null;s=s.parentNode}return vq(s)?s:null}function Fi(){let s=Zb().activeElement;for(;s!=null&&s.shadowRoot;)s=s.shadowRoot.activeElement;return s}function CT(s){return Fi()===s}function Cq(s){return ii(Fi(),s)}function Zb(){return vse()<=1?Et.document:Array.from(mq()).map(({window:e})=>e.document).find(e=>e.hasFocus())??Et.document}function Jv(){var e;return((e=Zb().defaultView)==null?void 0:e.window)??Et}const j3=new Map;function wq(){return new Tse}class Tse{constructor(){this._currentCssStyle="",this._styleSheet=void 0}setStyle(e){e!==this._currentCssStyle&&(this._currentCssStyle=e,this._styleSheet?this._styleSheet.innerText=e:this._styleSheet=Qo(Et.document.head,t=>t.innerText=e))}dispose(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}}function Qo(s=Et.document.head,e,t){const n=document.createElement("style");if(n.type="text/css",n.media="screen",e==null||e(n),s.appendChild(n),t&&t.add(ve(()=>n.remove())),s===Et.document.head){const i=new Set;j3.set(n,i);for(const{window:o,disposables:r}of mq()){if(o===Et)continue;const a=r.add(Ese(n,i,o));t==null||t.add(a)}}return n}function Ese(s,e,t){var o,r;const n=new q,i=s.cloneNode(!0);t.document.head.appendChild(i),n.add(ve(()=>i.remove()));for(const a of Sq(s))(r=i.sheet)==null||r.insertRule(a.cssText,(o=i.sheet)==null?void 0:o.cssRules.length);return n.add(Nse.observe(s,n,{childList:!0})(()=>{i.textContent=s.textContent})),e.add(i),n.add(ve(()=>e.delete(i))),n}const Nse=new class{constructor(){this.mutationObservers=new Map}observe(s,e,t){let n=this.mutationObservers.get(s);n||(n=new Map,this.mutationObservers.set(s,n));const i=pT(t);let o=n.get(i);if(o)o.users+=1;else{const r=new O,a=new MutationObserver(c=>r.fire(c));a.observe(s,t);const l=o={users:1,observer:a,onDidMutate:r.event};e.add(ve(()=>{l.users-=1,l.users===0&&(r.dispose(),a.disconnect(),n==null||n.delete(i),(n==null?void 0:n.size)===0&&this.mutationObservers.delete(s))})),n.set(i,o)}return o.onDidMutate}};let LN=null;function yq(){return LN||(LN=Qo()),LN}function Sq(s){var e,t;return(e=s==null?void 0:s.sheet)!=null&&e.rules?s.sheet.rules:(t=s==null?void 0:s.sheet)!=null&&t.cssRules?s.sheet.cssRules:[]}function Vk(s,e,t=yq()){var n;if(!(!t||!e)){(n=t.sheet)==null||n.insertRule(`${s} {${e}}`,0);for(const i of j3.get(t)??[])Vk(s,e,i)}}function jM(s,e=yq()){var i;if(!e)return;const t=Sq(e),n=[];for(let o=0;o<t.length;o++){const r=t[o];Rse(r)&&r.selectorText.indexOf(s)!==-1&&n.push(o)}for(let o=n.length-1;o>=0;o--)(i=e.sheet)==null||i.deleteRule(n[o]);for(const o of j3.get(e)??[])jM(s,o)}function Rse(s){return typeof s.selectorText=="string"}function oi(s){return s instanceof HTMLElement||s instanceof Le(s).HTMLElement}function b8(s){return s instanceof HTMLAnchorElement||s instanceof Le(s).HTMLAnchorElement}function Mse(s){return s instanceof SVGElement||s instanceof Le(s).SVGElement}function q3(s){return s instanceof MouseEvent||s instanceof Le(s).MouseEvent}function Mc(s){return s instanceof KeyboardEvent||s instanceof Le(s).KeyboardEvent}const ee={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Wf?"webkitAnimationStart":"animationstart",ANIMATION_END:Wf?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Wf?"webkitAnimationIteration":"animationiteration"};function Ase(s){const e=s;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const it={stop:(s,e)=>(s.preventDefault(),e&&s.stopPropagation(),s)};function Pse(s){const e=[];for(let t=0;s&&s.nodeType===s.ELEMENT_NODE;t++)e[t]=s.scrollTop,s=s.parentNode;return e}function Ose(s,e){for(let t=0;s&&s.nodeType===s.ELEMENT_NODE;t++)s.scrollTop!==e[t]&&(s.scrollTop=e[t]),s=s.parentNode}class zk extends F{static hasFocusWithin(e){if(oi(e)){const t=Xg(e),n=t?t.activeElement:e.ownerDocument.activeElement;return ii(n,e)}else{const t=e;return ii(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new O),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new O),this.onDidBlur=this._onDidBlur.event;let t=zk.hasFocusWithin(e),n=!1;const i=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},o=()=>{t&&(n=!0,(oi(e)?Le(e):e).setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{zk.hasFocusWithin(e)!==t&&(t?o():i())},this._register($(e,ee.FOCUS,i,!0)),this._register($(e,ee.BLUR,o,!0)),oi(e)&&(this._register($(e,ee.FOCUS_IN,()=>this._refreshStateHandler())),this._register($(e,ee.FOCUS_OUT,()=>this._refreshStateHandler())))}}function Ka(s){return new zk(s)}function Fse(s,e){return s.after(e),e}function Y(s,...e){if(s.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function K3(s,e){return s.insertBefore(e,s.firstChild),e}function Di(s,...e){s.innerText="",Y(s,...e)}const Wse=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Hw;(function(s){s.HTML="http://www.w3.org/1999/xhtml",s.SVG="http://www.w3.org/2000/svg"})(Hw||(Hw={}));function kq(s,e,t,...n){const i=Wse.exec(e);if(!i)throw new Error("Bad use of emmet");const o=i[1]||"div";let r;return s!==Hw.HTML?r=document.createElementNS(s,o):r=document.createElement(o),i[3]&&(r.id=i[3]),i[4]&&(r.className=i[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?r[a]=l:a==="selected"?l&&r.setAttribute(a,"true"):r.setAttribute(a,l))}),r.append(...n),r}function te(s,e,...t){return kq(Hw.HTML,s,e,...t)}te.SVG=function(s,e,...t){return kq(Hw.SVG,s,e,...t)};function Bse(s,...e){s?uo(...e):ps(...e)}function uo(...s){for(const e of s)e.style.display="",e.removeAttribute("aria-hidden")}function ps(...s){for(const e of s)e.style.display="none",e.setAttribute("aria-hidden","true")}function v8(s,e){const t=s.devicePixelRatio*e;return Math.max(1,Math.floor(t))/s.devicePixelRatio}function Lq(s){Et.open(s,"_blank","noopener")}function Hse(s,e){const t=()=>{e(),n=So(s,t)};let n=So(s,t);return ve(()=>n.dispose())}gq.setPreferredWebSchema(/^https:/.test(Et.location.href)?"https":"http");function bd(s){return s?`url('${mT.uriToBrowserUri(s).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function xN(s){return`'${s.replace(/'/g,"%27")}'`}function od(s,e){if(s!==void 0){const t=s.match(/^\s*var\((.+)\)$/);if(t){const n=t[1].split(",",2);return n.length===2&&(e=od(n[1].trim(),e)),`var(${n[0]}, ${e})`}return s}return e}function Vse(s,e=!1){const t=document.createElement("a");return uq("afterSanitizeAttributes",n=>{for(const i of["href","src"])if(n.hasAttribute(i)){const o=n.getAttribute(i);if(i==="href"&&o.startsWith("#"))continue;if(t.href=o,!s.includes(t.protocol.replace(/:$/,""))){if(e&&i==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(i)}}}),ve(()=>{fq("afterSanitizeAttributes")})}const zse=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);class jc extends O{constructor(){super(),this._subscriptions=new q,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(se.runAndSubscribe(bT,({window:e,disposables:t})=>this.registerListeners(e,t),{window:Et,disposables:this._subscriptions}))}registerListeners(e,t){t.add($(e,"keydown",n=>{if(n.defaultPrevented)return;const i=new Pt(n);if(!(i.keyCode===6&&n.repeat)){if(n.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(n.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(n.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(n.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(i.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=n,this.fire(this._keyStatus))}},!0)),t.add($(e,"keyup",n=>{n.defaultPrevented||(!n.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!n.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!n.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!n.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=n,this.fire(this._keyStatus)))},!0)),t.add($(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add($(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add($(e.document.body,"mousemove",n=>{n.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add($(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return jc.instance||(jc.instance=new jc),jc.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class $se extends F{constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register($(this.element,ee.DRAG_START,e=>{var t,n;(n=(t=this.callbacks).onDragStart)==null||n.call(t,e)})),this.callbacks.onDrag&&this._register($(this.element,ee.DRAG,e=>{var t,n;(n=(t=this.callbacks).onDrag)==null||n.call(t,e)})),this._register($(this.element,ee.DRAG_ENTER,e=>{var t,n;this.counter++,this.dragStartTime=e.timeStamp,(n=(t=this.callbacks).onDragEnter)==null||n.call(t,e)})),this._register($(this.element,ee.DRAG_OVER,e=>{var t,n;e.preventDefault(),(n=(t=this.callbacks).onDragOver)==null||n.call(t,e,e.timeStamp-this.dragStartTime)})),this._register($(this.element,ee.DRAG_LEAVE,e=>{var t,n;this.counter--,this.counter===0&&(this.dragStartTime=0,(n=(t=this.callbacks).onDragLeave)==null||n.call(t,e))})),this._register($(this.element,ee.DRAG_END,e=>{var t,n;this.counter=0,this.dragStartTime=0,(n=(t=this.callbacks).onDragEnd)==null||n.call(t,e)})),this._register($(this.element,ee.DROP,e=>{var t,n;this.counter=0,this.dragStartTime=0,(n=(t=this.callbacks).onDrop)==null||n.call(t,e)}))}}const xq=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Qe(s,...e){let t,n;Array.isArray(e[0])?(t={},n=e[0]):(t=e[0]||{},n=e[1]);const i=xq.exec(s);if(!i||!i.groups)throw new Error("Bad use of h");const o=i.groups.tag||"div",r=document.createElement(o);i.groups.id&&(r.id=i.groups.id);const a=[];if(i.groups.class)for(const c of i.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(i.groups.name&&(l[i.groups.name]=r),n)for(const c of n)oi(c)?r.appendChild(c):typeof c=="string"?r.append(c):"root"in c&&(Object.assign(l,c),r.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[h,u]of Object.entries(d))r.style.setProperty($k(h),typeof u=="number"?u+"px":""+u);else c==="tabIndex"?r.tabIndex=d:r.setAttribute($k(c),d.toString());return l.root=r,l}function Qm(s,...e){let t,n;Array.isArray(e[0])?(t={},n=e[0]):(t=e[0]||{},n=e[1]);const i=xq.exec(s);if(!i||!i.groups)throw new Error("Bad use of h");const o=i.groups.tag||"div",r=document.createElementNS("http://www.w3.org/2000/svg",o);i.groups.id&&(r.id=i.groups.id);const a=[];if(i.groups.class)for(const c of i.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(r.className=a.join(" "));const l={};if(i.groups.name&&(l[i.groups.name]=r),n)for(const c of n)oi(c)?r.appendChild(c):typeof c=="string"?r.append(c):"root"in c&&(Object.assign(l,c),r.appendChild(c.root));for(const[c,d]of Object.entries(t))if(c!=="className")if(c==="style")for(const[h,u]of Object.entries(d))r.style.setProperty($k(h),typeof u=="number"?u+"px":""+u);else c==="tabIndex"?r.tabIndex=d:r.setAttribute($k(c),d.toString());return l.root=r,l}function $k(s){return s.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}class Use extends F{constructor(e){super(),this._onDidChange=this._register(new O),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){var n;(n=this._mediaQueryList)==null||n.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}}class jse extends F{get value(){return this._value}constructor(e){super(),this._onDidChange=this._register(new O),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(e);const t=this._register(new Use(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){const t=document.createElement("canvas").getContext("2d"),n=e.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}}class qse{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(e){const t=Wk(e);let n=this.mapWindowIdToPixelRatioMonitor.get(t);return n||(n=new jse(e),this.mapWindowIdToPixelRatioMonitor.set(t,n),se.once(wse)(({vscodeWindowId:i})=>{i===t&&(n==null||n.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))})),n}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}}const Vw=new qse;class Dq{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(e){const t=fa(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=fa(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=fa(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=fa(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=fa(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=fa(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=fa(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingLeft(e){const t=fa(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=fa(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=fa(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=fa(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function fa(s){return typeof s=="number"?`${s}px`:s}function Ct(s){return new Dq(s)}function Ii(s,e){s instanceof Dq?(s.setFontFamily(e.getMassagedFontFamily()),s.setFontWeight(e.fontWeight),s.setFontSize(e.fontSize),s.setFontFeatureSettings(e.fontFeatureSettings),s.setFontVariationSettings(e.fontVariationSettings),s.setLineHeight(e.lineHeight),s.setLetterSpacing(e.letterSpacing)):(s.style.fontFamily=e.getMassagedFontFamily(),s.style.fontWeight=e.fontWeight,s.style.fontSize=e.fontSize+"px",s.style.fontFeatureSettings=e.fontFeatureSettings,s.style.fontVariationSettings=e.fontVariationSettings,s.style.lineHeight=e.lineHeight+"px",s.style.letterSpacing=e.letterSpacing+"px")}class Kse{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class G3{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){var t;this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),(t=this._container)==null||t.remove(),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");Ii(t,this._bareFontInfo),e.appendChild(t);const n=document.createElement("div");Ii(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);const i=document.createElement("div");Ii(i,this._bareFontInfo),i.style.fontStyle="italic",e.appendChild(i);const o=[];for(const r of this._requests){let a;r.type===0&&(a=t),r.type===2&&(a=n),r.type===1&&(a=i),a.appendChild(document.createElement("br"));const l=document.createElement("span");G3._render(l,r),a.appendChild(l),o.push(l)}this._container=e,this._testElements=o}static _render(e,t){if(t.chr===" "){let n=" ";for(let i=0;i<8;i++)n+=n;e.innerText=n}else{let n=t.chr;for(let i=0;i<8;i++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}}function Gse(s,e,t){new G3(e,t).read(s)}const gr=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new O,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(s){s=Math.min(Math.max(-5,s),20),this._zoomLevel!==s&&(this._zoomLevel=s,this._onDidChangeZoomLevel.fire(this._zoomLevel))}},Zse=et?1.5:1.35,DN=8;class Bf{static createFromValidatedSettings(e,t,n){const i=e.get(49),o=e.get(53),r=e.get(52),a=e.get(51),l=e.get(54),c=e.get(67),d=e.get(64);return Bf._create(i,o,r,a,l,c,d,t,n)}static _create(e,t,n,i,o,r,a,l,c){r===0?r=Zse*n:r<DN&&(r=r*n),r=Math.round(r),r<DN&&(r=DN);const d=1+(c?0:gr.getZoomLevel()*.1);return n*=d,r*=d,o===Mw.TRANSLATE&&(t==="normal"||t==="bold"?o=Mw.OFF:(o=`'wght' ${parseInt(t,10)}`,t="normal")),new Bf({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,fontVariationSettings:o,lineHeight:r,letterSpacing:a})}constructor(e){this._bareFontInfoBrand=void 0,this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const e=Ls.fontFamily,t=Bf._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}}const Yse=2;class qM extends Bf{constructor(e,t){super(e),this._editorStylingBrand=void 0,this.version=Yse,this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}}class Xse extends F{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new O),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){const t=Wk(e);let n=this._cache.get(t);return n||(n=new Qse,this._cache.set(t,n)),n}_writeToCache(e,t,n){this._ensureCache(e).put(t,n),!n.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){const t=this._ensureCache(e),n=t.getValues();let i=!1;for(const o of n)o.isTrusted||(i=!0,t.remove(o));i&&this._onDidChange.fire()}readFontInfo(e,t){const n=this._ensureCache(e);if(!n.has(t)){let i=this._actualReadFontInfo(e,t);(i.typicalHalfwidthCharacterWidth<=2||i.typicalFullwidthCharacterWidth<=2||i.spaceWidth<=2||i.maxDigitWidth<=2)&&(i=new qM({pixelRatio:Vw.getInstance(e).value,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontSize:i.fontSize,fontFeatureSettings:i.fontFeatureSettings,fontVariationSettings:i.fontVariationSettings,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,isMonospace:i.isMonospace,typicalHalfwidthCharacterWidth:Math.max(i.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(i.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:i.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(i.spaceWidth,5),middotWidth:Math.max(i.middotWidth,5),wsmiddotWidth:Math.max(i.wsmiddotWidth,5),maxDigitWidth:Math.max(i.maxDigitWidth,5)},!1)),this._writeToCache(e,t,i)}return n.get(t)}_createRequest(e,t,n,i){const o=new Kse(e,t);return n.push(o),i==null||i.push(o),o}_actualReadFontInfo(e,t){const n=[],i=[],o=this._createRequest("n",0,n,i),r=this._createRequest("ｍ",0,n,null),a=this._createRequest(" ",0,n,i),l=this._createRequest("0",0,n,i),c=this._createRequest("1",0,n,i),d=this._createRequest("2",0,n,i),h=this._createRequest("3",0,n,i),u=this._createRequest("4",0,n,i),f=this._createRequest("5",0,n,i),g=this._createRequest("6",0,n,i),p=this._createRequest("7",0,n,i),_=this._createRequest("8",0,n,i),b=this._createRequest("9",0,n,i),v=this._createRequest("→",0,n,i),C=this._createRequest("￫",0,n,null),w=this._createRequest("·",0,n,i),y=this._createRequest("⸱",0,n,null),k="|/-_ilm%";for(let B=0,z=k.length;B<z;B++)this._createRequest(k.charAt(B),0,n,i),this._createRequest(k.charAt(B),1,n,i),this._createRequest(k.charAt(B),2,n,i);Gse(e,t,n);const x=Math.max(l.width,c.width,d.width,h.width,u.width,f.width,g.width,p.width,_.width,b.width);let D=t.fontFeatureSettings===nu.OFF;const N=i[0].width;for(let B=1,z=i.length;D&&B<z;B++){const U=N-i[B].width;if(U<-.001||U>.001){D=!1;break}}let W=!0;return D&&C.width!==N&&(W=!1),C.width>v.width&&(W=!1),new qM({pixelRatio:Vw.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:D,typicalHalfwidthCharacterWidth:o.width,typicalFullwidthCharacterWidth:r.width,canUseHalfwidthRightwardsArrow:W,spaceWidth:a.width,middotWidth:w.width,wsmiddotWidth:y.width,maxDigitWidth:x},!0)}}class Qse{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}}const KM=new Xse;var Ma;(function(s){s.serviceIds=new Map,s.DI_TARGET="$di$target",s.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[s.DI_DEPENDENCIES]||[]}s.getServiceDependencies=e})(Ma||(Ma={}));const Ce=tt("instantiationService");function Jse(s,e,t){e[Ma.DI_TARGET]===e?e[Ma.DI_DEPENDENCIES].push({id:s,index:t}):(e[Ma.DI_DEPENDENCIES]=[{id:s,index:t}],e[Ma.DI_TARGET]=e)}function tt(s){if(Ma.serviceIds.has(s))return Ma.serviceIds.get(s);const e=function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");Jse(e,t,i)};return e.toString=()=>s,Ma.serviceIds.set(s,e),e}const mt=tt("codeEditorService"),Ut=tt("modelService"),Qs=tt("textModelService");class _o extends F{constructor(e,t="",n="",i=!0,o){super(),this._onDidChange=this._register(new O),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class Qg extends F{constructor(){super(...arguments),this._onWillRun=this._register(new O),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new O),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{await this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})}async runAction(e,t){await e.run(t)}}const dw=class dw{constructor(){this.id=dw.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const n of e)n.length&&(t.length?t=[...t,new dw,...n]:t=n);return t}async run(){}};dw.ID="vs.actions.separator";let ri=dw;class rb{get actions(){return this._actions}constructor(e,t,n,i){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=i,this._actions=n}async run(){}}const TD=class TD extends _o{constructor(){super(TD.ID,m("submenu.empty","(empty)"),void 0,!1)}};TD.ID="vs.actions.empty";let GM=TD;function Hf(s){return{id:s.id,label:s.label,tooltip:s.tooltip??s.label,class:s.class,enabled:s.enabled??!0,checked:s.checked,run:async(...e)=>s.run(...e)}}var ZM;(function(s){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}s.isThemeColor=e})(ZM||(ZM={}));var De;(function(s){s.iconNameSegment="[A-Za-z0-9]+",s.iconNameExpression="[A-Za-z0-9-]+",s.iconModifierExpression="~[A-Za-z]+",s.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${s.iconNameExpression})(${s.iconModifierExpression})?$`);function t(u){const f=e.exec(u.id);if(!f)return t(J.error);const[,g,p]=f,_=["codicon","codicon-"+g];return p&&_.push("codicon-modifier-"+p.substring(1)),_}s.asClassNameArray=t;function n(u){return t(u).join(" ")}s.asClassName=n;function i(u){return"."+t(u).join(".")}s.asCSSSelector=i;function o(u){return u&&typeof u=="object"&&typeof u.id=="string"&&(typeof u.color>"u"||ZM.isThemeColor(u.color))}s.isThemeIcon=o;const r=new RegExp(`^\\$\\((${s.iconNameExpression}(?:${s.iconModifierExpression})?)\\)$`);function a(u){const f=r.exec(u);if(!f)return;const[,g]=f;return{id:g}}s.fromString=a;function l(u){return{id:u}}s.fromId=l;function c(u,f){let g=u.id;const p=g.lastIndexOf("~");return p!==-1&&(g=g.substring(0,p)),f&&(g=`${g}~${f}`),{id:g}}s.modify=c;function d(u){const f=u.id.lastIndexOf("~");if(f!==-1)return u.id.substring(f+1)}s.getModifier=d;function h(u,f){var g,p;return u.id===f.id&&((g=u.color)==null?void 0:g.id)===((p=f.color)==null?void 0:p.id)}s.isEqual=h})(De||(De={}));const Wt=tt("commandService"),rt=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new O,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(s,e){if(!s)throw new Error("invalid command");if(typeof s=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:s,handler:e})}if(s.metadata&&Array.isArray(s.metadata.args)){const r=[];for(const l of s.metadata.args)r.push(l.constraint);const a=s.handler;s.handler=function(l,...c){return dte(c,r),a(l,...c)}}const{id:t}=s;let n=this._commands.get(t);n||(n=new vs,this._commands.set(t,n));const i=n.unshift(s),o=ve(()=>{i();const r=this._commands.get(t);r!=null&&r.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(s,e){return rt.registerCommand(s,(t,...n)=>t.get(Wt).executeCommand(e,...n))}getCommand(s){const e=this._commands.get(s);if(!(!e||e.isEmpty()))return ot.first(e)}getCommands(){const s=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&s.set(e,t)}return s}};rt.registerCommand("noop",()=>{});function IN(...s){switch(s.length){case 1:return m("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",s[0]);case 2:return m("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",s[0],s[1]);case 3:return m("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",s[0],s[1],s[2]);default:return}}const eoe=m("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),toe=m("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");var Jc;let Iv=(Jc=class{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw D3(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(IN("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(IN("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(IN("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,n=this._input.substring(this._start,this._current),i={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(i)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),n=Jc._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(eoe);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(toe);return}const o=this._input.charCodeAt(e);if(t)t=!1;else if(o===47&&!n){e++;break}else o===91?n=!0:o===92?t=!0:o===93&&(n=!1);e++}for(;e<this._input.length&&Jc._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const i=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:i,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}},Jc._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),Jc._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]),Jc);const qi=new Map;qi.set("false",!1);qi.set("true",!0);qi.set("isMac",et);qi.set("isLinux",Ds);qi.set("isWindows",Bi);qi.set("isWeb",Lm);qi.set("isMacNative",et&&!Lm);qi.set("isEdge",Lte);qi.set("isFirefox",Ste);qi.set("isChrome",xj);qi.set("isSafari",kte);const noe=Object.prototype.hasOwnProperty,ioe={regexParsingWithErrorRecovery:!0},soe=m("contextkey.parser.error.emptyString","Empty context key expression"),ooe=m("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),roe=m("contextkey.parser.error.noInAfterNot","'in' after 'not'."),C8=m("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),aoe=m("contextkey.parser.error.unexpectedToken","Unexpected token"),loe=m("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),coe=m("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),doe=m("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");var Ol;let hoe=(Ol=class{constructor(e=ioe){this._config=e,this._scanner=new Iv,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:soe,offset:0,lexeme:"",additionalInfo:ooe});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const n=this._peek(),i=n.type===17?loe:void 0;throw this._parsingErrors.push({message:aoe,offset:n.offset,lexeme:Iv.getLexeme(n),additionalInfo:i}),Ol._parseError}return t}catch(t){if(t!==Ol._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:K.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:K.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Is.INSTANCE;case 12:return this._advance(),Gs.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,C8),t==null?void 0:t.negate()}case 17:return this._advance(),Dm.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),K.true();case 12:return this._advance(),K.false();case 0:{this._advance();const t=this._expr();return this._consume(1,C8),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const i=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),i.type!==10)throw this._errExpectedButGot("REGEX",i);const o=i.lexeme,r=o.lastIndexOf("/"),a=r===o.length-1?void 0:this._removeFlagsGY(o.substring(r+1));let l;try{l=new RegExp(o.substring(1,r),a)}catch{throw this._errExpectedButGot("REGEX",i)}return zw.create(t,l)}switch(i.type){case 10:case 19:{const o=[i.lexeme];this._advance();let r=this._peek(),a=0;for(let u=0;u<i.lexeme.length;u++)i.lexeme.charCodeAt(u)===40?a++:i.lexeme.charCodeAt(u)===41&&a--;for(;!this._isAtEnd()&&r.type!==15&&r.type!==16;){switch(r.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let u=0;u<r.lexeme.length;u++)r.lexeme.charCodeAt(u)===40?a++:i.lexeme.charCodeAt(u)===41&&a--}if(a<0)break;o.push(Iv.getLexeme(r)),this._advance(),r=this._peek()}const l=o.join(""),c=l.lastIndexOf("/"),d=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let h;try{h=new RegExp(l.substring(1,c),d)}catch{throw this._errExpectedButGot("REGEX",i)}return K.regex(t,h)}case 18:{const o=i.lexeme;this._advance();let r=null;if(!Kj(o)){const a=o.indexOf("/"),l=o.lastIndexOf("/");if(a!==l&&a>=0){const c=o.slice(a+1,l),d=o[l+1]==="i"?"i":"";try{r=new RegExp(c,d)}catch{throw this._errExpectedButGot("REGEX",i)}}}if(r===null)throw this._errExpectedButGot("REGEX",i);return zw.create(t,r)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,roe);const i=this._value();return K.notIn(t,i)}switch(this._peek().type){case 3:{this._advance();const i=this._value();if(this._previous().type===18)return K.equals(t,i);switch(i){case"true":return K.has(t);case"false":return K.not(t);default:return K.equals(t,i)}}case 4:{this._advance();const i=this._value();if(this._previous().type===18)return K.notEquals(t,i);switch(i){case"true":return K.not(t);case"false":return K.has(t);default:return K.notEquals(t,i)}}case 5:return this._advance(),DT.create(t,this._value());case 6:return this._advance(),IT.create(t,this._value());case 7:return this._advance(),LT.create(t,this._value());case 8:return this._advance(),xT.create(t,this._value());case 13:return this._advance(),K.in(t,this._value());default:return K.has(t)}}case 20:throw this._parsingErrors.push({message:coe,offset:e.offset,lexeme:"",additionalInfo:doe}),Ol._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){const i=m("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,Iv.getLexeme(t)),o=t.offset,r=Iv.getLexeme(t);return this._parsingErrors.push({message:i,offset:o,lexeme:r,additionalInfo:n}),Ol._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},Ol._parseError=new Error,Ol);const a7=class a7{static false(){return Is.INSTANCE}static true(){return Gs.INSTANCE}static has(e){return xm.create(e)}static equals(e,t){return Yb.create(e,t)}static notEquals(e,t){return ST.create(e,t)}static regex(e,t){return zw.create(e,t)}static in(e,t){return wT.create(e,t)}static notIn(e,t){return yT.create(e,t)}static not(e){return Dm.create(e)}static and(...e){return If.create(e,null,!0)}static or(...e){return Wc.create(e,null,!0)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};a7._parser=new hoe({regexParsingWithErrorRecovery:!1});let K=a7;function uoe(s,e){const t=s?s.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function LC(s,e){return s.cmp(e)}const ED=class ED{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}negate(){return Gs.INSTANCE}};ED.INSTANCE=new ED;let Is=ED;const ND=class ND{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}negate(){return Is.INSTANCE}};ND.INSTANCE=new ND;let Gs=ND;class xm{static create(e,t=null){const n=qi.get(e);return typeof n=="boolean"?n?Gs.INSTANCE:Is.INSTANCE:new xm(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:Tq(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=qi.get(this.key);return typeof e=="boolean"?e?Gs.INSTANCE:Is.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=Dm.create(this.key,this)),this.negated}}class Yb{static create(e,t,n=null){if(typeof t=="boolean")return t?xm.create(e,n):Dm.create(e,n);const i=qi.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Gs.INSTANCE:Is.INSTANCE:new Yb(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:Im(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=qi.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Gs.INSTANCE:Is.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=ST.create(this.key,this.value,this)),this.negated}}class wT{static create(e,t){return new wT(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:Im(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?noe.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=yT.create(this.key,this.valueKey)),this.negated}}class yT{static create(e,t){return new yT(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=wT.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}class ST{static create(e,t,n=null){if(typeof t=="boolean")return t?Dm.create(e,n):xm.create(e,n);const i=qi.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Is.INSTANCE:Gs.INSTANCE:new ST(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:Im(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=qi.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Is.INSTANCE:Gs.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Yb.create(this.key,this.value,this)),this.negated}}class Dm{static create(e,t=null){const n=qi.get(e);return typeof n=="boolean"?n?Is.INSTANCE:Gs.INSTANCE:new Dm(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:Tq(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=qi.get(this.key);return typeof e=="boolean"?e?Is.INSTANCE:Gs.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=xm.create(this.key,this)),this.negated}}function kT(s,e){if(typeof s=="string"){const t=parseFloat(s);isNaN(t)||(s=t)}return typeof s=="string"||typeof s=="number"?e(s):Is.INSTANCE}class LT{static create(e,t,n=null){return kT(t,i=>new LT(e,i,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:Im(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=IT.create(this.key,this.value,this)),this.negated}}class xT{static create(e,t,n=null){return kT(t,i=>new xT(e,i,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:Im(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=DT.create(this.key,this.value,this)),this.negated}}class DT{static create(e,t,n=null){return kT(t,i=>new DT(e,i,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:Im(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=xT.create(this.key,this.value,this)),this.negated}}class IT{static create(e,t,n=null){return kT(t,i=>new IT(e,i,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:Im(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=LT.create(this.key,this.value,this)),this.negated}}class zw{static create(e,t){return new zw(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=Z3.create(this)),this.negated}}class Z3{static create(e){return new Z3(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}function Iq(s){let e=null;for(let t=0,n=s.length;t<n;t++){const i=s[t].substituteConstants();if(s[t]!==i&&e===null){e=[];for(let o=0;o<t;o++)e[o]=s[o]}e!==null&&(e[t]=i)}return e===null?s:e}class If{static create(e,t,n){return If._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=LC(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Iq(this.expr);return e===this.expr?this:If.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){const i=[];let o=!1;for(const r of e)if(r){if(r.type===1){o=!0;continue}if(r.type===0)return Is.INSTANCE;if(r.type===6){i.push(...r.expr);continue}i.push(r)}if(i.length===0&&o)return Gs.INSTANCE;if(i.length!==0){if(i.length===1)return i[0];i.sort(LC);for(let r=1;r<i.length;r++)i[r-1].equals(i[r])&&(i.splice(r,1),r--);if(i.length===1)return i[0];for(;i.length>1;){const r=i[i.length-1];if(r.type!==9)break;i.pop();const a=i.pop(),l=i.length===0,c=Wc.create(r.expr.map(d=>If.create([d,a],null,n)),null,l);c&&(i.push(c),i.sort(LC))}if(i.length===1)return i[0];if(n){for(let r=0;r<i.length;r++)for(let a=r+1;a<i.length;a++)if(i[r].negate().equals(i[a]))return Is.INSTANCE;if(i.length===1)return i[0]}return new If(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Wc.create(e,this,!0)}return this.negated}}class Wc{static create(e,t,n){return Wc._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const i=LC(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=Iq(this.expr);return e===this.expr?this:Wc.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],o=!1;if(e){for(let r=0,a=e.length;r<a;r++){const l=e[r];if(l){if(l.type===0){o=!0;continue}if(l.type===1)return Gs.INSTANCE;if(l.type===9){i=i.concat(l.expr);continue}i.push(l)}}if(i.length===0&&o)return Is.INSTANCE;i.sort(LC)}if(i.length!==0){if(i.length===1)return i[0];for(let r=1;r<i.length;r++)i[r-1].equals(i[r])&&(i.splice(r,1),r--);if(i.length===1)return i[0];if(n){for(let r=0;r<i.length;r++)for(let a=r+1;a<i.length;a++)if(i[r].negate().equals(i[a]))return Gs.INSTANCE;if(i.length===1)return i[0]}return new Wc(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),i=[];for(const o of y8(t))for(const r of y8(n))i.push(If.create([o,r],null,!1));e.unshift(Wc.create(i,null,!1))}this.negated=Wc.create(e,this,!0)}return this.negated}}const n_=class n_ extends xm{static all(){return n_._info.values()}constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?n_._info.push({...n,key:e}):n!==!0&&n_._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Yb.create(this.key,e)}};n_._info=[];let le=n_;const Ie=tt("contextKeyService");function Tq(s,e){return s<e?-1:s>e?1:0}function Im(s,e,t,n){return s<t?-1:s>t?1:e<n?-1:e>n?1:0}function YM(s,e){if(s.type===0||e.type===1)return!0;if(s.type===9)return e.type===9?w8(s.expr,e.expr):!1;if(e.type===9){for(const t of e.expr)if(YM(s,t))return!0;return!1}if(s.type===6){if(e.type===6)return w8(e.expr,s.expr);for(const t of s.expr)if(YM(t,e))return!0;return!1}return s.equals(e)}function w8(s,e){let t=0,n=0;for(;t<s.length&&n<e.length;){const i=s[t].cmp(e[n]);if(i<0)return!1;i===0&&t++,n++}return t===s.length}function y8(s){return s.type===9?s.expr:[s]}function TN(s,e){if(!s)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function TT(s,e="Unreachable"){throw new Error(e)}function S8(s){s||Pe(new _t("Soft Assertion Failed"))}function Jg(s){if(!s()){debugger;s(),Pe(new _t("Assertion Failed"))}}function Y3(s,e){let t=0;for(;t<s.length-1;){const n=s[t],i=s[t+1];if(!e(n,i))return!1;t++}return!0}class foe{constructor(){this.data=new Map}add(e,t){TN(qs(e)),TN(fi(t)),TN(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}as(e){return this.data.get(e)||null}}const ln=new foe;class X3{constructor(){this._coreKeybindings=new vs,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(mo===1){if(e&&e.win)return e.win}else if(mo===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=X3.bindToCurrentPlatform(e),n=new q;if(t&&t.primary){const i=OM(t.primary,mo);i&&n.add(this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let i=0,o=t.secondary.length;i<o;i++){const r=t.secondary[i],a=OM(r,mo);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-i-1,e.when))}return n}registerCommandAndKeybindingRule(e){return Jr(this.registerKeybindingRule(e),rt.registerCommand(e))}_registerDefaultKeybinding(e,t,n,i,o,r){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:r,weight1:i,weight2:o,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,ve(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(moe)),this._cachedMergedKeybindings.slice(0)}}const Ts=new X3,goe={EditorModes:"platform.keybindingsRegistry"};ln.add(goe.EditorModes,Ts);function moe(s,e){if(s.weight1!==e.weight1)return s.weight1-e.weight1;if(s.command&&e.command){if(s.command<e.command)return-1;if(s.command>e.command)return 1}return s.weight2-e.weight2}var poe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},k8=function(s,e){return function(t,n){e(t,n,s)}},MS;function v_(s){return s.command!==void 0}function _oe(s){return s.submenu!==void 0}const E=class E{constructor(e){if(E._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);E._instances.set(e,this),this.id=e}};E._instances=new Map,E.CommandPalette=new E("CommandPalette"),E.DebugBreakpointsContext=new E("DebugBreakpointsContext"),E.DebugCallStackContext=new E("DebugCallStackContext"),E.DebugConsoleContext=new E("DebugConsoleContext"),E.DebugVariablesContext=new E("DebugVariablesContext"),E.NotebookVariablesContext=new E("NotebookVariablesContext"),E.DebugHoverContext=new E("DebugHoverContext"),E.DebugWatchContext=new E("DebugWatchContext"),E.DebugToolBar=new E("DebugToolBar"),E.DebugToolBarStop=new E("DebugToolBarStop"),E.DebugCallStackToolbar=new E("DebugCallStackToolbar"),E.DebugCreateConfiguration=new E("DebugCreateConfiguration"),E.EditorContext=new E("EditorContext"),E.SimpleEditorContext=new E("SimpleEditorContext"),E.EditorContent=new E("EditorContent"),E.EditorLineNumberContext=new E("EditorLineNumberContext"),E.EditorContextCopy=new E("EditorContextCopy"),E.EditorContextPeek=new E("EditorContextPeek"),E.EditorContextShare=new E("EditorContextShare"),E.EditorTitle=new E("EditorTitle"),E.EditorTitleRun=new E("EditorTitleRun"),E.EditorTitleContext=new E("EditorTitleContext"),E.EditorTitleContextShare=new E("EditorTitleContextShare"),E.EmptyEditorGroup=new E("EmptyEditorGroup"),E.EmptyEditorGroupContext=new E("EmptyEditorGroupContext"),E.EditorTabsBarContext=new E("EditorTabsBarContext"),E.EditorTabsBarShowTabsSubmenu=new E("EditorTabsBarShowTabsSubmenu"),E.EditorTabsBarShowTabsZenModeSubmenu=new E("EditorTabsBarShowTabsZenModeSubmenu"),E.EditorActionsPositionSubmenu=new E("EditorActionsPositionSubmenu"),E.ExplorerContext=new E("ExplorerContext"),E.ExplorerContextShare=new E("ExplorerContextShare"),E.ExtensionContext=new E("ExtensionContext"),E.GlobalActivity=new E("GlobalActivity"),E.CommandCenter=new E("CommandCenter"),E.CommandCenterCenter=new E("CommandCenterCenter"),E.LayoutControlMenuSubmenu=new E("LayoutControlMenuSubmenu"),E.LayoutControlMenu=new E("LayoutControlMenu"),E.MenubarMainMenu=new E("MenubarMainMenu"),E.MenubarAppearanceMenu=new E("MenubarAppearanceMenu"),E.MenubarDebugMenu=new E("MenubarDebugMenu"),E.MenubarEditMenu=new E("MenubarEditMenu"),E.MenubarCopy=new E("MenubarCopy"),E.MenubarFileMenu=new E("MenubarFileMenu"),E.MenubarGoMenu=new E("MenubarGoMenu"),E.MenubarHelpMenu=new E("MenubarHelpMenu"),E.MenubarLayoutMenu=new E("MenubarLayoutMenu"),E.MenubarNewBreakpointMenu=new E("MenubarNewBreakpointMenu"),E.PanelAlignmentMenu=new E("PanelAlignmentMenu"),E.PanelPositionMenu=new E("PanelPositionMenu"),E.ActivityBarPositionMenu=new E("ActivityBarPositionMenu"),E.MenubarPreferencesMenu=new E("MenubarPreferencesMenu"),E.MenubarRecentMenu=new E("MenubarRecentMenu"),E.MenubarSelectionMenu=new E("MenubarSelectionMenu"),E.MenubarShare=new E("MenubarShare"),E.MenubarSwitchEditorMenu=new E("MenubarSwitchEditorMenu"),E.MenubarSwitchGroupMenu=new E("MenubarSwitchGroupMenu"),E.MenubarTerminalMenu=new E("MenubarTerminalMenu"),E.MenubarViewMenu=new E("MenubarViewMenu"),E.MenubarHomeMenu=new E("MenubarHomeMenu"),E.OpenEditorsContext=new E("OpenEditorsContext"),E.OpenEditorsContextShare=new E("OpenEditorsContextShare"),E.ProblemsPanelContext=new E("ProblemsPanelContext"),E.SCMInputBox=new E("SCMInputBox"),E.SCMChangesSeparator=new E("SCMChangesSeparator"),E.SCMChangesContext=new E("SCMChangesContext"),E.SCMIncomingChanges=new E("SCMIncomingChanges"),E.SCMIncomingChangesContext=new E("SCMIncomingChangesContext"),E.SCMIncomingChangesSetting=new E("SCMIncomingChangesSetting"),E.SCMOutgoingChanges=new E("SCMOutgoingChanges"),E.SCMOutgoingChangesContext=new E("SCMOutgoingChangesContext"),E.SCMOutgoingChangesSetting=new E("SCMOutgoingChangesSetting"),E.SCMIncomingChangesAllChangesContext=new E("SCMIncomingChangesAllChangesContext"),E.SCMIncomingChangesHistoryItemContext=new E("SCMIncomingChangesHistoryItemContext"),E.SCMOutgoingChangesAllChangesContext=new E("SCMOutgoingChangesAllChangesContext"),E.SCMOutgoingChangesHistoryItemContext=new E("SCMOutgoingChangesHistoryItemContext"),E.SCMChangeContext=new E("SCMChangeContext"),E.SCMResourceContext=new E("SCMResourceContext"),E.SCMResourceContextShare=new E("SCMResourceContextShare"),E.SCMResourceFolderContext=new E("SCMResourceFolderContext"),E.SCMResourceGroupContext=new E("SCMResourceGroupContext"),E.SCMSourceControl=new E("SCMSourceControl"),E.SCMSourceControlInline=new E("SCMSourceControlInline"),E.SCMSourceControlTitle=new E("SCMSourceControlTitle"),E.SCMHistoryTitle=new E("SCMHistoryTitle"),E.SCMTitle=new E("SCMTitle"),E.SearchContext=new E("SearchContext"),E.SearchActionMenu=new E("SearchActionContext"),E.StatusBarWindowIndicatorMenu=new E("StatusBarWindowIndicatorMenu"),E.StatusBarRemoteIndicatorMenu=new E("StatusBarRemoteIndicatorMenu"),E.StickyScrollContext=new E("StickyScrollContext"),E.TestItem=new E("TestItem"),E.TestItemGutter=new E("TestItemGutter"),E.TestProfilesContext=new E("TestProfilesContext"),E.TestMessageContext=new E("TestMessageContext"),E.TestMessageContent=new E("TestMessageContent"),E.TestPeekElement=new E("TestPeekElement"),E.TestPeekTitle=new E("TestPeekTitle"),E.TestCallStack=new E("TestCallStack"),E.TouchBarContext=new E("TouchBarContext"),E.TitleBarContext=new E("TitleBarContext"),E.TitleBarTitleContext=new E("TitleBarTitleContext"),E.TunnelContext=new E("TunnelContext"),E.TunnelPrivacy=new E("TunnelPrivacy"),E.TunnelProtocol=new E("TunnelProtocol"),E.TunnelPortInline=new E("TunnelInline"),E.TunnelTitle=new E("TunnelTitle"),E.TunnelLocalAddressInline=new E("TunnelLocalAddressInline"),E.TunnelOriginInline=new E("TunnelOriginInline"),E.ViewItemContext=new E("ViewItemContext"),E.ViewContainerTitle=new E("ViewContainerTitle"),E.ViewContainerTitleContext=new E("ViewContainerTitleContext"),E.ViewTitle=new E("ViewTitle"),E.ViewTitleContext=new E("ViewTitleContext"),E.CommentEditorActions=new E("CommentEditorActions"),E.CommentThreadTitle=new E("CommentThreadTitle"),E.CommentThreadActions=new E("CommentThreadActions"),E.CommentThreadAdditionalActions=new E("CommentThreadAdditionalActions"),E.CommentThreadTitleContext=new E("CommentThreadTitleContext"),E.CommentThreadCommentContext=new E("CommentThreadCommentContext"),E.CommentTitle=new E("CommentTitle"),E.CommentActions=new E("CommentActions"),E.CommentsViewThreadActions=new E("CommentsViewThreadActions"),E.InteractiveToolbar=new E("InteractiveToolbar"),E.InteractiveCellTitle=new E("InteractiveCellTitle"),E.InteractiveCellDelete=new E("InteractiveCellDelete"),E.InteractiveCellExecute=new E("InteractiveCellExecute"),E.InteractiveInputExecute=new E("InteractiveInputExecute"),E.InteractiveInputConfig=new E("InteractiveInputConfig"),E.ReplInputExecute=new E("ReplInputExecute"),E.IssueReporter=new E("IssueReporter"),E.NotebookToolbar=new E("NotebookToolbar"),E.NotebookStickyScrollContext=new E("NotebookStickyScrollContext"),E.NotebookCellTitle=new E("NotebookCellTitle"),E.NotebookCellDelete=new E("NotebookCellDelete"),E.NotebookCellInsert=new E("NotebookCellInsert"),E.NotebookCellBetween=new E("NotebookCellBetween"),E.NotebookCellListTop=new E("NotebookCellTop"),E.NotebookCellExecute=new E("NotebookCellExecute"),E.NotebookCellExecuteGoTo=new E("NotebookCellExecuteGoTo"),E.NotebookCellExecutePrimary=new E("NotebookCellExecutePrimary"),E.NotebookDiffCellInputTitle=new E("NotebookDiffCellInputTitle"),E.NotebookDiffCellMetadataTitle=new E("NotebookDiffCellMetadataTitle"),E.NotebookDiffCellOutputsTitle=new E("NotebookDiffCellOutputsTitle"),E.NotebookOutputToolbar=new E("NotebookOutputToolbar"),E.NotebookOutlineFilter=new E("NotebookOutlineFilter"),E.NotebookOutlineActionMenu=new E("NotebookOutlineActionMenu"),E.NotebookEditorLayoutConfigure=new E("NotebookEditorLayoutConfigure"),E.NotebookKernelSource=new E("NotebookKernelSource"),E.BulkEditTitle=new E("BulkEditTitle"),E.BulkEditContext=new E("BulkEditContext"),E.TimelineItemContext=new E("TimelineItemContext"),E.TimelineTitle=new E("TimelineTitle"),E.TimelineTitleContext=new E("TimelineTitleContext"),E.TimelineFilterSubMenu=new E("TimelineFilterSubMenu"),E.AccountsContext=new E("AccountsContext"),E.SidebarTitle=new E("SidebarTitle"),E.PanelTitle=new E("PanelTitle"),E.AuxiliaryBarTitle=new E("AuxiliaryBarTitle"),E.AuxiliaryBarHeader=new E("AuxiliaryBarHeader"),E.TerminalInstanceContext=new E("TerminalInstanceContext"),E.TerminalEditorInstanceContext=new E("TerminalEditorInstanceContext"),E.TerminalNewDropdownContext=new E("TerminalNewDropdownContext"),E.TerminalTabContext=new E("TerminalTabContext"),E.TerminalTabEmptyAreaContext=new E("TerminalTabEmptyAreaContext"),E.TerminalStickyScrollContext=new E("TerminalStickyScrollContext"),E.WebviewContext=new E("WebviewContext"),E.InlineCompletionsActions=new E("InlineCompletionsActions"),E.InlineEditsActions=new E("InlineEditsActions"),E.InlineEditActions=new E("InlineEditActions"),E.NewFile=new E("NewFile"),E.MergeInput1Toolbar=new E("MergeToolbar1Toolbar"),E.MergeInput2Toolbar=new E("MergeToolbar2Toolbar"),E.MergeBaseToolbar=new E("MergeBaseToolbar"),E.MergeInputResultToolbar=new E("MergeToolbarResultToolbar"),E.InlineSuggestionToolbar=new E("InlineSuggestionToolbar"),E.InlineEditToolbar=new E("InlineEditToolbar"),E.ChatContext=new E("ChatContext"),E.ChatCodeBlock=new E("ChatCodeblock"),E.ChatCompareBlock=new E("ChatCompareBlock"),E.ChatMessageTitle=new E("ChatMessageTitle"),E.ChatExecute=new E("ChatExecute"),E.ChatExecuteSecondary=new E("ChatExecuteSecondary"),E.ChatInputSide=new E("ChatInputSide"),E.AccessibleView=new E("AccessibleView"),E.MultiDiffEditorFileToolbar=new E("MultiDiffEditorFileToolbar"),E.DiffEditorHunkToolbar=new E("DiffEditorHunkToolbar"),E.DiffEditorSelectionToolbar=new E("DiffEditorSelectionToolbar");let ge=E;const nr=tt("menuService"),hw=class hw{static for(e){let t=this._all.get(e);return t||(t=new hw(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const n of e)n instanceof hw&&t.add(n.id);return t}constructor(e){this.id=e,this.has=t=>t===e}};hw._all=new Map;let lf=hw;const gi=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new Nne({merge:lf.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(s){return this._commands.set(s.id,s),this._onDidChangeMenu.fire(lf.for(ge.CommandPalette)),ve(()=>{this._commands.delete(s.id)&&this._onDidChangeMenu.fire(lf.for(ge.CommandPalette))})}getCommand(s){return this._commands.get(s)}getCommands(){const s=new Map;return this._commands.forEach((e,t)=>s.set(t,e)),s}appendMenuItem(s,e){let t=this._menuItems.get(s);t||(t=new vs,this._menuItems.set(s,t));const n=t.push(e);return this._onDidChangeMenu.fire(lf.for(s)),ve(()=>{n(),this._onDidChangeMenu.fire(lf.for(s))})}appendMenuItems(s){const e=new q;for(const{id:t,item:n}of s)e.add(this.appendMenuItem(t,n));return e}getMenuItems(s){let e;return this._menuItems.has(s)?e=[...this._menuItems.get(s)]:e=[],s===ge.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(s){const e=new Set;for(const t of s)v_(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||s.push({command:t})})}};class C_ extends rb{constructor(e,t,n){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,n,"submenu"),this.item=e,this.hideActions=t}}let bo=MS=class{static label(e,t){return t!=null&&t.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,n,i,o,r,a){var c;this.hideActions=i,this.menuKeybinding=o,this._commandService=a,this.id=e.id,this.label=MS.label(e,n),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:(c=e.tooltip)==null?void 0:c.value)??"",this.enabled=!e.precondition||r.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){const d=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=r.contextMatchesRules(d.condition),this.checked&&d.tooltip&&(this.tooltip=typeof d.tooltip=="string"?d.tooltip:d.tooltip.value),this.checked&&De.isThemeIcon(d.icon)&&(l=d.icon),this.checked&&d.title&&(this.label=typeof d.title=="string"?d.title:d.title.value)}l||(l=De.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new MS(t,void 0,n,i,void 0,r,a):void 0,this._options=n,this.class=l&&De.asClassName(l)}run(...e){var n,i;let t=[];return(n=this._options)!=null&&n.arg&&(t=[...t,this._options.arg]),(i=this._options)!=null&&i.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};bo=MS=poe([k8(5,Ie),k8(6,Wt)],bo);class Rs{constructor(e){this.desc=e}}function Ot(s){const e=[],t=new s,{f1:n,menu:i,keybinding:o,...r}=t.desc;if(rt.getCommand(r.id))throw new Error(`Cannot register two commands with the same id: ${r.id}`);if(e.push(rt.registerCommand({id:r.id,handler:(a,...l)=>t.run(a,...l),metadata:r.metadata})),Array.isArray(i))for(const a of i)e.push(gi.appendMenuItem(a.id,{command:{...r,precondition:a.precondition===null?void 0:r.precondition},...a}));else i&&e.push(gi.appendMenuItem(i.id,{command:{...r,precondition:i.precondition===null?void 0:r.precondition},...i}));if(n&&(e.push(gi.appendMenuItem(ge.CommandPalette,{command:r,when:r.precondition})),e.push(gi.addCommand(r))),Array.isArray(o))for(const a of o)e.push(Ts.registerKeybindingRule({...a,id:r.id,when:r.precondition?K.and(r.precondition,a.when):a.when}));else o&&e.push(Ts.registerKeybindingRule({...o,id:r.id,when:r.precondition?K.and(r.precondition,o.when):o.when}));return{dispose(){Mt(e)}}}const Zi=tt("telemetryService"),Hi=tt("logService");var zs;(function(s){s[s.Off=0]="Off",s[s.Trace=1]="Trace",s[s.Debug=2]="Debug",s[s.Info=3]="Info",s[s.Warning=4]="Warning",s[s.Error=5]="Error"})(zs||(zs={}));const Eq=zs.Info;class Nq extends F{constructor(){super(...arguments),this.level=Eq,this._onDidChangeLogLevel=this._register(new O),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==zs.Off&&this.level<=e}}class boe extends Nq{constructor(e=Eq,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.checkLogLevel(zs.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.checkLogLevel(zs.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.checkLogLevel(zs.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.checkLogLevel(zs.Warning)&&(this.useColors?console.log("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.checkLogLevel(zs.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",e,...t):console.error(e,...t))}}class voe extends Nq{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const n of this.loggers)n.trace(e,...t)}debug(e,...t){for(const n of this.loggers)n.debug(e,...t)}info(e,...t){for(const n of this.loggers)n.info(e,...t)}warn(e,...t){for(const n of this.loggers)n.warn(e,...t)}error(e,...t){for(const n of this.loggers)n.error(e,...t)}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}function Coe(s){switch(s){case zs.Trace:return"trace";case zs.Debug:return"debug";case zs.Info:return"info";case zs.Warning:return"warn";case zs.Error:return"error";case zs.Off:return"off"}}new le("logLevel",Coe(zs.Info));class ET{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=K.and(n,this.precondition):n=this.precondition);const i={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Ts.registerKeybindingRule(i)}}rt.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){gi.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class Xb extends ET{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n,i){return this._implementations.push({priority:e,name:t,implementation:n,when:i}),this._implementations.sort((o,r)=>r.priority-o.priority),{dispose:()=>{for(let o=0;o<this._implementations.length;o++)if(this._implementations[o].implementation===n){this._implementations.splice(o,1);return}}}}runCommand(e,t){const n=e.get(Hi),i=e.get(Ie);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const o of this._implementations){if(o.when){const a=i.getContext(Fi());if(!o.when.evaluate(a))continue}const r=o.implementation(e,t);if(r)return n.trace(`Command '${this.id}' was handled by '${o.name}'.`),typeof r=="boolean"?void 0:r}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class Rq extends ET{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class Zn extends ET{static bindToContribution(e){return class extends Zn{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,i,o){const r=e(i);r&&this._callback(r,o)}}}static runEditorCommand(e,t,n,i){const o=e.get(mt),r=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(r)return r.invokeWithinContext(a=>{if(a.get(Ie).contextMatchesRules(n??void 0))return i(a,r,t)})}runCommand(e,t){return Zn.runEditorCommand(e,t,this.precondition,(n,i,o)=>this.runEditorCommand(n,i,o))}}class he extends Zn{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(i){return i.menuId||(i.menuId=ge.EditorContext),i.title||(i.title=e.label),i.when=K.and(e.precondition,i.when),i}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}constructor(e){super(he.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(Zi).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class Mq extends he{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,i)=>i[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const i of this._implementations){const o=i[1](e,t,n);if(o)return typeof o=="boolean"?void 0:o}}}class el extends Rs{run(e,...t){const n=e.get(mt),i=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(i)return i.invokeWithinContext(o=>{var c;const r=o.get(Ie),a=o.get(Hi);if(!r.contextMatchesRules(this.desc.precondition??void 0)){a.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,(c=this.desc.precondition)==null?void 0:c.serialize());return}return this.runEditorCommand(o,i,...t)})}}function Js(s,e){rt.registerCommand(s,function(t,...n){const i=t.get(Ce),[o,r]=n;gt(Se.isUri(o)),gt(A.isIPosition(r));const a=t.get(Ut).getModel(o);if(a){const l=A.lift(r);return i.invokeFunction(e,a,l,...n.slice(2))}return t.get(Qs).createModelReference(o).then(l=>new Promise((c,d)=>{try{const h=i.invokeFunction(e,l.object.textEditorModel,A.lift(r),n.slice(2));c(h)}catch(h){d(h)}}).finally(()=>{l.dispose()}))})}function oe(s){return mr.INSTANCE.registerEditorCommand(s),s}function Q(s){const e=new s;return mr.INSTANCE.registerEditorAction(e),e}function Aq(s){return mr.INSTANCE.registerEditorAction(s),s}function woe(s){mr.INSTANCE.registerEditorAction(s)}function dt(s,e,t){mr.INSTANCE.registerEditorContribution(s,e,t)}var Vf;(function(s){function e(r){return mr.INSTANCE.getEditorCommand(r)}s.getEditorCommand=e;function t(){return mr.INSTANCE.getEditorActions()}s.getEditorActions=t;function n(){return mr.INSTANCE.getEditorContributions()}s.getEditorContributions=n;function i(r){return mr.INSTANCE.getEditorContributions().filter(a=>r.indexOf(a.id)>=0)}s.getSomeEditorContributions=i;function o(){return mr.INSTANCE.getDiffEditorContributions()}s.getDiffEditorContributions=o})(Vf||(Vf={}));const yoe={EditorCommonContributions:"editor.contributions"},RD=class RD{constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};RD.INSTANCE=new RD;let mr=RD;ln.add(yoe.EditorCommonContributions,mr.INSTANCE);function v0(s){return s.register(),s}const Pq=v0(new Xb({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:ge.MenubarEditMenu,group:"1_do",title:m({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:ge.CommandPalette,group:"",title:m("undo","Undo"),order:1}]}));v0(new Rq(Pq,{id:"default:undo",precondition:void 0}));const Oq=v0(new Xb({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:ge.MenubarEditMenu,group:"1_do",title:m({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:ge.CommandPalette,group:"",title:m("redo","Redo"),order:1}]}));v0(new Rq(Oq,{id:"default:redo",precondition:void 0}));const Soe=v0(new Xb({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:ge.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:ge.CommandPalette,group:"",title:m("selectAll","Select All"),order:1}]})),koe="modulepreload",Loe=function(s,e){return new URL(s,e).href},L8={},ye=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link"),r=document.querySelector("meta[property=csp-nonce]"),a=(r==null?void 0:r.nonce)||(r==null?void 0:r.getAttribute("nonce"));i=Promise.all(t.map(l=>{if(l=Loe(l,n),l in L8)return;L8[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(!!n)for(let f=o.length-1;f>=0;f--){const g=o[f];if(g.href===l&&(!c||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${d}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":koe,c||(u.as="script",u.crossOrigin=""),u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),c)return new Promise((f,g)=>{u.addEventListener("load",f),u.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}return i.then(()=>e()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})},x8="default",xoe="$initialize";let D8=!1;function XM(s){Lm&&(D8||(D8=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(s.message))}class Doe{constructor(e,t,n,i,o){this.vsWorker=e,this.req=t,this.channel=n,this.method=i,this.args=o,this.type=0}}class I8{constructor(e,t,n,i){this.vsWorker=e,this.seq=t,this.res=n,this.err=i,this.type=1}}class Ioe{constructor(e,t,n,i,o){this.vsWorker=e,this.req=t,this.channel=n,this.eventName=i,this.arg=o,this.type=2}}class Toe{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=3}}class Eoe{constructor(e,t){this.vsWorker=e,this.req=t,this.type=4}}class Noe{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,n){const i=String(++this._lastSentReq);return new Promise((o,r)=>{this._pendingReplies[i]={resolve:o,reject:r},this._send(new Doe(this._workerId,i,e,t,n))})}listen(e,t,n){let i=null;const o=new O({onWillAddFirstListener:()=>{i=String(++this._lastSentReq),this._pendingEmitters.set(i,o),this._send(new Ioe(this._workerId,i,e,t,n))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(i),this._send(new Eoe(this._workerId,i)),i=null}});return o.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){const n={get:(i,o)=>(typeof o=="string"&&!i[o]&&(Wq(o)?i[o]=r=>this.listen(e,o,r):Fq(o)?i[o]=this.listen(e,o,void 0):o.charCodeAt(0)===36&&(i[o]=async(...r)=>(await(t==null?void 0:t()),this.sendMessage(e,o,r)))),i[o])};return new Proxy(Object.create(null),n)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(i=>{this._send(new I8(this._workerId,t,i,void 0))},i=>{i.detail instanceof Error&&(i.detail=e8(i.detail)),this._send(new I8(this._workerId,t,void 0,e8(i)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.channel,e.eventName,e.arg)(i=>{this._send(new Toe(this._workerId,t,i))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class Roe extends F{constructor(e,t){super(),this._localChannels=new Map,this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},o=>{this._protocol.handleMessage(o)},o=>{Pe(o)})),this._protocol=new Noe({sendMessage:(o,r)=>{this._worker.postMessage(o,r)},handleMessage:(o,r,a)=>this._handleMessage(o,r,a),handleEvent:(o,r,a)=>this._handleEvent(o,r,a)}),this._protocol.setWorkerId(this._worker.getId());let n=null;const i=globalThis.require;typeof i<"u"&&typeof i.getConfig=="function"?n=i.getConfig():typeof globalThis.requirejs<"u"&&(n=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(x8,xoe,[this._worker.getId(),JSON.parse(JSON.stringify(n)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(x8,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(o=>{this._onError("Worker failed to load "+t.amdModuleId,o)})}_handleMessage(e,t,n){const i=this._localChannels.get(e);if(!i)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof i[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(i[t].apply(i,n))}catch(o){return Promise.reject(o)}}_handleEvent(e,t,n){const i=this._localChannels.get(e);if(!i)throw new Error(`Missing channel ${e} on main thread`);if(Wq(t)){const o=i[t].call(i,n);if(typeof o!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return o}if(Fq(t)){const o=i[t];if(typeof o!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return o}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}_onError(e,t){console.error(e),console.info(t)}}function Fq(s){return s[0]==="o"&&s[1]==="n"&&Il(s.charCodeAt(2))}function Wq(s){return/^onDynamic/.test(s)&&Il(s.charCodeAt(9))}function Nd(s,e){var n;const t=globalThis.MonacoEnvironment;if(t!=null&&t.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(s,e)}catch(i){Pe(i);return}try{return(n=globalThis.trustedTypes)==null?void 0:n.createPolicy(s,e)}catch(i){Pe(i);return}}let Np;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?Np=globalThis.workerttPolicy:Np=Nd("defaultWorkerFactory",{createScriptURL:s=>s});function Moe(s,e){const t=globalThis.MonacoEnvironment;if(t){if(typeof t.getWorker=="function")return t.getWorker("workerMain.js",e);if(typeof t.getWorkerUrl=="function"){const n=t.getWorkerUrl("workerMain.js",e);return new Worker(Np?Np.createScriptURL(n):n,{name:e,type:"module"})}}if(s){const n=Aoe(e,s.toString(!0)),i=new Worker(Np?Np.createScriptURL(n):n,{name:e,type:"module"});return Poe(i)}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function Aoe(s,e,t){if(!(/^((http:)|(https:)|(file:)|(vscode-file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){const o=e.lastIndexOf("?"),r=e.lastIndexOf("#",o),a=o>0?new URLSearchParams(e.substring(o+1,~r?r:void 0)):new URLSearchParams;$M.addSearchParam(a,!0,!0),a.toString()?e=`${e}?${a.toString()}#${s}`:e=`${e}#${s}`}const i=new Blob([ea([`/*${s}*/`,void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(vj())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(y3())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`await import(ttPolicy?.createScriptURL('${e}') ?? '${e}');`,"globalThis.postMessage({ type: 'vscode-worker-ready' });",`/*${s}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(i)}function Poe(s){return new Promise((e,t)=>{s.onmessage=function(n){n.data.type==="vscode-worker-ready"&&(s.onmessage=null,e(s))},s.onerror=t})}function Ooe(s){return typeof s.then=="function"}class Foe extends F{constructor(e,t,n,i,o,r){super(),this.id=n,this.label=i;const a=Moe(e,i);Ooe(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(t,[]),this.worker.then(l=>{l.onmessage=function(c){o(c.data)},l.onmessageerror=r,typeof l.addEventListener=="function"&&l.addEventListener("error",r)}),this._register(ve(()=>{var l;(l=this.worker)==null||l.then(c=>{c.onmessage=null,c.onmessageerror=null,c.removeEventListener("error",r),c.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){var n;(n=this.worker)==null||n.then(i=>{try{i.postMessage(e,t)}catch(o){Pe(o),Pe(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:o}))}})}}class Woe{constructor(e,t){this.amdModuleId=e,this.label=t,this.esmModuleLocation=mT.asBrowserUri(`${e}.esm.js`)}}const MD=class MD{constructor(){this._webWorkerFailedBeforeError=!1}create(e,t,n){const i=++MD.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new Foe(e.esmModuleLocation,e.amdModuleId,i,e.label||"anonymous"+i,t,o=>{XM(o),this._webWorkerFailedBeforeError=o,n(o)})}};MD.LAST_WORKER_ID=0;let QM=MD;function Boe(s,e){const t=typeof s=="string"?new Woe(s,e):s;return new Roe(new QM,t)}var Vn;(function(s){s[s.None=0]="None",s[s.Indent=1]="Indent",s[s.IndentOutdent=2]="IndentOutdent",s[s.Outdent=3]="Outdent"})(Vn||(Vn={}));class EN{constructor(e){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;const n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){const i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}class Hoe{constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const t of e)Tv(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),Tv(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),Tv(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),Tv(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&Tv(this.autoClosingPairsCloseSingleChar,t.close,t)}}function Tv(s,e,t){s.has(e)?s.get(e).push(t):s.set(e,[t])}const i_=class i_{constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new EN(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new EN({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){const t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new EN({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:i_.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:i_.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};i_.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`,i_.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;let JM=i_;function Tf(s,e){const t=s.getCount(),n=s.findTokenIndexAtOffset(e),i=s.getLanguageId(n);let o=n;for(;o+1<t&&s.getLanguageId(o+1)===i;)o++;let r=n;for(;r>0&&s.getLanguageId(r-1)===i;)r--;return new Voe(s,i,r,o+1,s.getStartOffset(r),s.getEndOffset(o))}class Voe{constructor(e,t,n,i,o,r){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=i,this.firstCharOffset=o,this._lastCharOffset=r,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}function ml(s){return(s&3)!==0}const T8=typeof Buffer<"u";let NN;class NT{static wrap(e){return T8&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new NT(e)}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}toString(){return T8?this.buffer.toString():(NN||(NN=new TextDecoder),NN.decode(this.buffer))}}function zoe(s,e){return s[e+0]<<0>>>0|s[e+1]<<8>>>0}function $oe(s,e,t){s[t+0]=e&255,e=e>>>8,s[t+1]=e&255}function ya(s,e){return s[e]*2**24+s[e+1]*2**16+s[e+2]*2**8+s[e+3]}function Sa(s,e,t){s[t+3]=e,e=e>>>8,s[t+2]=e,e=e>>>8,s[t+1]=e,e=e>>>8,s[t]=e}function E8(s,e){return s[e]}function N8(s,e,t){s[t]=e}let RN;function Bq(){return RN||(RN=new TextDecoder("UTF-16LE")),RN}let MN;function Uoe(){return MN||(MN=new TextDecoder("UTF-16BE")),MN}let AN;function Hq(){return AN||(AN=Lj()?Bq():Uoe()),AN}function joe(s,e,t){const n=new Uint16Array(s.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?qoe(s,e,t):Bq().decode(n)}function qoe(s,e,t){const n=[];let i=0;for(let o=0;o<t;o++){const r=zoe(s,e);e+=2,n[i++]=String.fromCharCode(r)}return n.join("")}class Qb{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return Hq().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||ni(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class Uk{constructor(e,t,n,i,o,r){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=o,this.reversedRegex=r,this._openSet=Uk._toSet(this.open),this._closeSet=Uk._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function Koe(s){const e=s.length;s=s.map(r=>[r[0].toLowerCase(),r[1].toLowerCase()]);const t=[];for(let r=0;r<e;r++)t[r]=r;const n=(r,a)=>{const[l,c]=r,[d,h]=a;return l===d||l===h||c===d||c===h},i=(r,a)=>{const l=Math.min(r,a),c=Math.max(r,a);for(let d=0;d<e;d++)t[d]===c&&(t[d]=l)};for(let r=0;r<e;r++){const a=s[r];for(let l=r+1;l<e;l++){const c=s[l];n(a,c)&&i(t[r],t[l])}}const o=[];for(let r=0;r<e;r++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===r){const[d,h]=s[c];a.push(d),l.push(h)}a.length>0&&o.push({open:a,close:l})}return o}class Goe{constructor(e,t){this._richEditBracketsBrand=void 0;const n=Koe(t);this.brackets=n.map((i,o)=>new Uk(e,o,i.open,i.close,Zoe(i.open,i.close,n,o),Yoe(i.open,i.close,n,o))),this.forwardRegex=Xoe(this.brackets),this.reversedRegex=Qoe(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const i of this.brackets){for(const o of i.open)this.textIsBracket[o]=i,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(const o of i.close)this.textIsBracket[o]=i,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}}function Vq(s,e,t,n){for(let i=0,o=e.length;i<o;i++){if(i===t)continue;const r=e[i];for(const a of r.open)a.indexOf(s)>=0&&n.push(a);for(const a of r.close)a.indexOf(s)>=0&&n.push(a)}}function zq(s,e){return s.length-e.length}function RT(s){if(s.length<=1)return s;const e=[],t=new Set;for(const n of s)t.has(n)||(e.push(n),t.add(n));return e}function Zoe(s,e,t,n){let i=[];i=i.concat(s),i=i.concat(e);for(let o=0,r=i.length;o<r;o++)Vq(i[o],t,n,i);return i=RT(i),i.sort(zq),i.reverse(),C0(i)}function Yoe(s,e,t,n){let i=[];i=i.concat(s),i=i.concat(e);for(let o=0,r=i.length;o<r;o++)Vq(i[o],t,n,i);return i=RT(i),i.sort(zq),i.reverse(),C0(i.map(Q3))}function Xoe(s){let e=[];for(const t of s){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=RT(e),C0(e)}function Qoe(s){let e=[];for(const t of s){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=RT(e),C0(e.map(Q3))}function Joe(s){const e=/^[\w ]+$/.test(s);return s=Xo(s),e?`\\b${s}\\b`:s}function C0(s,e){const t=`(${s.map(Joe).join(")|(")})`;return Zj(t,!0,e)}const Q3=function(){function s(n){const i=new Uint16Array(n.length);let o=0;for(let r=n.length-1;r>=0;r--)i[o++]=n.charCodeAt(r);return Hq().decode(i)}let e=null,t=null;return function(i){return e!==i&&(e=i,t=s(e)),t}}();class Wr{static _findPrevBracketInText(e,t,n,i){const o=n.match(e);if(!o)return null;const r=n.length-(o.index||0),a=o[0].length,l=i+r;return new L(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,o){const a=Q3(n).substring(n.length-o,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){const o=n.match(e);if(!o)return null;const r=o.index||0,a=o[0].length;if(a===0)return null;const l=i+r;return new L(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,o){const r=n.substring(i,o);return this.findNextBracketInText(e,t,r,i)}}class ere{constructor(e){this._richEditBrackets=e}getElectricCharacters(){const e=[];if(this._richEditBrackets)for(const t of this._richEditBrackets.brackets)for(const n of t.close){const i=n.charAt(n.length-1);e.push(i)}return fd(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const i=t.findTokenIndexAtOffset(n-1);if(ml(t.getStandardTokenType(i)))return null;const o=this._richEditBrackets.reversedRegex,r=t.getLineContent().substring(0,n-1)+e,a=Wr.findPrevBracketInRange(o,1,r,0,r.length);if(!a)return null;const l=r.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;const d=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(d)?{matchOpenBracket:l}:null}}function wy(s){return s.global&&(s.lastIndex=0),!0}class tre{constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&wy(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&wy(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&wy(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&wy(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}}class Rp{constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{const n=Rp._createOpenBracketRegExp(t[0]),i=Rp._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let o=0,r=this._regExpRules.length;o<r;o++){const a=this._regExpRules[o];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let o=0,r=this._brackets.length;o<r;o++){const a=this._brackets[o];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:Vn.IndentOutdent}}if(e>=2&&n.length>0){for(let o=0,r=this._brackets.length;o<r;o++)if(this._brackets[o].openRegExp.test(n))return{indentAction:Vn.Indent}}return null}static _createOpenBracketRegExp(e){let t=Xo(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",Rp._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Xo(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,Rp._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Pe(t),null}}}const Ze=tt("configurationService");function eA(s,e){const t=Object.create(null);for(const n in s)$q(t,n,s[n],e);return t}function $q(s,e,t,n){const i=e.split("."),o=i.pop();let r=s;for(let a=0;a<i.length;a++){const l=i[a];let c=r[l];switch(typeof c){case"undefined":c=r[l]=Object.create(null);break;case"object":if(c===null){n(`Ignoring ${e} as ${i.slice(0,a+1).join(".")} is null`);return}break;default:n(`Ignoring ${e} as ${i.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}r=c}if(typeof r=="object"&&r!==null)try{r[o]=t}catch{n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(r)}`)}else n(`Ignoring ${e} as ${i.join(".")} is ${JSON.stringify(r)}`)}function nre(s,e){const t=e.split(".");Uq(s,t)}function Uq(s,e){const t=e.shift();if(e.length===0){delete s[t];return}if(Object.keys(s).indexOf(t)!==-1){const n=s[t];typeof n=="object"&&!Array.isArray(n)&&(Uq(n,e),Object.keys(n).length===0&&delete s[t])}}function R8(s,e,t){function n(r,a){let l=r;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const i=e.split("."),o=n(s,i);return typeof o>"u"?t:o}function ire(s){return s.replace(/[\[\]]/g,"")}const tn=tt("languageService");class Tl{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const jq=[];function st(s,e,t){e instanceof Tl||(e=new Tl(e,[],!!t)),jq.push([s,e])}function M8(){return jq}const yn=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),MT={JSONContribution:"base.contributions.json"};function sre(s){return s.length>0&&s.charAt(s.length-1)==="#"?s.substring(0,s.length-1):s}class ore{constructor(){this._onDidChangeSchema=new O,this.schemasById={}}registerSchema(e,t){this.schemasById[sre(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}}const rre=new ore;ln.add(MT.JSONContribution,rre);const ca={Configuration:"base.contributions.configuration"},Ev="vscode://schemas/settings/resourceLanguage",A8=ln.as(MT.JSONContribution);class are{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new O,this._onDidUpdateConfiguration=new O,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:m("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},A8.registerSchema(Ev,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const n=new Set;this.doRegisterConfigurations(e,t,n),A8.registerSchema(Ev,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const n=[];for(const{overrides:i,source:o}of e)for(const r in i){t.add(r);const a=this.configurationDefaultsOverrides.get(r)??this.configurationDefaultsOverrides.set(r,{configurationDefaultOverrides:[]}).get(r),l=i[r];if(a.configurationDefaultOverrides.push({value:l,source:o}),cu.test(r)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(r,l,o,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(r,c,o),n.push(...jk(r))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(r,l,o,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const d=this.configurationProperties[r];d&&(this.updatePropertyDefaultValue(r,d),this.updateSchema(r,d))}}this.doRegisterOverrideIdentifiers(n)}updateDefaultOverrideProperty(e,t,n){const i={type:"object",default:t.value,description:m("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",ire(e)),$ref:Ev,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=i,this.defaultLanguageConfigurationOverridesNode.properties[e]=i}mergeDefaultConfigurationsForOverrideIdentifier(e,t,n,i){const o=(i==null?void 0:i.value)||{},r=(i==null?void 0:i.source)??new Map;if(!(r instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(fi(l)&&(ls(o[a])||fi(o[a]))){if(o[a]={...o[a]??{},...l},n)for(const d in l)r.set(`${a}.${d}`,n)}else o[a]=l,n?r.set(a,n):r.delete(a)}return{value:o,source:r}}mergeDefaultConfigurationsForConfigurationProperty(e,t,n,i){const o=this.configurationProperties[e],r=(i==null?void 0:i.value)??(o==null?void 0:o.defaultDefaultValue);let a=n;if(fi(t)&&(o!==void 0&&o.type==="object"||o===void 0&&(ls(r)||fi(r)))){if(a=(i==null?void 0:i.source)??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)n&&a.set(`${e}.${c}`,n);t={...fi(r)?r:{},...t}}return{value:t,source:a}}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(i=>{this.validateAndRegisterProperties(i,t,i.extensionInfo,i.restrictedProperties,void 0,n),this.configurationContributors.push(i),this.registerJSONConfiguration(i)})}validateAndRegisterProperties(e,t=!0,n,i,o=3,r){var c;o=Bo(e.scope)?o:e.scope;const a=e.properties;if(a)for(const d in a){const h=a[d];if(t&&dre(d,h)){delete a[d];continue}if(h.source=n,h.defaultDefaultValue=a[d].default,this.updatePropertyDefaultValue(d,h),cu.test(d)?h.scope=void 0:(h.scope=Bo(h.scope)?o:h.scope,h.restricted=Bo(h.restricted)?!!(i!=null&&i.includes(d)):h.restricted),a[d].hasOwnProperty("included")&&!a[d].included){this.excludedConfigurationProperties[d]=a[d],delete a[d];continue}else this.configurationProperties[d]=a[d],(c=a[d].policy)!=null&&c.name&&this.policyConfigurations.set(a[d].policy.name,d);!a[d].deprecationMessage&&a[d].markdownDeprecationMessage&&(a[d].deprecationMessage=a[d].markdownDeprecationMessage),r.add(d)}const l=e.allOf;if(l)for(const d of l)this.validateAndRegisterProperties(d,t,n,i,o,r)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(e){const t=n=>{const i=n.properties;if(i)for(const r in i)this.updateSchema(r,i[r]);const o=n.allOf;o==null||o.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:m("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:m("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Ev};this.updatePropertyDefaultValue(t,n)}}registerOverridePropertyPatternKey(){m("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),m("overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){var r;const n=(r=this.configurationDefaultsOverrides.get(e))==null?void 0:r.configurationDefaultOverrideValue;let i,o;n&&(!t.disallowConfigurationDefault||!n.source)&&(i=n.value,o=n.source),ls(i)&&(i=t.defaultDefaultValue,o=void 0),ls(i)&&(i=cre(t.type)),t.default=i,t.defaultValueSource=o}}const qq="\\[([^\\]]+)\\]",P8=new RegExp(qq,"g"),lre=`^(${qq})+$`,cu=new RegExp(lre);function jk(s){const e=[];if(cu.test(s)){let t=P8.exec(s);for(;t!=null&&t.length;){const n=t[1].trim();n&&e.push(n),t=P8.exec(s)}}return fd(e)}function cre(s){switch(Array.isArray(s)?s[0]:s){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const AS=new are;ln.add(ca.Configuration,AS);function dre(s,e){var t,n,i,o;return s.trim()?cu.test(s)?m("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",s):AS.getConfigurationProperties()[s]!==void 0?m("config.property.duplicate","Cannot register '{0}'. This property is already registered.",s):(t=e.policy)!=null&&t.name&&AS.getPolicyConfigurations().get((n=e.policy)==null?void 0:n.name)!==void 0?m("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",s,(i=e.policy)==null?void 0:i.name,AS.getPolicyConfigurations().get((o=e.policy)==null?void 0:o.name)):null:m("config.property.empty","Cannot register an empty property")}const hre={ModesRegistry:"editor.modesRegistry"};class ure{constructor(){this._onDidChangeLanguages=new O,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const ab=new ure;ln.add(hre.ModesRegistry,ab);const xs="plaintext",fre=".txt";ab.registerLanguage({id:xs,extensions:[fre],aliases:[m("plainText.alias","Plain Text"),"text"],mimetypes:[yn.text]});ln.as(ca.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);class gre{constructor(e,t){this.languageId=e;const n=t.brackets?O8(t.brackets):[],i=new o8(a=>{const l=new Set;return{info:new mre(this,a,l),closing:l}}),o=new o8(a=>{const l=new Set,c=new Set;return{info:new pre(this,a,l,c),opening:l,openingColorized:c}});for(const[a,l]of n){const c=i.get(a),d=o.get(l);c.closing.add(d.info),d.opening.add(c.info)}const r=t.colorizedBracketPairs?O8(t.colorizedBracketPairs):n.filter(a=>!(a[0]==="<"&&a[1]===">"));for(const[a,l]of r){const c=i.get(a),d=o.get(l);c.closing.add(d.info),d.openingColorized.add(c.info),d.opening.add(c.info)}this._openingBrackets=new Map([...i.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...o.cachedValues].map(([a,l])=>[a,l.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){const t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return C0(t,e)}}function O8(s){return s.filter(([e,t])=>e!==""&&t!=="")}class Kq{constructor(e,t){this.config=e,this.bracketText=t}get languageId(){return this.config.languageId}}class mre extends Kq{constructor(e,t,n){super(e,t),this.openedBrackets=n,this.isOpeningBracket=!0}}class pre extends Kq{constructor(e,t,n,i){super(e,t),this.openingBrackets=n,this.openingColorizedBrackets=i,this.isOpeningBracket=!1}closes(e){return e.config!==this.config?!1:this.openingBrackets.has(e)}closesColorized(e){return e.config!==this.config?!1:this.openingColorizedBrackets.has(e)}getOpeningBrackets(){return[...this.openingBrackets]}}var _re=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},F8=function(s,e){return function(t,n){e(t,n,s)}};class PN{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}}const cn=tt("languageConfigurationService");let tA=class extends F{constructor(e,t){super(),this.configurationService=e,this.languageService=t,this._registry=this._register(new wre),this.onDidChangeEmitter=this._register(new O),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const n=new Set(Object.values(nA));this._register(this.configurationService.onDidChangeConfiguration(i=>{const o=i.change.keys.some(a=>n.has(a)),r=i.change.overrides.filter(([a,l])=>l.some(c=>n.has(c))).map(([a])=>a);if(o)this.configurations.clear(),this.onDidChangeEmitter.fire(new PN(void 0));else for(const a of r)this.languageService.isRegisteredLanguageId(a)&&(this.configurations.delete(a),this.onDidChangeEmitter.fire(new PN(a)))})),this._register(this._registry.onDidChange(i=>{this.configurations.delete(i.languageId),this.onDidChangeEmitter.fire(new PN(i.languageId))}))}register(e,t,n){return this._registry.register(e,t,n)}getLanguageConfiguration(e){let t=this.configurations.get(e);return t||(t=bre(e,this._registry,this.configurationService,this.languageService),this.configurations.set(e,t)),t}};tA=_re([F8(0,Ze),F8(1,tn)],tA);function bre(s,e,t,n){let i=e.getLanguageConfiguration(s);if(!i){if(!n.isRegisteredLanguageId(s))return new w_(s,{});i=new w_(s,{})}const o=vre(i.languageId,t),r=Zq([i.underlyingConfig,o]);return new w_(i.languageId,r)}const nA={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function vre(s,e){const t=e.getValue(nA.brackets,{overrideIdentifier:s}),n=e.getValue(nA.colorizedBracketPairs,{overrideIdentifier:s});return{brackets:W8(t),colorizedBracketPairs:W8(n)}}function W8(s){if(Array.isArray(s))return s.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function Gq(s,e,t){const n=s.getLineContent(e);let i=Rt(n);return i.length>t-1&&(i=i.substring(0,t-1)),i}class Cre{constructor(e){this.languageId=e,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(e,t){const n=new B8(e,t,++this._order);return this._entries.push(n),this._resolved=null,ve(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const e=this._resolve();e&&(this._resolved=new w_(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(B8.cmp),Zq(this._entries.map(e=>e.configuration)))}}function Zq(s){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const t of s)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}class B8{constructor(e,t,n){this.configuration=e,this.priority=t,this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}}class H8{constructor(e){this.languageId=e}}class wre extends F{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new O),this.onDidChange=this._onDidChange.event,this._register(this.register(xs,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let i=this._entries.get(e);i||(i=new Cre(e),this._entries.set(e,i));const o=i.register(t,n);return this._onDidChange.fire(new H8(e)),ve(()=>{o.dispose(),this._onDidChange.fire(new H8(e))})}getLanguageConfiguration(e){const t=this._entries.get(e);return(t==null?void 0:t.getResolvedConfiguration())||null}}class w_{constructor(e,t){this.languageId=e,this.underlyingConfig=t,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new Rp(this.underlyingConfig):null,this.comments=w_._handleComments(this.underlyingConfig),this.characterPair=new JM(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||L3,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new tre(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new gre(e,this.underlyingConfig)}getWordDefinition(){return x3(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new Goe(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new ere(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}getAutoClosingPairs(){return new Hoe(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){const t=e.comments;if(!t)return null;const n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){const[i,o]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=o}return n}}st(cn,tA,1);class Gd{constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class V8{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,i=e.length;n<i;n++)t[n]=e.charCodeAt(n);return t}}function yre(s,e,t){return new Ml(new V8(s),new V8(e)).ComputeDiff(t).changes}class Jm{static Assert(e,t){if(!e)throw new Error(t)}}class ep{static Copy(e,t,n,i,o){for(let r=0;r<o;r++)n[i+r]=e[t+r]}static Copy2(e,t,n,i,o){for(let r=0;r<o;r++)n[i+r]=e[t+r]}}class z8{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Gd(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class Ml{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[i,o,r]=Ml._getElements(e),[a,l,c]=Ml._getElements(t);this._hasStrings=r&&c,this._originalStringElements=i,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(Ml._isStringArray(t)){const n=new Int32Array(t.length);for(let i=0,o=t.length;i<o;i++)n[i]=$3(t[i],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=Ml._getStrictElement(this._originalSequence,e),i=Ml._getStrictElement(this._modifiedSequence,t);return n===i}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,o){const r=[!1];let a=this.ComputeDiffRecursive(e,t,n,i,r);return o&&(a=this.PrettifyChanges(a)),{quitEarly:r[0],changes:a}}ComputeDiffRecursive(e,t,n,i,o){for(o[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let h;return n<=i?(Jm.Assert(e===t+1,"originalStart should only be one more than originalEnd"),h=[new Gd(e,0,n,i-n+1)]):e<=t?(Jm.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[new Gd(e,t-e+1,n,0)]):(Jm.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Jm.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),h=[]),h}const r=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,i,r,a,o),c=r[0],d=a[0];if(l!==null)return l;if(!o[0]){const h=this.ComputeDiffRecursive(e,c,n,d,o);let u=[];return o[0]?u=[new Gd(c+1,t-(c+1)+1,d+1,i-(d+1)+1)]:u=this.ComputeDiffRecursive(c+1,t,d+1,i,o),this.ConcatenateChanges(h,u)}return[new Gd(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,o,r,a,l,c,d,h,u,f,g,p,_,b,v){let C=null,w=null,y=new z8,k=t,x=n,D=f[0]-_[0]-i,N=-1073741824,W=this.m_forwardHistory.length-1;do{const B=D+e;B===k||B<x&&c[B-1]<c[B+1]?(h=c[B+1],g=h-D-i,h<N&&y.MarkNextChange(),N=h,y.AddModifiedElement(h+1,g),D=B+1-e):(h=c[B-1]+1,g=h-D-i,h<N&&y.MarkNextChange(),N=h-1,y.AddOriginalElement(h,g+1),D=B-1-e),W>=0&&(c=this.m_forwardHistory[W],e=c[0],k=1,x=c.length-1)}while(--W>=-1);if(C=y.getReverseChanges(),v[0]){let B=f[0]+1,z=_[0]+1;if(C!==null&&C.length>0){const U=C[C.length-1];B=Math.max(B,U.getOriginalEnd()),z=Math.max(z,U.getModifiedEnd())}w=[new Gd(B,u-B+1,z,p-z+1)]}else{y=new z8,k=r,x=a,D=f[0]-_[0]-l,N=1073741824,W=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const B=D+o;B===k||B<x&&d[B-1]>=d[B+1]?(h=d[B+1]-1,g=h-D-l,h>N&&y.MarkNextChange(),N=h+1,y.AddOriginalElement(h+1,g+1),D=B+1-o):(h=d[B-1],g=h-D-l,h>N&&y.MarkNextChange(),N=h,y.AddModifiedElement(h+1,g+1),D=B-1-o),W>=0&&(d=this.m_reverseHistory[W],o=d[0],k=1,x=d.length-1)}while(--W>=-1);w=y.getChanges()}return this.ConcatenateChanges(C,w)}ComputeRecursionPoint(e,t,n,i,o,r,a){let l=0,c=0,d=0,h=0,u=0,f=0;e--,n--,o[0]=0,r[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const g=t-e+(i-n),p=g+1,_=new Int32Array(p),b=new Int32Array(p),v=i-n,C=t-e,w=e-n,y=t-i,x=(C-v)%2===0;_[v]=e,b[C]=t,a[0]=!1;for(let D=1;D<=g/2+1;D++){let N=0,W=0;d=this.ClipDiagonalBound(v-D,D,v,p),h=this.ClipDiagonalBound(v+D,D,v,p);for(let z=d;z<=h;z+=2){z===d||z<h&&_[z-1]<_[z+1]?l=_[z+1]:l=_[z-1]+1,c=l-(z-v)-w;const U=l;for(;l<t&&c<i&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(_[z]=l,l+c>N+W&&(N=l,W=c),!x&&Math.abs(z-C)<=D-1&&l>=b[z])return o[0]=l,r[0]=c,U<=b[z]&&D<=1448?this.WALKTRACE(v,d,h,w,C,u,f,y,_,b,l,t,o,c,i,r,x,a):null}const B=(N-e+(W-n)-D)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(N,B))return a[0]=!0,o[0]=N,r[0]=W,B>0&&D<=1448?this.WALKTRACE(v,d,h,w,C,u,f,y,_,b,l,t,o,c,i,r,x,a):(e++,n++,[new Gd(e,t-e+1,n,i-n+1)]);u=this.ClipDiagonalBound(C-D,D,C,p),f=this.ClipDiagonalBound(C+D,D,C,p);for(let z=u;z<=f;z+=2){z===u||z<f&&b[z-1]>=b[z+1]?l=b[z+1]-1:l=b[z-1],c=l-(z-C)-y;const U=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(b[z]=l,x&&Math.abs(z-v)<=D&&l<=_[z])return o[0]=l,r[0]=c,U>=_[z]&&D<=1448?this.WALKTRACE(v,d,h,w,C,u,f,y,_,b,l,t,o,c,i,r,x,a):null}if(D<=1447){let z=new Int32Array(h-d+2);z[0]=v-d+1,ep.Copy2(_,d,z,1,h-d+1),this.m_forwardHistory.push(z),z=new Int32Array(f-u+2),z[0]=C-u+1,ep.Copy2(b,u,z,1,f-u+1),this.m_reverseHistory.push(z)}}return this.WALKTRACE(v,d,h,w,C,u,f,y,_,b,l,t,o,c,i,r,x,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,r=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<o&&(!r||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let i=0,o=0;if(t>0){const h=e[t-1];i=h.originalStart+h.originalLength,o=h.modifiedStart+h.modifiedLength}const r=n.originalLength>0,a=n.modifiedLength>0;let l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let h=1;;h++){const u=n.originalStart-h,f=n.modifiedStart-h;if(u<i||f<o||r&&!this.OriginalElementsAreEqual(u,u+n.originalLength)||a&&!this.ModifiedElementsAreEqual(f,f+n.modifiedLength))break;const p=(u===i&&f===o?5:0)+this._boundaryScore(u,n.originalLength,f,n.modifiedLength);p>c&&(c=p,l=h)}n.originalStart-=l,n.modifiedStart-=l;const d=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],d)){e[t-1]=d[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const i=e[t-1],o=e[t],r=o.originalStart-i.originalStart-i.originalLength,a=i.originalStart,l=o.originalStart+o.originalLength,c=l-a,d=i.modifiedStart,h=o.modifiedStart+o.modifiedLength,u=h-d;if(r<5&&c<20&&u<20){const f=this._findBetterContiguousSequence(a,c,d,u,r);if(f){const[g,p]=f;(g!==i.originalStart+i.originalLength||p!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=g-i.originalStart,i.modifiedLength=p-i.modifiedStart,o.originalStart=g+r,o.modifiedStart=p+r,o.originalLength=l-o.originalStart,o.modifiedLength=h-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,o){if(t<o||i<o)return null;const r=e+t-o+1,a=n+i-o+1;let l=0,c=0,d=0;for(let h=e;h<r;h++)for(let u=n;u<a;u++){const f=this._contiguousSequenceScore(h,u,o);f>0&&f>l&&(l=f,c=h,d=u)}return l>0?[c,d]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let o=0;o<n;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;i+=this._originalStringElements[e+o].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){const o=this._OriginalRegionIsBoundary(e,t)?1:0,r=this._ModifiedRegionIsBoundary(n,i)?1:0;return o+r}ConcatenateChanges(e,t){const n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const i=new Array(e.length+t.length-1);return ep.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],ep.Copy(t,1,i,e.length,t.length-1),i}else{const i=new Array(e.length+t.length);return ep.Copy(e,0,i,0,e.length),ep.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,n){if(Jm.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Jm.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const i=e.originalStart;let o=e.originalLength;const r=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Gd(i,o,r,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;const o=n,r=i-n-1,a=t%2===0;if(e<0){const l=o%2===0;return a===l?0:1}else{const l=r%2===0;return a===l?i-1:i-2}}}function qk(s){return s<0?0:s>255?255:s|0}function tp(s){return s<0?0:s>4294967295?4294967295:s|0}class Jb{constructor(e){const t=qk(e);this._defaultValue=t,this._asciiMap=Jb._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const n=qk(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class Kk{constructor(){this._actual=new Jb(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}clear(){return this._actual.clear()}}class Sre{constructor(e,t,n){const i=new Uint8Array(e*t);for(let o=0,r=e*t;o<r;o++)i[o]=n;this._data=i,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class kre{constructor(e){let t=0,n=0;for(let o=0,r=e.length;o<r;o++){const[a,l,c]=e[o];l>t&&(t=l),a>n&&(n=a),c>n&&(n=c)}t++,n++;const i=new Sre(n,t,0);for(let o=0,r=e.length;o<r;o++){const[a,l,c]=e[o];i.set(a,l,c)}this._states=i,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let ON=null;function Lre(){return ON===null&&(ON=new kre([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),ON}let Nv=null;function xre(){if(Nv===null){Nv=new Jb(0);const s=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<s.length;t++)Nv.set(s.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)Nv.set(e.charCodeAt(t),2)}return Nv}class Gk{static _createLink(e,t,n,i,o){let r=o-1;do{const a=t.charCodeAt(r);if(e.get(a)!==2)break;r--}while(r>i);if(i>0){const a=t.charCodeAt(i-1),l=t.charCodeAt(r);(a===40&&l===41||a===91&&l===93||a===123&&l===125)&&r--}return{range:{startLineNumber:n,startColumn:i+1,endLineNumber:n,endColumn:r+2},url:t.substring(i,r+1)}}static computeLinks(e,t=Lre()){const n=xre(),i=[];for(let o=1,r=e.getLineCount();o<=r;o++){const a=e.getLineContent(o),l=a.length;let c=0,d=0,h=0,u=1,f=!1,g=!1,p=!1,_=!1;for(;c<l;){let b=!1;const v=a.charCodeAt(c);if(u===13){let C;switch(v){case 40:f=!0,C=0;break;case 41:C=f?0:1;break;case 91:p=!0,g=!0,C=0;break;case 93:p=!1,C=g?0:1;break;case 123:_=!0,C=0;break;case 125:C=_?0:1;break;case 39:case 34:case 96:h===v?C=1:h===39||h===34||h===96?C=0:C=1;break;case 42:C=h===42?1:0;break;case 124:C=h===124?1:0;break;case 32:C=p?0:1;break;default:C=n.get(v)}C===1&&(i.push(Gk._createLink(n,a,o,d,c)),b=!0)}else if(u===12){let C;v===91?(g=!0,C=0):C=n.get(v),C===1?b=!0:u=13}else u=t.nextState(u,v),u===0&&(b=!0);b&&(u=1,f=!1,g=!1,_=!1,d=c+1,h=v),c++}u===13&&i.push(Gk._createLink(n,a,o,d,l))}return i}}function Dre(s){return!s||typeof s.getLineCount!="function"||typeof s.getLineContent!="function"?[]:Gk.computeLinks(s)}const AD=class AD{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}navigateValueSet(e,t,n,i,o){if(e&&t){const r=this.doNavigateValueSet(t,o);if(r)return{range:e,value:r}}if(n&&i){const r=this.doNavigateValueSet(i,o);if(r)return{range:n,value:r}}return null}doNavigateValueSet(e,t){const n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){const n=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let i=Number(e);const o=parseFloat(e);return!isNaN(i)&&!isNaN(o)&&i===o?i===0&&!t?null:(i=Math.floor(i*n),i+=t?n:-n,String(i/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let i=null;for(let o=0,r=e.length;i===null&&o<r;o++)i=this.valueSetReplace(e[o],t,n);return i}valueSetReplace(e,t,n){let i=e.indexOf(t);return i>=0?(i+=n?1:-1,i<0?i=e.length-1:i%=e.length,e[i]):null}};AD.INSTANCE=new AD;let iA=AD;const uw=class uw{static getChannel(e){return e.getChannel(uw.CHANNEL_NAME)}static setChannel(e,t){e.setChannel(uw.CHANNEL_NAME,t)}};uw.CHANNEL_NAME="editorWorkerHost";let sA=uw;var $8,U8;class Ire{constructor(e,t){this.uri=e,this.value=t}}function Tre(s){return Array.isArray(s)}const Sf=class Sf{constructor(e,t){if(this[$8]="ResourceMap",e instanceof Sf)this.map=new Map(e.map),this.toKey=t??Sf.defaultToKey;else if(Tre(e)){this.map=new Map,this.toKey=t??Sf.defaultToKey;for(const[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??Sf.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new Ire(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))==null?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[($8=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};Sf.defaultToKey=e=>e.toString();let mi=Sf;class Ere{constructor(){this[U8]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){const e=this,t=this._state;let n=this._head;const i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[(U8=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.previous,n--;this._tail=t,this._size=n,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class Nre extends Ere{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class ic extends Nre{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class Rre{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,n]of e)this.set(t,n)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}class J3{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}class Mre extends Jb{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let n=0,i=e.length;n<i;n++)this.set(e.charCodeAt(n),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let n=null;for(const i of this._getIntlSegmenterWordsOnLine(e)){if(i.index>t)break;n=i}return n}findNextIntlWordAtOrAfterOffset(e,t){for(const n of this._getIntlSegmenterWordsOnLine(e))if(!(n.index<t))return n;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const n of e)this._isWordLike(n)&&t.push(n);return t}_isWordLike(e){return!!e.isWordLike}}const j8=new ic(10);function Lr(s,e){const t=`${s}/${e.join(",")}`;let n=j8.get(t);return n||(n=new Mre(s,e),j8.set(t,n)),n}var Ko;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=4]="Right",s[s.Full=7]="Full"})(Ko||(Ko={}));var ia;(function(s){s[s.Left=1]="Left",s[s.Center=2]="Center",s[s.Right=3]="Right"})(ia||(ia={}));var Zr;(function(s){s[s.Both=0]="Both",s[s.Right=1]="Right",s[s.Left=2]="Left",s[s.None=3]="None"})(Zr||(Zr={}));class PS{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&po(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class $w{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}function Are(s){return s&&typeof s.read=="function"}class FN{constructor(e,t,n,i,o,r){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=i,this.isAutoWhitespaceEdit=o,this._isTracked=r}}class Pre{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}class Ore{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function Yq(s){return!s.isTooLargeForSyncing()&&!s.isForSimpleWidget}const Fre=999;class Xu{constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=Wre(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Zj(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new Pre(t,this.wordSeparators?Lr(this.wordSeparators,[]):null,n?this.searchString:null)}}function Wre(s){if(!s||s.length===0)return!1;for(let e=0,t=s.length;e<t;e++){const n=s.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;const i=s.charCodeAt(e);if(i===110||i===114||i===87)return!0}}return!1}function cf(s,e,t){if(!t)return new $w(s,null);const n=[];for(let i=0,o=e.length;i<o;i++)n[i]=e[i];return new $w(s,n)}class q8{constructor(e){const t=[];let n=0;for(let i=0,o=e.length;i<o;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){const o=n+((i-n)/2>>0);t[o]>=e?i=o-1:t[o+1]>=e?(n=o,i=o):n=o+1}return n+1}}class yy{static findMatches(e,t,n,i,o){const r=t.parseSearchRequest();return r?r.regex.multiline?this._doFindMatchesMultiline(e,n,new Mp(r.wordSeparators,r.regex),i,o):this._doFindMatchesLineByLine(e,n,r,i,o):[]}static _getMultilineMatchRange(e,t,n,i,o,r){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(o),a=t+o+l):a=t+o;let c;if(i){const f=i.findLineFeedCountBeforeOffset(o+r.length)-l;c=a+r.length+f}else c=a+r.length;const d=e.getPositionAt(a),h=e.getPositionAt(c);return new L(d.lineNumber,d.column,h.lineNumber,h.column)}static _doFindMatchesMultiline(e,t,n,i,o){const r=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new q8(a):null,c=[];let d=0,h;for(n.reset(0);h=n.next(a);)if(c[d++]=cf(this._getMultilineMatchRange(e,r,a,l,h.index,h[0]),h,i),d>=o)return c;return c}static _doFindMatchesLineByLine(e,t,n,i,o){const r=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,r,i,o),r}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,r,i,o);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<o;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,r,i,o);if(a<o){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,r,i,o)}return r}static _findMatchesInLine(e,t,n,i,o,r,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const u=e.simpleSearch,f=u.length,g=t.length;let p=-f;for(;(p=t.indexOf(u,p+f))!==-1;)if((!c||e9(c,t,g,p,f))&&(r[o++]=new $w(new L(n,p+1+i,n,p+1+f+i),null),o>=l))return o;return o}const d=new Mp(e.wordSeparators,e.regex);let h;d.reset(0);do if(h=d.next(t),h&&(r[o++]=cf(new L(n,h.index+1+i,n,h.index+1+h[0].length+i),h,a),o>=l))return o;while(h);return o}static findNextMatch(e,t,n,i){const o=t.parseSearchRequest();if(!o)return null;const r=new Mp(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,n,r,i):this._doFindNextMatchLineByLine(e,n,r,i)}static _doFindNextMatchMultiline(e,t,n,i){const o=new A(t.lineNumber,1),r=e.getOffsetAt(o),a=e.getLineCount(),l=e.getValueInRange(new L(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new q8(l):null;n.reset(t.column-1);const d=n.next(l);return d?cf(this._getMultilineMatchRange(e,r,l,c,d.index,d[0]),d,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new A(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r),l=this._findFirstMatchInLine(n,a,r,t.column,i);if(l)return l;for(let c=1;c<=o;c++){const d=(r+c-1)%o,h=e.getLineContent(d+1),u=this._findFirstMatchInLine(n,h,d+1,1,i);if(u)return u}return null}static _findFirstMatchInLine(e,t,n,i,o){e.reset(i-1);const r=e.next(t);return r?cf(new L(n,r.index+1,n,r.index+1+r[0].length),r,o):null}static findPreviousMatch(e,t,n,i){const o=t.parseSearchRequest();if(!o)return null;const r=new Mp(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,n,r,i):this._doFindPreviousMatchLineByLine(e,n,r,i)}static _doFindPreviousMatchMultiline(e,t,n,i){const o=this._doFindMatchesMultiline(e,new L(1,1,t.lineNumber,t.column),n,i,10*Fre);if(o.length>0)return o[o.length-1];const r=e.getLineCount();return t.lineNumber!==r||t.column!==e.getLineMaxColumn(r)?this._doFindPreviousMatchMultiline(e,new A(r,e.getLineMaxColumn(r)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){const o=e.getLineCount(),r=t.lineNumber,a=e.getLineContent(r).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,r,i);if(l)return l;for(let c=1;c<=o;c++){const d=(o+r-c-1)%o,h=e.getLineContent(d+1),u=this._findLastMatchInLine(n,h,d+1,i);if(u)return u}return null}static _findLastMatchInLine(e,t,n,i){let o=null,r;for(e.reset(0);r=e.next(t);)o=cf(new L(n,r.index+1,n,r.index+1+r[0].length),r,i);return o}}function Bre(s,e,t,n,i){if(n===0)return!0;const o=e.charCodeAt(n-1);if(s.get(o)!==0||o===13||o===10)return!0;if(i>0){const r=e.charCodeAt(n);if(s.get(r)!==0)return!0}return!1}function Hre(s,e,t,n,i){if(n+i===t)return!0;const o=e.charCodeAt(n+i);if(s.get(o)!==0||o===13||o===10)return!0;if(i>0){const r=e.charCodeAt(n+i-1);if(s.get(r)!==0)return!0}return!1}function e9(s,e,t,n,i){return Bre(s,e,t,n,i)&&Hre(s,e,t,n,i)}class Mp{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const i=n.index,o=n[0].length;if(i===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){Pk(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=o,!this._wordSeparators||e9(this._wordSeparators,e,t,i,o))return n}while(n);return null}}class t9{static computeUnicodeHighlights(e,t,n){const i=n?n.startLineNumber:1,o=n?n.endLineNumber:e.getLineCount(),r=new K8(t),a=r.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${Vre(Array.from(a))}`,"g");const c=new Mp(null,l),d=[];let h=!1,u,f=0,g=0,p=0;e:for(let _=i,b=o;_<=b;_++){const v=e.getLineContent(_),C=v.length;c.reset(0);do if(u=c.next(v),u){let w=u.index,y=u.index+u[0].length;if(w>0){const N=v.charCodeAt(w-1);ni(N)&&w--}if(y+1<C){const N=v.charCodeAt(y-1);ni(N)&&y++}const k=v.substring(w,y);let x=Rw(w+1,L3,v,0);x&&x.endColumn<=w+1&&(x=null);const D=r.shouldHighlightNonBasicASCII(k,x?x.word:null);if(D!==0){if(D===3?f++:D===2?g++:D===1?p++:TT(),d.length>=1e3){h=!0;break e}d.push(new L(_,w+1,_,y+1))}}while(u)}return{ranges:d,hasMore:h,ambiguousCharacterCount:f,invisibleCharacterCount:g,nonBasicAsciiCharacterCount:p}}static computeUnicodeHighlightReason(e,t){const n=new K8(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case 0:return null;case 2:return{kind:1};case 3:{const o=e.codePointAt(0),r=n.ambiguousCharacters.getPrimaryConfusable(o),a=Bw.getLocales().filter(l=>!Bw.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(o));return{kind:0,confusableWith:String.fromCodePoint(r),notAmbiguousInLocales:a}}case 1:return{kind:2}}}}function Vre(s,e){return`[${Xo(s.map(n=>String.fromCodePoint(n)).join(""))}]`}class K8{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=Bw.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of Ff.codePoints)G8(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return 0;if(this.options.nonBasicASCII)return 1;let i=!1,o=!1;if(t)for(const r of t){const a=r.codePointAt(0),l=p0(r);i=i||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!Ff.isInvisibleCharacter(a)&&(o=!0)}return!i&&o?0:this.options.invisibleCharacters&&!G8(e)&&Ff.isInvisibleCharacter(n)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?3:0}}function G8(s){return s===" "||s===`
`||s==="	"}class OS{constructor(e,t,n){this.changes=e,this.moves=t,this.hitTimeout=n}}class Xq{constructor(e,t){this.lineRangeMapping=e,this.changes=t}}class Ye{static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let i=n;for(;i<t.length&&t[i].start<=e.endExclusive;)i++;if(n===i)t.splice(n,0,e);else{const o=Math.min(e.start,t[n].start),r=Math.max(e.endExclusive,t[i-1].endExclusive);t.splice(n,i-n,new Ye(o,r))}}static tryCreate(e,t){if(!(e>t))return new Ye(e,t)}static ofLength(e){return new Ye(0,e)}static ofStartAndLength(e,t){return new Ye(e,e+t)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new _t(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new Ye(this.start+e,this.endExclusive+e)}deltaStart(e){return new Ye(this.start+e,this.endExclusive)}deltaEnd(e){return new Ye(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new Ye(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new Ye(t,n)}intersects(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new _t(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new _t(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}}class n9{constructor(){this._sortedRanges=[]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let n=t;for(;n<this._sortedRanges.length&&this._sortedRanges[n].start<=e.endExclusive;)n++;if(t===n)this._sortedRanges.splice(t,0,e);else{const i=Math.min(e.start,this._sortedRanges[t].start),o=Math.max(e.endExclusive,this._sortedRanges[n-1].endExclusive);this._sortedRanges.splice(t,n-t,new Ye(i,o))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new n9;for(const n of this._sortedRanges){const i=n.intersect(e);i&&t.addRange(i)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}function Uw(s,e){const t=zre(s,e);if(t!==-1)return s[t]}function zre(s,e,t=s.length-1){for(let n=t;n>=0;n--){const i=s[n];if(e(i))return n}return-1}function lb(s,e){const t=jw(s,e);return t===-1?void 0:s[t]}function jw(s,e,t=0,n=s.length){let i=t,o=n;for(;i<o;){const r=Math.floor((i+o)/2);e(s[r])?i=r+1:o=r}return i-1}function $re(s,e){const t=qw(s,e);return t===s.length?void 0:s[t]}function qw(s,e,t=0,n=s.length){let i=t,o=n;for(;i<o;){const r=Math.floor((i+o)/2);e(s[r])?o=r:i=r+1}return i}const PD=class PD{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(PD.assertInvariants){if(this._prevFindLastPredicate){for(const n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=jw(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}};PD.assertInvariants=!1;let Zk=PD;function i9(s,e){if(s.length===0)return;let t=s[0];for(let n=1;n<s.length;n++){const i=s[n];e(i,t)>0&&(t=i)}return t}function Ure(s,e){if(s.length===0)return;let t=s[0];for(let n=1;n<s.length;n++){const i=s[n];e(i,t)>=0&&(t=i)}return t}function jre(s,e){return i9(s,(t,n)=>-e(t,n))}function qre(s,e){if(s.length===0)return-1;let t=0;for(let n=1;n<s.length;n++){const i=s[n];e(i,s[t])>0&&(t=n)}return t}function Kre(s,e){for(const t of s){const n=e(t);if(n!==void 0)return n}}let ze=class Cc{static fromRangeInclusive(e){return new Cc(e.startLineNumber,e.endLineNumber+1)}static joinMany(e){if(e.length===0)return[];let t=new pr(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new pr(e[n].slice()));return t.ranges}static join(e){if(e.length===0)throw new _t("lineRanges cannot be empty");let t=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)t=Math.min(t,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new Cc(t,n)}static ofLength(e,t){return new Cc(e,e+t)}static deserialize(e){return new Cc(e[0],e[1])}constructor(e,t){if(e>t)throw new _t(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new Cc(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new Cc(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new Cc(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new Cc(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new L(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new L(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Ye(this.startLineNumber-1,this.endLineNumberExclusive-1)}};class pr{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=qw(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=jw(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){const i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{const i=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,i)}}contains(e){const t=lb(this._normalizedRanges,n=>n.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=lb(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let r=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){const a=this._normalizedRanges[n],l=e._normalizedRanges[i];a.startLineNumber<l.startLineNumber?(r=a,n++):(r=l,i++)}else n<this._normalizedRanges.length?(r=this._normalizedRanges[n],n++):(r=e._normalizedRanges[i],i++);o===null?o=r:o.endLineNumberExclusive>=r.startLineNumber?o=new ze(o.startLineNumber,Math.max(o.endLineNumberExclusive,r.endLineNumberExclusive)):(t.push(o),o=r)}return o!==null&&t.push(o),new pr(t)}subtractFrom(e){const t=qw(this._normalizedRanges,r=>r.endLineNumberExclusive>=e.startLineNumber),n=jw(this._normalizedRanges,r=>r.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)return new pr([e]);const i=[];let o=e.startLineNumber;for(let r=t;r<n;r++){const a=this._normalizedRanges[r];a.startLineNumber>o&&i.push(new ze(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new ze(o,e.endLineNumberExclusive)),new pr(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){const o=this._normalizedRanges[n],r=e._normalizedRanges[i],a=o.intersect(r);a&&!a.isEmpty&&t.push(a),o.endLineNumberExclusive<r.endLineNumberExclusive?n++:i++}return new pr(t)}getWithDelta(e){return new pr(this._normalizedRanges.map(t=>t.delta(e)))}}const eh=class eh{static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new eh(0,t.column-e.column):new eh(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return eh.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,n=0;for(const i of e)i===`
`?(t++,n=0):n++;return new eh(t,n)}constructor(e,t){this.lineCount=e,this.columnCount=t}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}createRange(e){return this.lineCount===0?new L(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new L(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new A(e.lineNumber,e.column+this.columnCount):new A(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};eh.zero=new eh(0,0);let sa=eh;class Gre{constructor(e){this.text=e,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Ye(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new sa(e,this.text.length-this.lineStartOffsetByLineIdx[e])}}class s9{constructor(e){this.edits=e,Jg(()=>Y3(e,(t,n)=>t.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}apply(e){let t="",n=new A(1,1);for(const o of this.edits){const r=o.range,a=r.getStartPosition(),l=r.getEndPosition(),c=Z8(n,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=o.text,n=l}const i=Z8(n,e.endPositionExclusive);return i.isEmpty()||(t+=e.getValueOfRange(i)),t}applyToString(e){const t=new Zre(e);return this.apply(t)}getNewRanges(){const e=[];let t=0,n=0,i=0;for(const o of this.edits){const r=sa.ofText(o.text),a=A.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===t?i:0)}),l=r.createRange(a);e.push(l),n=l.endLineNumber-o.range.endLineNumber,i=l.endColumn-o.range.endColumn,t=o.range.endLineNumber}return e}}class ql{constructor(e,t){this.range=e,this.text=t}toSingleEditOperation(){return{range:this.range,text:this.text}}}function Z8(s,e){if(s.lineNumber===e.lineNumber&&s.column===Number.MAX_SAFE_INTEGER)return L.fromPositions(e,e);if(!s.isBeforeOrEqual(e))throw new _t("start must be before end");return new L(s.lineNumber,s.column,e.lineNumber,e.column)}class Qq{get endPositionExclusive(){return this.length.addToPosition(new A(1,1))}}class Zre extends Qq{constructor(e){super(),this.value=e,this._t=new Gre(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class as{static inverse(e,t,n){const i=[];let o=1,r=1;for(const l of e){const c=new as(new ze(o,l.original.startLineNumber),new ze(r,l.modified.startLineNumber));c.modified.isEmpty||i.push(c),o=l.original.endLineNumberExclusive,r=l.modified.endLineNumberExclusive}const a=new as(new ze(o,t+1),new ze(r,n+1));return a.modified.isEmpty||i.push(a),i}static clip(e,t,n){const i=[];for(const o of e){const r=o.original.intersect(t),a=o.modified.intersect(n);r&&!r.isEmpty&&a&&!a.isEmpty&&i.push(new as(r,a))}return i}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new as(this.modified,this.original)}join(e){return new as(this.original.join(e.original),this.modified.join(e.modified))}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new Oo(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new _t("not a valid diff");return new Oo(new L(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new L(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Oo(new L(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new L(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(Y8(this.original.endLineNumberExclusive,e)&&Y8(this.modified.endLineNumberExclusive,t))return new Oo(new L(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new L(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Oo(L.fromPositions(new A(this.original.startLineNumber,1),np(new A(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),L.fromPositions(new A(this.modified.startLineNumber,1),np(new A(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Oo(L.fromPositions(np(new A(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),np(new A(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),L.fromPositions(np(new A(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),np(new A(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new _t}}function np(s,e){if(s.lineNumber<1)return new A(1,1);if(s.lineNumber>e.length)return new A(e.length,e[e.length-1].length+1);const t=e[s.lineNumber-1];return s.column>t.length+1?new A(s.lineNumber,t.length+1):s}function Y8(s,e){return s>=1&&s<=e.length}class Go extends as{static fromRangeMappings(e){const t=ze.join(e.map(i=>ze.fromRangeInclusive(i.originalRange))),n=ze.join(e.map(i=>ze.fromRangeInclusive(i.modifiedRange)));return new Go(t,n,e)}constructor(e,t,n){super(e,t),this.innerChanges=n}flip(){var e;return new Go(this.modified,this.original,(e=this.innerChanges)==null?void 0:e.map(t=>t.flip()))}withInnerChangesFromLineRanges(){return new Go(this.original,this.modified,[this.toRangeMapping()])}}class Oo{static assertSorted(e){for(let t=1;t<e.length;t++){const n=e[t-1],i=e[t];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new _t("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new Oo(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new ql(this.originalRange,t)}}const Yre=3;class Xre{computeDiff(e,t,n){var l;const o=new eae(e,t,{maxComputationTime:n.maxComputationTimeMs,shouldIgnoreTrimWhitespace:n.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),r=[];let a=null;for(const c of o.changes){let d;c.originalEndLineNumber===0?d=new ze(c.originalStartLineNumber+1,c.originalStartLineNumber+1):d=new ze(c.originalStartLineNumber,c.originalEndLineNumber+1);let h;c.modifiedEndLineNumber===0?h=new ze(c.modifiedStartLineNumber+1,c.modifiedStartLineNumber+1):h=new ze(c.modifiedStartLineNumber,c.modifiedEndLineNumber+1);let u=new Go(d,h,(l=c.charChanges)==null?void 0:l.map(f=>new Oo(new L(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn),new L(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===u.modified.startLineNumber||a.original.endLineNumberExclusive===u.original.startLineNumber)&&(u=new Go(a.original.join(u.original),a.modified.join(u.modified),a.innerChanges&&u.innerChanges?a.innerChanges.concat(u.innerChanges):void 0),r.pop()),r.push(u),a=u}return Jg(()=>Y3(r,(c,d)=>d.original.startLineNumber-c.original.endLineNumberExclusive===d.modified.startLineNumber-c.modified.endLineNumberExclusive&&c.original.endLineNumberExclusive<d.original.startLineNumber&&c.modified.endLineNumberExclusive<d.modified.startLineNumber)),new OS(r,[],o.quitEarly)}}function Jq(s,e,t,n){return new Ml(s,e,t).ComputeDiff(n)}let X8=class{constructor(e){const t=[],n=[];for(let i=0,o=e.length;i<o;i++)t[i]=oA(e[i],1),n[i]=rA(e[i],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const i=[],o=[],r=[];let a=0;for(let l=t;l<=n;l++){const c=this.lines[l],d=e?this._startColumns[l]:1,h=e?this._endColumns[l]:c.length+1;for(let u=d;u<h;u++)i[a]=c.charCodeAt(u-1),o[a]=l+1,r[a]=u,a++;!e&&l<n&&(i[a]=10,o[a]=l+1,r[a]=c.length+1,a++)}return new Qre(i,o,r)}};class Qre{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map((e,t)=>(e===10?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===10?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===10?1:this._columns[e]+1)}}class y_{constructor(e,t,n,i,o,r,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=i,this.modifiedStartLineNumber=o,this.modifiedStartColumn=r,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){const i=t.getStartLineNumber(e.originalStart),o=t.getStartColumn(e.originalStart),r=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=n.getStartLineNumber(e.modifiedStart),c=n.getStartColumn(e.modifiedStart),d=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),h=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new y_(i,o,r,a,l,c,d,h)}}function Jre(s){if(s.length<=1)return s;const e=[s[0]];let t=e[0];for(let n=1,i=s.length;n<i;n++){const o=s[n],r=o.originalStart-(t.originalStart+t.originalLength),a=o.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(r,a)<Yre?(t.originalLength=o.originalStart+o.originalLength-t.originalStart,t.modifiedLength=o.modifiedStart+o.modifiedLength-t.modifiedStart):(e.push(o),t=o)}return e}class xC{constructor(e,t,n,i,o){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=i,this.charChanges=o}static createFromDiffResult(e,t,n,i,o,r,a){let l,c,d,h,u;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,c=0):(l=n.getStartLineNumber(t.originalStart),c=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(d=i.getStartLineNumber(t.modifiedStart)-1,h=0):(d=i.getStartLineNumber(t.modifiedStart),h=i.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),r&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&o()){const f=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),g=i.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(f.getElements().length>0&&g.getElements().length>0){let p=Jq(f,g,o,!0).changes;a&&(p=Jre(p)),u=[];for(let _=0,b=p.length;_<b;_++)u.push(y_.createFromDiffChange(p[_],f,g))}}return new xC(l,c,d,h,u)}}class eae{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new X8(e),this.modified=new X8(t),this.continueLineDiff=Q8(n.maxComputationTime),this.continueCharDiff=Q8(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=Jq(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(xC.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const i=[];let o=0,r=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,d=c?c.originalStart:this.originalLines.length,h=c?c.modifiedStart:this.modifiedLines.length;for(;o<d&&r<h;){const u=this.originalLines[o],f=this.modifiedLines[r];if(u!==f){{let g=oA(u,1),p=oA(f,1);for(;g>1&&p>1;){const _=u.charCodeAt(g-2),b=f.charCodeAt(p-2);if(_!==b)break;g--,p--}(g>1||p>1)&&this._pushTrimWhitespaceCharChange(i,o+1,1,g,r+1,1,p)}{let g=rA(u,1),p=rA(f,1);const _=u.length+1,b=f.length+1;for(;g<_&&p<b;){const v=u.charCodeAt(g-1),C=u.charCodeAt(p-1);if(v!==C)break;g++,p++}(g<_||p<b)&&this._pushTrimWhitespaceCharChange(i,o+1,g,_,r+1,p,b)}}o++,r++}c&&(i.push(xC.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),o+=c.originalLength,r+=c.modifiedLength)}return{quitEarly:n,changes:i}}_pushTrimWhitespaceCharChange(e,t,n,i,o,r,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,i,o,r,a))return;let l;this.shouldComputeCharChanges&&(l=[new y_(t,n,t,i,o,r,o,a)]),e.push(new xC(t,t,o,o,l))}_mergeTrimWhitespaceCharChange(e,t,n,i,o,r,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===o?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new y_(t,n,t,i,o,r,o,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===o?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=o,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new y_(t,n,t,i,o,r,o,a)),!0):!1}}function oA(s,e){const t=ds(s);return t===-1?e:t+1}function rA(s,e){const t=Ba(s);return t===-1?e:t+2}function Q8(s){if(s===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<s}class rd{static trivial(e,t){return new rd([new ti(Ye.ofLength(e.length),Ye.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new rd([new ti(Ye.ofLength(e.length),Ye.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class ti{static invert(e,t){const n=[];return uj(e,(i,o)=>{n.push(ti.fromOffsetPairs(i?i.getEndExclusives():qc.zero,o?o.getStarts():new qc(t,(i?i.seq2Range.endExclusive-i.seq1Range.endExclusive:0)+t)))}),n}static fromOffsetPairs(e,t){return new ti(new Ye(e.offset1,t.offset1),new Ye(e.offset2,t.offset2))}static assertSorted(e){let t;for(const n of e){if(t&&!(t.seq1Range.endExclusive<=n.seq1Range.start&&t.seq2Range.endExclusive<=n.seq2Range.start))throw new _t("Sequence diffs must be sorted");t=n}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new ti(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new ti(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new ti(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new ti(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new ti(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),n=this.seq2Range.intersect(e.seq2Range);if(!(!t||!n))return new ti(t,n)}getStarts(){return new qc(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new qc(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}const kf=class kf{constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new kf(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}};kf.zero=new kf(0,0),kf.max=new kf(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);let qc=kf;const OD=class OD{isValid(){return!0}};OD.instance=new OD;let Kw=OD;class tae{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new _t("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}class WN{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,n){this.array[e+t*this.width]=n}}function aA(s){return s===32||s===9}const fw=class fw{static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,n){this.range=e,this.lines=t,this.source=n,this.histogram=[];let i=0;for(let o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){const r=t[o];for(let l=0;l<r.length;l++){i++;const c=r[l],d=fw.getKey(c);this.histogram[d]=(this.histogram[d]||0)+1}i++;const a=fw.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=i}computeSimilarity(e){let t=0;const n=Math.max(this.histogram.length,e.histogram.length);for(let i=0;i<n;i++)t+=Math.abs((this.histogram[i]??0)-(e.histogram[i]??0));return 1-t/(this.totalCount+e.totalCount)}};fw.chrKeys=new Map;let Yk=fw;class nae{compute(e,t,n=Kw.instance,i){if(e.length===0||t.length===0)return rd.trivial(e,t);const o=new WN(e.length,t.length),r=new WN(e.length,t.length),a=new WN(e.length,t.length);for(let g=0;g<e.length;g++)for(let p=0;p<t.length;p++){if(!n.isValid())return rd.trivialTimedOut(e,t);const _=g===0?0:o.get(g-1,p),b=p===0?0:o.get(g,p-1);let v;e.getElement(g)===t.getElement(p)?(g===0||p===0?v=0:v=o.get(g-1,p-1),g>0&&p>0&&r.get(g-1,p-1)===3&&(v+=a.get(g-1,p-1)),v+=i?i(g,p):1):v=-1;const C=Math.max(_,b,v);if(C===v){const w=g>0&&p>0?a.get(g-1,p-1):0;a.set(g,p,w+1),r.set(g,p,3)}else C===_?(a.set(g,p,0),r.set(g,p,1)):C===b&&(a.set(g,p,0),r.set(g,p,2));o.set(g,p,C)}const l=[];let c=e.length,d=t.length;function h(g,p){(g+1!==c||p+1!==d)&&l.push(new ti(new Ye(g+1,c),new Ye(p+1,d))),c=g,d=p}let u=e.length-1,f=t.length-1;for(;u>=0&&f>=0;)r.get(u,f)===3?(h(u,f),u--,f--):r.get(u,f)===1?u--:f--;return h(-1,-1),l.reverse(),new rd(l,!1)}}class eK{compute(e,t,n=Kw.instance){if(e.length===0||t.length===0)return rd.trivial(e,t);const i=e,o=t;function r(p,_){for(;p<i.length&&_<o.length&&i.getElement(p)===o.getElement(_);)p++,_++;return p}let a=0;const l=new iae;l.set(0,r(0,0));const c=new sae;c.set(0,l.get(0)===0?null:new J8(null,0,0,l.get(0)));let d=0;e:for(;;){if(a++,!n.isValid())return rd.trivialTimedOut(i,o);const p=-Math.min(a,o.length+a%2),_=Math.min(a,i.length+a%2);for(d=p;d<=_;d+=2){const b=d===_?-1:l.get(d+1),v=d===p?-1:l.get(d-1)+1,C=Math.min(Math.max(b,v),i.length),w=C-d;if(C>i.length||w>o.length)continue;const y=r(C,w);l.set(d,y);const k=C===b?c.get(d+1):c.get(d-1);if(c.set(d,y!==C?new J8(k,C,w,y-C):k),l.get(d)===i.length&&l.get(d)-d===o.length)break e}}let h=c.get(d);const u=[];let f=i.length,g=o.length;for(;;){const p=h?h.x+h.length:0,_=h?h.y+h.length:0;if((p!==f||_!==g)&&u.push(new ti(new Ye(p,f),new Ye(_,g))),!h)break;f=h.x,g=h.y,h=h.prev}return u.reverse(),new rd(u,!1)}}class J8{constructor(e,t,n,i){this.prev=e,this.x=t,this.y=n,this.length=i}}class iae{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[e]=t}}}class sae{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class Xk{constructor(e,t,n){this.lines=e,this.range=t,this.considerWhitespaceChanges=n,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let i=this.range.startLineNumber;i<=this.range.endLineNumber;i++){let o=e[i-1],r=0;i===this.range.startLineNumber&&this.range.startColumn>1&&(r=this.range.startColumn-1,o=o.substring(r)),this.lineStartOffsets.push(r);let a=0;if(!n){const c=o.trimStart();a=o.length-c.length,o=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=i===this.range.endLineNumber?Math.min(this.range.endColumn-1-r-a,o.length):o.length;for(let c=0;c<l;c++)this.elements.push(o.charCodeAt(c));i<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new Ye(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=t6(e>0?this.elements[e-1]:-1),n=t6(e<this.elements.length?this.elements[e]:-1);if(t===7&&n===8)return 0;if(t===8)return 150;let i=0;return t!==n&&(i+=10,t===0&&n===1&&(i+=1)),i+=e6(t),i+=e6(n),i}translateOffset(e,t="right"){const n=jw(this.firstElementOffsetByLineIdx,o=>o<=e),i=e-this.firstElementOffsetByLineIdx[n];return new A(this.range.startLineNumber+n,1+this.lineStartOffsets[n]+i+(i===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[n]))}translateRange(e){const t=this.translateOffset(e.start,"right"),n=this.translateOffset(e.endExclusive,"left");return n.isBefore(t)?L.fromPositions(n,n):L.fromPositions(t,n)}findWordContaining(e){if(e<0||e>=this.elements.length||!BN(this.elements[e]))return;let t=e;for(;t>0&&BN(this.elements[t-1]);)t--;let n=e;for(;n<this.elements.length&&BN(this.elements[n]);)n++;return new Ye(t,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=lb(this.firstElementOffsetByLineIdx,i=>i<=e.start)??0,n=$re(this.firstElementOffsetByLineIdx,i=>e.endExclusive<=i)??this.elements.length;return new Ye(t,n)}}function BN(s){return s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57}const oae={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function e6(s){return oae[s]}function t6(s){return s===10?8:s===13?7:aA(s)?6:s>=97&&s<=122?0:s>=65&&s<=90?1:s>=48&&s<=57?2:s===-1?3:s===44||s===59?5:4}function rae(s,e,t,n,i,o){let{moves:r,excludedChanges:a}=lae(s,e,t,o);if(!o.isValid())return[];const l=s.filter(d=>!a.has(d)),c=cae(l,n,i,e,t,o);return x2(r,c),r=dae(r),r=r.filter(d=>{const h=d.original.toOffsetRange().slice(e).map(f=>f.trim());return h.join(`
`).length>=15&&aae(h,f=>f.length>=2)>=2}),r=hae(s,r),r}function aae(s,e){let t=0;for(const n of s)e(n)&&t++;return t}function lae(s,e,t,n){const i=[],o=s.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new Yk(l.original,e,l)),r=new Set(s.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new Yk(l.modified,t,l))),a=new Set;for(const l of o){let c=-1,d;for(const h of r){const u=l.computeSimilarity(h);u>c&&(c=u,d=h)}if(c>.9&&d&&(r.delete(d),i.push(new as(l.range,d.range)),a.add(l.source),a.add(d.source)),!n.isValid())return{moves:i,excludedChanges:a}}return{moves:i,excludedChanges:a}}function cae(s,e,t,n,i,o){const r=[],a=new J3;for(const u of s)for(let f=u.original.startLineNumber;f<u.original.endLineNumberExclusive-2;f++){const g=`${e[f-1]}:${e[f+1-1]}:${e[f+2-1]}`;a.add(g,{range:new ze(f,f+3)})}const l=[];s.sort(ks(u=>u.modified.startLineNumber,Qr));for(const u of s){let f=[];for(let g=u.modified.startLineNumber;g<u.modified.endLineNumberExclusive-2;g++){const p=`${t[g-1]}:${t[g+1-1]}:${t[g+2-1]}`,_=new ze(g,g+3),b=[];a.forEach(p,({range:v})=>{for(const w of f)if(w.originalLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive&&w.modifiedLineRange.endLineNumberExclusive+1===_.endLineNumberExclusive){w.originalLineRange=new ze(w.originalLineRange.startLineNumber,v.endLineNumberExclusive),w.modifiedLineRange=new ze(w.modifiedLineRange.startLineNumber,_.endLineNumberExclusive),b.push(w);return}const C={modifiedLineRange:_,originalLineRange:v};l.push(C),b.push(C)}),f=b}if(!o.isValid())return[]}l.sort(mj(ks(u=>u.modifiedLineRange.length,Qr)));const c=new pr,d=new pr;for(const u of l){const f=u.modifiedLineRange.startLineNumber-u.originalLineRange.startLineNumber,g=c.subtractFrom(u.modifiedLineRange),p=d.subtractFrom(u.originalLineRange).getWithDelta(f),_=g.getIntersection(p);for(const b of _.ranges){if(b.length<3)continue;const v=b,C=b.delta(-f);r.push(new as(C,v)),c.addRange(v),d.addRange(C)}}r.sort(ks(u=>u.original.startLineNumber,Qr));const h=new Zk(s);for(let u=0;u<r.length;u++){const f=r[u],g=h.findLastMonotonous(k=>k.original.startLineNumber<=f.original.startLineNumber),p=lb(s,k=>k.modified.startLineNumber<=f.modified.startLineNumber),_=Math.max(f.original.startLineNumber-g.original.startLineNumber,f.modified.startLineNumber-p.modified.startLineNumber),b=h.findLastMonotonous(k=>k.original.startLineNumber<f.original.endLineNumberExclusive),v=lb(s,k=>k.modified.startLineNumber<f.modified.endLineNumberExclusive),C=Math.max(b.original.endLineNumberExclusive-f.original.endLineNumberExclusive,v.modified.endLineNumberExclusive-f.modified.endLineNumberExclusive);let w;for(w=0;w<_;w++){const k=f.original.startLineNumber-w-1,x=f.modified.startLineNumber-w-1;if(k>n.length||x>i.length||c.contains(x)||d.contains(k)||!n6(n[k-1],i[x-1],o))break}w>0&&(d.addRange(new ze(f.original.startLineNumber-w,f.original.startLineNumber)),c.addRange(new ze(f.modified.startLineNumber-w,f.modified.startLineNumber)));let y;for(y=0;y<C;y++){const k=f.original.endLineNumberExclusive+y,x=f.modified.endLineNumberExclusive+y;if(k>n.length||x>i.length||c.contains(x)||d.contains(k)||!n6(n[k-1],i[x-1],o))break}y>0&&(d.addRange(new ze(f.original.endLineNumberExclusive,f.original.endLineNumberExclusive+y)),c.addRange(new ze(f.modified.endLineNumberExclusive,f.modified.endLineNumberExclusive+y))),(w>0||y>0)&&(r[u]=new as(new ze(f.original.startLineNumber-w,f.original.endLineNumberExclusive+y),new ze(f.modified.startLineNumber-w,f.modified.endLineNumberExclusive+y)))}return r}function n6(s,e,t){if(s.trim()===e.trim())return!0;if(s.length>300&&e.length>300)return!1;const i=new eK().compute(new Xk([s],new L(1,1,1,s.length),!1),new Xk([e],new L(1,1,1,e.length),!1),t);let o=0;const r=ti.invert(i.diffs,s.length);for(const d of r)d.seq1Range.forEach(h=>{aA(s.charCodeAt(h))||o++});function a(d){let h=0;for(let u=0;u<s.length;u++)aA(d.charCodeAt(u))||h++;return h}const l=a(s.length>e.length?s:e);return o/l>.6&&l>10}function dae(s){if(s.length===0)return s;s.sort(ks(t=>t.original.startLineNumber,Qr));const e=[s[0]];for(let t=1;t<s.length;t++){const n=e[e.length-1],i=s[t],o=i.original.startLineNumber-n.original.endLineNumberExclusive,r=i.modified.startLineNumber-n.modified.endLineNumberExclusive;if(o>=0&&r>=0&&o+r<=2){e[e.length-1]=n.join(i);continue}e.push(i)}return e}function hae(s,e){const t=new Zk(s);return e=e.filter(n=>{const i=t.findLastMonotonous(a=>a.original.startLineNumber<n.original.endLineNumberExclusive)||new as(new ze(1,1),new ze(1,1)),o=lb(s,a=>a.modified.startLineNumber<n.modified.endLineNumberExclusive);return i!==o}),e}function lA(s,e,t){let n=t;return n=i6(s,e,n),n=i6(s,e,n),n=uae(s,e,n),n}function i6(s,e,t){if(t.length===0)return t;const n=[];n.push(t[0]);for(let o=1;o<t.length;o++){const r=n[n.length-1];let a=t[o];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-r.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(s.getElement(a.seq1Range.start-c)!==s.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){n[n.length-1]=new ti(new Ye(r.seq1Range.start,a.seq1Range.endExclusive-l),new Ye(r.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}n.push(a)}const i=[];for(let o=0;o<n.length-1;o++){const r=n[o+1];let a=n[o];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=r.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!s.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){n[o+1]=new ti(new Ye(a.seq1Range.start+l,r.seq1Range.endExclusive),new Ye(a.seq2Range.start+l,r.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}i.push(a)}return n.length>0&&i.push(n[n.length-1]),i}function uae(s,e,t){if(!s.getBoundaryScore||!e.getBoundaryScore)return t;for(let n=0;n<t.length;n++){const i=n>0?t[n-1]:void 0,o=t[n],r=n+1<t.length?t[n+1]:void 0,a=new Ye(i?i.seq1Range.endExclusive+1:0,r?r.seq1Range.start-1:s.length),l=new Ye(i?i.seq2Range.endExclusive+1:0,r?r.seq2Range.start-1:e.length);o.seq1Range.isEmpty?t[n]=s6(o,s,e,a,l):o.seq2Range.isEmpty&&(t[n]=s6(o.swap(),e,s,l,a).swap())}return t}function s6(s,e,t,n,i){let r=1;for(;s.seq1Range.start-r>=n.start&&s.seq2Range.start-r>=i.start&&t.isStronglyEqual(s.seq2Range.start-r,s.seq2Range.endExclusive-r)&&r<100;)r++;r--;let a=0;for(;s.seq1Range.start+a<n.endExclusive&&s.seq2Range.endExclusive+a<i.endExclusive&&t.isStronglyEqual(s.seq2Range.start+a,s.seq2Range.endExclusive+a)&&a<100;)a++;if(r===0&&a===0)return s;let l=0,c=-1;for(let d=-r;d<=a;d++){const h=s.seq2Range.start+d,u=s.seq2Range.endExclusive+d,f=s.seq1Range.start+d,g=e.getBoundaryScore(f)+t.getBoundaryScore(h)+t.getBoundaryScore(u);g>c&&(c=g,l=d)}return s.delta(l)}function fae(s,e,t){const n=[];for(const i of t){const o=n[n.length-1];if(!o){n.push(i);continue}i.seq1Range.start-o.seq1Range.endExclusive<=2||i.seq2Range.start-o.seq2Range.endExclusive<=2?n[n.length-1]=new ti(o.seq1Range.join(i.seq1Range),o.seq2Range.join(i.seq2Range)):n.push(i)}return n}function gae(s,e,t){const n=ti.invert(t,s.length),i=[];let o=new qc(0,0);function r(l,c){if(l.offset1<o.offset1||l.offset2<o.offset2)return;const d=s.findWordContaining(l.offset1),h=e.findWordContaining(l.offset2);if(!d||!h)return;let u=new ti(d,h);const f=u.intersect(c);let g=f.seq1Range.length,p=f.seq2Range.length;for(;n.length>0;){const _=n[0];if(!(_.seq1Range.intersects(u.seq1Range)||_.seq2Range.intersects(u.seq2Range)))break;const v=s.findWordContaining(_.seq1Range.start),C=e.findWordContaining(_.seq2Range.start),w=new ti(v,C),y=w.intersect(_);if(g+=y.seq1Range.length,p+=y.seq2Range.length,u=u.join(w),u.seq1Range.endExclusive>=_.seq1Range.endExclusive)n.shift();else break}g+p<(u.seq1Range.length+u.seq2Range.length)*2/3&&i.push(u),o=u.getEndExclusives()}for(;n.length>0;){const l=n.shift();l.seq1Range.isEmpty||(r(l.getStarts(),l),r(l.getEndExclusives().delta(-1),l))}return mae(t,i)}function mae(s,e){const t=[];for(;s.length>0||e.length>0;){const n=s[0],i=e[0];let o;n&&(!i||n.seq1Range.start<i.seq1Range.start)?o=s.shift():o=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=o.seq1Range.start?t[t.length-1]=t[t.length-1].join(o):t.push(o)}return t}function pae(s,e,t){let n=t;if(n.length===0)return n;let i=0,o;do{o=!1;const r=[n[0]];for(let a=1;a<n.length;a++){let d=function(u,f){const g=new Ye(c.seq1Range.endExclusive,l.seq1Range.start);return s.getText(g).replace(/\s/g,"").length<=4&&(u.seq1Range.length+u.seq2Range.length>5||f.seq1Range.length+f.seq2Range.length>5)};const l=n[a],c=r[r.length-1];d(c,l)?(o=!0,r[r.length-1]=r[r.length-1].join(l)):r.push(l)}n=r}while(i++<10&&o);return n}function _ae(s,e,t){let n=t;if(n.length===0)return n;let i=0,o;do{o=!1;const a=[n[0]];for(let l=1;l<n.length;l++){let h=function(f,g){const p=new Ye(d.seq1Range.endExclusive,c.seq1Range.start);if(s.countLinesIn(p)>5||p.length>500)return!1;const b=s.getText(p).trim();if(b.length>20||b.split(/\r\n|\r|\n/).length>1)return!1;const v=s.countLinesIn(f.seq1Range),C=f.seq1Range.length,w=e.countLinesIn(f.seq2Range),y=f.seq2Range.length,k=s.countLinesIn(g.seq1Range),x=g.seq1Range.length,D=e.countLinesIn(g.seq2Range),N=g.seq2Range.length,W=2*40+50;function B(z){return Math.min(z,W)}return Math.pow(Math.pow(B(v*40+C),1.5)+Math.pow(B(w*40+y),1.5),1.5)+Math.pow(Math.pow(B(k*40+x),1.5)+Math.pow(B(D*40+N),1.5),1.5)>(W**1.5)**1.5*1.3};const c=n[l],d=a[a.length-1];h(d,c)?(o=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}n=a}while(i++<10&&o);const r=[];return ote(n,(a,l,c)=>{let d=l;function h(b){return b.length>0&&b.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}const u=s.extendToFullLines(l.seq1Range),f=s.getText(new Ye(u.start,l.seq1Range.start));h(f)&&(d=d.deltaStart(-f.length));const g=s.getText(new Ye(l.seq1Range.endExclusive,u.endExclusive));h(g)&&(d=d.deltaEnd(g.length));const p=ti.fromOffsetPairs(a?a.getEndExclusives():qc.zero,c?c.getStarts():qc.max),_=d.intersect(p);r.length>0&&_.getStarts().equals(r[r.length-1].getEndExclusives())?r[r.length-1]=r[r.length-1].join(_):r.push(_)}),r}class o6{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:r6(this.lines[e-1]),n=e===this.lines.length?0:r6(this.lines[e]);return 1e3-(t+n)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function r6(s){let e=0;for(;e<s.length&&(s.charCodeAt(e)===32||s.charCodeAt(e)===9);)e++;return e}class tK{constructor(){this.dynamicProgrammingDiffing=new nae,this.myersDiffingAlgorithm=new eK}computeDiff(e,t,n){if(e.length<=1&&en(e,t,(y,k)=>y===k))return new OS([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new OS([new Go(new ze(1,e.length+1),new ze(1,t.length+1),[new Oo(new L(1,1,e.length,e[e.length-1].length+1),new L(1,1,t.length,t[t.length-1].length+1))])],[],!1);const i=n.maxComputationTimeMs===0?Kw.instance:new tae(n.maxComputationTimeMs),o=!n.ignoreTrimWhitespace,r=new Map;function a(y){let k=r.get(y);return k===void 0&&(k=r.size,r.set(y,k)),k}const l=e.map(y=>a(y.trim())),c=t.map(y=>a(y.trim())),d=new o6(l,e),h=new o6(c,t),u=d.length+h.length<1700?this.dynamicProgrammingDiffing.compute(d,h,i,(y,k)=>e[y]===t[k]?t[k].length===0?.1:1+Math.log(1+t[k].length):.99):this.myersDiffingAlgorithm.compute(d,h,i);let f=u.diffs,g=u.hitTimeout;f=lA(d,h,f),f=pae(d,h,f);const p=[],_=y=>{if(o)for(let k=0;k<y;k++){const x=b+k,D=v+k;if(e[x]!==t[D]){const N=this.refineDiff(e,t,new ti(new Ye(x,x+1),new Ye(D,D+1)),i,o);for(const W of N.mappings)p.push(W);N.hitTimeout&&(g=!0)}}};let b=0,v=0;for(const y of f){Jg(()=>y.seq1Range.start-b===y.seq2Range.start-v);const k=y.seq1Range.start-b;_(k),b=y.seq1Range.endExclusive,v=y.seq2Range.endExclusive;const x=this.refineDiff(e,t,y,i,o);x.hitTimeout&&(g=!0);for(const D of x.mappings)p.push(D)}_(e.length-b);const C=a6(p,e,t);let w=[];return n.computeMoves&&(w=this.computeMoves(C,e,t,l,c,i,o)),Jg(()=>{function y(x,D){if(x.lineNumber<1||x.lineNumber>D.length)return!1;const N=D[x.lineNumber-1];return!(x.column<1||x.column>N.length+1)}function k(x,D){return!(x.startLineNumber<1||x.startLineNumber>D.length+1||x.endLineNumberExclusive<1||x.endLineNumberExclusive>D.length+1)}for(const x of C){if(!x.innerChanges)return!1;for(const D of x.innerChanges)if(!(y(D.modifiedRange.getStartPosition(),t)&&y(D.modifiedRange.getEndPosition(),t)&&y(D.originalRange.getStartPosition(),e)&&y(D.originalRange.getEndPosition(),e)))return!1;if(!k(x.modified,t)||!k(x.original,e))return!1}return!0}),new OS(C,w,g)}computeMoves(e,t,n,i,o,r,a){return rae(e,t,n,i,o,r).map(d=>{const h=this.refineDiff(t,n,new ti(d.original.toOffsetRange(),d.modified.toOffsetRange()),r,a),u=a6(h.mappings,t,n,!0);return new Xq(d,u)})}refineDiff(e,t,n,i,o){const a=vae(n).toRangeMapping2(e,t),l=new Xk(e,a.originalRange,o),c=new Xk(t,a.modifiedRange,o),d=l.length+c.length<500?this.dynamicProgrammingDiffing.compute(l,c,i):this.myersDiffingAlgorithm.compute(l,c,i);let h=d.diffs;return h=lA(l,c,h),h=gae(l,c,h),h=fae(l,c,h),h=_ae(l,c,h),{mappings:h.map(f=>new Oo(l.translateRange(f.seq1Range),c.translateRange(f.seq2Range))),hitTimeout:d.hitTimeout}}}function a6(s,e,t,n=!1){const i=[];for(const o of v3(s.map(r=>bae(r,e,t)),(r,a)=>r.original.overlapOrTouch(a.original)||r.modified.overlapOrTouch(a.modified))){const r=o[0],a=o[o.length-1];i.push(new Go(r.original.join(a.original),r.modified.join(a.modified),o.map(l=>l.innerChanges[0])))}return Jg(()=>!n&&i.length>0&&(i[0].modified.startLineNumber!==i[0].original.startLineNumber||t.length-i[i.length-1].modified.endLineNumberExclusive!==e.length-i[i.length-1].original.endLineNumberExclusive)?!1:Y3(i,(o,r)=>r.original.startLineNumber-o.original.endLineNumberExclusive===r.modified.startLineNumber-o.modified.endLineNumberExclusive&&o.original.endLineNumberExclusive<r.original.startLineNumber&&o.modified.endLineNumberExclusive<r.modified.startLineNumber)),i}function bae(s,e,t){let n=0,i=0;s.modifiedRange.endColumn===1&&s.originalRange.endColumn===1&&s.originalRange.startLineNumber+n<=s.originalRange.endLineNumber&&s.modifiedRange.startLineNumber+n<=s.modifiedRange.endLineNumber&&(i=-1),s.modifiedRange.startColumn-1>=t[s.modifiedRange.startLineNumber-1].length&&s.originalRange.startColumn-1>=e[s.originalRange.startLineNumber-1].length&&s.originalRange.startLineNumber<=s.originalRange.endLineNumber+i&&s.modifiedRange.startLineNumber<=s.modifiedRange.endLineNumber+i&&(n=1);const o=new ze(s.originalRange.startLineNumber+n,s.originalRange.endLineNumber+1+i),r=new ze(s.modifiedRange.startLineNumber+n,s.modifiedRange.endLineNumber+1+i);return new Go(o,r,[s])}function vae(s){return new as(new ze(s.seq1Range.start+1,s.seq1Range.endExclusive+1),new ze(s.seq2Range.start+1,s.seq2Range.endExclusive+1))}const l6={getLegacy:()=>new Xre,getDefault:()=>new tK};function Nh(s,e){const t=Math.pow(10,e);return Math.round(s*t)/t}class ht{constructor(e,t,n,i=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=Nh(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Ur{constructor(e,t,n,i){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Nh(Math.max(Math.min(1,t),0),3),this.l=Nh(Math.max(Math.min(1,n),0),3),this.a=Nh(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,o=e.a,r=Math.max(t,n,i),a=Math.min(t,n,i);let l=0,c=0;const d=(a+r)/2,h=r-a;if(h>0){switch(c=Math.min(d<=.5?h/(2*d):h/(2-2*d),1),r){case t:l=(n-i)/h+(n<i?6:0);break;case n:l=(i-t)/h+2;break;case i:l=(t-n)/h+4;break}l*=60,l=Math.round(l)}return new Ur(l,c,d,o)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:i,a:o}=e;let r,a,l;if(n===0)r=a=l=i;else{const c=i<.5?i*(1+n):i+n-i*n,d=2*i-c;r=Ur._hue2rgb(d,c,t+1/3),a=Ur._hue2rgb(d,c,t),l=Ur._hue2rgb(d,c,t-1/3)}return new ht(Math.round(r*255),Math.round(a*255),Math.round(l*255),o)}}class Bl{constructor(e,t,n,i){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=Nh(Math.max(Math.min(1,t),0),3),this.v=Nh(Math.max(Math.min(1,n),0),3),this.a=Nh(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,i=e.b/255,o=Math.max(t,n,i),r=Math.min(t,n,i),a=o-r,l=o===0?0:a/o;let c;return a===0?c=0:o===t?c=((n-i)/a%6+6)%6:o===n?c=(i-t)/a+2:c=(t-n)/a+4,new Bl(Math.round(c*60),l,o,e.a)}static toRGBA(e){const{h:t,s:n,v:i,a:o}=e,r=i*n,a=r*(1-Math.abs(t/60%2-1)),l=i-r;let[c,d,h]=[0,0,0];return t<60?(c=r,d=a):t<120?(c=a,d=r):t<180?(d=r,h=a):t<240?(d=a,h=r):t<300?(c=a,h=r):t<=360&&(c=r,h=a),c=Math.round((c+l)*255),d=Math.round((d+l)*255),h=Math.round((h+l)*255),new ht(c,d,h,o)}}const wn=class wn{static fromHex(e){return wn.Format.CSS.parseHex(e)||wn.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:Ur.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:Bl.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof ht)this.rgba=e;else if(e instanceof Ur)this._hsla=e,this.rgba=Ur.toRGBA(e);else if(e instanceof Bl)this._hsva=e,this.rgba=Bl.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&ht.equals(this.rgba,e.rgba)&&Ur.equals(this.hsla,e.hsla)&&Bl.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=wn._relativeLuminanceForComponent(this.rgba.r),t=wn._relativeLuminanceForComponent(this.rgba.g),n=wn._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return Nh(i,4)}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new wn(new Ur(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new wn(new Ur(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:i,a:o}=this.rgba;return new wn(new ht(t,n,i,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new wn(new ht(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:n,b:i,a:o}=this.rgba;return new wn(new ht(e.rgba.r-o*(e.rgba.r-t),e.rgba.g-o*(e.rgba.g-n),e.rgba.b-o*(e.rgba.b-i),1))}toString(){return this._toString||(this._toString=wn.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(o-i)/o,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(i-o)/i,e.darken(n)}};wn.white=new wn(new ht(255,255,255,1)),wn.black=new wn(new ht(0,0,0,1)),wn.red=new wn(new ht(255,0,0,1)),wn.blue=new wn(new ht(0,0,255,1)),wn.green=new wn(new ht(0,255,0,1)),wn.cyan=new wn(new ht(0,255,255,1)),wn.lightgrey=new wn(new ht(211,211,211,1)),wn.transparent=new wn(new ht(0,0,0,0));let Z=wn;(function(s){(function(e){(function(t){function n(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:s.Format.CSS.formatRGBA(f)}t.formatRGB=n;function i(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}t.formatRGBA=i;function o(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:s.Format.CSS.formatHSLA(f)}t.formatHSL=o;function r(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}t.formatHSLA=r;function a(f){const g=f.toString(16);return g.length!==2?"0"+g:g}function l(f){return`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}`}t.formatHex=l;function c(f,g=!1){return g&&f.rgba.a===1?s.Format.CSS.formatHex(f):`#${a(f.rgba.r)}${a(f.rgba.g)}${a(f.rgba.b)}${a(Math.round(f.rgba.a*255))}`}t.formatHexA=c;function d(f){return f.isOpaque()?s.Format.CSS.formatHex(f):s.Format.CSS.formatRGBA(f)}t.format=d;function h(f){const g=f.length;if(g===0||f.charCodeAt(0)!==35)return null;if(g===7){const p=16*u(f.charCodeAt(1))+u(f.charCodeAt(2)),_=16*u(f.charCodeAt(3))+u(f.charCodeAt(4)),b=16*u(f.charCodeAt(5))+u(f.charCodeAt(6));return new s(new ht(p,_,b,1))}if(g===9){const p=16*u(f.charCodeAt(1))+u(f.charCodeAt(2)),_=16*u(f.charCodeAt(3))+u(f.charCodeAt(4)),b=16*u(f.charCodeAt(5))+u(f.charCodeAt(6)),v=16*u(f.charCodeAt(7))+u(f.charCodeAt(8));return new s(new ht(p,_,b,v/255))}if(g===4){const p=u(f.charCodeAt(1)),_=u(f.charCodeAt(2)),b=u(f.charCodeAt(3));return new s(new ht(16*p+p,16*_+_,16*b+b))}if(g===5){const p=u(f.charCodeAt(1)),_=u(f.charCodeAt(2)),b=u(f.charCodeAt(3)),v=u(f.charCodeAt(4));return new s(new ht(16*p+p,16*_+_,16*b+b,(16*v+v)/255))}return null}t.parseHex=h;function u(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(e.CSS||(e.CSS={}))})(s.Format||(s.Format={}))})(Z||(Z={}));function nK(s){const e=[];for(const t of s){const n=Number(t);(n||n===0&&t.replace(/\s/g,"")!=="")&&e.push(n)}return e}function o9(s,e,t,n){return{red:s/255,blue:t/255,green:e/255,alpha:n}}function Rv(s,e){const t=e.index,n=e[0].length;if(!t)return;const i=s.positionAt(t);return{startLineNumber:i.lineNumber,startColumn:i.column,endLineNumber:i.lineNumber,endColumn:i.column+n}}function Cae(s,e){if(!s)return;const t=Z.Format.CSS.parseHex(e);if(t)return{range:s,color:o9(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function c6(s,e,t){if(!s||e.length!==1)return;const i=e[0].values(),o=nK(i);return{range:s,color:o9(o[0],o[1],o[2],t?o[3]:1)}}function d6(s,e,t){if(!s||e.length!==1)return;const i=e[0].values(),o=nK(i),r=new Z(new Ur(o[0],o[1]/100,o[2]/100,t?o[3]:1));return{range:s,color:o9(r.rgba.r,r.rgba.g,r.rgba.b,r.rgba.a)}}function Mv(s,e){return typeof s=="string"?[...s.matchAll(e)]:s.findMatches(e)}function wae(s){const e=[],n=Mv(s,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(n.length>0)for(const i of n){const o=i.filter(c=>c!==void 0),r=o[1],a=o[2];if(!a)continue;let l;if(r==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=c6(Rv(s,i),Mv(a,c),!1)}else if(r==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=c6(Rv(s,i),Mv(a,c),!0)}else if(r==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=d6(Rv(s,i),Mv(a,c),!1)}else if(r==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=d6(Rv(s,i),Mv(a,c),!0)}else r==="#"&&(l=Cae(Rv(s,i),r+a));l&&e.push(l)}return e}function yae(s){return!s||typeof s.getValue!="function"||typeof s.positionAt!="function"?[]:wae(s)}const h6=new RegExp("\\bMARK:\\s*(.*)$","d"),Sae=/^-+|-+$/g;function kae(s,e){var n;let t=[];if(e.findRegionSectionHeaders&&((n=e.foldingRules)!=null&&n.markers)){const i=Lae(s,e);t=t.concat(i)}if(e.findMarkSectionHeaders){const i=xae(s);t=t.concat(i)}return t}function Lae(s,e){const t=[],n=s.getLineCount();for(let i=1;i<=n;i++){const o=s.getLineContent(i),r=o.match(e.foldingRules.markers.start);if(r){const a={startLineNumber:i,startColumn:r[0].length+1,endLineNumber:i,endColumn:o.length+1};if(a.endColumn>a.startColumn){const l={range:a,...iK(o.substring(r[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function xae(s){const e=[],t=s.getLineCount();for(let n=1;n<=t;n++){const i=s.getLineContent(n);Dae(i,n,e)}return e}function Dae(s,e,t){h6.lastIndex=0;const n=h6.exec(s);if(n){const i=n.indices[1][0]+1,o=n.indices[1][1]+1,r={startLineNumber:e,startColumn:i,endLineNumber:e,endColumn:o};if(r.endColumn>r.startColumn){const a={range:r,...iK(n[1]),shouldBeInComments:!0};(a.text||a.hasSeparatorLine)&&t.push(a)}}}function iK(s){s=s.trim();const e=s.startsWith("-");return s=s.replace(Sae,""),{text:s,hasSeparatorLine:e}}class Iae{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=tp(e);const n=this.values,i=this.prefixSum,o=t.length;return o===0?!1:(this.values=new Uint32Array(n.length+o),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+o),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=tp(e),t=tp(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=tp(e),t=tp(t);const n=this.values,i=this.prefixSum;if(e>=n.length)return!1;const o=n.length-e;return t>=o&&(t=o),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=tp(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,i=0,o=0,r=0;for(;t<=n;)if(i=t+(n-t)/2|0,o=this.prefixSum[i],r=o-this.values[i],e<r)n=i-1;else if(e>=o)t=i+1;else break;return new sK(i,e-r)}}class Tae{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new sK(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=cT(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],i=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=i+n;for(let o=0;o<n;o++)this._indexBySum[i+o]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class sK{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class Eae{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new A(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Iae(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const n=tc(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);const i=new Uint32Array(n.length-1);for(let o=1;o<n.length;o++)this._lines.splice(e.lineNumber+o-1,0,n[o]),i[o-1]=n[o].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,i)}}const u6=60*1e3;class Nae extends F{constructor(e,t,n=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){const i=new z3;i.cancelAndSet(()=>this._checkStopModelSync(),Math.round(u6/2)),this._register(i)}}dispose(){for(const e in this._syncedModels)Mt(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t=!1){for(const n of e){const i=n.toString();this._syncedModels[i]||this._beginModelSync(n,t),this._syncedModels[i]&&(this._syncedModelsLastUsedTime[i]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>u6&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){const n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;const i=e.toString();this._proxy.$acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const o=new q;o.add(n.onDidChangeContent(r=>{this._proxy.$acceptModelChanged(i.toString(),r)})),o.add(n.onWillDispose(()=>{this._stopModelSync(i)})),o.add(ve(()=>{this._proxy.$acceptRemovedModel(i)})),this._syncedModels[i]=o}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],Mt(t)}}class Rae{constructor(){this._models=Object.create(null)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}$acceptNewModel(e){this._models[e.url]=new Mae(Se.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class Mae extends Eae{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let n=0;n<this._lines.length;n++){const i=this._lines[n],o=this.offsetAt(new A(n+1,1)),r=i.matchAll(e);for(const a of r)(a.index||a.index===0)&&(a.index=a.index+o),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const n=Rw(e.column,x3(t),this._lines[e.lineNumber-1],0);return n?new L(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}words(e){const t=this._lines,n=this._wordenize.bind(this);let i=0,o="",r=0,a=[];return{*[Symbol.iterator](){for(;;)if(r<a.length){const l=o.substring(a[r].start,a[r].end);r+=1,yield l}else if(i<t.length)o=t[i],a=n(o,e),r=0,i+=1;else break}}}getLineWords(e,t){const n=this._lines[e-1],i=this._wordenize(n,t),o=[];for(const r of i)o.push({word:n.substring(r.start,r.end),startColumn:r.start+1,endColumn:r.end+1});return o}_wordenize(e,t){const n=[];let i;for(t.lastIndex=0;(i=t.exec(e))&&i[0].length!==0;)n.push({start:i.index,end:i.index+i[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,n=e.startLineNumber-1,i=e.endLineNumber-1,o=[];o.push(this._lines[n].substring(e.startColumn-1));for(let r=n+1;r<i;r++)o.push(this._lines[r]);return o.push(this._lines[i].substring(0,e.endColumn-1)),o.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!A.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,i=!1;if(t<1)t=1,n=1,i=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,i=!0;else{const o=this._lines[t-1].length+1;n<1?(n=1,i=!0):n>o&&(n=o,i=!0)}return i?{lineNumber:t,column:n}:e}}const FD=class FD{constructor(){this._workerTextModelSyncServer=new Rae}dispose(){}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}_getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,n){const i=this._getModel(e);return i?t9.computeUnicodeHighlights(i,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const n=this._getModel(e);return n?kae(n,t):[]}async $computeDiff(e,t,n,i){const o=this._getModel(e),r=this._getModel(t);return!o||!r?null:FS.computeDiff(o,r,n,i)}static computeDiff(e,t,n,i){const o=i==="advanced"?l6.getDefault():l6.getLegacy(),r=e.getLinesContent(),a=t.getLinesContent(),l=o.computeDiff(r,a,n),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function d(h){return h.map(u=>{var f;return[u.original.startLineNumber,u.original.endLineNumberExclusive,u.modified.startLineNumber,u.modified.endLineNumberExclusive,(f=u.innerChanges)==null?void 0:f.map(g=>[g.originalRange.startLineNumber,g.originalRange.startColumn,g.originalRange.endLineNumber,g.originalRange.endColumn,g.modifiedRange.startLineNumber,g.modifiedRange.startColumn,g.modifiedRange.endLineNumber,g.modifiedRange.endColumn])]})}return{identical:c,quitEarly:l.hitTimeout,changes:d(l.changes),moves:l.moves.map(h=>[h.lineRangeMapping.original.startLineNumber,h.lineRangeMapping.original.endLineNumberExclusive,h.lineRangeMapping.modified.startLineNumber,h.lineRangeMapping.modified.endLineNumberExclusive,d(h.changes)])}}static _modelsAreIdentical(e,t){const n=e.getLineCount(),i=t.getLineCount();if(n!==i)return!1;for(let o=1;o<=n;o++){const r=e.getLineContent(o),a=t.getLineContent(o);if(r!==a)return!1}return!0}async $computeMoreMinimalEdits(e,t,n){const i=this._getModel(e);if(!i)return t;const o=[];let r;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return L.compareRangesUsingStarts(l.range,c.range);const d=l.range?0:1,h=c.range?0:1;return d-h});let a=0;for(let l=1;l<t.length;l++)L.getEndPosition(t[a].range).equals(L.getStartPosition(t[l].range))?(t[a].range=L.fromPositions(L.getStartPosition(t[a].range),L.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:d}of t){if(typeof d=="number"&&(r=d),L.isEmpty(l)&&!c)continue;const h=i.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,i.eol),h===c)continue;if(Math.max(c.length,h.length)>FS._diffLimit){o.push({range:l,text:c});continue}const u=yre(h,c,n),f=i.offsetAt(L.lift(l).getStartPosition());for(const g of u){const p=i.positionAt(f+g.originalStart),_=i.positionAt(f+g.originalStart+g.originalLength),b={text:c.substr(g.modifiedStart,g.modifiedLength),range:{startLineNumber:p.lineNumber,startColumn:p.column,endLineNumber:_.lineNumber,endColumn:_.column}};i.getValueInRange(b.range)!==b.text&&o.push(b)}}return typeof r=="number"&&o.push({eol:r,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),o}async $computeLinks(e){const t=this._getModel(e);return t?Dre(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?yae(t):null}async $textualSuggest(e,t,n,i){const o=new pi,r=new RegExp(n,i),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const d of c.words(r))if(!(d===t||!isNaN(Number(d)))&&(a.add(d),a.size>FS._suggestionsLimit))break e}}return{words:Array.from(a),duration:o.elapsed()}}async $computeWordRanges(e,t,n,i){const o=this._getModel(e);if(!o)return Object.create(null);const r=new RegExp(n,i),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=o.getLineWords(l,r);for(const d of c){if(!isNaN(Number(d.word)))continue;let h=a[d.word];h||(h=[],a[d.word]=h),h.push({startLineNumber:l,startColumn:d.startColumn,endLineNumber:l,endColumn:d.endColumn})}}return a}async $navigateValueSet(e,t,n,i,o){const r=this._getModel(e);if(!r)return null;const a=new RegExp(i,o);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=r.getValueInRange(t),c=r.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const d=r.getValueInRange(c);return iA.INSTANCE.navigateValueSet(t,l,c,d,n)}};FD._diffLimit=1e5,FD._suggestionsLimit=1e4;let cA=FD;class FS extends cA{constructor(e,t){super(),this._host=e,this._foreignModuleFactory=t,this._foreignModule=null}async $ping(){return"pong"}$loadForeignModule(e,t,n){const r={host:gte(n,(a,l)=>this._host.$fhr(a,l)),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(r,t),Promise.resolve(I2(this._foreignModule))):new Promise((a,l)=>{const c=d=>{this._foreignModule=d.create(r,t),a(I2(this._foreignModule))};{const d=mT.asBrowserUri(`${e}.js`).toString(!0);ye(()=>import(`${d}`),[],import.meta.url).then(c).catch(l)}})}$fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}typeof importScripts=="function"&&(globalThis.monaco=jj());const AT=tt("textResourceConfigurationService"),oK=tt("textResourcePropertiesService"),ue=tt("ILanguageFeaturesService");var r9=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},df=function(s,e){return function(t,n){e(t,n,s)}};const f6=5*60*1e3;function hf(s,e){const t=s.getModel(e);return!(!t||t.isTooLargeForSyncing())}let dA=class extends F{constructor(e,t,n,i,o,r){super(),this._languageConfigurationService=o,this._modelService=t,this._workerManager=this._register(new hA(e,this._modelService)),this._logService=i,this._register(r.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(a,l)=>{if(!hf(this._modelService,a.uri))return Promise.resolve({links:[]});const d=await(await this._workerWithResources([a.uri])).$computeLinks(a.uri.toString());return d&&{links:d}}})),this._register(r.completionProvider.register("*",new Aae(this._workerManager,n,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return hf(this._modelService,e)}async computedUnicodeHighlights(e,t,n){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,n)}async computeDiff(e,t,n,i){const r=await(await this._workerWithResources([e,t],!0)).$computeDiff(e.toString(),t.toString(),n,i);if(!r)return null;return{identical:r.identical,quitEarly:r.quitEarly,changes:l(r.changes),moves:r.moves.map(c=>new Xq(new as(new ze(c[0],c[1]),new ze(c[2],c[3])),l(c[4])))};function l(c){return c.map(d=>{var h;return new Go(new ze(d[0],d[1]),new ze(d[2],d[3]),(h=d[4])==null?void 0:h.map(u=>new Oo(new L(u[0],u[1],u[2],u[3]),new L(u[4],u[5],u[6],u[7]))))})}}async computeMoreMinimalEdits(e,t,n=!1){if(cs(t)){if(!hf(this._modelService,e))return Promise.resolve(t);const i=pi.create(),o=this._workerWithResources([e]).then(r=>r.$computeMoreMinimalEdits(e.toString(),t,n));return o.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),i.elapsed())),Promise.race([o,_d(1e3).then(()=>t)])}else return Promise.resolve(void 0)}canNavigateValueSet(e){return hf(this._modelService,e)}async navigateValueSet(e,t,n){const i=this._modelService.getModel(e);if(!i)return null;const o=this._languageConfigurationService.getLanguageConfiguration(i.getLanguageId()).getWordDefinition(),r=o.source,a=o.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,n,r,a)}canComputeWordRanges(e){return hf(this._modelService,e)}async computeWordRanges(e,t){const n=this._modelService.getModel(e);if(!n)return Promise.resolve(null);const i=this._languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),o=i.source,r=i.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,o,r)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(e,t)}};dA=r9([df(1,Ut),df(2,AT),df(3,Hi),df(4,cn),df(5,ue)],dA);class Aae{constructor(e,t,n,i){this.languageConfigurationService=i,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}async provideCompletionItems(e,t){const n=this._configurationService.getValue(e.uri,t,"editor");if(n.wordBasedSuggestions==="off")return;const i=[];if(n.wordBasedSuggestions==="currentDocument")hf(this._modelService,e.uri)&&i.push(e.uri);else for(const h of this._modelService.getModels())hf(this._modelService,h.uri)&&(h===e?i.unshift(h.uri):(n.wordBasedSuggestions==="allDocuments"||h.getLanguageId()===e.getLanguageId())&&i.push(h.uri));if(i.length===0)return;const o=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),r=e.getWordAtPosition(t),a=r?new L(t.lineNumber,r.startColumn,t.lineNumber,r.endColumn):L.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),d=await(await this._workerManager.withWorker()).textualSuggest(i,r==null?void 0:r.word,o);if(d)return{duration:d.duration,suggestions:d.words.map(h=>({kind:18,label:h,insertText:h,range:{insert:l,replace:a}}))}}}let hA=class extends F{constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new U3).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(f6/2),Et),this._register(this._modelService.onModelRemoved(i=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>f6&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new Qk(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};hA=r9([df(1,Ut)],hA);class Pae{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}}let Qk=class extends F{constructor(e,t,n){super(),this._workerDescriptor=e,this._disposed=!1,this._modelService=n,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(Boe(this._workerDescriptor)),sA.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){XM(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return XM(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new Pae(new FS(this._createEditorWorkerHost(),null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new Nae(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject(wne());const n=await this._getProxy();return this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n}async textualSuggest(e,t,n){const i=await this.workerWithSyncedResources(e),o=n.source,r=n.flags;return i.$textualSuggest(e.map(a=>a.toString()),t,o,r)}dispose(){super.dispose(),this._disposed=!0}};Qk=r9([df(2,Ut)],Qk);var _r;(function(s){s.DARK="dark",s.LIGHT="light",s.HIGH_CONTRAST_DARK="hcDark",s.HIGH_CONTRAST_LIGHT="hcLight"})(_r||(_r={}));function Ha(s){return s===_r.HIGH_CONTRAST_DARK||s===_r.HIGH_CONTRAST_LIGHT}function cb(s){return s===_r.DARK||s===_r.HIGH_CONTRAST_DARK}const Yn=tt("themeService");function pn(s){return{id:s}}function uA(s){switch(s){case _r.DARK:return"vs-dark";case _r.HIGH_CONTRAST_DARK:return"hc-black";case _r.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}const rK={ThemingContribution:"base.contributions.theming"};class Oae{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new O}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),ve(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}getThemingParticipants(){return this.themingParticipants}}const aK=new Oae;ln.add(rK.ThemingContribution,aK);function Er(s){return aK.onColorThemeChange(s)}class Fae extends F{constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}}var Wae=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Bae=function(s,e){return function(t,n){e(t,n,s)}};let fA=class extends F{constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new O),this._onCodeEditorAdd=this._register(new O),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new O),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new O),this._onDiffEditorAdd=this._register(new O),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new O),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new vs,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorationsByType(e))))}setModelProperty(e,t,n){const i=e.toString();let o;this._modelProperties.has(i)?o=this._modelProperties.get(i):(o=new Map,this._modelProperties.set(i,o)),o.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}async openCodeEditor(e,t,n){for(const i of this._codeEditorOpenHandlers){const o=await i(e,t,n);if(o!==null)return o}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return ve(t)}};fA=Wae([Bae(0,Yn)],fA);var Hae=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},g6=function(s,e){return function(t,n){e(t,n,s)}};let Jk=class extends fA{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(n,i,o)=>i?this.doOpenEditor(i,n):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const o=t.resource.scheme;if(o===We.http||o===We.https)return Lq(t.resource.toString()),e}return null}const i=t.options?t.options.selection:null;if(i)if(typeof i.endLineNumber=="number"&&typeof i.endColumn=="number")e.setSelection(i),e.revealRangeInCenter(i,1);else{const o={lineNumber:i.startLineNumber,column:i.startColumn};e.setPosition(o),e.revealPositionInCenter(o,1)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};Jk=Hae([g6(0,Ie),g6(1,Yn)],Jk);st(mt,Jk,0);const Su=tt("layoutService");var lK=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cK=function(s,e){return function(t,n){e(t,n,s)}};let eL=class{get mainContainer(){var e;return((e=C3(this._codeEditorService.listCodeEditors()))==null?void 0:e.getContainerDomNode())??Et.document.body}get activeContainer(){const e=this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor();return(e==null?void 0:e.getContainerDomNode())??this.mainContainer}get mainContainerDimension(){return lu(this.mainContainer)}get activeContainerDimension(){return lu(this.activeContainer)}get containers(){return ea(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){var e;(e=this._codeEditorService.getFocusedCodeEditor())==null||e.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=se.None,this.onDidLayoutActiveContainer=se.None,this.onDidLayoutContainer=se.None,this.onDidChangeActiveContainer=se.None,this.onDidAddContainer=se.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};eL=lK([cK(0,mt)],eL);let gA=class extends eL{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};gA=lK([cK(1,mt)],gA);st(Su,eL,1);var Gw;(function(s){s[s.Ignore=0]="Ignore",s[s.Info=1]="Info",s[s.Warning=2]="Warning",s[s.Error=3]="Error"})(Gw||(Gw={}));(function(s){const e="error",t="warning",n="warn",i="info",o="ignore";function r(l){return l?Ep(e,l)?s.Error:Ep(t,l)||Ep(n,l)?s.Warning:Ep(i,l)?s.Info:s.Ignore:s.Ignore}s.fromValue=r;function a(l){switch(l){case s.Error:return e;case s.Warning:return t;case s.Info:return i;default:return o}}s.toString=a})(Gw||(Gw={}));const Tn=Gw,w0=tt("dialogService");var PT=Tn;const En=tt("notificationService");class Vae{}const a9=tt("undoRedoService");class dK{constructor(e,t){this.resource=e,this.elements=t}}const s_=class s_{constructor(){this.id=s_._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};s_._ID=0,s_.None=new s_;let mA=s_;const o_=class o_{constructor(){this.id=o_._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}};o_._ID=0,o_.None=new o_;let uf=o_;var zae=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},m6=function(s,e){return function(t,n){e(t,n,s)}};function Sy(s){return s.scheme===We.file?s.fsPath:s.path}let hK=0;class ky{constructor(e,t,n,i,o,r,a){this.id=++hK,this.type=0,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=i,this.groupOrder=o,this.sourceId=r,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class p6{constructor(e,t){this.resourceLabel=e,this.reason=t}}class _6{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,i]of this.elements)(i.reason===0?e:t).push(i.resourceLabel);const n=[];return e.length>0&&n.push(m({key:"externalRemoval",comment:["{0} is a list of filenames"]},"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(m({key:"noParallelUniverses",comment:["{0} is a list of filenames"]},"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class $ae{constructor(e,t,n,i,o,r,a){this.id=++hK,this.type=1,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=i,this.groupOrder=o,this.sourceId=r,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new _6),this.removedResources.has(t)||this.removedResources.set(t,new p6(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new _6),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new p6(e,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class uK{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);for(const e of this._future)e.type===1&&e.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(e,t){e.type===1?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===1&&t.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,i=this._past.length;n<i;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new dK(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,i=0,o=-1;for(let a=0,l=this._past.length;a<l;a++,i++){const c=this._past[a];n&&(i>=t||c.id!==e.elements[i])&&(n=!1,o=0),!n&&c.type===1&&c.removeResource(this.resourceLabel,this.strResource,0)}let r=-1;for(let a=this._future.length-1;a>=0;a--,i++){const l=this._future[a];n&&(i>=t||l.id!==e.elements[i])&&(n=!1,r=a),!n&&l.type===1&&l.removeResource(this.resourceLabel,this.strResource,0)}o!==-1&&(this._past=this._past.slice(0,o)),r!==-1&&(this._future=this._future.slice(r+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class HN{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const fK=new uK("","");fK.locked=!0;let pA=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=mA.None,n=uf.None){if(e.type===0){const i=Sy(e.resource),o=this.getUriComparisonKey(e.resource);this._pushElement(new ky(e,i,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const i=new Set,o=[],r=[];for(const a of e.resources){const l=Sy(a),c=this.getUriComparisonKey(a);i.has(c)||(i.add(c),o.push(l),r.push(c))}o.length===1?this._pushElement(new ky(e,o[0],r[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new $ae(e,o,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const i=e.resourceLabels[t],o=e.strResources[t];let r;this._editStacks.has(o)?r=this._editStacks.get(o):(r=new uK(i,o),this._editStacks.set(o,r)),r.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const i=n.getClosestPastElement();return i?i.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const o of n){const r=Sy(o.resource),a=this.getUriComparisonKey(o.resource),l=new ky(o,r,a,0,0,0,0);i.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitPastWorkspaceElement(e,i)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),i=new Map;for(const o of n){const r=Sy(o.resource),a=this.getUriComparisonKey(o.resource),l=new ky(o,r,a,0,0,0,0);i.set(l.strResource,l)}for(const o of e.strResources){if(t&&t.has(o))continue;this._editStacks.get(o).splitFutureWorkspaceElement(e,i)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const i=this.getUriComparisonKey(e);this._editStacks.has(i)&&this._editStacks.get(i).setElementsValidFlag(t,n)}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new dK(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,o]of this._editStacks){const r=o.getClosestPastElement();r&&r.sourceId===e&&(!t||r.sourceOrder>t.sourceOrder)&&(t=r,n=i)}return[t,n]}canUndo(e){if(e instanceof uf){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){Pe(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,i,o){const r=this._acquireLocks(n);let a;try{a=t()}catch(l){return r(),i.dispose(),this._onError(l,e)}return a?a.then(()=>(r(),i.dispose(),o()),l=>(r(),i.dispose(),this._onError(l,e))):(r(),i.dispose(),o())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return F.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?F.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==1||typeof e.actual.prepareUndoRedo>"u")return t(F.None);const n=e.actual.prepareUndoRedo();return n?uT(n)?t(n):n.then(i=>t(i)):t(F.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||fK);return new HN(t)}_tryToSplitAndUndo(e,t,n,i){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(i),new Ly(this._undo(e,0,!0));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(i),new Ly}_checkWorkspaceUndo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,m({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,m({key:"cannotWorkspaceUndo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const r=[];for(const a of n.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,m({key:"cannotWorkspaceUndoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const i=this._getAffectedEditStacks(t),o=this._checkWorkspaceUndo(e,t,i,!1);return o?o.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,i,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const i=t.getSecondClosestPastElement();if(i&&i.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,n,i){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(d){d[d.All=0]="All",d[d.This=1]="This",d[d.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:Tn.Info,message:m("confirmWorkspace","Would you like to undo '{0}' across all files?",t.label),buttons:[{label:m({key:"ok",comment:["{0} denotes a number that is > 1, && denotes a mnemonic"]},"&&Undo in {0} Files",n.editStacks.length),run:()=>a.All},{label:m({key:"nok",comment:["&& denotes a mnemonic"]},"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,n,!1);if(c)return c.returnValue;i=!0}let o;try{o=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const r=this._checkWorkspaceUndo(e,t,n,!0);if(r)return o.dispose(),r.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,o,()=>this._continueUndoInGroup(t.groupId,i))}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const i=m({key:"cannotResourceUndoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(i);return}return this._invokeResourcePrepare(t,i=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new HN([e]),i,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,o]of this._editStacks){const r=o.getClosestPastElement();r&&r.groupId===e&&(!t||r.groupOrder>t.groupOrder)&&(t=r,n=i)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof uf){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const i=this._editStacks.get(e),o=i.getClosestPastElement();if(!o)return;if(o.groupId){const[a,l]=this._findClosestUndoElementInGroup(o.groupId);if(o!==a&&l)return this._undo(l,t,n)}if((o.sourceId!==t||o.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,o);try{return o.type===1?this._workspaceUndo(e,o,n):this._resourceUndo(i,o,n)}finally{}}async _confirmAndContinueUndo(e,t,n){if((await this._dialogService.confirm({message:m("confirmDifferentSource","Would you like to undo '{0}'?",n.label),primaryButton:m({key:"confirmDifferentSource.yes",comment:["&& denotes a mnemonic"]},"&&Yes"),cancelButton:m("confirmDifferentSource.no","No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[i,o]of this._editStacks){const r=o.getClosestFutureElement();r&&r.sourceId===e&&(!t||r.sourceOrder<t.sourceOrder)&&(t=r,n=i)}return[t,n]}canRedo(e){if(e instanceof uf){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,i){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(i),new Ly(this._redo(e));for(const o of t.strResources)this.removeElements(o);return this._notificationService.warn(i),new Ly}_checkWorkspaceRedo(e,t,n,i){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,m({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(i&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,m({key:"cannotWorkspaceRedo",comment:["{0} is a label for an operation. {1} is another message."]},"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const o=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&o.push(a.resourceLabel);if(o.length>0)return this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToChanges",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because changes were made to {1}",t.label,o.join(", ")));const r=[];for(const a of n.editStacks)a.locked&&r.push(a.resourceLabel);return r.length>0?this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,r.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,m({key:"cannotWorkspaceRedoDueToInMeantimeUndoRedo",comment:["{0} is a label for an operation. {1} is a list of filenames."]},"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),i=this._checkWorkspaceRedo(e,t,n,!1);return i?i.returnValue:this._executeWorkspaceRedo(e,t,n)}async _executeWorkspaceRedo(e,t,n){let i;try{i=await this._invokeWorkspacePrepare(t)}catch(r){return this._onError(r,t)}const o=this._checkWorkspaceRedo(e,t,n,!0);if(o)return i.dispose(),o.returnValue;for(const r of n.editStacks)r.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,i,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=m({key:"cannotResourceRedoDueToInProgressUndoRedo",comment:["{0} is a label for an operation."]},"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new HN([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[i,o]of this._editStacks){const r=o.getClosestFutureElement();r&&r.groupId===e&&(!t||r.groupOrder<t.groupOrder)&&(t=r,n=i)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof uf){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[i,o]=this._findClosestRedoElementInGroup(n.groupId);if(n!==i&&o)return this._redo(o)}try{return n.type===1?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};pA=zae([m6(0,w0),m6(1,En)],pA);class Ly{constructor(e){this.returnValue=e}}st(a9,pA,1);function ms(s,e,t){return Math.min(Math.max(s,e),t)}class gK{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class Uae{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}const l9=tt("environmentService");var jae=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},b6=function(s,e){return function(t,n){e(t,n,s)}};const ir=tt("ILanguageFeatureDebounceService");var tL;(function(s){const e=new WeakMap;let t=0;function n(i){let o=e.get(i);return o===void 0&&(o=++t,e.set(i,o)),o}s.of=n})(tL||(tL={}));class qae{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class Kae{constructor(e,t,n,i,o,r){this._logService=e,this._name=t,this._registry=n,this._default=i,this._min=o,this._max=r,this._cache=new ic(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>_T(tL.of(n),t),0)}get(e){const t=this._key(e),n=this._cache.get(t);return n?ms(n.value,this._min,this._max):this.default()}update(e,t){const n=this._key(e);let i=this._cache.get(n);i||(i=new Uae(6),this._cache.set(n,i));const o=ms(i.update(t),this._min,this._max);return gT(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${o}ms`),o}_overall(){const e=new gK;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return ms(e,this._min,this._max)}}let _A=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,n){const i=(n==null?void 0:n.min)??50,o=(n==null?void 0:n.max)??i**2,r=(n==null?void 0:n.key)??void 0,a=`${tL.of(e)},${i}${r?","+r:""}`;let l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new qae(i*1.5)):l=new Kae(this._logService,t,e,this._overallAverage()|0||i*1.5,i,o),this._data.set(a,l)),l}_overallAverage(){const e=new gK;for(const t of this._data.values())e.update(t.default());return e.value}};_A=jae([b6(0,Hi),b6(1,l9)],_A);st(ir,_A,1);class $s{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e);const i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),i&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),i=this.getFontStyle(e);let o=`color: ${t[n]};`;i&1&&(o+="font-style: italic;"),i&2&&(o+="font-weight: bold;");let r="";return i&4&&(r+=" underline"),i&8&&(r+=" line-through"),r&&(o+=`text-decoration:${r};`),o}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}}function du(s){let e=0,t=0,n=0,i=0;for(let o=0,r=s.length;o<r;o++){const a=s.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<r&&s.charCodeAt(o+1)===10?(i|=2,o++):i|=3,n=o+1):a===10&&(i|=1,e===0&&(t=o),e++,n=o+1)}return e===0&&(t=s.length),[e,t,s.length-n,i]}class DC{static create(e,t){return new DC(e,new nL(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new L(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[i,o,r]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new DC(this._startLineNumber,i),new DC(this._startLineNumber+r,o)]}applyEdit(e,t){const[n,i,o]=du(t);this.acceptEdit(e,n,i,o,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,i,o){this._acceptDeleteRange(e),this._acceptInsertText(new A(e.startLineNumber,e.startColumn),t,n,i,o),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const o=n-t;this._startLineNumber-=o;return}const i=this._tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const o=-t;this._startLineNumber-=o,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,i,o){if(t===0&&n===0)return;const r=e.lineNumber-this._startLineNumber;if(r<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();r>=a+1||this._tokens.acceptInsertText(r,e.column-1,t,n,i,o)}}class nL{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new L(0,t+1,n,i+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const i=t+Math.floor((n-t)/2),o=this._getDeltaLine(i);if(o<e)t=i+1;else if(o>e)n=i-1;else{let r=i;for(;r>t&&this._getDeltaLine(r-1)===e;)r--;let a=i;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new v6(this._tokens.subarray(4*r,4*a+4))}}return this._getDeltaLine(t)===e?new v6(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,i){const o=this._tokens,r=this._tokenCount;let a=0,l=!1,c=0;for(let d=0;d<r;d++){const h=4*d,u=o[h],f=o[h+1],g=o[h+2],p=o[h+3];if((u>e||u===e&&g>=t)&&(u<n||u===n&&f<=i))l=!0;else{if(a===0&&(c=u),l){const _=4*a;o[_]=u-c,o[_+1]=f,o[_+2]=g,o[_+3]=p}a++}}return this._tokenCount=a,c}split(e,t,n,i){const o=this._tokens,r=this._tokenCount,a=[],l=[];let c=a,d=0,h=0;for(let u=0;u<r;u++){const f=4*u,g=o[f],p=o[f+1],_=o[f+2],b=o[f+3];if(g>e||g===e&&_>=t){if(g<n||g===n&&p<=i)continue;c!==l&&(c=l,d=0,h=g)}c[d++]=g-h,c[d++]=p,c[d++]=_,c[d++]=b}return[new nL(new Uint32Array(a)),new nL(new Uint32Array(l)),h]}acceptDeleteRange(e,t,n,i,o){const r=this._tokens,a=this._tokenCount,l=i-t;let c=0,d=!1;for(let h=0;h<a;h++){const u=4*h;let f=r[u],g=r[u+1],p=r[u+2];const _=r[u+3];if(f<t||f===t&&p<=n){c++;continue}else if(f===t&&g<n)f===i&&p>o?p-=o-n:p=n;else if(f===t&&g===n)if(f===i&&p>o)p-=o-n;else{d=!0;continue}else if(f<i||f===i&&g<o)if(f===i&&p>o)f=t,g=n,p=g+(p-o);else{d=!0;continue}else if(f>i){if(l===0&&!d){c=a;break}f-=l}else if(f===i&&g>=o)e&&f===0&&(g+=e,p+=e),f-=l,g-=o-n,p-=o-n;else throw new Error("Not possible!");const b=4*c;r[b]=f,r[b+1]=g,r[b+2]=p,r[b+3]=_,c++}this._tokenCount=c}acceptInsertText(e,t,n,i,o,r){const a=n===0&&i===1&&(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122),l=this._tokens,c=this._tokenCount;for(let d=0;d<c;d++){const h=4*d;let u=l[h],f=l[h+1],g=l[h+2];if(!(u<e||u===e&&g<t)){if(u===e&&g===t)if(a)g+=1;else continue;else if(u===e&&f<t&&t<g)n===0?g+=i:g=t;else{if(u===e&&f===t&&a)continue;if(u===e)if(u+=n,n===0)f+=i,g+=i;else{const p=g-f;f=o+(f-t),g=f+p}else u+=n}l[h]=u,l[h+1]=f,l[h+2]=g}}}}class v6{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var Gae=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},VN=function(s,e){return function(t,n){e(t,n,s)}};let bA=class{constructor(e,t,n,i){this._legend=e,this._themeService=t,this._languageService=n,this._logService=i,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new vA}getMetadata(e,t,n){const i=this._languageService.languageIdCodec.encodeLanguageId(n),o=this._hashTable.get(e,t,i);let r;if(o)r=o.metadata;else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let h=0;c>0&&h<this._legend.tokenModifiers.length;h++)c&1&&l.push(this._legend.tokenModifiers[h]),c=c>>1;const d=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof d>"u")r=2147483647;else{if(r=0,typeof d.italic<"u"){const h=(d.italic?1:0)<<11;r|=h|1}if(typeof d.bold<"u"){const h=(d.bold?2:0)<<11;r|=h|2}if(typeof d.underline<"u"){const h=(d.underline?4:0)<<11;r|=h|4}if(typeof d.strikethrough<"u"){const h=(d.strikethrough?8:0)<<11;r|=h|8}if(d.foreground){const h=d.foreground<<15;r|=h|16}r===0&&(r=2147483647)}}else r=2147483647,a="not-in-legend";this._hashTable.add(e,t,i,r)}return r}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,n,i,o){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${n}: The provided start offset ${i} is outside the previous data (length ${o}).`))}};bA=Gae([VN(1,Yn),VN(2,tn),VN(3,Hi)],bA);function mK(s,e,t){const n=s.data,i=s.data.length/5|0,o=Math.max(Math.ceil(i/1024),400),r=[];let a=0,l=1,c=0;for(;a<i;){const d=a;let h=Math.min(d+o,i);if(h<i){let v=h;for(;v-1>d&&n[5*v]===0;)v--;if(v-1===d){let C=h;for(;C+1<i&&n[5*C]===0;)C++;h=C}else h=v}let u=new Uint32Array((h-d)*4),f=0,g=0,p=0,_=0;for(;a<h;){const v=5*a,C=n[v],w=n[v+1],y=l+C|0,k=C===0?c+w|0:w,x=n[v+2],D=k+x|0,N=n[v+3],W=n[v+4];if(D<=k)e.warnInvalidLengthSemanticTokens(y,k+1);else if(p===y&&_>k)e.warnOverlappingSemanticTokens(y,k+1);else{const B=e.getMetadata(N,W,t);B!==2147483647&&(g===0&&(g=y),u[f]=y-g,u[f+1]=k,u[f+2]=D,u[f+3]=B,f+=4,p=y,_=D)}l=y,c=k,a++}f!==u.length&&(u=u.subarray(0,f));const b=DC.create(g,u);r.push(b)}return r}class Zae{constructor(e,t,n,i){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=i,this.next=null}}const Tc=class Tc{constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=Tc._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Tc._SIZES.length?2/3*this._currentLength:0),this._elements=[],Tc._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const i=this._hashFunc(e,t,n);let o=this._elements[i];for(;o;){if(o.tokenTypeIndex===e&&o.tokenModifierSet===t&&o.languageId===n)return o;o=o.next}return null}add(e,t,n,i){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const o=this._elements;this._currentLengthIndex++,this._currentLength=Tc._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<Tc._SIZES.length?2/3*this._currentLength:0),this._elements=[],Tc._nullOutEntries(this._elements,this._currentLength);for(const r of o){let a=r;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new Zae(e,t,n,i))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}};Tc._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143];let vA=Tc;const OT=tt("semanticTokensStylingService");var Yae=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},zN=function(s,e){return function(t,n){e(t,n,s)}};let CA=class extends F{constructor(e,t,n){super(),this._themeService=e,this._logService=t,this._languageService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new bA(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};CA=Yae([zN(0,Yn),zN(1,Hi),zN(2,tn)],CA);st(OT,CA,1);function Ud(s){return s===47||s===92}function pK(s){return s.replace(/[\\/]/g,Fn.sep)}function Xae(s){return s.indexOf("/")===-1&&(s=pK(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}function C6(s,e=Fn.sep){if(!s)return"";const t=s.length,n=s.charCodeAt(0);if(Ud(n)){if(Ud(s.charCodeAt(1))&&!Ud(s.charCodeAt(2))){let o=3;const r=o;for(;o<t&&!Ud(s.charCodeAt(o));o++);if(r!==o&&!Ud(s.charCodeAt(o+1))){for(o+=1;o<t;o++)if(Ud(s.charCodeAt(o)))return s.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(_K(n)&&s.charCodeAt(1)===58)return Ud(s.charCodeAt(2))?s.slice(0,2)+e:s.slice(0,2);let i=s.indexOf("://");if(i!==-1){for(i+=3;i<t;i++)if(Ud(s.charCodeAt(i)))return s.slice(0,i+1)}return""}function wA(s,e,t,n=Fa){if(s===e)return!0;if(!s||!e||e.length>s.length)return!1;if(t){if(!A3(s,e))return!1;if(e.length===s.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,s.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),s.indexOf(e)===0}function _K(s){return s>=65&&s<=90||s>=97&&s<=122}function Qae(s,e=Bi){return e?_K(s.charCodeAt(0))&&s.charCodeAt(1)===58:!1}const xy="**",w6="/",WS="[/\\\\]",BS="[^/\\\\]",Jae=/\//g;function y6(s,e){switch(s){case 0:return"";case 1:return`${BS}*?`;default:return`(?:${WS}|${BS}+${WS}${e?`|${WS}${BS}+`:""})*?`}}function S6(s,e){if(!s)return[];const t=[];let n=!1,i=!1,o="";for(const r of s){switch(r){case e:if(!n&&!i){t.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}o+=r}return o&&t.push(o),t}function bK(s){if(!s)return"";let e="";const t=S6(s,w6);if(t.every(n=>n===xy))e=".*";else{let n=!1;t.forEach((i,o)=>{if(i===xy){if(n)return;e+=y6(2,o===t.length-1)}else{let r=!1,a="",l=!1,c="";for(const d of i){if(d!=="}"&&r){a+=d;continue}if(l&&(d!=="]"||!c)){let h;d==="-"?h=d:(d==="^"||d==="!")&&!c?h="^":d===w6?h="":h=Xo(d),c+=h;continue}switch(d){case"{":r=!0;continue;case"[":l=!0;continue;case"}":{const u=`(?:${S6(a,",").map(f=>bK(f)).join("|")})`;e+=u,r=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=BS;continue;case"*":e+=y6(1);continue;default:e+=Xo(d)}}o<t.length-1&&(t[o+1]!==xy||o+2<t.length)&&(e+=WS)}n=i===xy})}return e}const ele=/^\*\*\/\*\.[\w\.-]+$/,tle=/^\*\*\/([\w\.-]+)\/?$/,nle=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,ile=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,sle=/^\*\*((\/[\w\.-]+)+)\/?$/,ole=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,k6=new ic(1e4),L6=function(){return!1},$l=function(){return null};function c9(s,e){if(!s)return $l;let t;typeof s!="string"?t=s.pattern:t=s,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let i=k6.get(n);if(i)return x6(i,s);let o;return ele.test(t)?i=rle(t.substr(4),t):(o=tle.exec($N(t,e)))?i=ale(o[1],t):(e.trimForExclusions?ile:nle).test(t)?i=lle(t,e):(o=sle.exec($N(t,e)))?i=D6(o[1].substr(1),t,!0):(o=ole.exec($N(t,e)))?i=D6(o[1],t,!1):i=cle(t),k6.set(n,i),x6(i,s)}function x6(s,e){if(typeof e=="string")return s;const t=function(n,i){return wA(n,e.base,!Ds)?s(g0(n.substr(e.base.length),Fa),i):null};return t.allBasenames=s.allBasenames,t.allPaths=s.allPaths,t.basenames=s.basenames,t.patterns=s.patterns,t}function $N(s,e){return e.trimForExclusions&&s.endsWith("/**")?s.substr(0,s.length-2):s}function rle(s,e){return function(t,n){return typeof t=="string"&&t.endsWith(s)?e:null}}function ale(s,e){const t=`/${s}`,n=`\\${s}`,i=function(r,a){return typeof r!="string"?null:a?a===s?e:null:r===s||r.endsWith(t)||r.endsWith(n)?e:null},o=[s];return i.basenames=o,i.patterns=[e],i.allBasenames=o,i}function lle(s,e){const t=CK(s.slice(1,-1).split(",").map(a=>c9(a,e)).filter(a=>a!==$l),s),n=t.length;if(!n)return $l;if(n===1)return t[0];const i=function(a,l){for(let c=0,d=t.length;c<d;c++)if(t[c](a,l))return s;return null},o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(i.allPaths=r),i}function D6(s,e,t){const n=Fa===Fn.sep,i=n?s:s.replace(Jae,Fa),o=Fa+i,r=Fn.sep+s;let a;return t?a=function(l,c){return typeof l=="string"&&(l===i||l.endsWith(o)||!n&&(l===s||l.endsWith(r)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===i||!n&&l===s)?e:null},a.allPaths=[(t?"*/":"./")+s],a}function cle(s){try{const e=new RegExp(`^${bK(s)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?s:null}}catch{return $l}}function dle(s,e,t){return!s||typeof e!="string"?!1:vK(s)(e,void 0,t)}function vK(s,e={}){if(!s)return L6;if(typeof s=="string"||hle(s)){const t=c9(s,e);if(t===$l)return L6;const n=function(i,o){return!!t(i,o)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return ule(s,e)}function hle(s){const e=s;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function ule(s,e){const t=CK(Object.getOwnPropertyNames(s).map(a=>fle(a,s[a],e)).filter(a=>a!==$l)),n=t.length;if(!n)return $l;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(d,h){let u;for(let f=0,g=t.length;f<g;f++){const p=t[f](d,h);if(typeof p=="string")return p;FM(p)&&(u||(u=[]),u.push(p))}return u?(async()=>{for(const f of u){const g=await f;if(typeof g=="string")return g}return null})():null},l=t.find(d=>!!d.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((d,h)=>h.allPaths?d.concat(h.allPaths):d,[]);return c.length&&(a.allPaths=c),a}const i=function(a,l,c){let d,h;for(let u=0,f=t.length;u<f;u++){const g=t[u];g.requiresSiblings&&c&&(l||(l=Eh(a)),d||(d=l.substr(0,l.length-Kne(a).length)));const p=g(a,l,d,c);if(typeof p=="string")return p;FM(p)&&(h||(h=[]),h.push(p))}return h?(async()=>{for(const u of h){const f=await u;if(typeof f=="string")return f}return null})():null},o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);const r=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return r.length&&(i.allPaths=r),i}function fle(s,e,t){if(e===!1)return $l;const n=c9(s,t);if(n===$l)return $l;if(typeof e=="boolean")return n;if(e){const i=e.when;if(typeof i=="string"){const o=(r,a,l,c)=>{if(!c||!n(r,a))return null;const d=i.replace("$(basename)",()=>l),h=c(d);return FM(h)?h.then(u=>u?s:null):h?s:null};return o.requiresSiblings=!0,o}}return n}function CK(s,e){const t=s.filter(a=>!!a.basenames);if(t.length<2)return s;const n=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const o=function(a,l){if(typeof a!="string")return null;if(!l){let d;for(d=a.length;d>0;d--){const h=a.charCodeAt(d-1);if(h===47||h===92)break}l=a.substr(d)}const c=n.indexOf(l);return c!==-1?i[c]:null};o.basenames=n,o.patterns=i,o.allBasenames=n;const r=s.filter(a=>!a.basenames);return r.push(o),r}function d9(s,e,t,n,i,o){if(Array.isArray(s)){let r=0;for(const a of s){const l=d9(a,e,t,n,i,o);if(l===10)return l;l>r&&(r=l)}return r}else{if(typeof s=="string")return n?s==="*"?5:s===t?10:0:0;if(s){const{language:r,pattern:a,scheme:l,hasAccessToAllModels:c,notebookType:d}=s;if(!n&&!c)return 0;d&&i&&(e=i);let h=0;if(l)if(l===e.scheme)h=10;else if(l==="*")h=5;else return 0;if(r)if(r===t)h=10;else if(r==="*")h=Math.max(h,5);else return 0;if(d)if(d===o)h=10;else if(d==="*"&&o!==void 0)h=Math.max(h,5);else return 0;if(a){let u;if(typeof a=="string"?u=a:u={...a,base:Fj(a.base)},u===e.fsPath||dle(u,e.fsPath))h=10;else return 0}return h}else return 0}}function wK(s){return typeof s=="string"?!1:Array.isArray(s)?s.every(wK):!!s.exclusive}class I6{constructor(e,t,n,i,o){this.uri=e,this.languageId=t,this.notebookUri=n,this.notebookType=i,this.recursive=o}equals(e){var t,n;return this.notebookType===e.notebookType&&this.languageId===e.languageId&&this.uri.toString()===e.uri.toString()&&((t=this.notebookUri)==null?void 0:t.toString())===((n=e.notebookUri)==null?void 0:n.toString())&&this.recursive===e.recursive}}class sn{constructor(e){this._notebookInfoResolver=e,this._clock=0,this._entries=[],this._onDidChange=new O,this.onDidChange=this._onDidChange.event}register(e,t){let n={selector:e,provider:t,_score:-1,_time:this._clock++};return this._entries.push(n),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),ve(()=>{if(n){const i=this._entries.indexOf(n);i>=0&&(this._entries.splice(i,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),n=void 0)}})}has(e){return this.all(e).length>0}all(e){if(!e)return[];this._updateScores(e,!1);const t=[];for(const n of this._entries)n._score>0&&t.push(n.provider);return t}ordered(e,t=!1){const n=[];return this._orderedForEach(e,t,i=>n.push(i.provider)),n}orderedGroups(e){const t=[];let n,i;return this._orderedForEach(e,!1,o=>{n&&i===o._score?n.push(o.provider):(i=o._score,n=[o.provider],t.push(n))}),t}_orderedForEach(e,t,n){this._updateScores(e,t);for(const i of this._entries)i._score>0&&n(i)}_updateScores(e,t){var o,r;const n=(o=this._notebookInfoResolver)==null?void 0:o.call(this,e.uri),i=n?new I6(e.uri,e.getLanguageId(),n.uri,n.type,t):new I6(e.uri,e.getLanguageId(),void 0,void 0,t);if(!((r=this._lastCandidate)!=null&&r.equals(i))){this._lastCandidate=i;for(const a of this._entries)if(a._score=d9(a.selector,i.uri,i.languageId,Yq(e),i.notebookUri,i.notebookType),wK(a.selector)&&a._score>0)if(t)a._score=0;else{for(const l of this._entries)l._score=0;a._score=1e3;break}this._entries.sort(sn._compareByScoreAndTime)}}static _compareByScoreAndTime(e,t){return e._score<t._score?1:e._score>t._score?-1:eC(e.selector)&&!eC(t.selector)?1:!eC(e.selector)&&eC(t.selector)?-1:e._time<t._time?1:e._time>t._time?-1:0}}function eC(s){return typeof s=="string"?!1:Array.isArray(s)?s.some(eC):!!s.isBuiltin}class gle{constructor(){this.referenceProvider=new sn(this._score.bind(this)),this.renameProvider=new sn(this._score.bind(this)),this.newSymbolNamesProvider=new sn(this._score.bind(this)),this.codeActionProvider=new sn(this._score.bind(this)),this.definitionProvider=new sn(this._score.bind(this)),this.typeDefinitionProvider=new sn(this._score.bind(this)),this.declarationProvider=new sn(this._score.bind(this)),this.implementationProvider=new sn(this._score.bind(this)),this.documentSymbolProvider=new sn(this._score.bind(this)),this.inlayHintsProvider=new sn(this._score.bind(this)),this.colorProvider=new sn(this._score.bind(this)),this.codeLensProvider=new sn(this._score.bind(this)),this.documentFormattingEditProvider=new sn(this._score.bind(this)),this.documentRangeFormattingEditProvider=new sn(this._score.bind(this)),this.onTypeFormattingEditProvider=new sn(this._score.bind(this)),this.signatureHelpProvider=new sn(this._score.bind(this)),this.hoverProvider=new sn(this._score.bind(this)),this.documentHighlightProvider=new sn(this._score.bind(this)),this.multiDocumentHighlightProvider=new sn(this._score.bind(this)),this.selectionRangeProvider=new sn(this._score.bind(this)),this.foldingRangeProvider=new sn(this._score.bind(this)),this.linkProvider=new sn(this._score.bind(this)),this.inlineCompletionsProvider=new sn(this._score.bind(this)),this.inlineEditProvider=new sn(this._score.bind(this)),this.completionProvider=new sn(this._score.bind(this)),this.linkedEditingRangeProvider=new sn(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new sn(this._score.bind(this)),this.documentSemanticTokensProvider=new sn(this._score.bind(this)),this.documentDropEditProvider=new sn(this._score.bind(this)),this.documentPasteEditProvider=new sn(this._score.bind(this))}_score(e){var t;return(t=this._notebookTypeResolver)==null?void 0:t.call(this,e)}}st(ue,gle,1);function h9(s){return`--vscode-${s.replace(/\./g,"-")}`}function de(s){return`var(${h9(s)})`}function mle(s,e){return`var(${h9(s)}, ${e})`}function ple(s){return s!==null&&typeof s=="object"&&"light"in s&&"dark"in s}const yK={ColorContribution:"base.contributions.colors"},_le="default";class ble{constructor(){this._onDidChangeSchema=new O,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(e,t,n,i=!1,o){const r={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:o};this.colorsById[e]=r;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),i&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=m("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:n,oneOf:[a,{type:"string",const:_le,description:m("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n!=null&&n.defaults){const i=ple(n.defaults)?n.defaults[t.type]:n.defaults;return ma(i,t)}}getColorSchema(){return this.colorSchema}toString(){const e=(t,n)=>{const i=t.indexOf(".")===-1?0:1,o=n.indexOf(".")===-1?0:1;return i!==o?i-o:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const FT=new ble;ln.add(yK.ColorContribution,FT);function T(s,e,t,n,i){return FT.registerColor(s,e,t,n,i)}function vle(s,e){var t,n,i,o;switch(s.op){case 0:return(t=ma(s.value,e))==null?void 0:t.darken(s.factor);case 1:return(n=ma(s.value,e))==null?void 0:n.lighten(s.factor);case 2:return(i=ma(s.value,e))==null?void 0:i.transparent(s.factor);case 3:{const r=ma(s.background,e);return r?(o=ma(s.value,e))==null?void 0:o.makeOpaque(r):ma(s.value,e)}case 4:for(const r of s.values){const a=ma(r,e);if(a)return a}return;case 6:return ma(e.defines(s.if)?s.then:s.else,e);case 5:{const r=ma(s.value,e);if(!r)return;const a=ma(s.background,e);return a?r.isDarkerThan(a)?Z.getLighterColor(r,a,s.factor).transparent(s.transparency):Z.getDarkerColor(r,a,s.factor).transparent(s.transparency):r.transparent(s.factor*s.transparency)}default:throw TT()}}function Tm(s,e){return{op:0,value:s,factor:e}}function Va(s,e){return{op:1,value:s,factor:e}}function qe(s,e){return{op:2,value:s,factor:e}}function Zw(...s){return{op:4,values:s}}function Cle(s,e,t){return{op:6,if:s,then:e,else:t}}function T6(s,e,t,n){return{op:5,value:s,background:e,factor:t,transparency:n}}function ma(s,e){if(s!==null){if(typeof s=="string")return s[0]==="#"?Z.fromHex(s):e.getColor(s);if(s instanceof Z)return s;if(typeof s=="object")return vle(s,e)}}const SK="vscode://schemas/workbench-colors",kK=ln.as(MT.JSONContribution);kK.registerSchema(SK,FT.getColorSchema());const E6=new It(()=>kK.notifySchemaChanged(SK),200);FT.onDidChangeSchema(()=>{E6.isScheduled()||E6.schedule()});const Xe=T("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},m("foreground","Overall foreground color. This color is only used if not overridden by a component."));T("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},m("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component."));T("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},m("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component."));T("descriptionForeground",{light:"#717171",dark:qe(Xe,.7),hcDark:qe(Xe,.7),hcLight:qe(Xe,.7)},m("descriptionForeground","Foreground color for description text providing additional information, for example for a label."));const iL=T("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},m("iconForeground","The default color for icons in the workbench.")),Kl=T("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},m("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),ct=T("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},m("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Zt=T("contrastActiveBorder",{light:null,dark:null,hcDark:Kl,hcLight:Kl},m("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast."));T("selection.background",null,m("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor."));const wle=T("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},m("textLinkForeground","Foreground color for links in text."));T("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},m("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover."));T("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:Z.black,hcLight:"#292929"},m("textSeparatorForeground","Color for text separators."));T("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},m("textPreformatForeground","Foreground color for preformatted text segments."));T("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},m("textPreformatBackground","Background color for preformatted text segments."));T("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},m("textBlockQuoteBackground","Background color for block quotes in text."));T("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:Z.white,hcLight:"#292929"},m("textBlockQuoteBorder","Border color for block quotes in text."));T("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:Z.black,hcLight:"#F2F2F2"},m("textCodeBlockBackground","Background color for code blocks in text."));T("sash.hoverBorder",Kl,m("sashActiveBorder","Border color of active sashes."));const HS=T("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:Z.black,hcLight:"#0F4A85"},m("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),yle=T("badge.foreground",{dark:Z.white,light:"#333",hcDark:Z.white,hcLight:Z.white},m("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),u9=T("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},m("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),LK=T("scrollbarSlider.background",{dark:Z.fromHex("#797979").transparent(.4),light:Z.fromHex("#646464").transparent(.4),hcDark:qe(ct,.6),hcLight:qe(ct,.4)},m("scrollbarSliderBackground","Scrollbar slider background color.")),xK=T("scrollbarSlider.hoverBackground",{dark:Z.fromHex("#646464").transparent(.7),light:Z.fromHex("#646464").transparent(.7),hcDark:qe(ct,.8),hcLight:qe(ct,.8)},m("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),DK=T("scrollbarSlider.activeBackground",{dark:Z.fromHex("#BFBFBF").transparent(.4),light:Z.fromHex("#000000").transparent(.6),hcDark:ct,hcLight:ct},m("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),Sle=T("progressBar.background",{dark:Z.fromHex("#0E70C0"),light:Z.fromHex("#0E70C0"),hcDark:ct,hcLight:ct},m("progressBarBackground","Background color of the progress bar that can show for long running operations.")),oa=T("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:Z.black,hcLight:Z.white},m("editorBackground","Editor background color.")),sc=T("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:Z.white,hcLight:Xe},m("editorForeground","Editor default foreground color."));T("editorStickyScroll.background",oa,m("editorStickyScrollBackground","Background color of sticky scroll in the editor"));T("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:Z.fromHex("#0F4A85").transparent(.1)},m("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor"));T("editorStickyScroll.border",{dark:null,light:null,hcDark:ct,hcLight:ct},m("editorStickyScrollBorder","Border color of sticky scroll in the editor"));T("editorStickyScroll.shadow",u9,m("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor"));const jo=T("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:Z.white},m("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),WT=T("editorWidget.foreground",Xe,m("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),f9=T("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:ct,hcLight:ct},m("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));T("editorWidget.resizeBorder",null,m("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));T("editorError.background",null,m("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const BT=T("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},m("editorError.foreground","Foreground color of error squigglies in the editor.")),kle=T("editorError.border",{dark:null,light:null,hcDark:Z.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},m("errorBorder","If set, color of double underlines for errors in the editor.")),Lle=T("editorWarning.background",null,m("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),vd=T("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},m("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),Yw=T("editorWarning.border",{dark:null,light:null,hcDark:Z.fromHex("#FFCC00").transparent(.8),hcLight:Z.fromHex("#FFCC00").transparent(.8)},m("warningBorder","If set, color of double underlines for warnings in the editor."));T("editorInfo.background",null,m("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const Gl=T("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},m("editorInfo.foreground","Foreground color of info squigglies in the editor.")),Xw=T("editorInfo.border",{dark:null,light:null,hcDark:Z.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},m("infoBorder","If set, color of double underlines for infos in the editor.")),xle=T("editorHint.foreground",{dark:Z.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},m("editorHint.foreground","Foreground color of hint squigglies in the editor."));T("editorHint.border",{dark:null,light:null,hcDark:Z.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},m("hintBorder","If set, color of double underlines for hints in the editor."));const Dle=T("editorLink.activeForeground",{dark:"#4E94CE",light:Z.blue,hcDark:Z.cyan,hcLight:"#292929"},m("activeLinkForeground","Color of active links.")),_h=T("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},m("editorSelectionBackground","Color of the editor selection.")),Ile=T("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:Z.white},m("editorSelectionForeground","Color of the selected text for high contrast.")),IK=T("editor.inactiveSelectionBackground",{light:qe(_h,.5),dark:qe(_h,.5),hcDark:qe(_h,.7),hcLight:qe(_h,.5)},m("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),g9=T("editor.selectionHighlightBackground",{light:T6(_h,oa,.3,.6),dark:T6(_h,oa,.3,.6),hcDark:null,hcLight:null},m("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Zt,hcLight:Zt},m("editorSelectionHighlightBorder","Border color for regions with the same content as the selection."));T("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},m("editorFindMatch","Color of the current search match."));const Tle=T("editor.findMatchForeground",null,m("editorFindMatchForeground","Text color of the current search match.")),Kc=T("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},m("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),Ele=T("editor.findMatchHighlightForeground",null,m("findMatchHighlightForeground","Foreground color of the other search matches."),!0);T("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},m("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.findMatchBorder",{light:null,dark:null,hcDark:Zt,hcLight:Zt},m("editorFindMatchBorder","Border color of the current search match."));const bh=T("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Zt,hcLight:Zt},m("findMatchHighlightBorder","Border color of the other search matches.")),Nle=T("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:qe(Zt,.4),hcLight:qe(Zt,.4)},m("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},m("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0);const sL=T("editorHoverWidget.background",jo,m("hoverBackground","Background color of the editor hover."));T("editorHoverWidget.foreground",WT,m("hoverForeground","Foreground color of the editor hover."));const TK=T("editorHoverWidget.border",f9,m("hoverBorder","Border color of the editor hover."));T("editorHoverWidget.statusBarBackground",{dark:Va(sL,.2),light:Tm(sL,.05),hcDark:jo,hcLight:jo},m("statusBarBackground","Background color of the editor hover status bar."));const m9=T("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:Z.white,hcLight:Z.black},m("editorInlayHintForeground","Foreground color of inline hints")),p9=T("editorInlayHint.background",{dark:qe(HS,.1),light:qe(HS,.1),hcDark:qe(Z.white,.1),hcLight:qe(HS,.1)},m("editorInlayHintBackground","Background color of inline hints")),Rle=T("editorInlayHint.typeForeground",m9,m("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),Mle=T("editorInlayHint.typeBackground",p9,m("editorInlayHintBackgroundTypes","Background color of inline hints for types")),Ale=T("editorInlayHint.parameterForeground",m9,m("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),Ple=T("editorInlayHint.parameterBackground",p9,m("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),Ole=T("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},m("editorLightBulbForeground","The color used for the lightbulb actions icon."));T("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon."));T("editorLightBulbAi.foreground",Ole,m("editorLightBulbAiForeground","The color used for the lightbulb AI icon."));T("editor.snippetTabstopHighlightBackground",{dark:new Z(new ht(124,124,124,.3)),light:new Z(new ht(10,50,100,.2)),hcDark:new Z(new ht(124,124,124,.3)),hcLight:new Z(new ht(10,50,100,.2))},m("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop."));T("editor.snippetTabstopHighlightBorder",null,m("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop."));T("editor.snippetFinalTabstopHighlightBackground",null,m("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet."));T("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new Z(new ht(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},m("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet."));const yA=new Z(new ht(155,185,85,.2)),SA=new Z(new ht(255,0,0,.2)),Fle=T("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},m("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Wle=T("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},m("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);T("diffEditor.insertedLineBackground",{dark:yA,light:yA,hcDark:null,hcLight:null},m("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);T("diffEditor.removedLineBackground",{dark:SA,light:SA,hcDark:null,hcLight:null},m("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);T("diffEditorGutter.insertedLineBackground",null,m("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted."));T("diffEditorGutter.removedLineBackground",null,m("diffEditorRemovedLineGutter","Background color for the margin where lines got removed."));const Ble=T("diffEditorOverview.insertedForeground",null,m("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),Hle=T("diffEditorOverview.removedForeground",null,m("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content."));T("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},m("diffEditorInsertedOutline","Outline color for the text that got inserted."));T("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},m("diffEditorRemovedOutline","Outline color for text that got removed."));T("diffEditor.border",{dark:null,light:null,hcDark:ct,hcLight:ct},m("diffEditorBorder","Border color between the two text editors."));T("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},m("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));T("diffEditor.unchangedRegionBackground","sideBar.background",m("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor."));T("diffEditor.unchangedRegionForeground","foreground",m("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor."));T("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},m("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor."));const ev=T("widget.shadow",{dark:qe(Z.black,.36),light:qe(Z.black,.16),hcDark:null,hcLight:null},m("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),EK=T("widget.border",{dark:null,light:null,hcDark:ct,hcLight:ct},m("widgetBorder","Border color of widgets such as find/replace inside the editor.")),N6=T("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},m("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse"));T("toolbar.hoverOutline",{dark:null,light:null,hcDark:Zt,hcLight:Zt},m("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse"));T("toolbar.activeBackground",{dark:Va(N6,.1),light:Tm(N6,.1),hcDark:null,hcLight:null},m("toolbarActiveBackground","Toolbar background when holding the mouse over actions"));const Vle=T("breadcrumb.foreground",qe(Xe,.8),m("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),zle=T("breadcrumb.background",oa,m("breadcrumbsBackground","Background color of breadcrumb items.")),R6=T("breadcrumb.focusForeground",{light:Tm(Xe,.2),dark:Va(Xe,.1),hcDark:Va(Xe,.1),hcLight:Va(Xe,.1)},m("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),$le=T("breadcrumb.activeSelectionForeground",{light:Tm(Xe,.2),dark:Va(Xe,.1),hcDark:Va(Xe,.1),hcLight:Va(Xe,.1)},m("breadcrumbsSelectedForeground","Color of selected breadcrumb items."));T("breadcrumbPicker.background",jo,m("breadcrumbsSelectedBackground","Background color of breadcrumb item picker."));const NK=.5,M6=Z.fromHex("#40C8AE").transparent(NK),A6=Z.fromHex("#40A6FF").transparent(NK),P6=Z.fromHex("#606060").transparent(.4),_9=.4,db=1,kA=T("merge.currentHeaderBackground",{dark:M6,light:M6,hcDark:null,hcLight:null},m("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);T("merge.currentContentBackground",qe(kA,_9),m("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const LA=T("merge.incomingHeaderBackground",{dark:A6,light:A6,hcDark:null,hcLight:null},m("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);T("merge.incomingContentBackground",qe(LA,_9),m("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const xA=T("merge.commonHeaderBackground",{dark:P6,light:P6,hcDark:null,hcLight:null},m("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);T("merge.commonContentBackground",qe(xA,_9),m("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const hb=T("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},m("mergeBorder","Border color on headers and the splitter in inline merge-conflicts."));T("editorOverviewRuler.currentContentForeground",{dark:qe(kA,db),light:qe(kA,db),hcDark:hb,hcLight:hb},m("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts."));T("editorOverviewRuler.incomingContentForeground",{dark:qe(LA,db),light:qe(LA,db),hcDark:hb,hcLight:hb},m("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts."));T("editorOverviewRuler.commonContentForeground",{dark:qe(xA,db),light:qe(xA,db),hcDark:hb,hcLight:hb},m("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts."));const UN=T("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},m("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),RK=T("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",m("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Ule=T("problemsErrorIcon.foreground",BT,m("problemsErrorIconForeground","The color used for the problems error icon.")),jle=T("problemsWarningIcon.foreground",vd,m("problemsWarningIconForeground","The color used for the problems warning icon.")),qle=T("problemsInfoIcon.foreground",Gl,m("problemsInfoIconForeground","The color used for the problems info icon.")),DA=T("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},m("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),HT=T("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},m("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),O6=T("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},m("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),Kle=T("minimap.infoHighlight",{dark:Gl,light:Gl,hcDark:Xw,hcLight:Xw},m("minimapInfo","Minimap marker color for infos.")),Gle=T("minimap.warningHighlight",{dark:vd,light:vd,hcDark:Yw,hcLight:Yw},m("overviewRuleWarning","Minimap marker color for warnings.")),Zle=T("minimap.errorHighlight",{dark:new Z(new ht(255,18,18,.7)),light:new Z(new ht(255,18,18,.7)),hcDark:new Z(new ht(255,50,50,1)),hcLight:"#B5200D"},m("minimapError","Minimap marker color for errors.")),Yle=T("minimap.background",null,m("minimapBackground","Minimap background color.")),Xle=T("minimap.foregroundOpacity",Z.fromHex("#000f"),m("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));T("minimapSlider.background",qe(LK,.5),m("minimapSliderBackground","Minimap slider background color."));T("minimapSlider.hoverBackground",qe(xK,.5),m("minimapSliderHoverBackground","Minimap slider background color when hovering."));T("minimapSlider.activeBackground",qe(DK,.5),m("minimapSliderActiveBackground","Minimap slider background color when clicked on."));T("charts.foreground",Xe,m("chartsForeground","The foreground color used in charts."));T("charts.lines",qe(Xe,.5),m("chartsLines","The color used for horizontal lines in charts."));T("charts.red",BT,m("chartsRed","The red color used in chart visualizations."));T("charts.blue",Gl,m("chartsBlue","The blue color used in chart visualizations."));T("charts.yellow",vd,m("chartsYellow","The yellow color used in chart visualizations."));T("charts.orange",DA,m("chartsOrange","The orange color used in chart visualizations."));T("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},m("chartsGreen","The green color used in chart visualizations."));T("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("chartsPurple","The purple color used in chart visualizations."));const IA=T("input.background",{dark:"#3C3C3C",light:Z.white,hcDark:Z.black,hcLight:Z.white},m("inputBoxBackground","Input box background.")),MK=T("input.foreground",Xe,m("inputBoxForeground","Input box foreground.")),AK=T("input.border",{dark:null,light:null,hcDark:ct,hcLight:ct},m("inputBoxBorder","Input box border.")),VT=T("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:ct,hcLight:ct},m("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),Qle=T("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},m("inputOption.hoverBackground","Background color of activated options in input fields.")),y0=T("inputOption.activeBackground",{dark:qe(Kl,.4),light:qe(Kl,.2),hcDark:Z.transparent,hcLight:Z.transparent},m("inputOption.activeBackground","Background hover color of options in input fields.")),zT=T("inputOption.activeForeground",{dark:Z.white,light:Z.black,hcDark:Xe,hcLight:Xe},m("inputOption.activeForeground","Foreground color of activated options in input fields."));T("input.placeholderForeground",{light:qe(Xe,.5),dark:qe(Xe,.5),hcDark:qe(Xe,.7),hcLight:qe(Xe,.7)},m("inputPlaceholderForeground","Input box foreground color for placeholder text."));const Jle=T("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:Z.black,hcLight:Z.white},m("inputValidationInfoBackground","Input validation background color for information severity.")),ece=T("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Xe},m("inputValidationInfoForeground","Input validation foreground color for information severity.")),tce=T("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:ct,hcLight:ct},m("inputValidationInfoBorder","Input validation border color for information severity.")),nce=T("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:Z.black,hcLight:Z.white},m("inputValidationWarningBackground","Input validation background color for warning severity.")),ice=T("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Xe},m("inputValidationWarningForeground","Input validation foreground color for warning severity.")),sce=T("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:ct,hcLight:ct},m("inputValidationWarningBorder","Input validation border color for warning severity.")),oce=T("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:Z.black,hcLight:Z.white},m("inputValidationErrorBackground","Input validation background color for error severity.")),rce=T("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Xe},m("inputValidationErrorForeground","Input validation foreground color for error severity.")),ace=T("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:ct,hcLight:ct},m("inputValidationErrorBorder","Input validation border color for error severity.")),$T=T("dropdown.background",{dark:"#3C3C3C",light:Z.white,hcDark:Z.black,hcLight:Z.white},m("dropdownBackground","Dropdown background.")),lce=T("dropdown.listBackground",{dark:null,light:null,hcDark:Z.black,hcLight:Z.white},m("dropdownListBackground","Dropdown list background.")),b9=T("dropdown.foreground",{dark:"#F0F0F0",light:Xe,hcDark:Z.white,hcLight:Xe},m("dropdownForeground","Dropdown foreground.")),v9=T("dropdown.border",{dark:$T,light:"#CECECE",hcDark:ct,hcLight:ct},m("dropdownBorder","Dropdown border.")),PK=T("button.foreground",Z.white,m("buttonForeground","Button foreground color.")),cce=T("button.separator",qe(PK,.4),m("buttonSeparator","Button separator color.")),tC=T("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},m("buttonBackground","Button background color.")),dce=T("button.hoverBackground",{dark:Va(tC,.2),light:Tm(tC,.2),hcDark:tC,hcLight:tC},m("buttonHoverBackground","Button background color when hovering.")),hce=T("button.border",ct,m("buttonBorder","Button border color.")),uce=T("button.secondaryForeground",{dark:Z.white,light:Z.white,hcDark:Z.white,hcLight:Xe},m("buttonSecondaryForeground","Secondary button foreground color.")),TA=T("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:Z.white},m("buttonSecondaryBackground","Secondary button background color.")),fce=T("button.secondaryHoverBackground",{dark:Va(TA,.2),light:Tm(TA,.2),hcDark:null,hcLight:null},m("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),nC=T("radio.activeForeground",zT,m("radioActiveForeground","Foreground color of active radio option.")),gce=T("radio.activeBackground",y0,m("radioBackground","Background color of active radio option.")),mce=T("radio.activeBorder",VT,m("radioActiveBorder","Border color of the active radio option.")),pce=T("radio.inactiveForeground",null,m("radioInactiveForeground","Foreground color of inactive radio option.")),_ce=T("radio.inactiveBackground",null,m("radioInactiveBackground","Background color of inactive radio option.")),bce=T("radio.inactiveBorder",{light:qe(nC,.2),dark:qe(nC,.2),hcDark:qe(nC,.4),hcLight:qe(nC,.2)},m("radioInactiveBorder","Border color of the inactive radio option.")),vce=T("radio.inactiveHoverBackground",Qle,m("radioHoverBackground","Background color of inactive active radio option when hovering.")),Cce=T("checkbox.background",$T,m("checkbox.background","Background color of checkbox widget."));T("checkbox.selectBackground",jo,m("checkbox.select.background","Background color of checkbox widget when the element it's in is selected."));const wce=T("checkbox.foreground",b9,m("checkbox.foreground","Foreground color of checkbox widget.")),yce=T("checkbox.border",v9,m("checkbox.border","Border color of checkbox widget."));T("checkbox.selectBorder",iL,m("checkbox.select.border","Border color of checkbox widget when the element it's in is selected."));const Sce=T("keybindingLabel.background",{dark:new Z(new ht(128,128,128,.17)),light:new Z(new ht(221,221,221,.4)),hcDark:Z.transparent,hcLight:Z.transparent},m("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),kce=T("keybindingLabel.foreground",{dark:Z.fromHex("#CCCCCC"),light:Z.fromHex("#555555"),hcDark:Z.white,hcLight:Xe},m("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),Lce=T("keybindingLabel.border",{dark:new Z(new ht(51,51,51,.6)),light:new Z(new ht(204,204,204,.4)),hcDark:new Z(new ht(111,195,223)),hcLight:ct},m("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),xce=T("keybindingLabel.bottomBorder",{dark:new Z(new ht(68,68,68,.6)),light:new Z(new ht(187,187,187,.4)),hcDark:new Z(new ht(111,195,223)),hcLight:Xe},m("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),Dce=T("list.focusBackground",null,m("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Ice=T("list.focusForeground",null,m("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Tce=T("list.focusOutline",{dark:Kl,light:Kl,hcDark:Zt,hcLight:Zt},m("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Ece=T("list.focusAndSelectionOutline",null,m("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),em=T("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:Z.fromHex("#0F4A85").transparent(.1)},m("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Qw=T("list.activeSelectionForeground",{dark:Z.white,light:Z.white,hcDark:null,hcLight:null},m("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),OK=T("list.activeSelectionIconForeground",null,m("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Nce=T("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:Z.fromHex("#0F4A85").transparent(.1)},m("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Rce=T("list.inactiveSelectionForeground",null,m("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Mce=T("list.inactiveSelectionIconForeground",null,m("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Ace=T("list.inactiveFocusBackground",null,m("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),Pce=T("list.inactiveFocusOutline",null,m("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),FK=T("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:Z.white.transparent(.1),hcLight:Z.fromHex("#0F4A85").transparent(.1)},m("listHoverBackground","List/Tree background when hovering over items using the mouse.")),WK=T("list.hoverForeground",null,m("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),Oce=T("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},m("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),Fce=T("list.dropBetweenBackground",{dark:iL,light:iL,hcDark:null,hcLight:null},m("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),Ap=T("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Kl,hcLight:Kl},m("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),Wce=T("list.focusHighlightForeground",{dark:Ap,light:Cle(em,Ap,"#BBE7FF"),hcDark:Ap,hcLight:Ap},m("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree."));T("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},m("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer."));T("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},m("listErrorForeground","Foreground color of list items containing errors."));T("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},m("listWarningForeground","Foreground color of list items containing warnings."));const Bce=T("listFilterWidget.background",{light:Tm(jo,0),dark:Va(jo,0),hcDark:jo,hcLight:jo},m("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),Hce=T("listFilterWidget.outline",{dark:Z.transparent,light:Z.transparent,hcDark:"#f38518",hcLight:"#007ACC"},m("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),Vce=T("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:ct,hcLight:ct},m("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),zce=T("listFilterWidget.shadow",ev,m("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees."));T("list.filterMatchBackground",{dark:Kc,light:Kc,hcDark:null,hcLight:null},m("listFilterMatchHighlight","Background color of the filtered match."));T("list.filterMatchBorder",{dark:bh,light:bh,hcDark:ct,hcLight:Zt},m("listFilterMatchHighlightBorder","Border color of the filtered match."));T("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},m("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized."));const BK=T("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},m("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),$ce=T("tree.inactiveIndentGuidesStroke",qe(BK,.4),m("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),Uce=T("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},m("tableColumnsBorder","Table border color between columns.")),jce=T("tree.tableOddRowsBackground",{dark:qe(Xe,.04),light:qe(Xe,.04),hcDark:null,hcLight:null},m("tableOddRowsBackgroundColor","Background color for odd table rows."));T("editorActionList.background",jo,m("editorActionListBackground","Action List background color."));T("editorActionList.foreground",WT,m("editorActionListForeground","Action List foreground color."));T("editorActionList.focusForeground",Qw,m("editorActionListFocusForeground","Action List foreground color for the focused item."));T("editorActionList.focusBackground",em,m("editorActionListFocusBackground","Action List background color for the focused item."));const qce=T("menu.border",{dark:null,light:null,hcDark:ct,hcLight:ct},m("menuBorder","Border color of menus.")),Kce=T("menu.foreground",b9,m("menuForeground","Foreground color of menu items.")),Gce=T("menu.background",$T,m("menuBackground","Background color of menu items.")),Zce=T("menu.selectionForeground",Qw,m("menuSelectionForeground","Foreground color of the selected menu item in menus.")),Yce=T("menu.selectionBackground",em,m("menuSelectionBackground","Background color of the selected menu item in menus.")),Xce=T("menu.selectionBorder",{dark:null,light:null,hcDark:Zt,hcLight:Zt},m("menuSelectionBorder","Border color of the selected menu item in menus.")),Qce=T("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:ct,hcLight:ct},m("menuSeparatorBackground","Color of a separator menu item in menus.")),F6=T("quickInput.background",jo,m("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Jce=T("quickInput.foreground",WT,m("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),ede=T("quickInputTitle.background",{dark:new Z(new ht(255,255,255,.105)),light:new Z(new ht(0,0,0,.06)),hcDark:"#000000",hcLight:Z.white},m("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),HK=T("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:Z.white,hcLight:"#0F4A85"},m("pickerGroupForeground","Quick picker color for grouping labels.")),tde=T("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:Z.white,hcLight:"#0F4A85"},m("pickerGroupBorder","Quick picker color for grouping borders.")),W6=T("quickInput.list.focusBackground",null,"",void 0,m("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),Jw=T("quickInputList.focusForeground",Qw,m("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),C9=T("quickInputList.focusIconForeground",OK,m("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),e1=T("quickInputList.focusBackground",{dark:Zw(W6,em),light:Zw(W6,em),hcDark:null,hcLight:null},m("quickInput.listFocusBackground","Quick picker background color for the focused item."));T("search.resultsInfoForeground",{light:Xe,dark:qe(Xe,.65),hcDark:Xe,hcLight:Xe},m("search.resultsInfoForeground","Color of the text in the search viewlet's completion message."));T("searchEditor.findMatchBackground",{light:qe(Kc,.66),dark:qe(Kc,.66),hcDark:Kc,hcLight:Kc},m("searchEditor.queryMatch","Color of the Search Editor query matches."));T("searchEditor.findMatchBorder",{light:qe(bh,.66),dark:qe(bh,.66),hcDark:bh,hcLight:bh},m("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var nde=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},B6=function(s,e){return function(t,n){e(t,n,s)}};const oc=tt("hoverService");let ub=class extends F{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(e,t,n={},i,o){super(),this.placement=e,this.instantHover=t,this.overrideOptions=n,this.configurationService=i,this.hoverService=o,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new q),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const n=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const i=oi(e.target)?[e.target]:e.target.targetElements;for(const r of i)this.hoverDisposables.add(hn(r,"keydown",a=>{a.equals(9)&&this.hoverService.hideHover()}));const o=oi(e.content)?void 0:e.content.toString();return this.hoverService.showHover({...e,...n,persistence:{hideOnKeyDown:!0,...n.persistence},id:o,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...n.appearance}},t)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};ub=nde([B6(3,Ze),B6(4,oc)],ub);const Rd=tt("contextViewService"),Lo=tt("contextMenuService"),wt=tt("keybindingService");class tv{constructor(){this._hooks=new q,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,i,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=i,this._onStopCallback=o;let r=e;try{e.setPointerCapture(t),this._hooks.add(ve(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{r=Le(e)}this._hooks.add($(r,ee.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add($(r,ee.POINTER_UP,a=>this.stopMonitoring(!0)))}}function Nn(s,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");const o=`$memoize$${e}`;t[n]=function(...r){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,r)}),this[o]}}var ide=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ft;(function(s){s.Tap="-monaco-gesturetap",s.Change="-monaco-gesturechange",s.Start="-monaco-gesturestart",s.End="-monaco-gesturesend",s.Contextmenu="-monaco-gesturecontextmenu"})(Ft||(Ft={}));const Mi=class Mi extends F{constructor(){super(),this.dispatched=!1,this.targets=new vs,this.ignoreTargets=new vs,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(se.runAndSubscribe(bT,({window:e,disposables:t})=>{t.add($(e.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),t.add($(e.document,"touchend",n=>this.onTouchEnd(e,n))),t.add($(e.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:Et,disposables:this._store}))}static addTarget(e){if(!Mi.isTouchDevice())return F.None;Mi.INSTANCE||(Mi.INSTANCE=new Mi);const t=Mi.INSTANCE.targets.push(e);return ve(t)}static ignoreTarget(e){if(!Mi.isTouchDevice())return F.None;Mi.INSTANCE||(Mi.INSTANCE=new Mi);const t=Mi.INSTANCE.ignoreTargets.push(e);return ve(t)}static isTouchDevice(){return"ontouchstart"in Et||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){const o=e.targetTouches.item(n);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};const r=this.newGestureEvent(Ft.Start,o.target);r.pageX=o.pageX,r.pageY=o.pageY,this.dispatchEvent(r)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const n=Date.now(),i=Object.keys(this.activeTouches).length;for(let o=0,r=t.changedTouches.length;o<r;o++){const a=t.changedTouches.item(o);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<Mi.HOLD_DELAY&&Math.abs(l.initialPageX-ar(l.rollingPageX))<30&&Math.abs(l.initialPageY-ar(l.rollingPageY))<30){const d=this.newGestureEvent(Ft.Tap,l.initialTarget);d.pageX=ar(l.rollingPageX),d.pageY=ar(l.rollingPageY),this.dispatchEvent(d)}else if(c>=Mi.HOLD_DELAY&&Math.abs(l.initialPageX-ar(l.rollingPageX))<30&&Math.abs(l.initialPageY-ar(l.rollingPageY))<30){const d=this.newGestureEvent(Ft.Contextmenu,l.initialTarget);d.pageX=ar(l.rollingPageX),d.pageY=ar(l.rollingPageY),this.dispatchEvent(d)}else if(i===1){const d=ar(l.rollingPageX),h=ar(l.rollingPageY),u=ar(l.rollingTimestamps)-l.rollingTimestamps[0],f=d-l.rollingPageX[0],g=h-l.rollingPageY[0],p=[...this.targets].filter(_=>l.initialTarget instanceof Node&&_.contains(l.initialTarget));this.inertia(e,p,n,Math.abs(f)/u,f>0?1:-1,d,Math.abs(g)/u,g>0?1:-1,h)}this.dispatchEvent(this.newGestureEvent(Ft.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===Ft.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>Mi.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===Ft.Change||e.type===Ft.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const n of this.ignoreTargets)if(n.contains(e.initialTarget))return;const t=[];for(const n of this.targets)if(n.contains(e.initialTarget)){let i=0,o=e.initialTarget;for(;o&&o!==n;)i++,o=o.parentElement;t.push([i,n])}t.sort((n,i)=>n[0]-i[0]);for(const[n,i]of t)i.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,n,i,o,r,a,l,c){this.handle=So(e,()=>{const d=Date.now(),h=d-n;let u=0,f=0,g=!0;i+=Mi.SCROLL_FRICTION*h,a+=Mi.SCROLL_FRICTION*h,i>0&&(g=!1,u=o*i*h),a>0&&(g=!1,f=l*a*h);const p=this.newGestureEvent(Ft.Change);p.translationX=u,p.translationY=f,t.forEach(_=>_.dispatchEvent(p)),g||this.inertia(e,t,d,i,o,r+u,a,l,c+f)})}onTouchMove(e){const t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){const o=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}const r=this.activeTouches[o.identifier],a=this.newGestureEvent(Ft.Change,r.initialTarget);a.translationX=o.pageX-ar(r.rollingPageX),a.translationY=o.pageY-ar(r.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),r.rollingPageX.length>3&&(r.rollingPageX.shift(),r.rollingPageY.shift(),r.rollingTimestamps.shift()),r.rollingPageX.push(o.pageX),r.rollingPageY.push(o.pageY),r.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};Mi.SCROLL_FRICTION=-.005,Mi.HOLD_DELAY=700,Mi.CLEAR_TAP_COUNT_TIME=400;let Ki=Mi;ide([Nn],Ki,"isTouchDevice",null);let sr=class extends F{onclick(e,t){this._register($(e,ee.CLICK,n=>t(new Gr(Le(e),n))))}onmousedown(e,t){this._register($(e,ee.MOUSE_DOWN,n=>t(new Gr(Le(e),n))))}onmouseover(e,t){this._register($(e,ee.MOUSE_OVER,n=>t(new Gr(Le(e),n))))}onmouseleave(e,t){this._register($(e,ee.MOUSE_LEAVE,n=>t(new Gr(Le(e),n))))}onkeydown(e,t){this._register($(e,ee.KEY_DOWN,n=>t(new Pt(n))))}onkeyup(e,t){this._register($(e,ee.KEY_UP,n=>t(new Pt(n))))}oninput(e,t){this._register($(e,ee.INPUT,t))}onblur(e,t){this._register($(e,ee.BLUR,t))}onfocus(e,t){this._register($(e,ee.FOCUS,t))}ignoreGesture(e){return Ki.ignoreTarget(e)}};const fb=11;class sde extends sr{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...De.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=fb+"px",this.domNode.style.height=fb+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new tv),this._register(hn(this.bgDomNode,ee.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(hn(this.domNode,ee.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new U3),this._pointerdownScheduleRepeatTimer=this._register(new la)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Le(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class ode extends F{constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new la)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{var e;(e=this._domNode)==null||e.setClassName(this._visibleClassName)},0))}_hide(e){var t;this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,(t=this._domNode)==null||t.setClassName(this._invisibleClassName+(e?" fade":"")))}}const rde=140;class VK extends sr{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new ode(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new tv),this._shouldRender=!0,this.domNode=Ct(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register($(this.domNode.domNode,ee.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new sde(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=Ct(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register($(this.slider.domNode,ee.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);n<=o&&o<=i?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{const o=Sn(this.domNode.domNode);t=e.pageX-o.left,n=e.pageY-o.top}const i=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),i=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{const r=this._sliderOrthogonalPointerPosition(o),a=Math.abs(r-n);if(Bi&&a>rde){this._setDesiredScrollPositionNow(i.getScrollPosition());return}const c=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(i.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const ade=20;class gb{constructor(e,t,n,i,o,r){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=o,this._scrollPosition=r,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new gb(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,o){const r=Math.max(0,n-e),a=Math.max(0,r-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(ade,Math.floor(n*a/i))),d=(a-c)/(i-n),h=o*d;return{computedAvailableSize:Math.round(r),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:d,computedSliderPosition:Math.round(h)}}_refreshComputedValues(){const e=gb._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class lde extends VK{constructor(e,t,n){const i=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new gb(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const r=(t.arrowSize-fb)/2,a=(t.horizontalScrollbarSize-fb)/2;this._createArrow({className:"scra",icon:J.scrollbarButtonLeft,top:a,left:r,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Yg(null,1,0))}),this._createArrow({className:"scra",icon:J.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:r,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Yg(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class cde extends VK{constructor(e,t,n){const i=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new gb(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const r=(t.arrowSize-fb)/2,a=(t.verticalScrollbarSize-fb)/2;this._createArrow({className:"scra",icon:J.scrollbarButtonUp,top:r,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Yg(null,0,1))}),this._createArrow({className:"scra",icon:J.scrollbarButtonDown,top:void 0,left:a,bottom:r,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Yg(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}class oL{constructor(e,t,n,i,o,r,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,n=n|0,i=i|0,o=o|0,r=r|0,a=a|0),this.rawScrollLeft=i,this.rawScrollTop=a,t<0&&(t=0),i+t>n&&(i=n-t),i<0&&(i=0),o<0&&(o=0),a+o>r&&(a=r-o),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=i,this.height=o,this.scrollHeight=r,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new oL(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new oL(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,r=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:o,heightChanged:r,scrollHeightChanged:a,scrollTopChanged:l}}}class nv extends F{constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new O),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new oL(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){var i;const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),(i=this._smoothScrolling)==null||i.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new t1(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=t1.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class H6{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function jN(s,e){const t=e-s;return function(n){return s+t*ude(n)}}function dde(s,e,t){return function(n){return n<t?s(n/t):e((n-t)/(1-t))}}class t1{constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let o,r;return e<t?(o=e+.75*n,r=t-.75*n):(o=e-.75*n,r=t+.75*n),dde(jN(e,o),jN(r,t),.33)}return jN(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),i=this.scrollTop(t);return new H6(n,i,!1)}return new H6(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return t1.start(e,t,n)}static start(e,t,n){n=n+10;const i=Date.now()-10;return new t1(e,t,i,n)}}function hde(s){return Math.pow(s,3)}function ude(s){return 1-hde(1-s)}const fde=500,V6=50;class gde{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}const WD=class WD{constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{const o=i===this._front?e:Math.pow(2,-n);if(e-=o,t+=this._memory[i].score*o,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(_0){const t=Le(e.browserEvent),n=Tie(t);this.accept(Date.now(),e.deltaX*n,e.deltaY*n)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){let i=null;const o=new gde(e,t,n);this._front===-1&&this._rear===-1?(this._memory[0]=o,this._front=0,this._rear=0):(i=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=o),o.score=this._computeScore(o,i)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(n+=.25),t){const i=Math.abs(e.deltaX),o=Math.abs(e.deltaY),r=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(i,r),1),c=Math.max(Math.min(o,a),1),d=Math.max(i,r),h=Math.max(o,a);d%l===0&&h%c===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}};WD.INSTANCE=new WD;let rL=WD;class w9 extends sr{get options(){return this._options}constructor(e,t,n){super(),this._onScroll=this._register(new O),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new O),e.style.overflow="hidden",this._options=mde(t),this._scrollable=n,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));const i={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new cde(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new lde(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Ct(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Ct(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Ct(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new la),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=Mt(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,et&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Yg(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=Mt(this._mouseWheelToDispose),e)){const n=i=>{this._onMouseWheel(new Yg(i))};this._mouseWheelToDispose.push($(this._listenOnDomNode,ee.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){var o;if((o=e.browserEvent)!=null&&o.defaultPrevented)return;const t=rL.INSTANCE;t.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,a=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&a+r===0?a=r=0:Math.abs(r)>=Math.abs(a)?a=0:r=0),this._options.flipAxes&&([r,a]=[a,r]);const l=!et&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||l)&&!a&&(a=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(a=a*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const c=this._scrollable.getFutureScrollPosition();let d={};if(r){const h=V6*r,u=c.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(d,u)}if(a){const h=V6*a,u=c.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(d,u)}d=this._scrollable.validateScrollPosition(d),(c.scrollLeft!==d.scrollLeft||c.scrollTop!==d.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",o=t?" top":"",r=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${r}${o}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),fde)}}class zK extends w9{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new nv({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>So(Le(e),i)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}}class UT extends w9{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class S0 extends w9{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new nv({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>So(Le(e),i)});super(e,t,n),this._register(n),this._element=e,this._register(this.onScroll(i=>{i.scrollTopChanged&&(this._element.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this._element.scrollLeft=i.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function mde(s){const e={lazyRender:typeof s.lazyRender<"u"?s.lazyRender:!1,className:typeof s.className<"u"?s.className:"",useShadows:typeof s.useShadows<"u"?s.useShadows:!0,handleMouseWheel:typeof s.handleMouseWheel<"u"?s.handleMouseWheel:!0,flipAxes:typeof s.flipAxes<"u"?s.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof s.consumeMouseWheelIfScrollbarIsNeeded<"u"?s.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof s.alwaysConsumeMouseWheel<"u"?s.alwaysConsumeMouseWheel:!1,scrollYToX:typeof s.scrollYToX<"u"?s.scrollYToX:!1,mouseWheelScrollSensitivity:typeof s.mouseWheelScrollSensitivity<"u"?s.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof s.fastScrollSensitivity<"u"?s.fastScrollSensitivity:5,scrollPredominantAxis:typeof s.scrollPredominantAxis<"u"?s.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof s.mouseWheelSmoothScroll<"u"?s.mouseWheelSmoothScroll:!0,arrowSize:typeof s.arrowSize<"u"?s.arrowSize:11,listenOnDomNode:typeof s.listenOnDomNode<"u"?s.listenOnDomNode:null,horizontal:typeof s.horizontal<"u"?s.horizontal:1,horizontalScrollbarSize:typeof s.horizontalScrollbarSize<"u"?s.horizontalScrollbarSize:10,horizontalSliderSize:typeof s.horizontalSliderSize<"u"?s.horizontalSliderSize:0,horizontalHasArrows:typeof s.horizontalHasArrows<"u"?s.horizontalHasArrows:!1,vertical:typeof s.vertical<"u"?s.vertical:1,verticalScrollbarSize:typeof s.verticalScrollbarSize<"u"?s.verticalScrollbarSize:10,verticalHasArrows:typeof s.verticalHasArrows<"u"?s.verticalHasArrows:!1,verticalSliderSize:typeof s.verticalSliderSize<"u"?s.verticalSliderSize:0,scrollByPage:typeof s.scrollByPage<"u"?s.scrollByPage:!1};return e.horizontalSliderSize=typeof s.horizontalSliderSize<"u"?s.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof s.verticalSliderSize<"u"?s.verticalSliderSize:e.verticalScrollbarSize,et&&(e.className+=" mac"),e}const Dy=te;let y9=class extends F{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new S0(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class jT extends F{static render(e,t,n){return new jT(e,t,n)}constructor(e,t,n){super(),this.actionLabel=t.label,this.actionKeybindingLabel=n,this.actionContainer=Y(e,Dy("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=Y(this.actionContainer,Dy("a.action")),this.action.setAttribute("role","button"),t.iconClass&&Y(this.action,Dy(`span.icon.${t.iconClass}`));const i=Y(this.action,Dy("span"));i.textContent=n?`${t.label} (${n})`:t.label,this._store.add(new UK(this.actionContainer,t.run)),this._store.add(new jK(this.actionContainer,t.run,[3,10])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function $K(s,e){return s&&e?m("acessibleViewHint","Inspect this in the accessible view with {0}.",e):s?m("acessibleViewHintNoKbOpen","Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class UK extends F{constructor(e,t){super(),this._register($(e,ee.CLICK,n=>{n.stopPropagation(),n.preventDefault(),t(e)}))}}class jK extends F{constructor(e,t,n){super(),this._register($(e,ee.KEY_DOWN,i=>{const o=new Pt(i);n.some(r=>o.equals(r))&&(i.stopPropagation(),i.preventDefault(),t(e))}))}}const eo=tt("openerService");function pde(s){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(s.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},s=s.with({fragment:""})),{selection:e,uri:s}}class nt{get event(){return this.emitter.event}constructor(e,t,n){const i=o=>this.emitter.fire(o);this.emitter=new O({onWillAddFirstListener:()=>e.addEventListener(t,i,n),onDidRemoveLastListener:()=>e.removeEventListener(t,i,n)})}dispose(){this.emitter.dispose()}}function _de(s,e={}){const t=S9(e);return t.textContent=s,t}function bde(s,e={}){const t=S9(e);return qK(t,Cde(s,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function S9(s){const e=s.inline?"span":"div",t=document.createElement(e);return s.className&&(t.className=s.className),t}class vde{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}function qK(s,e,t,n){let i;if(e.type===2)i=document.createTextNode(e.content||"");else if(e.type===3)i=document.createElement("b");else if(e.type===4)i=document.createElement("i");else if(e.type===7&&n)i=document.createElement("code");else if(e.type===5&&t){const o=document.createElement("a");t.disposables.add(hn(o,"click",r=>{t.callback(String(e.index),r)})),i=o}else e.type===8?i=document.createElement("br"):e.type===1&&(i=s);i&&s!==i&&s.appendChild(i),i&&Array.isArray(e.children)&&e.children.forEach(o=>{qK(i,o,t,n)})}function Cde(s,e){const t={type:1,children:[]};let n=0,i=t;const o=[],r=new vde(s);for(;!r.eos();){let a=r.next();const l=a==="\\"&&EA(r.peek(),e)!==0;if(l&&(a=r.next()),!l&&wde(a,e)&&a===r.peek()){r.advance(),i.type===2&&(i=o.pop());const c=EA(a,e);if(i.type===c||i.type===5&&c===6)i=o.pop();else{const d={type:c,children:[]};c===5&&(d.index=n,n++),i.children.push(d),o.push(i),i=d}}else if(a===`
`)i.type===2&&(i=o.pop()),i.children.push({type:8});else if(i.type!==2){const c={type:2,content:a};i.children.push(c),o.push(i),i=c}else i.content+=a}return i.type===2&&(i=o.pop()),t}function wde(s,e){return EA(s,e)!==0}function EA(s,e){switch(s){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}const yde=new RegExp(`(\\\\)?\\$\\((${De.iconNameExpression}(?:${De.iconModifierExpression})?)\\)`,"g");function Rh(s){const e=new Array;let t,n=0,i=0;for(;(t=yde.exec(s))!==null;){i=t.index||0,n<i&&e.push(s.substring(n,i)),n=(t.index||0)+t[0].length;const[,o,r]=t;e.push(o?`$(${r})`:tm({id:r}))}return n<s.length&&e.push(s.substring(n)),e}function tm(s){const e=te("span");return e.classList.add(...De.asClassNameArray(s)),e}function Sde(s){const e=kde(s);if(e&&e.length>0)return new Uint32Array(e)}let Mo=0;const rh=new Uint32Array(10);function kde(s){if(Mo=0,al(s,qN,4352),Mo>0||(al(s,KN,4449),Mo>0)||(al(s,GN,4520),Mo>0)||(al(s,Fu,12593),Mo))return rh.subarray(0,Mo);if(s>=44032&&s<=55203){const e=s-44032,t=e%588,n=Math.floor(e/588),i=Math.floor(t/28),o=t%28-1;if(n<qN.length?al(n,qN,0):4352+n-12593<Fu.length&&al(4352+n,Fu,12593),i<KN.length?al(i,KN,0):4449+i-12593<Fu.length&&al(4449+i-12593,Fu,12593),o>=0&&(o<GN.length?al(o,GN,0):4520+o-12593<Fu.length&&al(4520+o-12593,Fu,12593)),Mo>0)return rh.subarray(0,Mo)}}function al(s,e,t){s>=t&&s<t+e.length&&Lde(e[s-t])}function Lde(s){s!==0&&(rh[Mo++]=s&255,s>>8&&(rh[Mo++]=s>>8&255),s>>16&&(rh[Mo++]=s>>16&255))}const qN=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),KN=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),GN=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),Fu=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function k9(...s){return function(e,t){for(let n=0,i=s.length;n<i;n++){const o=s[n](e,t);if(o)return o}return null}}KK.bind(void 0,!1);const n1=KK.bind(void 0,!0);function KK(s,e,t){if(!t||t.length<e.length)return null;let n;return s?n=A3(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function GK(s,e){const t=e.toLowerCase().indexOf(s.toLowerCase());return t===-1?null:[{start:t,end:t+s.length}]}function ZK(s,e){return NA(s.toLowerCase(),e.toLowerCase(),0,0)}function NA(s,e,t,n){if(t===s.length)return[];if(n===e.length)return null;if(s[t]===e[n]){let i=null;return(i=NA(s,e,t+1,n+1))?D9({start:n,end:n+1},i):null}return NA(s,e,t,n+1)}function L9(s){return 97<=s&&s<=122}function qT(s){return 65<=s&&s<=90}function x9(s){return 48<=s&&s<=57}function YK(s){return s===32||s===9||s===10||s===13}const XK=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(s=>XK.add(s.charCodeAt(0)));function aL(s){return YK(s)||XK.has(s)}function z6(s,e){return s===e||aL(s)&&aL(e)}const ZN=new Map;function $6(s){if(ZN.has(s))return ZN.get(s);let e;const t=Sde(s);return t&&(e=t),ZN.set(s,e),e}function QK(s){return L9(s)||qT(s)||x9(s)}function D9(s,e){return e.length===0?e=[s]:s.end===e[0].start?e[0].start=s.start:e.unshift(s),e}function JK(s,e){for(let t=e;t<s.length;t++){const n=s.charCodeAt(t);if(qT(n)||x9(n)||t>0&&!QK(s.charCodeAt(t-1)))return t}return s.length}function RA(s,e,t,n){if(t===s.length)return[];if(n===e.length)return null;if(s[t]!==e[n].toLowerCase())return null;{let i=null,o=n+1;for(i=RA(s,e,t+1,n+1);!i&&(o=JK(e,o))<e.length;)i=RA(s,e,t+1,o),o++;return i===null?null:D9({start:n,end:n+1},i)}}function xde(s){let e=0,t=0,n=0,i=0,o=0;for(let d=0;d<s.length;d++)o=s.charCodeAt(d),qT(o)&&e++,L9(o)&&t++,QK(o)&&n++,x9(o)&&i++;const r=e/s.length,a=t/s.length,l=n/s.length,c=i/s.length;return{upperPercent:r,lowerPercent:a,alphaPercent:l,numericPercent:c}}function Dde(s){const{upperPercent:e,lowerPercent:t}=s;return t===0&&e>.6}function Ide(s){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=s;return t>.2&&e<.8&&n>.6&&i<.2}function Tde(s){let e=0,t=0,n=0,i=0;for(let o=0;o<s.length;o++)n=s.charCodeAt(o),qT(n)&&e++,L9(n)&&t++,YK(n)&&i++;return(e===0||t===0)&&i===0?s.length<=30:e<=5}function eG(s,e){if(!e||(e=e.trim(),e.length===0)||!Tde(s))return null;e.length>60&&(e=e.substring(0,60));const t=xde(e);if(!Ide(t)){if(!Dde(t))return null;e=e.toLowerCase()}let n=null,i=0;for(s=s.toLowerCase();i<e.length&&(n=RA(s,e,0,i))===null;)i=JK(e,i+1);return n}function Ede(s,e,t=!1){if(!e||e.length===0)return null;let n=null,i=0;for(s=s.toLowerCase(),e=e.toLowerCase();i<e.length&&(n=MA(s,e,0,i,t),n===null);)i=tG(e,i+1);return n}function MA(s,e,t,n,i){let o=0;if(t===s.length)return[];if(n===e.length)return null;if(!z6(s.charCodeAt(t),e.charCodeAt(n))){const l=$6(s.charCodeAt(t));if(!l)return null;for(let c=0;c<l.length;c++)if(!z6(l[c],e.charCodeAt(n+c)))return null;o+=l.length-1}let r=null,a=n+o+1;if(r=MA(s,e,t+1,a,i),!i)for(;!r&&(a=tG(e,a))<e.length;)r=MA(s,e,t+1,a,i),a++;if(!r)return null;if(s.charCodeAt(t)!==e.charCodeAt(n)){const l=$6(s.charCodeAt(t));if(!l)return r;for(let c=0;c<l.length;c++)if(l[c]!==e.charCodeAt(n+c))return r}return D9({start:n,end:n+o+1},r)}function tG(s,e){for(let t=e;t<s.length;t++)if(aL(s.charCodeAt(t))||t>0&&aL(s.charCodeAt(t-1)))return t;return s.length}const Nde=k9(n1,eG,GK),Rde=k9(n1,eG,ZK),U6=new ic(1e4);function j6(s,e,t=!1){if(typeof s!="string"||typeof e!="string")return null;let n=U6.get(s);n||(n=new RegExp(mie(s),"i"),U6.set(s,n));const i=n.exec(e);return i?[{start:i.index,end:i.index+i[0].length}]:t?Rde(s,e):Nde(s,e)}function Mde(s,e){const t=nm(s,s.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?k0(t):null}function Ade(s,e,t,n,i,o){const r=Math.min(13,s.length);for(;t<r;t++){const a=nm(s,e,t,n,i,o,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(a)return a}return[0,o]}function k0(s){if(typeof s>"u")return[];const e=[],t=s[1];for(let n=s.length-1;n>1;n--){const i=s[n]+t,o=e[e.length-1];o&&o.end===i?o.end=i+1:e.push({start:i,end:i+1})}return e}const vh=128;function I9(){const s=[],e=[];for(let t=0;t<=vh;t++)e[t]=0;for(let t=0;t<=vh;t++)s.push(e.slice(0));return s}function nG(s){const e=[];for(let t=0;t<=s;t++)e[t]=0;return e}const iG=nG(2*vh),AA=nG(2*vh),fc=I9(),Wu=I9(),Iy=I9();function Ty(s,e){if(e<0||e>=s.length)return!1;const t=s.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!W3(t)}}function q6(s,e){if(e<0||e>=s.length)return!1;switch(s.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function VS(s,e,t){return e[s]!==t[s]}function Pde(s,e,t,n,i,o,r=!1){for(;e<t&&i<o;)s[e]===n[i]&&(r&&(iG[e]=i),e+=1),i+=1;return e===t}var za;(function(s){s.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}s.isDefault=e})(za||(za={}));const l7=class l7{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};l7.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};let i1=l7;function nm(s,e,t,n,i,o,r=i1.default){const a=s.length>vh?vh:s.length,l=n.length>vh?vh:n.length;if(t>=a||o>=l||a-t>l-o||!Pde(e,t,a,i,o,l,!0))return;Ode(a,l,t,o,e,i);let c=1,d=1,h=t,u=o;const f=[!1];for(c=1,h=t;h<a;c++,h++){const v=iG[h],C=AA[h],w=h+1<a?AA[h+1]:l;for(d=v-o+1,u=v;u<w;d++,u++){let y=Number.MIN_SAFE_INTEGER,k=!1;u<=C&&(y=Fde(s,e,h,t,n,i,u,l,o,fc[c-1][d-1]===0,f));let x=0;y!==Number.MAX_SAFE_INTEGER&&(k=!0,x=y+Wu[c-1][d-1]);const D=u>v,N=D?Wu[c][d-1]+(fc[c][d-1]>0?-5:0):0,W=u>v+1&&fc[c][d-1]>0,B=W?Wu[c][d-2]+(fc[c][d-2]>0?-5:0):0;if(W&&(!D||B>=N)&&(!k||B>=x))Wu[c][d]=B,Iy[c][d]=3,fc[c][d]=0;else if(D&&(!k||N>=x))Wu[c][d]=N,Iy[c][d]=2,fc[c][d]=0;else if(k)Wu[c][d]=x,Iy[c][d]=1,fc[c][d]=fc[c-1][d-1]+1;else throw new Error("not possible")}}if(!f[0]&&!r.firstMatchCanBeWeak)return;c--,d--;const g=[Wu[c][d],o];let p=0,_=0;for(;c>=1;){let v=d;do{const C=Iy[c][v];if(C===3)v=v-2;else if(C===2)v=v-1;else break}while(v>=1);p>1&&e[t+c-1]===i[o+d-1]&&!VS(v+o-1,n,i)&&p+1>fc[c][v]&&(v=d),v===d?p++:p=1,_||(_=v),c--,d=v-1,g.push(d)}l-o===a&&r.boostFullMatch&&(g[0]+=2);const b=_-a;return g[0]-=b,g}function Ode(s,e,t,n,i,o){let r=s-1,a=e-1;for(;r>=t&&a>=n;)i[r]===o[a]&&(AA[r]=a,r--),a--}function Fde(s,e,t,n,i,o,r,a,l,c,d){if(e[t]!==o[r])return Number.MIN_SAFE_INTEGER;let h=1,u=!1;return r===t-n?h=s[t]===i[r]?7:5:VS(r,i,o)&&(r===0||!VS(r-1,i,o))?(h=s[t]===i[r]?7:5,u=!0):Ty(o,r)&&(r===0||!Ty(o,r-1))?h=5:(Ty(o,r-1)||q6(o,r-1))&&(h=5,u=!0),h>1&&t===n&&(d[0]=!0),u||(u=VS(r,i,o)||Ty(o,r-1)||q6(o,r-1)),t===n?r>l&&(h-=u?3:5):c?h+=u?2:0:h+=u?0:1,r+1===a&&(h-=u?3:5),h}function Wde(s,e,t,n,i,o,r){return Bde(s,e,t,n,i,o,!0,r)}function Bde(s,e,t,n,i,o,r,a){let l=nm(s,e,t,n,i,o,a);if(l&&!r)return l;if(s.length>=3){const c=Math.min(7,s.length-1);for(let d=t+1;d<c;d++){const h=Hde(s,d);if(h){const u=nm(h,h.toLowerCase(),t,n,i,o,a);u&&(u[0]-=3,(!l||u[0]>l[0])&&(l=u))}}}return l}function Hde(s,e){if(e+1>=s.length)return;const t=s[e],n=s[e+1];if(t!==n)return s.slice(0,e)+n+t+s.slice(e+2)}const Vde="$(",T9=new RegExp(`\\$\\(${De.iconNameExpression}(?:${De.iconModifierExpression})?\\)`,"g"),zde=new RegExp(`(\\\\)?${T9.source}`,"g");function $de(s){return s.replace(zde,(e,t)=>t?e:`\\${e}`)}const Ude=new RegExp(`\\\\${T9.source}`,"g");function jde(s){return s.replace(Ude,e=>`\\${e}`)}const qde=new RegExp(`(\\s)?(\\\\)?${T9.source}(\\s)?`,"g");function E9(s){return s.indexOf(Vde)===-1?s:s.replace(qde,(e,t,n,i)=>n?e:t||i||"")}function Kde(s){return s?s.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const YN=new RegExp(`\\$\\(${De.iconNameCharacter}+\\)`,"g");function iC(s){YN.lastIndex=0;let e="";const t=[];let n=0;for(;;){const i=YN.lastIndex,o=YN.exec(s),r=s.substring(i,o==null?void 0:o.index);if(r.length>0){e+=r;for(let a=0;a<r.length;a++)t.push(n)}if(!o)break;n+=o[0].length}return{text:e,iconOffsets:t}}function XN(s,e,t=!1){const{text:n,iconOffsets:i}=e;if(!i||i.length===0)return j6(s,n,t);const o=g0(n," "),r=n.length-o.length,a=j6(s,o,t);if(a)for(const l of a){const c=i[l.start+r]+r;l.start+=c,l.end+=c}return a}function pl(s){return Ek(s,!0)}class Gde{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:Ww(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===We.file)return wA(pl(e),pl(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(G6(e.authority,t.authority))return wA(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Se.joinPath(e,...t)}basenameOrAuthority(e){return xr(e)||e.authority}basename(e){return Fn.basename(e.path)}extname(e){return Fn.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===We.file?t=Se.file(Wj(pl(e))).path:(t=Fn.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===We.file?t=Se.file(Fj(pl(e))).path:t=Fn.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!G6(e.authority,t.authority))return;if(e.scheme===We.file){const o=qne(pl(e),pl(t));return Bi?pK(o):o}let n=e.path||"/";const i=t.path||"/";if(this._ignorePathCasing(e)){let o=0;for(const r=Math.min(n.length,i.length);o<r&&!(n.charCodeAt(o)!==i.charCodeAt(o)&&n.charAt(o).toLowerCase()!==i.charAt(o).toLowerCase());o++);n=i.substr(0,o)+n.substr(o)}return Fn.relative(n,i)}resolvePath(e,t){if(e.scheme===We.file){const n=Se.file(jne(pl(e),t));return e.with({authority:n.authority,path:n.path})}return t=Xae(t),e.with({path:Fn.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Ep(e,t)}hasTrailingPathSeparator(e,t=Fa){if(e.scheme===We.file){const n=pl(e);return n.length>C6(n).length&&n[n.length-1]===t}else{const n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Fa){return Z6(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Fa){let n=!1;if(e.scheme===We.file){const i=pl(e);n=i!==void 0&&i.length===C6(i).length&&i[i.length-1]===t}else{t="/";const i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!Z6(e,t)?e.with({path:e.path+"/"}):e}}const Yt=new Gde(()=>!1),s1=Yt.isEqual.bind(Yt);Yt.isEqualOrParent.bind(Yt);Yt.getComparisonKey.bind(Yt);const Zde=Yt.basenameOrAuthority.bind(Yt),xr=Yt.basename.bind(Yt),Yde=Yt.extname.bind(Yt),KT=Yt.dirname.bind(Yt),Xde=Yt.joinPath.bind(Yt),Qde=Yt.normalizePath.bind(Yt),Jde=Yt.relativePath.bind(Yt),K6=Yt.resolvePath.bind(Yt);Yt.isAbsolutePath.bind(Yt);const G6=Yt.isEqualAuthority.bind(Yt),Z6=Yt.hasTrailingPathSeparator.bind(Yt);Yt.removeTrailingPathSeparator.bind(Yt);Yt.addTrailingPathSeparator.bind(Yt);var hu;(function(s){s.META_DATA_LABEL="label",s.META_DATA_DESCRIPTION="description",s.META_DATA_SIZE="size",s.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(r=>{const[a,l]=r.split(":");a&&l&&n.set(a,l)});const o=t.path.substring(0,t.path.indexOf(";"));return o&&n.set(s.META_DATA_MIME,o),n}s.parseMetaData=e})(hu||(hu={}));class ji{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw Cr("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=the(this.supportThemeIcons?$de(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${nhe(t,e)}
`,this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){const n=new RegExp(Xo(t),"g");return e.replace(n,(i,o)=>e.charAt(o-1)!=="\\"?`\\${i}`:i)}}function mb(s){return $a(s)?!s.value:Array.isArray(s)?s.every(mb):!0}function $a(s){return s instanceof ji?!0:s&&typeof s=="object"?typeof s.value=="string"&&(typeof s.isTrusted=="boolean"||typeof s.isTrusted=="object"||s.isTrusted===void 0)&&(typeof s.supportThemeIcons=="boolean"||s.supportThemeIcons===void 0):!1}function ehe(s,e){return s===e?!0:!s||!e?!1:s.value===e.value&&s.isTrusted===e.isTrusted&&s.supportThemeIcons===e.supportThemeIcons&&s.supportHtml===e.supportHtml&&(s.baseUri===e.baseUri||!!s.baseUri&&!!e.baseUri&&s1(Se.from(s.baseUri),Se.from(e.baseUri)))}function the(s){return s.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function nhe(s,e){var i;const t=((i=s.match(/^`+/gm))==null?void 0:i.reduce((o,r)=>o.length>r.length?o:r).length)??0,n=t>=3?t+1:3;return[`${"`".repeat(n)}${e}`,s,`${"`".repeat(n)}`].join(`
`)}function Ey(s){return s.replace(/"/g,"&quot;")}function QN(s){return s&&s.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function ihe(s){const e=[],t=s.split("|").map(i=>i.trim());s=t[0];const n=t[1];if(n){const i=/height=(\d+)/.exec(n),o=/width=(\d+)/.exec(n),r=i?i[1]:"",a=o?o[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(r));l&&e.push(`width="${a}"`),c&&e.push(`height="${r}"`)}return{href:s,dimensions:e}}class N9{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const PA=new N9("id#");let Yi={};(function(){function s(e,t){t(Yi)}s.amd=!0,function(e,t){typeof s=="function"&&s.amd?s(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function n(at){e.defaults=at}const i=/[&<>"']/,o=new RegExp(i.source,"g"),r=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(r.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=at=>l[at];function d(at,R){if(R){if(i.test(at))return at.replace(o,c)}else if(r.test(at))return at.replace(a,c);return at}const h=/(^|[^\[])\^/g;function u(at,R){let M=typeof at=="string"?at:at.source;R=R||"";const P={replace:(V,j)=>{let ne=typeof j=="string"?j:j.source;return ne=ne.replace(h,"$1"),M=M.replace(V,ne),P},getRegex:()=>new RegExp(M,R)};return P}function f(at){try{at=encodeURI(at).replace(/%25/g,"%")}catch{return null}return at}const g={exec:()=>null};function p(at,R){const M=at.replace(/\|/g,(j,ne,ae)=>{let ke=!1,Te=ne;for(;--Te>=0&&ae[Te]==="\\";)ke=!ke;return ke?"|":" |"}),P=M.split(/ \|/);let V=0;if(P[0].trim()||P.shift(),P.length>0&&!P[P.length-1].trim()&&P.pop(),R)if(P.length>R)P.splice(R);else for(;P.length<R;)P.push("");for(;V<P.length;V++)P[V]=P[V].trim().replace(/\\\|/g,"|");return P}function _(at,R,M){const P=at.length;if(P===0)return"";let V=0;for(;V<P;){const j=at.charAt(P-V-1);if(j===R&&!M)V++;else if(j!==R&&M)V++;else break}return at.slice(0,P-V)}function b(at,R){if(at.indexOf(R[1])===-1)return-1;let M=0;for(let P=0;P<at.length;P++)if(at[P]==="\\")P++;else if(at[P]===R[0])M++;else if(at[P]===R[1]&&(M--,M<0))return P;return-1}function v(at,R,M,P){const V=R.href,j=R.title?d(R.title):null,ne=at[1].replace(/\\([\[\]])/g,"$1");if(at[0].charAt(0)!=="!"){P.state.inLink=!0;const ae={type:"link",raw:M,href:V,title:j,text:ne,tokens:P.inlineTokens(ne)};return P.state.inLink=!1,ae}return{type:"image",raw:M,href:V,title:j,text:d(ne)}}function C(at,R){const M=at.match(/^(\s+)(?:```)/);if(M===null)return R;const P=M[1];return R.split(`
`).map(V=>{const j=V.match(/^\s+/);if(j===null)return V;const[ne]=j;return ne.length>=P.length?V.slice(P.length):V}).join(`
`)}class w{constructor(R){Bn(this,"options");Bn(this,"rules");Bn(this,"lexer");this.options=R||e.defaults}space(R){const M=this.rules.block.newline.exec(R);if(M&&M[0].length>0)return{type:"space",raw:M[0]}}code(R){const M=this.rules.block.code.exec(R);if(M){const P=M[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:M[0],codeBlockStyle:"indented",text:this.options.pedantic?P:_(P,`
`)}}}fences(R){const M=this.rules.block.fences.exec(R);if(M){const P=M[0],V=C(P,M[3]||"");return{type:"code",raw:P,lang:M[2]?M[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):M[2],text:V}}}heading(R){const M=this.rules.block.heading.exec(R);if(M){let P=M[2].trim();if(/#$/.test(P)){const V=_(P,"#");(this.options.pedantic||!V||/ $/.test(V))&&(P=V.trim())}return{type:"heading",raw:M[0],depth:M[1].length,text:P,tokens:this.lexer.inline(P)}}}hr(R){const M=this.rules.block.hr.exec(R);if(M)return{type:"hr",raw:_(M[0],`
`)}}blockquote(R){const M=this.rules.block.blockquote.exec(R);if(M){let P=_(M[0],`
`).split(`
`),V="",j="";const ne=[];for(;P.length>0;){let ae=!1;const ke=[];let Te;for(Te=0;Te<P.length;Te++)if(/^ {0,3}>/.test(P[Te]))ke.push(P[Te]),ae=!0;else if(!ae)ke.push(P[Te]);else break;P=P.slice(Te);const lt=ke.join(`
`),Nt=lt.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");V=V?`${V}
${lt}`:lt,j=j?`${j}
${Nt}`:Nt;const vn=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(Nt,ne,!0),this.lexer.state.top=vn,P.length===0)break;const Ln=ne[ne.length-1];if((Ln==null?void 0:Ln.type)==="code")break;if((Ln==null?void 0:Ln.type)==="blockquote"){const Rn=Ln,He=Rn.raw+`
`+P.join(`
`),G=this.blockquote(He);ne[ne.length-1]=G,V=V.substring(0,V.length-Rn.raw.length)+G.raw,j=j.substring(0,j.length-Rn.text.length)+G.text;break}else if((Ln==null?void 0:Ln.type)==="list"){const Rn=Ln,He=Rn.raw+`
`+P.join(`
`),G=this.list(He);ne[ne.length-1]=G,V=V.substring(0,V.length-Ln.raw.length)+G.raw,j=j.substring(0,j.length-Rn.raw.length)+G.raw,P=He.substring(ne[ne.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:V,tokens:ne,text:j}}}list(R){let M=this.rules.block.list.exec(R);if(M){let P=M[1].trim();const V=P.length>1,j={type:"list",raw:"",ordered:V,start:V?+P.slice(0,-1):"",loose:!1,items:[]};P=V?`\\d{1,9}\\${P.slice(-1)}`:`\\${P}`,this.options.pedantic&&(P=V?P:"[*+-]");const ne=new RegExp(`^( {0,3}${P})((?:[	 ][^\\n]*)?(?:\\n|$))`);let ae=!1;for(;R;){let ke=!1,Te="",lt="";if(!(M=ne.exec(R))||this.rules.block.hr.test(R))break;Te=M[0],R=R.substring(Te.length);let Nt=M[2].split(`
`,1)[0].replace(/^\t+/,we=>" ".repeat(3*we.length)),vn=R.split(`
`,1)[0],Ln=!Nt.trim(),Rn=0;if(this.options.pedantic?(Rn=2,lt=Nt.trimStart()):Ln?Rn=M[1].length+1:(Rn=M[2].search(/[^ ]/),Rn=Rn>4?1:Rn,lt=Nt.slice(Rn),Rn+=M[1].length),Ln&&/^ *$/.test(vn)&&(Te+=vn+`
`,R=R.substring(vn.length+1),ke=!0),!ke){const we=new RegExp(`^ {0,${Math.min(3,Rn-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Me=new RegExp(`^ {0,${Math.min(3,Rn-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),dn=new RegExp(`^ {0,${Math.min(3,Rn-1)}}(?:\`\`\`|~~~)`),Ci=new RegExp(`^ {0,${Math.min(3,Rn-1)}}#`);for(;R;){const Ws=R.split(`
`,1)[0];if(vn=Ws,this.options.pedantic&&(vn=vn.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),dn.test(vn)||Ci.test(vn)||we.test(vn)||Me.test(R))break;if(vn.search(/[^ ]/)>=Rn||!vn.trim())lt+=`
`+vn.slice(Rn);else{if(Ln||Nt.search(/[^ ]/)>=4||dn.test(Nt)||Ci.test(Nt)||Me.test(Nt))break;lt+=`
`+vn}!Ln&&!vn.trim()&&(Ln=!0),Te+=Ws+`
`,R=R.substring(Ws.length+1),Nt=vn.slice(Rn)}}j.loose||(ae?j.loose=!0:/\n *\n *$/.test(Te)&&(ae=!0));let He=null,G;this.options.gfm&&(He=/^\[[ xX]\] /.exec(lt),He&&(G=He[0]!=="[ ] ",lt=lt.replace(/^\[[ xX]\] +/,""))),j.items.push({type:"list_item",raw:Te,task:!!He,checked:G,loose:!1,text:lt,tokens:[]}),j.raw+=Te}j.items[j.items.length-1].raw=j.items[j.items.length-1].raw.trimEnd(),j.items[j.items.length-1].text=j.items[j.items.length-1].text.trimEnd(),j.raw=j.raw.trimEnd();for(let ke=0;ke<j.items.length;ke++)if(this.lexer.state.top=!1,j.items[ke].tokens=this.lexer.blockTokens(j.items[ke].text,[]),!j.loose){const Te=j.items[ke].tokens.filter(Nt=>Nt.type==="space"),lt=Te.length>0&&Te.some(Nt=>/\n.*\n/.test(Nt.raw));j.loose=lt}if(j.loose)for(let ke=0;ke<j.items.length;ke++)j.items[ke].loose=!0;return j}}html(R){const M=this.rules.block.html.exec(R);if(M)return{type:"html",block:!0,raw:M[0],pre:M[1]==="pre"||M[1]==="script"||M[1]==="style",text:M[0]}}def(R){const M=this.rules.block.def.exec(R);if(M){const P=M[1].toLowerCase().replace(/\s+/g," "),V=M[2]?M[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",j=M[3]?M[3].substring(1,M[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):M[3];return{type:"def",tag:P,raw:M[0],href:V,title:j}}}table(R){const M=this.rules.block.table.exec(R);if(!M||!/[:|]/.test(M[2]))return;const P=p(M[1]),V=M[2].replace(/^\||\| *$/g,"").split("|"),j=M[3]&&M[3].trim()?M[3].replace(/\n[ \t]*$/,"").split(`
`):[],ne={type:"table",raw:M[0],header:[],align:[],rows:[]};if(P.length===V.length){for(const ae of V)/^ *-+: *$/.test(ae)?ne.align.push("right"):/^ *:-+: *$/.test(ae)?ne.align.push("center"):/^ *:-+ *$/.test(ae)?ne.align.push("left"):ne.align.push(null);for(let ae=0;ae<P.length;ae++)ne.header.push({text:P[ae],tokens:this.lexer.inline(P[ae]),header:!0,align:ne.align[ae]});for(const ae of j)ne.rows.push(p(ae,ne.header.length).map((ke,Te)=>({text:ke,tokens:this.lexer.inline(ke),header:!1,align:ne.align[Te]})));return ne}}lheading(R){const M=this.rules.block.lheading.exec(R);if(M)return{type:"heading",raw:M[0],depth:M[2].charAt(0)==="="?1:2,text:M[1],tokens:this.lexer.inline(M[1])}}paragraph(R){const M=this.rules.block.paragraph.exec(R);if(M){const P=M[1].charAt(M[1].length-1)===`
`?M[1].slice(0,-1):M[1];return{type:"paragraph",raw:M[0],text:P,tokens:this.lexer.inline(P)}}}text(R){const M=this.rules.block.text.exec(R);if(M)return{type:"text",raw:M[0],text:M[0],tokens:this.lexer.inline(M[0])}}escape(R){const M=this.rules.inline.escape.exec(R);if(M)return{type:"escape",raw:M[0],text:d(M[1])}}tag(R){const M=this.rules.inline.tag.exec(R);if(M)return!this.lexer.state.inLink&&/^<a /i.test(M[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(M[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(M[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(M[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:M[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:M[0]}}link(R){const M=this.rules.inline.link.exec(R);if(M){const P=M[2].trim();if(!this.options.pedantic&&/^</.test(P)){if(!/>$/.test(P))return;const ne=_(P.slice(0,-1),"\\");if((P.length-ne.length)%2===0)return}else{const ne=b(M[2],"()");if(ne>-1){const ke=(M[0].indexOf("!")===0?5:4)+M[1].length+ne;M[2]=M[2].substring(0,ne),M[0]=M[0].substring(0,ke).trim(),M[3]=""}}let V=M[2],j="";if(this.options.pedantic){const ne=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(V);ne&&(V=ne[1],j=ne[3])}else j=M[3]?M[3].slice(1,-1):"";return V=V.trim(),/^</.test(V)&&(this.options.pedantic&&!/>$/.test(P)?V=V.slice(1):V=V.slice(1,-1)),v(M,{href:V&&V.replace(this.rules.inline.anyPunctuation,"$1"),title:j&&j.replace(this.rules.inline.anyPunctuation,"$1")},M[0],this.lexer)}}reflink(R,M){let P;if((P=this.rules.inline.reflink.exec(R))||(P=this.rules.inline.nolink.exec(R))){const V=(P[2]||P[1]).replace(/\s+/g," "),j=M[V.toLowerCase()];if(!j){const ne=P[0].charAt(0);return{type:"text",raw:ne,text:ne}}return v(P,j,P[0],this.lexer)}}emStrong(R,M,P=""){let V=this.rules.inline.emStrongLDelim.exec(R);if(!V||V[3]&&P.match(/[\p{L}\p{N}]/u))return;if(!(V[1]||V[2]||"")||!P||this.rules.inline.punctuation.exec(P)){const ne=[...V[0]].length-1;let ae,ke,Te=ne,lt=0;const Nt=V[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(Nt.lastIndex=0,M=M.slice(-1*R.length+ne);(V=Nt.exec(M))!=null;){if(ae=V[1]||V[2]||V[3]||V[4]||V[5]||V[6],!ae)continue;if(ke=[...ae].length,V[3]||V[4]){Te+=ke;continue}else if((V[5]||V[6])&&ne%3&&!((ne+ke)%3)){lt+=ke;continue}if(Te-=ke,Te>0)continue;ke=Math.min(ke,ke+Te+lt);const vn=[...V[0]][0].length,Ln=R.slice(0,ne+V.index+vn+ke);if(Math.min(ne,ke)%2){const He=Ln.slice(1,-1);return{type:"em",raw:Ln,text:He,tokens:this.lexer.inlineTokens(He)}}const Rn=Ln.slice(2,-2);return{type:"strong",raw:Ln,text:Rn,tokens:this.lexer.inlineTokens(Rn)}}}}codespan(R){const M=this.rules.inline.code.exec(R);if(M){let P=M[2].replace(/\n/g," ");const V=/[^ ]/.test(P),j=/^ /.test(P)&&/ $/.test(P);return V&&j&&(P=P.substring(1,P.length-1)),P=d(P,!0),{type:"codespan",raw:M[0],text:P}}}br(R){const M=this.rules.inline.br.exec(R);if(M)return{type:"br",raw:M[0]}}del(R){const M=this.rules.inline.del.exec(R);if(M)return{type:"del",raw:M[0],text:M[2],tokens:this.lexer.inlineTokens(M[2])}}autolink(R){const M=this.rules.inline.autolink.exec(R);if(M){let P,V;return M[2]==="@"?(P=d(M[1]),V="mailto:"+P):(P=d(M[1]),V=P),{type:"link",raw:M[0],text:P,href:V,tokens:[{type:"text",raw:P,text:P}]}}}url(R){var P;let M;if(M=this.rules.inline.url.exec(R)){let V,j;if(M[2]==="@")V=d(M[0]),j="mailto:"+V;else{let ne;do ne=M[0],M[0]=((P=this.rules.inline._backpedal.exec(M[0]))==null?void 0:P[0])??"";while(ne!==M[0]);V=d(M[0]),M[1]==="www."?j="http://"+M[0]:j=M[0]}return{type:"link",raw:M[0],text:V,href:j,tokens:[{type:"text",raw:V,text:V}]}}}inlineText(R){const M=this.rules.inline.text.exec(R);if(M){let P;return this.lexer.state.inRawBlock?P=M[0]:P=d(M[0]),{type:"text",raw:M[0],text:P}}}}const y=/^(?: *(?:\n|$))+/,k=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,x=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,D=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,N=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,W=/(?:[*+-]|\d{1,9}[.)])/,B=u(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,W).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),z=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,U=/^[^\n]+/,H=/(?!\s*\])(?:\\.|[^\[\]\\])+/,X=u(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",H).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),re=u(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,W).getRegex(),fe="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",pe=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ce=u("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",pe).replace("tag",fe).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Oe=u(z).replace("hr",D).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe).getRegex(),un={blockquote:u(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Oe).getRegex(),code:k,def:X,fences:x,heading:N,hr:D,html:ce,lheading:B,list:re,newline:y,paragraph:Oe,table:g,text:U},Be=u("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",D).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe).getRegex(),yt={...un,table:Be,paragraph:u(z).replace("hr",D).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Be).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe).getRegex()},$n={...un,html:u(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",pe).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:g,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:u(z).replace("hr",D).replace("heading",` *#{1,6} *[^
]`).replace("lheading",B).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},qn=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,us=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Fs=/^( {2,}|\\)\n(?!\s*$)/,ha=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Qi="\\p{P}\\p{S}",Mr=u(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Qi).getRegex(),bi=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Ar=u(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Qi).getRegex(),Fd=u("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Qi).getRegex(),Um=u("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Qi).getRegex(),jm=u(/\\([punct])/,"gu").replace(/punct/g,Qi).getRegex(),ny=u(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),iy=u(pe).replace("(?:-->|$)","-->").getRegex(),QE=u("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",iy).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Wd=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Pu=u(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Wd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),cc=u(/^!?\[(label)\]\[(ref)\]/).replace("label",Wd).replace("ref",H).getRegex(),dc=u(/^!?\[(ref)\](?:\[\])?/).replace("ref",H).getRegex(),sy=u("reflink|nolink(?!\\()","g").replace("reflink",cc).replace("nolink",dc).getRegex(),qm={_backpedal:g,anyPunctuation:jm,autolink:ny,blockSkip:bi,br:Fs,code:us,del:g,emStrongLDelim:Ar,emStrongRDelimAst:Fd,emStrongRDelimUnd:Um,escape:qn,link:Pu,nolink:dc,punctuation:Mr,reflink:cc,reflinkSearch:sy,tag:QE,text:ha,url:g},oy={...qm,link:u(/^!?\[(label)\]\((.*?)\)/).replace("label",Wd).getRegex(),reflink:u(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Wd).getRegex()},Ou={...qm,escape:u(qn).replace("])","~|])").getRegex(),url:u(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ry={...Ou,br:u(Fs).replace("{2,}","*").getRegex(),text:u(Ou.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},hc={normal:un,gfm:yt,pedantic:$n},sl={normal:qm,gfm:Ou,breaks:ry,pedantic:oy};class vi{constructor(R){Bn(this,"tokens");Bn(this,"options");Bn(this,"state");Bn(this,"tokenizer");Bn(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=R||e.defaults,this.options.tokenizer=this.options.tokenizer||new w,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const M={block:hc.normal,inline:sl.normal};this.options.pedantic?(M.block=hc.pedantic,M.inline=sl.pedantic):this.options.gfm&&(M.block=hc.gfm,this.options.breaks?M.inline=sl.breaks:M.inline=sl.gfm),this.tokenizer.rules=M}static get rules(){return{block:hc,inline:sl}}static lex(R,M){return new vi(M).lex(R)}static lexInline(R,M){return new vi(M).inlineTokens(R)}lex(R){R=R.replace(/\r\n|\r/g,`
`),this.blockTokens(R,this.tokens);for(let M=0;M<this.inlineQueue.length;M++){const P=this.inlineQueue[M];this.inlineTokens(P.src,P.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(R,M=[],P=!1){this.options.pedantic?R=R.replace(/\t/g,"    ").replace(/^ +$/gm,""):R=R.replace(/^( *)(\t+)/gm,(ae,ke,Te)=>ke+"    ".repeat(Te.length));let V,j,ne;for(;R;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(ae=>(V=ae.call({lexer:this},R,M))?(R=R.substring(V.raw.length),M.push(V),!0):!1))){if(V=this.tokenizer.space(R)){R=R.substring(V.raw.length),V.raw.length===1&&M.length>0?M[M.length-1].raw+=`
`:M.push(V);continue}if(V=this.tokenizer.code(R)){R=R.substring(V.raw.length),j=M[M.length-1],j&&(j.type==="paragraph"||j.type==="text")?(j.raw+=`
`+V.raw,j.text+=`
`+V.text,this.inlineQueue[this.inlineQueue.length-1].src=j.text):M.push(V);continue}if(V=this.tokenizer.fences(R)){R=R.substring(V.raw.length),M.push(V);continue}if(V=this.tokenizer.heading(R)){R=R.substring(V.raw.length),M.push(V);continue}if(V=this.tokenizer.hr(R)){R=R.substring(V.raw.length),M.push(V);continue}if(V=this.tokenizer.blockquote(R)){R=R.substring(V.raw.length),M.push(V);continue}if(V=this.tokenizer.list(R)){R=R.substring(V.raw.length),M.push(V);continue}if(V=this.tokenizer.html(R)){R=R.substring(V.raw.length),M.push(V);continue}if(V=this.tokenizer.def(R)){R=R.substring(V.raw.length),j=M[M.length-1],j&&(j.type==="paragraph"||j.type==="text")?(j.raw+=`
`+V.raw,j.text+=`
`+V.raw,this.inlineQueue[this.inlineQueue.length-1].src=j.text):this.tokens.links[V.tag]||(this.tokens.links[V.tag]={href:V.href,title:V.title});continue}if(V=this.tokenizer.table(R)){R=R.substring(V.raw.length),M.push(V);continue}if(V=this.tokenizer.lheading(R)){R=R.substring(V.raw.length),M.push(V);continue}if(ne=R,this.options.extensions&&this.options.extensions.startBlock){let ae=1/0;const ke=R.slice(1);let Te;this.options.extensions.startBlock.forEach(lt=>{Te=lt.call({lexer:this},ke),typeof Te=="number"&&Te>=0&&(ae=Math.min(ae,Te))}),ae<1/0&&ae>=0&&(ne=R.substring(0,ae+1))}if(this.state.top&&(V=this.tokenizer.paragraph(ne))){j=M[M.length-1],P&&(j==null?void 0:j.type)==="paragraph"?(j.raw+=`
`+V.raw,j.text+=`
`+V.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=j.text):M.push(V),P=ne.length!==R.length,R=R.substring(V.raw.length);continue}if(V=this.tokenizer.text(R)){R=R.substring(V.raw.length),j=M[M.length-1],j&&j.type==="text"?(j.raw+=`
`+V.raw,j.text+=`
`+V.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=j.text):M.push(V);continue}if(R){const ae="Infinite loop on byte: "+R.charCodeAt(0);if(this.options.silent){console.error(ae);break}else throw new Error(ae)}}return this.state.top=!0,M}inline(R,M=[]){return this.inlineQueue.push({src:R,tokens:M}),M}inlineTokens(R,M=[]){let P,V,j,ne=R,ae,ke,Te;if(this.tokens.links){const lt=Object.keys(this.tokens.links);if(lt.length>0)for(;(ae=this.tokenizer.rules.inline.reflinkSearch.exec(ne))!=null;)lt.includes(ae[0].slice(ae[0].lastIndexOf("[")+1,-1))&&(ne=ne.slice(0,ae.index)+"["+"a".repeat(ae[0].length-2)+"]"+ne.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(ae=this.tokenizer.rules.inline.blockSkip.exec(ne))!=null;)ne=ne.slice(0,ae.index)+"["+"a".repeat(ae[0].length-2)+"]"+ne.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(ae=this.tokenizer.rules.inline.anyPunctuation.exec(ne))!=null;)ne=ne.slice(0,ae.index)+"++"+ne.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;R;)if(ke||(Te=""),ke=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(lt=>(P=lt.call({lexer:this},R,M))?(R=R.substring(P.raw.length),M.push(P),!0):!1))){if(P=this.tokenizer.escape(R)){R=R.substring(P.raw.length),M.push(P);continue}if(P=this.tokenizer.tag(R)){R=R.substring(P.raw.length),V=M[M.length-1],V&&P.type==="text"&&V.type==="text"?(V.raw+=P.raw,V.text+=P.text):M.push(P);continue}if(P=this.tokenizer.link(R)){R=R.substring(P.raw.length),M.push(P);continue}if(P=this.tokenizer.reflink(R,this.tokens.links)){R=R.substring(P.raw.length),V=M[M.length-1],V&&P.type==="text"&&V.type==="text"?(V.raw+=P.raw,V.text+=P.text):M.push(P);continue}if(P=this.tokenizer.emStrong(R,ne,Te)){R=R.substring(P.raw.length),M.push(P);continue}if(P=this.tokenizer.codespan(R)){R=R.substring(P.raw.length),M.push(P);continue}if(P=this.tokenizer.br(R)){R=R.substring(P.raw.length),M.push(P);continue}if(P=this.tokenizer.del(R)){R=R.substring(P.raw.length),M.push(P);continue}if(P=this.tokenizer.autolink(R)){R=R.substring(P.raw.length),M.push(P);continue}if(!this.state.inLink&&(P=this.tokenizer.url(R))){R=R.substring(P.raw.length),M.push(P);continue}if(j=R,this.options.extensions&&this.options.extensions.startInline){let lt=1/0;const Nt=R.slice(1);let vn;this.options.extensions.startInline.forEach(Ln=>{vn=Ln.call({lexer:this},Nt),typeof vn=="number"&&vn>=0&&(lt=Math.min(lt,vn))}),lt<1/0&&lt>=0&&(j=R.substring(0,lt+1))}if(P=this.tokenizer.inlineText(j)){R=R.substring(P.raw.length),P.raw.slice(-1)!=="_"&&(Te=P.raw.slice(-1)),ke=!0,V=M[M.length-1],V&&V.type==="text"?(V.raw+=P.raw,V.text+=P.text):M.push(P);continue}if(R){const lt="Infinite loop on byte: "+R.charCodeAt(0);if(this.options.silent){console.error(lt);break}else throw new Error(lt)}}return M}}class Pr{constructor(R){Bn(this,"options");Bn(this,"parser");this.options=R||e.defaults}space(R){return""}code({text:R,lang:M,escaped:P}){var ne;const V=(ne=(M||"").match(/^\S*/))==null?void 0:ne[0],j=R.replace(/\n$/,"")+`
`;return V?'<pre><code class="language-'+d(V)+'">'+(P?j:d(j,!0))+`</code></pre>
`:"<pre><code>"+(P?j:d(j,!0))+`</code></pre>
`}blockquote({tokens:R}){return`<blockquote>
${this.parser.parse(R)}</blockquote>
`}html({text:R}){return R}heading({tokens:R,depth:M}){return`<h${M}>${this.parser.parseInline(R)}</h${M}>
`}hr(R){return`<hr>
`}list(R){const M=R.ordered,P=R.start;let V="";for(let ae=0;ae<R.items.length;ae++){const ke=R.items[ae];V+=this.listitem(ke)}const j=M?"ol":"ul",ne=M&&P!==1?' start="'+P+'"':"";return"<"+j+ne+`>
`+V+"</"+j+`>
`}listitem(R){let M="";if(R.task){const P=this.checkbox({checked:!!R.checked});R.loose?R.tokens.length>0&&R.tokens[0].type==="paragraph"?(R.tokens[0].text=P+" "+R.tokens[0].text,R.tokens[0].tokens&&R.tokens[0].tokens.length>0&&R.tokens[0].tokens[0].type==="text"&&(R.tokens[0].tokens[0].text=P+" "+R.tokens[0].tokens[0].text)):R.tokens.unshift({type:"text",raw:P+" ",text:P+" "}):M+=P+" "}return M+=this.parser.parse(R.tokens,!!R.loose),`<li>${M}</li>
`}checkbox({checked:R}){return"<input "+(R?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:R}){return`<p>${this.parser.parseInline(R)}</p>
`}table(R){let M="",P="";for(let j=0;j<R.header.length;j++)P+=this.tablecell(R.header[j]);M+=this.tablerow({text:P});let V="";for(let j=0;j<R.rows.length;j++){const ne=R.rows[j];P="";for(let ae=0;ae<ne.length;ae++)P+=this.tablecell(ne[ae]);V+=this.tablerow({text:P})}return V&&(V=`<tbody>${V}</tbody>`),`<table>
<thead>
`+M+`</thead>
`+V+`</table>
`}tablerow({text:R}){return`<tr>
${R}</tr>
`}tablecell(R){const M=this.parser.parseInline(R.tokens),P=R.header?"th":"td";return(R.align?`<${P} align="${R.align}">`:`<${P}>`)+M+`</${P}>
`}strong({tokens:R}){return`<strong>${this.parser.parseInline(R)}</strong>`}em({tokens:R}){return`<em>${this.parser.parseInline(R)}</em>`}codespan({text:R}){return`<code>${R}</code>`}br(R){return"<br>"}del({tokens:R}){return`<del>${this.parser.parseInline(R)}</del>`}link({href:R,title:M,tokens:P}){const V=this.parser.parseInline(P),j=f(R);if(j===null)return V;R=j;let ne='<a href="'+R+'"';return M&&(ne+=' title="'+M+'"'),ne+=">"+V+"</a>",ne}image({href:R,title:M,text:P}){const V=f(R);if(V===null)return P;R=V;let j=`<img src="${R}" alt="${P}"`;return M&&(j+=` title="${M}"`),j+=">",j}text(R){return"tokens"in R&&R.tokens?this.parser.parseInline(R.tokens):R.text}}class Bd{strong({text:R}){return R}em({text:R}){return R}codespan({text:R}){return R}del({text:R}){return R}html({text:R}){return R}text({text:R}){return R}link({text:R}){return""+R}image({text:R}){return""+R}br(){return""}}class no{constructor(R){Bn(this,"options");Bn(this,"renderer");Bn(this,"textRenderer");this.options=R||e.defaults,this.options.renderer=this.options.renderer||new Pr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Bd}static parse(R,M){return new no(M).parse(R)}static parseInline(R,M){return new no(M).parseInline(R)}parse(R,M=!0){let P="";for(let V=0;V<R.length;V++){const j=R[V];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[j.type]){const ae=j,ke=this.options.extensions.renderers[ae.type].call({parser:this},ae);if(ke!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(ae.type)){P+=ke||"";continue}}const ne=j;switch(ne.type){case"space":{P+=this.renderer.space(ne);continue}case"hr":{P+=this.renderer.hr(ne);continue}case"heading":{P+=this.renderer.heading(ne);continue}case"code":{P+=this.renderer.code(ne);continue}case"table":{P+=this.renderer.table(ne);continue}case"blockquote":{P+=this.renderer.blockquote(ne);continue}case"list":{P+=this.renderer.list(ne);continue}case"html":{P+=this.renderer.html(ne);continue}case"paragraph":{P+=this.renderer.paragraph(ne);continue}case"text":{let ae=ne,ke=this.renderer.text(ae);for(;V+1<R.length&&R[V+1].type==="text";)ae=R[++V],ke+=`
`+this.renderer.text(ae);M?P+=this.renderer.paragraph({type:"paragraph",raw:ke,text:ke,tokens:[{type:"text",raw:ke,text:ke}]}):P+=ke;continue}default:{const ae='Token with "'+ne.type+'" type was not found.';if(this.options.silent)return console.error(ae),"";throw new Error(ae)}}}return P}parseInline(R,M){M=M||this.renderer;let P="";for(let V=0;V<R.length;V++){const j=R[V];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[j.type]){const ae=this.options.extensions.renderers[j.type].call({parser:this},j);if(ae!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(j.type)){P+=ae||"";continue}}const ne=j;switch(ne.type){case"escape":{P+=M.text(ne);break}case"html":{P+=M.html(ne);break}case"link":{P+=M.link(ne);break}case"image":{P+=M.image(ne);break}case"strong":{P+=M.strong(ne);break}case"em":{P+=M.em(ne);break}case"codespan":{P+=M.codespan(ne);break}case"br":{P+=M.br(ne);break}case"del":{P+=M.del(ne);break}case"text":{P+=M.text(ne);break}default:{const ae='Token with "'+ne.type+'" type was not found.';if(this.options.silent)return console.error(ae),"";throw new Error(ae)}}}return P}}class Hd{constructor(R){Bn(this,"options");this.options=R||e.defaults}preprocess(R){return R}postprocess(R){return R}processAllTokens(R){return R}}Bn(Hd,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class ol{constructor(...R){Bn(this,"defaults",t());Bn(this,"options",this.setOptions);Bn(this,"parse",this.parseMarkdown(vi.lex,no.parse));Bn(this,"parseInline",this.parseMarkdown(vi.lexInline,no.parseInline));Bn(this,"Parser",no);Bn(this,"Renderer",Pr);Bn(this,"TextRenderer",Bd);Bn(this,"Lexer",vi);Bn(this,"Tokenizer",w);Bn(this,"Hooks",Hd);this.use(...R)}walkTokens(R,M){var V,j;let P=[];for(const ne of R)switch(P=P.concat(M.call(this,ne)),ne.type){case"table":{const ae=ne;for(const ke of ae.header)P=P.concat(this.walkTokens(ke.tokens,M));for(const ke of ae.rows)for(const Te of ke)P=P.concat(this.walkTokens(Te.tokens,M));break}case"list":{const ae=ne;P=P.concat(this.walkTokens(ae.items,M));break}default:{const ae=ne;(j=(V=this.defaults.extensions)==null?void 0:V.childTokens)!=null&&j[ae.type]?this.defaults.extensions.childTokens[ae.type].forEach(ke=>{const Te=ae[ke].flat(1/0);P=P.concat(this.walkTokens(Te,M))}):ae.tokens&&(P=P.concat(this.walkTokens(ae.tokens,M)))}}return P}use(...R){const M=this.defaults.extensions||{renderers:{},childTokens:{}};return R.forEach(P=>{const V={...P};if(V.async=this.defaults.async||V.async||!1,P.extensions&&(P.extensions.forEach(j=>{if(!j.name)throw new Error("extension name required");if("renderer"in j){const ne=M.renderers[j.name];ne?M.renderers[j.name]=function(...ae){let ke=j.renderer.apply(this,ae);return ke===!1&&(ke=ne.apply(this,ae)),ke}:M.renderers[j.name]=j.renderer}if("tokenizer"in j){if(!j.level||j.level!=="block"&&j.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const ne=M[j.level];ne?ne.unshift(j.tokenizer):M[j.level]=[j.tokenizer],j.start&&(j.level==="block"?M.startBlock?M.startBlock.push(j.start):M.startBlock=[j.start]:j.level==="inline"&&(M.startInline?M.startInline.push(j.start):M.startInline=[j.start]))}"childTokens"in j&&j.childTokens&&(M.childTokens[j.name]=j.childTokens)}),V.extensions=M),P.renderer){const j=this.defaults.renderer||new Pr(this.defaults);for(const ne in P.renderer){if(!(ne in j))throw new Error(`renderer '${ne}' does not exist`);if(["options","parser"].includes(ne))continue;const ae=ne,ke=P.renderer[ae],Te=j[ae];j[ae]=(...lt)=>{let Nt=ke.apply(j,lt);return Nt===!1&&(Nt=Te.apply(j,lt)),Nt||""}}V.renderer=j}if(P.tokenizer){const j=this.defaults.tokenizer||new w(this.defaults);for(const ne in P.tokenizer){if(!(ne in j))throw new Error(`tokenizer '${ne}' does not exist`);if(["options","rules","lexer"].includes(ne))continue;const ae=ne,ke=P.tokenizer[ae],Te=j[ae];j[ae]=(...lt)=>{let Nt=ke.apply(j,lt);return Nt===!1&&(Nt=Te.apply(j,lt)),Nt}}V.tokenizer=j}if(P.hooks){const j=this.defaults.hooks||new Hd;for(const ne in P.hooks){if(!(ne in j))throw new Error(`hook '${ne}' does not exist`);if(ne==="options")continue;const ae=ne,ke=P.hooks[ae],Te=j[ae];Hd.passThroughHooks.has(ne)?j[ae]=lt=>{if(this.defaults.async)return Promise.resolve(ke.call(j,lt)).then(vn=>Te.call(j,vn));const Nt=ke.call(j,lt);return Te.call(j,Nt)}:j[ae]=(...lt)=>{let Nt=ke.apply(j,lt);return Nt===!1&&(Nt=Te.apply(j,lt)),Nt}}V.hooks=j}if(P.walkTokens){const j=this.defaults.walkTokens,ne=P.walkTokens;V.walkTokens=function(ae){let ke=[];return ke.push(ne.call(this,ae)),j&&(ke=ke.concat(j.call(this,ae))),ke}}this.defaults={...this.defaults,...V}}),this}setOptions(R){return this.defaults={...this.defaults,...R},this}lexer(R,M){return vi.lex(R,M??this.defaults)}parser(R,M){return no.parse(R,M??this.defaults)}parseMarkdown(R,M){return(V,j)=>{const ne={...j},ae={...this.defaults,...ne},ke=this.onError(!!ae.silent,!!ae.async);if(this.defaults.async===!0&&ne.async===!1)return ke(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof V>"u"||V===null)return ke(new Error("marked(): input parameter is undefined or null"));if(typeof V!="string")return ke(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(V)+", string expected"));if(ae.hooks&&(ae.hooks.options=ae),ae.async)return Promise.resolve(ae.hooks?ae.hooks.preprocess(V):V).then(Te=>R(Te,ae)).then(Te=>ae.hooks?ae.hooks.processAllTokens(Te):Te).then(Te=>ae.walkTokens?Promise.all(this.walkTokens(Te,ae.walkTokens)).then(()=>Te):Te).then(Te=>M(Te,ae)).then(Te=>ae.hooks?ae.hooks.postprocess(Te):Te).catch(ke);try{ae.hooks&&(V=ae.hooks.preprocess(V));let Te=R(V,ae);ae.hooks&&(Te=ae.hooks.processAllTokens(Te)),ae.walkTokens&&this.walkTokens(Te,ae.walkTokens);let lt=M(Te,ae);return ae.hooks&&(lt=ae.hooks.postprocess(lt)),lt}catch(Te){return ke(Te)}}}onError(R,M){return P=>{if(P.message+=`
Please report this to https://github.com/markedjs/marked.`,R){const V="<p>An error occurred:</p><pre>"+d(P.message+"",!0)+"</pre>";return M?Promise.resolve(V):V}if(M)return Promise.reject(P);throw P}}}const uc=new ol;function nn(at,R){return uc.parse(at,R)}nn.options=nn.setOptions=function(at){return uc.setOptions(at),nn.defaults=uc.defaults,n(nn.defaults),nn},nn.getDefaults=t,nn.defaults=e.defaults,nn.use=function(...at){return uc.use(...at),nn.defaults=uc.defaults,n(nn.defaults),nn},nn.walkTokens=function(at,R){return uc.walkTokens(at,R)},nn.parseInline=uc.parseInline,nn.Parser=no,nn.parser=no.parse,nn.Renderer=Pr,nn.TextRenderer=Bd,nn.Lexer=vi,nn.lexer=vi.lex,nn.Tokenizer=w,nn.Hooks=Hd,nn.parse=nn;const Ti=nn.options,Vd=nn.setOptions,JE=nn.use,ay=nn.walkTokens,yv=nn.parseInline,ly=nn,cy=no.parse,eN=vi.lex;e.Hooks=Hd,e.Lexer=vi,e.Marked=ol,e.Parser=no,e.Renderer=Pr,e.TextRenderer=Bd,e.Tokenizer=w,e.getDefaults=t,e.lexer=eN,e.marked=nn,e.options=Ti,e.parse=ly,e.parseInline=yv,e.parser=cy,e.setOptions=Vd,e.use=JE,e.walkTokens=ay})})();Yi.Hooks||exports.Hooks;Yi.Lexer||exports.Lexer;Yi.Marked||exports.Marked;Yi.Parser||exports.Parser;var sG=Yi.Renderer||exports.Renderer;Yi.TextRenderer||exports.TextRenderer;Yi.Tokenizer||exports.Tokenizer;var she=Yi.defaults||exports.defaults;Yi.getDefaults||exports.getDefaults;var GT=Yi.lexer||exports.lexer;Yi.marked||exports.marked;Yi.options||exports.options;var oG=Yi.parse||exports.parse;Yi.parseInline||exports.parseInline;var ohe=Yi.parser||exports.parser;Yi.setOptions||exports.setOptions;Yi.use||exports.use;Yi.walkTokens||exports.walkTokens;function rhe(s){return JSON.stringify(s,ahe)}function OA(s){let e=JSON.parse(s);return e=FA(e),e}function ahe(s,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function FA(s,e=0){if(!s||e>200)return s;if(typeof s=="object"){switch(s.$mid){case 1:return Se.revive(s);case 2:return new RegExp(s.source,s.flags);case 17:return new Date(s.source)}if(s instanceof NT||s instanceof Uint8Array)return s;if(Array.isArray(s))for(let t=0;t<s.length;++t)s[t]=FA(s[t],e+1);else for(const t in s)Object.hasOwnProperty.call(s,t)&&(s[t]=FA(s[t],e+1))}return s}const JN=Object.freeze({image:({href:s,title:e,text:t})=>{let n=[],i=[];return s&&({href:s,dimensions:n}=ihe(s),i.push(`src="${Ey(s)}"`)),t&&i.push(`alt="${Ey(t)}"`),e&&i.push(`title="${Ey(e)}"`),n.length&&(i=i.concat(n)),"<img "+i.join(" ")+">"},paragraph({tokens:s}){return`<p>${this.parser.parseInline(s)}</p>`},link({href:s,title:e,tokens:t}){let n=this.parser.parseInline(t);return typeof s!="string"?"":(s===n&&(n=QN(n)),e=typeof e=="string"?Ey(QN(e)):"",s=QN(s),s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${s}" title="${e||s}" draggable="false">${n}</a>`)}});function ZT(s,e={},t={}){const n=new q;let i=!1;const o=S9(e),r=function(p){let _;try{_=OA(decodeURIComponent(p))}catch{}return _?(_=bj(_,b=>{if(s.uris&&s.uris[b])return Se.revive(s.uris[b])}),encodeURIComponent(JSON.stringify(_))):p},a=function(p,_){const b=s.uris&&s.uris[p];let v=Se.revive(b);return _?p.startsWith(We.data+":")?p:(v||(v=Se.parse(p)),mT.uriToBrowserUri(v).toString(!0)):!v||Se.parse(p).toString()===v.toString()?p:(v.query&&(v=v.with({query:r(v.query)})),v.toString())},l=new sG;l.image=JN.image,l.link=JN.link,l.paragraph=JN.paragraph;const c=[],d=[];if(e.codeBlockRendererSync?l.code=({text:p,lang:_})=>{const b=PA.nextId(),v=e.codeBlockRendererSync(Y6(_),p);return d.push([b,v]),`<div class="code" data-code="${b}">${SC(p)}</div>`}:e.codeBlockRenderer&&(l.code=({text:p,lang:_})=>{const b=PA.nextId(),v=e.codeBlockRenderer(Y6(_),p);return c.push(v.then(C=>[b,C])),`<div class="code" data-code="${b}">${SC(p)}</div>`}),e.actionHandler){const p=function(v){let C=v.target;if(!(C.tagName!=="A"&&(C=C.parentElement,!C||C.tagName!=="A")))try{let w=C.dataset.href;w&&(s.baseUri&&(w=eR(Se.from(s.baseUri),w)),e.actionHandler.callback(w,v))}catch(w){Pe(w)}finally{v.preventDefault()}},_=e.actionHandler.disposables.add(new nt(o,"click")),b=e.actionHandler.disposables.add(new nt(o,"auxclick"));e.actionHandler.disposables.add(se.any(_.event,b.event)(v=>{const C=new Gr(Le(o),v);!C.leftButton&&!C.middleButton||p(C)})),e.actionHandler.disposables.add($(o,"keydown",v=>{const C=new Pt(v);!C.equals(10)&&!C.equals(3)||p(C)}))}s.supportHtml||(l.html=({text:p})=>{var b;return(b=e.sanitizerOptions)!=null&&b.replaceWithPlaintext?SC(p):(s.isTrusted?p.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?p:""}),t.renderer=l;let h=s.value??"";h.length>1e5&&(h=`${h.substr(0,1e5)}…`),s.supportThemeIcons&&(h=jde(h));let u;if(e.fillInIncompleteTokens){const p={...she,...t},_=GT(h,p),b=Che(_);u=ohe(b,p)}else u=oG(h,{...t,async:!1});s.supportThemeIcons&&(u=Rh(u).map(_=>typeof _=="string"?_:_.outerHTML).join(""));const g=new DOMParser().parseFromString(WA({isTrusted:s.isTrusted,...e.sanitizerOptions},u),"text/html");if(g.body.querySelectorAll("img, audio, video, source").forEach(p=>{const _=p.getAttribute("src");if(_){let b=_;try{s.baseUri&&(b=eR(Se.from(s.baseUri),b))}catch{}if(p.setAttribute("src",a(b,!0)),e.remoteImageIsAllowed){const v=Se.parse(b);v.scheme!==We.file&&v.scheme!==We.data&&!e.remoteImageIsAllowed(v)&&p.replaceWith(te("",void 0,p.outerHTML))}}}),g.body.querySelectorAll("a").forEach(p=>{const _=p.getAttribute("href");if(p.setAttribute("href",""),!_||/^data:|javascript:/i.test(_)||/^command:/i.test(_)&&!s.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(_))p.replaceWith(...p.childNodes);else{let b=a(_,!1);s.baseUri&&(b=eR(Se.from(s.baseUri),_)),p.dataset.href=b}}),o.innerHTML=WA({isTrusted:s.isTrusted,...e.sanitizerOptions},g.body.innerHTML),c.length>0)Promise.all(c).then(p=>{var v;if(i)return;const _=new Map(p),b=o.querySelectorAll("div[data-code]");for(const C of b){const w=_.get(C.dataset.code??"");w&&Di(C,w)}(v=e.asyncRenderCallback)==null||v.call(e)});else if(d.length>0){const p=new Map(d),_=o.querySelectorAll("div[data-code]");for(const b of _){const v=p.get(b.dataset.code??"");v&&Di(b,v)}}if(e.asyncRenderCallback)for(const p of o.getElementsByTagName("img")){const _=n.add($(p,"load",()=>{_.dispose(),e.asyncRenderCallback()}))}return{element:o,dispose:()=>{i=!0,n.dispose()}}}function Y6(s){if(!s)return"";const e=s.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:s}function eR(s,e){return/^\w[\w\d+.-]*:/.test(e)?e:s.path.endsWith("/")?K6(s,e).toString():K6(KT(s),e).toString()}const lhe=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function WA(s,e){const{config:t,allowedSchemes:n}=dhe(s),i=new q;i.add(X6("uponSanitizeAttribute",(o,r)=>{var a;if(r.attrName==="style"||r.attrName==="class"){if(o.tagName==="SPAN"){if(r.attrName==="style"){r.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(r.attrValue);return}else if(r.attrName==="class"){r.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(r.attrValue);return}}r.keepAttr=!1;return}else if(o.tagName==="INPUT"&&((a=o.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"){if(r.attrName==="type"&&r.attrValue==="checkbox"||r.attrName==="disabled"||r.attrName==="checked"){r.keepAttr=!0;return}r.keepAttr=!1}})),i.add(X6("uponSanitizeElement",(o,r)=>{var a;if(r.tagName==="input"&&(((a=o.attributes.getNamedItem("type"))==null?void 0:a.value)==="checkbox"?o.setAttribute("disabled",""):s.replaceWithPlaintext||o.remove()),s.replaceWithPlaintext&&!r.allowedTags[r.tagName]&&r.tagName!=="body"&&o.parentElement){let l,c;if(r.tagName==="#comment")l=`<!--${o.textContent}-->`;else{const f=lhe.includes(r.tagName),g=o.attributes.length?" "+Array.from(o.attributes).map(p=>`${p.name}="${p.value}"`).join(" "):"";l=`<${r.tagName}${g}>`,f||(c=`</${r.tagName}>`)}const d=document.createDocumentFragment(),h=o.parentElement.ownerDocument.createTextNode(l);d.appendChild(h);const u=c?o.parentElement.ownerDocument.createTextNode(c):void 0;for(;o.firstChild;)d.appendChild(o.firstChild);u&&d.appendChild(u),o.parentElement.replaceChild(d,o)}})),i.add(Vse(n));try{return hq(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{i.dispose()}}const che=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function dhe(s){const e=[We.http,We.https,We.mailto,We.data,We.file,We.vscodeFileResource,We.vscodeRemote,We.vscodeRemoteResource];return s.isTrusted&&e.push(We.command),{config:{ALLOWED_TAGS:s.allowedTags??[...zse],ALLOWED_ATTR:che,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function hhe(s){return typeof s=="string"?s:uhe(s)}function uhe(s,e){let t=s.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}…`);const n=oG(t,{async:!1,renderer:mhe.value}).replace(/&(#\d+|[a-zA-Z]+);/g,i=>fhe.get(i)??i);return WA({isTrusted:!1},n).toString()}const fhe=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function ghe(){const s=new sG;return s.code=({text:e})=>e,s.blockquote=({text:e})=>e+`
`,s.html=e=>"",s.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},s.hr=()=>"",s.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},s.listitem=({text:e})=>e+`
`,s.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},s.table=function({header:e,rows:t}){return e.map(n=>this.tablecell(n)).join(" ")+`
`+t.map(n=>n.map(i=>this.tablecell(i)).join(" ")).join(`
`)+`
`},s.tablerow=({text:e})=>e,s.tablecell=function({tokens:e}){return this.parser.parseInline(e)},s.strong=({text:e})=>e,s.em=({text:e})=>e,s.codespan=({text:e})=>e,s.br=e=>`
`,s.del=({text:e})=>e,s.image=e=>"",s.text=({text:e})=>e,s.link=({text:e})=>e,s}const mhe=new ja(s=>ghe());function lL(s){let e="";return s.forEach(t=>{e+=t.raw}),e}function rG(s){var e,t;if(s.tokens)for(let n=s.tokens.length-1;n>=0;n--){const i=s.tokens[n];if(i.type==="text"){const o=i.raw.split(`
`),r=o[o.length-1];if(r.includes("`"))return yhe(s);if(r.includes("**"))return Ihe(s);if(r.match(/\*\w/))return She(s);if(r.match(/(^|\s)__\w/))return The(s);if(r.match(/(^|\s)_\w/))return khe(s);if(phe(r)||_he(r)&&s.tokens.slice(0,n).some(a=>a.type==="text"&&a.raw.match(/\[[^\]]*$/))){const a=s.tokens.slice(n+1);return((e=a[0])==null?void 0:e.type)==="link"&&((t=a[1])==null?void 0:t.type)==="text"&&a[1].raw.match(/^ *"[^"]*$/)||r.match(/^[^"]* +"[^"]*$/)?xhe(s):Lhe(s)}else if(r.match(/(^|\s)\[\w*/))return Dhe(s)}}}function phe(s){return!!s.match(/(^|\s)\[.*\]\(\w*/)}function _he(s){return!!s.match(/^[^\[]*\]\([^\)]*$/)}function bhe(s){var l;const e=s.items[s.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0;let n;if((t==null?void 0:t.type)==="text"&&!("inRawBlock"in e)&&(n=rG(t)),!n||n.type!=="paragraph")return;const i=lL(s.items.slice(0,-1)),o=(l=e.raw.match(/^(\s*(-|\d+\.|\*) +)/))==null?void 0:l[0];if(!o)return;const r=o+lL(e.tokens.slice(0,-1))+n.raw,a=GT(i+r)[0];if(a.type==="list")return a}const vhe=3;function Che(s){for(let e=0;e<vhe;e++){const t=whe(s);if(t)s=t;else break}return s}function whe(s){let e,t;for(e=0;e<s.length;e++){const n=s[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=Ehe(s.slice(e));break}if(e===s.length-1&&n.type==="list"){const i=bhe(n);if(i){t=[i];break}}if(e===s.length-1&&n.type==="paragraph"){const i=rG(n);if(i){t=[i];break}}}if(t){const n=[...s.slice(0,e),...t];return n.links=s.links,n}return null}function yhe(s){return ku(s,"`")}function She(s){return ku(s,"*")}function khe(s){return ku(s,"_")}function Lhe(s){return ku(s,")")}function xhe(s){return ku(s,'")')}function Dhe(s){return ku(s,"](https://microsoft.com)")}function Ihe(s){return ku(s,"**")}function The(s){return ku(s,"__")}function ku(s,e){const t=lL(Array.isArray(s)?s:[s]);return GT(t+e)[0]}function Ehe(s){const e=lL(s),t=e.split(`
`);let n,i=!1;for(let o=0;o<t.length;o++){const r=t[o].trim();if(typeof n>"u"&&r.match(/^\s*\|/)){const a=r.match(/(\|[^\|]+)(?=\||$)/g);a&&(n=a.length)}else if(typeof n=="number")if(r.match(/^\s*\|/)){if(o!==t.length-1)return;i=!0}else return}if(typeof n=="number"&&n>0){const o=i?t.slice(0,-1).join(`
`):e,r=!!o.match(/\|\s*$/),a=o+(r?"":"|")+`
|${" --- |".repeat(n)}`;return GT(a)}}function X6(s,e){return uq(s,e),ve(()=>fq(s))}const Ec=class Ec{static createEmpty(e,t){const n=Ec.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new Ec(i,e,t)}static createFromTextAndMetadata(e,t){let n=0,i="";const o=new Array;for(const{text:r,metadata:a}of e)o.push(n+r.length,a),n+=r.length,i+=r;return new Ec(new Uint32Array(o),i,t)}constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=n}equals(e){return e instanceof Ec?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const i=t<<1,o=i+(n<<1);for(let r=i;r<o;r++)if(this._tokens[r]!==e._tokens[r])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=$s.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return $s.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return $s.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return $s.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return $s.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return $s.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return Ec.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new R9(this,e,t,n)}static convertToEndOffset(e,t){const i=(e.length>>>1)-1;for(let o=0;o<i;o++)e[o<<1]=e[o+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){const o=n+Math.floor((i-n)/2),r=e[o<<1];if(r===t)return o+1;r<t?n=o+1:r>t&&(i=o)}return n}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="";const o=new Array;let r=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(r,a);const c=this._tokens[(t<<1)+1];o.push(i.length,c),t++,r=a}else if(l){if(l.offset>r){i+=this._text.substring(r,l.offset);const c=this._tokens[(t<<1)+1];o.push(i.length,c),r=l.offset}i+=l.text,o.push(i.length,l.tokenMetadata),n++}else break}return new Ec(new Uint32Array(o),i,this.languageIdCodec)}getTokenText(e){const t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}forEach(e){const t=this.getCount();for(let n=0;n<t;n++)e(n)}};Ec.defaultTokenMetadata=(32768|2<<24)>>>0;let _i=Ec;class R9{constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let o=this._firstTokenIndex,r=e.getCount();o<r&&!(e.getStartOffset(o)>=n);o++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof R9?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),i=this._source.getEndOffset(t);let o=this._source.getTokenText(t);return n<this._startOffset&&(o=o.substring(this._startOffset-n)),i>this._endOffset&&(o=o.substring(0,o.length-(i-this._endOffset))),o}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}function Nhe(s,e){const t=e.lineNumber;if(!s.tokenization.isCheapToTokenize(t))return;s.tokenization.forceTokenization(t);const n=s.tokenization.getLineTokens(t),i=n.findTokenIndexAtOffset(e.column-1);return n.getStandardTokenType(i)}const pb=new class{clone(){return this}equals(s){return this===s}};function M9(s,e){return new R3([new Aw(0,"",s)],e)}function YT(s,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(s<<0|0|0|32768|2<<24)>>>0,new fT(t,e===null?pb:e)}const Q6={getInitialState:()=>pb,tokenizeEncoded:(s,e,t)=>YT(0,t)};async function Rhe(s,e,t){if(!t)return J6(e,s.languageIdCodec,Q6);const n=await mn.getOrCreate(t);return J6(e,s.languageIdCodec,n||Q6)}function Mhe(s,e,t,n,i,o,r){let a="<div>",l=n,c=0,d=!0;for(let h=0,u=e.getCount();h<u;h++){const f=e.getEndOffset(h);if(f<=n)continue;let g="";for(;l<f&&l<i;l++){const p=s.charCodeAt(l);switch(p){case 9:{let _=o-(l+c)%o;for(c+=_-1;_>0;)r&&d?(g+="&#160;",d=!1):(g+=" ",d=!0),_--;break}case 60:g+="&lt;",d=!1;break;case 62:g+="&gt;",d=!1;break;case 38:g+="&amp;",d=!1;break;case 0:g+="&#00;",d=!1;break;case 65279:case 8232:case 8233:case 133:g+="�",d=!1;break;case 13:g+="&#8203",d=!1;break;case 32:r&&d?(g+="&#160;",d=!1):(g+=" ",d=!0);break;default:g+=String.fromCharCode(p),d=!1}}if(a+=`<span style="${e.getInlineStyle(h,t)}">${g}</span>`,f>i||l>=i)break}return a+="</div>",a}function J6(s,e,t){let n='<div class="monaco-tokenized-source">';const i=tc(s);let o=t.getInitialState();for(let r=0,a=i.length;r<a;r++){const l=i[r];r>0&&(n+="<br/>");const c=t.tokenizeEncoded(l,!0,o);_i.convertToEndOffset(c.tokens,l.length);const h=new _i(c.tokens,l,e).inflate();let u=0;for(let f=0,g=h.getCount();f<g;f++){const p=h.getClassName(f),_=h.getEndOffset(f);n+=`<span class="${p}">${SC(l.substring(u,_))}</span>`,u=_}o=c.endState}return n+="</div>",n}var Ahe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},eH=function(s,e){return function(t,n){e(t,n,s)}},BA,Xf;let Cd=(Xf=class{constructor(e,t,n){this._options=e,this._languageService=t,this._openerService=n,this._onDidRenderAsync=new O,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const i=new q,o=i.add(ZT(e,{...this._getRenderOptions(e,i),...t},n));return o.element.classList.add("rendered-markdown"),{element:o.element,dispose:()=>i.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(n,i)=>{var l,c;let o;n?o=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(o=(l=this._options.editor.getModel())==null?void 0:l.getLanguageId()),o||(o=xs);const r=await Rhe(this._languageService,i,o),a=document.createElement("span");if(a.innerHTML=((c=BA._ttpTokenizer)==null?void 0:c.createHTML(r))??r,this._options.editor){const d=this._options.editor.getOption(50);Ii(a,d)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>A9(this._openerService,n,e.isTrusted),disposables:t}}}},BA=Xf,Xf._ttpTokenizer=Nd("tokenizeToString",{createHTML(e){return e}}),Xf);Cd=BA=Ahe([eH(1,tn),eH(2,eo)],Cd);async function A9(s,e,t){try{return await s.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:Phe(t)})}catch(n){return Pe(n),!1}}function Phe(s){return s===!0?!0:s&&Array.isArray(s.enabledCommands)?s.enabledCommands:!1}const xo=tt("accessibilityService"),L0=new le("accessibilityModeEnabled",!1),tH=2e4;let ff,zS,HA,$S,VA;function Ohe(s){ff=document.createElement("div"),ff.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),ff.appendChild(n),n};zS=e(),HA=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),ff.appendChild(n),n};$S=t(),VA=t(),s.appendChild(ff)}function Es(s){ff&&(zS.textContent!==s?(xi(HA),cL(zS,s)):(xi(zS),cL(HA,s)))}function Zl(s){ff&&($S.textContent!==s?(xi(VA),cL($S,s)):(xi($S),cL(VA,s)))}function cL(s,e){xi(s),e.length>tH&&(e=e.substr(0,tH)),s.textContent=e,s.style.visibility="hidden",s.style.visibility="visible"}var Fhe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Av=function(s,e){return function(t,n){e(t,n,s)}};const ll=te;let zA=class extends sr{get _targetWindow(){return Le(this._target.targetElements[0])}get _targetDocumentElement(){return Le(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,n,i,o,r){var u,f,g,p,_,b,v;super(),this._keybindingService=t,this._configurationService=n,this._openerService=i,this._instantiationService=o,this._accessibilityService=r,this._messageListeners=new q,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new O),this._onRequestLayout=this._register(new O),this._linkHandler=e.linkHandler||(C=>A9(this._openerService,C,$a(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new Whe(e.target),this._hoverPointer=(u=e.appearance)!=null&&u.showPointer?ll("div.workbench-hover-pointer"):void 0,this._hover=this._register(new y9),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),(f=e.appearance)!=null&&f.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),(g=e.appearance)!=null&&g.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),(p=e.position)!=null&&p.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=((_=e.position)==null?void 0:_.hoverPosition)??3,this.onmousedown(this._hover.containerDomNode,C=>C.stopPropagation()),this.onkeydown(this._hover.containerDomNode,C=>{C.equals(9)&&this.dispose()}),this._register($(this._targetWindow,"blur",()=>this.dispose()));const a=ll("div.hover-row.markdown-hover"),l=ll("div.hover-contents");if(typeof e.content=="string")l.textContent=e.content,l.style.whiteSpace="pre-wrap";else if(oi(e.content))l.appendChild(e.content),l.classList.add("html-hover-contents");else{const C=e.content,w=this._instantiationService.createInstance(Cd,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||Ls.fontFamily}),{element:y}=w.render(C,{actionHandler:{callback:k=>this._linkHandler(k),disposables:this._messageListeners},asyncRenderCallback:()=>{l.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});l.appendChild(y)}if(a.appendChild(l),this._hover.contentsDomNode.appendChild(a),e.actions&&e.actions.length>0){const C=ll("div.hover-row.status-bar"),w=ll("div.actions");e.actions.forEach(y=>{const k=this._keybindingService.lookupKeybinding(y.commandId),x=k?k.getLabel():null;jT.render(w,{label:y.label,commandId:y.commandId,run:D=>{y.run(D),this.dispose()},iconClass:y.iconClass},x)}),C.appendChild(w),this._hover.containerDomNode.appendChild(C)}this._hoverContainer=ll("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let c;if(e.actions&&e.actions.length>0?c=!1:((b=e.persistence)==null?void 0:b.hideOnHover)===void 0?c=typeof e.content=="string"||$a(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):c=e.persistence.hideOnHover,(v=e.appearance)!=null&&v.showHoverHint){const C=ll("div.hover-row.status-bar"),w=ll("div.info");w.textContent=m("hoverhint","Hold {0} key to mouse over",et?"Option":"Alt"),C.appendChild(w),this._hover.containerDomNode.appendChild(C)}const d=[...this._target.targetElements];c||d.push(this._hoverContainer);const h=this._register(new nH(d));if(this._register(h.onMouseOut(()=>{this._isLocked||this.dispose()})),c){const C=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new nH(C)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=h}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const n=K3(this._hoverContainer,ll("div")),i=Y(this._hoverContainer,ll("div"));n.tabIndex=0,i.tabIndex=0,this._register($(i,"focus",o=>{e.focus(),o.preventDefault()})),this._register($(n,"focus",o=>{t.focus(),o.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes.item(e.childNodes.length-t-1);if(n.nodeType===n.ELEMENT_NODE){const o=n;if(typeof o.tabIndex=="number"&&o.tabIndex>=0)return o}const i=this.findLastFocusableChild(n);if(i)return i}}render(e){var i;e.appendChild(this._hoverContainer);const n=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&$K(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),(i=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:i.getAriaLabel());n&&Zl(n),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=d=>{const h=bq(d),u=d.getBoundingClientRect();return{top:u.top*h,bottom:u.bottom*h,right:u.right*h,left:u.left*h}},t=this._target.targetElements.map(d=>e(d)),{top:n,right:i,bottom:o,left:r}=t[0],a=i-r,l=o-n,c={top:n,right:i,bottom:o,left:r,width:a,height:l,center:{x:r+a/2,y:n+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:c.left+=3,c.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:c.left-=3,c.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:c.top+=3,c.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:c.top-=3,c.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=e.right:this._hoverPosition===0?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+2)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=e.top:this._hoverPosition===2?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?3:0;if(this._forcePosition){const n=t+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-n}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${e.left-n}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=1:this._hoverPosition=2),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?3:0;this._hoverPosition===3?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=2):this._hoverPosition===2&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight/2;if(this._forcePosition){const n=(this._hoverPointer?3:0)+2;this._hoverPosition===3?t=Math.min(t,e.top-n):this._hoverPosition===2&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-n))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const n=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==n&&(this._hover.contentsDomNode.style.paddingRight=n)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-3}px`:this._hoverPointer.style.top=`${Math.round(t/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let n=Math.round(t/2)-3;const i=this._x+n;(i<e.left||i>e.right)&&(n=e.center.x-this._x-3),this._hoverPointer.style.left=`${n}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};zA=Fhe([Av(1,wt),Av(2,Ze),Av(3,eo),Av(4,Ce),Av(5,xo)],zA);class nH extends sr{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e){super(),this._elements=e,this._isMouseIn=!0,this._onMouseOut=this._register(new O),this._elements.forEach(t=>this.onmouseover(t,()=>this._onTargetMouseOver(t))),this._elements.forEach(t=>this.onmouseleave(t,()=>this._onTargetMouseLeave(t)))}_onTargetMouseOver(e){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(e)}_onTargetMouseLeave(e){this._isMouseIn=!1,this._evaluateMouseState(e)}_evaluateMouseState(e){this._clearEvaluateMouseStateTimeout(e),this._mouseTimeout=Le(e).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(e){this._mouseTimeout&&(Le(e).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class Whe{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var zi;(function(s){function e(o,r){if(o.start>=r.end||r.start>=o.end)return{start:0,end:0};const a=Math.max(o.start,r.start),l=Math.min(o.end,r.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}s.intersect=e;function t(o){return o.end-o.start<=0}s.isEmpty=t;function n(o,r){return!t(e(o,r))}s.intersects=n;function i(o,r){const a=[],l={start:o.start,end:Math.min(r.start,o.end)},c={start:Math.max(r.end,o.start),end:o.end};return t(l)||a.push(l),t(c)||a.push(c),a}s.relativeComplement=i})(zi||(zi={}));function Bhe(s){const e=s;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var Ch;(function(s){s[s.AVOID=0]="AVOID",s[s.ALIGN=1]="ALIGN"})(Ch||(Ch={}));function Pp(s,e,t){const n=t.mode===Ch.ALIGN?t.offset:t.offset+t.size,i=t.mode===Ch.ALIGN?t.offset+t.size:t.offset;return t.position===0?e<=s-n?n:e<=i?i-e:Math.max(s-e,0):e<=i?i-e:e<=s-n?n:0}const r_=class r_ extends F{constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=F.None,this.toDisposeOnSetContainer=F.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=te(".context-view"),ps(this.view),this.setContainer(e,t),this._register(ve(()=>this.setContainer(null,1)))}setContainer(e,t){var i;this.useFixedPosition=t!==1;const n=this.useShadowDOM;if(this.useShadowDOM=t===3,!(e===this.container&&n===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,(i=this.shadowRootHostElement)==null||i.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=te(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=Hhe,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(te("slot"))}else this.container.appendChild(this.view);const o=new q;r_.BUBBLE_UP_EVENTS.forEach(r=>{o.add(hn(this.container,r,a=>{this.onDOMEvent(a,!1)}))}),r_.BUBBLE_DOWN_EVENTS.forEach(r=>{o.add(hn(this.container,r,a=>{this.onDOMEvent(a,!0)},!0))}),this.toDisposeOnSetContainer=o}}show(e){var t,n;this.isVisible()&&this.hide(),xi(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",uo(this.view),this.toDisposeOnClean=e.render(this.view)||F.None,this.delegate=e,this.doLayout(),(n=(t=this.delegate).focus)==null||n.call(t)}getViewElement(){return this.view}layout(){var e,t;if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(Ua&&H3.pointerEvents)){this.hide();return}(t=(e=this.delegate)==null?void 0:e.layout)==null||t.call(e),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(oi(e)){const u=Sn(e),f=bq(e);t={top:u.top*f,left:u.left*f,width:u.width*f,height:u.height*f}}else Bhe(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const n=ao(this.view),i=Uc(this.view),o=this.delegate.anchorPosition||0,r=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let l,c;const d=Jv();if(a===0){const u={offset:t.top-d.pageYOffset,size:t.height,position:o===0?0:1},f={offset:t.left,size:t.width,position:r===0?0:1,mode:Ch.ALIGN};l=Pp(d.innerHeight,i,u)+d.pageYOffset,zi.intersects({start:l,end:l+i},{start:u.offset,end:u.offset+u.size})&&(f.mode=Ch.AVOID),c=Pp(d.innerWidth,n,f)}else{const u={offset:t.left,size:t.width,position:r===0?0:1},f={offset:t.top,size:t.height,position:o===0?0:1,mode:Ch.ALIGN};c=Pp(d.innerWidth,n,u),zi.intersects({start:c,end:c+n},{start:u.offset,end:u.offset+u.size})&&(f.mode=Ch.AVOID),l=Pp(d.innerHeight,i,f)+d.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(o===0?"bottom":"top"),this.view.classList.add(r===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const h=Sn(this.container);this.view.style.top=`${l-(this.useFixedPosition?Sn(this.view).top:h.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Sn(this.view).left:h.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t!=null&&t.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),ps(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,Le(e).document.activeElement):t&&!ii(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}};r_.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"],r_.BUBBLE_DOWN_EVENTS=["click"];let $A=r_;const Hhe=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`;var Vhe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},zhe=function(s,e){return function(t,n){e(t,n,s)}};let dL=class extends F{constructor(e){super(),this.layoutService=e,this.contextView=this._register(new $A(this.layoutService.mainContainer,1)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,n){let i;t?t===this.layoutService.getContainer(Le(t))?i=1:n?i=3:i=2:i=1,this.contextView.setContainer(t??this.layoutService.activeContainer,i),this.contextView.show(e);const o={close:()=>{this.openContextView===o&&this.hideContextView()}};return this.openContextView=o,o}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};dL=Vhe([zhe(0,Su)],dL);class $he extends dL{getContextViewElement(){return this.contextView.getViewElement()}}class Uhe{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}async update(e,t,n){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let i;if(e===void 0||qs(e)||oi(e))i=e;else if(!Nw(e.markdown))i=e.markdown??e.markdownNotSupportedFallback;else{this._hoverWidget||this.show(m("iconLabel.loading","Loading..."),t,n),this._cancellationTokenSource=new an;const o=this._cancellationTokenSource.token;if(i=await e.markdown(o),i===void 0&&(i=e.markdownNotSupportedFallback),this.isDisposed||o.isCancellationRequested)return}this.show(i,t,n)}show(e,t,n){var o;const i=this._hoverWidget;if(this.hasContent(e)){const r={content:e,target:this.target,actions:n==null?void 0:n.actions,linkHandler:n==null?void 0:n.linkHandler,trapFocus:n==null?void 0:n.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!i,showHoverHint:(o=n==null?void 0:n.appearance)==null?void 0:o.showHoverHint},position:{hoverPosition:2}};this._hoverWidget=this.hoverDelegate.showHover(r,t)}i==null||i.dispose()}hasContent(e){return e?$a(e)?!!e.value:!0:!1}get isDisposed(){var e;return(e=this._hoverWidget)==null?void 0:e.isDisposed}dispose(){var e,t;(e=this._hoverWidget)==null||e.dispose(),(t=this._cancellationTokenSource)==null||t.dispose(!0),this._cancellationTokenSource=void 0}}var jhe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Pv=function(s,e){return function(t,n){e(t,n,s)}};let UA=class extends F{constructor(e,t,n,i,o){super(),this._instantiationService=e,this._keybindingService=n,this._layoutService=i,this._accessibilityService=o,this._managedHovers=new Map,t.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new dL(this._layoutService))}showHover(e,t,n){var l,c,d,h;if(iH(this._currentHoverOptions)===iH(e)||this._currentHover&&((c=(l=this._currentHoverOptions)==null?void 0:l.persistence)!=null&&c.sticky))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const i=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),o=Fi();n||(i&&o?o.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=o):this._lastFocusedElementBeforeOpen=void 0);const r=new q,a=this._instantiationService.createInstance(zA,e);if((d=e.persistence)!=null&&d.sticky&&(a.isLocked=!0),a.onDispose(()=>{var f,g;((f=this._currentHover)==null?void 0:f.domNode)&&Cq(this._currentHover.domNode)&&((g=this._lastFocusedElementBeforeOpen)==null||g.focus()),this._currentHoverOptions===e&&(this._currentHoverOptions=void 0),r.dispose()},void 0,r),!e.container){const u=oi(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(Le(u))}if(this._contextViewHandler.showContextView(new qhe(a,t),e.container),a.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,r),(h=e.persistence)!=null&&h.sticky)r.add($(Le(e.container).document,ee.MOUSE_DOWN,u=>{ii(u.target,a.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const f of e.target.targetElements)r.add($(f,ee.CLICK,()=>this.hideHover()));else r.add($(e.target,ee.CLICK,()=>this.hideHover()));const u=Fi();if(u){const f=Le(u).document;r.add($(u,ee.KEY_DOWN,g=>{var p;return this._keyDown(g,a,!!((p=e.persistence)!=null&&p.hideOnKeyDown))})),r.add($(f,ee.KEY_DOWN,g=>{var p;return this._keyDown(g,a,!!((p=e.persistence)!=null&&p.hideOnKeyDown))})),r.add($(u,ee.KEY_UP,g=>this._keyUp(g,a))),r.add($(f,ee.KEY_UP,g=>this._keyUp(g,a)))}}if("IntersectionObserver"in Et){const u=new IntersectionObserver(g=>this._intersectionChange(g,a),{threshold:0}),f="targetElements"in e.target?e.target.targetElements[0]:e.target;u.observe(f),r.add(ve(()=>u.disconnect()))}return this._currentHover=a,a}hideHover(){var e;(e=this._currentHover)!=null&&e.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(e,t,n){var r,a;if(e.key==="Alt"){t.isLocked=!0;return}const i=new Pt(e);this._keybindingService.resolveKeyboardEvent(i).getSingleModifierDispatchChords().some(l=>!!l)||this._keybindingService.softDispatch(i,i.target).kind!==0||n&&(!((r=this._currentHoverOptions)!=null&&r.trapFocus)||e.key!=="Tab")&&(this.hideHover(),(a=this._lastFocusedElementBeforeOpen)==null||a.focus())}_keyUp(e,t){var n;e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),(n=this._lastFocusedElementBeforeOpen)==null||n.focus()))}setupManagedHover(e,t,n,i){t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let o,r;const a=(C,w)=>{var k;const y=r!==void 0;C&&(r==null||r.dispose(),r=void 0),w&&(o==null||o.dispose(),o=void 0),y&&((k=e.onDidHideHover)==null||k.call(e),r=void 0)},l=(C,w,y,k)=>new la(async()=>{(!r||r.isDisposed)&&(r=new Uhe(e,y||t,C>0),await r.update(typeof n=="function"?n():n,w,{...i,trapFocus:k}))},C);let c=!1;const d=$(t,ee.MOUSE_DOWN,()=>{c=!0,a(!0,!0)},!0),h=$(t,ee.MOUSE_UP,()=>{c=!1},!0),u=$(t,ee.MOUSE_LEAVE,C=>{c=!1,a(!1,C.fromElement===t)},!0),f=C=>{if(o)return;const w=new q,y={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const k=x=>{y.x=x.x+10,oi(x.target)&&sH(x.target,t)!==t&&a(!0,!0)};w.add($(t,ee.MOUSE_MOVE,k,!0))}o=w,!(oi(C.target)&&sH(C.target,t)!==t)&&w.add(l(e.delay,!1,y))},g=$(t,ee.MOUSE_OVER,f,!0),p=()=>{if(c||o)return;const C={targetElements:[t],dispose:()=>{}},w=new q,y=()=>a(!0,!0);w.add($(t,ee.BLUR,y,!0)),w.add(l(e.delay,!1,C)),o=w};let _;const b=t.tagName.toLowerCase();b!=="input"&&b!=="textarea"&&(_=$(t,ee.FOCUS,p,!0));const v={show:C=>{a(!1,!0),l(0,C,void 0,C)},hide:()=>{a(!0,!0)},update:async(C,w)=>{n=C,await(r==null?void 0:r.update(n,void 0,w))},dispose:()=>{this._managedHovers.delete(t),g.dispose(),u.dispose(),d.dispose(),h.dispose(),_==null||_.dispose(),a(!0,!0)}};return this._managedHovers.set(t,v),v}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};UA=jhe([Pv(0,Ce),Pv(1,Lo),Pv(2,wt),Pv(3,Su),Pv(4,xo)],UA);function iH(s){if(s!==void 0)return(s==null?void 0:s.id)??s}class qhe{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function sH(s,e){for(e=e??Le(s).document.body;!s.hasAttribute("custom-hover")&&s!==e;)s=s.parentElement;return s}st(oc,UA,1);Er((s,e)=>{const t=s.getColor(TK);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});const x0=tt("IWorkspaceEditService");class P9{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(Mh.is(t))return Mh.lift(t);if(S_.is(t))return S_.lift(t);throw new Error("Unsupported edit")})}}class Mh extends P9{static is(e){return e instanceof Mh?!0:fi(e)&&Se.isUri(e.resource)&&fi(e.textEdit)}static lift(e){return e instanceof Mh?e:new Mh(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,n=void 0,i){super(i),this.resource=e,this.textEdit=t,this.versionId=n}}class S_ extends P9{static is(e){return e instanceof S_?!0:fi(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof S_?e:new S_(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,n={},i){super(i),this.oldResource=e,this.newResource=t,this.options=n}}const Ei={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},D0=Object.freeze({id:"editor",order:5,type:"object",title:m("editorConfigurationTitle","Editor"),scope:5}),hL={...D0,properties:{"editor.tabSize":{type:"number",default:Ui.tabSize,minimum:1,markdownDescription:m("tabSize","The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:m("indentSize",'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Ui.insertSpaces,markdownDescription:m("insertSpaces","Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Ui.detectIndentation,markdownDescription:m("detectIndentation","Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Ui.trimAutoWhitespace,description:m("trimAutoWhitespace","Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Ui.largeFileOptimizations,description:m("largeFileOptimizations","Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[m("wordBasedSuggestions.off","Turn off Word Based Suggestions."),m("wordBasedSuggestions.currentDocument","Only suggest words from the active document."),m("wordBasedSuggestions.matchingDocuments","Suggest words from all open documents of the same language."),m("wordBasedSuggestions.allDocuments","Suggest words from all open documents.")],description:m("wordBasedSuggestions","Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[m("semanticHighlighting.true","Semantic highlighting enabled for all color themes."),m("semanticHighlighting.false","Semantic highlighting disabled for all color themes."),m("semanticHighlighting.configuredByTheme","Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:m("semanticHighlighting.enabled","Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:m("stablePeek","Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:m("maxTokenizationLineLength","Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:m("editor.experimental.asyncTokenization","Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:m("editor.experimental.asyncTokenizationLogging","Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:m("editor.experimental.asyncTokenizationVerification","Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:m("editor.experimental.treeSitterTelemetry","Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:m("schema.brackets","Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:m("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:m("schema.closeBracket","The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:m("schema.colorizedBracketPairs","Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:m("schema.openBracket","The opening bracket character or string sequence.")},{type:"string",description:m("schema.closeBracket","The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:Ei.maxComputationTime,description:m("maxComputationTime","Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:Ei.maxFileSize,description:m("maxFileSize","Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:Ei.renderSideBySide,description:m("sideBySide","Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:Ei.renderSideBySideInlineBreakpoint,description:m("renderSideBySideInlineBreakpoint","If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:Ei.useInlineViewWhenSpaceIsLimited,description:m("useInlineViewWhenSpaceIsLimited","If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:Ei.renderMarginRevertIcon,description:m("renderMarginRevertIcon","When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:Ei.renderGutterMenu,description:m("renderGutterMenu","When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:Ei.ignoreTrimWhitespace,description:m("ignoreTrimWhitespace","When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:Ei.renderIndicators,description:m("renderIndicators","Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:Ei.diffCodeLens,description:m("codeLens","Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:Ei.diffWordWrap,markdownEnumDescriptions:[m("wordWrap.off","Lines will never wrap."),m("wordWrap.on","Lines will wrap at the viewport width."),m("wordWrap.inherit","Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:Ei.diffAlgorithm,markdownEnumDescriptions:[m("diffAlgorithm.legacy","Uses the legacy diffing algorithm."),m("diffAlgorithm.advanced","Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:Ei.hideUnchangedRegions.enabled,markdownDescription:m("hideUnchangedRegions.enabled","Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:Ei.hideUnchangedRegions.revealLineCount,markdownDescription:m("hideUnchangedRegions.revealLineCount","Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:Ei.hideUnchangedRegions.minimumLineCount,markdownDescription:m("hideUnchangedRegions.minimumLineCount","Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:Ei.hideUnchangedRegions.contextLineCount,markdownDescription:m("hideUnchangedRegions.contextLineCount","Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:Ei.experimental.showMoves,markdownDescription:m("showMoves","Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:Ei.experimental.showEmptyDecorations,description:m("showEmptyDecorations","Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:Ei.experimental.useTrueInlineView,description:m("useTrueInlineView","If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function Khe(s){return typeof s.type<"u"||typeof s.anyOf<"u"}for(const s of Tp){const e=s.schema;if(typeof e<"u")if(Khe(e))hL.properties[`editor.${s.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(hL.properties[t]=e[t])}let Ny=null;function aG(){return Ny===null&&(Ny=Object.create(null),Object.keys(hL.properties).forEach(s=>{Ny[s]=!0})),Ny}function Ghe(s){return aG()[`editor.${s}`]||!1}function Zhe(s){return aG()[`diffEditor.${s}`]||!1}const Yhe=ln.as(ca.Configuration);Yhe.registerConfiguration(hL);class on{static insert(e,t){return{range:new L(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}function Ry(s){return Object.isFrozen(s)?s:ute(s)}class Li{static createEmptyModel(e){return new Li({},[],[],void 0,e)}constructor(e,t,n,i,o){this._contents=e,this._keys=t,this._overrides=n,this.raw=i,this.logService=o,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if((e=this.raw)!=null&&e.length){const t=this.raw.map(n=>{if(n instanceof Li)return n;const i=new Xhe("",this.logService);return i.parseRaw(n),i.configurationModel});this._rawConfiguration=t.reduce((n,i)=>i===n?i:n.merge(i),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?R8(this.contents,e):this.contents}inspect(e,t){const n=this;return{get value(){return Ry(n.rawConfiguration.getValue(e))},get override(){return t?Ry(n.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return Ry(t?n.rawConfiguration.override(t).getValue(e):n.rawConfiguration.getValue(e))},get overrides(){const i=[];for(const{contents:o,identifiers:r,keys:a}of n.rawConfiguration.overrides){const l=new Li(o,a,[],void 0,n.logService).getValue(e);l!==void 0&&i.push({identifiers:r,value:l})}return i.length?Ry(i):void 0}}}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?R8(n,e):n:void 0}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var r,a;const t=Rc(this.contents),n=Rc(this.overrides),i=[...this.keys],o=(r=this.raw)!=null&&r.length?[...this.raw]:[this];for(const l of e)if(o.push(...(a=l.raw)!=null&&a.length?l.raw:[l]),!l.isEmpty()){this.mergeContents(t,l.contents);for(const c of l.overrides){const[d]=n.filter(h=>en(h.identifiers,c.identifiers));d?(this.mergeContents(d.contents,c.contents),d.keys.push(...c.keys),d.keys=fd(d.keys)):n.push(Rc(c))}for(const c of l.keys)i.indexOf(c)===-1&&i.push(c)}return new Li(t,i,n,o.every(l=>l instanceof Li)?void 0:o,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const n={};for(const i of fd([...Object.keys(this.contents),...Object.keys(t)])){let o=this.contents[i];const r=t[i];r&&(typeof o=="object"&&typeof r=="object"?(o=Rc(o),this.mergeContents(o,r)):o=r),n[i]=o}return new Li(n,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&fi(e[n])&&fi(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=Rc(t[n])}}getContentsForOverrideIdentifer(e){let t=null,n=null;const i=o=>{o&&(n?this.mergeContents(n,o):n=Rc(o))};for(const o of this.overrides)o.identifiers.length===1&&o.identifiers[0]===e?t=o.contents:o.identifiers.includes(e)&&i(o.contents);return i(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),nre(this.contents,e),cu.test(e)&&this.overrides.splice(this.overrides.findIndex(n=>en(n.identifiers,jk(e))),1))}updateValue(e,t,n){if($q(this.contents,e,t,i=>this.logService.error(i)),n=n||this.keys.indexOf(e)===-1,n&&this.keys.push(e),cu.test(e)){const i=jk(e),o={identifiers:i,keys:Object.keys(this.contents[e]),contents:eA(this.contents[e],a=>this.logService.error(a))},r=this.overrides.findIndex(a=>en(a.identifiers,i));r!==-1?this.overrides[r]=o:this.overrides.push(o)}}}class Xhe{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||Li.createEmptyModel(this.logService)}parseRaw(e,t){this._raw=e;const{contents:n,keys:i,overrides:o,restricted:r,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new Li(n,i,o,a?[e]:void 0,this.logService),this._restrictedConfigurations=r||[]}doParseRaw(e,t){const n=ln.as(ca.Configuration).getConfigurationProperties(),i=this.filter(e,n,!0,t);e=i.raw;const o=eA(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`)),r=Object.keys(e),a=this.toOverrides(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:o,keys:r,overrides:a,restricted:i.restricted,hasExcludedProperties:i.hasExcludedProperties}}filter(e,t,n,i){var l,c,d;let o=!1;if(!(i!=null&&i.scopes)&&!(i!=null&&i.skipRestricted)&&!((l=i==null?void 0:i.exclude)!=null&&l.length))return{raw:e,restricted:[],hasExcludedProperties:o};const r={},a=[];for(const h in e)if(cu.test(h)&&n){const u=this.filter(e[h],t,!1,i);r[h]=u.raw,o=o||u.hasExcludedProperties,a.push(...u.restricted)}else{const u=t[h],f=u?typeof u.scope<"u"?u.scope:3:void 0;u!=null&&u.restricted&&a.push(h),!((c=i.exclude)!=null&&c.includes(h))&&((d=i.include)!=null&&d.includes(h)||(f===void 0||i.scopes===void 0||i.scopes.includes(f))&&!(i.skipRestricted&&(u!=null&&u.restricted)))?r[h]=e[h]:o=!0}return{raw:r,restricted:a,hasExcludedProperties:o}}toOverrides(e,t){const n=[];for(const i of Object.keys(e))if(cu.test(i)){const o={};for(const r in e[i])o[r]=e[i][r];n.push({identifiers:jk(i),keys:Object.keys(o),contents:eA(o,t)})}return n}}class Qhe{constructor(e,t,n,i,o,r,a,l,c,d,h,u,f){this.key=e,this.overrides=t,this._value=n,this.overrideIdentifiers=i,this.defaultConfiguration=o,this.policyConfiguration=r,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=d,this.workspaceConfiguration=h,this.folderConfigurationModel=u,this.memoryConfigurationModel=f}toInspectValue(e){return(e==null?void 0:e.value)!==void 0||(e==null?void 0:e.override)!==void 0||(e==null?void 0:e.overrides)!==void 0?e:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class XT{constructor(e,t,n,i,o,r,a,l,c,d){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=i,this._remoteUserConfiguration=o,this._workspaceConfiguration=r,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=d,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new mi,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t,n={}){let i;n.resource?(i=this._memoryConfigurationByResource.get(n.resource),i||(i=Li.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(n.resource,i))):i=this._memoryConfiguration,t===void 0?i.removeValue(e):i.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const i=this.getConsolidatedConfigurationModel(e,t,n),o=this.getFolderConfigurationModelForResource(t.resource,n),r=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of i.overrides)for(const c of l.identifiers)i.getOverrideValue(e,c)!==void 0&&a.add(c);return new Qhe(e,t,i.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,n?this._workspaceConfiguration:void 0,o||void 0,r)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(e,t,n){let i=this.getConsolidatedConfigurationModelForResource(t,n);return t.overrideIdentifier&&(i=i.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(i=i.merge(this._policyConfiguration)),i}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const i=t.getFolder(e);i&&(n=this.getFolderConsolidatedConfiguration(i.uri)||n);const o=this._memoryConfigurationByResource.get(e);o&&(n=n.merge(o))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),i=this._folderConfigurations.get(e);i?(t=n.merge(i),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:i,keys:o}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:i,keys:o}]),e},[])}}static parse(e,t){const n=this.parseConfigurationModel(e.defaults,t),i=this.parseConfigurationModel(e.policy,t),o=this.parseConfigurationModel(e.application,t),r=this.parseConfigurationModel(e.user,t),a=this.parseConfigurationModel(e.workspace,t),l=e.folders.reduce((c,d)=>(c.set(Se.revive(d[0]),this.parseConfigurationModel(d[1],t)),c),new mi);return new XT(n,i,o,r,Li.createEmptyModel(t),a,l,Li.createEmptyModel(t),new mi,t)}static parseConfigurationModel(e,t){return new Li(e.contents,e.keys,e.overrides,void 0,t)}}class Jhe{constructor(e,t,n,i,o){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=i,this.logService=o,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const r of e.keys)this.affectedKeys.add(r);for(const[,r]of e.overrides)for(const a of r)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const r of this.affectedKeys)this._affectsConfigStr+=r+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=XT.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){var a;const n=this._marker+e,i=this._affectsConfigStr.indexOf(n);if(i<0)return!1;const o=i+n.length;if(o>=this._affectsConfigStr.length)return!1;const r=this._affectsConfigStr.charCodeAt(o);if(r!==this._markerCode1&&r!==this._markerCode2)return!1;if(t){const l=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(a=this.previous)==null?void 0:a.workspace):void 0,c=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!po(l,c)}return!0}}class eue{constructor(){this._onDidChange=new O,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const IC=new eue,uL={kind:0},tue={kind:1};function nue(s,e,t){return{kind:2,commandId:s,commandArgs:e,isBubble:t}}class TC{constructor(e,t,n){var i;this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const o of e){const r=o.command;r&&r.charAt(0)!=="-"&&this._defaultBoundCommands.set(r,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=TC.handleRemovals([].concat(e).concat(t));for(let o=0,r=this._keybindings.length;o<r;o++){const a=this._keybindings[o];if(a.chords.length===0)continue;const l=(i=a.when)==null?void 0:i.substituteConstants();l&&l.type===0||this._addKeyPress(a.chords[0],a)}}static _isTargetedForRemoval(e,t,n){if(t){for(let i=0;i<t.length;i++)if(t[i]!==e.chords[i])return!1}return!(n&&n.type!==1&&(!e.when||!uoe(n,e.when)))}static handleRemovals(e){const t=new Map;for(let i=0,o=e.length;i<o;i++){const r=e[i];if(r.command&&r.command.charAt(0)==="-"){const a=r.command.substring(1);t.has(a)?t.get(a).push(r):t.set(a,[r])}}if(t.size===0)return e;const n=[];for(let i=0,o=e.length;i<o;i++){const r=e[i];if(!r.command||r.command.length===0){n.push(r);continue}if(r.command.charAt(0)==="-")continue;const a=t.get(r.command);if(!a||!r.isDefault){n.push(r);continue}let l=!1;for(const c of a){const d=c.when;if(this._isTargetedForRemoval(r,c.chords,d)){l=!0;break}}if(!l){n.push(r);continue}}return n}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let i=n.length-1;i>=0;i--){const o=n[i];if(o.command===t.command)continue;let r=!0;for(let a=1;a<o.chords.length&&a<t.chords.length;a++)if(o.chords[a]!==t.chords[a]){r=!1;break}r&&TC.whenIsEntirelyIncluded(o.when,t.when)&&this._removeFromLookupMap(o)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,i=t.length;n<i;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===1?!0:!e||e.type===1?!1:YM(e,t)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(e,t){const n=this._lookupMap.get(e);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let i=n.length-1;i>=0;i--){const o=n[i];if(t.contextMatchesRules(o.when))return o}return n[n.length-1]}resolve(e,t,n){const i=[...t,n];this._log(`| Resolving ${i}`);const o=this._map.get(i[0]);if(o===void 0)return this._log("\\ No keybinding entries."),uL;let r=null;if(i.length<2)r=o;else{r=[];for(let l=0,c=o.length;l<c;l++){const d=o[l];if(i.length>d.chords.length)continue;let h=!0;for(let u=1;u<i.length;u++)if(d.chords[u]!==i[u]){h=!1;break}h&&r.push(d)}}const a=this._findCommand(e,r);return a?i.length<a.chords.length?(this._log(`\\ From ${r.length} keybinding entries, awaiting ${a.chords.length-i.length} more chord(s), when: ${oH(a.when)}, source: ${rH(a)}.`),tue):(this._log(`\\ From ${r.length} keybinding entries, matched ${a.command}, when: ${oH(a.when)}, source: ${rH(a)}.`),nue(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${r.length} keybinding entries, no when clauses matched the context.`),uL)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(TC._contextMatchesRules(e,i.when))return i}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function oH(s){return s?`${s.serialize()}`:"no when condition"}function rH(s){return s.extensionId?s.isBuiltinExtension?`built-in extension ${s.extensionId}`:`user extension ${s.extensionId}`:s.isDefault?"built-in":"user"}const iue=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class sue extends F{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:se.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,n,i,o){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=i,this._logService=o,this._onDidUpdateKeybindings=this._register(new O),this._currentChords=[],this._currentChordChecker=new z3,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=Op.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new la,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(e,t){const n=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService);if(n)return n.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const n=this.resolveKeyboardEvent(e);if(n.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),uL;const[i]=n.getDispatchChords();if(i===null)return this._log("\\ Keyboard event cannot be dispatched"),uL;const o=this._contextKeyService.getContext(t),r=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(o,r,i)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw D3("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(m("first.chord","({0}) was pressed. Waiting for second key of chord...",t));break;default:{const n=this._currentChords.map(({label:i})=>i).join(", ");this._currentChordStatusMessage=this._notificationService.status(m("next.chord","({0}) was pressed. Waiting for next key of chord...",n))}}this._scheduleLeaveChordMode(),IC.enabled&&IC.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],IC.enable()}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[i]=n.getSingleModifierDispatchChords();if(i)return this._ignoreSingleModifiers.has(i)?(this._log(`+ Ignoring single modifier ${i} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=Op.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=Op.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${i}.`),this._currentSingleModifier=i,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):i===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${i} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${i}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[o]=n.getChords();return this._ignoreSingleModifiers=new Op(o),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let i=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let o=null,r=null;if(n){const[d]=e.getSingleModifierDispatchChords();o=d,r=d?[d]:[]}else[o]=e.getDispatchChords(),r=this._currentChords.map(({keypress:d})=>d);if(o===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),i;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,r,o);switch(c.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const d=this._currentChords.map(({label:h})=>h).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${d}, ${l}".`),this._notificationService.status(m("missing.chord","The key combination ({0}, {1}) is not a command.",d,l),{hideAfter:10*1e3}),this._leaveChordMode(),i=!0}return i}case 1:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),i=!0,this._expectAnotherChord(o,l),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),i;case 2:{if(this._logService.trace("KeybindingService#dispatch",l,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const d=this._currentChords.map(({label:h})=>h).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${d}, ${l}".`),this._notificationService.status(m("missing.chord","The key combination ({0}, {1}) is not a command.",d,l),{hideAfter:10*1e3}),this._leaveChordMode(),i=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(i=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,d=>this._notificationService.warn(d)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,d=>this._notificationService.warn(d))}finally{this._currentlyDispatchingCommandId=null}iue.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return i}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30}}const BD=class BD{constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}};BD.EMPTY=new BD(null);let Op=BD;class aH{constructor(e,t,n,i,o,r,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?jA(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=jA(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=o,this.extensionId=r,this.isBuiltinExtension=a}}function jA(s){const e=[];for(let t=0,n=s.length;t<n;t++){const i=s[t];if(!i)return[];e.push(i)}return e}class QT{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=n(a);if(l===null)return null;i[o]=lue(a,l,this.modifierLabels[e])}return i.join(" ")}}const O9=new QT({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:m({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:m({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),oue=new QT({ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:m({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:m({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:m({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:m({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:m({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),rue=new QT({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),aue=new QT({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function lue(s,e,t){if(e===null)return"";const n=[];return s.ctrlKey&&n.push(t.ctrlKey),s.shiftKey&&n.push(t.shiftKey),s.altKey&&n.push(t.altKey),s.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class cue extends Rie{constructor(e,t){if(super(),t.length===0)throw Cr("chords");this._os=e,this._chords=t}getLabel(){return O9.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return oue.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:rue.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return aue.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new Nie(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class o1 extends cue{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===2)switch(e){case 15:return"←";case 16:return"↑";case 17:return"→";case 18:return"↓"}return Fc.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Fc.toString(e.keyCode)}_getElectronAccelerator(e){return Fc.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=Fc.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_getChordDispatch(e){return o1.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Fc.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===5&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===4&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===6&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===57&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=N3[e];if(t!==-1)return t;switch(e){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof pd)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===0?null:new pd(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const n=jA(e.chords.map(i=>this._toKeyCodeChord(i)));return n.length>0?[new o1(n,t)]:[]}}const _b=tt("labelService"),lG=tt("progressService"),c7=class c7{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};c7.None=Object.freeze({report(){}});let Aa=c7;const Lu=tt("editorProgressService");class due{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class hue{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?M3(e,this._value,0,e.length,this._from,this._to):m0(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class uue{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?M3(e,this._value,0,e.length,this._from,this._to):m0(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class fue{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new uue(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return AM(e,this._value.scheme);if(this._states[this._stateIdx]===2)return AM(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Ww(e,this._value.query);if(this._states[this._stateIdx]===5)return Ww(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class My{constructor(){this.height=1}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e;return((e=this.left)==null?void 0:e.height)??0}get heightRight(){var e;return((e=this.right)==null?void 0:e.height)??0}}class k_{static forUris(e=()=>!1,t=()=>!1){return new k_(new fue(e,t))}static forStrings(){return new k_(new due)}static forConfigKeys(){return new k_(new hue)}constructor(e){this._iter=e}clear(){this._root=void 0}set(e,t){const n=this._iter.reset(e);let i;this._root||(this._root=new My,this._root.segment=n.value());const o=[];for(i=this._root;;){const a=n.cmp(i.segment);if(a>0)i.left||(i.left=new My,i.left.segment=n.value()),o.push([-1,i]),i=i.left;else if(a<0)i.right||(i.right=new My,i.right.segment=n.value()),o.push([1,i]),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new My,i.mid.segment=n.value()),o.push([0,i]),i=i.mid;else break}const r=i.value;i.value=t,i.key=e;for(let a=o.length-1;a>=0;a--){const l=o[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const d=o[a][0],h=o[a+1][0];if(d===1&&h===1)o[a][1]=l.rotateLeft();else if(d===-1&&h===-1)o[a][1]=l.rotateRight();else if(d===1&&h===-1)l.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=l.rotateLeft();else if(d===-1&&h===1)l.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return r}get(e){var t;return(t=this._getNode(e))==null?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const n=this._iter.reset(e),i=[];let o=this._root;for(;o;){const r=n.cmp(o.segment);if(r>0)i.push([-1,o]),o=o.left;else if(r<0)i.push([1,o]),o=o.right;else if(n.hasNext())n.next(),i.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){const r=this._min(o.right);if(r.key){const{key:a,value:l,segment:c}=r;this._delete(r.key,!1),o.key=a,o.value=l,o.segment=c}}else{const r=o.left??o.right;if(i.length>0){const[a,l]=i[i.length-1];switch(a){case-1:l.left=r;break;case 0:l.mid=r;break;case 1:l.right=r;break}}else this._root=r}for(let r=i.length-1;r>=0;r--){const a=i[r][1];a.updateHeight();const l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),i[r][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),i[r][1]=a.rotateRight()),r>0)switch(i[r-1][0]){case-1:i[r-1][1].left=i[r][1];break;case 1:i[r-1][1].right=i[r][1];break;case 0:i[r-1][1].mid=i[r][1];break}else this._root=i[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let n=this._root,i;for(;n;){const o=t.cmp(n.segment);if(o>0)n=n.left;else if(o<0)n=n.right;else if(t.hasNext())t.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const n=this._iter.reset(e);let i=this._root;for(;i;){const o=n.cmp(i.segment);if(o>0)i=i.left;else if(o<0)i=i.right;else if(n.hasNext())n.next(),i=i.mid;else return i.mid?this._entries(i.mid):t?i.value:void 0}}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}}const im=tt("contextService");function qA(s){const e=s;return typeof(e==null?void 0:e.id)=="string"&&Se.isUri(e.uri)}function gue(s){const e=s;return typeof(e==null?void 0:e.id)=="string"&&!qA(s)&&!_ue(s)}const mue={id:"empty-window"};function pue(s,e){if(typeof s=="string"||typeof s>"u")return typeof s=="string"?{id:Eh(s)}:mue;const t=s;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}function _ue(s){const e=s;return typeof(e==null?void 0:e.id)=="string"&&Se.isUri(e.configPath)}class bue{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}const KA="code-workspace";m("codeWorkspace","Code Workspace");const cG="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function vue(s){return s.id===cG}var GA;(function(s){s.inspectTokensAction=m("inspectTokens","Developer: Inspect Tokens")})(GA||(GA={}));var fL;(function(s){s.gotoLineActionLabel=m("gotoLineActionLabel","Go to Line/Column...")})(fL||(fL={}));var ZA;(function(s){s.helpQuickAccessActionLabel=m("helpQuickAccess","Show all Quick Access Providers")})(ZA||(ZA={}));var gL;(function(s){s.quickCommandActionLabel=m("quickCommandActionLabel","Command Palette"),s.quickCommandHelp=m("quickCommandActionHelp","Show And Run Commands")})(gL||(gL={}));var r1;(function(s){s.quickOutlineActionLabel=m("quickOutlineActionLabel","Go to Symbol..."),s.quickOutlineByCategoryActionLabel=m("quickOutlineByCategoryActionLabel","Go to Symbol by Category...")})(r1||(r1={}));var YA;(function(s){s.editorViewAccessibleLabel=m("editorViewAccessibleLabel","Editor content")})(YA||(YA={}));var XA;(function(s){s.toggleHighContrast=m("toggleHighContrast","Toggle High Contrast Theme")})(XA||(XA={}));var QA;(function(s){s.bulkEditServiceSummary=m("bulkEditServiceSummary","Made {0} edits in {1} files")})(QA||(QA={}));const dG=tt("workspaceTrustManagementService");let bb=[],F9=[],hG=[];function Ay(s,e=!1){Cue(s,!1,e)}function Cue(s,e,t){const n=wue(s,e);bb.push(n),n.userConfigured?hG.push(n):F9.push(n),t&&!n.userConfigured&&bb.forEach(i=>{i.mime===n.mime||i.userConfigured||(n.extension&&i.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&i.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&i.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&i.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}function wue(s,e){return{id:s.id,mime:s.mime,filename:s.filename,extension:s.extension,filepattern:s.filepattern,firstline:s.firstline,userConfigured:e,filenameLowercase:s.filename?s.filename.toLowerCase():void 0,extensionLowercase:s.extension?s.extension.toLowerCase():void 0,filepatternLowercase:s.filepattern?vK(s.filepattern.toLowerCase()):void 0,filepatternOnPath:s.filepattern?s.filepattern.indexOf(Fn.sep)>=0:!1}}function yue(){bb=bb.filter(s=>s.userConfigured),F9=[]}function Sue(s,e){return kue(s,e).map(t=>t.id)}function kue(s,e){let t;if(s)switch(s.scheme){case We.file:t=s.fsPath;break;case We.data:{t=hu.parseMetaData(s).get(hu.META_DATA_LABEL);break}case We.vscodeNotebookCell:t=void 0;break;default:t=s.path}if(!t)return[{id:"unknown",mime:yn.unknown}];t=t.toLowerCase();const n=Eh(t),i=lH(t,n,hG);if(i)return[i,{id:xs,mime:yn.text}];const o=lH(t,n,F9);if(o)return[o,{id:xs,mime:yn.text}];if(e){const r=Lue(e);if(r)return[r,{id:xs,mime:yn.text}]}return[{id:"unknown",mime:yn.unknown}]}function lH(s,e,t){var r;let n,i,o;for(let a=t.length-1;a>=0;a--){const l=t[a];if(e===l.filenameLowercase){n=l;break}if(l.filepattern&&(!i||l.filepattern.length>i.filepattern.length)){const c=l.filepatternOnPath?s:e;(r=l.filepatternLowercase)!=null&&r.call(l,c)&&(i=l)}l.extension&&(!o||l.extension.length>o.extension.length)&&e.endsWith(l.extensionLowercase)&&(o=l)}if(n)return n;if(i)return i;if(o)return o}function Lue(s){if(B3(s)&&(s=s.substr(1)),s.length>0)for(let e=bb.length-1;e>=0;e--){const t=bb[e];if(!t.firstline)continue;const n=s.match(t.firstline);if(n&&n.length>0)return t}}const Py=Object.prototype.hasOwnProperty,cH="vs.editor.nullLanguage";class xue{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(cH,0),this._register(xs,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||cH}}const gw=class gw extends F{constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new O),this.onDidChange=this._onDidChange.event,gw.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new xue,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(ab.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){gw.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},yue();const e=[].concat(ab.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(i=>{this._lowercaseNameMap[i.toLowerCase()]=n.identifier}),n.mimetypes.forEach(i=>{this._mimeTypesMap[i]=n.identifier})}),ln.as(ca.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;Py.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let i=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),i=t.mimetypes[0]),i||(i=`text/x-${n}`,e.mimetypes.push(i)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)Ay({id:n,mime:i,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)Ay({id:n,mime:i,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)Ay({id:n,mime:i,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);_ie(l)||Ay({id:n,mime:i,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(n);let o=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?o=[null]:o=t.aliases),o!==null)for(const a of o)!a||a.length===0||e.aliases.push(a);const r=o!==null&&o.length>0;if(!(r&&o[0]===null)){const a=(r?o[0]:null)||n;(r||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?Py.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return Py.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&Py.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:Sue(e,t)}};gw.instanceCount=0;let JA=gw;const Jo=(s,e)=>s===e;function mL(s=Jo){return(e,t)=>en(e,t,s)}function Due(){return(s,e)=>s.equals(e)}function eP(s,e,t){if(t!==void 0){const n=s;return n==null||e===void 0||e===null?e===n:t(n,e)}else{const n=s;return(i,o)=>i==null||o===void 0||o===null?o===i:n(i,o)}}function pL(s,e){if(s===e)return!0;if(Array.isArray(s)&&Array.isArray(e)){if(s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(!pL(s[t],e[t]))return!1;return!0}if(s&&typeof s=="object"&&e&&typeof e=="object"&&Object.getPrototypeOf(s)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const t=s,n=e,i=Object.keys(t),o=Object.keys(n),r=new Set(o);if(i.length!==o.length)return!1;for(const a of i)if(!r.has(a)||!pL(t[a],n[a]))return!1;return!0}return!1}class Gi{constructor(e,t,n){this.owner=e,this.debugNameSource=t,this.referenceFn=n}getDebugName(e){return Iue(e,this)}}const dH=new Map,tP=new WeakMap;function Iue(s,e){const t=tP.get(s);if(t)return t;const n=Tue(s,e);if(n){let i=dH.get(n)??0;i++,dH.set(n,i);const o=i===1?n:`${n}#${i}`;return tP.set(s,o),o}}function Tue(s,e){const t=tP.get(s);if(t)return t;const n=e.owner?Nue(e.owner)+".":"";let i;const o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;const r=e.referenceFn;if(r!==void 0&&(i=W9(r),i!==void 0))return n+i;if(e.owner!==void 0){const a=Eue(e.owner,s);if(a!==void 0)return n+a}}function Eue(s,e){for(const t in s)if(s[t]===e)return t}const hH=new Map,uH=new WeakMap;function Nue(s){const e=uH.get(s);if(e)return e;const t=Rue(s);let n=hH.get(t)??0;n++,hH.set(t,n);const i=n===1?t:`${t}#${n}`;return uH.set(s,i),i}function Rue(s){const e=s.constructor;return e?e.name:"Object"}function W9(s){const e=s.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e),i=n?n[1]:void 0;return i==null?void 0:i.trim()}let Mue;function uG(){return Mue}let fG;function Aue(s){fG=s}let gG;function Pue(s){gG=s}let nP;function Oue(s){nP=s}class mG{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const n=t===void 0?void 0:e,i=t===void 0?e:t;return nP({owner:n,debugName:()=>{const o=W9(i);if(o!==void 0)return o;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`},debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return nP({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(fG(this,t)),this}keepObserved(e){return e.add(gG(this)),this}}class iv extends mG{constructor(){super(...arguments),this.observers=new Set}addObserver(e){const t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}function rn(s,e){const t=new sv(s,e);try{s(t)}finally{t.finish()}}let Oy;function sC(s){if(Oy)s(Oy);else{const e=new sv(s,void 0);Oy=e;try{s(e)}finally{e.finish(),Oy=void 0}}}async function pG(s,e){const t=new sv(s,e);try{await s(t)}finally{t.finish()}}function sm(s,e,t){s?e(s):rn(e,t)}class sv{constructor(e,t){this._fn=e,this._getDebugName=t,this.updatingObservers=[]}getDebugName(){return this._getDebugName?this._getDebugName():W9(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.updatingObservers;for(let t=0;t<e.length;t++){const{observer:n,observable:i}=e[t];n.endUpdate(i)}this.updatingObservers=null}}function Ge(s,e){let t;return typeof s=="string"?t=new Gi(void 0,s,void 0):t=new Gi(s,void 0,void 0),new B9(t,e,Jo)}class B9 extends iv{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,n){super(),this._debugNameData=e,this._equalityComparator=n,this._value=t}get(){return this._value}set(e,t,n){var o;if(n===void 0&&this._equalityComparator(this._value,e))return;let i;t||(t=i=new sv(()=>{},()=>`Setting ${this.debugName}`));try{const r=this._value;this._setValue(e),(o=uG())==null||o.handleObservableChanged(this,{oldValue:r,newValue:e,change:n,didChange:!0,hadValue:!0});for(const a of this.observers)t.updateObserver(a,this),a.handleChange(this,n)}finally{i&&i.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function a1(s,e){let t;return typeof s=="string"?t=new Gi(void 0,s,void 0):t=new Gi(s,void 0,void 0),new Fue(t,e,Jo)}class Fue extends B9{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){var e;(e=this._value)==null||e.dispose()}}function _e(s,e){return e!==void 0?new om(new Gi(s,void 0,e),e,void 0,void 0,void 0,Jo):new om(new Gi(void 0,void 0,s),s,void 0,void 0,void 0,Jo)}function I0(s,e,t){return new Wue(new Gi(s,void 0,e),e,void 0,void 0,void 0,Jo,t)}function Ho(s,e){return new om(new Gi(s.owner,s.debugName,s.debugReferenceFn),e,void 0,void 0,s.onLastObserverRemoved,s.equalsFn??Jo)}Oue(Ho);function _G(s,e){return new om(new Gi(s.owner,s.debugName,void 0),e,s.createEmptyChangeSummary,s.handleChange,void 0,s.equalityComparer??Jo)}function xu(s,e){let t,n;e===void 0?(t=s,n=void 0):(n=s,t=e);const i=new q;return new om(new Gi(n,void 0,t),o=>(i.clear(),t(o,i)),void 0,void 0,()=>i.dispose(),Jo)}function os(s,e){let t,n;e===void 0?(t=s,n=void 0):(n=s,t=e);let i;return new om(new Gi(n,void 0,t),o=>{i?i.clear():i=new q;const r=t(o);return r&&i.add(r),r},void 0,void 0,()=>{i&&(i.dispose(),i=void 0)},Jo)}class om extends iv{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,n,i,o=void 0,r){var a;super(),this._debugNameData=e,this._computeFn=t,this.createChangeSummary=n,this._handleChange=i,this._handleLastObserverRemoved=o,this._equalityComparator=r,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=(a=this.createChangeSummary)==null?void 0:a.call(this)}onLastObserverRemoved(){var e;this.state=0,this.value=void 0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(e=this._handleLastObserverRemoved)==null||e.call(this)}get(){var e;if(this.observers.size===0){const t=this._computeFn(this,(e=this.createChangeSummary)==null?void 0:e.call(this));return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){var r;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e;const t=this.state!==0,n=this.value;this.state=3;const i=this.changeSummary;this.changeSummary=(r=this.createChangeSummary)==null?void 0:r.call(this);try{this.value=this._computeFn(this,i)}finally{for(const a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}if(t&&!this._equalityComparator(n,this.value))for(const a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){this.updateCount++;const t=this.updateCount===1;if(this.state===3&&(this.state=1,!t))for(const n of this.observers)n.handlePossibleChange(this);if(t)for(const n of this.observers)n.beginUpdate(this)}endUpdate(e){if(this.updateCount--,this.updateCount===0){const t=[...this.observers];for(const n of t)n.endUpdate(this)}Jg(()=>this.updateCount>=0)}handlePossibleChange(e){if(this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){this.state=1;for(const t of this.observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)){const n=this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:o=>o===e},this.changeSummary):!0,i=this.state===3;if(n&&(this.state===1||i)&&(this.state=2,i))for(const o of this.observers)o.handlePossibleChange(this)}}readObservable(e){e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}addObserver(e){const t=!this.observers.has(e)&&this.updateCount>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this.updateCount>0;super.removeObserver(e),t&&e.endUpdate(this)}}class Wue extends om{constructor(e,t,n,i,o=void 0,r,a){super(e,t,n,i,o,r),this.set=a}}function Ae(s){return new JT(new Gi(void 0,void 0,s),s,void 0,void 0)}function T0(s,e){return new JT(new Gi(s.owner,s.debugName,s.debugReferenceFn??e),e,void 0,void 0)}function E0(s,e){return new JT(new Gi(s.owner,s.debugName,s.debugReferenceFn??e),e,s.createEmptyChangeSummary,s.handleChange)}function Bue(s,e){const t=new q,n=E0({owner:s.owner,debugName:s.debugName,debugReferenceFn:s.debugReferenceFn??e,createEmptyChangeSummary:s.createEmptyChangeSummary,handleChange:s.handleChange},(i,o)=>{t.clear(),e(i,o,t)});return ve(()=>{n.dispose(),t.dispose()})}function Ks(s){const e=new q,t=T0({owner:void 0,debugName:void 0,debugReferenceFn:s},n=>{e.clear(),s(n,e)});return ve(()=>{t.dispose(),e.dispose()})}class JT{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,n,i){var o;this._debugNameData=e,this._runFn=t,this.createChangeSummary=n,this._handleChange=i,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=(o=this.createChangeSummary)==null?void 0:o.call(this),this._runIfNeeded()}dispose(){this.disposed=!0;for(const e of this.dependencies)e.removeObserver(this);this.dependencies.clear()}_runIfNeeded(){var n,i;if(this.state===3)return;const e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;const t=this.disposed;try{if(!t){(n=uG())==null||n.handleAutorunTriggered(this);const o=this.changeSummary;this.changeSummary=(i=this.createChangeSummary)==null?void 0:i.call(this),this._runFn(this,o)}}finally{for(const o of this.dependenciesToBeRemoved)o.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,Jg(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(!this._handleChange||this._handleChange({changedObservable:e,change:t,didChange:i=>i===e},this.changeSummary))&&(this.state=2)}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);const t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}}(function(s){s.Observer=JT})(Ae||(Ae={}));function br(s){return new Hue(s)}class Hue extends mG{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}toString(){return`Const: ${this.value}`}}function kt(...s){let e,t,n;return s.length===3?[e,t,n]=s:[t,n]=s,new wh(new Gi(e,void 0,n),t,n,()=>wh.globalTransaction,Jo)}function Vue(s,e,t){return new wh(new Gi(s.owner,s.debugName,s.debugReferenceFn??t),e,t,()=>wh.globalTransaction,s.equalsFn??Jo)}class wh extends iv{constructor(e,t,n,i,o){super(),this._debugNameData=e,this.event=t,this._getValue=n,this._getTransaction=i,this._equalityComparator=o,this.hasValue=!1,this.handleEvent=r=>{const a=this._getValue(r),l=this.value;(!this.hasValue||!this._equalityComparator(l,a))&&(this.value=a,this.hasValue&&sm(this._getTransaction(),d=>{for(const h of this.observers)d.updateObserver(h,this),h.handleChange(this,void 0)},()=>{const d=this.getDebugName();return"Event fired"+(d?`: ${d}`:"")}),this.hasValue=!0)}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}(function(s){s.Observer=wh;function e(t,n){let i=!1;wh.globalTransaction===void 0&&(wh.globalTransaction=t,i=!0);try{n()}finally{i&&(wh.globalTransaction=void 0)}}s.batchEventsGlobally=e})(kt||(kt={}));function Pi(s,e){return new zue(s,e)}class zue extends iv{constructor(e,t){super(),this.debugName=e,this.event=t,this.handleEvent=()=>{rn(n=>{for(const i of this.observers)n.updateObserver(i,this),i.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function ov(s){return typeof s=="string"?new fH(s):new fH(void 0,s)}class fH extends iv{get debugName(){return new Gi(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){rn(n=>{this.trigger(n,t)},()=>`Trigger signal ${this.debugName}`);return}for(const n of this.observers)e.updateObserver(n,this),n.handleChange(this,t)}get(){}}function $ue(s){const e=new bG(!1,void 0);return s.addObserver(e),ve(()=>{s.removeObserver(e)})}Pue($ue);function rv(s,e){const t=new bG(!0,e);return s.addObserver(t),e?e(s.get()):s.reportChanges(),ve(()=>{s.removeObserver(t)})}Aue(rv);class bG{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}}function N0(s,e){let t;return Ho({owner:s,debugReferenceFn:e},i=>(t=e(i,t),t))}function Uue(s,e,t,n){let i=new gH(t,n);return Ho({debugReferenceFn:t,owner:s,onLastObserverRemoved:()=>{i.dispose(),i=new gH(t)}},r=>(i.setItems(e.read(r)),i.getItems()))}class gH{constructor(e,t){this._map=e,this._keySelector=t,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){const t=[],n=new Set(this._cache.keys());for(const i of e){const o=this._keySelector?this._keySelector(i):i;let r=this._cache.get(o);if(r)n.delete(o);else{const a=new q;r={out:this._map(i,a),store:a},this._cache.set(o,r)}t.push(r.out)}for(const i of n)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=t}getItems(){return this._items}}function jue(s,e){return N0(s,(t,n)=>n??e(t))}class eE{static fromFn(e){return new eE(e())}constructor(e){this._value=Ge(this,void 0),this.promiseResult=this._value,this.promise=e.then(t=>(rn(n=>{this._value.set(new mH(t,void 0),n)}),t),t=>{throw rn(n=>{this._value.set(new mH(void 0,t),n)}),t})}}class mH{constructor(e,t){this.data=e,this.error=t}}function vG(s,e,t,n){return e||(e=i=>i!=null),new Promise((i,o)=>{let r=!0,a=!1;const l=s.map(d=>({isFinished:e(d),error:t?t(d):!1,state:d})),c=Ae(d=>{const{isFinished:h,error:u,state:f}=l.read(d);(h||u)&&(r?a=!0:c.dispose(),u?o(u===!0?f:u):i(f))});if(n){const d=n.onCancellationRequested(()=>{c.dispose(),d.dispose(),o(new ta)});if(n.isCancellationRequested){c.dispose(),d.dispose(),o(new ta);return}}r=!1,a&&c.dispose()})}class que extends iv{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,n){super(),this._debugNameData=e,this._equalityComparator=n,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this.observers)for(const t of this._deltas)e.handleChange(this,t);this._deltas.length=0}else for(const e of this.observers)e.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this.observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this.observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this.observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this.observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,n){if(n===void 0&&this._equalityComparator(this._value,e))return;let i;t||(t=i=new sv(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),n!==void 0&&this._deltas.push(n),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(o,r)=>{},handlePossibleChange:o=>{}},this),this._updateCounter>1)for(const o of this.observers)o.handlePossibleChange(this)}finally{i&&i.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function iP(s,e){return s.lazy?new que(new Gi(s.owner,s.debugName,void 0),e,s.equalsFn??Jo):new B9(new Gi(s.owner,s.debugName,void 0),e,s.equalsFn??Jo)}const mw=class mw extends F{constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new O),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new O),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new O({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,mw.instanceCount++,this._registry=this._register(new JA(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){mw.instanceCount--,super.dispose()}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){const n=this._registry.guessLanguageIdByFilepathOrFirstLine(e,t);return C3(n,null)}createById(e){return new pH(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByFilepathOrFirstLine(e,t){return new pH(this.onDidChange,()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=xs),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),mn.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}};mw.instanceCount=0;let sP=mw;class pH{constructor(e,t){this._value=kt(this,e,()=>t()),this.onDidChange=se.fromObservable(this._value)}get languageId(){return this._value.get()}}const l1={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:yn.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"},Kue=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let tE=Kue;const Gue=new ja(()=>tE("mouse",!1)),Zue=new ja(()=>tE("element",!1));function Yue(s){tE=s}function Ms(s){return s==="element"?Zue.value:Gue.value}function vb(){return tE("element",!0)}let CG={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function Xue(s){CG=s}function tl(){return CG}class Que{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}}class Bu extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function _H(s,e){const t=[];for(const n of e){if(s.start>=n.range.end)continue;if(s.end<n.range.start)break;const i=zi.intersect(s,n.range);zi.isEmpty(i)||t.push({range:i,size:n.size})}return t}function oP({start:s,end:e},t){return{start:s+t,end:e+t}}function Jue(s){const e=[];let t=null;for(const n of s){const i=n.range.start,o=n.range.end,r=n.size;if(t&&r===t.size){t.range.end=o;continue}t={range:{start:i,end:o},size:r},e.push(t)}return e}function efe(...s){return Jue(s.reduce((e,t)=>e.concat(t),[]))}class tfe{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){const i=n.length-t,o=_H({start:0,end:e},this.groups),r=_H({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:oP(l.range,i),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=efe(o,a,r),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(const i of this.groups){const o=i.range.end-i.range.start,r=n+o*i.size;if(e<r)return t+Math.floor((e-n)/i.size);t+=o,n=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(const i of this.groups){const o=i.range.end-i.range.start,r=n+o;if(e<r)return this._paddingTop+t+(e-n)*i.size;t+=o*i.size,n=r}return-1}}class nfe{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const i=te(".monaco-list-row"),r=this.getRenderer(e).renderTemplate(i);t={domNode:i,templateId:e,templateData:r}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var Md=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};const Hu={CurrentDragAndDropData:void 0},cl={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(s){return[s]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class R0{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class ife{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class sfe{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function ofe(s,e){return Array.isArray(s)&&Array.isArray(e)?en(s,e):s===e}class rfe{constructor(e){e!=null&&e.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,e!=null&&e.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e!=null&&e.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e!=null&&e.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}const HD=class HD{get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:SN(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,n,i=cl){var r,a;if(this.virtualDelegate=t,this.domId=`list_id_${++HD.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new kr(50),this.splicing=!1,this.dragOverAnimationStopDisposable=F.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=F.None,this.onDragLeaveTimeout=F.None,this.disposables=new q,this._onDidChangeContentHeight=new O,this._onDidChangeContentWidth=new O,this.onDidChangeContentHeight=se.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(i.paddingTop??0);for(const l of n)this.renderers.set(l.templateId,l);this.cache=this.disposables.add(new nfe(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=i.horizontalScrolling??cl.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof i.paddingBottom>"u"?0:i.paddingBottom,this.accessibilityProvider=new rfe(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(i.transformOptimization??cl.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Ki.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new nv({forceIntegerValues:!0,smoothScrollDuration:i.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:l=>So(Le(this.domNode),l)})),this.scrollableElement=this.disposables.add(new UT(this.rowsContainer,{alwaysConsumeMouseWheel:i.alwaysConsumeMouseWheel??cl.alwaysConsumeMouseWheel,horizontal:1,vertical:i.verticalScrollMode??cl.verticalScrollMode,useShadows:i.useShadows??cl.useShadows,mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity,scrollByPage:i.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add($(this.rowsContainer,Ft.Change,l=>this.onTouchChange(l))),this.disposables.add($(this.scrollableElement.getDomNode(),"scroll",l=>l.target.scrollTop=0)),this.disposables.add($(this.domNode,"dragover",l=>this.onDragOver(this.toDragEvent(l)))),this.disposables.add($(this.domNode,"drop",l=>this.onDrop(this.toDragEvent(l)))),this.disposables.add($(this.domNode,"dragleave",l=>this.onDragLeave(this.toDragEvent(l)))),this.disposables.add($(this.domNode,"dragend",l=>this.onDragEnd(l))),this.setRowLineHeight=i.setRowLineHeight??cl.setRowLineHeight,this.setRowHeight=i.setRowHeight??cl.setRowHeight,this.supportDynamicHeights=i.supportDynamicHeights??cl.supportDynamicHeights,this.dnd=i.dnd??this.disposables.add(cl.dnd),this.layout((r=i.initialSize)==null?void 0:r.height,(a=i.initialSize)==null?void 0:a.width)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+i),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(e){return new tfe(e)}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},r=zi.intersect(i,o),a=new Map;for(let y=r.end-1;y>=r.start;y--){const k=this.items[y];if(k.dragStartDisposable.dispose(),k.checkedDisposable.dispose(),k.row){let x=a.get(k.templateId);x||(x=[],a.set(k.templateId,x));const D=this.renderers.get(k.templateId);D&&D.disposeElement&&D.disposeElement(k.element,y,k.row.templateData,k.size),x.unshift(k.row)}k.row=null,k.stale=!0}const l={start:e+t,end:this.items.length},c=zi.intersect(l,i),d=zi.relativeComplement(l,i),h=n.map(y=>({id:String(this.itemId++),element:y,templateId:this.virtualDelegate.getTemplateId(y),size:this.virtualDelegate.getHeight(y),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(y),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:F.None,checkedDisposable:F.None,stale:!1}));let u;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,h),u=this.items,this.items=h):(this.rangeMap.splice(e,t,h),u=this.items.splice(e,t,...h));const f=n.length-t,g=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),p=oP(c,f),_=zi.intersect(g,p);for(let y=_.start;y<_.end;y++)this.updateItemInDOM(this.items[y],y);const b=zi.relativeComplement(p,g);for(const y of b)for(let k=y.start;k<y.end;k++)this.removeItemFromDOM(k);const v=d.map(y=>oP(y,f)),w=[{start:e,end:e+n.length},...v].map(y=>zi.intersect(g,y)).reverse();for(const y of w)for(let k=y.end-1;k>=y.start;k--){const x=this.items[k],D=a.get(x.templateId),N=D==null?void 0:D.pop();this.insertItemInDOM(k,N)}for(const y of a.values())for(const k of y)this.cache.release(k);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),u.map(y=>y.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=So(Le(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const n={height:typeof e=="number"?e:Dse(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:SN(this.domNode)})}render(e,t,n,i,o,r=!1){const a=this.getRenderRange(t,n),l=zi.relativeComplement(a,e).reverse(),c=zi.relativeComplement(e,a);if(r){const d=zi.intersect(e,a);for(let h=d.start;h<d.end;h++)this.updateItemInDOM(this.items[h],h)}this.cache.transact(()=>{for(const d of c)for(let h=d.start;h<d.end;h++)this.removeItemFromDOM(h);for(const d of l)for(let h=d.end-1;h>=d.start;h--)this.insertItemInDOM(h)}),i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t){var l,c;const n=this.items[e];if(!n.row)if(t)n.row=t,n.stale=!0;else{const d=this.cache.alloc(n.templateId);n.row=d.row,n.stale||(n.stale=d.isReusingConnectedDomNode)}const i=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",i);const o=this.accessibilityProvider.isChecked(n.element);if(typeof o=="boolean")n.row.domNode.setAttribute("aria-checked",String(!!o));else if(o){const d=h=>n.row.domNode.setAttribute("aria-checked",String(!!h));d(o.value),n.checkedDisposable=o.onDidChange(()=>d(o.value))}if(n.stale||!n.row.domNode.parentElement){const d=((c=(l=this.items.at(e+1))==null?void 0:l.row)==null?void 0:c.domNode)??null;(n.row.domNode.parentElement!==this.rowsContainer||n.row.domNode.nextElementSibling!==d)&&this.rowsContainer.insertBefore(n.row.domNode,d),n.stale=!1}this.updateItemInDOM(n,e);const r=this.renderers.get(n.templateId);if(!r)throw new Error(`No renderer found for template id ${n.templateId}`);r==null||r.renderElement(n.element,e,n.row.templateData,n.size);const a=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!a,a&&(n.dragStartDisposable=$(n.row.domNode,"dragstart",d=>this.onDragStart(n.element,a,d))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=SN(e.row.domNode);const t=Le(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return se.map(this.disposables.add(new nt(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return se.map(this.disposables.add(new nt(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return se.filter(se.map(this.disposables.add(new nt(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseDown(){return se.map(this.disposables.add(new nt(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return se.map(this.disposables.add(new nt(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return se.map(this.disposables.add(new nt(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return se.any(se.map(this.disposables.add(new nt(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),se.map(this.disposables.add(new nt(this.domNode,Ft.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return se.map(this.disposables.add(new nt(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return se.map(this.disposables.add(new nt(this.rowsContainer,Ft.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element,o=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:i,sector:o}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){var o,r;if(!n.dataTransfer)return;const i=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(l1.TEXT,t),n.dataTransfer.setDragImage){let a;this.dnd.getDragLabel&&(a=this.dnd.getDragLabel(i,n)),typeof a>"u"&&(a=String(i.length));const l=te(".monaco-drag-image");l.textContent=a,(h=>{for(;h&&!h.classList.contains("monaco-workbench");)h=h.parentElement;return h||this.domNode.ownerDocument})(this.domNode).appendChild(l),n.dataTransfer.setDragImage(l,-10,-10),setTimeout(()=>l.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new R0(i),Hu.CurrentDragAndDropData=new ife(i),(r=(o=this.dnd).onDragStart)==null||r.call(o,this.currentDragData,n)}onDragOver(e){var o,r;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Hu.CurrentDragAndDropData&&Hu.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Hu.CurrentDragAndDropData)this.currentDragData=Hu.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new sfe}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&((o=t.effect)==null?void 0:o.type)===0?"copy":"move";let n;typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=fd(n).filter(a=>a>=-1&&a<this.length).sort((a,l)=>a-l),n=n[0]===-1?[-1]:n;let i=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(ofe(this.currentDragFeedback,n)&&this.currentDragFeedbackPosition===i)return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=i,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(i),this.rowsContainer.classList.add(i),this.currentDragFeedbackDisposable=ve(()=>{this.domNode.classList.remove(i),this.rowsContainer.classList.remove(i)});else{if(n.length>1&&i!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");i==="drop-target-after"&&n[0]<this.length-1&&(n[0]+=1,i="drop-target-before");for(const a of n){const l=this.items[a];l.dropTarget=!0,(r=l.row)==null||r.domNode.classList.add(i)}this.currentDragFeedbackDisposable=ve(()=>{var a;for(const l of n){const c=this.items[l];c.dropTarget=!1,(a=c.row)==null||a.domNode.classList.remove(i)}})}return!0}onDragLeave(e){var t,n;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=au(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&((n=(t=this.dnd).onDragLeave)==null||n.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Hu.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){var t,n;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Hu.CurrentDragAndDropData=void 0,(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=F.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=_q(this.domNode).top;this.dragOverAnimationDisposable=Hse(Le(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=au(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const n=e.offsetY/this.items[t].size,i=Math.floor(n/.25);return ms(i,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;(oi(n)||Mse(n))&&n!==this.rowsContainer&&t.contains(n);){const i=n.getAttribute("data-index");if(i){const o=Number(i);if(!isNaN(o))return o}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){const i=this.getRenderRange(e,t);let o,r;e===this.elementTop(i.start)?(o=i.start,r=0):i.end-i.start>1&&(o=i.start+1,r=this.elementTop(o)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let d=l.start;d<l.end;d++){const h=this.probeDynamicHeight(d);h!==0&&this.rangeMap.splice(d,1,[this.items[d]]),a+=h,c=c||h!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const d=zi.relativeComplement(i,l);for(const u of d)for(let f=u.start;f<u.end;f++)this.items[f].row&&this.removeItemFromDOM(f);const h=zi.relativeComplement(l,i).reverse();for(const u of h)for(let f=u.end-1;f>=u.start;f--)this.insertItemInDOM(f);for(let u=l.start;u<l.end;u++)this.items[u].row&&this.updateItemInDOM(this.items[u],u);if(typeof o=="number"){const u=this.scrollable.getFutureScrollPosition().scrollTop-e,f=this.elementTop(o)-r+u;this.setScrollTop(f,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){var r,a,l;const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const c=this.virtualDelegate.getDynamicHeight(t.element);if(c!==null){const d=t.size;return t.size=c,t.lastDynamicHeightWidth=this.renderWidth,c-d}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!ii(t.row.domNode,Le(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-n;const{row:i}=this.cache.alloc(t.templateId);i.domNode.style.height="",this.rowsContainer.appendChild(i.domNode);const o=this.renderers.get(t.templateId);if(!o)throw new _t("Missing renderer for templateId: "+t.templateId);return o.renderElement(t.element,e,i.templateData,void 0),t.size=i.domNode.offsetHeight,(r=o.disposeElement)==null||r.call(o,t.element,e,i.templateData,void 0),(l=(a=this.virtualDelegate).setDynamicHeight)==null||l.call(a,t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,i.domNode.remove(),this.cache.release(i),t.size-n}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e,t,n;for(const i of this.items)if(i.dragStartDisposable.dispose(),i.checkedDisposable.dispose(),i.row){const o=this.renderers.get(i.row.templateId);o&&((e=o.disposeElement)==null||e.call(o,i.element,-1,i.row.templateData,void 0),o.disposeTemplate(i.row.templateData))}this.items=[],(t=this.domNode)==null||t.remove(),(n=this.dragOverAnimationDisposable)==null||n.dispose(),this.disposables.dispose()}};HD.InstanceCount=0;let ra=HD;Md([Nn],ra.prototype,"onMouseClick",null);Md([Nn],ra.prototype,"onMouseDblClick",null);Md([Nn],ra.prototype,"onMouseMiddleClick",null);Md([Nn],ra.prototype,"onMouseDown",null);Md([Nn],ra.prototype,"onMouseOver",null);Md([Nn],ra.prototype,"onMouseOut",null);Md([Nn],ra.prototype,"onContextMenu",null);Md([Nn],ra.prototype,"onTouchStart",null);Md([Nn],ra.prototype,"onTap",null);var Du=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};class afe{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){const i=this.renderedElements.findIndex(o=>o.templateData===n);if(i>=0){const o=this.renderedElements[i];this.trait.unrender(n),o.index=t}else{const o={index:t,templateData:n};this.renderedElements.push(o)}this.trait.renderIndex(t,n)}splice(e,t,n){const i=[];for(const o of this.renderedElements)o.index<e?i.push(o):o.index>=e+t&&i.push({index:o.index+n-t,templateData:o.templateData});this.renderedElements=i}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let _L=class{get name(){return this._trait}get renderer(){return new afe(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new O,this.onChange=this._onChange.event}splice(e,t,n){const i=n.length-t,o=e+t,r=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)r.push(this.sortedIndexes[a++]);for(let l=0;l<n.length;l++)n[l]&&r.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=o;)r.push(this.sortedIndexes[a++]+i);this.renderer.splice(e,t,n.length),this._set(r,r)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(vH),t)}_set(e,t,n){const i=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const r=rP(o,e);return this.renderer.renderIndexes(r),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return Tw(this.sortedIndexes,e,vH)>=0}dispose(){Mt(this._onChange)}};Du([Nn],_L.prototype,"renderer",null);class lfe extends _L{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class tR{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));const i=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(i.length===0)return this.trait.splice(e,t,new Array(n.length).fill(!1));const o=new Set(i),r=n.map(a=>o.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,r)}}function Ah(s){return s.tagName==="INPUT"||s.tagName==="TEXTAREA"}function M0(s,e){return s.classList.contains(e)?!0:s.classList.contains("monaco-list")||!s.parentElement?!1:M0(s.parentElement,e)}function oC(s){return M0(s,"monaco-editor")}function cfe(s){return M0(s,"monaco-custom-toggle")}function dfe(s){return M0(s,"action-item")}function EC(s){return M0(s,"monaco-tree-sticky-row")}function c1(s){return s.classList.contains("monaco-tree-sticky-container")}function wG(s){return s.tagName==="A"&&s.classList.contains("monaco-button")||s.tagName==="DIV"&&s.classList.contains("monaco-button-dropdown")?!0:s.classList.contains("monaco-list")||!s.parentElement?!1:wG(s.parentElement)}class yG{get onKeyDown(){return se.chain(this.disposables.add(new nt(this.view.domNode,"keydown")).event,e=>e.filter(t=>!Ah(t.target)).map(t=>new Pt(t)))}constructor(e,t,n){this.list=e,this.view=t,this.disposables=new q,this.multipleSelectionDisposables=new q,this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown(i=>{switch(i.keyCode){case 3:return this.onEnter(i);case 16:return this.onUpArrow(i);case 18:return this.onDownArrow(i);case 11:return this.onPageUpArrow(i);case 12:return this.onPageDownArrow(i);case 9:return this.onEscape(i);case 31:this.multipleSelectionSupport&&(et?i.metaKey:i.ctrlKey)&&this.onCtrlA(i)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(Hs(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}Du([Nn],yG.prototype,"onKeyDown",null);var Al;(function(s){s[s.Automatic=0]="Automatic",s[s.Trigger=1]="Trigger"})(Al||(Al={}));var Fp;(function(s){s[s.Idle=0]="Idle",s[s.Typing=1]="Typing"})(Fp||(Fp={}));const hfe=new class{mightProducePrintableCharacter(s){return s.ctrlKey||s.metaKey||s.altKey?!1:s.keyCode>=31&&s.keyCode<=56||s.keyCode>=21&&s.keyCode<=30||s.keyCode>=98&&s.keyCode<=107||s.keyCode>=85&&s.keyCode<=95}};class ufe{constructor(e,t,n,i,o){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=i,this.delegate=o,this.enabled=!1,this.state=Fp.Idle,this.mode=Al.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new q,this.disposables=new q,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??Al.Automatic}enable(){if(this.enabled)return;let e=!1;const t=se.chain(this.enabledDisposables.add(new nt(this.view.domNode,"keydown")).event,o=>o.filter(r=>!Ah(r.target)).filter(()=>this.mode===Al.Automatic||this.triggered).map(r=>new Pt(r)).filter(r=>e||this.keyboardNavigationEventFilter(r)).filter(r=>this.delegate.mightProducePrintableCharacter(r)).forEach(r=>it.stop(r,!0)).map(r=>r.browserEvent.key)),n=se.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);se.reduce(se.any(t,n),(o,r)=>r===null?null:(o||"")+r,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var t;const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const n=(t=this.list.options.accessibilityProvider)==null?void 0:t.getAriaLabel(this.list.element(e[0]));typeof n=="string"?Es(n):n&&Es(n.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=Fp.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===Fp.Idle?1:0;this.state=Fp.Typing;for(let o=0;o<this.list.length;o++){const r=(n+o+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(r)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(n1(e,l)){this.previouslyFocused=n,this.list.setFocus([r]),this.list.reveal(r);return}const c=Mde(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=n,this.list.setFocus([r]),this.list.reveal(r);return}}}else if(typeof l>"u"||n1(e,l)){this.previouslyFocused=n,this.list.setFocus([r]),this.list.reveal(r);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class ffe{constructor(e,t){this.list=e,this.view=t,this.disposables=new q;const n=se.chain(this.disposables.add(new nt(t.domNode,"keydown")).event,o=>o.filter(r=>!Ah(r.target)).map(r=>new Pt(r)));se.chain(n,o=>o.filter(r=>r.keyCode===2&&!r.ctrlKey&&!r.metaKey&&!r.shiftKey&&!r.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const i=n.querySelector("[tabIndex]");if(!i||!oi(i)||i.tabIndex===-1)return;const o=Le(i).getComputedStyle(i);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}}function SG(s){return et?s.browserEvent.metaKey:s.browserEvent.ctrlKey}function kG(s){return s.browserEvent.shiftKey}function gfe(s){return q3(s)&&s.button===2}const bH={isSelectionSingleChangeEvent:SG,isSelectionRangeChangeEvent:kG};class LG{constructor(e){this.list=e,this.disposables=new q,this._onPointer=new O,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||bH),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Ki.addTarget(e.getHTMLElement()))),se.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||bH))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){oC(e.browserEvent.target)||Fi()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Ah(e.browserEvent.target)||oC(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Ah(e.browserEvent.target)||oC(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),gfe(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Ah(e.browserEvent.target)||oC(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof n>"u"&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));const i=Math.min(n,t),o=Math.max(n,t),r=Hs(i,o+1),a=this.list.getSelection(),l=_fe(rP(a,[n]),n);if(l.length===0)return;const c=rP(r,bfe(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const i=this.list.getSelection(),o=i.filter(r=>r!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}}class xG{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const i=od(e.listFocusAndSelectionOutline,od(e.listSelectionOutline,e.listFocusOutline??""));i&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${i}; outline-offset: -1px;}`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const o=od(e.listSelectionOutline,e.listInactiveFocusOutline??"");o&&n.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${o}; outline-offset: -1px; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&n.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}const mfe={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:Z.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:Z.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:Z.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},pfe={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function _fe(s,e){const t=s.indexOf(e);if(t===-1)return[];const n=[];let i=t-1;for(;i>=0&&s[i]===e-(t-i);)n.push(s[i--]);for(n.reverse(),i=t;i<s.length&&s[i]===e+(i-t);)n.push(s[i++]);return n}function rP(s,e){const t=[];let n=0,i=0;for(;n<s.length||i<e.length;)if(n>=s.length)t.push(e[i++]);else if(i>=e.length)t.push(s[n++]);else if(s[n]===e[i]){t.push(s[n]),n++,i++;continue}else s[n]<e[i]?t.push(s[n++]):t.push(e[i++]);return t}function bfe(s,e){const t=[];let n=0,i=0;for(;n<s.length||i<e.length;)if(n>=s.length)t.push(e[i++]);else if(i>=e.length)t.push(s[n++]);else if(s[n]===e[i]){n++,i++;continue}else s[n]<e[i]?t.push(s[n++]):i++;return t}const vH=(s,e)=>s-e;class vfe{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let o=0;for(const r of this.renderers)r.renderElement(e,t,n[o++],i)}disposeElement(e,t,n,i){var r;let o=0;for(const a of this.renderers)(r=a.disposeElement)==null||r.call(a,e,t,n[o],i),o+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class Cfe{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new q}}renderElement(e,t,n){const i=this.accessibilityProvider.getAriaLabel(e),o=i&&typeof i!="string"?i:br(i);n.disposables.add(Ae(a=>{this.setAriaLabel(a.readObservable(o),n.container)}));const r=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof r=="number"?n.container.setAttribute("aria-level",`${r}`):n.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,n,i){n.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class wfe{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)==null||i.call(n,e,t)}onDragOver(e,t,n,i,o){return this.dnd.onDragOver(e,t,n,i,o)}onDragLeave(e,t,n,i){var o,r;(r=(o=this.dnd).onDragLeave)==null||r.call(o,e,t,n,i)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}drop(e,t,n,i,o){this.dnd.drop(e,t,n,i,o)}dispose(){this.dnd.dispose()}}class or{get onDidChangeFocus(){return se.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return se.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=se.chain(this.disposables.add(new nt(this.view.domNode,"keydown")).event,o=>o.map(r=>new Pt(r)).filter(r=>e=r.keyCode===58||r.shiftKey&&r.keyCode===68).map(r=>it.stop(r,!0)).filter(()=>!1)),n=se.chain(this.disposables.add(new nt(this.view.domNode,"keyup")).event,o=>o.forEach(()=>e=!1).map(r=>new Pt(r)).filter(r=>r.keyCode===58||r.shiftKey&&r.keyCode===68).map(r=>it.stop(r,!0)).map(({browserEvent:r})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,d=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:d,browserEvent:r}})),i=se.chain(this.view.onContextMenu,o=>o.filter(r=>!e).map(({element:r,index:a,browserEvent:l})=>({element:r,index:a,anchor:new Gr(Le(this.view.domNode),l),browserEvent:l})));return se.any(t,n,i)}get onKeyDown(){return this.disposables.add(new nt(this.view.domNode,"keydown")).event}get onDidFocus(){return se.signal(this.disposables.add(new nt(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return se.signal(this.disposables.add(new nt(this.view.domNode,"blur",!0)).event)}constructor(e,t,n,i,o=pfe){var c,d,h;this.user=e,this._options=o,this.focus=new _L("focused"),this.anchor=new _L("anchor"),this.eventBufferer=new f0,this._ariaLabel="",this.disposables=new q,this._onDidDispose=new O,this.onDidDispose=this._onDidDispose.event;const r=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?(c=this._options.accessibilityProvider)==null?void 0:c.getWidgetRole():"list";this.selection=new lfe(r!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(a.push(new Cfe(this.accessibilityProvider)),(h=(d=this.accessibilityProvider).onDidChangeActiveDescendant)==null||h.call(d,this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(u=>new vfe(u.templateId,[...a,u]));const l={...o,dnd:o.dnd&&new wfe(this,o.dnd)};if(this.view=this.createListView(t,n,i,l),this.view.domNode.setAttribute("role",r),o.styleController)this.styleController=o.styleController(this.view.domId);else{const u=Qo(this.view.domNode);this.styleController=new xG(u,this.view.domId)}if(this.spliceable=new Que([new tR(this.focus,this.view,o.identityProvider),new tR(this.selection,this.view,o.identityProvider),new tR(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new ffe(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new yG(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){const u=o.keyboardNavigationDelegate||hfe;this.typeNavigationController=new ufe(this,this.view,o.keyboardNavigationLabelProvider,o.keyboardNavigationEventFilter??(()=>!0),u),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,n,i){return new ra(e,t,n,i)}createMouseController(e){return new LG(this)}updateOptions(e={}){var t,n;this._options={...this._options,...e},(t=this.typeNavigationController)==null||t.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),(n=this.keyboardController)==null||n.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new Bu(this.user,`Invalid start index: ${e}`);if(t<0)throw new Bu(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new Bu(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new Bu(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return C3(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new Bu(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;const o=this.focus.get(),r=this.findNextIndex(o.length>0?o[0]+e:0,t,i);r>-1&&this.setFocus([r],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;const o=this.focus.get(),r=this.findPreviousIndex(o.length>0?o[0]-e:0,t,i);r>-1&&this.setFocus([r],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const i=this.getFocus()[0];if(i!==n&&(i===void 0||n>i)){const o=this.findPreviousIndex(n,!1,t);o>-1&&i!==o?this.setFocus([o],e):this.setFocus([n],e)}else{const o=this.view.getScrollTop();let r=o+this.view.renderHeight;n>i&&(r-=this.view.elementHeight(n)),this.view.setScrollTop(r),this.view.getScrollTop()!==o&&(this.setFocus([]),await _d(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,n=()=>0){let i;const o=n(),r=this.view.getScrollTop()+o;r===0?i=this.view.indexAt(r):i=this.view.indexAfter(r-1);const a=this.getFocus()[0];if(a!==i&&(a===void 0||a>=i)){const l=this.findNextIndex(i,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([i],e)}else{const l=r;this.view.setScrollTop(r-this.view.renderHeight-o),this.view.getScrollTop()+n()!==l&&(this.setFocus([]),await _d(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,n=0){if(e<0||e>=this.length)throw new Bu(this.user,`Invalid index ${e}`);const i=this.view.getScrollTop(),o=this.view.elementTop(e),r=this.view.elementHeight(e);if(tu(t)){const a=r-this.view.renderHeight+n;this.view.setScrollTop(a*ms(t,0,1)+o-n)}else{const a=o+r,l=i+this.view.renderHeight;o<i+n&&a>=l||(o<i+n||a>=l&&r>=this.view.renderHeight?this.view.setScrollTop(o-n):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new Bu(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),i=this.view.elementTop(e),o=this.view.elementHeight(e);if(i<n+t||i+o>n+this.view.renderHeight)return null;const r=o-this.view.renderHeight+t;return Math.abs((n+t-i)/r)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var t;const e=this.focus.get();if(e.length>0){let n;(t=this.accessibilityProvider)!=null&&t.getActiveDescendantId&&(n=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",n||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}Du([Nn],or.prototype,"onDidChangeFocus",null);Du([Nn],or.prototype,"onDidChangeSelection",null);Du([Nn],or.prototype,"onContextMenu",null);Du([Nn],or.prototype,"onKeyDown",null);Du([Nn],or.prototype,"onDidFocus",null);Du([Nn],or.prototype,"onDidBlur",null);const Ef=te,DG="selectOption.entry.template";class yfe{get templateId(){return DG}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=Y(e,Ef(".option-text")),t.detail=Y(e,Ef(".option-detail")),t.decoratorRight=Y(e,Ef(".option-decorator-right")),t}renderElement(e,t,n){const i=n,o=e.text,r=e.detail,a=e.decoratorRight,l=e.isDisabled;i.text.textContent=o,i.detail.textContent=r||"",i.decoratorRight.innerText=a||"",l?i.root.classList.add("option-disabled"):i.root.classList.remove("option-disabled")}disposeTemplate(e){}}const wl=class wl extends F{constructor(e,t,n,i,o){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=i,this.selectBoxOptions=o||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=wl.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new O,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(tl().setupManagedHover(Ms("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return DG}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=te(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=Y(this.selectDropDownContainer,Ef(".select-box-details-pane"));const t=Y(this.selectDropDownContainer,Ef(".select-box-dropdown-container-width-control")),n=Y(t,Ef(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",Y(n,this.widthControlElement),this._dropDownPosition=0,this.styleElement=Qo(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register($(this.selectDropDownContainer,ee.DRAG_START,i=>{it.stop(i,!0)}))}registerListeners(){this._register(hn(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register($(this.selectElement,ee.CLICK,t=>{it.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register($(this.selectElement,ee.MOUSE_DOWN,t=>{it.stop(t)}));let e;this._register($(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register($(this.selectElement,"touchend",t=>{it.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register($(this.selectElement,ee.KEY_DOWN,t=>{const n=new Pt(t);let i=!1;et?(n.keyCode===18||n.keyCode===16||n.keyCode===10||n.keyCode===3)&&(i=!0):(n.keyCode===18&&n.altKey||n.keyCode===16&&n.altKey||n.keyCode===10||n.keyCode===3)&&(i=!0),i&&(this.showSelectDropDown(),it.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){en(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((n,i)=>{this.selectElement.add(this.createOption(n.text,i,n.isDisabled)),typeof n.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setOptionsList(){var e;(e=this.selectList)==null||e.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",n=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=n}styleList(){const e=this.styles.selectBackground??"",t=od(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const n=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=n,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,n){const i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=Le(this.selectElement),n=Sn(this.selectElement),i=Le(this.selectElement).getComputedStyle(this.selectElement),o=parseFloat(i.getPropertyValue("--dropdown-padding-top"))+parseFloat(i.getPropertyValue("--dropdown-padding-bottom")),r=t.innerHeight-n.top-n.height-(this.selectBoxOptions.minBottomMargin||0),a=n.top-wl.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),d=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=d,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let h=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const u=this._hasDetails?this._cachedMaxDetailsHeight:0,f=h+o+u,g=Math.floor((r-o-u)/this.getHeight()),p=Math.floor((a-o-u)/this.getHeight());if(e)return n.top+n.height>t.innerHeight-22||n.top<wl.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||g<1&&p<1?!1:(g<wl.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&p>g&&this.options.length>g?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(n.top+n.height>t.innerHeight-22||n.top<wl.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&g<1||this._dropDownPosition===1&&p<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&g+p<1)return this.hideSelectDropDown(!0),!1;f>r&&(h=g*this.getHeight())}else f>a&&(h=p*this.getHeight());return this.selectList.layout(h),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=h+o+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=h+o+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=d,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let n=0,i=0;this.options.forEach((o,r)=>{const a=o.detail?o.detail.length:0,l=o.decoratorRight?o.decoratorRight.length:0,c=o.text.length+a+l;c>i&&(n=r,i=c)}),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=ao(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=Y(e,Ef(".select-box-dropdown-list-container")),this.listRenderer=new yfe,this.selectList=this._register(new or("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:i=>{let o=i.text;return i.detail&&(o+=`. ${i.detail}`),i.decoratorRight&&(o+=`. ${i.decoratorRight}`),i.description&&(o+=`. ${i.description}`),o},getWidgetAriaLabel:()=>m({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>et?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new nt(this.selectDropDownListContainer,"keydown")),n=se.chain(t.event,i=>i.filter(()=>this.selectList.length>0).map(o=>new Pt(o)));this._register(se.chain(n,i=>i.filter(o=>o.keyCode===3))(this.onEnter,this)),this._register(se.chain(n,i=>i.filter(o=>o.keyCode===2))(this.onEnter,this)),this._register(se.chain(n,i=>i.filter(o=>o.keyCode===9))(this.onEscape,this)),this._register(se.chain(n,i=>i.filter(o=>o.keyCode===16))(this.onUpArrow,this)),this._register(se.chain(n,i=>i.filter(o=>o.keyCode===18))(this.onDownArrow,this)),this._register(se.chain(n,i=>i.filter(o=>o.keyCode===12))(this.onPageDown,this)),this._register(se.chain(n,i=>i.filter(o=>o.keyCode===11))(this.onPageUp,this)),this._register(se.chain(n,i=>i.filter(o=>o.keyCode===14))(this.onHome,this)),this._register(se.chain(n,i=>i.filter(o=>o.keyCode===13))(this.onEnd,this)),this._register(se.chain(n,i=>i.filter(o=>o.keyCode>=21&&o.keyCode<=56||o.keyCode>=85&&o.keyCode<=113))(this.onCharacter,this)),this._register($(this.selectList.getHTMLElement(),ee.POINTER_UP,i=>this.onPointerUp(i))),this._register(this.selectList.onMouseOver(i=>typeof i.index<"u"&&this.selectList.setFocus([i.index]))),this._register(this.selectList.onDidChangeFocus(i=>this.onListFocus(i))),this._register($(this.selectDropDownContainer,ee.FOCUS_OUT,i=>{!this._isVisible||ii(i.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;it.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const n=t.closest(".monaco-list-row");if(!n)return;const i=Number(n.getAttribute("data-index")),o=n.classList.contains("option-disabled");i>=0&&i<this.options.length&&!o&&(this.selected=i,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const n=o=>{for(let r=0;r<o.childNodes.length;r++){const a=o.childNodes.item(r);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():n(a)}},i=ZT({value:e,supportThemeIcons:!0},{actionHandler:t});return i.element.classList.add("select-box-description-markdown"),n(i.element),i.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],n=(t==null?void 0:t.description)??"",i=(t==null?void 0:t.descriptionIsMarkdown)??!1;if(n){if(i){const o=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(n,o))}else this.selectionDetailsPane.innerText=n;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){it.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){it.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){it.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(it.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){it.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){it.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){it.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){it.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=Fc.toString(e.keyCode);let n=-1;for(let i=0;i<this.options.length-1;i++)if(n=(i+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),it.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};wl.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32,wl.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2,wl.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;let aP=wl;class Sfe extends F{constructor(e,t,n,i){super(),this.selected=0,this.selectBoxOptions=i||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new O),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Ki.addTarget(this.selectElement)),[Ft.Tap].forEach(e=>{this._register($(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(hn(this.selectElement,"click",e=>{it.stop(e,!0)})),this._register(hn(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(hn(this.selectElement,"keydown",e=>{let t=!1;et?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!en(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((n,i)=>{this.selectElement.add(this.createOption(n.text,i,n.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,n){const i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}}class kfe extends sr{constructor(e,t,n,i,o){super(),et&&!(o!=null&&o.useCustomDrawn)?this.selectBoxDelegate=new Sfe(e,t,i,o):this.selectBoxDelegate=new aP(e,t,n,i,o),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}render(e){this.selectBoxDelegate.render(e)}}class Ia extends F{get action(){return this._action}constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof _o&&this._register(t.onDidChange(i=>{this.element&&this.handleActionChangeEvent(i)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Qg)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Ki.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,Sr&&this._register($(e,ee.DRAG_START,i=>{var o;return(o=i.dataTransfer)==null?void 0:o.setData(l1.TEXT,this._action.label)}))),this._register($(t,Ft.Tap,i=>this.onClick(i,!0))),this._register($(t,ee.MOUSE_DOWN,i=>{n||it.stop(i,!0),this._action.enabled&&i.button===0&&t.classList.add("active")})),et&&this._register($(t,ee.CONTEXT_MENU,i=>{i.button===0&&i.ctrlKey===!0&&this.onClick(i)})),this._register($(t,ee.CLICK,i=>{it.stop(i,!0),this.options&&this.options.isMenu||this.onClick(i)})),this._register($(t,ee.DBLCLICK,i=>{it.stop(i,!0)})),[ee.MOUSE_UP,ee.MOUSE_OUT].forEach(i=>{this._register($(t,i,o=>{it.stop(o),t.classList.remove("active")}))})}onClick(e,t=!1){var i;it.stop(e,!0);const n=Bo(this._context)?(i=this.options)!=null&&i.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,n)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){var t;if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),(t=this.options.hoverDelegate)!=null&&t.showNativeHover)this.element.title=e;else if(!this.customHover&&e!==""){const n=this.options.hoverDelegate??Ms("element");this.customHover=this._store.add(tl().setupManagedHover(n,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class Cb extends Ia{constructor(e,t,n){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),gt(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){const n=document.createElement("span");n.classList.add("keybinding"),n.textContent=this.options.keybinding,this.element.appendChild(n)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===ri.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=m({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){var e;this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):(e=this.label)==null||e.classList.remove("codicon")}updateEnabled(){var e,t;this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),(e=this.element)==null||e.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),(t=this.element)==null||t.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class Lfe extends Ia{constructor(e,t,n,i,o,r,a){super(e,t),this.selectBox=new kfe(n,i,o,r,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){var e;(e=this.selectBox)==null||e.focus()}blur(){var e;(e=this.selectBox)==null||e.blur()}render(e){this.selectBox.render(e)}}class xfe extends Qg{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new O),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=Y(e,te(".monaco-dropdown")),this._label=Y(this._element,te(".dropdown-label"));let n=t.labelRenderer;n||(n=o=>(o.textContent=t.label||"",null));for(const o of[ee.CLICK,ee.MOUSE_DOWN,Ft.Tap])this._register($(this.element,o,r=>it.stop(r,!0)));for(const o of[ee.MOUSE_DOWN,Ft.Tap])this._register($(this._label,o,r=>{q3(r)&&(r.detail>1||r.button!==0)||(this.visible?this.hide():this.show())}));this._register($(this._label,ee.KEY_UP,o=>{const r=new Pt(o);(r.equals(3)||r.equals(10))&&(it.stop(o,!0),this.visible?this.hide():this.show())}));const i=n(this._label);i&&this._register(i),this._register(Ki.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class Dfe extends xfe{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}class bL extends Ia{constructor(e,t,n,i=Object.create(null)){super(null,e,i),this.actionItem=null,this._onDidChangeVisibility=this._register(new O),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=o=>{this.element=Y(o,te("a.action-label"));let r=[];return typeof this.options.classNames=="string"?r=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(r=this.options.classNames),r.find(a=>a==="icon")||r.push("codicon"),this.element.classList.add(...r),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(tl().setupManagedHover(this.options.hoverDelegate??Ms("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new Dfe(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{var r;(r=this.element)==null||r.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const o=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return o.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){var e;(e=this.dropdownMenu)==null||e.show()}updateEnabled(){var t,n;const e=!this.action.enabled;(t=this.actionItem)==null||t.classList.toggle("disabled",e),(n=this.element)==null||n.classList.toggle("disabled",e)}}function Ife(s){return s&&typeof s=="object"&&typeof s.original=="string"&&typeof s.value=="string"}function Tfe(s){return s?s.condition!==void 0:!1}var L_;(function(s){s[s.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",s[s.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(L_||(L_={}));var Wp;(function(s){s[s.None=0]="None",s[s.Initialized=1]="Initialized",s[s.Closed=2]="Closed"})(Wp||(Wp={}));const VD=class VD extends F{constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new Kg),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Wp.None,this.cache=new Map,this.flushDelayer=this._register(new sq(VD.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){var t,n;this._onDidChangeStorage.pause();try{(t=e.changed)==null||t.forEach((i,o)=>this.acceptExternal(o,i)),(n=e.deleted)==null||n.forEach(i=>this.acceptExternal(i,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===Wp.Closed)return;let n=!1;Bo(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire({key:e,external:!0})}get(e,t){const n=this.cache.get(e);return Bo(n)?t:n}getBoolean(e,t){const n=this.get(e);return Bo(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return Bo(n)?t:parseInt(n,10)}async set(e,t,n=!1){if(this.state===Wp.Closed)return;if(Bo(t))return this.delete(e,n);const i=fi(t)||Array.isArray(t)?rhe(t):String(t);if(this.cache.get(e)!==i)return this.cache.set(e,i),this.pendingInserts.set(e,i),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:n}),this.doFlush()}async delete(e,t=!1){if(!(this.state===Wp.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{var t;if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)(t=this.whenFlushedCallbacks.pop())==null||t()})}async doFlush(e){return this.options.hint===L_.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}};VD.DEFAULT_FLUSH_DELAY=100;let NC=VD;class nR{constructor(){this.onDidChangeItemsExternal=se.None,this.items=new Map}async updateItems(e){var t,n;(t=e.insert)==null||t.forEach((i,o)=>this.items.set(o,i)),(n=e.delete)==null||n.forEach(i=>this.items.delete(i))}}const US="__$__targetStorageMarker",da=tt("storageService");var d1;(function(s){s[s.NONE=0]="NONE",s[s.SHUTDOWN=1]="SHUTDOWN"})(d1||(d1={}));function Efe(s){const e=s.get(US);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}const zD=class zD extends F{constructor(e={flushInterval:zD.DEFAULT_FLUSH_INTERVAL}){super(),this.options=e,this._onDidChangeValue=this._register(new Kg),this._onDidChangeTarget=this._register(new Kg),this._onWillSaveState=this._register(new O),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(e,t,n){return se.filter(this._onDidChangeValue.event,i=>i.scope===e&&(t===void 0||i.key===t),n)}emitDidChangeValue(e,t){const{key:n,external:i}=t;if(n===US){switch(e){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:n,target:this.getKeyTargets(e)[n],external:i})}get(e,t,n){var i;return(i=this.getStorage(t))==null?void 0:i.get(e,n)}getBoolean(e,t,n){var i;return(i=this.getStorage(t))==null?void 0:i.getBoolean(e,n)}getNumber(e,t,n){var i;return(i=this.getStorage(t))==null?void 0:i.getNumber(e,n)}store(e,t,n,i,o=!1){if(Bo(t)){this.remove(e,n,o);return}this.withPausedEmitters(()=>{var r;this.updateKeyTarget(e,n,i),(r=this.getStorage(n))==null||r.set(e,t,o)})}remove(e,t,n=!1){this.withPausedEmitters(()=>{var i;this.updateKeyTarget(e,t,void 0),(i=this.getStorage(t))==null||i.delete(e,n)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(e,t,n,i=!1){var r,a;const o=this.getKeyTargets(t);typeof n=="number"?o[e]!==n&&(o[e]=n,(r=this.getStorage(t))==null||r.set(US,JSON.stringify(o),i)):typeof o[e]=="number"&&(delete o[e],(a=this.getStorage(t))==null||a.set(US,JSON.stringify(o),i))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?Efe(t):Object.create(null)}};zD.DEFAULT_FLUSH_INTERVAL=60*1e3;let lP=zD;class Nfe extends lP{constructor(){super(),this.applicationStorage=this._register(new NC(new nR,{hint:L_.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new NC(new nR,{hint:L_.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new NC(new nR,{hint:L_.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(1,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(0,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(-1,e)))}getStorage(e){switch(e){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}function Rfe(s,e){const t={...e};for(const n in s){const i=s[n];t[n]=i!==void 0?de(i):void 0}return t}const Mfe={keybindingLabelBackground:de(Sce),keybindingLabelForeground:de(kce),keybindingLabelBorder:de(Lce),keybindingLabelBottomBorder:de(xce),keybindingLabelShadow:de(ev)},Afe={buttonForeground:de(PK),buttonSeparator:de(cce),buttonBackground:de(tC),buttonHoverBackground:de(dce),buttonSecondaryForeground:de(uce),buttonSecondaryBackground:de(TA),buttonSecondaryHoverBackground:de(fce),buttonBorder:de(hce)},Pfe={progressBarBackground:de(Sle)},vL={inputActiveOptionBorder:de(VT),inputActiveOptionForeground:de(zT),inputActiveOptionBackground:de(y0)};de(nC),de(gce),de(mce),de(pce),de(_ce),de(bce),de(vce);de(Cce),de(yce),de(wce);de(jo),de(WT),de(ev),de(ct),de(Ule),de(jle),de(qle),de(wle);const CL={inputBackground:de(IA),inputForeground:de(MK),inputBorder:de(AK),inputValidationInfoBorder:de(tce),inputValidationInfoBackground:de(Jle),inputValidationInfoForeground:de(ece),inputValidationWarningBorder:de(sce),inputValidationWarningBackground:de(nce),inputValidationWarningForeground:de(ice),inputValidationErrorBorder:de(ace),inputValidationErrorBackground:de(oce),inputValidationErrorForeground:de(rce)},Ofe={listFilterWidgetBackground:de(Bce),listFilterWidgetOutline:de(Hce),listFilterWidgetNoMatchesOutline:de(Vce),listFilterWidgetShadow:de(zce),inputBoxStyles:CL,toggleStyles:vL},IG={badgeBackground:de(HS),badgeForeground:de(yle),badgeBorder:de(ct)};de(zle),de(Vle),de(R6),de(R6),de($le);const Em={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:de(Dce),listFocusForeground:de(Ice),listFocusOutline:de(Tce),listActiveSelectionBackground:de(em),listActiveSelectionForeground:de(Qw),listActiveSelectionIconForeground:de(OK),listFocusAndSelectionOutline:de(Ece),listFocusAndSelectionBackground:de(em),listFocusAndSelectionForeground:de(Qw),listInactiveSelectionBackground:de(Nce),listInactiveSelectionIconForeground:de(Mce),listInactiveSelectionForeground:de(Rce),listInactiveFocusBackground:de(Ace),listInactiveFocusOutline:de(Pce),listHoverBackground:de(FK),listHoverForeground:de(WK),listDropOverBackground:de(Oce),listDropBetweenBackground:de(Fce),listSelectionOutline:de(Zt),listHoverOutline:de(Zt),treeIndentGuidesStroke:de(BK),treeInactiveIndentGuidesStroke:de($ce),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:de(u9),tableColumnsBorder:de(Uce),tableOddRowsBackgroundColor:de(jce)};function Nm(s){return Rfe(s,Em)}const Ffe={selectBackground:de($T),selectListBackground:de(lce),selectForeground:de(b9),decoratorRightForeground:de(HK),selectBorder:de(v9),focusBorder:de(Kl),listFocusBackground:de(e1),listInactiveSelectionIconForeground:de(C9),listFocusForeground:de(Jw),listFocusOutline:mle(Zt,Z.transparent.toString()),listHoverBackground:de(FK),listHoverForeground:de(WK),listHoverOutline:de(Zt),selectListBorder:de(f9),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},Wfe={shadowColor:de(ev),borderColor:de(qce),foregroundColor:de(Kce),backgroundColor:de(Gce),selectionForegroundColor:de(Zce),selectionBackgroundColor:de(Yce),selectionBorderColor:de(Xce),separatorColor:de(Qce),scrollbarShadow:de(u9),scrollbarSliderBackground:de(LK),scrollbarSliderHoverBackground:de(xK),scrollbarSliderActiveBackground:de(DK)};var nE=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Us=function(s,e){return function(t,n){e(t,n,s)}};function Bfe(s,e,t,n){let i,o,r;if(Array.isArray(s))r=s,i=e,o=t;else{const c=e;r=s.getActions(c),i=t,o=n}const a=jc.getInstance(),l=a.keyStatus.altKey||(Bi||Ds)&&a.keyStatus.shiftKey;TG(r,i,l,o?c=>c===o:c=>c==="navigation")}function iE(s,e,t,n,i,o){let r,a,l,c,d;if(Array.isArray(s))d=s,r=e,a=t,l=n,c=i;else{const u=e;d=s.getActions(u),r=t,a=n,l=i,c=o}TG(d,r,!1,typeof a=="string"?u=>u===a:a,l,c)}function TG(s,e,t,n=r=>r==="navigation",i=()=>!1,o=!1){let r,a;Array.isArray(e)?(r=e,a=e):(r=e.primary,a=e.secondary);const l=new Set;for(const[c,d]of s){let h;n(c)?(h=r,h.length>0&&o&&h.push(new ri)):(h=a,h.length>0&&h.push(new ri));for(let u of d){t&&(u=u instanceof bo&&u.alt?u.alt:u);const f=h.push(u);u instanceof rb&&l.add({group:c,action:u,index:f-1})}}for(const{group:c,action:d,index:h}of l){const u=n(c)?r:a,f=d.actions;i(d,c,u.length)&&u.splice(h,1,...f)}}let uu=class extends Cb{constructor(e,t,n,i,o,r,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t==null?void 0:t.draggable,keybinding:t==null?void 0:t.keybinding,hoverDelegate:t==null?void 0:t.hoverDelegate}),this._options=t,this._keybindingService=n,this._notificationService=i,this._contextKeyService=o,this._themeService=r,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new ai),this._altKey=jc.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const n=()=>{var o;const i=!!((o=this._menuItemAction.alt)!=null&&o.enabled)&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);i!==this._wantsAltCommand&&(this._wantsAltCommand=i,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(n)),this._register($(e,"mouseleave",i=>{t=!1,n()})),this._register($(e,"mouseenter",i=>{t=!0,n()})),n()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){var o;const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let i=t?m("titleAndKb","{0} ({1})",n,t):n;if(!this._wantsAltCommand&&((o=this._menuItemAction.alt)!=null&&o.enabled)){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),c=l?m("titleAndKb","{0} ({1})",r,l):r;i=m("titleAndKbAndAlt",`{0}
[{1}] {2}`,i,O9.modifierLabels[mo].altKey,c)}return i}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:n}=this;if(!t||!n)return;const i=this._commandAction.checked&&Tfe(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(i)if(De.isThemeIcon(i)){const o=De.asClassNameArray(i);n.classList.add(...o),this._itemClassDispose.value=ve(()=>{n.classList.remove(...o)})}else n.style.backgroundImage=cb(this._themeService.getColorTheme().type)?bd(i.dark):bd(i.light),n.classList.add("icon"),this._itemClassDispose.value=Jr(ve(()=>{n.style.backgroundImage="",n.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};uu=nE([Us(2,wt),Us(3,En),Us(4,Ie),Us(5,Yn),Us(6,Lo),Us(7,xo)],uu);class H9 extends uu{render(e){var t;this.options.label=!0,this.options.icon=!1,super.render(e),e.classList.add("text-only"),e.classList.toggle("use-comma",((t=this._options)==null?void 0:t.useComma)??!1)}updateLabel(){var t;const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const n=H9._symbolPrintEnter(e);(t=this._options)!=null&&t.conversational?this.label.textContent=m({key:"content2",comment:['A label with keybindg like "ESC to dismiss"']},"{1} to {0}",this._action.label,n):this.label.textContent=m({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,n)}}static _symbolPrintEnter(e){var t;return(t=e.getLabel())==null?void 0:t.replace(/\benter\b/gi,"⏎").replace(/\bEscape\b/gi,"Esc")}}let cP=class extends bL{constructor(e,t,n,i,o){const r={...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!1,classNames:(t==null?void 0:t.classNames)??(De.isThemeIcon(e.item.icon)?De.asClassName(e.item.icon):void 0),keybindingProvider:(t==null?void 0:t.keybindingProvider)??(a=>n.lookupKeybinding(a.id))};super(e,{getActions:()=>e.actions},i,r),this._keybindingService=n,this._contextMenuService=i,this._themeService=o}render(e){super.render(e),gt(this.element),e.classList.add("menu-entry");const t=this._action,{icon:n}=t.item;if(n&&!De.isThemeIcon(n)){this.element.classList.add("icon");const i=()=>{this.element&&(this.element.style.backgroundImage=cb(this._themeService.getColorTheme().type)?bd(n.dark):bd(n.light))};i(),this._register(this._themeService.onDidColorThemeChange(()=>{i()}))}}};cP=nE([Us(2,wt),Us(3,Lo),Us(4,Yn)],cP);let dP=class extends Ia{constructor(e,t,n,i,o,r,a,l){super(null,e),this._keybindingService=n,this._notificationService=i,this._contextMenuService=o,this._menuService=r,this._instaService=a,this._storageService=l,this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c;const d=t!=null&&t.persistLastActionId?l.get(this._storageKey,1):void 0;d&&(c=e.actions.find(u=>d===u.id)),c||(c=e.actions[0]),this._defaultAction=this._instaService.createInstance(uu,c,{keybinding:this._getDefaultActionKeybindingLabel(c)});const h={keybindingProvider:u=>this._keybindingService.lookupKeybinding(u.id),...t,menuAsChild:(t==null?void 0:t.menuAsChild)??!0,classNames:(t==null?void 0:t.classNames)??["codicon","codicon-chevron-down"],actionRunner:(t==null?void 0:t.actionRunner)??new Qg};this._dropdown=new bL(e,e.actions,this._contextMenuService,h),this._register(this._dropdown.actionRunner.onDidRun(u=>{u.action instanceof bo&&this.update(u.action)}))}update(e){var t;(t=this._options)!=null&&t.persistLastActionId&&this._storageService.store(this._storageKey,e.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(uu,e,{keybinding:this._getDefaultActionKeybindingLabel(e)}),this._defaultAction.actionRunner=new class extends Qg{async runAction(n,i){await n.run(void 0)}},this._container&&this._defaultAction.render(K3(this._container,te(".action-container")))}_getDefaultActionKeybindingLabel(e){var n;let t;if((n=this._options)!=null&&n.renderKeybindingWithDefaultActionLabel){const i=this._keybindingService.lookupKeybinding(e.id);i&&(t=`(${i.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=te(".action-container");this._defaultAction.render(Y(this._container,t)),this._register($(t,ee.KEY_DOWN,i=>{const o=new Pt(i);o.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),o.stopPropagation())}));const n=te(".dropdown-action-container");this._dropdown.render(Y(this._container,n)),this._register($(n,ee.KEY_DOWN,i=>{var r;const o=new Pt(i);o.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),(r=this._defaultAction.element)==null||r.focus(),o.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};dP=nE([Us(2,wt),Us(3,En),Us(4,Lo),Us(5,nr),Us(6,Ce),Us(7,da)],dP);let hP=class extends Lfe{constructor(e,t){super(null,e,e.actions.map(n=>({text:n.id===ri.ID?"─────────":n.label,isDisabled:!n.enabled})),0,t,Ffe,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(n=>n.checked)))}render(e){super.render(e),e.style.borderColor=de(v9)}runAction(e,t){const n=this.action.actions[t];n&&this.actionRunner.run(n)}};hP=nE([Us(1,Rd)],hP);function EG(s,e,t){return e instanceof bo?s.createInstance(uu,e,t):e instanceof C_?e.item.isSelection?s.createInstance(hP,e):e.item.rememberDefaultAction?s.createInstance(dP,e,{...t,persistLastActionId:!0}):s.createInstance(cP,e,t):void 0}class Zo extends F{constructor(e,t={}){var o,r;super(),this._actionRunnerDisposables=this._register(new q),this.viewItemDisposables=this._register(new I3),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new O),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new O({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new O),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new O),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:((o=this.options.triggerKeys)==null?void 0:o.keyDown)??!1,keys:((r=this.options.triggerKeys)==null?void 0:r.keys)??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(vb()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Qg,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(a=>this._onDidRun.fire(a))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(a=>this._onWillRun.fire(a))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let n,i;switch(this._orientation){case 0:n=[15],i=[17];break;case 1:n=[16],i=[18],this.domNode.className+=" vertical";break}this._register($(this.domNode,ee.KEY_DOWN,a=>{const l=new Pt(a);let c=!0;const d=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;n&&(l.equals(n[0])||l.equals(n[1]))?c=this.focusPrevious():i&&(l.equals(i[0])||l.equals(i[1]))?c=this.focusNext():l.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():l.equals(14)?c=this.focusFirst():l.equals(13)?c=this.focusLast():l.equals(2)&&d instanceof Ia&&d.trapsArrowNavigation?c=this.focusNext(void 0,!0):this.isTriggerKeyEvent(l)?this._triggerKeys.keyDown?this.doTrigger(l):this.triggerKeyDown=!0:c=!1,c&&(l.preventDefault(),l.stopPropagation())})),this._register($(this.domNode,ee.KEY_UP,a=>{const l=new Pt(a);this.isTriggerKeyEvent(l)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(l)),l.preventDefault(),l.stopPropagation()):(l.equals(2)||l.equals(1026)||l.equals(16)||l.equals(18)||l.equals(15)||l.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(Ka(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(Fi()===this.domNode||!ii(Fi(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof Ia&&n.isEnabled());t instanceof Ia&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Ia&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){var e,t;for(let n=0;n<this.actionsList.children.length;n++){const i=this.actionsList.children[n];if(ii(Fi(),i)){this.focusedItem=n,(t=(e=this.viewItems[this.focusedItem])==null?void 0:e.showHover)==null||t.call(e);break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}getAction(e){var t;if(typeof e=="number")return(t=this.viewItems[e])==null?void 0:t.action;if(oi(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let n=0;n<this.actionsList.childNodes.length;n++)if(this.actionsList.childNodes[n]===e)return this.viewItems[n].action}}push(e,t={}){const n=Array.isArray(e)?e:[e];let i=tu(t.index)?t.index:null;n.forEach(o=>{const r=document.createElement("li");r.className="action-item",r.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o,l)),a||(a=new Cb(this.context,o,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,$(r,ee.CONTEXT_MENU,c=>{it.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(r),this.focusable&&a instanceof Ia&&this.viewItems.length===0&&a.setFocusable(!0),i===null||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(r),this.viewItems.push(a)):(this.actionsList.insertBefore(r,this.actionsList.children[i]),this.viewItems.splice(i,0,a),i++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=Mt(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),xi(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const i=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=i===-1?void 0:i,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const n=this.focusedItem;let i;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=n,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,i=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===ri.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===ri.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){var o,r;typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&((o=this.viewItems[this.previouslyFocusedItem])==null||o.blur());const i=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(i){let a=!0;Nw(i.focus)||(a=!1),this.options.focusOnlyEnabledItems&&Nw(i.isEnabled)&&!i.isEnabled()&&(a=!1),i.action.id===ri.ID&&(a=!1),a?(n||this.previouslyFocusedItem!==this.focusedItem)&&(i.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),a&&((r=i.showHover)==null||r.call(i))}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof Ia){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=Mt(this.viewItems),this.getContainer().remove(),super.dispose()}}const uP=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,iR=/(&amp;)?(&amp;)([^\s&])/g;var wL;(function(s){s[s.Right=0]="Right",s[s.Left=1]="Left"})(wL||(wL={}));var fP;(function(s){s[s.Above=0]="Above",s[s.Below=1]="Below"})(fP||(fP={}));class x_ extends Zo{constructor(e,t,n,i){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const o=document.createElement("div");o.classList.add("monaco-menu"),o.setAttribute("role","presentation"),super(o,{orientation:1,actionViewItemProvider:c=>this.doGetActionViewItem(c,n,r),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...et||Ds?[10]:[]],keyDown:!0}}),this.menuStyles=i,this.menuElement=o,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,i),this._register(Ki.addTarget(o)),this._register($(o,ee.KEY_DOWN,c=>{new Pt(c).equals(2)&&c.preventDefault()})),n.enableMnemonics&&this._register($(o,ee.KEY_DOWN,c=>{const d=c.key.toLocaleLowerCase();if(this.mnemonics.has(d)){it.stop(c,!0);const h=this.mnemonics.get(d);if(h.length===1&&(h[0]instanceof CH&&h[0].container&&this.focusItemByElement(h[0].container),h[0].onClick(c)),h.length>1){const u=h.shift();u&&u.container&&(this.focusItemByElement(u.container),h.push(u)),this.mnemonics.set(d,h)}}})),Ds&&this._register($(o,ee.KEY_DOWN,c=>{const d=new Pt(c);d.equals(14)||d.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),it.stop(c,!0)):(d.equals(13)||d.equals(12))&&(this.focusedItem=0,this.focusPrevious(),it.stop(c,!0))})),this._register($(this.domNode,ee.MOUSE_OUT,c=>{const d=c.relatedTarget;ii(d,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register($(this.actionsList,ee.MOUSE_OVER,c=>{let d=c.target;if(!(!d||!ii(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const h=this.focusedItem;this.setFocusedItem(d),h!==this.focusedItem&&this.updateFocus()}}})),this._register(Ki.addTarget(this.actionsList)),this._register($(this.actionsList,Ft.Tap,c=>{let d=c.initialTarget;if(!(!d||!ii(d,this.actionsList)||d===this.actionsList)){for(;d.parentElement!==this.actionsList&&d.parentElement!==null;)d=d.parentElement;if(d.classList.contains("action-item")){const h=this.focusedItem;this.setFocusedItem(d),h!==this.focusedItem&&this.updateFocus()}}}));const r={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new S0(o,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,i),this._register($(o,Ft.Change,c=>{it.stop(c,!0);const d=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:d-c.translationY})})),this._register($(a,ee.MOUSE_UP,c=>{c.preventDefault()}));const l=Le(e);o.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,d)=>{var h;return(h=n.submenuIds)!=null&&h.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof ri&&(d===t.length-1||d===0||t[d-1]instanceof ri))}),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof wH)).forEach((c,d,h)=>{c.updatePositionInSet(d+1,h.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(Hk(e)?this.styleSheet=Qo(e):(x_.globalStyleSheet||(x_.globalStyleSheet=Qo()),this.styleSheet=x_.globalStyleSheet)),this.styleSheet.textContent=Vfe(t,Hk(e))}styleScrollElement(e,t){const n=t.foregroundColor??"",i=t.backgroundColor??"",o=t.borderColor?`1px solid ${t.borderColor}`:"",r="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=o,e.style.borderRadius=r,e.style.color=n,e.style.backgroundColor=i,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof ri)return new wH(t.context,e,{icon:!0},this.menuStyles);if(e instanceof rb){const i=new CH(e,e.actions,n,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const o=i.getMnemonic();if(o&&i.isEnabled()){let r=[];this.mnemonics.has(o)&&(r=this.mnemonics.get(o)),r.push(i),this.mnemonics.set(o,r)}}return i}else{const i={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const r=t.getKeyBinding(e);if(r){const a=r.getLabel();a&&(i.keybinding=a)}}const o=new NG(t.context,e,i,this.menuStyles);if(t.enableMnemonics){const r=o.getMnemonic();if(r&&o.isEnabled()){let a=[];this.mnemonics.has(r)&&(a=this.mnemonics.get(r)),a.push(o),this.mnemonics.set(r,a)}}return o}}}class NG extends Ia{constructor(e,t,n,i){if(n.isMenu=!0,super(t,t,n),this.menuStyle=i,this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){const o=this.action.label;if(o){const r=uP.exec(o);r&&(this.mnemonic=(r[1]?r[1]:r[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new It(()=>{this.element&&(this._register($(this.element,ee.MOUSE_UP,o=>{if(it.stop(o,!0),Sr){if(new Gr(Le(this.element),o).rightButton)return;this.onClick(o)}else setTimeout(()=>{this.onClick(o)},0)})),this._register($(this.element,ee.CONTEXT_MENU,o=>{it.stop(o,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=Y(this.element,te("a.action-menu-item")),this._action.id===ri.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=Y(this.item,te("span.menu-item-check"+De.asCSSSelector(J.menuSelection))),this.check.setAttribute("role","none"),this.label=Y(this.item,te("span.action-label")),this.options.label&&this.options.keybinding&&(Y(this.item,te("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){var e;super.focus(),(e=this.item)==null||e.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){var e;if(this.label&&this.options.label){xi(this.label);let t=E9(this.action.label);if(t){const n=Hfe(t);this.options.enableMnemonics||(t=n),this.label.setAttribute("aria-label",n.replace(/&&/g,"&"));const i=uP.exec(t);if(i){t=SC(t),iR.lastIndex=0;let o=iR.exec(t);for(;o&&o[1];)o=iR.exec(t);const r=a=>a.replace(/&amp;&amp;/g,"&amp;");o?this.label.append(g0(r(t.substr(0,o.index))," "),te("u",{"aria-hidden":"true"},o[3]),Gj(r(t.substr(o.index+o[0].length))," ")):this.label.innerText=r(t).trim(),(e=this.item)==null||e.setAttribute("aria-keyshortcuts",(i[1]?i[1]:i[3]).toLocaleLowerCase())}else this.label.innerText=t.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,i=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",o=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=n??"",this.item.style.outline=i,this.item.style.outlineOffset=o),this.check&&(this.check.style.color=t??"")}}class CH extends NG{constructor(e,t,n,i,o){super(e,e,i,o),this.submenuActions=t,this.parentData=n,this.submenuOptions=i,this.mysubmenu=null,this.submenuDisposables=this._register(new q),this.mouseOver=!1,this.expandDirection=i&&i.expandDirection!==void 0?i.expandDirection:{horizontal:wL.Right,vertical:fP.Below},this.showScheduler=new It(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new It(()=>{this.element&&!ii(Fi(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=Y(this.item,te("span.submenu-indicator"+De.asCSSSelector(J.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register($(this.element,ee.KEY_UP,t=>{const n=new Pt(t);(n.equals(17)||n.equals(3))&&(it.stop(t,!0),this.createSubmenu(!0))})),this._register($(this.element,ee.KEY_DOWN,t=>{const n=new Pt(t);Fi()===this.item&&(n.equals(17)||n.equals(3))&&it.stop(t,!0)})),this._register($(this.element,ee.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register($(this.element,ee.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register($(this.element,ee.FOCUS_OUT,t=>{this.element&&!ii(Fi(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(e){it.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,i){const o={top:0,left:0};return o.left=Pp(e.width,t.width,{position:i.horizontal===wL.Right?0:1,offset:n.left,size:n.width}),o.left>=n.left&&o.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(o.left=n.left+10),n.top+=10,n.height=0),o.top=Pp(e.height,t.height,{position:0,offset:n.top,size:0}),o.top+t.height===n.top&&o.top+n.height+t.height<=e.height&&(o.top+=n.height),o}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=Y(this.element,te("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=Le(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new x_(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new GM],this.submenuOptions,this.menuStyle);const i=this.element.getBoundingClientRect(),o={top:i.top-n,left:i.left,height:i.height+2*n,width:i.width},r=this.submenuContainer.getBoundingClientRect(),a=Le(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new Lt(a.innerWidth,a.innerHeight),Lt.lift(r),o,this.expandDirection);this.submenuContainer.style.left=`${c-r.left}px`,this.submenuContainer.style.top=`${l-r.top}px`,this.submenuDisposables.add($(this.submenuContainer,ee.KEY_UP,d=>{new Pt(d).equals(15)&&(it.stop(d,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add($(this.submenuContainer,ee.KEY_DOWN,d=>{new Pt(d).equals(15)&&it.stop(d,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){var t;this.item&&((t=this.item)==null||t.setAttribute("aria-expanded",e))}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class wH extends Cb{constructor(e,t,n,i){super(e,t,n),this.menuStyles=i}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function Hfe(s){const e=uP,t=e.exec(s);if(!t)return s;const n=!t[1];return s.replace(e,n?"$2$3":"").trim()}function yH(s){const e=zj()[s.id];return`.codicon-${s.id}:before { content: '\\${e.toString(16)}'; }`}function Vfe(s,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${yH(J.menuSelection)}
${yH(J.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const n=s.scrollbarShadow;n&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${n} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${n} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${n} 6px 6px 6px -6px inset;
				}
			`);const i=s.scrollbarSliderBackground;i&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${i};
				}
			`);const o=s.scrollbarSliderHoverBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${o};
				}
			`);const r=s.scrollbarSliderActiveBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${r};
				}
			`)}return t}class zfe{constructor(e,t,n,i){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=i,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=Fi();let n;const i=oi(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,render:o=>{var d;this.lastContainer=o;const r=e.getMenuClassName?e.getMenuClassName():"";r&&(o.className+=" "+r),this.options.blockMouse&&(this.block=o.appendChild(te(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",(d=this.blockDisposable)==null||d.dispose(),this.blockDisposable=$(this.block,ee.MOUSE_DOWN,h=>h.stopPropagation()));const a=new q,l=e.actionRunner||new Qg;l.onWillRun(h=>this.onActionRun(h,!e.skipTelemetry),this,a),l.onDidRun(this.onDidActionRun,this,a),n=new x_(o,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:h=>this.keybindingService.lookupKeybinding(h.id)},Wfe),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);const c=Le(o);return a.add($(c,ee.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add($(c,ee.MOUSE_DOWN,h=>{if(h.defaultPrevented)return;const u=new Gr(c,h);let f=u.target;if(!u.rightButton){for(;f;){if(f===o)return;f=f.parentElement}this.contextViewService.hideContextView(!0)}})),Jr(a,n)},focus:()=>{n==null||n.focus(!!e.autoSelectFirstItem)},onHide:o=>{var r,a,l;(r=e.onHide)==null||r.call(e,!!o),this.block&&(this.block.remove(),this.block=null),(a=this.blockDisposable)==null||a.dispose(),this.blockDisposable=null,this.lastContainer&&(Fi()===this.lastContainer||ii(Fi(),this.lastContainer))&&((l=this.focusToReturn)==null||l.focus()),this.lastContainer=null}},i,!!i)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!Tr(e.error)&&this.notificationService.error(e.error)}}var $fe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ip=function(s,e){return function(t,n){e(t,n,s)}};let gP=class extends F{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new zfe(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,n,i,o,r){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=n,this.keybindingService=i,this.menuService=o,this.contextKeyService=r,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new O),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new O)}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=mP.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{var n;(n=e.onHide)==null||n.call(e,t),this._onDidHideContextMenu.fire()}}),jc.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};gP=$fe([ip(0,Zi),ip(1,En),ip(2,Rd),ip(3,wt),ip(4,nr),ip(5,Ie)],gP);var mP;(function(s){function e(n){return n&&n.menuId instanceof ge}function t(n,i,o){if(!e(n))return n;const{menuId:r,menuActionOptions:a,contextKeyService:l}=n;return{...n,getActions:()=>{const c=[];if(r){const d=i.getMenuActions(r,l??o,a);Bfe(d,c)}return n.getActions?ri.join(n.getActions(),c):c}}}s.transform=t})(mP||(mP={}));var yL;(function(s){s[s.API=0]="API",s[s.USER=1]="USER"})(yL||(yL={}));var V9=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},SL=function(s,e){return function(t,n){e(t,n,s)}};let pP=class{constructor(e){this._commandService=e}async open(e,t){if(!gT(e,We.command))return!1;if(!(t!=null&&t.allowCommands)||(typeof e=="string"&&(e=Se.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let n=[];try{n=OA(decodeURIComponent(e.query))}catch{try{n=OA(e.query)}catch{}}return Array.isArray(n)||(n=[n]),await this._commandService.executeCommand(e.path,...n),!0}};pP=V9([SL(0,Wt)],pP);let _P=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=Se.parse(e));const{selection:n,uri:i}=pde(e);return e=i,e.scheme===We.file&&(e=Qde(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:n,source:t!=null&&t.fromUserGesture?yL.USER:yL.API,...t==null?void 0:t.editorOptions}},this._editorService.getFocusedCodeEditor(),t==null?void 0:t.openToSide),!0}};_P=V9([SL(0,mt)],_P);let bP=class{constructor(e,t){this._openers=new vs,this._validators=new vs,this._resolvers=new vs,this._resolvedUriTargets=new mi(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new vs,this._defaultExternalOpener={openExternal:async n=>(VM(n,We.http,We.https)?Lq(n):Et.location.href=n,!0)},this._openers.push({open:async(n,i)=>i!=null&&i.openExternal||VM(n,We.mailto,We.http,We.https,We.vsls)?(await this._doOpenExternal(n,i),!0):!1}),this._openers.push(new pP(t)),this._openers.push(new _P(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}async open(e,t){const n=typeof e=="string"?Se.parse(e):e,i=this._resolvedUriTargets.get(n)??e;for(const o of this._validators)if(!await o.shouldOpen(i,t))return!1;for(const o of this._openers)if(await o.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const n of this._resolvers)try{const i=await n.resolveExternalUri(e,t);if(i)return this._resolvedUriTargets.has(i.resolved)||this._resolvedUriTargets.set(i.resolved,e),i}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const n=typeof e=="string"?Se.parse(e):e;let i;try{i=(await this.resolveExternalUri(n,t)).resolved}catch{i=n}let o;if(typeof e=="string"&&n.toString()===i.toString()?o=e:o=encodeURI(i.toString(!0)),t!=null&&t.allowContributedOpeners){const r=typeof(t==null?void 0:t.allowContributedOpeners)=="string"?t==null?void 0:t.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(o,{sourceUri:n,preferredOpenerId:r},Ue.None))return!0}return this._defaultExternalOpener.openExternal(o,{sourceUri:n},Ue.None)}dispose(){this._validators.clear()}};bP=V9([SL(0,mt),SL(1,Wt)],bP);const to=tt("editorWorkerService");var _n;(function(s){s[s.Hint=1]="Hint",s[s.Info=2]="Info",s[s.Warning=4]="Warning",s[s.Error=8]="Error"})(_n||(_n={}));(function(s){function e(r,a){return a-r}s.compare=e;const t=Object.create(null);t[s.Error]=m("sev.error","Error"),t[s.Warning]=m("sev.warning","Warning"),t[s.Info]=m("sev.info","Info");function n(r){return t[r]||""}s.toString=n;function i(r){switch(r){case Tn.Error:return s.Error;case Tn.Warning:return s.Warning;case Tn.Info:return s.Info;case Tn.Ignore:return s.Hint}}s.fromSeverity=i;function o(r){switch(r){case s.Error:return Tn.Error;case s.Warning:return Tn.Warning;case s.Info:return Tn.Info;case s.Hint:return Tn.Ignore}}s.toSeverity=o})(_n||(_n={}));var kL;(function(s){const e="";function t(i){return n(i,!0)}s.makeKey=t;function n(i,o){const r=[e];return i.source?r.push(i.source.replace("¦","\\¦")):r.push(e),i.code?typeof i.code=="string"?r.push(i.code.replace("¦","\\¦")):r.push(i.code.value.replace("¦","\\¦")):r.push(e),i.severity!==void 0&&i.severity!==null?r.push(_n.toString(i.severity)):r.push(e),i.message&&o?r.push(i.message.replace("¦","\\¦")):r.push(e),i.startLineNumber!==void 0&&i.startLineNumber!==null?r.push(i.startLineNumber.toString()):r.push(e),i.startColumn!==void 0&&i.startColumn!==null?r.push(i.startColumn.toString()):r.push(e),i.endLineNumber!==void 0&&i.endLineNumber!==null?r.push(i.endLineNumber.toString()):r.push(e),i.endColumn!==void 0&&i.endColumn!==null?r.push(i.endColumn.toString()):r.push(e),r.push(e),r.join("¦")}s.makeKeyOptionalMessage=n})(kL||(kL={}));const rc=tt("markerService"),RG=T("editor.lineHighlightBackground",null,m("lineHighlight","Background color for the highlight of line at the cursor position.")),SH=T("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:ct},m("lineHighlightBorderBox","Background color for the border around the line at the cursor position."));T("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},m("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Zt,hcLight:Zt},m("rangeHighlightBorder","Background color of the border around highlighted ranges."));T("editor.symbolHighlightBackground",{dark:Kc,light:Kc,hcDark:null,hcLight:null},m("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Zt,hcLight:Zt},m("symbolHighlightBorder","Background color of the border around highlighted symbols."));const sE=T("editorCursor.foreground",{dark:"#AEAFAD",light:Z.black,hcDark:Z.white,hcLight:"#0F4A85"},m("caret","Color of the editor cursor.")),z9=T("editorCursor.background",null,m("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),MG=T("editorMultiCursor.primary.foreground",sE,m("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),Ufe=T("editorMultiCursor.primary.background",z9,m("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),AG=T("editorMultiCursor.secondary.foreground",sE,m("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),jfe=T("editorMultiCursor.secondary.background",z9,m("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),$9=T("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},m("editorWhitespaces","Color of whitespace characters in the editor.")),qfe=T("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:Z.white,hcLight:"#292929"},m("editorLineNumbers","Color of editor line numbers.")),Kfe=T("editorIndentGuide.background",$9,m("editorIndentGuides","Color of the editor indentation guides."),!1,m("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),Gfe=T("editorIndentGuide.activeBackground",$9,m("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,m("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),A0=T("editorIndentGuide.background1",Kfe,m("editorIndentGuides1","Color of the editor indentation guides (1).")),Zfe=T("editorIndentGuide.background2","#00000000",m("editorIndentGuides2","Color of the editor indentation guides (2).")),Yfe=T("editorIndentGuide.background3","#00000000",m("editorIndentGuides3","Color of the editor indentation guides (3).")),Xfe=T("editorIndentGuide.background4","#00000000",m("editorIndentGuides4","Color of the editor indentation guides (4).")),Qfe=T("editorIndentGuide.background5","#00000000",m("editorIndentGuides5","Color of the editor indentation guides (5).")),Jfe=T("editorIndentGuide.background6","#00000000",m("editorIndentGuides6","Color of the editor indentation guides (6).")),P0=T("editorIndentGuide.activeBackground1",Gfe,m("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),ege=T("editorIndentGuide.activeBackground2","#00000000",m("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),tge=T("editorIndentGuide.activeBackground3","#00000000",m("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),nge=T("editorIndentGuide.activeBackground4","#00000000",m("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),ige=T("editorIndentGuide.activeBackground5","#00000000",m("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),sge=T("editorIndentGuide.activeBackground6","#00000000",m("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),oge=T("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Zt,hcLight:Zt},m("editorActiveLineNumber","Color of editor active line number"),!1,m("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));T("editorLineNumber.activeForeground",oge,m("editorActiveLineNumber","Color of editor active line number"));const rge=T("editorLineNumber.dimmedForeground",null,m("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed."));T("editorRuler.foreground",{dark:"#5A5A5A",light:Z.lightgrey,hcDark:Z.white,hcLight:"#292929"},m("editorRuler","Color of the editor rulers."));T("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},m("editorCodeLensForeground","Foreground color of editor CodeLens"));T("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},m("editorBracketMatchBackground","Background color behind matching brackets"));T("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:ct,hcLight:ct},m("editorBracketMatchBorder","Color for matching brackets boxes"));const age=T("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},m("editorOverviewRulerBorder","Color of the overview ruler border.")),lge=T("editorOverviewRuler.background",null,m("editorOverviewRulerBackground","Background color of the editor overview ruler."));T("editorGutter.background",oa,m("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));T("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:Z.fromHex("#fff").transparent(.8),hcLight:ct},m("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor."));const cge=T("editorUnnecessaryCode.opacity",{dark:Z.fromHex("#000a"),light:Z.fromHex("#0007"),hcDark:null,hcLight:null},m("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));T("editorGhostText.border",{dark:null,light:null,hcDark:Z.fromHex("#fff").transparent(.8),hcLight:Z.fromHex("#292929").transparent(.8)},m("editorGhostTextBorder","Border color of ghost text in the editor."));const dge=T("editorGhostText.foreground",{dark:Z.fromHex("#ffffff56"),light:Z.fromHex("#0007"),hcDark:null,hcLight:null},m("editorGhostTextForeground","Foreground color of the ghost text in the editor."));T("editorGhostText.background",null,m("editorGhostTextBackground","Background color of the ghost text in the editor."));const hge=new Z(new ht(0,122,204,.6)),PG=T("editorOverviewRuler.rangeHighlightForeground",hge,m("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),uge=T("editorOverviewRuler.errorForeground",{dark:new Z(new ht(255,18,18,.7)),light:new Z(new ht(255,18,18,.7)),hcDark:new Z(new ht(255,50,50,1)),hcLight:"#B5200D"},m("overviewRuleError","Overview ruler marker color for errors.")),fge=T("editorOverviewRuler.warningForeground",{dark:vd,light:vd,hcDark:Yw,hcLight:Yw},m("overviewRuleWarning","Overview ruler marker color for warnings.")),gge=T("editorOverviewRuler.infoForeground",{dark:Gl,light:Gl,hcDark:Xw,hcLight:Xw},m("overviewRuleInfo","Overview ruler marker color for infos.")),OG=T("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},m("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),FG=T("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},m("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),WG=T("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},m("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),BG=T("editorBracketHighlight.foreground4","#00000000",m("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),HG=T("editorBracketHighlight.foreground5","#00000000",m("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),VG=T("editorBracketHighlight.foreground6","#00000000",m("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),mge=T("editorBracketHighlight.unexpectedBracket.foreground",{dark:new Z(new ht(255,18,18,.8)),light:new Z(new ht(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},m("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),pge=T("editorBracketPairGuide.background1","#00000000",m("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),_ge=T("editorBracketPairGuide.background2","#00000000",m("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),bge=T("editorBracketPairGuide.background3","#00000000",m("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),vge=T("editorBracketPairGuide.background4","#00000000",m("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),Cge=T("editorBracketPairGuide.background5","#00000000",m("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),wge=T("editorBracketPairGuide.background6","#00000000",m("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),yge=T("editorBracketPairGuide.activeBackground1","#00000000",m("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),Sge=T("editorBracketPairGuide.activeBackground2","#00000000",m("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),kge=T("editorBracketPairGuide.activeBackground3","#00000000",m("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),Lge=T("editorBracketPairGuide.activeBackground4","#00000000",m("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),xge=T("editorBracketPairGuide.activeBackground5","#00000000",m("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),Dge=T("editorBracketPairGuide.activeBackground6","#00000000",m("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));T("editorUnicodeHighlight.border",vd,m("editorUnicodeHighlight.border","Border color used to highlight unicode characters."));T("editorUnicodeHighlight.background",Lle,m("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Er((s,e)=>{const t=s.getColor(oa),n=s.getColor(RG),i=n&&!n.isTransparent()?n:t;i&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${i}; }`)});function Ige(s,e){const t=[],n=[];for(const i of s)e.has(i)||t.push(i);for(const i of e)s.has(i)||n.push(i);return{removed:t,added:n}}function Tge(s,e){const t=new Set;for(const n of e)s.has(n)&&t.add(n);return t}var Ege=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},kH=function(s,e){return function(t,n){e(t,n,s)}};let vP=class extends F{constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new O),this._markerDecorations=new mi,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new Nge(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){var n;const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===We.inMemory||e.uri.scheme===We.internal||e.uri.scheme===We.vscode)&&((n=this._markerService)==null||n.read({resource:e.uri}).map(i=>i.owner).forEach(i=>this._markerService.remove(i,[e.uri])))}_updateDecorations(e){const t=this._markerService.read({resource:e.model.uri,take:500});e.update(t)&&this._onDidChangeMarker.fire(e.model)}};vP=Ege([kH(0,Ut),kH(1,rc)],vP);class Nge extends F{constructor(e){super(),this.model=e,this._map=new Rre,this._register(ve(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:n}=Ige(new Set(this._map.keys()),new Set(e));if(t.length===0&&n.length===0)return!1;const i=n.map(a=>this._map.get(a)),o=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),r=this.model.deltaDecorations(i,o);for(const a of n)this._map.delete(a);for(let a=0;a<r.length;a++)this._map.set(t[a],r[a]);return!0}getMarker(e){return this._map.getKey(e.id)}_createDecorationRange(e,t){let n=L.lift(t);if(t.severity===_n.Hint&&!this._hasMarkerTag(t,1)&&!this._hasMarkerTag(t,2)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const i=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(i===1||n.endColumn>=i)return n;const o=e.getWordAtPosition(n.getStartPosition());o&&(n=new L(n.startLineNumber,o.startColumn,n.endLineNumber,o.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&n.startLineNumber===n.endLineNumber){const i=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);i<n.endColumn&&(n=new L(n.startLineNumber,i,n.endLineNumber,n.endColumn),t.startColumn=i)}return n}_createDecorationOption(e){let t,n,i,o,r;switch(e.severity){case _n.Hint:this._hasMarkerTag(e,2)?t=void 0:this._hasMarkerTag(e,1)?t="squiggly-unnecessary":t="squiggly-hint",i=0;break;case _n.Info:t="squiggly-info",n=pn(gge),i=10,r={color:pn(Kle),position:1};break;case _n.Warning:t="squiggly-warning",n=pn(fge),i=20,r={color:pn(Gle),position:1};break;case _n.Error:default:t="squiggly-error",n=pn(uge),i=30,r={color:pn(Zle),position:1};break}return e.tags&&(e.tags.indexOf(1)!==-1&&(o="squiggly-inline-unnecessary"),e.tags.indexOf(2)!==-1&&(o="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:Ko.Right},minimap:r,zIndex:i,inlineClassName:o}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}const U9=tt("markerDecorationsService");class Gn{static _nextVisibleColumn(e,t,n){return e===9?Gn.nextRenderTabStop(t,n):ru(e)||W3(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const i=Math.min(t-1,e.length),o=e.substring(0,i),r=new Ok(o);let a=0;for(;!r.eol();){const l=Pk(o,i,r.offset);r.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const i=e.length,o=new Ok(e);let r=0,a=1;for(;!o.eol();){const l=Pk(e,i,o.offset);o.nextGraphemeLength();const c=this._nextVisibleColumn(l,r,n),d=o.offset+1;if(c>=t){const h=t-r;return c-t<h?d:a}r=c,a=d}return i+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}}function Rge(s,e,t){let n=0;for(let o=0;o<s.length;o++)s.charAt(o)==="	"?n=Gn.nextIndentTabStop(n,e):n++;let i="";if(!t){const o=Math.floor(n/e);n=n%e;for(let r=0;r<o;r++)i+="	"}for(let o=0;o<n;o++)i+=" ";return i}function j9(s,e,t){let n=ds(s);return n===-1&&(n=s.length),Rge(s.substring(0,n),e,t)+s.substring(n)}class LH{constructor(e,t,n,i){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=i}}class Mge{constructor(e,t,n,i,o,r){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=i,this.nestingLevelOfEqualBracketType=o,this.bracketPairNode=r}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class Age extends Mge{constructor(e,t,n,i,o,r,a){super(e,t,n,i,o,r),this.minVisibleColumnIndentation=a}}function Pge(s,e,t,n){return s!==t?Pn(t-s,n):Pn(0,n-e)}const Cs=0;function LL(s){return s===0}const qo=2**26;function Pn(s,e){return s*qo+e}function wr(s){const e=s,t=Math.floor(e/qo),n=e-t*qo;return new sa(t,n)}function Oge(s){return Math.floor(s/qo)}function bn(s,e){let t=s+e;return e>=qo&&(t=t-s%qo),t}function Fge(s,e){return s.reduce((t,n)=>bn(t,e(n)),Cs)}function zG(s,e){return s===e}function h1(s,e){const t=s,n=e;if(n-t<=0)return Cs;const o=Math.floor(t/qo),r=Math.floor(n/qo),a=n-r*qo;if(o===r){const l=t-o*qo;return Pn(0,a-l)}else return Pn(r-o,a)}function D_(s,e){return s<e}function I_(s,e){return s<=e}function rC(s,e){return s>=e}function Bp(s){return Pn(s.lineNumber-1,s.column-1)}function zf(s,e){const t=s,n=Math.floor(t/qo),i=t-n*qo,o=e,r=Math.floor(o/qo),a=o-r*qo;return new L(n+1,i+1,r+1,a+1)}function Wge(s){const e=tc(s);return Pn(e.length-1,e[e.length-1].length)}class Gc{static fromModelContentChanges(e){return e.map(n=>{const i=L.lift(n.range);return new Gc(Bp(i.getStartPosition()),Bp(i.getEndPosition()),Wge(n.text))}).reverse()}constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}toString(){return`[${wr(this.startOffset)}...${wr(this.endOffset)}) -> ${wr(this.newLength)}`}}class Bge{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>q9.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:h1(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Pn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Pn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=wr(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Pn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Pn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(I_(n,e)){this.nextEditIdx++;const i=wr(n),o=wr(this.translateOldToCur(t.endOffsetBeforeObj)),r=i.lineCount-o.lineCount;this.deltaOldToNewLineCount+=r;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=i.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class q9{static from(e){return new q9(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,n){this.endOffsetBeforeObj=wr(t),this.endOffsetAfterObj=wr(bn(e,n)),this.offsetObj=wr(e)}}const Fy=[],cr=class cr{static create(e,t){if(e<=128&&t.length===0){let n=cr.cache[e];return n||(n=new cr(e,t),cr.cache[e]=n),n}return new cr(e,t)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const n=t.getKey(e);let i=n>>5;if(i===0){const r=1<<n|this.items;return r===this.items?this:cr.create(r,this.additionalItems)}i--;const o=this.additionalItems.slice(0);for(;o.length<i;)o.push(0);return o[i]|=1<<(n&31),cr.create(this.items,o)}merge(e){const t=this.items|e.items;if(this.additionalItems===Fy&&e.additionalItems===Fy)return t===this.items?this:t===e.items?e:cr.create(t,Fy);const n=[];for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){const o=this.additionalItems[i]||0,r=e.additionalItems[i]||0;n.push(o|r)}return cr.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}};cr.cache=new Array(129),cr.empty=cr.create(0,Fy);let fo=cr;const xH={getKey(s){return s}};class $G{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}}class K9{get length(){return this._length}constructor(e){this._length=e}}class u1 extends K9{static create(e,t,n){let i=e.length;return t&&(i=bn(i,t.length)),n&&(i=bn(i,n.length)),new u1(i,e,t,n,t?t.missingOpeningBracketIds:fo.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,n,i,o){super(e),this.openingBracket=t,this.child=n,this.closingBracket=i,this.missingOpeningBracketIds=o}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}deepClone(){return new u1(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(bn(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Yl extends K9{static create23(e,t,n,i=!1){let o=e.length,r=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(o=bn(o,t.length),r=r.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");o=bn(o,n.length),r=r.merge(n.missingOpeningBracketIds)}return i?new Hge(o,e.listHeight+1,e,t,n,r):new f1(o,e.listHeight+1,e,t,n,r)}static getEmpty(){return new Vge(Cs,0,[],fo.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===4?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===4;){const n=t.childrenLength;if(n===0)throw new _t;t=t.getChild(n-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let i=1;i<e;i++){const o=this.getChild(i);t=bn(t,o.length),n=n.merge(o.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,i=e;for(let o=0;o<this.childrenLength;o++){const r=this.getChild(o);r&&(n=Math.min(n,r.computeMinIndentation(i,t)),i=bn(i,r.length))}return this.cachedMinIndentation=n,n}}class f1 extends Yl{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,n,i,o,r){super(e,t,r),this._item1=n,this._item2=i,this._item3=o}deepClone(){return new f1(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class Hge extends f1{toMutable(){return new f1(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class xL extends Yl{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,n,i){super(e,t,i),this._children=n}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new xL(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class Vge extends xL{toMutable(){return new xL(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const zge=[];class G9 extends K9{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return zge}deepClone(){return this}}class gf extends G9{get kind(){return 0}get missingOpeningBracketIds(){return fo.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=wr(e),i=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,o=Oge(bn(e,this.length))+1;let r=Number.MAX_SAFE_INTEGER;for(let a=i;a<=o;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const d=Gn.visibleColumnFromColumn(c,l,t.getOptions().tabSize);r=Math.min(r,d)}return r}}class DL extends G9{static create(e,t,n){return new DL(e,t,n)}get kind(){return 1}get missingOpeningBracketIds(){return fo.getEmpty()}constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class $ge extends G9{get kind(){return 3}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}let ah=class{constructor(e,t,n,i,o){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=i,this.astNode=o}};class UG{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new Uge(this.textModel,this.bracketTokens),this._offset=Cs,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Pn(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(e){this.didPeek=!1,this._offset=bn(this._offset,e);const t=wr(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=bn(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class Uge{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const o=this.lineTokens,r=o.getCount();let a=null;if(this.lineTokenOffset<r){const l=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<r&&l===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=$s.getTokenType(l)===0,d=$s.containsBalancedBrackets(l),h=o.getEndOffset(this.lineTokenOffset);if(d&&c&&this.lineCharOffset<h){const u=o.getLanguageId(this.lineTokenOffset),f=this.line.substring(this.lineCharOffset,h),g=this.bracketTokens.getSingleLanguageBracketTokens(u),p=g.regExpGlobal;if(p){p.lastIndex=0;const _=p.exec(f);_&&(a=g.getToken(_[0]),a&&(this.lineCharOffset+=_.index))}}if(n+=h-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=h}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const i=Pge(e,t,this.lineIdx,this.lineCharOffset);return new ah(i,0,-1,fo.getEmpty(),new gf(i))}}class jge{constructor(e,t){this.text=e,this._offset=Cs,this.idx=0;const n=t.getRegExpStr(),i=n?new RegExp(n+`|
`,"gi"):null,o=[];let r,a=0,l=0,c=0,d=0;const h=[];for(let g=0;g<60;g++)h.push(new ah(Pn(0,g),0,-1,fo.getEmpty(),new gf(Pn(0,g))));const u=[];for(let g=0;g<60;g++)u.push(new ah(Pn(1,g),0,-1,fo.getEmpty(),new gf(Pn(1,g))));if(i)for(i.lastIndex=0;(r=i.exec(e))!==null;){const g=r.index,p=r[0];if(p===`
`)a++,l=g+1;else{if(c!==g){let _;if(d===a){const b=g-c;if(b<h.length)_=h[b];else{const v=Pn(0,b);_=new ah(v,0,-1,fo.getEmpty(),new gf(v))}}else{const b=a-d,v=g-l;if(b===1&&v<u.length)_=u[v];else{const C=Pn(b,v);_=new ah(C,0,-1,fo.getEmpty(),new gf(C))}}o.push(_)}o.push(t.getToken(p)),c=g+p.length,d=a}}const f=e.length;if(c!==f){const g=d===a?Pn(0,f-c):Pn(a-d,f-l);o.push(new ah(g,0,-1,fo.getEmpty(),new gf(g)))}this.length=Pn(a,f-l),this.tokens=o}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new yne}}class Z9{static createFromLanguage(e,t){function n(o){return t.getKey(`${o.languageId}:::${o.bracketText}`)}const i=new Map;for(const o of e.bracketsNew.openingBrackets){const r=Pn(0,o.bracketText.length),a=n(o),l=fo.getEmpty().add(a,xH);i.set(o.bracketText,new ah(r,1,a,l,DL.create(r,o,l)))}for(const o of e.bracketsNew.closingBrackets){const r=Pn(0,o.bracketText.length);let a=fo.getEmpty();const l=o.getOpeningBrackets();for(const c of l)a=a.add(n(c),xH);i.set(o.bracketText,new ah(r,2,n(l[0]),a,DL.create(r,o,a)))}return new Z9(i)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>qge(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function qge(s){let e=Xo(s);return/^[\w ]+/.test(s)&&(e=`\\b${e}`),/[\w ]+$/.test(s)&&(e=`${e}\\b`),e}class jG{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=Z9.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}}function Kge(s){if(s.length===0)return null;if(s.length===1)return s[0];let e=0;function t(){if(e>=s.length)return null;const r=e,a=s[r].listHeight;for(e++;e<s.length&&s[e].listHeight===a;)e++;return e-r>=2?qG(r===0&&e===s.length?s:s.slice(r,e),!1):s[r]}let n=t(),i=t();if(!i)return n;for(let r=t();r;r=t())DH(n,i)<=DH(i,r)?(n=sR(n,i),i=r):i=sR(i,r);return sR(n,i)}function qG(s,e=!1){if(s.length===0)return null;if(s.length===1)return s[0];let t=s.length;for(;t>3;){const n=t>>1;for(let i=0;i<n;i++){const o=i<<1;s[i]=Yl.create23(s[o],s[o+1],o+3===t?s[o+2]:null,e)}t=n}return Yl.create23(s[0],s[1],t>=3?s[2]:null,e)}function DH(s,e){return Math.abs(s.listHeight-e.listHeight)}function sR(s,e){return s.listHeight===e.listHeight?Yl.create23(s,e,null,!1):s.listHeight>e.listHeight?Gge(s,e):Zge(e,s)}function Gge(s,e){s=s.toMutable();let t=s;const n=[];let i;for(;;){if(e.listHeight===t.listHeight){i=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let o=n.length-1;o>=0;o--){const r=n[o];i?r.childrenLength>=3?i=Yl.create23(r.unappendChild(),i,null,!1):(r.appendChildOfSameHeight(i),i=void 0):r.handleChildrenChanged()}return i?Yl.create23(s,i,null,!1):s}function Zge(s,e){s=s.toMutable();let t=s;const n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let i=e;for(let o=n.length-1;o>=0;o--){const r=n[o];i?r.childrenLength>=3?i=Yl.create23(i,r.unprependChild(),null,!1):(r.prependChildOfSameHeight(i),i=void 0):r.handleChildrenChanged()}return i?Yl.create23(i,s,null,!1):s}class Yge{constructor(e){this.lastOffset=Cs,this.nextNodes=[e],this.offsets=[Cs],this.idxs=[]}readLongestNodeAt(e,t){if(D_(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=Ov(this.nextNodes);if(!n)return;const i=Ov(this.offsets);if(D_(e,i))return;if(D_(i,e))if(bn(i,n.length)<=e)this.nextNodeAfterCurrent();else{const o=oR(n);o!==-1?(this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const o=oR(n);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){const e=Ov(this.offsets),t=Ov(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=Ov(this.nextNodes),i=oR(n,this.idxs[this.idxs.length-1]);if(i!==-1){this.nextNodes.push(n.getChild(i)),this.offsets.push(bn(e,t.length)),this.idxs[this.idxs.length-1]=i;break}else this.idxs.pop()}}}function oR(s,e=-1){for(;;){if(e++,e>=s.childrenLength)return-1;if(s.getChild(e))return e}}function Ov(s){return s.length>0?s[s.length-1]:void 0}function CP(s,e,t,n){return new Xge(s,e,t,n).parseDocument()}class Xge{constructor(e,t,n,i){if(this.tokenizer=e,this.createImmutableLists=i,this._itemsConstructed=0,this._itemsFromCache=0,n&&i)throw new Error("Not supported");this.oldNodeReader=n?new Yge(n):void 0,this.positionMapper=new Bge(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(fo.getEmpty(),0);return e||(e=Yl.getEmpty()),e}parseList(e,t){const n=[];for(;;){let o=this.tryReadChildFromCache(e);if(!o){const r=this.tokenizer.peek();if(!r||r.kind===2&&r.bracketIds.intersects(e))break;o=this.parseChild(e,t+1)}o.kind===4&&o.childrenLength===0||n.push(o)}return this.oldNodeReader?Kge(n):qG(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!LL(t)){const n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),i=>t!==null&&!D_(i.length,t)?!1:i.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;const n=this.tokenizer.read();switch(n.kind){case 2:return new $ge(n.bracketIds,n.length);case 0:return n.astNode;case 1:{if(t>300)return new gf(n.length);const i=e.merge(n.bracketIds),o=this.parseList(i,t+1),r=this.tokenizer.peek();return r&&r.kind===2&&(r.bracketId===n.bracketId||r.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),u1.create(n.astNode,o,r.astNode)):u1.create(n.astNode,o,null)}default:throw new Error("unexpected")}}}function IL(s,e){if(s.length===0)return e;if(e.length===0)return s;const t=new gd(IH(s)),n=IH(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=t.dequeue();function o(c){if(c===void 0){const h=t.takeWhile(u=>!0)||[];return i&&h.unshift(i),h}const d=[];for(;i&&!LL(c);){const[h,u]=i.splitAt(c);d.push(h),c=h1(h.lengthAfter,c),i=u??t.dequeue()}return LL(c)||d.push(new yh(!1,c,c)),d}const r=[];function a(c,d,h){if(r.length>0&&zG(r[r.length-1].endOffset,c)){const u=r[r.length-1];r[r.length-1]=new Gc(u.startOffset,d,bn(u.newLength,h))}else r.push({startOffset:c,endOffset:d,newLength:h})}let l=Cs;for(const c of n){const d=o(c.lengthBefore);if(c.modified){const h=Fge(d,f=>f.lengthBefore),u=bn(l,h);a(l,u,c.lengthAfter),l=u}else for(const h of d){const u=l;l=bn(l,h.lengthBefore),h.modified&&a(u,l,h.lengthAfter)}}return r}class yh{constructor(e,t,n){this.modified=e,this.lengthBefore=t,this.lengthAfter=n}splitAt(e){const t=h1(e,this.lengthAfter);return zG(t,Cs)?[this,void 0]:this.modified?[new yh(this.modified,this.lengthBefore,e),new yh(this.modified,Cs,t)]:[new yh(this.modified,e,e),new yh(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${wr(this.lengthBefore)} -> ${wr(this.lengthAfter)}`}}function IH(s){const e=[];let t=Cs;for(const n of s){const i=h1(t,n.startOffset);LL(i)||e.push(new yh(!1,i,i));const o=h1(n.startOffset,n.endOffset);e.push(new yh(!0,o,n.newLength)),t=n.endOffset}return e}class Qge extends F{didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new O,this.denseKeyProvider=new $G,this.brackets=new jG(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),i=new jge(this.textModel.getValue(),n);this.initialAstWithoutTokens=CP(i,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(n=>new Gc(Pn(n.fromLineNumber-1,0),Pn(n.toLineNumber,0),Pn(n.toLineNumber-n.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=Gc.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const n=IL(this.queuedTextEdits,e);this.queuedTextEdits=n,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=IL(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,n){const i=t,o=new UG(this.textModel,this.brackets);return CP(o,e,i,n)}getBracketsInRange(e,t){this.flushQueue();const n=Pn(e.startLineNumber-1,e.startColumn-1),i=Pn(e.endLineNumber-1,e.endColumn-1);return new Of(o=>{const r=this.initialAstWithoutTokens||this.astWithTokens;wP(r,Cs,r.length,n,i,o,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const n=Bp(e.getStartPosition()),i=Bp(e.getEndPosition());return new Of(o=>{const r=this.initialAstWithoutTokens||this.astWithTokens,a=new Jge(o,t,this.textModel);yP(r,Cs,r.length,n,i,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return GG(t,Cs,t.length,Bp(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return KG(t,Cs,t.length,Bp(e))}}function KG(s,e,t,n){if(s.kind===4||s.kind===2){const i=[];for(const o of s.children)t=bn(e,o.length),i.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let o=i.length-1;o>=0;o--){const{nodeOffsetStart:r,nodeOffsetEnd:a}=i[o];if(D_(r,n)){const l=KG(s.children[o],r,a,n);if(l)return l}}return null}else{if(s.kind===3)return null;if(s.kind===1){const i=zf(e,t);return{bracketInfo:s.bracketInfo,range:i}}}return null}function GG(s,e,t,n){if(s.kind===4||s.kind===2){for(const i of s.children){if(t=bn(e,i.length),D_(n,t)){const o=GG(i,e,t,n);if(o)return o}e=t}return null}else{if(s.kind===3)return null;if(s.kind===1){const i=zf(e,t);return{bracketInfo:s.bracketInfo,range:i}}}return null}function wP(s,e,t,n,i,o,r,a,l,c,d=!1){if(r>200)return!0;e:for(;;)switch(s.kind){case 4:{const h=s.childrenLength;for(let u=0;u<h;u++){const f=s.getChild(u);if(f){if(t=bn(e,f.length),I_(e,i)&&rC(t,n)){if(rC(t,i)){s=f;continue e}if(!wP(f,e,t,n,i,o,r,0,l,c))return!1}e=t}}return!0}case 2:{const h=!c||!s.closingBracket||s.closingBracket.bracketInfo.closesColorized(s.openingBracket.bracketInfo);let u=0;if(l){let g=l.get(s.openingBracket.text);g===void 0&&(g=0),u=g,h&&(g++,l.set(s.openingBracket.text,g))}const f=s.childrenLength;for(let g=0;g<f;g++){const p=s.getChild(g);if(p){if(t=bn(e,p.length),I_(e,i)&&rC(t,n)){if(rC(t,i)&&p.kind!==1){s=p,h?(r++,a=u+1):a=u;continue e}if((h||p.kind!==1||!s.closingBracket)&&!wP(p,e,t,n,i,o,h?r+1:r,h?u+1:u,l,c,!s.closingBracket))return!1}e=t}}return l==null||l.set(s.openingBracket.text,u),!0}case 3:{const h=zf(e,t);return o(new LH(h,r-1,0,!0))}case 1:{const h=zf(e,t);return o(new LH(h,r-1,a-1,d))}case 0:return!0}}class Jge{constructor(e,t,n){this.push=e,this.includeMinIndentation=t,this.textModel=n}}function yP(s,e,t,n,i,o,r,a){var c;if(r>200)return!0;let l=!0;if(s.kind===2){let d=0;if(a){let f=a.get(s.openingBracket.text);f===void 0&&(f=0),d=f,f++,a.set(s.openingBracket.text,f)}const h=bn(e,s.openingBracket.length);let u=-1;if(o.includeMinIndentation&&(u=s.computeMinIndentation(e,o.textModel)),l=o.push(new Age(zf(e,t),zf(e,h),s.closingBracket?zf(bn(h,((c=s.child)==null?void 0:c.length)||Cs),t):void 0,r,d,s,u)),e=h,l&&s.child){const f=s.child;if(t=bn(e,f.length),I_(e,i)&&rC(t,n)&&(l=yP(f,e,t,n,i,o,r+1,a),!l))return!1}a==null||a.set(s.openingBracket.text,d)}else{let d=e;for(const h of s.children){const u=d;if(d=bn(d,h.length),I_(u,i)&&I_(n,d)&&(l=yP(h,u,d,n,i,o,r,a),!l))return!1}}return l}class eme extends F{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new ai),this.onDidChangeEmitter=new O,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){var t;(!e.languageId||(t=this.bracketPairsTree.value)!=null&&t.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){var e;(e=this.bracketPairsTree.value)==null||e.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){var t;(t=this.bracketPairsTree.value)==null||t.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new q;this.bracketPairsTree.value=tme(e.add(new Qge(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!1))||Of.empty}getBracketPairsInRangeWithMinIndentation(e){var t;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((t=this.bracketPairsTree.value)==null?void 0:t.object.getBracketPairsInRange(e,!0))||Of.empty}getBracketsInRange(e,t=!1){var n;return this.bracketsRequested=!0,this.updateBracketPairsTree(),((n=this.bracketPairsTree.value)==null?void 0:n.object.getBracketsInRange(e,t))||Of.empty}findMatchingBracketUp(e,t,n){const i=this.textModel.validatePosition(t),o=this.textModel.getLanguageIdAtPosition(i.lineNumber,i.column);if(this.canBuildAST){const r=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew.getClosingBracketInfo(e);if(!r)return null;const a=this.getBracketPairsInRange(L.fromPositions(t,t)).findLast(l=>r.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const r=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(o).brackets;if(!a)return null;const l=a.textIsBracket[r];return l?Wy(this._findMatchingBracketUp(l,i,rR(n))):null}}matchBracket(e,t){if(this.canBuildAST){const n=this.getBracketPairsInRange(L.fromPositions(e,e)).filter(i=>i.closingBracketRange!==void 0&&(i.openingBracketRange.containsPosition(e)||i.closingBracketRange.containsPosition(e))).findLastMaxBy(ks(i=>i.openingBracketRange.containsPosition(e)?i.openingBracketRange:i.closingBracketRange,L.compareRangesUsingStarts));return n?[n.openingBracketRange,n.closingBracketRange]:null}else{const n=rR(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,i){const o=t.getCount(),r=t.getLanguageId(i);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let c=i-1;c>=0;c--){const d=t.getEndOffset(c);if(d<=a)break;if(ml(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){a=d;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let c=i+1;c<o;c++){const d=t.getStartOffset(c);if(d>=l)break;if(ml(t.getStandardTokenType(c))||t.getLanguageId(c)!==r){l=d;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const n=e.lineNumber,i=this.textModel.tokenization.getLineTokens(n),o=this.textModel.getLineContent(n),r=i.findTokenIndexAtOffset(e.column-1);if(r<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(r)).brackets;if(a&&!ml(i.getStandardTokenType(r))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,i,a,r),d=null;for(;;){const h=Wr.findNextBracketInRange(a.forwardRegex,n,o,l,c);if(!h)break;if(h.startColumn<=e.column&&e.column<=h.endColumn){const u=o.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),f=this._matchFoundBracket(h,a.textIsBracket[u],a.textIsOpenBracket[u],t);if(f){if(f instanceof Ac)return null;d=f}}l=h.endColumn-1}if(d)return d}if(r>0&&i.getStartOffset(r)===e.column-1){const l=r-1,c=this.languageConfigurationService.getLanguageConfiguration(i.getLanguageId(l)).brackets;if(c&&!ml(i.getStandardTokenType(l))){const{searchStartOffset:d,searchEndOffset:h}=this._establishBracketSearchOffsets(e,i,c,l),u=Wr.findPrevBracketInRange(c.reversedRegex,n,o,d,h);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn){const f=o.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),g=this._matchFoundBracket(u,c.textIsBracket[f],c.textIsOpenBracket[f],t);if(g)return g instanceof Ac?null:g}}}return null}_matchFoundBracket(e,t,n,i){if(!t)return null;const o=n?this._findMatchingBracketDown(t,e.getEndPosition(),i):this._findMatchingBracketUp(t,e.getStartPosition(),i);return o?o instanceof Ac?o:[e,o]:null}_findMatchingBracketUp(e,t,n){const i=e.languageId,o=e.reversedRegex;let r=-1,a=0;const l=(c,d,h,u)=>{for(;;){if(n&&++a%100===0&&!n())return Ac.INSTANCE;const f=Wr.findPrevBracketInRange(o,c,d,h,u);if(!f)break;const g=d.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(e.isOpen(g)?r++:e.isClose(g)&&r--,r===0)return f;u=f.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const d=this.textModel.tokenization.getLineTokens(c),h=d.getCount(),u=this.textModel.getLineContent(c);let f=h-1,g=u.length,p=u.length;c===t.lineNumber&&(f=d.findTokenIndexAtOffset(t.column-1),g=t.column-1,p=t.column-1);let _=!0;for(;f>=0;f--){const b=d.getLanguageId(f)===i&&!ml(d.getStandardTokenType(f));if(b)_?g=d.getStartOffset(f):(g=d.getStartOffset(f),p=d.getEndOffset(f));else if(_&&g!==p){const v=l(c,u,g,p);if(v)return v}_=b}if(_&&g!==p){const b=l(c,u,g,p);if(b)return b}}return null}_findMatchingBracketDown(e,t,n){const i=e.languageId,o=e.forwardRegex;let r=1,a=0;const l=(d,h,u,f)=>{for(;;){if(n&&++a%100===0&&!n())return Ac.INSTANCE;const g=Wr.findNextBracketInRange(o,d,h,u,f);if(!g)break;const p=h.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?r++:e.isClose(p)&&r--,r===0)return g;u=g.endColumn-1}return null},c=this.textModel.getLineCount();for(let d=t.lineNumber;d<=c;d++){const h=this.textModel.tokenization.getLineTokens(d),u=h.getCount(),f=this.textModel.getLineContent(d);let g=0,p=0,_=0;d===t.lineNumber&&(g=h.findTokenIndexAtOffset(t.column-1),p=t.column-1,_=t.column-1);let b=!0;for(;g<u;g++){const v=h.getLanguageId(g)===i&&!ml(h.getStandardTokenType(g));if(v)b||(p=h.getStartOffset(g)),_=h.getEndOffset(g);else if(b&&p!==_){const C=l(d,f,p,_);if(C)return C}b=v}if(b&&p!==_){const v=l(d,f,p,_);if(v)return v}}return null}findPrevBracket(e){var r;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((r=this.bracketPairsTree.value)==null?void 0:r.object.getFirstBracketBefore(t))||null;let n=null,i=null,o=null;for(let a=t.lineNumber;a>=1;a--){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),d=this.textModel.getLineContent(a);let h=c-1,u=d.length,f=d.length;if(a===t.lineNumber){h=l.findTokenIndexAtOffset(t.column-1),u=t.column-1,f=t.column-1;const p=l.getLanguageId(h);n!==p&&(n=p,i=this.languageConfigurationService.getLanguageConfiguration(n).brackets,o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let g=!0;for(;h>=0;h--){const p=l.getLanguageId(h);if(n!==p){if(i&&o&&g&&u!==f){const b=Wr.findPrevBracketInRange(i.reversedRegex,a,d,u,f);if(b)return this._toFoundBracket(o,b);g=!1}n=p,i=this.languageConfigurationService.getLanguageConfiguration(n).brackets,o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const _=!!i&&!ml(l.getStandardTokenType(h));if(_)g?u=l.getStartOffset(h):(u=l.getStartOffset(h),f=l.getEndOffset(h));else if(o&&i&&g&&u!==f){const b=Wr.findPrevBracketInRange(i.reversedRegex,a,d,u,f);if(b)return this._toFoundBracket(o,b)}g=_}if(o&&i&&g&&u!==f){const p=Wr.findPrevBracketInRange(i.reversedRegex,a,d,u,f);if(p)return this._toFoundBracket(o,p)}}return null}findNextBracket(e){var a;const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),((a=this.bracketPairsTree.value)==null?void 0:a.object.getFirstBracketAfter(t))||null;const n=this.textModel.getLineCount();let i=null,o=null,r=null;for(let l=t.lineNumber;l<=n;l++){const c=this.textModel.tokenization.getLineTokens(l),d=c.getCount(),h=this.textModel.getLineContent(l);let u=0,f=0,g=0;if(l===t.lineNumber){u=c.findTokenIndexAtOffset(t.column-1),f=t.column-1,g=t.column-1;const _=c.getLanguageId(u);i!==_&&(i=_,o=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let p=!0;for(;u<d;u++){const _=c.getLanguageId(u);if(i!==_){if(r&&o&&p&&f!==g){const v=Wr.findNextBracketInRange(o.forwardRegex,l,h,f,g);if(v)return this._toFoundBracket(r,v);p=!1}i=_,o=this.languageConfigurationService.getLanguageConfiguration(i).brackets,r=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}const b=!!o&&!ml(c.getStandardTokenType(u));if(b)p||(f=c.getStartOffset(u)),g=c.getEndOffset(u);else if(r&&o&&p&&f!==g){const v=Wr.findNextBracketInRange(o.forwardRegex,l,h,f,g);if(v)return this._toFoundBracket(r,v)}p=b}if(r&&o&&p&&f!==g){const _=Wr.findNextBracketInRange(o.forwardRegex,l,h,f,g);if(_)return this._toFoundBracket(r,_)}}return null}findEnclosingBrackets(e,t){const n=this.textModel.validatePosition(e);if(this.canBuildAST){const f=L.fromPositions(n),g=this.getBracketPairsInRange(L.fromPositions(n,n)).findLast(p=>p.closingBracketRange!==void 0&&p.range.strictContainsRange(f));return g?[g.openingBracketRange,g.closingBracketRange]:null}const i=rR(t),o=this.textModel.getLineCount(),r=new Map;let a=[];const l=(f,g)=>{if(!r.has(f)){const p=[];for(let _=0,b=g?g.brackets.length:0;_<b;_++)p[_]=0;r.set(f,p)}a=r.get(f)};let c=0;const d=(f,g,p,_,b)=>{for(;;){if(i&&++c%100===0&&!i())return Ac.INSTANCE;const v=Wr.findNextBracketInRange(f.forwardRegex,g,p,_,b);if(!v)break;const C=p.substring(v.startColumn-1,v.endColumn-1).toLowerCase(),w=f.textIsBracket[C];if(w&&(w.isOpen(C)?a[w.index]++:w.isClose(C)&&a[w.index]--,a[w.index]===-1))return this._matchFoundBracket(v,w,!1,i);_=v.endColumn-1}return null};let h=null,u=null;for(let f=n.lineNumber;f<=o;f++){const g=this.textModel.tokenization.getLineTokens(f),p=g.getCount(),_=this.textModel.getLineContent(f);let b=0,v=0,C=0;if(f===n.lineNumber){b=g.findTokenIndexAtOffset(n.column-1),v=n.column-1,C=n.column-1;const y=g.getLanguageId(b);h!==y&&(h=y,u=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,u))}let w=!0;for(;b<p;b++){const y=g.getLanguageId(b);if(h!==y){if(u&&w&&v!==C){const x=d(u,f,_,v,C);if(x)return Wy(x);w=!1}h=y,u=this.languageConfigurationService.getLanguageConfiguration(h).brackets,l(h,u)}const k=!!u&&!ml(g.getStandardTokenType(b));if(k)w||(v=g.getStartOffset(b)),C=g.getEndOffset(b);else if(u&&w&&v!==C){const x=d(u,f,_,v,C);if(x)return Wy(x)}w=k}if(u&&w&&v!==C){const y=d(u,f,_,v,C);if(y)return Wy(y)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const i=e.getBracketInfo(n);return i?{range:t,bracketInfo:i}:null}}function tme(s,e){return{object:s,dispose:()=>e==null?void 0:e.dispose()}}function rR(s){if(typeof s>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=s}}const $D=class $D{constructor(){this._searchCanceledBrand=void 0}};$D.INSTANCE=new $D;let Ac=$D;function Wy(s){return s instanceof Ac?null:s}class nme extends F{constructor(e){super(),this.textModel=e,this.colorProvider=new ZG,this.onDidChangeEmitter=new O,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n,i){return i?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(r=>({id:`bracket${r.range.toString()}-${r.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(r,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:r.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new L(1,1,this.textModel.getLineCount(),1),e,t):[]}}class ZG{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}Er((s,e)=>{const t=[OG,FG,WG,BG,HG,VG],n=new ZG;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${s.getColor(mge)}; }`);const i=t.map(o=>s.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){const r=i[o%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(o)} { color: ${r}; }`)}});function By(s){return s.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Ai{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,n,i){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=i}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${By(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${By(this.oldText)}")`:`(replace@${this.oldPosition} "${By(this.oldText)}" with "${By(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const i=t.length;Sa(e,i,n),n+=4;for(let o=0;o<i;o++)$oe(e,t.charCodeAt(o),n),n+=2;return n}static _readString(e,t){const n=ya(e,t);return t+=4,joe(e,t,n)}writeSize(){return 8+Ai._writeStringSize(this.oldText)+Ai._writeStringSize(this.newText)}write(e,t){return Sa(e,this.oldPosition,t),t+=4,Sa(e,this.newPosition,t),t+=4,t=Ai._writeString(e,this.oldText,t),t=Ai._writeString(e,this.newText,t),t}static read(e,t,n){const i=ya(e,t);t+=4;const o=ya(e,t);t+=4;const r=Ai._readString(e,t);t+=Ai._writeStringSize(r);const a=Ai._readString(e,t);return t+=Ai._writeStringSize(a),n.push(new Ai(i,r,o,a)),t}}function ime(s,e){return s===null||s.length===0?e:new bl(s,e).compress()}class bl{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){const[c,d]=bl._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(c),i=d;continue}if(n.newPosition<i.oldPosition){const[c,d]=bl._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(c),n=d;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){const[c,d]=bl._splitPrev(n,i.oldLength);a=c,l=i,n=d,i=this._getCurr(++t)}else{const[c,d]=bl._splitCurr(i,n.newLength);a=n,l=c,n=this._getPrev(++e),i=d}this._result[this._resultLen++]=new Ai(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const o=bl._merge(this._result);return bl._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=bl._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=bl._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Ai(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Ai(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),i=e.newText.substr(t);return[new Ai(e.oldPosition,e.oldText,e.newPosition,n),new Ai(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new Ai(e.oldPosition,n,e.newPosition,e.newText),new Ai(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let n=0,i=e[0];for(let o=1;o<e.length;o++){const r=e[o];i.oldEnd===r.oldPosition?i=new Ai(i.oldPosition,i.oldText+r.oldText,i.newPosition,i.newText+r.newText):(t[n++]=i,i=r)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let n=0;for(let i=0;i<e.length;i++){const o=e[i];o.oldText!==o.newText&&(t[n++]=o)}return t}}function sp(s){return s.toString()}class ci{static create(e,t){const n=e.getAlternativeVersionId(),i=SP(e);return new ci(n,n,i,i,t,t,[])}constructor(e,t,n,i,o,r,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=o,this.afterCursorState=r,this.changes=a}append(e,t,n,i,o){t.length>0&&(this.changes=ime(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(Sa(e,t?t.length:0,n),n+=4,t)for(const i of t)Sa(e,i.selectionStartLineNumber,n),n+=4,Sa(e,i.selectionStartColumn,n),n+=4,Sa(e,i.positionLineNumber,n),n+=4,Sa(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const i=ya(e,t);t+=4;for(let o=0;o<i;o++){const r=ya(e,t);t+=4;const a=ya(e,t);t+=4;const l=ya(e,t);t+=4;const c=ya(e,t);t+=4,n.push(new me(r,a,l,c))}return t}serialize(){let e=10+ci._writeSelectionsSize(this.beforeCursorState)+ci._writeSelectionsSize(this.afterCursorState)+4;for(const i of this.changes)e+=i.writeSize();const t=new Uint8Array(e);let n=0;Sa(t,this.beforeVersionId,n),n+=4,Sa(t,this.afterVersionId,n),n+=4,N8(t,this.beforeEOL,n),n+=1,N8(t,this.afterEOL,n),n+=1,n=ci._writeSelections(t,this.beforeCursorState,n),n=ci._writeSelections(t,this.afterCursorState,n),Sa(t,this.changes.length,n),n+=4;for(const i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const i=ya(t,n);n+=4;const o=ya(t,n);n+=4;const r=E8(t,n);n+=1;const a=E8(t,n);n+=1;const l=[];n=ci._readSelections(t,n,l);const c=[];n=ci._readSelections(t,n,c);const d=ya(t,n);n+=4;const h=[];for(let u=0;u<d;u++)n=Ai.read(t,n,h);return new ci(i,o,r,a,l,c,h)}}class YG{get type(){return 0}get resource(){return Se.isUri(this.model)?this.model:this.model.uri}constructor(e,t,n,i){this.label=e,this.code=t,this.model=n,this._data=ci.create(n,i)}toString(){return(this._data instanceof ci?this._data:ci.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Se.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof ci}append(e,t,n,i,o){this._data instanceof ci&&this._data.append(e,t,n,i,o)}close(){this._data instanceof ci&&(this._data=this._data.serialize())}open(){this._data instanceof ci||(this._data=ci.deserialize(this._data))}undo(){if(Se.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof ci&&(this._data=this._data.serialize());const e=ci.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Se.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof ci&&(this._data=this._data.serialize());const e=ci.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof ci&&(this._data=this._data.serialize()),this._data.byteLength+168}}class sme{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,n){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const i of this._editStackElementsArr){const o=sp(i.resource);this._editStackElementsMap.set(o,i)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=sp(e);return this._editStackElementsMap.has(t)}setModel(e){const t=sp(Se.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=sp(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,o){const r=sp(e.uri);this._editStackElementsMap.get(r).append(e,t,n,i,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=sp(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${xr(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function SP(s){return s.getEOL()===`
`?0:1}function Pc(s){return s?s instanceof YG||s instanceof sme:!1}class Y9{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Pc(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Pc(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const n=this._undoRedoService.getLastElement(this._model.uri);if(Pc(n)&&n.canAppend(this._model))return n;const i=new YG(m("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(i,t),i}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],SP(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,i){const o=this._getOrCreateEditStackElement(e,i),r=this._model.applyEdits(t,!0),a=Y9._computeCursorState(n,r),l=r.map((c,d)=>({index:d,textChange:c.textChange}));return l.sort((c,d)=>c.textChange.oldPosition===d.textChange.oldPosition?c.index-d.index:c.textChange.oldPosition-d.textChange.oldPosition),o.append(this._model,l.map(c=>c.textChange),SP(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Pe(n),null}}}class XG extends F{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function oE(s,e){let t=0,n=0;const i=s.length;for(;n<i;){const o=s.charCodeAt(n);if(o===32)t++;else if(o===9)t=t-t%e+e;else break;n++}return n===i?-1:t}var $f;(function(s){s[s.Disabled=0]="Disabled",s[s.EnabledForActive=1]="EnabledForActive",s[s.Enabled=2]="Enabled"})($f||($f={}));class Nf{constructor(e,t,n,i,o,r){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=i,this.forWrappedLinesAfterColumn=o,this.forWrappedLinesBeforeOrAtColumn=r,e!==-1==(t!==-1))throw new Error}}class RC{constructor(e,t){this.top=e,this.endColumn=t}}class ome extends XG{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return oE(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new _t("Illegal value for lineNumber");const o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(o&&o.offSide);let a=-2,l=-1,c=-2,d=-1;const h=x=>{if(a!==-1&&(a===-2||a>x-1)){a=-1,l=-1;for(let D=x-2;D>=0;D--){const N=this._computeIndentLevel(D);if(N>=0){a=D,l=N;break}}}if(c===-2){c=-1,d=-1;for(let D=x;D<i;D++){const N=this._computeIndentLevel(D);if(N>=0){c=D,d=N;break}}}};let u=-2,f=-1,g=-2,p=-1;const _=x=>{if(u===-2){u=-1,f=-1;for(let D=x-2;D>=0;D--){const N=this._computeIndentLevel(D);if(N>=0){u=D,f=N;break}}}if(g!==-1&&(g===-2||g<x-1)){g=-1,p=-1;for(let D=x;D<i;D++){const N=this._computeIndentLevel(D);if(N>=0){g=D,p=N;break}}}};let b=0,v=!0,C=0,w=!0,y=0,k=0;for(let x=0;v||w;x++){const D=e-x,N=e+x;x>1&&(D<1||D<t)&&(v=!1),x>1&&(N>i||N>n)&&(w=!1),x>5e4&&(v=!1,w=!1);let W=-1;if(v&&D>=1){const z=this._computeIndentLevel(D-1);z>=0?(c=D-1,d=z,W=Math.ceil(z/this.textModel.getOptions().indentSize)):(h(D),W=this._getIndentLevelForWhitespaceLine(r,l,d))}let B=-1;if(w&&N<=i){const z=this._computeIndentLevel(N-1);z>=0?(u=N-1,f=z,B=Math.ceil(z/this.textModel.getOptions().indentSize)):(_(N),B=this._getIndentLevelForWhitespaceLine(r,f,p))}if(x===0){k=W;continue}if(x===1){if(N<=i&&B>=0&&k+1===B){v=!1,b=N,C=N,y=B;continue}if(D>=1&&W>=0&&W-1===k){w=!1,b=D,C=D,y=W;continue}if(b=e,C=e,y=k,y===0)return{startLineNumber:b,endLineNumber:C,indent:y}}v&&(W>=y?b=D:v=!1),w&&(B>=y?C=N:w=!1)}return{startLineNumber:b,endLineNumber:C,indent:y}}getLinesBracketGuides(e,t,n,i){var h;const o=[];for(let u=e;u<=t;u++)o.push([]);const r=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new L(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(n&&a.length>0){const u=(e<=n.lineNumber&&n.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(L.fromPositions(n)).toArray()).filter(f=>L.strictContainsPosition(f.range,n));l=(h=Uw(u,f=>r))==null?void 0:h.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,d=new QG;for(const u of a){if(!u.closingBracketRange)continue;const f=l&&u.range.equalsRange(l);if(!f&&!i.includeInactive)continue;const g=d.getInlineClassName(u.nestingLevel,u.nestingLevelOfEqualBracketType,c)+(i.highlightActive&&f?" "+d.activeClassName:""),p=u.openingBracketRange.getStartPosition(),_=u.closingBracketRange.getStartPosition(),b=i.horizontalGuides===$f.Enabled||i.horizontalGuides===$f.EnabledForActive&&f;if(u.range.startLineNumber===u.range.endLineNumber){b&&o[u.range.startLineNumber-e].push(new Nf(-1,u.openingBracketRange.getEndPosition().column,g,new RC(!1,_.column),-1,-1));continue}const v=this.getVisibleColumnFromPosition(_),C=this.getVisibleColumnFromPosition(u.openingBracketRange.getStartPosition()),w=Math.min(C,v,u.minVisibleColumnIndentation+1);let y=!1;ds(this.textModel.getLineContent(u.closingBracketRange.startLineNumber))<u.closingBracketRange.startColumn-1&&(y=!0);const D=Math.max(p.lineNumber,e),N=Math.min(_.lineNumber,t),W=y?1:0;for(let B=D;B<N+W;B++)o[B-e].push(new Nf(w,-1,g,null,B===p.lineNumber?p.column:-1,B===_.lineNumber?_.column:-1));b&&(p.lineNumber>=e&&C>w&&o[p.lineNumber-e].push(new Nf(w,-1,g,new RC(!1,p.column),-1,-1)),_.lineNumber<=t&&v>w&&o[_.lineNumber-e].push(new Nf(w,-1,g,new RC(!y,_.column),-1,-1)))}for(const u of o)u.sort((f,g)=>f.visibleColumn-g.visibleColumn);return o}getVisibleColumnFromPosition(e){return Gn.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=this.textModel.getOptions(),o=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,r=!!(o&&o.offSide),a=new Array(t-e+1);let l=-2,c=-1,d=-2,h=-1;for(let u=e;u<=t;u++){const f=u-e,g=this._computeIndentLevel(u-1);if(g>=0){l=u-1,c=g,a[f]=Math.ceil(g/i.indentSize);continue}if(l===-2){l=-1,c=-1;for(let p=u-2;p>=0;p--){const _=this._computeIndentLevel(p);if(_>=0){l=p,c=_;break}}}if(d!==-1&&(d===-2||d<u-1)){d=-1,h=-1;for(let p=u;p<n;p++){const _=this._computeIndentLevel(p);if(_>=0){d=p,h=_;break}}}a[f]=this._getIndentLevelForWhitespaceLine(r,c,h)}return a}_getIndentLevelForWhitespaceLine(e,t,n){const i=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/i.indentSize):t===n||e?Math.ceil(n/i.indentSize):1+Math.floor(n/i.indentSize)}}class QG{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class rme{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function ame(s,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){const u=s.charCodeAt(o),f=t.charCodeAt(o);if(u!==f)break}let r=0,a=0;for(let u=o;u<e;u++)s.charCodeAt(u)===32?r++:a++;let l=0,c=0;for(let u=o;u<n;u++)t.charCodeAt(u)===32?l++:c++;if(r>0&&a>0||l>0&&c>0)return;const d=Math.abs(a-c),h=Math.abs(r-l);if(d===0){i.spacesDiff=h,h>0&&0<=l-1&&l-1<s.length&&l<t.length&&t.charCodeAt(l)!==32&&s.charCodeAt(l-1)===32&&s.charCodeAt(s.length-1)===44&&(i.looksLikeAlignment=!0);return}if(h%d===0){i.spacesDiff=h/d;return}}function TH(s,e,t){const n=Math.min(s.getLineCount(),1e4);let i=0,o=0,r="",a=0;const l=[2,4,6,8,3,5,7],c=8,d=[0,0,0,0,0,0,0,0,0],h=new rme;for(let g=1;g<=n;g++){const p=s.getLineLength(g),_=s.getLineContent(g),b=p<=65536;let v=!1,C=0,w=0,y=0;for(let x=0,D=p;x<D;x++){const N=b?_.charCodeAt(x):s.getLineCharCode(g,x);if(N===9)y++;else if(N===32)w++;else{v=!0,C=x;break}}if(!v||(y>0?i++:w>1&&o++,ame(r,a,_,C,h),h.looksLikeAlignment&&!(t&&e===h.spacesDiff)))continue;const k=h.spacesDiff;k<=c&&d[k]++,r=_,a=C}let u=t;i!==o&&(u=i<o);let f=e;if(u){let g=u?0:.1*n;l.forEach(p=>{const _=d[p];_>g&&(g=_,f=p)}),f===4&&d[4]>0&&d[2]>0&&d[2]>=d[4]/2&&(f=2)}return{insertSpaces:u,tabSize:f}}function Bs(s){return(s.metadata&1)>>>0}function qt(s,e){s.metadata=s.metadata&254|e<<0}function Wi(s){return(s.metadata&2)>>>1===1}function zt(s,e){s.metadata=s.metadata&253|(e?1:0)<<1}function JG(s){return(s.metadata&4)>>>2===1}function EH(s,e){s.metadata=s.metadata&251|(e?1:0)<<2}function eZ(s){return(s.metadata&64)>>>6===1}function NH(s,e){s.metadata=s.metadata&191|(e?1:0)<<6}function lme(s){return(s.metadata&24)>>>3}function RH(s,e){s.metadata=s.metadata&231|e<<3}function cme(s){return(s.metadata&32)>>>5===1}function MH(s,e){s.metadata=s.metadata&223|(e?1:0)<<5}class tZ{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,qt(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,EH(this,!1),NH(this,!1),RH(this,1),MH(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,zt(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;const t=this.options.className;EH(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),NH(this,this.options.glyphMarginClassName!==null),RH(this,this.options.stickiness),MH(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const Je=new tZ(null,0,0);Je.parent=Je;Je.left=Je;Je.right=Je;qt(Je,0);class aR{constructor(){this.root=Je,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,o,r){return this.root===Je?[]:_me(this,e,t,n,i,o,r)}search(e,t,n,i){return this.root===Je?[]:pme(this,e,t,n,i)}collectNodesFromOwner(e){return gme(this,e)}collectNodesPostOrder(){return mme(this)}insert(e){AH(this,e),this._normalizeDeltaIfNecessary()}delete(e){PH(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;const o=n.start+i,r=n.end+i;n.setCachedOffsets(o,r,t)}acceptReplace(e,t,n,i){const o=ume(this,e,e+t);for(let r=0,a=o.length;r<a;r++){const l=o[r];PH(this,l)}this._normalizeDeltaIfNecessary(),fme(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let r=0,a=o.length;r<a;r++){const l=o[r];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,hme(l,e,e+t,n,i),l.maxEnd=l.end,AH(this,l)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,dme(this))}}function dme(s){let e=s.root,t=0;for(;e!==Je;){if(e.left!==Je&&!Wi(e.left)){e=e.left;continue}if(e.right!==Je&&!Wi(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,fu(e),zt(e,!0),zt(e.left,!1),zt(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}zt(s.root,!1)}function op(s,e,t,n){return s<t?!0:s>t||n===1?!1:n===2?!0:e}function hme(s,e,t,n,i){const o=lme(s),r=o===0||o===2,a=o===1||o===2,l=t-e,c=n,d=Math.min(l,c),h=s.start;let u=!1;const f=s.end;let g=!1;e<=h&&f<=t&&cme(s)&&(s.start=e,u=!0,s.end=e,g=!0);{const _=i?1:l>0?2:0;!u&&op(h,r,e,_)&&(u=!0),!g&&op(f,a,e,_)&&(g=!0)}if(d>0&&!i){const _=l>c?2:0;!u&&op(h,r,e+d,_)&&(u=!0),!g&&op(f,a,e+d,_)&&(g=!0)}{const _=i?1:0;!u&&op(h,r,t,_)&&(s.start=e+c,u=!0),!g&&op(f,a,t,_)&&(s.end=e+c,g=!0)}const p=c-l;u||(s.start=Math.max(0,h+p)),g||(s.end=Math.max(0,f+p)),s.start>s.end&&(s.end=s.start)}function ume(s,e,t){let n=s.root,i=0,o=0,r=0,a=0;const l=[];let c=0;for(;n!==Je;){if(Wi(n)){zt(n.left,!1),zt(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!Wi(n.left)){if(o=i+n.maxEnd,o<e){zt(n,!0);continue}if(n.left!==Je){n=n.left;continue}}if(r=i+n.start,r>t){zt(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(r,a,0),l[c++]=n),zt(n,!0),n.right!==Je&&!Wi(n.right)){i+=n.delta,n=n.right;continue}}return zt(s.root,!1),l}function fme(s,e,t,n){let i=s.root,o=0,r=0,a=0;const l=n-(t-e);for(;i!==Je;){if(Wi(i)){zt(i.left,!1),zt(i.right,!1),i===i.parent.right&&(o-=i.parent.delta),fu(i),i=i.parent;continue}if(!Wi(i.left)){if(r=o+i.maxEnd,r<e){zt(i,!0);continue}if(i.left!==Je){i=i.left;continue}}if(a=o+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(s.requestNormalizeDelta=!0),zt(i,!0);continue}if(zt(i,!0),i.right!==Je&&!Wi(i.right)){o+=i.delta,i=i.right;continue}}zt(s.root,!1)}function gme(s,e){let t=s.root;const n=[];let i=0;for(;t!==Je;){if(Wi(t)){zt(t.left,!1),zt(t.right,!1),t=t.parent;continue}if(t.left!==Je&&!Wi(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),zt(t,!0),t.right!==Je&&!Wi(t.right)){t=t.right;continue}}return zt(s.root,!1),n}function mme(s){let e=s.root;const t=[];let n=0;for(;e!==Je;){if(Wi(e)){zt(e.left,!1),zt(e.right,!1),e=e.parent;continue}if(e.left!==Je&&!Wi(e.left)){e=e.left;continue}if(e.right!==Je&&!Wi(e.right)){e=e.right;continue}t[n++]=e,zt(e,!0)}return zt(s.root,!1),t}function pme(s,e,t,n,i){let o=s.root,r=0,a=0,l=0;const c=[];let d=0;for(;o!==Je;){if(Wi(o)){zt(o.left,!1),zt(o.right,!1),o===o.parent.right&&(r-=o.parent.delta),o=o.parent;continue}if(o.left!==Je&&!Wi(o.left)){o=o.left;continue}a=r+o.start,l=r+o.end,o.setCachedOffsets(a,l,n);let h=!0;if(e&&o.ownerId&&o.ownerId!==e&&(h=!1),t&&JG(o)&&(h=!1),i&&!eZ(o)&&(h=!1),h&&(c[d++]=o),zt(o,!0),o.right!==Je&&!Wi(o.right)){r+=o.delta,o=o.right;continue}}return zt(s.root,!1),c}function _me(s,e,t,n,i,o,r){let a=s.root,l=0,c=0,d=0,h=0;const u=[];let f=0;for(;a!==Je;){if(Wi(a)){zt(a.left,!1),zt(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!Wi(a.left)){if(c=l+a.maxEnd,c<e){zt(a,!0);continue}if(a.left!==Je){a=a.left;continue}}if(d=l+a.start,d>t){zt(a,!0);continue}if(h=l+a.end,h>=e){a.setCachedOffsets(d,h,o);let g=!0;n&&a.ownerId&&a.ownerId!==n&&(g=!1),i&&JG(a)&&(g=!1),r&&!eZ(a)&&(g=!1),g&&(u[f++]=a)}if(zt(a,!0),a.right!==Je&&!Wi(a.right)){l+=a.delta,a=a.right;continue}}return zt(s.root,!1),u}function AH(s,e){if(s.root===Je)return e.parent=Je,e.left=Je,e.right=Je,qt(e,0),s.root=e,s.root;bme(s,e),Zd(e.parent);let t=e;for(;t!==s.root&&Bs(t.parent)===1;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;Bs(n)===1?(qt(t.parent,0),qt(n,0),qt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,MC(s,t)),qt(t.parent,0),qt(t.parent.parent,1),AC(s,t.parent.parent))}else{const n=t.parent.parent.left;Bs(n)===1?(qt(t.parent,0),qt(n,0),qt(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,AC(s,t)),qt(t.parent,0),qt(t.parent.parent,1),MC(s,t.parent.parent))}return qt(s.root,0),e}function bme(s,e){let t=0,n=s.root;const i=e.start,o=e.end;for(;;)if(Cme(i,o,n.start+t,n.end+t)<0)if(n.left===Je){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===Je){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=Je,e.right=Je,qt(e,1)}function PH(s,e){let t,n;if(e.left===Je?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Je?(t=e.left,n=e):(n=vme(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(s.requestNormalizeDelta=!0)),n===s.root){s.root=t,qt(t,0),e.detach(),lR(),fu(t),s.root.parent=Je;return}const i=Bs(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,qt(n,Bs(e)),e===s.root?s.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Je&&(n.left.parent=n),n.right!==Je&&(n.right.parent=n)),e.detach(),i){Zd(t.parent),n!==e&&(Zd(n),Zd(n.parent)),lR();return}Zd(t),Zd(t.parent),n!==e&&(Zd(n),Zd(n.parent));let o;for(;t!==s.root&&Bs(t)===0;)t===t.parent.left?(o=t.parent.right,Bs(o)===1&&(qt(o,0),qt(t.parent,1),MC(s,t.parent),o=t.parent.right),Bs(o.left)===0&&Bs(o.right)===0?(qt(o,1),t=t.parent):(Bs(o.right)===0&&(qt(o.left,0),qt(o,1),AC(s,o),o=t.parent.right),qt(o,Bs(t.parent)),qt(t.parent,0),qt(o.right,0),MC(s,t.parent),t=s.root)):(o=t.parent.left,Bs(o)===1&&(qt(o,0),qt(t.parent,1),AC(s,t.parent),o=t.parent.left),Bs(o.left)===0&&Bs(o.right)===0?(qt(o,1),t=t.parent):(Bs(o.left)===0&&(qt(o.right,0),qt(o,1),MC(s,o),o=t.parent.left),qt(o,Bs(t.parent)),qt(t.parent,0),qt(o.left,0),AC(s,t.parent),t=s.root));qt(t,0),lR()}function vme(s){for(;s.left!==Je;)s=s.left;return s}function lR(){Je.parent=Je,Je.delta=0,Je.start=0,Je.end=0}function MC(s,e){const t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(s.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Je&&(t.left.parent=e),t.parent=e.parent,e.parent===Je?s.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,fu(e),fu(t)}function AC(s,e){const t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(s.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Je&&(t.right.parent=e),t.parent=e.parent,e.parent===Je?s.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,fu(e),fu(t)}function nZ(s){let e=s.end;if(s.left!==Je){const t=s.left.maxEnd;t>e&&(e=t)}if(s.right!==Je){const t=s.right.maxEnd+s.delta;t>e&&(e=t)}return e}function fu(s){s.maxEnd=nZ(s)}function Zd(s){for(;s!==Je;){const e=nZ(s);if(s.maxEnd===e)return;s.maxEnd=e,s=s.parent}}function Cme(s,e,t,n){return s===t?e-n:s-t}class kP{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==$e)return X9(this.right);let e=this;for(;e.parent!==$e&&e.parent.left!==e;)e=e.parent;return e.parent===$e?$e:e.parent}prev(){if(this.left!==$e)return iZ(this.left);let e=this;for(;e.parent!==$e&&e.parent.right!==e;)e=e.parent;return e.parent===$e?$e:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const $e=new kP(null,0);$e.parent=$e;$e.left=$e;$e.right=$e;$e.color=0;function X9(s){for(;s.left!==$e;)s=s.left;return s}function iZ(s){for(;s.right!==$e;)s=s.right;return s}function Q9(s){return s===$e?0:s.size_left+s.piece.length+Q9(s.right)}function J9(s){return s===$e?0:s.lf_left+s.piece.lineFeedCnt+J9(s.right)}function cR(){$e.parent=$e}function PC(s,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==$e&&(t.left.parent=e),t.parent=e.parent,e.parent===$e?s.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function OC(s,e){const t=e.left;e.left=t.right,t.right!==$e&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===$e?s.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function Hy(s,e){let t,n;if(e.left===$e?(n=e,t=n.right):e.right===$e?(n=e,t=n.left):(n=X9(e.right),t=n.right),n===s.root){s.root=t,t.color=0,e.detach(),cR(),s.root.parent=$e;return}const i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,aC(s,t)):(n.parent===e?t.parent=n:t.parent=n.parent,aC(s,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===s.root?s.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==$e&&(n.left.parent=n),n.right!==$e&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,aC(s,n)),e.detach(),t.parent.left===t){const r=Q9(t),a=J9(t);if(r!==t.parent.size_left||a!==t.parent.lf_left){const l=r-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=r,t.parent.lf_left=a,wc(s,t.parent,l,c)}}if(aC(s,t.parent),i){cR();return}let o;for(;t!==s.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,PC(s,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,OC(s,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,PC(s,t.parent),t=s.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,OC(s,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,PC(s,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,OC(s,t.parent),t=s.root));t.color=0,cR()}function OH(s,e){for(aC(s,e);e!==s.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,PC(s,e)),e.parent.color=0,e.parent.parent.color=1,OC(s,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,OC(s,e)),e.parent.color=0,e.parent.parent.color=1,PC(s,e.parent.parent))}s.root.color=0}function wc(s,e,t,n){for(;e!==s.root&&e!==$e;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function aC(s,e){let t=0,n=0;if(e!==s.root){for(;e!==s.root&&e===e.parent.right;)e=e.parent;if(e!==s.root)for(e=e.parent,t=Q9(e.left)-e.size_left,n=J9(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==s.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}const gc=65535;function sZ(s){let e;return s[s.length-1]<65536?e=new Uint16Array(s.length):e=new Uint32Array(s.length),e.set(s,0),e}class wme{constructor(e,t,n,i,o){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=o}}function yc(s,e=!0){const t=[0];let n=1;for(let i=0,o=s.length;i<o;i++){const r=s.charCodeAt(i);r===13?i+1<o&&s.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:r===10&&(t[n++]=i+1)}return e?sZ(t):t}function yme(s,e){s.length=0,s[0]=0;let t=1,n=0,i=0,o=0,r=!0;for(let l=0,c=e.length;l<c;l++){const d=e.charCodeAt(l);d===13?l+1<c&&e.charCodeAt(l+1)===10?(o++,s[t++]=l+2,l++):(n++,s[t++]=l+1):d===10?(i++,s[t++]=l+1):r&&d!==9&&(d<32||d>126)&&(r=!1)}const a=new wme(sZ(s),n,i,o,r);return s.length=0,a}class io{constructor(e,t,n,i,o){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=o}}class mf{constructor(e,t){this.buffer=e,this.lineStarts=t}}class Sme{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==$e&&e.iterate(e.root,n=>(n!==$e&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class kme{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let i=0;i<n.length;i++){const o=n[i];if(o.node.parent===null||o.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){const i=[];for(const o of n)o!==null&&i.push(o);this._cache=i}}}class Lme{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new mf("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=$e,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let o=0,r=e.length;o<r;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=yc(e[o].buffer));const a=new io(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),i=this.rbInsertRight(i,a)}this._searchCache=new kme(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=gc,n=t-Math.floor(t/3),i=n*2;let o="",r=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),d=c.length;if(r<=n||r+d<i)return o+=c,r+=d,!0;const h=o.replace(/\r\n|\r|\n/g,e);return a.push(new mf(h,yc(h))),o=c,r=d,!0}),r>0){const l=o.replace(/\r\n|\r|\n/g,e);a.push(new mf(l,yc(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new Sme(this,e)}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==$e;)if(i.left!==$e&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;const o=this.getAccumulatedValue(i,e-i.lf_left-2);return n+=o+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const i=e;for(;t!==$e;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const o=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+o.index,o.index===0){const r=this.getOffsetAt(n+1,1),a=i-r;return new A(n+1,a+1)}return new A(n+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===$e){const o=this.getOffsetAt(n+1,1),r=i-e-o;return new A(n+1,r+1)}else t=t.right;return new A(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node;const i=this._buffers[n.piece.bufferIndex].buffer,o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let r=i.substring(o+e.remainder,o+n.piece.length);for(n=n.next();n!==$e;){const a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){r+=a.substring(l,l+t.remainder);break}else r+=a.substr(l,n.piece.length);n=n.next()}return r}getLinesContent(){const e=[];let t=0,n="",i=!1;return this.iterate(this.root,o=>{if(o===$e)return!0;const r=o.piece;let a=r.length;if(a===0)return!0;const l=this._buffers[r.bufferIndex].buffer,c=this._buffers[r.bufferIndex].lineStarts,d=r.start.line,h=r.end.line;let u=c[d]+r.start.column;if(i&&(l.charCodeAt(u)===10&&(u++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(d===h)return!this._EOLNormalized&&l.charCodeAt(u+a-1)===13?(i=!0,n+=l.substr(u,a-1)):n+=l.substr(u,a),!0;n+=this._EOLNormalized?l.substring(u,Math.max(u,c[d+1]-this._EOLLength)):l.substring(u,c[d+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let f=d+1;f<h;f++)n=this._EOLNormalized?l.substring(c[f],c[f+1]-this._EOLLength):l.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[h]+r.end.column-1)===13?(i=!0,r.end.column===0?t--:n=l.substr(c[h],r.end.column-1)):n=l.substr(c[h],r.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{const t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,i,o,r,a,l,c,d,h){const u=this._buffers[e.piece.bufferIndex],f=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,o),p=this.offsetInBuffer(e.piece.bufferIndex,r);let _;const b={line:0,column:0};let v,C;t._wordSeparators?(v=u.buffer.substring(g,p),C=w=>w+g,t.reset(0)):(v=u.buffer,C=w=>w,t.reset(g));do if(_=t.next(v),_){if(C(_.index)>=p)return d;this.positionInBuffer(e,C(_.index)-f,b);const w=this.getLineFeedCnt(e.piece.bufferIndex,o,b),y=b.line===o.line?b.column-o.column+i:b.column+1,k=y+_[0].length;if(h[d++]=cf(new L(n+w,y,n+w,k),_,l),C(_.index)+_[0].length>=p||d>=c)return d}while(_);return d}findMatchesLineByLine(e,t,n,i){const o=[];let r=0;const a=new Mp(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let d=this.positionInBuffer(l.node,l.remainder);const h=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,d,h,t,n,i,r,o),o;let u=e.startLineNumber,f=l.node;for(;f!==c.node;){const p=this.getLineFeedCnt(f.piece.bufferIndex,d,f.piece.end);if(p>=1){const b=this._buffers[f.piece.bufferIndex].lineStarts,v=this.offsetInBuffer(f.piece.bufferIndex,f.piece.start),C=b[d.line+p],w=u===e.startLineNumber?e.startColumn:1;if(r=this.findMatchesInNode(f,a,u,w,d,this.positionInBuffer(f,C-v),t,n,i,r,o),r>=i)return o;u+=p}const _=u===e.startLineNumber?e.startColumn-1:0;if(u===e.endLineNumber){const b=this.getLineContent(u).substring(_,e.endColumn-1);return r=this._findMatchesInLine(t,a,b,e.endLineNumber,_,r,o,n,i),o}if(r=this._findMatchesInLine(t,a,this.getLineContent(u).substr(_),u,_,r,o,n,i),r>=i)return o;u++,l=this.nodeAt2(u,1),f=l.node,d=this.positionInBuffer(l.node,l.remainder)}if(u===e.endLineNumber){const p=u===e.startLineNumber?e.startColumn-1:0,_=this.getLineContent(u).substring(p,e.endColumn-1);return r=this._findMatchesInLine(t,a,_,e.endLineNumber,p,r,o,n,i),o}const g=u===e.startLineNumber?e.startColumn:1;return r=this.findMatchesInNode(c.node,a,u,g,d,h,t,n,i,r,o),o}_findMatchesInLine(e,t,n,i,o,r,a,l,c){const d=e.wordSeparators;if(!l&&e.simpleSearch){const u=e.simpleSearch,f=u.length,g=n.length;let p=-f;for(;(p=n.indexOf(u,p+f))!==-1;)if((!d||e9(d,n,g,p,f))&&(a[r++]=new $w(new L(i,p+1+o,i,p+1+f+o),null),r>=c))return r;return r}let h;t.reset(0);do if(h=t.next(n),h&&(a[r++]=cf(new L(i,h.index+1+o,i,h.index+1+h[0].length+o),h,l),r>=c))return r;while(h);return r}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==$e){const{node:i,remainder:o,nodeStartOffset:r}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,c=this.positionInBuffer(i,o);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&r+a.length===e&&t.length<gc){this.appendToNode(i,t),this.computeBufferMetadata();return}if(r===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(r+i.piece.length>e){const d=[];let h=new io(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,o)===10){const p={line:h.start.line+1,column:0};h=new io(h.bufferIndex,p,h.end,this.getLineFeedCnt(h.bufferIndex,p,h.end),h.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,o-1)===13){const p=this.positionInBuffer(i,o-1);this.deleteNodeTail(i,p),t="\r"+t,i.piece.length===0&&d.push(i)}else this.deleteNodeTail(i,c);else this.deleteNodeTail(i,c);const u=this.createNewPieces(t);h.length>0&&this.rbInsertRight(i,h);let f=i;for(let g=0;g<u.length;g++)f=this.rbInsertRight(f,u[g]);this.deleteNodes(d)}else this.insertContentToNodeRight(t,i)}else{const i=this.createNewPieces(t);let o=this.rbInsertLeft(null,i[0]);for(let r=1;r<i.length;r++)o=this.rbInsertRight(o,i[r])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===$e)return;const n=this.nodeAt(e),i=this.nodeAt(e+t),o=n.node,r=i.node;if(o===r){const u=this.positionInBuffer(o,n.remainder),f=this.positionInBuffer(o,i.remainder);if(n.nodeStartOffset===e){if(t===o.piece.length){const g=o.next();Hy(this,o),this.validateCRLFWithPrevNode(g),this.computeBufferMetadata();return}this.deleteNodeHead(o,f),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(n.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,u),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,u,f),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(o,n.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),o.piece.length===0&&a.push(o);const c=this.positionInBuffer(r,i.remainder);this.deleteNodeHead(r,c),r.piece.length===0&&a.push(r);const d=o.next();for(let u=d;u!==$e&&u!==r;u=u.next())a.push(u);const h=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(h),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const r=t.piece,a={line:r.start.line+1,column:0},l=new io(r.bufferIndex,a,r.end,this.getLineFeedCnt(r.bufferIndex,a,r.end),r.length-1);t.piece=l,e+=`
`,wc(this,t,-1,-1),t.piece.length===0&&n.push(t)}const i=this.createNewPieces(e);let o=this.rbInsertLeft(t,i[i.length-1]);for(let r=i.length-2;r>=0;r--)o=this.rbInsertLeft(o,i[r]);this.validateCRLFWithPrevNode(o),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]);let o=i;for(let r=1;r<n.length;r++)o=this.rbInsertRight(o,n[r]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){const i=e.piece,o=e.piece.bufferIndex,r=this._buffers[o].lineStarts,l=r[i.start.line]+i.start.column+t;let c=i.start.line,d=i.end.line,h=0,u=0,f=0;for(;c<=d&&(h=c+(d-c)/2|0,f=r[h],h!==d);)if(u=r[h+1],l<f)d=h-1;else if(l>=u)c=h+1;else break;return n?(n.line=h,n.column=l-f,null):{line:h,column:l-f}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;const i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;const o=i[n.line+1],r=i[n.line]+n.column;if(o>r+1)return n.line-t.line;const a=r-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)Hy(this,e[t])}createNewPieces(e){if(e.length>gc){const d=[];for(;e.length>gc;){const u=e.charCodeAt(gc-1);let f;u===13||u>=55296&&u<=56319?(f=e.substring(0,gc-1),e=e.substring(gc-1)):(f=e.substring(0,gc),e=e.substring(gc));const g=yc(f);d.push(new io(this._buffers.length,{line:0,column:0},{line:g.length-1,column:f.length-g[g.length-1]},g.length-1,f.length)),this._buffers.push(new mf(f,g))}const h=yc(e);return d.push(new io(this._buffers.length,{line:0,column:0},{line:h.length-1,column:e.length-h[h.length-1]},h.length-1,e.length)),this._buffers.push(new mf(e,h)),d}let t=this._buffers[0].buffer.length;const n=yc(e,!1);let i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let d=0;d<n.length;d++)n[d]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let d=0;d<n.length;d++)n[d]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const o=this._buffers[0].buffer.length,r=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[r],l={line:r,column:a},c=new io(0,i,l,this.getLineFeedCnt(0,i,l),o-t);return this._lastChangeBufferPos=l,[c]}getLineRawContent(e,t=0){let n=this.root,i="";const o=this._searchCache.get2(e);if(o){n=o.node;const r=this.getAccumulatedValue(n,e-o.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(o.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+r,l+n.piece.length);else{const c=this.getAccumulatedValue(n,e-o.nodeStartLineNumber);return a.substring(l+r,l+c-t)}}else{let r=0;const a=e;for(;n!==$e;)if(n.left!==$e&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),d=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:r,nodeStartLineNumber:a-(e-1-n.lf_left)}),d.substring(h+l,h+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,d=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=c.substring(d+l,d+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==$e;){const r=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=r.substring(l,l+a-t),i}else{const a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=r.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==$e;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,i=this.positionInBuffer(e,t),o=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const r=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(r!==o)return{index:r,remainder:0}}return{index:o,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,o=n.start.line+t+1;return o>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[o]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,i=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.end),r=t,a=this.offsetInBuffer(n.bufferIndex,r),l=this.getLineFeedCnt(n.bufferIndex,n.start,r),c=l-i,d=a-o,h=n.length+d;e.piece=new io(n.bufferIndex,n.start,r,l,h),wc(this,e,d,c)}deleteNodeHead(e,t){const n=e.piece,i=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.start),r=t,a=this.getLineFeedCnt(n.bufferIndex,r,n.end),l=this.offsetInBuffer(n.bufferIndex,r),c=a-i,d=o-l,h=n.length+d;e.piece=new io(n.bufferIndex,r,n.end,a,h),wc(this,e,d,c)}shrinkNode(e,t,n){const i=e.piece,o=i.start,r=i.end,a=i.length,l=i.lineFeedCnt,c=t,d=this.getLineFeedCnt(i.bufferIndex,i.start,c),h=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,o);e.piece=new io(i.bufferIndex,i.start,c,d,h),wc(this,e,h-a,d-l);const u=new io(i.bufferIndex,n,r,this.getLineFeedCnt(i.bufferIndex,n,r),this.offsetInBuffer(i.bufferIndex,r)-this.offsetInBuffer(i.bufferIndex,n)),f=this.rbInsertRight(e,u);this.validateCRLFWithPrevNode(f)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const o=yc(t,!1);for(let f=0;f<o.length;f++)o[f]+=i;if(n){const f=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-f}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));const r=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[r],l={line:r,column:a},c=e.piece.length+t.length,d=e.piece.lineFeedCnt,h=this.getLineFeedCnt(0,e.piece.start,l),u=h-d;e.piece=new io(e.piece.bufferIndex,e.piece.start,l,h,c),this._lastChangeBufferPos=l,wc(this,e,t.length,u)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==$e;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;const o={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==$e;)if(n.left!==$e&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const o=this.getAccumulatedValue(n,e-n.lf_left-2),r=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(o+t-1,r),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const o=this.getAccumulatedValue(n,e-n.lf_left-2);if(o+t-1<=n.piece.length)return{node:n,remainder:o+t-1,nodeStartOffset:i};t-=n.piece.length-o;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==$e;){if(n.piece.lineFeedCnt>0){const o=this.getAccumulatedValue(n,0),r=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,o),nodeStartOffset:r}}else if(n.piece.length>=t-1){const o=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:o}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===$e||e.piece.lineFeedCnt===0)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,o=n[i]+t.start.column;return i===n.length-1||n[i+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===$e||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],i=this._buffers[e.piece.bufferIndex].lineStarts;let o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};const r=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new io(e.piece.bufferIndex,e.piece.start,o,a,r),wc(this,e,-1,-1),e.piece.length===0&&n.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,d=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new io(t.piece.bufferIndex,l,t.piece.end,d,c),wc(this,t,-1,-1),t.piece.length===0&&n.push(t);const h=this.createNewPieces(`\r
`);this.rbInsertRight(e,h[0]);for(let u=0;u<n.length;u++)Hy(this,n[u])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)Hy(this,n);else{const i=n.piece,o={line:i.start.line+1,column:0},r=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,o,i.end);n.piece=new io(i.bufferIndex,o,i.end,a,r),wc(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===$e)return t($e);const n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===$e)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),o=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,o)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){const n=new kP(t,1);if(n.left=$e,n.right=$e,n.parent=$e,n.size_left=0,n.lf_left=0,this.root===$e)this.root=n,n.color=0;else if(e.right===$e)e.right=n,n.parent=e;else{const o=X9(e.right);o.left=n,n.parent=o}return OH(this,n),n}rbInsertLeft(e,t){const n=new kP(t,1);if(n.left=$e,n.right=$e,n.parent=$e,n.size_left=0,n.lf_left=0,this.root===$e)this.root=n,n.color=0;else if(e.left===$e)e.left=n,n.parent=e;else{const i=iZ(e.left);i.right=n,n.parent=i}return OH(this,n),n}}class T_ extends F{constructor(e,t,n,i,o,r,a){super(),this._onDidChangeContent=this._register(new O),this._BOM=t,this._mightContainNonBasicASCII=!r,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=o,this._pieceTree=new Lme(e,n,a)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,i=this.getPositionAt(e),o=this.getPositionAt(n);return new L(i.lineNumber,i.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn),i=this.getOffsetAt(e.endLineNumber,e.endColumn);let o=0;const r=this._getEndOfLine(t),a=this.getEOL();if(r.length!==a.length){const l=r.length-a.length,c=e.endLineNumber-e.startLineNumber;o=l*c}return i-n+o}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const i=e.startLineNumber,o=e.endLineNumber;for(let r=i;r<=o;r++){const a=this.getLineContent(r),l=r===i?e.startColumn-1:0,c=r===o?e.endColumn-1:a.length;for(let d=l;d<c;d++)ni(a.charCodeAt(d))?(n=n+1,d=d+1):n=n+1}return n+=this._getEndOfLine(t).length*(o-i),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=ds(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Ba(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,r=this._mightContainNonBasicASCII,a=!0,l=[];for(let p=0;p<e.length;p++){const _=e[p];a&&_._isTracked&&(a=!1);const b=_.range;if(_.text){let k=!0;r||(k=!p0(_.text),r=k),!i&&k&&(i=ob(_.text)),!o&&k&&(o=Qj(_.text))}let v="",C=0,w=0,y=0;if(_.text){let k;[C,w,y,k]=du(_.text);const x=this.getEOL();k===0||k===(x===`\r
`?2:1)?v=_.text:v=_.text.replace(/\r\n|\r|\n/g,x)}l[p]={sortIndex:p,identifier:_.identifier||null,range:b,rangeOffset:this.getOffsetAt(b.startLineNumber,b.startColumn),rangeLength:this.getValueLengthInRange(b),text:v,eolCount:C,firstLineLength:w,lastLineLength:y,forceMoveMarkers:!!_.forceMoveMarkers,isAutoWhitespaceEdit:_.isAutoWhitespaceEdit||!1}}l.sort(T_._sortOpsAscending);let c=!1;for(let p=0,_=l.length-1;p<_;p++){const b=l[p].range.getEndPosition(),v=l[p+1].range.getStartPosition();if(v.isBeforeOrEqual(b)){if(v.isBefore(b))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const d=n||t?T_._getInverseEditRanges(l):[],h=[];if(t)for(let p=0;p<l.length;p++){const _=l[p],b=d[p];if(_.isAutoWhitespaceEdit&&_.range.isEmpty())for(let v=b.startLineNumber;v<=b.endLineNumber;v++){let C="";v===b.startLineNumber&&(C=this.getLineContent(_.range.startLineNumber),ds(C)!==-1)||h.push({lineNumber:v,oldContent:C})}}let u=null;if(n){let p=0;u=[];for(let _=0;_<l.length;_++){const b=l[_],v=d[_],C=this.getValueInRange(b.range),w=b.rangeOffset+p;p+=b.text.length-C.length,u[_]={sortIndex:b.sortIndex,identifier:b.identifier,range:v,text:C,textChange:new Ai(b.rangeOffset,C,w,b.text)}}c||u.sort((_,b)=>_.sortIndex-b.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=r;const f=this._doApplyEdits(l);let g=null;if(t&&h.length>0){h.sort((p,_)=>_.lineNumber-p.lineNumber),g=[];for(let p=0,_=h.length;p<_;p++){const b=h[p].lineNumber;if(p>0&&h[p-1].lineNumber===b)continue;const v=h[p].oldContent,C=this.getLineContent(b);C.length===0||C===v||ds(C)!==-1||g.push(b)}}return this._onDidChangeContent.fire(),new Ore(u,f,g)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,i=e[e.length-1].range,o=new L(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn);let r=n.startLineNumber,a=n.startColumn;const l=[];for(let f=0,g=e.length;f<g;f++){const p=e[f],_=p.range;t=t||p.forceMoveMarkers,l.push(this.getValueInRange(new L(r,a,_.startLineNumber,_.startColumn))),p.text.length>0&&l.push(p.text),r=_.endLineNumber,a=_.endColumn}const c=l.join(""),[d,h,u]=du(c);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:c,eolCount:d,firstLineLength:h,lastLineLength:u,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(T_._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const i=e[n],o=i.range.startLineNumber,r=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(o===a&&r===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);const c=new L(o,r,a,l);t.push({range:c,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}static _getInverseEditRanges(e){const t=[];let n=0,i=0,o=null;for(let r=0,a=e.length;r<a;r++){const l=e[r];let c,d;o?o.range.endLineNumber===l.range.startLineNumber?(c=n,d=i+(l.range.startColumn-o.range.endColumn)):(c=n+(l.range.startLineNumber-o.range.endLineNumber),d=l.range.startColumn):(c=l.range.startLineNumber,d=l.range.startColumn);let h;if(l.text.length>0){const u=l.eolCount+1;u===1?h=new L(c,d,c,d+l.firstLineLength):h=new L(c,d,c+u-1,l.lastLineLength+1)}else h=new L(c,d,c,d);n=h.endLineNumber,i=h.endColumn,t.push(h),o=l}return t}static _sortOpsAscending(e,t){const n=L.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=L.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class xme{constructor(e,t,n,i,o,r,a,l,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=o,this._containsRTL=r,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,r=n.length;o<r;o++){const a=n[o].buffer.replace(/\r\n|\r|\n/g,t),l=yc(a);n[o]=new mf(a,l)}const i=new T_(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}}class oZ{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&B3(e)&&(this.BOM=Sie,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=yme(this._tmpLineStarts,e);this.chunks.push(new mf(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=ob(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Qj(e)))}finish(e=!0){return this._finish(),new xme(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=yc(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class Dme{constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}const i=this._store.slice(0,e),o=this._store.slice(e+t),r=Ime(n,this._default);this._store=i.concat(r,o)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const n=[];for(let i=0;i<t;i++)n[i]=this._default;this._store=cT(this._store,e,n)}}function Ime(s,e){const t=[];for(let n=0;n<s;n++)t[n]=e;return t}class Tme{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class LP{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new Tme(e,[t]))}finalize(){return this._tokens}}class Eme{constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new xP(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class Nme extends Eme{constructor(e,t,n,i){super(e,t),this._textModel=n,this._languageIdCodec=i}updateTokensUntilLine(e,t){const n=this._textModel.getLanguageId();for(;;){const i=this.getFirstInvalidLine();if(!i||i.lineNumber>t)break;const o=this._textModel.getLineContent(i.lineNumber),r=Fv(this._languageIdCodec,n,this.tokenizationSupport,o,!0,i.startState);e.add(i.lineNumber,r.tokens),this.store.setEndState(i.lineNumber,r.endState)}}getTokenTypeIfInsertingCharacter(e,t){const n=this.getStartState(e.lineNumber);if(!n)return 0;const i=this._textModel.getLanguageId(),o=this._textModel.getLineContent(e.lineNumber),r=o.substring(0,e.column-1)+t+o.substring(e.column-1),a=Fv(this._languageIdCodec,i,this.tokenizationSupport,r,!0,n),l=new _i(a.tokens,r,this._languageIdCodec);if(l.getCount()===0)return 0;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLineWithEdit(e,t,n){const i=e.lineNumber,o=e.column,r=this.getStartState(i);if(!r)return null;const a=this._textModel.getLineContent(i),l=a.substring(0,o-1)+n+a.substring(o-1+t),c=this._textModel.getLanguageIdAtPosition(i,0),d=Fv(this._languageIdCodec,c,this.tokenizationSupport,l,!0,r);return new _i(d.tokens,l,this._languageIdCodec)}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<2048}tokenizeHeuristically(e,t,n){if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,n),{heuristicTokens:!1};let i=this.guessStartState(t);const o=this._textModel.getLanguageId();for(let r=t;r<=n;r++){const a=this._textModel.getLineContent(r),l=Fv(this._languageIdCodec,o,this.tokenizationSupport,a,!0,i);e.add(r,l.tokens),i=l.endState}return{heuristicTokens:!0}}guessStartState(e){let t=this._textModel.getLineFirstNonWhitespaceColumn(e);const n=[];let i=null;for(let a=e-1;t>1&&a>=1;a--){const l=this._textModel.getLineFirstNonWhitespaceColumn(a);if(l!==0&&l<t&&(n.push(this._textModel.getLineContent(a)),t=l,i=this.getStartState(a),i))break}i||(i=this.tokenizationSupport.getInitialState()),n.reverse();const o=this._textModel.getLanguageId();let r=i;for(const a of n)r=Fv(this._languageIdCodec,o,this.tokenizationSupport,a,!1,r).endState;return r}}class xP{constructor(e){this.lineCount=e,this._tokenizationStateStore=new Rme,this._invalidEndStatesLineNumbers=new Mme,this._invalidEndStatesLineNumbers.addRange(new Ye(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new _t("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Ye(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Ye(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[n]=du(t.text);this.acceptChange(new ze(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Ye(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const n=this.getStartState(t,e);if(!n)throw new _t("Start state must be defined");return{lineNumber:t,startState:n}}}class Rme{constructor(){this._lineEndStates=new Dme(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}}class Mme{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(e){const t=this._ranges.findIndex(n=>n.contains(e));if(t!==-1){const n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Ye(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new Ye(n.start,e):this._ranges.splice(t,1,new Ye(n.start,e),new Ye(e+1,n.endExclusive))}}addRange(e){Ye.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let i=n;for(;!(i>=this._ranges.length||e.endExclusive<this._ranges[i].start);)i++;const o=t-e.length;for(let r=i;r<this._ranges.length;r++)this._ranges[r]=this._ranges[r].delta(o);if(n===i){const r=new Ye(e.start,e.start+t);r.isEmpty||this._ranges.splice(n,0,r)}else{const r=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[i-1].endExclusive),l=new Ye(r,a+o);l.isEmpty?this._ranges.splice(n,i-n):this._ranges.splice(n,i-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function Fv(s,e,t,n,i,o){let r=null;if(t)try{r=t.tokenizeEncoded(n,i,o.clone())}catch(a){Pe(a)}return r||(r=YT(s.encodeLanguageId(e),o)),_i.convertToEndOffset(r.tokens,n.length),r}class Ame{constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,oq(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?kj(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new LP,n=pi.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){var n;const t=(n=this._tokenizerWithStateStore)==null?void 0:n.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new ze(e,t))}}class Pme{constructor(){this._onDidChangeVisibleRanges=new O,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const e=new Ome(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}}class Ome{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){const n=e.map(i=>new ze(i.startLineNumber,i.endLineNumber+1));this.handleStateChange({visibleLineRanges:n,stabilized:t})}}class Fme extends F{get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new It(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){en(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class rZ extends F{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t,n){super(),this._languageIdCodec=e,this._textModel=t,this.getLanguageId=n,this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new O),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new O),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}class FH extends rZ{constructor(e,t,n,i){super(t,n,i),this._treeSitterService=e,this._tokenizationSupport=null,this._initialize()}_initialize(){const e=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==e)&&(this._lastLanguageId=e,this._tokenizationSupport=V2.get(e))}getLineTokens(e){const t=this._textModel.getLineContent(e);if(this._tokenizationSupport){const n=this._tokenizationSupport.tokenizeEncoded(e,this._textModel);if(n)return new _i(n,t,this._languageIdCodec)}return _i.createEmpty(t,this._languageIdCodec)}resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush&&this.resetTokenization(!1)}forceTokenization(e){}hasAccurateTokensForLine(e){return!0}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,n){return 0}tokenizeLineWithEdit(e,t,n){return null}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}}const aZ=tt("treeSitterParserService"),Sc=new Uint32Array(0).buffer;class xl{static deleteBeginning(e,t){return e===null||e===Sc?e:xl.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Sc)return e;const n=Bc(e),i=n[n.length-2];return xl.delete(e,t,i)}static delete(e,t,n){if(e===null||e===Sc||t===n)return e;const i=Bc(e),o=i.length>>>1;if(t===0&&i[i.length-2]===n)return Sc;const r=_i.findIndexInTokensArray(i,t),a=r>0?i[r-1<<1]:0,l=i[r<<1];if(n<l){const f=n-t;for(let g=r;g<o;g++)i[g<<1]-=f;return e}let c,d;a!==t?(i[r<<1]=t,c=r+1<<1,d=t):(c=r<<1,d=a);const h=n-t;for(let f=r+1;f<o;f++){const g=i[f<<1]-h;g>d&&(i[c++]=g,i[c++]=i[(f<<1)+1],d=g)}if(c===i.length)return e;const u=new Uint32Array(c);return u.set(i.subarray(0,c),0),u.buffer}static append(e,t){if(t===Sc)return e;if(e===Sc)return t;if(e===null)return e;if(t===null)return null;const n=Bc(e),i=Bc(t),o=i.length>>>1,r=new Uint32Array(n.length+i.length);r.set(n,0);let a=n.length;const l=n[n.length-2];for(let c=0;c<o;c++)r[a++]=i[c<<1]+l,r[a++]=i[(c<<1)+1];return r.buffer}static insert(e,t,n){if(e===null||e===Sc)return e;const i=Bc(e),o=i.length>>>1;let r=_i.findIndexInTokensArray(i,t);r>0&&i[r-1<<1]===t&&r--;for(let a=r;a<o;a++)i[a<<1]+=n;return e}}function Bc(s){return s instanceof Uint32Array?s:new Uint32Array(s)}class g1{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==Sc)return new _i(Bc(i),n,this._languageIdCodec);const o=new Uint32Array(2);return o[0]=n.length,o[1]=WH(this._languageIdCodec.encodeLanguageId(e)),new _i(o,n,this._languageIdCodec)}static _massageTokens(e,t,n){const i=n?Bc(n):null;if(t===0){let o=!1;if(i&&i.length>1&&(o=$s.getLanguageId(i[1])!==e),!o)return Sc}if(!i||i.length===0){const o=new Uint32Array(2);return o[0]=t,o[1]=WH(e),o.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=cT(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,o){const r=g1._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=r,o?!g1._equals(a,r):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Bc(e),i=Bc(t);if(n.length!==i.length)return!1;for(let o=0,r=n.length;o<r;o++)if(n[o]!==i[o])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new A(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=xl.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=xl.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=xl.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=xl.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=xl.insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=xl.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=xl.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const n=[];for(let i=0,o=e.length;i<o;i++){const r=e[i];let a=0,l=0,c=!1;for(let d=r.startLineNumber;d<=r.endLineNumber;d++)c?(this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),r.getLineTokens(d),!1),l=d):this.setTokens(t.getLanguageId(),d-1,t.getLineLength(d),r.getLineTokens(d),!0)&&(c=!0,a=d,l=d);c&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}}function WH(s){return(s<<0|0|0|32768|2<<24|1024)>>>0}class eW{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const o=t[0].getRange(),r=t[t.length-1].getRange();if(!o||!r)return e;n=e.plusRange(o).plusRange(r)}let i=null;for(let o=0,r=this._pieces.length;o<r;o++){const a=this._pieces[o];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:o};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(o,1),o--,r--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:o};continue}const[l,c]=a.split(n);if(l.isEmpty()){i=i||{index:o};continue}c.isEmpty()||(this._pieces.splice(o,1,l,c),o++,r++,i=i||{index:o})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=cT(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;const n=this._pieces;if(n.length===0)return t;const i=eW._findFirstPieceWithLine(n,e),o=n[i].getLineTokens(e);if(!o)return t;const r=t.getCount(),a=o.getCount();let l=0;const c=[];let d=0,h=0;const u=(f,g)=>{f!==h&&(h=f,c[d++]=f,c[d++]=g)};for(let f=0;f<a;f++){const g=o.getStartCharacter(f),p=o.getEndCharacter(f),_=o.getMetadata(f),b=((_&1?2048:0)|(_&2?4096:0)|(_&4?8192:0)|(_&8?16384:0)|(_&16?16744448:0)|(_&32?4278190080:0))>>>0,v=~b>>>0;for(;l<r&&t.getEndOffset(l)<=g;)u(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<g&&u(g,t.getMetadata(l));l<r&&t.getEndOffset(l)<p;)u(t.getEndOffset(l),t.getMetadata(l)&v|_&b),l++;if(l<r)u(p,t.getMetadata(l)&v|_&b),t.getEndOffset(l)===p&&l++;else{const C=Math.min(Math.max(0,l-1),r-1);u(p,t.getMetadata(C)&v|_&b)}}for(;l<r;)u(t.getEndOffset(l),t.getMetadata(l)),l++;return new _i(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let o=n+Math.floor((i-n)/2);if(e[o].endLineNumber<t)n=o+1;else if(e[o].startLineNumber>t)i=o-1;else{for(;o>n&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return n}acceptEdit(e,t,n,i,o){for(const r of this._pieces)r.acceptEdit(e,t,n,i,o)}}var Wme=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},dR=function(s,e){return function(t,n){e(t,n,s)}},jS;let DP=jS=class extends XG{constructor(e,t,n,i,o,r,a){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=n,this._attachedViews=i,this._languageService=o,this._languageConfigurationService=r,this._treeSitterService=a,this._semanticTokens=new eW(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new O),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new O),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new O),this.onDidChangeTokens=this._onDidChangeTokens.event,this._tokensDisposables=this._register(new q),this._register(this._languageConfigurationService.onDidChange(l=>{l.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(se.filter(V2.onDidChange,l=>l.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}createGrammarTokens(){return this._register(new BH(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new FH(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(e){var n;const t=this._tokens!==void 0;(n=this._tokens)==null||n.dispose(),this._tokens=e?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(i=>{this._emitModelTokensChangedEvent(i)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(i=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),t&&this._tokens.resetTokenization()}createPreferredTokenProvider(){V2.get(this._languageId)?this._tokens instanceof FH||this.createTokens(!0):this._tokens instanceof BH||this.createTokens(!1)}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[n,i,o]=du(t.text);this._semanticTokens.acceptEdit(t.range,n,i,o,t.text.length>0?t.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(e)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this._tokens.getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new _t("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this._tokens.forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this._tokens.hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this._tokens.isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this._tokens.tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,n){return this._tokens.getTokenTypeIfInsertingCharacter(e,t,n)}tokenizeLineWithEdit(e,t,n){return this._tokens.tokenizeLineWithEdit(e,t,n)}setSemanticTokens(e,t){this._semanticTokens.set(e,t),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),i=this.getLineTokens(t.lineNumber),o=i.findTokenIndexAtOffset(t.column-1),[r,a]=jS._findLanguageBoundaries(i,o),l=Rw(t.column,this.getLanguageConfiguration(i.getLanguageId(o)).getWordDefinition(),n.substring(r,a),r);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(o>0&&r===t.column-1){const[c,d]=jS._findLanguageBoundaries(i,o-1),h=Rw(t.column,this.getLanguageConfiguration(i.getLanguageId(o-1)).getWordDefinition(),n.substring(c,d),c);if(h&&h.startColumn<=e.column&&e.column<=h.endColumn)return h}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let i=0;for(let r=t;r>=0&&e.getLanguageId(r)===n;r--)i=e.getStartOffset(r);let o=e.getLineContent().length;for(let r=t,a=e.getCount();r<a&&e.getLanguageId(r)===n;r++)o=e.getEndOffset(r);return[i,o]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const n=this._textModel.validatePosition(new A(e,t)),i=this.getLineTokens(n.lineNumber);return i.getLanguageId(i.findTokenIndexAtOffset(n.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const n={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._bracketPairsTextModelPart.handleDidChangeLanguage(n),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(n),this._onDidChangeLanguageConfiguration.fire({})}};DP=jS=Wme([dR(4,tn),dR(5,cn),dR(6,aZ)],DP);class BH extends rZ{constructor(e,t,n,i){super(e,t,n),this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new ai),this._tokens=new g1(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new ai),this._attachedViewStates=this._register(new I3),this._register(mn.onDidChange(o=>{const r=this.getLanguageId();o.changedLanguages.indexOf(r)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(i.onDidChangeVisibleRanges(({view:o,state:r})=>{if(r){let a=this._attachedViewStates.get(o);a||(a=new Fme(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(o,a)),a.handleStateChange(r)}else this._attachedViewStates.deleteAndDispose(o)}))}resetTokenization(e=!0){var o;this._tokens.flush(),(o=this._debugBackgroundTokens)==null||o.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new xP(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const r=mn.get(this.getLanguageId());if(!r)return[null,null];let a;try{a=r.getInitialState()}catch(l){return Pe(l),[null,null]}return[r,a]},[n,i]=t();if(n&&i?this._tokenizer=new Nme(this._textModel.getLineCount(),n,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const r={setTokens:a=>{this.setTokens(a)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const a=2;this._backgroundTokenizationState=a,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(a,l)=>{var d;if(!this._tokenizer)return;const c=this._tokenizer.store.getFirstInvalidEndStateLineNumber();c!==null&&a>=c&&((d=this._tokenizer)==null||d.store.setEndState(a,l))}};n&&n.createBackgroundTokenizer&&!n.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,r)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new Ame(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),n!=null&&n.backgroundTokenizerShouldOnlyVerifyTokens&&n.createBackgroundTokenizer?(this._debugBackgroundTokens=new g1(this._languageIdCodec),this._debugBackgroundStates=new xP(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,{setTokens:a=>{var l;(l=this._debugBackgroundTokens)==null||l.setMultilineTokens(a,this._textModel)},backgroundTokenizationFinished(){},setEndState:(a,l)=>{var c;(c=this._debugBackgroundStates)==null||c.setEndState(a,l)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){var e;(e=this._defaultBackgroundTokenizer)==null||e.handleChanges()}handleDidChangeContent(e){var t,n,i;if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(const o of e.changes){const[r,a]=du(o.text);this._tokens.acceptEdit(o.range,r,a),(t=this._debugBackgroundTokens)==null||t.acceptEdit(o.range,r,a)}(n=this._debugBackgroundStates)==null||n.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),(i=this._defaultBackgroundTokenizer)==null||i.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=ze.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){var r,a;if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const n=new LP,{heuristicTokens:i}=this._tokenizer.tokenizeHeuristically(n,e,t),o=this.setTokens(n.finalize());if(i)for(const l of o.changes)(r=this._backgroundTokenizer.value)==null||r.requestTokens(l.fromLineNumber,l.toLineNumber+1);(a=this._defaultBackgroundTokenizer)==null||a.checkFinished()}forceTokenization(e){var n,i;const t=new LP;(n=this._tokenizer)==null||n.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),(i=this._defaultBackgroundTokenizer)==null||i.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){var i;const t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const o=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(o)&&((i=this._debugBackgroundTokenizer.value)!=null&&i.reportMismatchingTokens)&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;const i=this._textModel.validatePosition(new A(e,t));return this.forceTokenization(i.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(i,n)}tokenizeLineWithEdit(e,t,n){if(!this._tokenizer)return null;const i=this._textModel.validatePosition(e);return this.forceTokenization(i.lineNumber),this._tokenizer.tokenizeLineWithEdit(i,t,n)}get hasTokens(){return this._tokens.hasTokens}}class Bme{constructor(){this.changeType=1}}class Ga{static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(const o of t)n+=e.substring(i,o.column-1),i=o.column-1,n+=o.options.content;return n+=e.substring(i),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new Ga(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new Ga(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}constructor(e,t,n,i,o){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=i,this.order=o}}class HH{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class Hme{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class Vme{constructor(e,t,n,i){this.changeType=4,this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class zme{constructor(){this.changeType=5}}class E_{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,o=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing;return new E_(n,i,o,r)}}class lZ{constructor(e){this.changes=e}}class Uf{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=E_.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=Uf._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new Uf(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.eol,o=t.versionId,r=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:n,eol:i,isEolChange:c,versionId:o,isUndoing:r,isRedoing:a,isFlush:l}}}var $me=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Vy=function(s,e){return function(t,n){e(t,n,s)}},Qu;function Ume(s){const e=new oZ;return e.acceptChunk(s),e.finish()}function jme(s){const e=new oZ;let t;for(;typeof(t=s.read())=="string";)e.acceptChunk(t);return e.finish()}function VH(s,e){let t;return typeof s=="string"?t=Ume(s):Are(s)?t=jme(s):t=s,t.create(e)}let zy=0;const qme=999,Kme=1e4;class Gme{constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;do{const i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}}const Wv=()=>{throw new Error("Invalid change accessor")};var Ta;let Pa=(Ta=class extends F{static resolveOptions(e,t){if(t.detectIndentation){const n=TH(e,t.tabSize,t.insertSpaces);return new PS({tabSize:n.tabSize,indentSize:"tabSize",insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new PS(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return Jr(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,n,i=null,o,r,a,l){super(),this._undoRedoService=o,this._languageService=r,this._languageConfigurationService=a,this.instantiationService=l,this._onWillDispose=this._register(new O),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new epe(g=>this.handleBeforeFireDecorationsChangedEvent(g))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new O),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new O),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new O),this._eventEmitter=this._register(new tpe),this._languageSelectionListener=this._register(new ai),this._deltaDecorationCallCnt=0,this._attachedViews=new Pme,zy++,this.id="$model"+zy,this.isForSimpleWidget=n.isForSimpleWidget,typeof i>"u"||i===null?this._associatedResource=Se.parse("inmemory://model/"+zy):this._associatedResource=i,this._attachedEditorCount=0;const{textBuffer:c,disposable:d}=VH(e,n.defaultEOL);this._buffer=c,this._bufferDisposable=d,this._options=Qu.resolveOptions(this._buffer,n);const h=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new eme(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new ome(this,this._languageConfigurationService)),this._decorationProvider=this._register(new nme(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(DP,this,this._bracketPairs,h,this._attachedViews);const u=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new L(1,1,u,this._buffer.getLineLength(u)+1),0);n.largeFileOptimizations?(this._isTooLargeForTokenization=f>Qu.LARGE_FILE_SIZE_THRESHOLD||u>Qu.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=f>Qu.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=f>Qu._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=Jj(zy),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new zH,this._commandManager=new Y9(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(h),this._register(this._languageConfigurationService.onDidChange(g=>{this._bracketPairs.handleLanguageConfigurationServiceChange(g),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(g)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new T_([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=F.None}_assertNotDisposed(){if(this._isDisposed)throw new _t("Model is disposed!")}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new Uf(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw Cr();const{textBuffer:t,disposable:n}=VH(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,i,o,r,a,l){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:i}],eol:this._buffer.getEOL(),isEolChange:l,versionId:this.getVersionId(),isUndoing:o,isRedoing:r,isFlush:a}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new zH,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new E_([new Bme],this._versionId,!1,!1),this._createContentChanged2(new L(1,1,o,r),0,i,this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===1?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),i=this.getValueLengthInRange(n),o=this.getLineCount(),r=this.getLineMaxColumn(o);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new E_([new zme],this._versionId,!1,!1),this._createContentChanged2(new L(1,1,o,r),0,i,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,i=t.length;n<i;n++){const o=t[n],r=o.range,a=o.cachedAbsoluteStart-o.start,l=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),c=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);o.cachedAbsoluteStart=l,o.cachedAbsoluteEnd=c,o.cachedVersionId=e,o.start=l-a,o.end=c-a,fu(o)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let i=1;i<=n;i++){const o=this._buffer.getLineLength(i);o>=Kme?t+=o:e+=o}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,i=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,o=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,r=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new PS({tabSize:t,indentSize:n,insertSpaces:i,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:o,bracketPairColorizationOptions:r});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const n=TH(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),j9(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(Xj.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,0);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new _t("Operation would exceed heap memory limits");const n=this.getFullModelRange(),i=this.getValueInRange(n,e);return t?this._buffer.getBOM()+i:i}createSnapshot(e=!1){return new Gme(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),i=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+i:i}getValueInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new _t("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new _t("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new _t("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new _t("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new _t("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new _t("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,i=e.startColumn;let o=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),r=Math.floor(typeof i=="number"&&!isNaN(i)?i:1);if(o<1)o=1,r=1;else if(o>t)o=t,r=this.getLineMaxColumn(o);else if(r<=1)r=1;else{const h=this.getLineMaxColumn(o);r>=h&&(r=h)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),d=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,d=1;else if(c>t)c=t,d=this.getLineMaxColumn(c);else if(d<=1)d=1;else{const h=this.getLineMaxColumn(c);d>=h&&(d=h)}return n===o&&i===r&&a===c&&l===d&&e instanceof L&&!(e instanceof me)?e:new L(o,r,c,d)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const i=this._buffer.getLineCount();if(e>i)return!1;if(t===1)return!0;const o=this.getLineMaxColumn(e);if(t>o)return!1;if(n===1){const r=this._buffer.getLineCharCode(e,t-2);if(ni(r))return!1}return!0}_validatePosition(e,t,n){const i=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),r=this._buffer.getLineCount();if(i<1)return new A(1,1);if(i>r)return new A(r,this.getLineMaxColumn(r));if(o<=1)return new A(i,1);const a=this.getLineMaxColumn(i);if(o>=a)return new A(i,a);if(n===1){const l=this._buffer.getLineCharCode(i,o-2);if(ni(l))return new A(i,o-1)}return new A(i,o)}validatePosition(e){return this._assertNotDisposed(),e instanceof A&&this._isValidPosition(e.lineNumber,e.column,1)?e:this._validatePosition(e.lineNumber,e.column,1)}_isValidRange(e,t){const n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,r=e.endColumn;if(!this._isValidPosition(n,i,0)||!this._isValidPosition(o,r,0))return!1;if(t===1){const a=i>1?this._buffer.getLineCharCode(n,i-2):0,l=r>1&&r<=this._buffer.getLineLength(o)?this._buffer.getLineCharCode(o,r-2):0,c=ni(a),d=ni(l);return!c&&!d}return!0}validateRange(e){if(this._assertNotDisposed(),e instanceof L&&!(e instanceof me)&&this._isValidRange(e,1))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,0),i=this._validatePosition(e.endLineNumber,e.endColumn,0),o=n.lineNumber,r=n.column,a=i.lineNumber,l=i.column;{const c=r>1?this._buffer.getLineCharCode(o,r-2):0,d=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,h=ni(c),u=ni(d);return!h&&!u?new L(o,r,a,l):o===a&&r===l?new L(o,r-1,a,l-1):h&&u?new L(o,r-1,a,l+1):h?new L(o,r-1,a,l):new L(o,r,a,l+1)}}modifyPosition(e,t){this._assertNotDisposed();const n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new L(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,i){return this._buffer.findMatchesLineByLine(e,t,n,i)}findMatches(e,t,n,i,o,r,a=qme){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(h=>L.isIRange(h))&&(l=t.map(h=>this.validateRange(h)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((h,u)=>h.startLineNumber-u.startLineNumber||h.startColumn-u.startColumn);const c=[];c.push(l.reduce((h,u)=>L.areIntersecting(h,u)?h.plusRange(u):(c.push(h),u)));let d;if(!n&&e.indexOf(`
`)<0){const u=new Xu(e,n,i,o).parseSearchRequest();if(!u)return[];d=f=>this.findMatchesLineByLine(f,u,r,a)}else d=h=>yy.findMatches(this,new Xu(e,n,i,o),h,r,a);return c.map(d).reduce((h,u)=>h.concat(u),[])}findNextMatch(e,t,n,i,o,r){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const c=new Xu(e,n,i,o).parseSearchRequest();if(!c)return null;const d=this.getLineCount();let h=new L(a.lineNumber,a.column,d,this.getLineMaxColumn(d)),u=this.findMatchesLineByLine(h,c,r,1);return yy.findNextMatch(this,new Xu(e,n,i,o),a,r),u.length>0||(h=new L(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),u=this.findMatchesLineByLine(h,c,r,1),u.length>0)?u[0]:null}return yy.findNextMatch(this,new Xu(e,n,i,o),a,r)}findPreviousMatch(e,t,n,i,o,r){this._assertNotDisposed();const a=this.validatePosition(t);return yy.findPreviousMatch(this,new Xu(e,n,i,o),a,r)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?0:1)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof FN?e:new FN(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n,i){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n,i)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n,i){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const o=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let r=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let d=!1;for(let h=0,u=o.length;h<u;h++){const f=o[h].range,g=f.startLineNumber>c.endLineNumber,p=c.startLineNumber>f.endLineNumber;if(!g&&!p){d=!0;break}}if(!d){r=!1;break}}if(r)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],d=this.getLineMaxColumn(c);let h=!0;for(let u=0,f=o.length;u<f;u++){const g=o[u].range,p=o[u].text;if(!(c<g.startLineNumber||c>g.endLineNumber)&&!(c===g.startLineNumber&&g.startColumn===d&&g.isEmpty()&&p&&p.length>0&&p.charAt(0)===`
`)&&!(c===g.startLineNumber&&g.startColumn===1&&g.isEmpty()&&p&&p.length>0&&p.charAt(p.length-1)===`
`)){h=!1;break}}if(h){const u=new L(c,1,c,d);t.push(new FN(null,u,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n,i)}_applyUndo(e,t,n,i){const o=e.map(r=>{const a=this.getPositionAt(r.newPosition),l=this.getPositionAt(r.newEnd);return{range:new L(a.lineNumber,a.column,l.lineNumber,l.column),text:r.oldText}});this._applyUndoRedoEdits(o,t,!0,!1,n,i)}_applyRedo(e,t,n,i){const o=e.map(r=>{const a=this.getPositionAt(r.oldPosition),l=this.getPositionAt(r.oldEnd);return{range:new L(a.lineNumber,a.column,l.lineNumber,l.column),text:r.newText}});this._applyUndoRedoEdits(o,t,!1,!0,n,i)}_applyUndoRedoEdits(e,t,n,i,o,r){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=i,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(o)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(r),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),i=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),o=this._buffer.getLineCount(),r=i.changes;if(this._trimAutoWhitespaceLines=i.trimAutoWhitespaceLineNumbers,r.length!==0){for(let c=0,d=r.length;c<d;c++){const h=r[c];this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=n;for(let c=0,d=r.length;c<d;c++){const h=r[c],[u]=du(h.text);this._onDidChangeDecorations.fire();const f=h.range.startLineNumber,g=h.range.endLineNumber,p=g-f,_=u,b=Math.min(p,_),v=_-p,C=o-l-v+f,w=C,y=C+_,k=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new A(w,1)),this.getOffsetAt(new A(y,this.getLineMaxColumn(y))),0),x=Ga.fromDecorations(k),D=new gd(x);for(let N=b;N>=0;N--){const W=f+N,B=C+N;D.takeFromEndWhile(U=>U.lineNumber>B);const z=D.takeFromEndWhile(U=>U.lineNumber===B);a.push(new HH(W,this.getLineContent(B),z))}if(b<p){const N=f+b;a.push(new Hme(N+1,g))}if(b<_){const N=new gd(x),W=f+b,B=_-b,z=o-l-B+W+1,U=[],H=[];for(let X=0;X<B;X++){const re=z+X;H[X]=this.getLineContent(re),N.takeWhile(fe=>fe.lineNumber<re),U[X]=N.takeWhile(fe=>fe.lineNumber===re)}a.push(new Vme(W+1,f+_,H,U))}l+=v}this._emitContentChangedEvent(new E_(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:r,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return i.reverseEdits===null?void 0:i.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e){if(e===null||e.size===0)return;const n=Array.from(e).map(i=>new HH(i,this.getLineContent(i),this._getInjectedTextInLine(i)));this._onDidChangeInjectedText.fire(new lZ(n))}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const n={addDecoration:(o,r)=>this._deltaDecorationsImpl(e,[],[{range:o,options:r}])[0],changeDecoration:(o,r)=>{this._changeDecorationImpl(o,r)},changeDecorationOptions:(o,r)=>{this._changeDecorationOptionsImpl(o,UH(r))},removeDecoration:o=>{this._deltaDecorationsImpl(e,[o],[])},deltaDecorations:(o,r)=>o.length===0&&r.length===0?[]:this._deltaDecorationsImpl(e,o,r)};let i=null;try{i=t(n)}catch(o){Pe(o)}return n.addDecoration=Wv,n.changeDecoration=Wv,n.changeDecorationOptions=Wv,n.removeDecoration=Wv,n.deltaDecorations=Wv,i}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Pe(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const i=e?this._decorations[e]:null;if(!i)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:$H[n]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(i),delete this._decorations[i.id],null;const o=this._validateRangeRelaxedNoAllocations(t),r=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);return this._decorationsTree.delete(i),i.reset(this.getVersionId(),r,a,o),i.setOptions($H[n]),this._decorationsTree.insert(i),i.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,i=t.length;n<i;n++){const o=t[n];this._decorationsTree.delete(o),delete this._decorations[o.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,i=!1,o=!1){const r=this.getLineCount(),a=Math.min(r,Math.max(1,e)),l=Math.min(r,Math.max(1,t)),c=this.getLineMaxColumn(l),d=new L(a,1,l,c),h=this._getDecorationsInRange(d,n,i,o);return x2(h,this._decorationProvider.getDecorationsInRange(d,n,i)),h}getDecorationsInRange(e,t=0,n=!1,i=!1,o=!1){const r=this.validateRange(e),a=this._getDecorationsInRange(r,t,n,o);return x2(a,this._decorationProvider.getDecorationsInRange(r,t,n,i)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),i=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return Ga.fromDecorations(i).filter(o=>o.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,n,i){const o=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),r=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,o,r,t,n,i)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t){const n=this._decorations[e];if(!n)return;if(n.options.after){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.endLineNumber)}if(n.options.before){const a=this.getDecorationRange(e);this._onDidChangeDecorations.recordLineAffectedByInjectedText(a.startLineNumber)}const i=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(i.startLineNumber,i.startColumn),r=this._buffer.getOffsetAt(i.endLineNumber,i.endColumn);this._decorationsTree.delete(n),n.reset(this.getVersionId(),o,r,i),this._decorationsTree.insert(n),this._onDidChangeDecorations.checkAffectedAndFire(n.options),n.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.endLineNumber),n.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(i.startLineNumber)}_changeDecorationOptionsImpl(e,t){const n=this._decorations[e];if(!n)return;const i=!!(n.options.overviewRuler&&n.options.overviewRuler.color),o=!!(t.overviewRuler&&t.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(n.options),this._onDidChangeDecorations.checkAffectedAndFire(t),n.options.after||t.after){const l=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(n.options.before||t.before){const l=this._decorationsTree.getNodeRange(this,n);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}const r=i!==o,a=Yme(t)!==qS(n);r||a?(this._decorationsTree.delete(n),n.setOptions(t),this._decorationsTree.insert(n)):n.setOptions(t)}_deltaDecorationsImpl(e,t,n,i=!1){const o=this.getVersionId(),r=t.length;let a=0;const l=n.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const d=new Array(l);for(;a<r||c<l;){let h=null;if(a<r){do h=this._decorations[t[a++]];while(!h&&a<r);if(h){if(h.options.after){const u=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.endLineNumber)}if(h.options.before){const u=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(u.startLineNumber)}this._decorationsTree.delete(h),i||this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(c<l){if(!h){const b=++this._lastDecorationId,v=`${this._instanceId};${b}`;h=new tZ(v,0,0),this._decorations[v]=h}const u=n[c],f=this._validateRangeRelaxedNoAllocations(u.range),g=UH(u.options),p=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),_=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);h.ownerId=e,h.reset(o,p,_,f),h.setOptions(g),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),i||this._onDidChangeDecorations.checkAffectedAndFire(g),this._decorationsTree.insert(h),d[c]=h.id,c++}else h&&delete this._decorations[h.id]}return d}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return Zme(this.getLineContent(e))+1}},Qu=Ta,Ta._MODEL_SYNC_LIMIT=50*1024*1024,Ta.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024,Ta.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3,Ta.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024,Ta.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Ui.tabSize,indentSize:Ui.indentSize,insertSpaces:Ui.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Ui.trimAutoWhitespace,largeFileOptimizations:Ui.largeFileOptimizations,bracketPairColorizationOptions:Ui.bracketPairColorizationOptions},Ta);Pa=Qu=$me([Vy(4,a9),Vy(5,tn),Vy(6,cn),Vy(7,Ce)],Pa);function Zme(s){let e=0;for(const t of s)if(t===" "||t==="	")e++;else break;return e}function hR(s){return!!(s.options.overviewRuler&&s.options.overviewRuler.color)}function Yme(s){return!!s.after||!!s.before}function qS(s){return!!s.options.after||!!s.options.before}class zH{constructor(){this._decorationsTree0=new aR,this._decorationsTree1=new aR,this._injectedTextDecorationsTree=new aR}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,o,r){const a=e.getVersionId(),l=this._intervalSearch(t,n,i,o,a,r);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,n,i,o,r){const a=this._decorationsTree0.intervalSearch(e,t,n,i,o,r),l=this._decorationsTree1.intervalSearch(e,t,n,i,o,r),c=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,o,r);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,n,i){const o=e.getVersionId(),r=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,o,!1);return this._ensureNodesHaveRanges(e,r).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,i).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,n,i,o){const r=e.getVersionId(),a=this._search(t,n,i,r,o);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,i,o){if(n)return this._decorationsTree1.search(e,t,i,o);{const r=this._decorationsTree0.search(e,t,i,o),a=this._decorationsTree1.search(e,t,i,o),l=this._injectedTextDecorationsTree.search(e,t,i,o);return r.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){qS(e)?this._injectedTextDecorationsTree.insert(e):hR(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){qS(e)?this._injectedTextDecorationsTree.delete(e):hR(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){qS(e)?this._injectedTextDecorationsTree.resolveNode(e,t):hR(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}}function dl(s){return s.replace(/[^a-z0-9\-_]/gi," ")}class cZ{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class Xme extends cZ{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:Ko.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}}class Qme{constructor(e){this.position=(e==null?void 0:e.position)??ia.Center,this.persistLane=e==null?void 0:e.persistLane}}class Jme extends cZ{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?Z.fromHex(e):t.getColor(e.id)}}class gu{static from(e){return e instanceof gu?e:new gu(e)}constructor(e){this.content=e.content||"",this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class Ve{static register(e){return new Ve(e)}static createDynamic(e){return new Ve(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?dl(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?dl(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new Xme(e.overviewRuler):null,this.minimap=e.minimap?new Jme(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new Qme(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?dl(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?dl(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?dl(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?fie(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?dl(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?dl(e.marginClassName):null,this.inlineClassName=e.inlineClassName?dl(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?dl(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?dl(e.afterContentClassName):null,this.after=e.after?gu.from(e.after):null,this.before=e.before?gu.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}Ve.EMPTY=Ve.register({description:"empty"});const $H=[Ve.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Ve.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Ve.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Ve.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function UH(s){return s instanceof Ve?s:Ve.createDynamic(s)}class epe extends F{constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new O),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){var e;this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),(e=this._affectedInjectedTextLines)==null||e.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}checkAffectedAndFire(e){var t,n;this._affectsMinimap||(this._affectsMinimap=!!((t=e.minimap)!=null&&t.position)),this._affectsOverviewRuler||(this._affectsOverviewRuler=!!((n=e.overviewRuler)!=null&&n.color)),this._affectsGlyphMargin||(this._affectsGlyphMargin=!!e.glyphMarginClassName),this._affectsLineNumber||(this._affectsLineNumber=!!e.lineNumberClassName),this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class tpe extends F{constructor(){super(),this._fastEmitter=this._register(new O),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new O),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var npe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},$y=function(s,e){return function(t,n){e(t,n,s)}},Cp;function Vu(s){return s.toString()}let ipe=class{constructor(e,t,n){this.model=e,this._modelEventListeners=new q,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(i=>n(e,i)))}dispose(){this._modelEventListeners.dispose()}};const spe=Ds||et?1:2;class ope{constructor(e,t,n,i,o,r,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=i,this.heapSize=o,this.sha1=r,this.versionId=a,this.alternativeVersionId=l}}var Qf;let IP=(Qf=class extends F{constructor(e,t,n,i){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=n,this._instantiationService=i,this._onModelAdded=this._register(new O),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new O),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new O),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(o=>this._updateModelOptions(o))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){var u;let n=Ui.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(n=f),n<1&&(n=1)}let i="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(i=Math.max(f,1))}let o=Ui.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(o=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let r=spe;const a=e.eol;a===`\r
`?r=2:a===`
`&&(r=1);let l=Ui.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(l=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=Ui.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let d=Ui.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(d=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let h=Ui.bracketPairColorizationOptions;return(u=e.editor)!=null&&u.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(h={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:n,indentSize:i,insertSpaces:o,detectIndentation:c,defaultEOL:r,trimAutoWhitespace:l,largeFileOptimizations:d,bracketPairColorizationOptions:h}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:mo===3||mo===2?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){const i=typeof e=="string"?e:e.languageId;let o=this._modelCreationOptionsByLanguageAndResource[i+t];if(!o){const r=this._configurationService.getValue("editor",{overrideIdentifier:i,resource:t}),a=this._getEOL(t,i);o=Cp._readModelOptions({editor:r,eol:a},n),this._modelCreationOptionsByLanguageAndResource[i+t]=o}return o}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const n=Object.keys(this._models);for(let i=0,o=n.length;i<o;i++){const r=n[i],a=this._models[r],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const d=t[l+c],h=this.getCreationOptions(l,c,a.model.isForSimpleWidget);Cp._setModelOptionsForModel(a.model,h,d)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===1?0:1),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&po(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(Vu(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(Vu(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(Vu(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,i)=>n.time-i.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,i){const o=this.getCreationOptions(t,n,i),r=this._instantiationService.createInstance(Pa,e,t,o,n);if(n&&this._disposedModels.has(Vu(n))){const c=this._removeDisposedModel(n),d=this._undoRedoService.getElements(n),h=this._getSHA1Computer(),u=h.canComputeSHA1(r)?h.computeSHA1(r)===c.sha1:!1;if(u||c.sharesUndoRedoStack){for(const f of d.past)Pc(f)&&f.matchesResource(n)&&f.setModel(r);for(const f of d.future)Pc(f)&&f.matchesResource(n)&&f.setModel(r);this._undoRedoService.setElementsValidFlag(n,!0,f=>Pc(f)&&f.matchesResource(n)),u&&(r._overwriteVersionId(c.versionId),r._overwriteAlternativeVersionId(c.alternativeVersionId),r._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=Vu(r.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new ipe(r,c=>this._onWillDispose(c),(c,d)=>this._onDidChangeLanguage(c,d));return this._models[a]=l,l}createModel(e,t,n,i=!1){let o;return t?o=this._createModelData(e,t,n,i):o=this._createModelData(e,xs,n,i),this._onModelAdded.fire(o.model),o.model}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,i=t.length;n<i;n++){const o=t[n];e.push(this._models[o].model)}return e}getModel(e){const t=Vu(e),n=this._models[t];return n?n.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===We.file||e.scheme===We.vscodeRemote||e.scheme===We.vscodeUserData||e.scheme===We.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=Vu(e.uri),n=this._models[t],i=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let o=!1,r=0;if(i||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const d of c.past)Pc(d)&&d.matchesResource(e.uri)&&(o=!0,r+=d.heapSize(e.uri),d.setModel(e.uri));for(const d of c.future)Pc(d)&&d.matchesResource(e.uri)&&(o=!0,r+=d.heapSize(e.uri),d.setModel(e.uri))}}const a=Cp.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(o)if(!i&&(r>a||!l.canComputeSHA1(e))){const c=n.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-r),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>Pc(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new ope(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),i,r,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!i){const c=n.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,i=e.getLanguageId(),o=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),r=this.getCreationOptions(i,e.uri,e.isForSimpleWidget);Cp._setModelOptionsForModel(e,r,o),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}_getSHA1Computer(){return new TP}},Cp=Qf,Qf.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024,Qf);IP=Cp=npe([$y(0,Ze),$y(1,oK),$y(2,a9),$y(3,Ce)],IP);const UD=class UD{canComputeSHA1(e){return e.getValueLength()<=UD.MAX_MODEL_SIZE}computeSHA1(e){const t=new UM,n=e.createSnapshot();let i;for(;i=n.read();)t.update(i);return t.digest()}};UD.MAX_MODEL_SIZE=10*1024*1024;let TP=UD;var EP;(function(s){s[s.PRESERVE=0]="PRESERVE",s[s.LAST=1]="LAST"})(EP||(EP={}));const Rm={Quickaccess:"workbench.contributions.quickaccess"};class rpe{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),ve(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return ea([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}}ln.add(Rm.Quickaccess,new rpe);const ape={ctrlCmd:!1,alt:!1};var wb;(function(s){s[s.Blur=1]="Blur",s[s.Gesture=2]="Gesture",s[s.Other=3]="Other"})(wb||(wb={}));var ka;(function(s){s[s.NONE=0]="NONE",s[s.FIRST=1]="FIRST",s[s.SECOND=2]="SECOND",s[s.LAST=3]="LAST"})(ka||(ka={}));var Ht;(function(s){s[s.First=1]="First",s[s.Second=2]="Second",s[s.Last=3]="Last",s[s.Next=4]="Next",s[s.Previous=5]="Previous",s[s.NextPage=6]="NextPage",s[s.PreviousPage=7]="PreviousPage",s[s.NextSeparator=8]="NextSeparator",s[s.PreviousSeparator=9]="PreviousSeparator"})(Ht||(Ht={}));var TL;(function(s){s[s.Title=1]="Title",s[s.Inline=2]="Inline"})(TL||(TL={}));const Nr=tt("quickInputService");var lpe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},jH=function(s,e){return function(t,n){e(t,n,s)}};let NP=class extends F{constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=ln.as(Rm.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){var g,p;const[i,o]=this.getOrInstantiateProvider(e,n==null?void 0:n.enabledProviderPrefixes),r=this.visibleQuickAccess,a=r==null?void 0:r.descriptor;if(r&&o&&a===o){e!==o.prefix&&!(n!=null&&n.preserveValue)&&(r.picker.value=e),this.adjustValueSelection(r.picker,o,n);return}if(o&&!(n!=null&&n.preserveValue)){let _;if(r&&a&&a!==o){const b=r.value.substr(a.prefix.length);b&&(_=`${o.prefix}${b}`)}if(!_){const b=i==null?void 0:i.defaultFilterValue;b===EP.LAST?_=this.lastAcceptedPickerValues.get(o):typeof b=="string"&&(_=`${o.prefix}${b}`)}typeof _=="string"&&(e=_)}const l=(g=r==null?void 0:r.picker)==null?void 0:g.valueSelection,c=(p=r==null?void 0:r.picker)==null?void 0:p.value,d=new q,h=d.add(this.quickInputService.createQuickPick({useSeparators:!0}));h.value=e,this.adjustValueSelection(h,o,n),h.placeholder=(n==null?void 0:n.placeholder)??(o==null?void 0:o.placeholder),h.quickNavigate=n==null?void 0:n.quickNavigateConfiguration,h.hideInput=!!h.quickNavigate&&!r,(typeof(n==null?void 0:n.itemActivation)=="number"||n!=null&&n.quickNavigateConfiguration)&&(h.itemActivation=(n==null?void 0:n.itemActivation)??ka.SECOND),h.contextKey=o==null?void 0:o.contextKey,h.filterValue=_=>_.substring(o?o.prefix.length:0);let u;t&&(u=new Gb,d.add(se.once(h.onWillAccept)(_=>{_.veto(),h.hide()}))),d.add(this.registerPickerListeners(h,i,o,e,n));const f=d.add(new an);if(i&&d.add(i.provide(h,f.token,n==null?void 0:n.providerOptions)),se.once(h.onDidHide)(()=>{h.selectedItems.length===0&&f.cancel(),d.dispose(),u==null||u.complete(h.selectedItems.slice(0))}),h.show(),l&&c===e&&(h.valueSelection=l),t)return u==null?void 0:u.p}adjustValueSelection(e,t,n){let i;n!=null&&n.preserveValue?i=[e.value.length,e.value.length]:i=[(t==null?void 0:t.prefix.length)??0,e.value.length],e.valueSelection=i}registerPickerListeners(e,t,n,i,o){const r=new q,a=this.visibleQuickAccess={picker:e,descriptor:n,value:i};return r.add(ve(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),r.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,o==null?void 0:o.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:o==null?void 0:o.enabledProviderPrefixes,preserveValue:!0,providerOptions:o==null?void 0:o.providerOptions}):a.value=l})),n&&r.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),r}getOrInstantiateProvider(e,t){const n=this.registry.getQuickAccessProvider(e);if(!n||t&&!(t!=null&&t.includes(n.prefix)))return[void 0,void 0];let i=this.mapProviderToDescriptor.get(n);return i||(i=this.instantiationService.createInstance(n.ctor),this.mapProviderToDescriptor.set(n,i)),[i,n]}};NP=lpe([jH(0,Nr),jH(1,Ce)],NP);class av extends sr{constructor(e){super(),this._onChange=this._register(new O),this.onChange=this._onChange.event,this._onKeyDown=this._register(new O),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...De.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(tl().setupManagedHover(e.hoverDelegate??Ms("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}var cpe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};class dZ{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}cpe([Nn],dZ.prototype,"toString",null);const dpe=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function hpe(s){const e=[];let t=0,n;for(;n=dpe.exec(s);){n.index-t>0&&e.push(s.substring(t,n.index));const[,i,o,,r]=n;r?e.push({label:i,href:o,title:r}):e.push({label:i,href:o}),t=n.index+n[0].length}return t<s.length&&e.push(s.substring(t)),new dZ(e)}const uR={},upe=new N9("quick-input-button-icon-");function fpe(s){if(!s)return;let e;const t=s.dark.toString();return uR[t]?e=uR[t]:(e=upe.nextId(),Vk(`.${e}, .hc-light .${e}`,`background-image: ${bd(s.light||s.dark)}`),Vk(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${bd(s.dark)}`),uR[t]=e),e}function FC(s,e,t){let n=s.iconClass||fpe(s.iconPath);return s.alwaysVisible&&(n=n?`${n} always-visible`:"always-visible"),{id:e,label:"",tooltip:s.tooltip||"",class:n,enabled:!0,run:t}}function gpe(s,e,t){Di(e);const n=hpe(s);let i=0;for(const o of n.nodes)if(typeof o=="string")e.append(...Rh(o));else{let r=o.title;!r&&o.href.startsWith("command:")?r=m("executeCommand","Click to execute command '{0}'",o.href.substring(8)):r||(r=o.href);const a=te("a",{href:o.href,title:r,tabIndex:i++},o.label);a.style.textDecoration="underline";const l=f=>{Ase(f)&&it.stop(f,!0),t.callback(o.href)},c=t.disposables.add(new nt(a,ee.CLICK)).event,d=t.disposables.add(new nt(a,ee.KEY_DOWN)).event,h=se.chain(d,f=>f.filter(g=>{const p=new Pt(g);return p.equals(10)||p.equals(3)}));t.disposables.add(Ki.addTarget(a));const u=t.disposables.add(new nt(a,Ft.Tap)).event;se.any(c,u,h)(l,null,t.disposables),e.appendChild(a)}}var mpe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qH=function(s,e){return function(t,n){e(t,n,s)}};const hZ="inQuickInput",ppe=new le(hZ,!1,m("inQuickInput","Whether keyboard focus is inside the quick input control")),_pe=K.has(hZ),uZ="quickInputType",bpe=new le(uZ,void 0,m("quickInputType","The type of the currently visible quick input")),fZ="cursorAtEndOfQuickInputBox",vpe=new le(fZ,!1,m("cursorAtEndOfQuickInputBox","Whether the cursor in the quick input is at the end of the input box")),Cpe=K.has(fZ),RP={iconClass:De.asClassName(J.quickInputBack),tooltip:m("quickInput.back","Back"),handle:-1},jD=class jD extends F{constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=jD.noPromptMessage,this._severity=Tn.Ignore,this.onDidTriggerButtonEmitter=this._register(new O),this.onDidHideEmitter=this._register(new O),this.onWillHideEmitter=this._register(new O),this.onDisposeEmitter=this._register(new O),this.visibleDisposables=this._register(new q),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!Ua;this._ignoreFocusOut=e&&!Ua,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(t=>t===RP),this._rightButtons=e.filter(t=>t!==RP&&t.location!==TL.Inline),this._inlineButtons=e.filter(t=>t.location===TL.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=wb.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=wb.Other){this.onWillHideEmitter.fire({reason:e})}update(){var i;if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?Di(this.ui.widget,this._widget):Di(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new la,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const o=this._leftButtons.map((l,c)=>FC(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.leftActionBar.push(o,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const r=this._rightButtons.map((l,c)=>FC(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.rightActionBar.push(r,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const a=this._inlineButtons.map((l,c)=>FC(l,`id-${c}`,async()=>this.onDidTriggerButtonEmitter.fire(l)));this.ui.inlineActionBar.push(a,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const o=((i=this.toggles)==null?void 0:i.filter(r=>r instanceof av))??[];this.ui.inputBox.toggles=o}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,Di(this.ui.message),gpe(n,this.ui.message,{callback:o=>{this.ui.linkOpenerDelegate(o)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?m("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==Tn.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}};jD.noPromptMessage=m("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");let EL=jD;const qD=class qD extends EL{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new O),this.onWillAcceptEmitter=this._register(new O),this.onDidAcceptEmitter=this._register(new O),this.onDidCustomEmitter=this._register(new O),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=ka.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new O),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new O),this.onDidTriggerItemButtonEmitter=this._register(new O),this.onDidTriggerSeparatorButtonEmitter=this._register(new O),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new f0,this.type="quickPick",this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?ape:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(Ht.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&en(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&en(e,this._selectedItems,(n,i)=>n===i)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(q3(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&en(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return $(this.ui.container,ee.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new Pt(e),n=t.keyCode;this._quickNavigate.keybindings.some(r=>{const a=r.getChords();return a.length>1?!1:a[0].shiftKey&&n===4?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&n===6||a[0].ctrlKey&&n===5||a[0].metaKey&&n===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,n={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let i=this.ariaLabel;!i&&n.inputBox&&(i=this.placeholder||qD.DEFAULT_ARIA_LABEL,this.title&&(i+=` - ${this.title}`)),this.ui.list.ariaLabel!==i&&(this.ui.list.ariaLabel=i??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case ka.NONE:this._itemActivation=ka.FIRST;break;case ka.SECOND:this.ui.list.focus(Ht.Second),this._itemActivation=ka.FIRST;break;case ka.LAST:this.ui.list.focus(Ht.Last),this._itemActivation=ka.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(Ht.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}};qD.DEFAULT_ARIA_LABEL=m("quickInputBox.ariaLabel","Type to narrow down results.");let NL=qD,wpe=class extends EL{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new O),this.onDidAcceptEmitter=this._register(new O),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}},MP=class extends ub{constructor(e,t){super("element",!1,n=>this.getOverrideOptions(n),e,t)}getOverrideOptions(e){const t=(oi(e.content)?e.content.textContent??"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:t,skipFadeInAnimation:!0}}}};MP=mpe([qH(0,Ze),qH(1,oc)],MP);Z.white.toString(),Z.white.toString();class RL extends F{get onDidClick(){return this._onDidClick.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new O),this._onDidEscape=this._register(new O),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,i=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=i||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(Ki.addTarget(this._element)),[ee.CLICK,Ft.Tap].forEach(o=>{this._register($(this._element,o,r=>{if(!this.enabled){it.stop(r);return}this._onDidClick.fire(r)}))}),this._register($(this._element,ee.KEY_DOWN,o=>{const r=new Pt(o);let a=!1;this.enabled&&(r.equals(3)||r.equals(10))?(this._onDidClick.fire(o),a=!0):r.equals(9)&&(this._onDidEscape.fire(o),this._element.blur(),a=!0),a&&it.stop(r,!0)})),this._register($(this._element,ee.MOUSE_OVER,o=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register($(this._element,ee.MOUSE_OUT,o=>{this.updateBackground(!1)})),this.focusTracker=this._register(Ka(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let n of Rh(e))if(typeof n=="string"){if(n=n.trim(),n==="")continue;const i=document.createElement("span");i.textContent=n,t.push(i)}else t.push(n);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){var i;if(this._label===e||$a(this._label)&&$a(e)&&ehe(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if($a(e)){const o=ZT(e,{inline:!0});o.dispose();const r=(i=o.element.querySelector("p"))==null?void 0:i.innerHTML;if(r){const a=hq(r,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=a}else Di(t)}else this.options.supportIcons?Di(t,...this.getContentElements(e)):t.textContent=e;let n="";typeof this.options.title=="string"?n=this.options.title:this.options.title&&(n=hhe(e)),this.setTitle(n),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",n),this._label=e}get label(){return this._label}set icon(e){this._element.classList.add(...De.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(tl().setupManagedHover(this.options.hoverDelegate??Ms("mouse"),this._element,e)):this._hover&&this._hover.update(e)}}class AP{constructor(e,t,n){this.options=t,this.styles=n,this.count=0,this.element=Y(e,te(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(e){this.count=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.render()}render(){this.element.textContent=Gg(this.countFormat,this.count),this.element.title=Gg(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const KH="done",GH="active",fR="infinite",gR="infinite-long-running",ZH="discrete",KD=class KD extends F{constructor(e,t){super(),this.progressSignal=this._register(new ai),this.workedVal=0,this.showDelayedScheduler=this._register(new It(()=>uo(this.element),0)),this.longRunningScheduler=this._register(new It(()=>this.infiniteLongRunning(),KD.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=(t==null?void 0:t.progressBarBackground)||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(GH,fR,gR,ZH),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(KH),this.element.classList.contains(fR)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(ZH,KH,gR),this.element.classList.add(GH,fR),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(gR)}getContainer(){return this.element}};KD.LONG_RUNNING_INFINITE_THRESHOLD=1e4;let PP=KD;const ype=m("caseDescription","Match Case"),Spe=m("wordsDescription","Match Whole Word"),kpe=m("regexDescription","Use Regular Expression");class gZ extends av{constructor(e){super({icon:J.caseSensitive,title:ype+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Ms("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class mZ extends av{constructor(e){super({icon:J.wholeWord,title:Spe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Ms("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class pZ extends av{constructor(e){super({icon:J.regex,title:kpe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Ms("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Lpe{constructor(e,t=0,n=e.length,i=t-1){this.items=e,this.start=t,this.end=n,this.index=i}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class xpe{constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new Lpe(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(const t of e)this._history.add(t)}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}}const Bv=te;class Dpe extends sr{constructor(e,t,n){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new O),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new O),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Y(e,Bv(".monaco-inputbox.idle"));const i=this.options.flexibleHeight?"textarea":"input",o=Y(this.element,Bv(".ibwrapper"));if(this.input=Y(o,Bv(i+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Y(o,Bv("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new zK(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Y(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const r=this._register(new nt(e.ownerDocument,"selectionchange")),a=se.filter(r.event,()=>{const l=e.ownerDocument.getSelection();return(l==null?void 0:l.anchorNode)===o});this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Zo(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(tl().setupManagedHover(Ms("mouse"),this.input,e))}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:Uc(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return CT(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if(this.state==="open"&&po(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${od(n.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e==null?void 0:e.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=ao(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{if(!this.message)return null;e=Y(i,Bv(".monaco-inputbox-container")),t();const o={inline:!0,className:"monaco-inputbox-message"},r=this.message.formatContent?bde(this.message.content,o):_de(this.message.content,o);r.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return r.style.backgroundColor=a.background??"",r.style.color=a.foreground??"",r.style.border=a.border?`1px solid ${a.border}`:"",Y(e,r),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=m("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=m("alertWarningMessage","Warning: {0}",this.message.content):n=m("alertInfoMessage","Info: {0}",this.message.content),Es(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText=" ",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",n=e.inputForeground??"",i=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=n,this.input.style.backgroundColor="inherit",this.input.style.color=n,this.element.style.border=`1px solid ${od(i,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=Uc(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,o=t.value;n!==null&&i!==null&&(this.value=o.substr(0,n)+e+o.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){var e;this._hideMessage(),this.message=null,(e=this.actionbar)==null||e.dispose(),super.dispose()}}class _Z extends Dpe{constructor(e,t,n){const i=m({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," or {0} for history","⇅"),o=m({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is ⇅ to represent the up and down arrow keys.']}," ({0} for history)","⇅");super(e,t,n),this._onDidFocus=this._register(new O),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new O),this.onDidBlur=this._onDidBlur.event,this.history=new xpe(n.history,100);const r=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(i)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?i:o,l=this.placeholder+a;n.showPlaceholderOnFocus&&!CT(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||r()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>r()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return n.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(o)||a(i)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",Zl(this.value?this.value:m("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,Zl(this.value))}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const Ipe=m("defaultLabel","input");class bZ extends sr{constructor(e,t,n){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new ai),this.additionalToggles=[],this._onDidOptionChange=this._register(new O),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new O),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new O),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new O),this._onKeyUp=this._register(new O),this._onCaseSensitiveKeyDown=this._register(new O),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new O),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||Ipe,this.showCommonFindToggles=!!n.showCommonFindToggles;const i=n.appendCaseSensitiveLabel||"",o=n.appendWholeWordsLabel||"",r=n.appendRegexLabel||"",a=n.history||[],l=!!n.flexibleHeight,c=!!n.flexibleWidth,d=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new _Z(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:n.showHistoryHint,flexibleHeight:l,flexibleWidth:c,flexibleMaxHeight:d,inputBoxStyles:n.inputBoxStyles}));const h=this._register(vb());if(this.showCommonFindToggles){this.regex=this._register(new pZ({appendTitle:r,isChecked:!1,hoverDelegate:h,...n.toggleStyles})),this._register(this.regex.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(f=>{this._onRegexKeyDown.fire(f)})),this.wholeWords=this._register(new mZ({appendTitle:o,isChecked:!1,hoverDelegate:h,...n.toggleStyles})),this._register(this.wholeWords.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new gZ({appendTitle:i,isChecked:!1,hoverDelegate:h,...n.toggleStyles})),this._register(this.caseSensitive.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(f=>{this._onCaseSensitiveKeyDown.fire(f)}));const u=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,f=>{if(f.equals(15)||f.equals(17)||f.equals(9)){const g=u.indexOf(this.domNode.ownerDocument.activeElement);if(g>=0){let p=-1;f.equals(17)?p=(g+1)%u.length:f.equals(15)&&(g===0?p=u.length-1:p=g-1),f.equals(9)?(u[g].blur(),this.inputBox.focus()):p>=0&&u[p].focus(),it.stop(f,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(n==null?void 0:n.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e==null||e.appendChild(this.domNode),this._register($(this.inputBox.inputElement,"compositionstart",u=>{this.imeSessionInProgress=!0})),this._register($(this.inputBox.inputElement,"compositionend",u=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,u=>this._onKeyDown.fire(u)),this.onkeyup(this.inputBox.inputElement,u=>this._onKeyUp.fire(u)),this.oninput(this.inputBox.inputElement,u=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,u=>this._onMouseDown.fire(u))}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){var e,t,n;this.domNode.classList.remove("disabled"),this.inputBox.enable(),(e=this.regex)==null||e.enable(),(t=this.wholeWords)==null||t.enable(),(n=this.caseSensitive)==null||n.enable();for(const i of this.additionalToggles)i.enable()}disable(){var e,t,n;this.domNode.classList.add("disabled"),this.inputBox.disable(),(e=this.regex)==null||e.disable(),(t=this.wholeWords)==null||t.disable(),(n=this.caseSensitive)==null||n.disable();for(const i of this.additionalToggles)i.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new q;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(n=>{this._onDidOptionChange.fire(n),!n&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){var t,n,i;e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(((t=this.caseSensitive)==null?void 0:t.width())??0)+(((n=this.wholeWords)==null?void 0:n.width())??0)+(((i=this.regex)==null?void 0:i.width())??0)+this.additionalToggles.reduce((o,r)=>o+r.width(),0)}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){var e;return((e=this.caseSensitive)==null?void 0:e.checked)??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){var e;return((e=this.wholeWords)==null?void 0:e.checked)??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){var e;return((e=this.regex)==null?void 0:e.checked)??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){var e;(e=this.caseSensitive)==null||e.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}}const Tpe=te;class Epe extends F{constructor(e,t,n){super(),this.parent=e,this.onKeyDown=o=>hn(this.findInput.inputBox.inputElement,ee.KEY_DOWN,o),this.onDidChange=o=>this.findInput.onDidChange(o),this.container=Y(this.parent,Tpe(".quick-input-box")),this.findInput=this._register(new bZ(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:n}));const i=this.findInput.inputBox.inputElement;i.role="combobox",i.ariaHasPopup="menu",i.ariaAutoComplete="list",i.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}showDecoration(e){e===Tn.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===Tn.Info?1:e===Tn.Warning?2:3,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===Tn.Info?1:e===Tn.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}class Npe{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:F.None}}renderElement(e,t,n,i){var l;if((l=n.disposable)==null||l.dispose(),!n.data)return;const o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,n.data,i);const r=new an,a=o.resolve(e,r.token);n.disposable={dispose:()=>r.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(c=>this.renderer.renderElement(c,e,n.data,i))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class Rpe{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function Mpe(s,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new Rpe(s,e.accessibilityProvider)}}class Ape{constructor(e,t,n,i,o={}){const r=()=>this.model,a=i.map(l=>new Npe(l,r));this.list=new or(e,t,n,a,Mpe(r,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return se.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return se.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeSelection(){return se.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,Hs(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}var lv=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};const Ppe=!1;var ML;(function(s){s.North="north",s.South="south",s.East="east",s.West="west"})(ML||(ML={}));let Ope=4;const Fpe=new O;let Wpe=300;const Bpe=new O;class tW{constructor(e){this.el=e,this.disposables=new q}get onPointerMove(){return this.disposables.add(new nt(Le(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new nt(Le(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}lv([Nn],tW.prototype,"onPointerMove",null);lv([Nn],tW.prototype,"onPointerUp",null);class nW{get onPointerMove(){return this.disposables.add(new nt(this.el,Ft.Change)).event}get onPointerUp(){return this.disposables.add(new nt(this.el,Ft.End)).event}constructor(e){this.el=e,this.disposables=new q}dispose(){this.disposables.dispose()}}lv([Nn],nW.prototype,"onPointerMove",null);lv([Nn],nW.prototype,"onPointerUp",null);class AL{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}lv([Nn],AL.prototype,"onPointerMove",null);lv([Nn],AL.prototype,"onPointerUp",null);const YH="pointer-events-disabled";class $i extends F{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=Y(this.el,te(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(ve(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new nt(this._orthogonalStartDragHandle,"mouseenter")).event(()=>$i.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new nt(this._orthogonalStartDragHandle,"mouseleave")).event(()=>$i.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=Y(this.el,te(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(ve(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new nt(this._orthogonalEndDragHandle,"mouseenter")).event(()=>$i.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new nt(this._orthogonalEndDragHandle,"mouseleave")).event(()=>$i.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,n){super(),this.hoverDelay=Wpe,this.hoverDelayer=this._register(new kr(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new O),this._onDidStart=this._register(new O),this._onDidChange=this._register(new O),this._onDidReset=this._register(new O),this._onDidEnd=this._register(new O),this.orthogonalStartSashDisposables=this._register(new q),this.orthogonalStartDragHandleDisposables=this._register(new q),this.orthogonalEndSashDisposables=this._register(new q),this.orthogonalEndDragHandleDisposables=this._register(new q),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=Y(e,te(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),et&&this.el.classList.add("mac");const i=this._register(new nt(this.el,"mousedown")).event;this._register(i(h=>this.onPointerStart(h,new tW(e)),this));const o=this._register(new nt(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));const r=this._register(new nt(this.el,"mouseenter")).event;this._register(r(()=>$i.onMouseEnter(this)));const a=this._register(new nt(this.el,"mouseleave")).event;this._register(a(()=>$i.onMouseLeave(this))),this._register(Ki.addTarget(this.el));const l=this._register(new nt(this.el,Ft.Start)).event;this._register(l(h=>this.onPointerStart(h,new nW(this.el)),this));const c=this._register(new nt(this.el,Ft.Tap)).event;let d;this._register(c(h=>{if(d){clearTimeout(d),d=void 0,this.onPointerDoublePress(h);return}clearTimeout(d),d=setTimeout(()=>d=void 0,250)},this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=Ope,this._register(Fpe.event(h=>{this.size=h,this.layout()}))),this._register(Bpe.event(h=>this.hoverDelay=h)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",Ppe),this.layout()}onPointerStart(e,t){it.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const g=this.getOrthogonalSash(e);g&&(n=!0,e.__orthogonalSashEvent=!0,g.onPointerStart(e,new AL(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new AL(t))),!this.state)return;const i=this.el.ownerDocument.getElementsByTagName("iframe");for(const g of i)g.classList.add(YH);const o=e.pageX,r=e.pageY,a=e.altKey,l={startX:o,currentX:o,startY:r,currentY:r,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=Qo(this.el),d=()=>{let g="";n?g="all-scroll":this.orientation===1?this.state===1?g="s-resize":this.state===2?g="n-resize":g=et?"row-resize":"ns-resize":this.state===1?g="e-resize":this.state===2?g="w-resize":g=et?"col-resize":"ew-resize",c.textContent=`* { cursor: ${g} !important; }`},h=new q;d(),n||this.onDidEnablementChange.event(d,null,h);const u=g=>{it.stop(g,!1);const p={startX:o,currentX:g.pageX,startY:r,currentY:g.pageY,altKey:a};this._onDidChange.fire(p)},f=g=>{it.stop(g,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),h.dispose();for(const p of i)p.classList.remove(YH)};t.onPointerMove(u,null,h),t.onPointerUp(f,null,h),h.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&$i.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&$i.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){$i.onMouseLeave(this)}layout(){if(this.orientation===0){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!oi(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const Hpe={separatorBorder:Z.transparent};class vZ{set size(e){this._size=e}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){var n,i;if(e!==this.visible){e?(this.size=ms(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{(i=(n=this.view).setVisible)==null||i.call(n,e)}catch(o){console.error("Splitview: Failed to set visible view"),console.error(o)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,n,i){this.container=e,this.view=t,this.disposable=i,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(n){console.error("Splitview: Failed to layout view"),console.error(n)}}dispose(){this.disposable.dispose()}}class Vpe extends vZ{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class zpe extends vZ{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var kc;(function(s){s[s.Idle=0]="Idle",s[s.Busy=1]="Busy"})(kc||(kc={}));var PL;(function(s){s.Distribute={type:"distribute"};function e(i){return{type:"split",index:i}}s.Split=e;function t(i){return{type:"auto",index:i}}s.Auto=t;function n(i){return{type:"invisible",cachedVisibleSize:i}}s.Invisible=n})(PL||(PL={}));class CZ extends F{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=kc.Idle,this._onDidSashChange=this._register(new O),this._onDidSashReset=this._register(new O),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Y(this.el,te(".sash-container")),this.viewContainer=te(".split-view-container"),this.scrollable=this._register(new nv({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:i=>So(Le(this.el),i)})),this.scrollableElement=this._register(new UT(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));const n=this._register(new nt(this.viewContainer,"scroll")).event;this._register(n(i=>{const o=this.scrollableElement.getScrollPosition(),r=Math.abs(this.viewContainer.scrollLeft-o.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-o.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(r!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:r,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(i=>{i.scrollTopChanged&&(this.viewContainer.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this.viewContainer.scrollLeft=i.scrollLeft)})),Y(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||Hpe),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((i,o)=>{const r=ls(i.visible)||i.visible?i.size:{type:"invisible",cachedVisibleSize:i.size},a=i.view;this.doAddView(a,r,o,!0)}),this._contentSize=this.viewItems.reduce((i,o)=>i+o.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,i){this.doAddView(e,t,n,i)}layout(e,t){const n=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let i=0;for(let o=0;o<this.viewItems.length;o++){const r=this.viewItems[o],a=this.proportions[o];typeof a=="number"?i+=a:e-=r.size}for(let o=0;o<this.viewItems.length;o++){const r=this.viewItems[o],a=this.proportions[o];typeof a=="number"&&i>0&&(r.size=ms(Math.round(a*e/i),r.minimumSize,r.maximumSize))}}else{const i=Hs(this.viewItems.length),o=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,o,r)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const i=this.sashItems.findIndex(a=>a.sash===e),o=Jr($(this.el.ownerDocument.body,"keydown",a=>r(this.sashDragState.current,a.altKey)),$(this.el.ownerDocument.body,"keyup",()=>r(this.sashDragState.current,!1))),r=(a,l)=>{const c=this.viewItems.map(g=>g.size);let d=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(i===this.sashItems.length-1){const p=this.viewItems[i];d=(p.minimumSize-p.size)/2,h=(p.maximumSize-p.size)/2}else{const p=this.viewItems[i+1];d=(p.size-p.maximumSize)/2,h=(p.size-p.minimumSize)/2}let u,f;if(!l){const g=Hs(i,-1),p=Hs(i+1,this.viewItems.length),_=g.reduce((D,N)=>D+(this.viewItems[N].minimumSize-c[N]),0),b=g.reduce((D,N)=>D+(this.viewItems[N].viewMaximumSize-c[N]),0),v=p.length===0?Number.POSITIVE_INFINITY:p.reduce((D,N)=>D+(c[N]-this.viewItems[N].minimumSize),0),C=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((D,N)=>D+(c[N]-this.viewItems[N].viewMaximumSize),0),w=Math.max(_,C),y=Math.min(v,b),k=this.findFirstSnapIndex(g),x=this.findFirstSnapIndex(p);if(typeof k=="number"){const D=this.viewItems[k],N=Math.floor(D.viewMinimumSize/2);u={index:k,limitDelta:D.visible?w-N:w+N,size:D.size}}if(typeof x=="number"){const D=this.viewItems[x],N=Math.floor(D.viewMinimumSize/2);f={index:x,limitDelta:D.visible?y+N:y-N,size:D.size}}}this.sashDragState={start:a,current:a,index:i,sizes:c,minDelta:d,maxDelta:h,alt:l,snapBefore:u,snapAfter:f,disposable:o}};r(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:i,alt:o,minDelta:r,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const d=e-n,h=this.resize(t,d,i,void 0,void 0,r,a,l,c);if(o){const u=t===this.sashItems.length-1,f=this.viewItems.map(C=>C.size),g=u?t:t+1,p=this.viewItems[g],_=p.size-p.maximumSize,b=p.size-p.minimumSize,v=u?t-1:t+1;this.resize(v,-h,f,void 0,void 0,_,b)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=ms(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==kc.Idle)throw new Error("Cant modify splitview");this.state=kc.Busy;try{const n=Hs(this.viewItems.length).filter(a=>a!==e),i=[...n.filter(a=>this.viewItems[a].priority===1),e],o=n.filter(a=>this.viewItems[a].priority===2),r=this.viewItems[e];t=Math.round(t),t=ms(t,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=t,this.relayout(i,o)}finally{this.state=kc.Idle}}}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=ms(n,a.minimumSize,a.maximumSize);const i=Hs(this.viewItems.length),o=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);this.relayout(o,r)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,i){if(this.state!==kc.Idle)throw new Error("Cant modify splitview");this.state=kc.Busy;try{const o=te(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(n));const r=e.onDidChange(u=>this.onViewChange(d,u)),a=ve(()=>o.remove()),l=Jr(r,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const d=this.orientation===0?new Vpe(o,e,c,l):new zpe(o,e,c,l);if(this.viewItems.splice(n,0,d),this.viewItems.length>1){const u={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},f=this.orientation===0?new $i(this.sashContainer,{getHorizontalSashTop:D=>this.getSashPosition(D),getHorizontalSashWidth:this.getSashOrthogonalSize},{...u,orientation:1}):new $i(this.sashContainer,{getVerticalSashLeft:D=>this.getSashPosition(D),getVerticalSashHeight:this.getSashOrthogonalSize},{...u,orientation:0}),g=this.orientation===0?D=>({sash:f,start:D.startY,current:D.currentY,alt:D.altKey}):D=>({sash:f,start:D.startX,current:D.currentX,alt:D.altKey}),_=se.map(f.onDidStart,g)(this.onSashStart,this),v=se.map(f.onDidChange,g)(this.onSashChange,this),w=se.map(f.onDidEnd,()=>this.sashItems.findIndex(D=>D.sash===f))(this.onSashEnd,this),y=f.onDidReset(()=>{const D=this.sashItems.findIndex(U=>U.sash===f),N=Hs(D,-1),W=Hs(D+1,this.viewItems.length),B=this.findFirstSnapIndex(N),z=this.findFirstSnapIndex(W);typeof B=="number"&&!this.viewItems[B].visible||typeof z=="number"&&!this.viewItems[z].visible||this._onDidSashReset.fire(D)}),k=Jr(_,v,w,y,f),x={sash:f,disposable:k};this.sashItems.splice(n-1,0,x)}o.appendChild(e.element);let h;typeof t!="number"&&t.type==="split"&&(h=[t.index]),i||this.relayout([n],h),!i&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=kc.Idle}}relayout(e,t){const n=this.viewItems.reduce((i,o)=>i+o.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(d=>d.size),i,o,r=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const d=Hs(e,-1),h=Hs(e+1,this.viewItems.length);if(o)for(const x of o)dN(d,x),dN(h,x);if(i)for(const x of i)fy(d,x),fy(h,x);const u=d.map(x=>this.viewItems[x]),f=d.map(x=>n[x]),g=h.map(x=>this.viewItems[x]),p=h.map(x=>n[x]),_=d.reduce((x,D)=>x+(this.viewItems[D].minimumSize-n[D]),0),b=d.reduce((x,D)=>x+(this.viewItems[D].maximumSize-n[D]),0),v=h.length===0?Number.POSITIVE_INFINITY:h.reduce((x,D)=>x+(n[D]-this.viewItems[D].minimumSize),0),C=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((x,D)=>x+(n[D]-this.viewItems[D].maximumSize),0),w=Math.max(_,C,r),y=Math.min(v,b,a);let k=!1;if(l){const x=this.viewItems[l.index],D=t>=l.limitDelta;k=D!==x.visible,x.setVisible(D,l.size)}if(!k&&c){const x=this.viewItems[c.index],D=t<c.limitDelta;k=D!==x.visible,x.setVisible(D,c.size)}if(k)return this.resize(e,t,n,i,o,r,a);t=ms(t,w,y);for(let x=0,D=t;x<u.length;x++){const N=u[x],W=ms(f[x]+D,N.minimumSize,N.maximumSize),B=W-f[x];D-=B,N.size=W}for(let x=0,D=t;x<g.length;x++){const N=g[x],W=ms(p[x]-D,N.minimumSize,N.maximumSize),B=W-p[x];D+=B,N.size=W}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const i=Hs(this.viewItems.length-1,-1),o=i.filter(a=>this.viewItems[a].priority===1),r=i.filter(a=>this.viewItems[a].priority===2);for(const a of r)dN(i,a);for(const a of o)fy(i,a);typeof e=="number"&&fy(i,e);for(let a=0;n!==0&&a<i.length;a++){const l=this.viewItems[i[a]],c=ms(l.size+n,l.minimumSize,l.maximumSize),d=c-l.size;n-=d,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),i=[...this.viewItems].reverse();e=!1;const o=i.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const r=i.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],d=this.viewItems[l];a+=d.size;const h=!(t[l]&&r[l+1]),u=!(n[l]&&o[l+1]);if(h&&u){const f=Hs(l,-1),g=Hs(l+1,this.viewItems.length),p=this.findFirstSnapIndex(f),_=this.findFirstSnapIndex(g),b=typeof p=="number"&&!this.viewItems[p].visible,v=typeof _=="number"&&!this.viewItems[_].visible;b&&o[l]&&(a>0||this.startSnappingEnabled)?c.state=1:v&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=2:c.state=0}else h&&!u?c.state=1:!h&&u?c.state=2:c.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}areViewsDistributed(){let e,t;for(const n of this.viewItems)if(e=e===void 0?n.size:Math.min(e,n.size),t=t===void 0?n.size:Math.max(t,n.size),t-e>2)return!1;return!0}dispose(){var e;(e=this.sashDragState)==null||e.disposable.dispose(),Mt(this.viewItems),this.viewItems=[],this.sashItems.forEach(t=>t.disposable.dispose()),this.sashItems=[],super.dispose()}}const GD=class GD{constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=GD.TemplateId,this.renderedTemplates=new Set;const i=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(const o of e){const r=i.get(o.templateId);if(!r)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(r)}}renderTemplate(e){const t=Y(e,te(".monaco-table-tr")),n=[],i=[];for(let r=0;r<this.columns.length;r++){const a=this.renderers[r],l=Y(t,te(".monaco-table-td",{"data-col-index":r}));l.style.width=`${this.getColumnSize(r)}px`,n.push(l),i.push(a.renderTemplate(l))}const o={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(o),o}renderElement(e,t,n,i){for(let o=0;o<this.columns.length;o++){const a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,n.cellTemplateData[o],i)}}disposeElement(e,t,n,i){for(let o=0;o<this.columns.length;o++){const r=this.renderers[o];if(r.disposeElement){const l=this.columns[o].project(e);r.disposeElement(l,t,n.cellTemplateData[o],i)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);xi(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}};GD.TemplateId="row";let OL=GD;function $pe(s){return{getHeight(e){return s.getHeight(e)},getTemplateId(){return OL.TemplateId}}}class Upe extends F{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??se.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new O,this.onDidLayout=this._onDidLayout.event,this.element=te(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(tl().setupManagedHover(Ms("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}const ZD=class ZD{get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,n,i,o,r){this.virtualDelegate=n,this.columns=i,this.domId=`table_id_${++ZD.InstanceCount}`,this.disposables=new q,this.cachedWidth=0,this.cachedHeight=0,this.domNode=Y(t,te(`.monaco-table.${this.domId}`));const a=i.map((d,h)=>this.disposables.add(new Upe(d,h))),l={size:a.reduce((d,h)=>d+h.column.weight,0),views:a.map(d=>({size:d.column.weight,view:d}))};this.splitview=this.disposables.add(new CZ(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const c=new OL(i,o,d=>this.splitview.getViewSize(d));this.list=this.disposables.add(new or(e,this.domNode,$pe(n),[c],r)),se.any(...a.map(d=>d.onDidLayout))(([d,h])=>c.layoutColumn(d,h),null,this.disposables),this.splitview.onDidSashReset(d=>{const h=i.reduce((f,g)=>f+g.weight,0),u=i[d].weight/h*this.cachedWidth;this.splitview.resizeView(d,u)},null,this.disposables),this.styleElement=Qo(this.domNode),this.style(mfe)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}};ZD.InstanceCount=0;let OP=ZD;var Ao;(function(s){s[s.Expanded=0]="Expanded",s[s.Collapsed=1]="Collapsed",s[s.PreserveOrExpanded=2]="PreserveOrExpanded",s[s.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(Ao||(Ao={}));var Rf;(function(s){s[s.Unknown=0]="Unknown",s[s.Twistie=1]="Twistie",s[s.Element=2]="Element",s[s.Filter=3]="Filter"})(Rf||(Rf={}));class Vo extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class iW{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function sW(s){return typeof s=="object"&&"visibility"in s&&"data"in s}function m1(s){switch(s){case!0:return 1;case!1:return 0;default:return s}}function mR(s){return typeof s.collapsible=="boolean"}class jpe{constructor(e,t,n,i={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new f0,this._onDidChangeCollapseState=new O,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new O,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new O,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new kr(iq),this.collapseByDefault=typeof i.collapseByDefault>"u"?!1:i.collapseByDefault,this.allowNonCollapsibleParents=i.allowNonCollapsibleParents??!1,this.filter=i.filter,this.autoExpandSingleChildren=typeof i.autoExpandSingleChildren>"u"?!1:i.autoExpandSingleChildren,this.root={parent:void 0,element:n,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,n=ot.empty(),i={}){if(e.length===0)throw new Vo(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}spliceSmart(e,t,n,i=ot.empty(),o,r=o.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,n,i,o);const l=[...i],c=t[t.length-1],d=new Ml({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+n)].map(p=>e.getId(p.element).toString())}).ComputeDiff(!1);if(d.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,n,l,o);const h=t.slice(0,-1),u=(p,_,b)=>{if(r>0)for(let v=0;v<b;v++)p--,_--,this.spliceSmart(e,[...h,p,0],Number.MAX_SAFE_INTEGER,l[_].children,o,r-1)};let f=Math.min(a.children.length,c+n),g=l.length;for(const p of d.changes.sort((_,b)=>b.originalStart-_.originalStart))u(f,g,f-(p.originalStart+p.originalLength)),f=p.originalStart,g=p.modifiedStart-c,this.spliceSimple([...h,f],p.originalLength,ot.slice(l,g,g+p.modifiedLength),o);u(f,g,f)}spliceSimple(e,t,n=ot.empty(),{onDidCreateNode:i,onDidDeleteNode:o,diffIdentityProvider:r}){const{parentNode:a,listIndex:l,revealed:c,visible:d}=this.getParentNodeWithListIndex(e),h=[],u=ot.map(n,y=>this.createTreeNode(y,a,a.visible?1:0,c,h,i)),f=e[e.length-1];let g=0;for(let y=f;y>=0&&y<a.children.length;y--){const k=a.children[y];if(k.visible){g=k.visibleChildIndex;break}}const p=[];let _=0,b=0;for(const y of u)p.push(y),b+=y.renderNodeCount,y.visible&&(y.visibleChildIndex=g+_++);const v=G7(a.children,f,t,p);r?a.lastDiffIds?G7(a.lastDiffIds,f,t,p.map(y=>r.getId(y.element).toString())):a.lastDiffIds=a.children.map(y=>r.getId(y.element).toString()):a.lastDiffIds=void 0;let C=0;for(const y of v)y.visible&&C++;if(C!==0)for(let y=f+p.length;y<a.children.length;y++){const k=a.children[y];k.visible&&(k.visibleChildIndex-=C)}if(a.visibleChildrenCount+=_-C,c&&d){const y=v.reduce((k,x)=>k+(x.visible?x.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,b-y),this.list.splice(l,y,h)}if(v.length>0&&o){const y=k=>{o(k),k.children.forEach(y)};v.forEach(y)}this._onDidSplice.fire({insertedNodes:p,deletedNodes:v});let w=a;for(;w;){if(w.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}w=w.parent}}rerender(e){if(e.length===0)throw new Vo(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:i}=this.getTreeNodeWithListIndex(e);t.visible&&i&&this.list.splice(n,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:i}=this.getTreeNodeWithListIndex(e);return n&&i?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const i={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsed);const o={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){const{node:n,listIndex:i,revealed:o}=this.getTreeNodeWithListIndex(e),r=this._setListNodeCollapseState(n,i,o,t);if(n!==this.root&&this.autoExpandSingleChildren&&r&&!mR(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return r}_setListNodeCollapseState(e,t,n,i){const o=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!o)return o;const r=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=r-(t===-1?0:1);return this.list.splice(t+1,l,a.slice(1)),o}_setNodeCollapseState(e,t,n){let i;if(e===this.root?i=!1:(mR(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!mR(t)&&t.recursive)for(const o of e.children)i=this._setNodeCollapseState(o,t,!0)||i;return i}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,n,i,o,r){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,i&&o.push(a);const c=e.children||ot.empty(),d=i&&l!==0&&!a.collapsed;let h=0,u=1;for(const f of c){const g=this.createTreeNode(f,a,l,d,o,r);a.children.push(g),u+=g.renderNodeCount,g.visible&&(g.visibleChildIndex=h++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=h,a.visible=l===2?h>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=u):(a.renderNodeCount=0,i&&o.pop()),r==null||r(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,i=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,e.renderNodeCount=0,!1;i&&n.push(e)}const r=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==0){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,o,n,i&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=n.length-r):(e.renderNodeCount=0,i&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):sW(n)?(e.filterData=n.data,m1(n.visibility)):(e.filterData=void 0,m1(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...i]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(i,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...i]=e;if(n<0||n>t.children.length)throw new Vo(this.user,"Invalid tree location");return this.getTreeNode(i,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:i,visible:o}=this.getParentNodeWithListIndex(e),r=e[e.length-1];if(r<0||r>t.children.length)throw new Vo(this.user,"Invalid tree location");const a=t.children[r];return{node:a,listIndex:n,revealed:i,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,i=!0,o=!0){const[r,...a]=e;if(r<0||r>t.children.length)throw new Vo(this.user,"Invalid tree location");for(let l=0;l<r;l++)n+=t.children[l].renderNodeCount;return i=i&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:i,visible:o}:this.getParentNodeWithListIndex(a,t.children[r],n+1,i,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:nte(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}}class qpe extends R0{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function pR(s){return s instanceof R0?new qpe(s):s}class Kpe{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=F.None,this.disposables=new q}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)==null||i.call(n,pR(e),t)}onDragOver(e,t,n,i,o,r=!0){const a=this.dnd.onDragOver(pR(e),t&&t.element,n,i,o),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=au(()=>{const f=this.modelProvider(),g=f.getNodeLocation(t);f.isCollapsed(g)&&f.setCollapsed(g,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!r){const f=typeof a=="boolean"?a:a.accept,g=typeof a=="boolean"?void 0:a.effect;return{accept:f,effect:g,feedback:[n]}}return a}if(a.bubble===1){const f=this.modelProvider(),g=f.getNodeLocation(t),p=f.getParentNodeLocation(g),_=f.getNode(p),b=p&&f.getListIndex(p);return this.onDragOver(e,_,b,i,o,!1)}const c=this.modelProvider(),d=c.getNodeLocation(t),h=c.getListIndex(d),u=c.getListRenderCount(d);return{...a,feedback:Hs(h,h+u)}}drop(e,t,n,i,o){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(pR(e),t&&t.element,n,i,o)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function Gpe(s,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new Kpe(s,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){const n=s(),i=n.getNodeLocation(t),o=n.getParentNodeLocation(i);return n.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}class oW{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var n,i;(i=(n=this.delegate).setDynamicHeight)==null||i.call(n,e.element,t)}}var yb;(function(s){s.None="none",s.OnHover="onHover",s.Always="always"})(yb||(yb={}));class Zpe{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new q,this.onDidChange=se.forEach(e,n=>this._elements=n,this.disposables)}dispose(){this.disposables.dispose()}}const pw=class pw{constructor(e,t,n,i,o,r={}){var a;this.renderer=e,this.modelProvider=t,this.activeNodes=i,this.renderedIndentGuides=o,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=pw.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=F.None,this.disposables=new q,this.templateId=e.templateId,this.updateOptions(r),se.map(n,l=>l.node)(this.onDidChangeNodeTwistieState,this,this.disposables),(a=e.onDidChangeTwistieState)==null||a.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=ms(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[n,i]of this.renderedNodes)this.renderTreeElement(n,i)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==yb.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[n,i]of this.renderedNodes)this._renderIndentGuides(n,i);if(this.indentGuidesDisposable.dispose(),t){const n=new q;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=Y(e,te(".monaco-tl-row")),n=Y(t,te(".monaco-tl-indent")),i=Y(t,te(".monaco-tl-twistie")),o=Y(t,te(".monaco-tl-contents")),r=this.renderer.renderTemplate(o);return{container:e,indent:n,twistie:i,indentGuidesDisposable:F.None,templateData:r}}renderElement(e,t,n,i){this.renderedNodes.set(e,n),this.renderedElements.set(e.element,e),this.renderTreeElement(e,n),this.renderer.renderElement(e,t,n.templateData,i)}disposeElement(e,t,n,i){var o,r;n.indentGuidesDisposable.dispose(),(r=(o=this.renderer).disposeElement)==null||r.call(o,e,t,n.templateData,i),typeof i=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){const n=pw.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${n}px`,t.indent.style.width=`${n+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...De.asClassNameArray(J.treeItemExpanded));let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...De.asClassNameArray(J.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(xi(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new q,i=this.modelProvider();for(;;){const o=i.getNodeLocation(e),r=i.getParentNodeLocation(o);if(!r)break;const a=i.getNode(r),l=te(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(a)&&l.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(a,l),n.add(ve(()=>this.renderedIndentGuides.delete(a,l))),e=a}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,n=this.modelProvider();e.forEach(i=>{const o=n.getNodeLocation(i);try{const r=n.getParentNodeLocation(o);i.collapsible&&i.children.length>0&&!i.collapsed?t.add(i):r&&t.add(n.getNode(r))}catch{}}),this.activeIndentNodes.forEach(i=>{t.has(i)||this.renderedIndentGuides.forEach(i,o=>o.classList.remove("active"))}),t.forEach(i=>{this.activeIndentNodes.has(i)||this.renderedIndentGuides.forEach(i,o=>o.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),Mt(this.disposables)}};pw.DefaultIndent=8;let FP=pw;class Ype{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(e,t,n){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=n,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new q,e.onWillRefilter(this.reset,this,this.disposables)}filter(e,t){let n=1;if(this._filter){const r=this._filter.filter(e,t);if(typeof r=="boolean"?n=r?1:0:sW(r)?n=m1(r.visibility):n=r,n===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:za.Default,visibility:n};const i=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),o=Array.isArray(i)?i:[i];for(const r of o){const a=r&&r.toString();if(typeof a>"u")return{data:za.Default,visibility:n};let l;if(this.tree.findMatchType===rm.Contiguous){const c=a.toLowerCase().indexOf(this._lowercasePattern);if(c>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let d=this._lowercasePattern.length;d>0;d--)l.push(c+d-1)}}else l=nm(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,o.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this.tree.findMode===Zc.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:za.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){Mt(this.disposables)}}var Zc;(function(s){s[s.Highlight=0]="Highlight",s[s.Filter=1]="Filter"})(Zc||(Zc={}));var rm;(function(s){s[s.Fuzzy=0]="Fuzzy",s[s.Contiguous=1]="Contiguous"})(rm||(rm={}));let Xpe=class{get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,n,i,o,r={}){this.tree=e,this.view=n,this.filter=i,this.contextViewProvider=o,this.options=r,this._pattern="",this.width=0,this._onDidChangeMode=new O,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new O,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new O,this._onDidChangeOpenState=new O,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new q,this.disposables=new q,this._mode=e.options.defaultFindMode??Zc.Highlight,this._matchType=e.options.defaultFindMatchType??rm.Fuzzy,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){var t,n,i;const e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(Es(m("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?(t=this.widget)==null||t.showMessage({type:2,content:m("not found","No elements found.")}):(n=this.widget)==null||n.showMessage({type:2})):((i=this.widget)==null||i.clearMessage(),this.pattern&&Es(m("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!za.isDefault(e.filterData)}layout(e){var t;this.width=e,(t=this.widget)==null||t.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function Qpe(s,e){return s.position===e.position&&wZ(s,e)}function wZ(s,e){return s.node.element===e.node.element&&s.startIndex===e.startIndex&&s.height===e.height&&s.endIndex===e.endIndex}class Jpe{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return en(this.stickyNodes,e.stickyNodes,Qpe)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!en(this.stickyNodes,e.stickyNodes,wZ)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],n=e.stickyNodes[e.count-1];return t.position!==n.position}}class e_e{constrainStickyScrollNodes(e,t,n){for(let i=0;i<e.length;i++){const o=e[i];if(o.position+o.height>n||i>=t)return e.slice(0,i)}return e}}let XH=class extends F{constructor(e,t,n,i,o,r={}){super(),this.tree=e,this.model=t,this.view=n,this.treeDelegate=o,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(r);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=r.stickyScrollDelegate??new e_e,this._widget=this._register(new t_e(n.getScrollableElement(),n,e,i,o,r.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(n.onDidScroll(()=>this.update())),this._register(n.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(0);if(!e||this.tree.scrollTop===0){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let n=e,i=0,o=this.getNextStickyNode(n,void 0,i);for(;o&&(t.push(o),i+=o.height,!(t.length<=this.stickyScrollMaxItemCount&&(n=this.getNextVisibleNode(o),!n)));)o=this.getNextStickyNode(n,o.node,i);const r=this.constrainStickyNodes(t);return r.length?new Jpe(r):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,n){const i=this.getAncestorUnderPrevious(e,t);if(i&&!(i===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,n))))return this.createStickyScrollNode(i,n)}nodeTopAlignsWithStickyNodesBottom(e,t){const n=this.getNodeIndex(e),i=this.view.getElementTop(n),o=t;return this.view.scrollTop===i-o}createStickyScrollNode(e,t){const n=this.treeDelegate.getHeight(e),{startIndex:i,endIndex:o}=this.getNodeRange(e),r=this.calculateStickyNodePosition(o,t,n);return{node:e,position:r,height:n,startIndex:i,endIndex:o}}getAncestorUnderPrevious(e,t=void 0){let n=e,i=this.getParentNode(n);for(;i;){if(i===t)return n;n=i,i=this.getParentNode(n)}if(t===void 0)return n}calculateStickyNodePosition(e,t,n){let i=this.view.getRelativeTop(e);if(i===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),d=this.view.getRelativeTop(e+1);i=d?d-c/this.view.renderHeight:null}if(i===null)return t;const o=this.view.element(e),r=this.treeDelegate.getHeight(o),l=i*this.view.renderHeight+r;return t+n>l&&t<=l?l-n:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,n=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&n.position+n.height<=t)return e;const i=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!i.length)return[];const o=i[i.length-1];if(i.length>this.stickyScrollMaxItemCount||o.position+o.height>t)throw new Error("stickyScrollDelegate violates constraints");return i}getParentNode(e){const t=this.model.getNodeLocation(e),n=this.model.getParentNodeLocation(t);return n?this.model.getNode(n):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),n=this.model.getListIndex(t);if(n<0)throw new Error("Node not found in tree");const i=this.model.getListRenderCount(t),o=n+i-1;return{startIndex:n,endIndex:o}}nodePositionTopBelowWidget(e){const t=[];let n=this.getParentNode(e);for(;n;)t.push(n),n=this.getParentNode(n);let i=0;for(let o=0;o<t.length&&o<this.stickyScrollMaxItemCount;o++)i+=this.treeDelegate.getHeight(t[o]);return i}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(!e.stickyScrollMaxItemCount)return;const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}},t_e=class{constructor(e,t,n,i,o,r){this.view=t,this.tree=n,this.treeRenderers=i,this.treeDelegate=o,this.accessibilityProvider=r,this._previousElements=[],this._previousStateDisposables=new q,this._rootDomNode=te(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=te(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new n_e(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}setState(e){const t=!!this._previousState&&this._previousState.count>0,n=!!e&&e.count>0;if(!t&&!n||t&&n&&this._previousState.equal(e))return;if(t!==n&&this.setVisible(n),!n){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const i=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${i.position}px`;else{this._previousStateDisposables.clear();const o=Array(e.count);for(let r=e.count-1;r>=0;r--){const a=e.stickyNodes[r],{element:l,disposable:c}=this.createElement(a,r,e.count);o[r]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(c)}this.stickyScrollFocus.updateElements(o,e),this._previousElements=o}this._previousState=e,this._rootDomNode.style.height=`${i.position+i.height}px`}createElement(e,t,n){const i=e.startIndex,o=document.createElement("div");o.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(o.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(o.style.lineHeight=`${e.height}px`),o.classList.add("monaco-tree-sticky-row"),o.classList.add("monaco-list-row"),o.setAttribute("data-index",`${i}`),o.setAttribute("data-parity",i%2===0?"even":"odd"),o.setAttribute("id",this.view.getElementID(i));const r=this.setAccessibilityAttributes(o,e.node.element,t,n),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(u=>u.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const d=l.renderTemplate(o);l.renderElement(c,e.startIndex,d,e.height);const h=ve(()=>{r.dispose(),l.disposeElement(c,e.startIndex,d,e.height),l.disposeTemplate(d),o.remove()});return{element:o,disposable:h}}setAccessibilityAttributes(e,t,n,i){if(!this.accessibilityProvider)return F.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,n,i))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,n))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const o=this.accessibilityProvider.getAriaLabel(t),r=o&&typeof o!="string"?o:br(o),a=Ae(c=>{const d=c.readObservable(r);d?e.setAttribute("aria-label",d):e.removeAttribute("aria-label")});typeof o=="string"||o&&e.setAttribute("aria-label",o.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}};class n_e extends F{get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new O,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new O,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register($(this.container,"focus",()=>this.onFocus())),this._register($(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(n=>this.onKeyDown(n))),this._register(this.view.onMouseDown(n=>this.onMouseDown(n))),this._register(this.view.onContextMenu(n=>this.handleContextMenu(n)))}handleContextMenu(e){const t=e.browserEvent.target;if(!c1(t)&&!EC(t)){this.focusedLast()&&this.view.domFocus();return}if(!Mc(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const r=this.state.stickyNodes.findIndex(a=>{var l;return a.node.element===((l=e.element)==null?void 0:l.element)});if(r===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(r);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const i=this.state.stickyNodes[this.focusedIndex].node.element,o=this.elements[this.focusedIndex];this._onContextMenu.fire({element:i,anchor:o,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!c1(t)&&!EC(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const n=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const i=ms(n,0,t.count-1);this.setFocus(i)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const n=t.stickyNodes[e];this.scrollNodeUnderWidget(n.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const n=t.stickyNodes[t.count-1],i=t.count>1?t.stickyNodes[t.count-2]:void 0,o=this.view.getElementTop(e),r=i?i.position+i.height+n.height:n.height;this.view.scrollTop=o-r}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function Uy(s){let e=Rf.Unknown;return kN(s.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Rf.Twistie:kN(s.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=Rf.Element:kN(s.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=Rf.Filter),{browserEvent:s.browserEvent,element:s.element?s.element.element:null,target:e}}function i_e(s){const e=c1(s.browserEvent.target);return{element:s.element?s.element.element:null,browserEvent:s.browserEvent,anchor:s.anchor,isStickyScroll:e}}function KS(s,e){e(s),s.children.forEach(t=>KS(t,e))}class _R{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new O,this.onDidChange=this._onDidChange.event}set(e,t){!(t!=null&&t.__forceEvent)&&en(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=d=>l.delete(d);t.forEach(d=>KS(d,c)),this.set([...l.values()]);return}const n=new Set,i=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>KS(l,i));const o=new Map,r=l=>o.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>KS(l,r));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!n.has(c))a.push(l);else{const h=o.get(c);h&&h.visible&&a.push(h)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class s_e extends LG{constructor(e,t,n){super(e),this.tree=t,this.stickyScrollProvider=n}onViewPointer(e){if(wG(e.browserEvent.target)||Ah(e.browserEvent.target)||oC(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,i=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,o=EC(e.browserEvent.target);let r=!1;if(o?r=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?r=this.tree.expandOnlyOnTwistieClick(t.element):r=!!this.tree.expandOnlyOnTwistieClick,o)this.handleStickyScrollMouseEvent(e,t);else{if(r&&!i&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!o||i)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),i){e.browserEvent.isHandledByList=!0;return}}o||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(cfe(e.browserEvent.target)||dfe(e.browserEvent.target))return;const n=this.stickyScrollProvider();if(!n)throw new Error("Sticky scroll controller not found");const i=this.list.indexOf(t),o=this.list.getElementTop(i),r=n.nodePositionTopBelowWidget(t);this.tree.scrollTop=o-r,this.list.domFocus(),this.list.setFocus([i]),this.list.setSelection([i])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!c1(t)&&!EC(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!c1(t)&&!EC(t)){super.onContextMenu(e);return}}}class o_e extends or{constructor(e,t,n,i,o,r,a,l){super(e,t,n,i,l),this.focusTrait=o,this.selectionTrait=r,this.anchorTrait=a}createMouseController(e){return new s_e(this,e.tree,e.stickyScrollProvider)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const i=[],o=[];let r;n.forEach((a,l)=>{this.focusTrait.has(a)&&i.push(e+l),this.selectionTrait.has(a)&&o.push(e+l),this.anchorTrait.has(a)&&(r=e+l)}),i.length>0&&super.setFocus(fd([...super.getFocus(),...i])),o.length>0&&super.setSelection(fd([...super.getSelection(),...o])),typeof r=="number"&&super.setAnchor(r)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(i=>this.element(i)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(i=>this.element(i)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class yZ{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return se.filter(se.map(this.view.onMouseDblClick,Uy),e=>e.target!==Rf.Filter)}get onMouseOver(){return se.map(this.view.onMouseOver,Uy)}get onMouseOut(){return se.map(this.view.onMouseOut,Uy)}get onContextMenu(){var e;return se.any(se.filter(se.map(this.view.onContextMenu,i_e),t=>!t.isStickyScroll),((e=this.stickyScrollController)==null?void 0:e.onContextMenu)??se.None)}get onPointer(){return se.map(this.view.onPointer,Uy)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return se.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e;return((e=this.findController)==null?void 0:e.mode)??Zc.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){var e;return((e=this.findController)==null?void 0:e.matchType)??rm.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,n,i,o={}){this._user=e,this._options=o,this.eventBufferer=new f0,this.onDidChangeFindOpenState=se.None,this.onDidChangeStickyScrollFocused=se.None,this.disposables=new q,this._onWillRefilter=new O,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new O,this.treeDelegate=new oW(n);const r=new t8,a=new t8,l=this.disposables.add(new Zpe(a.event)),c=new J3;this.renderers=i.map(g=>new FP(g,()=>this.model,r.event,l,c,o));for(const g of this.renderers)this.disposables.add(g);let d;o.keyboardNavigationLabelProvider&&(d=new Ype(this,o.keyboardNavigationLabelProvider,o.filter),o={...o,filter:d},this.disposables.add(d)),this.focus=new _R(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new _R(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new _R(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new o_e(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...Gpe(()=>this.model,o),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(e,this.view,o),r.input=this.model.onDidChangeCollapseState;const h=se.forEach(this.model.onDidSplice,g=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(g),this.selection.onDidModelSplice(g)})},this.disposables);h(()=>null,null,this.disposables);const u=this.disposables.add(new O),f=this.disposables.add(new kr(0));if(this.disposables.add(se.any(h,this.focus.onDidChange,this.selection.onDidChange)(()=>{f.trigger(()=>{const g=new Set;for(const p of this.focus.getNodes())g.add(p);for(const p of this.selection.getNodes())g.add(p);u.fire([...g.values()])})})),a.input=u.event,o.keyboardSupport!==!1){const g=se.chain(this.view.onKeyDown,p=>p.filter(_=>!Ah(_.target)).map(_=>new Pt(_)));se.chain(g,p=>p.filter(_=>_.keyCode===15))(this.onLeftArrow,this,this.disposables),se.chain(g,p=>p.filter(_=>_.keyCode===17))(this.onRightArrow,this,this.disposables),se.chain(g,p=>p.filter(_=>_.keyCode===10))(this.onSpace,this,this.disposables)}if((o.findWidgetEnabled??!0)&&o.keyboardNavigationLabelProvider&&o.contextViewProvider){const g=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new Xpe(this,this.model,this.view,d,o.contextViewProvider,g),this.focusNavigationFilter=p=>this.findController.shouldAllowFocus(p),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=se.None,this.onDidChangeFindMatchType=se.None;o.enableStickyScroll&&(this.stickyScrollController=new XH(this,this.model,this.view,this.renderers,this.treeDelegate,o),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=Qo(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===yb.Always)}updateOptions(e={}){var t;this._options={...this._options,...e};for(const n of this.renderers)n.updateOptions(e);this.view.updateOptions(this._options),(t=this.findController)==null||t.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===yb.Always)}get options(){return this._options}updateStickyScroll(e){var t;!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new XH(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=se.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),(t=this.stickyScrollController)==null||t.updateOptions(e)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}domFocus(){var e;(e=this.stickyScrollController)!=null&&e.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(e,t){var n;this.view.layout(e,t),tu(t)&&((n=this.findController)==null||n.layout(t))}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));const i=e.treeStickyScrollBackground??e.listBackground;i&&(n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${i}; }`),n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${i}; }`)),e.treeStickyScrollBorder&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const o=od(e.listFocusAndSelectionOutline,od(e.listSelectionOutline,e.listFocusOutline??""));o&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${o}; outline-offset: -1px;}`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const n=e.map(o=>this.model.getNode(o));this.selection.set(n,t);const i=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(i,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const n=e.map(o=>this.model.getNode(o));this.focus.set(n,t);const i=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(i,t,!0)})}focusNext(e=1,t=!1,n,i=Mc(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,n,i)}focusPrevious(e=1,t=!1,n,i=Mc(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,n,i)}focusNextPage(e,t=Mc(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=Mc(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>{var n;return((n=this.stickyScrollController)==null?void 0:n.height)??0})}focusLast(e,t=Mc(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=Mc(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);if(n!==-1)if(!this.stickyScrollController)this.view.reveal(n,t);else{const i=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(n,t,i)}}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){const r=this.model.getParentNodeLocation(i);if(!r)return;const a=this.model.getListIndex(r);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some(l=>l.visible))return;const[r]=this.view.getFocus(),a=r+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],i=this.model.getNodeLocation(n),o=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,o)}dispose(){var e;Mt(this.disposables),(e=this.stickyScrollController)==null||e.dispose(),this.view.dispose()}}class rW{constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new jpe(e,t,null,n),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,n.sorter&&(this.sorter={compare(i,o){return n.sorter.compare(i.element,o.element)}}),this.identityProvider=n.identityProvider}setChildren(e,t=ot.empty(),n={}){const i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}_setChildren(e,t=ot.empty(),n){const i=new Set,o=new Set,r=l=>{var d;if(l.element===null)return;const c=l;if(i.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const h=this.identityProvider.getId(c.element).toString();o.add(h),this.nodesByIdentity.set(h,c)}(d=n.onDidCreateNode)==null||d.call(n,c)},a=l=>{var d;if(l.element===null)return;const c=l;if(i.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const h=this.identityProvider.getId(c.element).toString();o.has(h)||this.nodesByIdentity.delete(h)}(d=n.onDidDeleteNode)==null||d.call(n,c)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...n,onDidCreateNode:r,onDidDeleteNode:a})}preserveCollapseState(e=ot.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),ot.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const r=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(r)}if(!n){let r;return typeof t.collapsed>"u"?r=void 0:t.collapsed===Ao.Collapsed||t.collapsed===Ao.PreserveOrCollapsed?r=!0:t.collapsed===Ao.Expanded||t.collapsed===Ao.PreserveOrExpanded?r=!1:r=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:r}}const i=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible;let o;return typeof t.collapsed>"u"||t.collapsed===Ao.PreserveOrCollapsed||t.collapsed===Ao.PreserveOrExpanded?o=n.collapsed:t.collapsed===Ao.Collapsed?o=!0:t.collapsed===Ao.Expanded?o=!1:o=!!t.collapsed,{...t,collapsible:i,collapsed:o,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Vo(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Vo(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Vo(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Vo(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function GS(s){const e=[s.element],t=s.incompressible||!1;return{element:{elements:e,incompressible:t},children:ot.map(ot.from(s.children),GS),collapsible:s.collapsible,collapsed:s.collapsed}}function ZS(s){const e=[s.element],t=s.incompressible||!1;let n,i;for(;[i,n]=ot.consume(ot.from(s.children),2),!(i.length!==1||i[0].incompressible);)s=i[0],e.push(s.element);return{element:{elements:e,incompressible:t},children:ot.map(ot.concat(i,n),ZS),collapsible:s.collapsible,collapsed:s.collapsed}}function WP(s,e=0){let t;return e<s.element.elements.length-1?t=[WP(s,e+1)]:t=ot.map(ot.from(s.children),n=>WP(n,0)),e===0&&s.element.incompressible?{element:s.element.elements[e],children:t,incompressible:!0,collapsible:s.collapsible,collapsed:s.collapsed}:{element:s.element.elements[e],children:t,collapsible:s.collapsible,collapsed:s.collapsed}}function QH(s){return WP(s,0)}function SZ(s,e,t){return s.element===e?{...s,children:t}:{...s,children:ot.map(ot.from(s.children),n=>SZ(n,e,t))}}const r_e=s=>({getId(e){return e.elements.map(t=>s.getId(t).toString()).join("\0")}});class a_e{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(e,t,n={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new rW(e,t,n),this.enabled=typeof n.compressionEnabled>"u"?!0:n.compressionEnabled,this.identityProvider=n.identityProvider}setChildren(e,t=ot.empty(),n){const i=n.diffIdentityProvider&&r_e(n.diffIdentityProvider);if(e===null){const g=ot.map(t,this.enabled?ZS:GS);this._setChildren(null,g,{diffIdentityProvider:i,diffDepth:1/0});return}const o=this.nodes.get(e);if(!o)throw new Vo(this.user,"Unknown compressed tree node");const r=this.model.getNode(o),a=this.model.getParentNodeLocation(o),l=this.model.getNode(a),c=QH(r),d=SZ(c,e,t),h=(this.enabled?ZS:GS)(d),u=n.diffIdentityProvider?(g,p)=>n.diffIdentityProvider.getId(g)===n.diffIdentityProvider.getId(p):void 0;if(en(h.element.elements,r.element.elements,u)){this._setChildren(o,h.children||ot.empty(),{diffIdentityProvider:i,diffDepth:1});return}const f=l.children.map(g=>g===r?h:g);this._setChildren(l.element,f,{diffIdentityProvider:i,diffDepth:r.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,i=ot.map(n,QH),o=ot.map(i,e?ZS:GS);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const i=new Set,o=a=>{for(const l of a.element.elements)i.add(l),this.nodes.set(l,a.element)},r=a=>{for(const l of a.element.elements)i.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...n,onDidCreateNode:o,onDidDeleteNode:r})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Vo(this.user,`Tree element not found: ${e}`);return t}}const l_e=s=>s[s.length-1];class aW{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new aW(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function c_e(s,e){return{splice(t,n,i){e.splice(t,n,i.map(o=>s.map(o)))},updateElementHeight(t,n){e.updateElementHeight(t,n)}}}function d_e(s,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(s(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(s(t),n)}}}}class h_e{get onDidSplice(){return se.map(this.model.onDidSplice,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidChangeCollapseState(){return se.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return se.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t,n={}){this.rootRef=null,this.elementMapper=n.elementMapper||l_e;const i=o=>this.elementMapper(o.elements);this.nodeMapper=new iW(o=>new aW(i,o)),this.model=new a_e(e,c_e(this.nodeMapper,t),d_e(i,n))}setChildren(e,t=ot.empty(),n={}){this.model.setChildren(e,t,n)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}var u_e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o};class lW extends yZ{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,n,i,o={}){super(e,t,n,i,o),this.user=e}setChildren(e,t=ot.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}hasElement(e){return this.model.has(e)}createModel(e,t,n){return new rW(e,t,n)}}class kZ{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,n){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=n,this.templateId=n.templateId,n.onDidChangeTwistieState&&(this.onDidChangeTwistieState=n.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){let o=this.stickyScrollDelegate.getCompressedNode(e);o||(o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),o.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,n.data,i))}disposeElement(e,t,n,i){var o,r,a,l;n.compressedTreeNode?(r=(o=this.renderer).disposeCompressedElements)==null||r.call(o,n.compressedTreeNode,t,n.data,i):(l=(a=this.renderer).disposeElement)==null||l.call(a,e,t,n.data,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}}u_e([Nn],kZ.prototype,"compressedTreeNodeProvider",null);class f_e{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,n){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let i=0;i<e.length;i++){const o=e[i],r=o.position+o.height;if(i+1<e.length&&r+e[i+1].height>n||i>=t-1&&t<e.length){const l=e.slice(0,i),c=e.slice(i),d=this.compressStickyNodes(c);return[...l,d]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const n=[];for(let c=0;c<e.length;c++){const d=e[c],h=t.getCompressedTreeNode(d.node.element);if(h.element){if(c!==0&&h.element.incompressible)break;n.push(...h.element.elements)}}if(n.length<2)return e[0];const i=e[e.length-1],o={elements:n,incompressible:!1},r={...i.node,children:[],element:o},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:i.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,r),l}}function g_e(s,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=s().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}}}class LZ extends lW{constructor(e,t,n,i,o={}){const r=()=>this,a=new f_e(()=>this.model),l=i.map(c=>new kZ(r,a,c));super(e,t,n,l,{...g_e(r,o),stickyScrollDelegate:a})}setChildren(e,t=ot.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t,n){return new h_e(e,t,n)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function bR(s){return{...s,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function BP(s,e){return e.parent?e.parent===s?!0:BP(s,e.parent):!1}function m_e(s,e){return s===e||BP(s,e)||BP(e,s)}class cW{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new cW(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class p_e{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...De.asClassNameArray(J.treeItemLoading)),!0):(t.classList.remove(...De.asClassNameArray(J.treeItemLoading)),!1)}disposeElement(e,t,n,i){var o,r;(r=(o=this.renderer).disposeElement)==null||r.call(o,this.nodeMapper.map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function JH(s){return{browserEvent:s.browserEvent,elements:s.elements.map(e=>e.element)}}function eV(s){return{browserEvent:s.browserEvent,element:s.element&&s.element.element,target:s.target}}class __e extends R0{constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function vR(s){return s instanceof R0?new __e(s):s}class b_e{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){var n,i;(i=(n=this.dnd).onDragStart)==null||i.call(n,vR(e),t)}onDragOver(e,t,n,i,o,r=!0){return this.dnd.onDragOver(vR(e),t&&t.element,n,i,o)}drop(e,t,n,i,o){this.dnd.drop(vR(e),t&&t.element,n,i,o)}onDragEnd(e){var t,n;(n=(t=this.dnd).onDragEnd)==null||n.call(t,e)}dispose(){this.dnd.dispose()}}function xZ(s){return s&&{...s,collapseByDefault:!0,identityProvider:s.identityProvider&&{getId(e){return s.identityProvider.getId(e.element)}},dnd:s.dnd&&new b_e(s.dnd),multipleSelectionController:s.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return s.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return s.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:s.accessibilityProvider&&{...s.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:s.accessibilityProvider.getRole?e=>s.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:s.accessibilityProvider.isChecked?e=>{var t;return!!((t=s.accessibilityProvider)!=null&&t.isChecked(e.element))}:void 0,getAriaLabel(e){return s.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return s.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:s.accessibilityProvider.getWidgetRole?()=>s.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:s.accessibilityProvider.getAriaLevel&&(e=>s.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:s.accessibilityProvider.getActiveDescendantId&&(e=>s.accessibilityProvider.getActiveDescendantId(e.element))},filter:s.filter&&{filter(e,t){return s.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:s.keyboardNavigationLabelProvider&&{...s.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return s.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof s.expandOnlyOnTwistieClick>"u"?void 0:typeof s.expandOnlyOnTwistieClick!="function"?s.expandOnlyOnTwistieClick:e=>s.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof s.defaultFindVisibility=="number"?s.defaultFindVisibility:typeof s.defaultFindVisibility>"u"?2:s.defaultFindVisibility(e.element)}}function HP(s,e){e(s),s.children.forEach(t=>HP(t,e))}class DZ{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return se.map(this.tree.onDidChangeFocus,JH)}get onDidChangeSelection(){return se.map(this.tree.onDidChangeSelection,JH)}get onMouseDblClick(){return se.map(this.tree.onMouseDblClick,eV)}get onPointer(){return se.map(this.tree.onPointer,eV)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,n,i,o,r={}){this.user=e,this.dataSource=o,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new O,this._onDidChangeNodeSlowState=new O,this.nodeMapper=new iW(a=>new cW(a)),this.disposables=new q,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=typeof r.autoExpandSingleChildren>"u"?!1:r.autoExpandSingleChildren,this.sorter=r.sorter,this.getDefaultCollapseState=a=>r.collapseByDefault?r.collapseByDefault(a)?Ao.PreserveOrCollapsed:Ao.PreserveOrExpanded:void 0,this.tree=this.createTree(e,t,n,i,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=bR({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(e,t,n,i,o){const r=new oW(n),a=i.map(c=>new p_e(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=xZ(o)||{};return new lW(e,t,r,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(i=>i.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async _updateChildren(e=this.root.element,t=!0,n=!1,i,o){if(typeof this.root.element>"u")throw new Vo(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await se.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(await this.refreshAndRenderNode(r,t,i,o),n)try{this.tree.rerender(r)}catch{}}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new Vo(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await se.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(await this.root.refreshPromise,await se.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const i=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(await this.root.refreshPromise,await se.toPromise(this._onDidRender.event)),i}setSelection(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(i=>this.getDataNode(i));this.tree.setFocus(n,t)}getFocus(){return this.tree.getFocus().map(t=>t.element)}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Vo(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,n,i){await this.refreshNode(e,t,n),!this.disposables.isDisposed&&this.render(e,n,i)}async refreshNode(e,t,n){let i;if(this.subTreeRefreshPromises.forEach((o,r)=>{!i&&m_e(r,e)&&(i=o.then(()=>this.refreshNode(e,t,n)))}),i)return i;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,n);return}return this.doRefreshSubTree(e,t,n)}async doRefreshSubTree(e,t,n){let i;e.refreshPromise=new Promise(o=>i=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const o=await this.doRefreshNode(e,t,n);e.stale=!1,await WM.settled(o.map(r=>this.doRefreshSubTree(r,t,n)))}finally{i()}}async doRefreshNode(e,t,n){e.hasChildren=!!this.dataSource.hasChildren(e.element);let i;if(!e.hasChildren)i=Promise.resolve(ot.empty());else{const o=this.doGetChildren(e);if(Z7(o))i=Promise.resolve(o);else{const r=_d(800);r.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),i=o.finally(()=>r.cancel())}}try{const o=await i;return this.setChildren(e,o,t,n)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),Tr(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const n=this.dataSource.getChildren(e.element);return Z7(n)?this.processChildren(n):(t=si(async()=>this.processChildren(await n)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Pe))}setChildren(e,t,n,i){const o=[...t];if(e.children.length===0&&o.length===0)return[];const r=new Map,a=new Map;for(const d of e.children)r.set(d.element,d),this.identityProvider&&a.set(d.id,{node:d,collapsed:this.tree.hasElement(d)&&this.tree.isCollapsed(d)});const l=[],c=o.map(d=>{const h=!!this.dataSource.hasChildren(d);if(!this.identityProvider){const p=bR({element:d,parent:e,hasChildren:h,defaultCollapseState:this.getDefaultCollapseState(d)});return h&&p.defaultCollapseState===Ao.PreserveOrExpanded&&l.push(p),p}const u=this.identityProvider.getId(d).toString(),f=a.get(u);if(f){const p=f.node;return r.delete(p.element),this.nodes.delete(p.element),this.nodes.set(d,p),p.element=d,p.hasChildren=h,n?f.collapsed?(p.children.forEach(_=>HP(_,b=>this.nodes.delete(b.element))),p.children.splice(0,p.children.length),p.stale=!0):l.push(p):h&&!f.collapsed&&l.push(p),p}const g=bR({element:d,parent:e,id:u,hasChildren:h,defaultCollapseState:this.getDefaultCollapseState(d)});return i&&i.viewState.focus&&i.viewState.focus.indexOf(u)>-1&&i.focus.push(g),i&&i.viewState.selection&&i.viewState.selection.indexOf(u)>-1&&i.selection.push(g),(i&&i.viewState.expanded&&i.viewState.expanded.indexOf(u)>-1||h&&g.defaultCollapseState===Ao.PreserveOrExpanded)&&l.push(g),g});for(const d of r.values())HP(d,h=>this.nodes.delete(h.element));for(const d of c)this.nodes.set(d.element,d);return e.children.splice(0,e.children.length,...c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,n){const i=e.children.map(r=>this.asTreeElement(r,t)),o=n&&{...n,diffIdentityProvider:n.diffIdentityProvider&&{getId(r){return n.diffIdentityProvider.getId(r.element)}}};this.tree.setChildren(e===this.root?null:e,i,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:e.forceExpanded?(n=!1,e.forceExpanded=!1):n=e.defaultCollapseState,{element:e,children:e.hasChildren?ot.map(e.children,i=>this.asTreeElement(i,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose(),this.tree.dispose()}}class dW{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new dW(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class v_e{constructor(e,t,n,i){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderCompressedElements(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...De.asClassNameArray(J.treeItemLoading)),!0):(t.classList.remove(...De.asClassNameArray(J.treeItemLoading)),!1)}disposeElement(e,t,n,i){var o,r;(r=(o=this.renderer).disposeElement)==null||r.call(o,this.nodeMapper.map(e),t,n.templateData,i)}disposeCompressedElements(e,t,n,i){var o,r;(r=(o=this.renderer).disposeCompressedElements)==null||r.call(o,this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=Mt(this.disposables)}}function C_e(s){const e=s&&xZ(s);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return s.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}}}}class w_e extends DZ{constructor(e,t,n,i,o,r,a={}){super(e,t,n,o,r,a),this.compressionDelegate=i,this.compressibleNodeMapper=new iW(l=>new dW(l)),this.filter=a.filter}createTree(e,t,n,i,o){const r=new oW(n),a=i.map(c=>new v_e(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=C_e(o)||{};return new LZ(e,t,r,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t,n){if(!this.identityProvider)return super.render(e,t);const i=f=>this.identityProvider.getId(f).toString(),o=f=>{const g=new Set;for(const p of f){const _=this.tree.getCompressedTreeNode(p===this.root?null:p);if(_.element)for(const b of _.element.elements)g.add(i(b.element))}return g},r=o(this.tree.getSelection()),a=o(this.tree.getFocus());super.render(e,t,n);const l=this.getSelection();let c=!1;const d=this.getFocus();let h=!1;const u=f=>{const g=f.element;if(g)for(let p=0;p<g.elements.length;p++){const _=i(g.elements[p].element),b=g.elements[g.elements.length-1].element;r.has(_)&&l.indexOf(b)===-1&&(l.push(b),c=!0),a.has(_)&&d.indexOf(b)===-1&&(d.push(b),h=!0)}f.children.forEach(u)};u(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),h&&this.setFocus(d)}processChildren(e){return this.filter&&(e=ot.filter(e,t=>{const n=this.filter.filter(t,1),i=y_e(n);if(i===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return i===1})),super.processChildren(e)}}function y_e(s){return typeof s=="boolean"?s?1:0:sW(s)?m1(s.visibility):m1(s)}class S_e extends yZ{constructor(e,t,n,i,o,r={}){super(e,t,n,i,r),this.user=e,this.dataSource=o,this.identityProvider=r.identityProvider}createModel(e,t,n){return new rW(e,t,n)}}new le("isMac",et,m("isMac","Whether the operating system is macOS"));new le("isLinux",Ds,m("isLinux","Whether the operating system is Linux"));const rE=new le("isWindows",Bi,m("isWindows","Whether the operating system is Windows")),IZ=new le("isWeb",Lm,m("isWeb","Whether the platform is a web browser"));new le("isMacNative",et&&!Lm,m("isMacNative","Whether the operating system is macOS on a non-browser platform"));new le("isIOS",Ua,m("isIOS","Whether the operating system is iOS"));new le("isMobile",Sj,m("isMobile","Whether the platform is a mobile web browser"));new le("isDevelopment",!1,!0);new le("productQualityType","",m("productQualityType","Quality type of VS Code"));const TZ="inputFocus",EZ=new le(TZ,!1,m("inputFocus","Whether keyboard focus is inside an input box"));var Ad=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},$t=function(s,e){return function(t,n){e(t,n,s)}};const Rr=tt("listService");class k_e{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new q,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(e){var t,n;e!==this._lastFocusedWidget&&((t=this._lastFocusedWidget)==null||t.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,(n=this._lastFocusedWidget)==null||n.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new xG(Qo(),"").style(Em)),this.lists.some(i=>i.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),CT(e.getHTMLElement())&&this.setLastFocusedList(e),Jr(e.onDidFocus(()=>this.setLastFocusedList(e)),ve(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(i=>i!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const p1=new le("listScrollAtBoundary","none");K.or(p1.isEqualTo("top"),p1.isEqualTo("both"));K.or(p1.isEqualTo("bottom"),p1.isEqualTo("both"));const NZ=new le("listFocus",!0),RZ=new le("treestickyScrollFocused",!1),aE=new le("listSupportsMultiselect",!0),MZ=K.and(NZ,K.not(TZ),RZ.negate()),hW=new le("listHasSelectionOrFocus",!1),uW=new le("listDoubleSelection",!1),fW=new le("listMultiSelection",!1),lE=new le("listSelectionNavigation",!1),L_e=new le("listSupportsFind",!0),gW=new le("treeElementCanCollapse",!1),x_e=new le("treeElementHasParent",!1),mW=new le("treeElementCanExpand",!1),D_e=new le("treeElementHasChild",!1),I_e=new le("treeFindOpen",!1),AZ="listTypeNavigationMode",PZ="listAutomaticKeyboardNavigation";function cE(s,e){const t=s.createScoped(e.getHTMLElement());return NZ.bindTo(t),t}function dE(s,e){const t=p1.bindTo(s),n=()=>{const i=e.scrollTop===0,o=e.scrollHeight-e.renderHeight-e.scrollTop<1;i&&o?t.set("both"):i?t.set("top"):o?t.set("bottom"):t.set("none")};return n(),e.onDidScroll(n)}const Mm="workbench.list.multiSelectModifier",YS="workbench.list.openMode",yr="workbench.list.horizontalScrolling",pW="workbench.list.defaultFindMode",_W="workbench.list.typeNavigationMode",FL="workbench.list.keyboardNavigation",Za="workbench.list.scrollByPage",bW="workbench.list.defaultFindMatchType",_1="workbench.tree.indent",WL="workbench.tree.renderIndentGuides",Ya="workbench.list.smoothScrolling",Xl="workbench.list.mouseWheelScrollSensitivity",Ql="workbench.list.fastScrollSensitivity",BL="workbench.tree.expandMode",HL="workbench.tree.enableStickyScroll",VL="workbench.tree.stickyScrollMaxItemCount";function Jl(s){return s.getValue(Mm)==="alt"}class T_e extends F{constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=Jl(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(Mm)&&(this.useAltAsMultipleSelectionModifier=Jl(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:SG(e)}isSelectionRangeChangeEvent(e){return kG(e)}}function hE(s,e){const t=s.get(Ze),n=s.get(wt),i=new q;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(r){return n.mightProducePrintableCharacter(r)}},smoothScrolling:!!t.getValue(Ya),mouseWheelScrollSensitivity:t.getValue(Xl),fastScrollSensitivity:t.getValue(Ql),multipleSelectionController:e.multipleSelectionController??i.add(new T_e(t)),keyboardNavigationEventFilter:R_e(n),scrollByPage:!!t.getValue(Za)},i]}let tV=class extends or{constructor(e,t,n,i,o,r,a,l,c){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(yr),[h,u]=c.invokeFunction(hE,o);super(e,t,n,i,{keyboardSupport:!1,...h,horizontalScrolling:d}),this.disposables.add(u),this.contextKeyService=cE(r,this),this.disposables.add(dE(this.contextKeyService,this)),this.listSupportsMultiSelect=aE.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),lE.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=hW.bindTo(this.contextKeyService),this.listDoubleSelection=uW.bindTo(this.contextKeyService),this.listMultiSelection=fW.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Jl(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const g=this.getSelection(),p=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(g.length>0||p.length>0),this.listMultiSelection.set(g.length>1),this.listDoubleSelection.set(g.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const g=this.getSelection(),p=this.getFocus();this.listHasSelectionOrFocus.set(g.length>0||p.length>0)})),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(Mm)&&(this._useAltAsMultipleSelectionModifier=Jl(l));let p={};if(g.affectsConfiguration(yr)&&this.horizontalScrolling===void 0){const _=!!l.getValue(yr);p={...p,horizontalScrolling:_}}if(g.affectsConfiguration(Za)){const _=!!l.getValue(Za);p={...p,scrollByPage:_}}if(g.affectsConfiguration(Ya)){const _=!!l.getValue(Ya);p={...p,smoothScrolling:_}}if(g.affectsConfiguration(Xl)){const _=l.getValue(Xl);p={...p,mouseWheelScrollSensitivity:_}}if(g.affectsConfiguration(Ql)){const _=l.getValue(Ql);p={...p,fastScrollSensitivity:_}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new OZ(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Nm(e):Em)}};tV=Ad([$t(5,Ie),$t(6,Rr),$t(7,Ze),$t(8,Ce)],tV);let nV=class extends Ape{constructor(e,t,n,i,o,r,a,l,c){const d=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(yr),[h,u]=c.invokeFunction(hE,o);super(e,t,n,i,{keyboardSupport:!1,...h,horizontalScrolling:d}),this.disposables=new q,this.disposables.add(u),this.contextKeyService=cE(r,this),this.disposables.add(dE(this.contextKeyService,this.widget)),this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=aE.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),lE.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this._useAltAsMultipleSelectionModifier=Jl(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(g=>{g.affectsConfiguration(Mm)&&(this._useAltAsMultipleSelectionModifier=Jl(l));let p={};if(g.affectsConfiguration(yr)&&this.horizontalScrolling===void 0){const _=!!l.getValue(yr);p={...p,horizontalScrolling:_}}if(g.affectsConfiguration(Za)){const _=!!l.getValue(Za);p={...p,scrollByPage:_}}if(g.affectsConfiguration(Ya)){const _=!!l.getValue(Ya);p={...p,smoothScrolling:_}}if(g.affectsConfiguration(Xl)){const _=l.getValue(Xl);p={...p,mouseWheelScrollSensitivity:_}}if(g.affectsConfiguration(Ql)){const _=l.getValue(Ql);p={...p,fastScrollSensitivity:_}}Object.keys(p).length>0&&this.updateOptions(p)})),this.navigator=new OZ(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Nm(e):Em)}dispose(){this.disposables.dispose(),super.dispose()}};nV=Ad([$t(5,Ie),$t(6,Rr),$t(7,Ze),$t(8,Ce)],nV);let iV=class extends OP{constructor(e,t,n,i,o,r,a,l,c,d){const h=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!c.getValue(yr),[u,f]=d.invokeFunction(hE,r);super(e,t,n,i,o,{keyboardSupport:!1,...u,horizontalScrolling:h}),this.disposables.add(f),this.contextKeyService=cE(a,this),this.disposables.add(dE(this.contextKeyService,this)),this.listSupportsMultiSelect=aE.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),lE.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=hW.bindTo(this.contextKeyService),this.listDoubleSelection=uW.bindTo(this.contextKeyService),this.listMultiSelection=fW.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Jl(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),_=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||_.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),_=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||_.length>0)})),this.disposables.add(c.onDidChangeConfiguration(p=>{p.affectsConfiguration(Mm)&&(this._useAltAsMultipleSelectionModifier=Jl(c));let _={};if(p.affectsConfiguration(yr)&&this.horizontalScrolling===void 0){const b=!!c.getValue(yr);_={..._,horizontalScrolling:b}}if(p.affectsConfiguration(Za)){const b=!!c.getValue(Za);_={..._,scrollByPage:b}}if(p.affectsConfiguration(Ya)){const b=!!c.getValue(Ya);_={..._,smoothScrolling:b}}if(p.affectsConfiguration(Xl)){const b=c.getValue(Xl);_={..._,mouseWheelScrollSensitivity:b}}if(p.affectsConfiguration(Ql)){const b=c.getValue(Ql);_={..._,fastScrollSensitivity:b}}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new E_e(this,{configurationService:c,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Nm(e):Em)}dispose(){this.disposables.dispose(),super.dispose()}};iV=Ad([$t(6,Ie),$t(7,Rr),$t(8,Ze),$t(9,Ce)],iV);class vW extends F{constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new O),this.onDidOpen=this._onDidOpen.event,this._register(se.filter(this.widget.onDidChangeSelection,n=>Mc(n.browserEvent))(n=>this.onSelectionFromKeyboard(n))),this._register(this.widget.onPointer(n=>this.onPointer(n.element,n.browserEvent))),this._register(this.widget.onMouseDblClick(n=>this.onMouseDblClick(n.element,n.browserEvent))),typeof(t==null?void 0:t.openOnSingleClick)!="boolean"&&(t!=null&&t.configurationService)?(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(YS))!=="doubleClick",this._register(t==null?void 0:t.configurationService.onDidChangeConfiguration(n=>{n.affectsConfiguration(YS)&&(this.openOnSingleClick=(t==null?void 0:t.configurationService.getValue(YS))!=="doubleClick")}))):this.openOnSingleClick=(t==null?void 0:t.openOnSingleClick)??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,i=typeof t.pinned=="boolean"?t.pinned:!n;this._open(this.getSelectedElement(),n,i,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const i=t.button===1,o=!0,r=i,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const o=!1,r=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,o,r,a,t)}_open(e,t,n,i,o){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:i,element:e,browserEvent:o})}}class OZ extends vW{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class E_e extends vW{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class N_e extends vW{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function R_e(s){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const n=s.softDispatch(t,t.target);return n.kind===1?(e=!0,!1):(e=!1,n.kind===0)}}let VP=class extends lW{constructor(e,t,n,i,o,r,a,l,c){const{options:d,getTypeNavigationMode:h,disposable:u}=r.invokeFunction(O0,o);super(e,t,n,i,d),this.disposables.add(u),this.internals=new am(this,o,h,o.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};VP=Ad([$t(5,Ce),$t(6,Ie),$t(7,Rr),$t(8,Ze)],VP);let sV=class extends LZ{constructor(e,t,n,i,o,r,a,l,c){const{options:d,getTypeNavigationMode:h,disposable:u}=r.invokeFunction(O0,o);super(e,t,n,i,d),this.disposables.add(u),this.internals=new am(this,o,h,o.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};sV=Ad([$t(5,Ce),$t(6,Ie),$t(7,Rr),$t(8,Ze)],sV);let oV=class extends S_e{constructor(e,t,n,i,o,r,a,l,c,d){const{options:h,getTypeNavigationMode:u,disposable:f}=a.invokeFunction(O0,r);super(e,t,n,i,o,h),this.disposables.add(f),this.internals=new am(this,r,u,r.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};oV=Ad([$t(6,Ce),$t(7,Ie),$t(8,Rr),$t(9,Ze)],oV);let zP=class extends DZ{get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,o,r,a,l,c,d){const{options:h,getTypeNavigationMode:u,disposable:f}=a.invokeFunction(O0,r);super(e,t,n,i,o,h),this.disposables.add(f),this.internals=new am(this,r,u,r.overrideStyles,l,c,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};zP=Ad([$t(6,Ce),$t(7,Ie),$t(8,Rr),$t(9,Ze)],zP);let rV=class extends w_e{constructor(e,t,n,i,o,r,a,l,c,d,h){const{options:u,getTypeNavigationMode:f,disposable:g}=l.invokeFunction(O0,a);super(e,t,n,i,o,r,u),this.disposables.add(g),this.internals=new am(this,a,f,a.overrideStyles,c,d,h),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};rV=Ad([$t(7,Ce),$t(8,Ie),$t(9,Rr),$t(10,Ze)],rV);function FZ(s){const e=s.getValue(pW);if(e==="highlight")return Zc.Highlight;if(e==="filter")return Zc.Filter;const t=s.getValue(FL);if(t==="simple"||t==="highlight")return Zc.Highlight;if(t==="filter")return Zc.Filter}function WZ(s){const e=s.getValue(bW);if(e==="fuzzy")return rm.Fuzzy;if(e==="contiguous")return rm.Contiguous}function O0(s,e){const t=s.get(Ze),n=s.get(Rd),i=s.get(Ie),o=s.get(Ce),r=()=>{const u=i.getContextKeyValue(AZ);if(u==="automatic")return Al.Automatic;if(u==="trigger"||i.getContextKeyValue(PZ)===!1)return Al.Trigger;const g=t.getValue(_W);if(g==="automatic")return Al.Automatic;if(g==="trigger")return Al.Trigger},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(yr),[l,c]=o.invokeFunction(hE,e),d=e.paddingBottom,h=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(WL);return{getTypeNavigationMode:r,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(_1)=="number"?t.getValue(_1):void 0,renderIndentGuides:h,smoothScrolling:!!t.getValue(Ya),defaultFindMode:FZ(t),defaultFindMatchType:WZ(t),horizontalScrolling:a,scrollByPage:!!t.getValue(Za),paddingBottom:d,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(BL)==="doubleClick",contextViewProvider:n,findWidgetStyles:Ofe,enableStickyScroll:!!t.getValue(HL),stickyScrollMaxItemCount:Number(t.getValue(VL))}}}let am=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,i,o,r,a){this.tree=e,this.disposables=[],this.contextKeyService=cE(o,e),this.disposables.push(dE(this.contextKeyService,e)),this.listSupportsMultiSelect=aE.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),lE.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=L_e.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=hW.bindTo(this.contextKeyService),this.hasDoubleSelection=uW.bindTo(this.contextKeyService),this.hasMultiSelection=fW.bindTo(this.contextKeyService),this.treeElementCanCollapse=gW.bindTo(this.contextKeyService),this.treeElementHasParent=x_e.bindTo(this.contextKeyService),this.treeElementCanExpand=mW.bindTo(this.contextKeyService),this.treeElementHasChild=D_e.bindTo(this.contextKeyService),this.treeFindOpen=I_e.bindTo(this.contextKeyService),this.treeStickyScrollFocused=RZ.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Jl(a),this.updateStyleOverrides(i);const c=()=>{const h=e.getFocus()[0];if(!h)return;const u=e.getNode(h);this.treeElementCanCollapse.set(u.collapsible&&!u.collapsed),this.treeElementHasParent.set(!!e.getParentElement(h)),this.treeElementCanExpand.set(u.collapsible&&u.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(h))},d=new Set;d.add(AZ),d.add(PZ),this.disposables.push(this.contextKeyService,r.register(e),e.onDidChangeSelection(()=>{const h=e.getSelection(),u=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(h.length>0||u.length>0),this.hasMultiSelection.set(h.length>1),this.hasDoubleSelection.set(h.length===2)})}),e.onDidChangeFocus(()=>{const h=e.getSelection(),u=e.getFocus();this.hasSelectionOrFocus.set(h.length>0||u.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(h=>this.treeFindOpen.set(h)),e.onDidChangeStickyScrollFocused(h=>this.treeStickyScrollFocused.set(h)),a.onDidChangeConfiguration(h=>{let u={};if(h.affectsConfiguration(Mm)&&(this._useAltAsMultipleSelectionModifier=Jl(a)),h.affectsConfiguration(_1)){const f=a.getValue(_1);u={...u,indent:f}}if(h.affectsConfiguration(WL)&&t.renderIndentGuides===void 0){const f=a.getValue(WL);u={...u,renderIndentGuides:f}}if(h.affectsConfiguration(Ya)){const f=!!a.getValue(Ya);u={...u,smoothScrolling:f}}if(h.affectsConfiguration(pW)||h.affectsConfiguration(FL)){const f=FZ(a);u={...u,defaultFindMode:f}}if(h.affectsConfiguration(_W)||h.affectsConfiguration(FL)){const f=n();u={...u,typeNavigationMode:f}}if(h.affectsConfiguration(bW)){const f=WZ(a);u={...u,defaultFindMatchType:f}}if(h.affectsConfiguration(yr)&&t.horizontalScrolling===void 0){const f=!!a.getValue(yr);u={...u,horizontalScrolling:f}}if(h.affectsConfiguration(Za)){const f=!!a.getValue(Za);u={...u,scrollByPage:f}}if(h.affectsConfiguration(BL)&&t.expandOnlyOnTwistieClick===void 0&&(u={...u,expandOnlyOnTwistieClick:a.getValue(BL)==="doubleClick"}),h.affectsConfiguration(HL)){const f=a.getValue(HL);u={...u,enableStickyScroll:f}}if(h.affectsConfiguration(VL)){const f=Math.max(1,a.getValue(VL));u={...u,stickyScrollMaxItemCount:f}}if(h.affectsConfiguration(Xl)){const f=a.getValue(Xl);u={...u,mouseWheelScrollSensitivity:f}}if(h.affectsConfiguration(Ql)){const f=a.getValue(Ql);u={...u,fastScrollSensitivity:f}}Object.keys(u).length>0&&e.updateOptions(u)}),this.contextKeyService.onDidChangeContext(h=>{h.affectsSome(d)&&e.updateOptions({typeNavigationMode:n()})})),this.navigator=new N_e(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?Nm(e):Em)}dispose(){this.disposables=Mt(this.disposables)}};am=Ad([$t(4,Ie),$t(5,Rr),$t(6,Ze)],am);const M_e=ln.as(ca.Configuration);M_e.registerConfiguration({id:"workbench",order:7,title:m("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Mm]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[m("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),m("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:m({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[YS]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:m({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[yr]:{type:"boolean",default:!1,description:m("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[Za]:{type:"boolean",default:!1,description:m("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[_1]:{type:"number",default:8,minimum:4,maximum:40,description:m("tree indent setting","Controls tree indentation in pixels.")},[WL]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:m("render tree indent guides","Controls whether the tree should render indent guides.")},[Ya]:{type:"boolean",default:!1,description:m("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[Xl]:{type:"number",default:1,markdownDescription:m("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Ql]:{type:"number",default:5,markdownDescription:m("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[pW]:{type:"string",enum:["highlight","filter"],enumDescriptions:[m("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),m("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:m("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[FL]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[m("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),m("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),m("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:m("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:m("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[bW]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[m("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),m("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:m("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[BL]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:m("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[HL]:{type:"boolean",default:!0,description:m("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[VL]:{type:"number",minimum:1,default:7,markdownDescription:m("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[_W]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:m("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});class Ph extends F{constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=(t==null?void 0:t.supportIcons)??!1,this.domNode=Y(e,te("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",i){e||(e=""),i&&(e=Ph.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&po(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){var n,i,o;const e=[];let t=0;for(const r of this.highlights){if(r.end===r.start)continue;if(t<r.start){const c=this.text.substring(t,r.start);this.supportIcons?e.push(...Rh(c)):e.push(c),t=r.start}const a=this.text.substring(t,r.end),l=te("span.highlight",void 0,...this.supportIcons?Rh(a):[a]);r.extraClasses&&l.classList.add(...r.extraClasses),e.push(l),t=r.end}if(t<this.text.length){const r=this.text.substring(t);this.supportIcons?e.push(...Rh(r)):e.push(r)}if(Di(this.domNode,...e),(i=(n=this.options)==null?void 0:n.hoverDelegate)!=null&&i.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const r=((o=this.options)==null?void 0:o.hoverDelegate)??Ms("mouse");this.customHover=this._register(tl().setupManagedHover(r,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let n=0,i=0;return e.replace(/\r\n|\r|\n/g,(o,r)=>{i=o===`\r
`?-1:0,r+=n;for(const a of t)a.end<=r||(a.start>=r&&(a.start+=i),a.end>=r&&(a.end+=i));return n+=i,"⏎"})}}class Hv{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||po(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class zL extends F{constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new Hv(Y(e,te(".monaco-icon-label")))),this.labelContainer=Y(this.domNode.element,te(".monaco-icon-label-container")),this.nameContainer=Y(this.labelContainer,te("span.monaco-icon-name-container")),t!=null&&t.supportHighlights||t!=null&&t.supportIcons?this.nameNode=this._register(new O_e(this.nameContainer,!!t.supportIcons)):this.nameNode=new A_e(this.nameContainer),this.hoverDelegate=(t==null?void 0:t.hoverDelegate)??Ms("mouse")}get element(){return this.domNode.element}setLabel(e,t,n){const i=["monaco-icon-label"],o=["monaco-icon-label-container"];let r="";n&&(n.extraClasses&&i.push(...n.extraClasses),n.italic&&i.push("italic"),n.strikethrough&&i.push("strikethrough"),n.disabledCommand&&o.push("disabled"),n.title&&(typeof n.title=="string"?r+=n.title:r+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(n!=null&&n.iconPath){let l;!a||!oi(a)?(l=te(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=bd(n==null?void 0:n.iconPath)}else a&&a.remove();if(this.domNode.classNames=i,this.domNode.element.setAttribute("aria-label",r),this.labelContainer.classList.value="",this.labelContainer.classList.add(...o),this.setupHover(n!=null&&n.descriptionTitle?this.labelContainer:this.element,n==null?void 0:n.title),this.nameNode.setLabel(e,n),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof Ph?(l.set(t||"",n?n.descriptionMatches:void 0,void 0,n==null?void 0:n.labelEscapeNewLines),this.setupHover(l.element,n==null?void 0:n.descriptionTitle)):(l.textContent=t&&(n!=null&&n.labelEscapeNewLines)?Ph.escapeNewLines(t,[]):t||"",this.setupHover(l.element,(n==null?void 0:n.descriptionTitle)||""),l.empty=!t)}if(n!=null&&n.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=(n==null?void 0:n.suffix)??""}}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)(function(o,r){qs(r)?o.title=E9(r):r!=null&&r.markdownNotSupportedFallback?o.title=r.markdownNotSupportedFallback:o.removeAttribute("title")})(e,t);else{const i=tl().setupManagedHover(this.hoverDelegate,e,t);i&&this.customHovers.set(e,i)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new Hv(Fse(this.nameContainer,te("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new Hv(Y(e.element,te("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){var e;if(!this.descriptionNode){const t=this._register(new Hv(Y(this.labelContainer,te("span.monaco-icon-description-container"))));(e=this.creationOptions)!=null&&e.supportDescriptionHighlights?this.descriptionNode=this._register(new Ph(Y(t.element,te("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new Hv(Y(t.element,te("span.label-description"))))}return this.descriptionNode}}class A_e{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&po(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=Y(this.container,te("a.label-name",{id:t==null?void 0:t.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const i=e[n],o=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${n}`;Y(this.container,te("a.label-name",{id:o,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},i)),n<e.length-1&&Y(this.container,te("span.label-separator",void 0,(t==null?void 0:t.separator)||"/"))}}}}function P_e(s,e,t){if(!t)return;let n=0;return s.map(i=>{const o={start:n,end:n+i.length},r=t.map(a=>zi.intersect(o,a)).filter(a=>!zi.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=o.end+e.length,r})}class O_e extends F{constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&po(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new Ph(Y(this.container,te("a.label-name",{id:t==null?void 0:t.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t==null?void 0:t.matches,void 0,t==null?void 0:t.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=(t==null?void 0:t.separator)||"/",i=P_e(e,n,t==null?void 0:t.matches);for(let o=0;o<e.length;o++){const r=e[o],a=i?i[o]:void 0,l=(t==null?void 0:t.domId)&&`${t==null?void 0:t.domId}_${o}`,c=te("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":o,role:"treeitem"});this._register(new Ph(Y(this.container,c),{supportIcons:this.supportIcons})).set(r,a,void 0,t==null?void 0:t.labelEscapeNewLines),o<e.length-1&&Y(c,te("span.label-separator",void 0,n))}}}}const jy=te,BZ={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class cv extends F{constructor(e,t,n){super(),this.os=t,this.keyElements=new Set,this.options=n||Object.create(null);const i=this.options.keybindingLabelForeground;this.domNode=Y(e,jy(".monaco-keybinding")),i&&(this.domNode.style.color=i),this.hover=this._register(tl().setupManagedHover(Ms("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&cv.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let n=1;n<e.length;n++)Y(this.domNode,jy("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[n],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){xi(this.domNode),this.keyElements.clear()}renderChord(e,t,n){const i=O9.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,!!(n!=null&&n.ctrlKey),i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,!!(n!=null&&n.shiftKey),i.separator),t.altKey&&this.renderKey(e,i.altKey,!!(n!=null&&n.altKey),i.separator),t.metaKey&&this.renderKey(e,i.metaKey,!!(n!=null&&n.metaKey),i.separator);const o=t.keyLabel;o&&this.renderKey(e,o,!!(n!=null&&n.keyCode),"")}renderKey(e,t,n,i){Y(e,this.createKeyElement(t,n?".highlight":"")),i&&Y(e,jy("span.monaco-keybinding-key-separator",void 0,i))}renderUnbound(e){Y(e,this.createKeyElement(m("unbound","Unbound")))}createKeyElement(e,t=""){const n=jy("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),this.options.keybindingLabelBackground&&(n.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(n.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(n.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(n.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),n}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&po(e.firstPart,t.firstPart)&&po(e.chordPart,t.chordPart)}}const aV=new ja(()=>{const s=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:s,collatorIsNumeric:s.resolvedOptions().numeric}});function F_e(s,e,t=!1){const n=s||"",i=e||"",o=aV.value.collator.compare(n,i);return aV.value.collatorIsNumeric&&o===0&&n!==i?n<i?-1:1:o}function W_e(s,e,t){const n=s.toLowerCase(),i=e.toLowerCase(),o=B_e(s,e,t);if(o)return o;const r=n.endsWith(t),a=i.endsWith(t);if(r!==a)return r?-1:1;const l=F_e(n,i);return l!==0?l:n.localeCompare(i)}function B_e(s,e,t){const n=s.toLowerCase(),i=e.toLowerCase(),o=n.startsWith(t),r=i.startsWith(t);if(o!==r)return o?-1:1;if(o&&r){if(n.length<i.length)return-1;if(n.length>i.length)return 1}return 0}var uE=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},$P=function(s,e){return function(t,n){e(t,n,s)}},UP;const pa=te;class HZ{constructor(e,t,n){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new ja(()=>{const i=n.label??"",o=iC(i).text.trim(),r=n.ariaLabel||[i,this.saneDescription,this.saneDetail].map(a=>Kde(a)).filter(a=>!!a).join(", ");return{saneLabel:i,saneSortLabel:o,saneAriaLabel:r}}),this._saneDescription=n.description,this._saneTooltip=n.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class Ni extends HZ{constructor(e,t,n,i,o,r){var a,l,c;super(e,t,o),this.fireButtonTriggered=n,this._onChecked=i,this.item=o,this._separator=r,this._checked=!1,this.onChecked=t?se.map(se.filter(this._onChecked.event,d=>d.element===this),d=>d.checked):se.None,this._saneDetail=o.detail,this._labelHighlights=(a=o.highlights)==null?void 0:a.label,this._descriptionHighlights=(l=o.highlights)==null?void 0:l.description,this._detailHighlights=(c=o.highlights)==null?void 0:c.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var Dl;(function(s){s[s.NONE=0]="NONE",s[s.MOUSE_HOVER=1]="MOUSE_HOVER",s[s.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(Dl||(Dl={}));class Ju extends HZ{constructor(e,t,n){super(e,!1,n),this.fireSeparatorButtonTriggered=t,this.separator=n,this.children=new Array,this.focusInsideSeparator=Dl.NONE}}class H_e{getHeight(e){return e instanceof Ju?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof Ni?$L.ID:UL.ID}}class V_e{getWidgetAriaLabel(){return m("quickInput","Quick Input")}getAriaLabel(e){var t;return(t=e.separator)!=null&&t.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof Ni)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class VZ{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new q,t.toDisposeTemplate=new q,t.entry=Y(e,pa(".quick-input-list-entry"));const n=Y(t.entry,pa("label.quick-input-list-label"));t.toDisposeTemplate.add(hn(n,ee.CLICK,c=>{t.checkbox.offsetParent||c.preventDefault()})),t.checkbox=Y(n,pa("input.quick-input-list-checkbox")),t.checkbox.type="checkbox";const i=Y(n,pa(".quick-input-list-rows")),o=Y(i,pa(".quick-input-list-row")),r=Y(i,pa(".quick-input-list-row"));t.label=new zL(o,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=K3(t.label.element,pa(".quick-input-list-icon"));const a=Y(o,pa(".quick-input-list-entry-keybinding"));t.keybinding=new cv(a,mo),t.toDisposeTemplate.add(t.keybinding);const l=Y(r,pa(".quick-input-list-label-meta"));return t.detail=new zL(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=Y(t.entry,pa(".quick-input-list-separator")),t.actionBar=new Zo(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,n){n.toDisposeElement.clear(),n.actionBar.clear()}}var Jf;let $L=(Jf=class extends VZ{constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return UP.ID}renderTemplate(e){const t=super.renderTemplate(e);return t.toDisposeTemplate.add(hn(t.checkbox,ee.CHANGE,n=>{t.element.checked=t.checkbox.checked})),t}renderElement(e,t,n){var u;const i=e.element;n.element=i,i.element=n.entry??void 0;const o=i.item;n.checkbox.checked=i.checked,n.toDisposeElement.add(i.onChecked(f=>n.checkbox.checked=f)),n.checkbox.disabled=i.checkboxDisabled;const{labelHighlights:r,descriptionHighlights:a,detailHighlights:l}=i;if(o.iconPath){const f=cb(this.themeService.getColorTheme().type)?o.iconPath.dark:o.iconPath.light??o.iconPath.dark,g=Se.revive(f);n.icon.className="quick-input-list-icon",n.icon.style.backgroundImage=bd(g)}else n.icon.style.backgroundImage="",n.icon.className=o.iconClass?`quick-input-list-icon ${o.iconClass}`:"";let c;!i.saneTooltip&&i.saneDescription&&(c={markdown:{value:i.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:i.saneDescription});const d={matches:r||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(d.extraClasses=o.iconClasses,d.italic=o.italic,d.strikethrough=o.strikethrough,n.entry.classList.remove("quick-input-list-separator-as-item"),n.label.setLabel(i.saneLabel,i.saneDescription,d),n.keybinding.set(o.keybinding),i.saneDetail){let f;i.saneTooltip||(f={markdown:{value:i.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:i.saneDetail}),n.detail.element.style.display="",n.detail.setLabel(i.saneDetail,void 0,{matches:l,title:f,labelEscapeNewLines:!0})}else n.detail.element.style.display="none";(u=i.separator)!=null&&u.label?(n.separator.textContent=i.separator.label,n.separator.style.display="",this.addItemWithSeparator(i)):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!i.separator);const h=o.buttons;h&&h.length?(n.actionBar.push(h.map((f,g)=>FC(f,`id-${g}`,()=>i.fireButtonTriggered({button:f,item:i.item}))),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,n)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}},UP=Jf,Jf.ID="quickpickitem",Jf);$L=UP=uE([$P(1,Yn)],$L);const YD=class YD extends VZ{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}get templateId(){return YD.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderTemplate(e){const t=super.renderTemplate(e);return t.checkbox.style.display="none",t}renderElement(e,t,n){const i=e.element;n.element=i,i.element=n.entry??void 0,i.element.classList.toggle("focus-inside",!!i.focusInsideSeparator);const o=i.separator,{labelHighlights:r,descriptionHighlights:a,detailHighlights:l}=i;n.icon.style.backgroundImage="",n.icon.className="";let c;!i.saneTooltip&&i.saneDescription&&(c={markdown:{value:i.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:i.saneDescription});const d={matches:r||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(n.entry.classList.add("quick-input-list-separator-as-item"),n.label.setLabel(i.saneLabel,i.saneDescription,d),i.saneDetail){let u;i.saneTooltip||(u={markdown:{value:i.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:i.saneDetail}),n.detail.element.style.display="",n.detail.setLabel(i.saneDetail,void 0,{matches:l,title:u,labelEscapeNewLines:!0})}else n.detail.element.style.display="none";n.separator.style.display="none",n.entry.classList.add("quick-input-list-separator-border");const h=o.buttons;h&&h.length?(n.actionBar.push(h.map((u,f)=>FC(u,`id-${f}`,()=>i.fireSeparatorButtonTriggered({button:u,separator:i.separator}))),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions"),this.addSeparator(i)}disposeElement(e,t,n){var i;this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||(i=e.element.element)==null||i.classList.remove("focus-inside"),super.disposeElement(e,t,n)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}};YD.ID="quickpickseparator";let UL=YD,b1=class extends F{constructor(e,t,n,i,o,r){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=n,this.accessibilityService=r,this._onKeyDown=new O,this._onLeave=new O,this.onLeave=this._onLeave.event,this._visibleCountObservable=Ge("VisibleCount",0),this.onChangedVisibleCount=se.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=Ge("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=se.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=Ge("CheckedCount",0),this.onChangedCheckedCount=se.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=iP({equalsFn:en},new Array),this.onChangedCheckedElements=se.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new O,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new O,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new O,this._elementCheckedEventBufferer=new f0,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new q),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=Y(this.parent,pa(".quick-input-list")),this._separatorRenderer=new UL(t),this._itemRenderer=o.createInstance($L,t),this._tree=this._register(o.createInstance(VP,"QuickInput",this._container,new H_e,[this._itemRenderer,this._separatorRenderer],{filter:{filter(a){return a.hidden?0:a instanceof Ju?2:1}},sorter:{compare:(a,l)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const c=this._lastQueryString.toLowerCase();return $_e(a,l,c)}},accessibilityProvider:new V_e,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:yb.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=i,this._registerListeners()}get onDidChangeFocus(){return se.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof Ni).map(t=>t.item),this._store)}get onDidChangeSelection(){return se.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof Ni).map(t=>t.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new Pt(e);switch(t.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register($(this._container,ee.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register($(this._container,ee.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(t=>!t.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new sq(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{var n;if(b8(t.browserEvent.target)){e.cancel();return}if(!(!b8(t.browserEvent.relatedTarget)&&ii(t.browserEvent.relatedTarget,(n=t.element)==null?void 0:n.element)))try{await e.trigger(async()=>{t.element instanceof Ni&&this.showHover(t.element)})}catch(i){if(!Tr(i))throw i}})),this._register(this._tree.onMouseOut(t=>{var n;ii(t.browserEvent.relatedTarget,(n=t.element)==null?void 0:n.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const n of this._separatorRenderer.visibleSeparators){const i=n===t;!!(n.focusInsideSeparator&Dl.ACTIVE_ITEM)!==i&&(i?n.focusInsideSeparator|=Dl.ACTIVE_ITEM:n.focusInsideSeparator&=~Dl.ACTIVE_ITEM,this._tree.rerender(n))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const n of this._separatorRenderer.visibleSeparators){if(n!==t)continue;!!(n.focusInsideSeparator&Dl.MOUSE_HOVER)||(n.focusInsideSeparator|=Dl.MOUSE_HOVER,this._tree.rerender(n))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const n of this._separatorRenderer.visibleSeparators){if(n!==t)continue;!!(n.focusInsideSeparator&Dl.MOUSE_HOVER)&&(n.focusInsideSeparator&=~Dl.MOUSE_HOVER,this._tree.rerender(n))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(n=>n instanceof Ni);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof Ju&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let t;this._itemElements=new Array,this._elementTree=e.reduce((n,i,o)=>{let r;if(i.type==="separator"){if(!i.buttons)return n;t=new Ju(o,a=>this._onSeparatorButtonTriggered.fire(a),i),r=t}else{const a=o>0?e[o-1]:void 0;let l;a&&a.type==="separator"&&!a.buttons&&(t=void 0,l=a);const c=new Ni(o,this._hasCheckboxes,d=>this._onButtonTriggered.fire(d),this._elementChecked,i,l);if(this._itemElements.push(c),t)return t.children.push(c),n;r=c}return n.push(r),n},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const n=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),i=n==null?void 0:n.parentNode;if(n&&i){const o=n.nextSibling;n.remove(),i.insertBefore(n,o)}},0)}setFocusedElements(e){const t=e.map(n=>this._itemElements.find(i=>i.item===n)).filter(n=>!!n).filter(n=>!n.hidden);if(this._tree.setFocus(t),e.length>0){const n=this._tree.getFocus()[0];n&&this._tree.reveal(n)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(n=>this._itemElements.find(i=>i.item===n)).filter(n=>!!n);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const n of e)t.add(n);for(const n of this._itemElements)n.checked=t.has(n.item)})}focus(e){var t;if(this._itemElements.length)switch(e===Ht.Second&&this._itemElements.length<2&&(e=Ht.First),e){case Ht.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,n=>n.element instanceof Ni);break;case Ht.Second:{this._tree.scrollTop=0;let n=!1;this._tree.focusFirst(void 0,i=>i.element instanceof Ni?n?!0:(n=!n,!1):!1);break}case Ht.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,n=>n.element instanceof Ni);break;case Ht.Next:{const n=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,o=>o.element instanceof Ni?(this._tree.reveal(o.element),!0):!1);const i=this._tree.getFocus();n.length&&n[0]===i[0]&&n[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case Ht.Previous:{const n=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,o=>{if(!(o.element instanceof Ni))return!1;const r=this._tree.getParentElement(o.element);return r===null||r.children[0]!==o.element?this._tree.reveal(o.element):this._tree.reveal(r),!0});const i=this._tree.getFocus();n.length&&n[0]===i[0]&&n[0]===this._itemElements[0]&&this._onLeave.fire();break}case Ht.NextPage:this._tree.focusNextPage(void 0,n=>n.element instanceof Ni?(this._tree.reveal(n.element),!0):!1);break;case Ht.PreviousPage:this._tree.focusPreviousPage(void 0,n=>{if(!(n.element instanceof Ni))return!1;const i=this._tree.getParentElement(n.element);return i===null||i.children[0]!==n.element?this._tree.reveal(n.element):this._tree.reveal(i),!0});break;case Ht.NextSeparator:{let n=!1;const i=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,r=>{if(n)return!0;if(r.element instanceof Ju)n=!0,this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element.children[0]):this._tree.reveal(r.element,0);else if(r.element instanceof Ni){if(r.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),!0;if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1});const o=this._tree.getFocus()[0];i===o&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,r=>r.element instanceof Ni));break}case Ht.PreviousSeparator:{let n,i=!!((t=this._tree.getFocus()[0])!=null&&t.separator);this._tree.focusPrevious(void 0,!0,void 0,o=>{if(o.element instanceof Ju)i?n||(this._separatorRenderer.isSeparatorVisible(o.element)?this._tree.reveal(o.element):this._tree.reveal(o.element,0),n=o.element.children[0]):i=!0;else if(o.element instanceof Ni&&!n){if(o.element.separator)this._itemRenderer.isItemWithSeparatorVisible(o.element)?this._tree.reveal(o.element):this._tree.reveal(o.element,0),n=o.element;else if(o.element===this._elementTree[0])return this._tree.reveal(o.element,0),!0}return!1}),n&&this._tree.setFocus([n]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const i=n.index&&this._inputElements[n.index-1];n.item&&(n.separator=i&&i.type==="separator"&&!i.buttons?i:void 0)});else{let n;this._itemElements.forEach(i=>{let o;this.matchOnLabelMode==="fuzzy"?o=this.matchOnLabel?XN(e,iC(i.saneLabel))??void 0:void 0:o=this.matchOnLabel?z_e(t,iC(i.saneLabel))??void 0:void 0;const r=this.matchOnDescription?XN(e,iC(i.saneDescription||""))??void 0:void 0,a=this.matchOnDetail?XN(e,iC(i.saneDetail||""))??void 0:void 0;if(o||r||a?(i.labelHighlights=o,i.descriptionHighlights=r,i.detailHighlights=a,i.hidden=!1):(i.labelHighlights=void 0,i.descriptionHighlights=void 0,i.detailHighlights=void 0,i.hidden=i.item?!i.item.alwaysShow:!0),i.item?i.separator=void 0:i.separator&&(i.hidden=!0),!this.sortByLabel){const l=i.index&&this._inputElements[i.index-1]||void 0;(l==null?void 0:l.type)==="separator"&&!l.buttons&&(n=l),n&&!i.hidden&&(i.separator=n,n=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(n=>n instanceof Ni),t=this._allVisibleChecked(e);for(const n of e)n.checkboxDisabled||(n.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!(e!=null&&e.saneTooltip)||!(e instanceof Ni))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new q;t.add(this._tree.onDidChangeFocus(n=>{n.elements[0]instanceof Ni&&this.showHover(n.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const n of e)n instanceof Ju?t.push({element:n,collapsible:!1,collapsed:!1,children:n.children.map(i=>({element:i,collapsible:!1,collapsed:!1}))}):t.push({element:n,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let n=0,i=e.length;n<i;n++){const o=e[n];if(!o.hidden)if(o.checked)t=!0;else return!1}return t}_updateCheckedObservables(){rn(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(n=>n.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){var t,n,i;this._lastHover&&!this._lastHover.isDisposed&&((n=(t=this.hoverDelegate).onDidHideHover)==null||n.call(t),(i=this._lastHover)==null||i.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:o=>{this.linkOpenerDelegate(o)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};uE([Nn],b1.prototype,"onDidChangeFocus",null);uE([Nn],b1.prototype,"onDidChangeSelection",null);b1=uE([$P(4,Ce),$P(5,xo)],b1);function z_e(s,e){const{text:t,iconOffsets:n}=e;if(!n||n.length===0)return lV(s,t);const i=g0(t," "),o=t.length-i.length,r=lV(s,i);if(r)for(const a of r){const l=n[a.start+o]+o;a.start+=l,a.end+=l}return r}function lV(s,e){const t=e.toLowerCase().indexOf(s.toLowerCase());return t!==-1?[{start:t,end:t+s.length}]:null}function $_e(s,e,t){const n=s.labelHighlights||[],i=e.labelHighlights||[];return n.length&&!i.length?-1:!n.length&&i.length?1:n.length===0&&i.length===0?0:W_e(s.saneSortLabel,e.saneSortLabel,t)}const zZ={weight:200,when:K.and(K.equals(uZ,"quickPick"),_pe),metadata:{description:m("quickPick","Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function lo(s,e={}){Ts.registerCommandAndKeybindingRule({...zZ,...s,secondary:U_e(s.primary,s.secondary??[],e)})}const jL=et?256:2048;function U_e(s,e,t={}){return t.withAltMod&&e.push(512+s),t.withCtrlMod&&(e.push(jL+s),t.withAltMod&&e.push(512+jL+s)),t.withCmdMod&&et&&(e.push(2048+s),t.withCtrlMod&&e.push(2304+s),t.withAltMod&&(e.push(2560+s),t.withCtrlMod&&e.push(2816+s))),e}function Po(s,e){return t=>{const n=t.get(Nr).currentQuickInput;if(n)return e&&n.quickNavigate?n.focus(e):n.focus(s)}}lo({id:"quickInput.pageNext",primary:12,handler:Po(Ht.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});lo({id:"quickInput.pagePrevious",primary:11,handler:Po(Ht.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});lo({id:"quickInput.first",primary:jL+14,handler:Po(Ht.First)},{withAltMod:!0,withCmdMod:!0});lo({id:"quickInput.last",primary:jL+13,handler:Po(Ht.Last)},{withAltMod:!0,withCmdMod:!0});lo({id:"quickInput.next",primary:18,handler:Po(Ht.Next)},{withCtrlMod:!0});lo({id:"quickInput.previous",primary:16,handler:Po(Ht.Previous)},{withCtrlMod:!0});const cV=m("quickInput.nextSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),dV=m("quickInput.previousSeparatorWithQuickAccessFallback","If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");et?(lo({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:Po(Ht.NextSeparator,Ht.Next),metadata:{description:cV}}),lo({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:Po(Ht.NextSeparator)},{withCtrlMod:!0}),lo({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:Po(Ht.PreviousSeparator,Ht.Previous),metadata:{description:dV}}),lo({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:Po(Ht.PreviousSeparator)},{withCtrlMod:!0})):(lo({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:Po(Ht.NextSeparator,Ht.Next),metadata:{description:cV}}),lo({id:"quickInput.nextSeparator",primary:2578,handler:Po(Ht.NextSeparator)}),lo({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:Po(Ht.PreviousSeparator,Ht.Previous),metadata:{description:dV}}),lo({id:"quickInput.previousSeparator",primary:2576,handler:Po(Ht.PreviousSeparator)}));lo({id:"quickInput.acceptInBackground",when:K.and(zZ.when,K.or(EZ.negate(),Cpe)),primary:17,weight:250,handler:s=>{const e=s.get(Nr).currentQuickInput;e==null||e.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});var j_e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},CR=function(s,e){return function(t,n){e(t,n,s)}},jP;const so=te;var eg;let qP=(eg=class extends F{get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,n,i){super(),this.options=e,this.layoutService=t,this.instantiationService=n,this.contextKeyService=i,this.enabled=!0,this.onDidAcceptEmitter=this._register(new O),this.onDidCustomEmitter=this._register(new O),this.onDidTriggerButtonEmitter=this._register(new O),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new O),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new O),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=ppe.bindTo(this.contextKeyService),this.quickInputTypeContext=bpe.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=vpe.bindTo(this.contextKeyService),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(se.runAndSubscribe(bT,({window:o,disposables:r})=>this.registerKeyModsListeners(o,r),{window:Et,disposables:this._store})),this._register(Cse(o=>{this.ui&&Le(this.ui.container)===o&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(e,t){const n=i=>{this.keyMods.ctrlCmd=i.ctrlKey||i.metaKey,this.keyMods.alt=i.altKey};for(const i of[ee.KEY_DOWN,ee.KEY_UP,ee.MOUSE_DOWN])t.add($(e,i,n,!0))}getUI(e){if(this.ui)return e&&Le(this._container)!==Le(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=Y(this._container,so(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const n=Qo(t),i=Y(t,so(".quick-input-titlebar")),o=this._register(new Zo(i,{hoverDelegate:this.options.hoverDelegate}));o.domNode.classList.add("quick-input-left-action-bar");const r=Y(i,so(".quick-input-title")),a=this._register(new Zo(i,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=Y(t,so(".quick-input-header")),c=Y(l,so("input.quick-input-check-all"));c.type="checkbox",c.setAttribute("aria-label",m("quickInput.checkAll","Toggle all checkboxes")),this._register(hn(c,ee.CHANGE,H=>{const X=c.checked;z.setAllVisibleChecked(X)})),this._register($(c,ee.CLICK,H=>{(H.x||H.y)&&f.setFocus()}));const d=Y(l,so(".quick-input-description")),h=Y(l,so(".quick-input-and-message")),u=Y(h,so(".quick-input-filter")),f=this._register(new Epe(u,this.styles.inputBox,this.styles.toggle));f.setAttribute("aria-describedby",`${this.idPrefix}message`);const g=Y(u,so(".quick-input-visible-count"));g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true");const p=new AP(g,{countFormat:m({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")},this.styles.countBadge),_=Y(u,so(".quick-input-count"));_.setAttribute("aria-live","polite");const b=new AP(_,{countFormat:m({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")},this.styles.countBadge),v=this._register(new Zo(l,{hoverDelegate:this.options.hoverDelegate}));v.domNode.classList.add("quick-input-inline-action-bar");const C=Y(l,so(".quick-input-action")),w=this._register(new RL(C,this.styles.button));w.label=m("ok","OK"),this._register(w.onDidClick(H=>{this.onDidAcceptEmitter.fire()}));const y=Y(l,so(".quick-input-action")),k=this._register(new RL(y,{...this.styles.button,supportIcons:!0}));k.label=m("custom","Custom"),this._register(k.onDidClick(H=>{this.onDidCustomEmitter.fire()}));const x=Y(h,so(`#${this.idPrefix}message.quick-input-message`)),D=this._register(new PP(t,this.styles.progressBar));D.getContainer().classList.add("quick-input-progress");const N=Y(t,so(".quick-input-html-widget"));N.tabIndex=-1;const W=Y(t,so(".quick-input-description")),B=this.idPrefix+"list",z=this._register(this.instantiationService.createInstance(b1,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,B));f.setAttribute("aria-controls",B),this._register(z.onDidChangeFocus(()=>{f.setAttribute("aria-activedescendant",z.getActiveDescendant()??"")})),this._register(z.onChangedAllVisibleChecked(H=>{c.checked=H})),this._register(z.onChangedVisibleCount(H=>{p.setCount(H)})),this._register(z.onChangedCheckedCount(H=>{b.setCount(H)})),this._register(z.onLeave(()=>{setTimeout(()=>{this.controller&&(f.setFocus(),this.controller instanceof NL&&this.controller.canSelectMany&&z.clearFocus())},0)}));const U=Ka(t);return this._register(U),this._register($(t,ee.FOCUS,H=>{const X=this.getUI();if(ii(H.relatedTarget,X.inputContainer)){const re=X.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==re&&this.endOfQuickInputBoxContext.set(re)}ii(H.relatedTarget,X.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=oi(H.relatedTarget)?H.relatedTarget:void 0)},!0)),this._register(U.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(wb.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(f.onKeyDown(H=>{const X=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==X&&this.endOfQuickInputBoxContext.set(X)})),this._register($(t,ee.FOCUS,H=>{f.setFocus()})),this._register(hn(t,ee.KEY_DOWN,H=>{if(!ii(H.target,N))switch(H.keyCode){case 3:it.stop(H,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:it.stop(H,!0),this.hide(wb.Gesture);break;case 2:if(!H.altKey&&!H.ctrlKey&&!H.metaKey){const X=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?X.push("input"):X.push("input[type=text]"),this.getUI().list.displayed&&X.push(".monaco-list"),this.getUI().message&&X.push(".quick-input-message a"),this.getUI().widget){if(ii(H.target,this.getUI().widget))break;X.push(".quick-input-html-widget")}const re=t.querySelectorAll(X.join(", "));H.shiftKey&&H.target===re[0]?(it.stop(H,!0),z.clearFocus()):!H.shiftKey&&ii(H.target,re[re.length-1])&&(it.stop(H,!0),re[0].focus())}break;case 10:H.ctrlKey&&(it.stop(H,!0),this.getUI().list.toggleHover());break}})),this.ui={container:t,styleSheet:n,leftActionBar:o,titleBar:i,title:r,description1:W,description2:d,widget:N,rightActionBar:a,inlineActionBar:v,checkAll:c,inputContainer:h,filterContainer:u,inputBox:f,visibleCountContainer:g,visibleCount:p,countContainer:_,count:b,okContainer:C,ok:w,message:x,customButtonContainer:y,customButton:k,list:z,progressBar:D,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:H=>this.show(H),hide:()=>this.hide(),setVisibilities:H=>this.setVisibilities(H),setEnabled:H=>this.setEnabled(H),setContextKey:H=>this.options.setContextKey(H),linkOpenerDelegate:H=>this.options.linkOpenerDelegate(H)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,Y(this._container,this.ui.container))}pick(e,t={},n=Ue.None){return new Promise((i,o)=>{let r=d=>{var h;r=i,(h=t.onKeyMods)==null||h.call(t,a.keyMods),i(d)};if(n.isCancellationRequested){r(void 0);return}const a=this.createQuickPick({useSeparators:!0});let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)r(a.selectedItems.slice()),a.hide();else{const d=a.activeItems[0];d&&(r(d),a.hide())}}),a.onDidChangeActive(d=>{const h=d[0];h&&t.onDidFocus&&t.onDidFocus(h)}),a.onDidChangeSelection(d=>{if(!a.canSelectMany){const h=d[0];h&&(r(h),a.hide())}}),a.onDidTriggerItemButton(d=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...d,removeItem:()=>{const h=a.items.indexOf(d.item);if(h!==-1){const u=a.items.slice(),f=u.splice(h,1),g=a.activeItems.filter(_=>_!==f[0]),p=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=u,g&&(a.activeItems=g),a.keepScrollPosition=p}}})),a.onDidTriggerSeparatorButton(d=>{var h;return(h=t.onDidTriggerSeparatorButton)==null?void 0:h.call(t,d)}),a.onDidChangeValue(d=>{l&&!d&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{Mt(c),r(void 0)})];a.title=t.title,t.value&&(a.value=t.value),a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([d,h])=>{l=h,a.busy=!1,a.items=d,a.canSelectMany&&(a.selectedItems=d.filter(u=>u.type!=="separator"&&u.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,d=>{o(d),a.hide()})})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new NL(t)}createInputBox(){const e=this.getUI(!0);return new wpe(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const n=this.controller;this.controller=e,n==null||n.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",Di(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(Tn.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Di(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const i=this.options.backKeybindingLabel();RP.tooltip=i?m("quickInput.backWithKeybinding","Back ({0})",i):m("quickInput.back","Back"),t.container.style.display="",this.updateLayout(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;for(const t of this.getUI().leftActionBar.viewItems)t.action.enabled=e;for(const t of this.getUI().rightActionBar.viewItems)t.action.enabled=e;this.getUI().checkAll.disabled=!e,this.getUI().inputBox.enabled=e,this.getUI().ok.enabled=e,this.getUI().list.enabled=e}}hide(e){var o;const t=this.controller;if(!t)return;t.willHide(e);const n=(o=this.ui)==null?void 0:o.container,i=n&&!Cq(n);if(this.controller=null,this.onHideEmitter.fire(),n&&(n.style.display="none"),!i){let r=this.previousFocusElement;for(;r&&!r.offsetParent;)r=r.parentElement??void 0;r!=null&&r.offsetParent?(r.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,jP.MAX_WIDTH);e.width=t+"px",e.marginLeft="-"+t/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,widgetBorder:i,widgetShadow:o}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=n??"",this.ui.container.style.border=i?`1px solid ${i}`:"",this.ui.container.style.boxShadow=o?`0 0 8px 2px ${o}`:"",this.ui.list.style(this.styles.list);const r=[];this.styles.pickerGroup.pickerGroupBorder&&r.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&r.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(r.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&r.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&r.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&r.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&r.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&r.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),r.push("}"));const a=r.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}},jP=eg,eg.MAX_WIDTH=600,eg);qP=jP=j_e([CR(1,Su),CR(2,Ce),CR(3,Ie)],qP);var q_e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Vv=function(s,e){return function(t,n){e(t,n,s)}};let KP=class extends Fae{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(NP))),this._quickAccess}constructor(e,t,n,i,o){super(n),this.instantiationService=e,this.contextKeyService=t,this.layoutService=i,this.configurationService=o,this._onShow=this._register(new O),this._onHide=this._register(new O),this.contexts=new Map}createController(e=this.layoutService,t){const n={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:o=>this.setContextKey(o),linkOpenerDelegate:o=>{this.instantiationService.invokeFunction(r=>{r.get(eo).open(o,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(MP))},i=this._register(this.instantiationService.createInstance(qP,{...n,...t}));return i.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(o=>{Le(e.activeContainer)===Le(i.container)&&i.layout(o,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{i.isVisible()||i.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(i.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(i.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),i}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new le(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t==null||t.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,n=Ue.None){return this.controller.pick(e,t,n)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:de(F6),quickInputForeground:de(Jce),quickInputTitleBackground:de(ede),widgetBorder:de(EK),widgetShadow:de(ev)},inputBox:CL,toggle:vL,countBadge:IG,button:Afe,progressBar:Pfe,keybindingLabel:Mfe,list:Nm({listBackground:F6,listFocusBackground:e1,listFocusForeground:Jw,listInactiveFocusForeground:Jw,listInactiveSelectionIconForeground:C9,listInactiveFocusBackground:e1,listFocusOutline:Zt,listInactiveFocusOutline:Zt}),pickerGroup:{pickerGroupBorder:de(tde),pickerGroupForeground:de(HK)}}}};KP=q_e([Vv(0,Ce),Vv(1,Ie),Vv(2,Yn),Vv(3,Su),Vv(4,Ze)],KP);var $Z=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pf=function(s,e){return function(t,n){e(t,n,s)}};let GP=class extends KP{constructor(e,t,n,i,o,r){super(t,n,i,new gA(e.getContainerDomNode(),o),r),this.host=void 0;const a=v1.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return se.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return se.None},get onDidAddContainer(){return se.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};GP=$Z([pf(1,Ce),pf(2,Ie),pf(3,Yn),pf(4,mt),pf(5,Ze)],GP);let ZP=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(GP,e);this.mapEditorToService.set(e,t),iu(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,n=Ue.None){return this.activeService.pick(e,t,n)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}};ZP=$Z([pf(0,Ce),pf(1,mt)],ZP);const XD=class XD{static get(e){return e.getContribution(XD.ID)}constructor(e){this.editor=e,this.widget=new YP(this.editor)}dispose(){this.widget.dispose()}};XD.ID="editor.controller.quickInput";let v1=XD;const QD=class QD{constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return QD.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}};QD.ID="editor.contrib.quickInputWidget";let YP=QD;dt(v1.ID,v1,4);class K_e{constructor(e,t,n,i,o){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=i,this.background=o}}function G_e(s){if(!s||!Array.isArray(s))return[];const e=[];let t=0;for(let n=0,i=s.length;n<i;n++){const o=s[n];let r=-1;if(typeof o.fontStyle=="string"){r=0;const c=o.fontStyle.split(" ");for(let d=0,h=c.length;d<h;d++)switch(c[d]){case"italic":r=r|1;break;case"bold":r=r|2;break;case"underline":r=r|4;break;case"strikethrough":r=r|8;break}}let a=null;typeof o.foreground=="string"&&(a=o.foreground);let l=null;typeof o.background=="string"&&(l=o.background),e[t++]=new K_e(o.token||"",n,r,a,l)}return e}function Z_e(s,e){s.sort((d,h)=>{const u=ebe(d.token,h.token);return u!==0?u:d.index-h.index});let t=0,n="000000",i="ffffff";for(;s.length>=1&&s[0].token==="";){const d=s.shift();d.fontStyle!==-1&&(t=d.fontStyle),d.foreground!==null&&(n=d.foreground),d.background!==null&&(i=d.background)}const o=new X_e;for(const d of e)o.getId(d);const r=o.getId(n),a=o.getId(i),l=new CW(t,r,a),c=new wW(l);for(let d=0,h=s.length;d<h;d++){const u=s[d];c.insert(u.token,u.fontStyle,o.getId(u.foreground),o.getId(u.background))}return new UZ(o,c)}const Y_e=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class X_e{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(Y_e);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=Z.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class UZ{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(G_e(e),t)}static createFromParsedTokenTheme(e,t){return Z_e(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){const i=this._match(t),o=J_e(t);n=(i.metadata|o<<8)>>>0,this._cache.set(t,n)}return(n|e<<0)>>>0}}const Q_e=/\b(comment|string|regex|regexp)\b/;function J_e(s){const e=s.match(Q_e);if(!e)return 0;switch(e[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function ebe(s,e){return s<e?-1:s>e?1:0}class CW{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new CW(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==-1&&(this._fontStyle=e),t!==0&&(this._foreground=t),n!==0&&(this._background=n),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}class wW{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let n,i;t===-1?(n=e,i=""):(n=e.substring(0,t),i=e.substring(t+1));const o=this._children.get(n);return typeof o<"u"?o.match(i):this._mainRule}insert(e,t,n,i){if(e===""){this._mainRule.acceptOverwrite(t,n,i);return}const o=e.indexOf(".");let r,a;o===-1?(r=e,a=""):(r=e.substring(0,o),a=e.substring(o+1));let l=this._children.get(r);typeof l>"u"&&(l=new wW(this._mainRule.clone()),this._children.set(r,l)),l.insert(a,t,n,i)}}function tbe(s){const e=[];for(let t=1,n=s.length;t<n;t++){const i=s[t];e[t]=`.mtk${t} { color: ${i}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const nbe={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[oa]:"#FFFFFE",[sc]:"#000000",[IK]:"#E5EBF1",[A0]:"#D3D3D3",[P0]:"#939393",[g9]:"#ADD6FF4D"}},ibe={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[oa]:"#1E1E1E",[sc]:"#D4D4D4",[IK]:"#3A3D41",[A0]:"#404040",[P0]:"#707070",[g9]:"#ADD6FF26"}},sbe={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[oa]:"#000000",[sc]:"#FFFFFF",[A0]:"#FFFFFF",[P0]:"#FFFFFF"}},obe={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[oa]:"#FFFFFF",[sc]:"#292929",[A0]:"#292929",[P0]:"#292929"}},rbe={IconContribution:"base.contributions.icons"};var hV;(function(s){function e(t,n){let i=t.defaults;for(;De.isThemeIcon(i);){const o=Am.getIcon(i.id);if(!o)return;i=o.defaults}return i}s.getDefinition=e})(hV||(hV={}));var uV;(function(s){function e(n){return{weight:n.weight,style:n.style,src:n.src.map(i=>({format:i.format,location:i.location.toString()}))}}s.toJSONObject=e;function t(n){const i=o=>qs(o)?o:void 0;if(n&&Array.isArray(n.src)&&n.src.every(o=>qs(o.format)&&qs(o.location)))return{weight:i(n.weight),style:i(n.style),src:n.src.map(o=>({format:o.format,location:Se.parse(o.location)}))}}s.fromJSONObject=t})(uV||(uV={}));class abe{constructor(){this._onDidChange=new O,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:m("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:m("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${De.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){const o=this.iconsById[e];if(o){if(n&&!o.description){o.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return o}const r={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=r;const a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}toString(){const e=(o,r)=>o.id.localeCompare(r.id),t=o=>{for(;De.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const i=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(const o of i.filter(r=>!!r.description).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|${De.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const o of i.filter(r=>!De.isThemeIcon(r.defaults)).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|`);return n.join(`
`)}}const Am=new abe;ln.add(rbe.IconContribution,Am);function jt(s,e,t,n){return Am.registerIcon(s,e,t,n)}function jZ(){return Am}function lbe(){const s=zj();for(const e in s){const t="\\"+s[e].toString(16);Am.registerIcon(e,{fontCharacter:t})}}lbe();const qZ="vscode://schemas/icons",KZ=ln.as(MT.JSONContribution);KZ.registerSchema(qZ,Am.getIconSchema());const fV=new It(()=>KZ.notifySchemaChanged(qZ),200);Am.onDidChange(()=>{fV.isScheduled()||fV.schedule()});const GZ=jt("widget-close",J.close,m("widgetClose","Icon for the close action in widgets."));jt("goto-previous-location",J.arrowUp,m("previousChangeIcon","Icon for goto previous editor location."));jt("goto-next-location",J.arrowDown,m("nextChangeIcon","Icon for goto next editor location."));De.modify(J.sync,"spin");De.modify(J.loading,"spin");function cbe(s){const e=new q,t=e.add(new O),n=jZ();return e.add(n.onDidChange(()=>t.fire())),s&&e.add(s.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const i=s?s.getProductIconTheme():new ZZ,o={},r=[],a=[];for(const l of n.getIcons()){const c=i.getIcon(l);if(!c)continue;const d=c.font,h=`--vscode-icon-${l.id}-font-family`,u=`--vscode-icon-${l.id}-content`;d?(o[d.id]=d.definition,a.push(`${h}: ${xN(d.id)};`,`${u}: '${c.fontCharacter}';`),r.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; font-family: ${xN(d.id)}; }`)):(a.push(`${u}: '${c.fontCharacter}'; ${h}: 'codicon';`),r.push(`.codicon-${l.id}:before { content: '${c.fontCharacter}'; }`))}for(const l in o){const c=o[l],d=c.weight?`font-weight: ${c.weight};`:"",h=c.style?`font-style: ${c.style};`:"",u=c.src.map(f=>`${bd(f.location)} format('${f.format}')`).join(", ");r.push(`@font-face { src: ${u}; font-family: ${xN(l)};${d}${h} font-display: block; }`)}return r.push(`:root { ${a.join(" ")} }`),r.join(`
`)}}}class ZZ{getIcon(e){const t=jZ();let n=e.defaults;for(;De.isThemeIcon(n);){const i=t.getIcon(n.id);if(!i)return;n=i.defaults}return n}}const Hc="vs",N_="vs-dark",jf="hc-black",qf="hc-light",YZ=ln.as(yK.ColorContribution),dbe=ln.as(rK.ThemingContribution);class XZ{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const n=t.base;e.length>0?(XS(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,Z.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=XP(this.themeData.base);for(const n in t.colors)e.has(n)||e.set(n,Z.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=YZ.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case Hc:return _r.LIGHT;case jf:return _r.HIGH_CONTRAST_DARK;case qf:return _r.HIGH_CONTRAST_LIGHT;default:return _r.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const o=XP(this.themeData.base);e=o.rules,o.encodedTokensColors&&(t=o.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],i=this.themeData.colors["editor.background"];if(n||i){const o={token:""};n&&(o.foreground=n),i&&(o.background=i),e.push(o)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=UZ.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const o=this.tokenTheme._match([e].concat(t).join(".")).metadata,r=$s.getForeground(o),a=$s.getFontStyle(o);return{foreground:r,italic:!!(a&1),bold:!!(a&2),underline:!!(a&4),strikethrough:!!(a&8)}}}function XS(s){return s===Hc||s===N_||s===jf||s===qf}function XP(s){switch(s){case Hc:return nbe;case N_:return ibe;case jf:return sbe;case qf:return obe}}function qy(s){const e=XP(s);return new XZ(s,e)}class hbe extends F{constructor(){super(),this._onColorThemeChange=this._register(new O),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new O),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new ZZ,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(Hc,qy(Hc)),this._knownThemes.set(N_,qy(N_)),this._knownThemes.set(jf,qy(jf)),this._knownThemes.set(qf,qy(qf));const e=this._register(cbe(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(Hc),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),tq(Et,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return Hk(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=Qo(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),F.None}_registerShadowDomContainer(e){const t=Qo(e,n=>{n.className="monaco-colors",n.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!XS(t.base)&&!XS(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new XZ(e,t)),XS(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(Hc),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=Et.matchMedia("(forced-colors: active)").matches;if(e!==Ha(this._theme.type)){let t;cb(this._theme.type)?t=e?jf:N_:t=e?qf:Hc,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},n={addRule:r=>{t[r]||(e.push(r),t[r]=!0)}};dbe.getThemingParticipants().forEach(r=>r(this._theme,n,this._environment));const i=[];for(const r of YZ.getColors()){const a=this._theme.getColor(r.id,!0);a&&i.push(`${h9(r.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${i.join(`
`)} }`);const o=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(tbe(o)),this._themeCSS=e.join(`
`),this._updateCSS(),mn.setColorMap(o),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const rr=tt("themeService");var ube=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},wR=function(s,e){return function(t,n){e(t,n,s)}};let QP=class extends F{constructor(e,t,n){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=n,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new O,this._onDidChangeReducedMotion=new O,this._onDidChangeLinkUnderline=new O,this._accessibilityModeEnabledContext=L0.bindTo(this._contextKeyService);const i=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(r=>{r.affectsConfiguration("editor.accessibilitySupport")&&(i(),this._onDidChangeScreenReaderOptimized.fire()),r.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),i(),this._register(this.onDidChangeScreenReaderOptimized(()=>i()));const o=Et.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=o.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(o),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register($(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const n=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",n),this._layoutService.mainContainer.classList.toggle("enable-motion",!n)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const n=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=n,this._onDidChangeLinkUnderline.fire()}}));const e=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};QP=ube([wR(0,Ie),wR(1,Su),wR(2,Ze)],QP);var fE=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Ul=function(s,e){return function(t,n){e(t,n,s)}},wp,lC;let JP=class{constructor(e,t,n){this._commandService=e,this._keybindingService=t,this._hiddenStates=new eO(n)}createMenu(e,t,n){return new qL(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t)}getMenuActions(e,t,n){const i=new qL(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t),o=i.getActions(n);return i.dispose(),o}resetHiddenStates(e){this._hiddenStates.reset(e)}};JP=fE([Ul(0,Wt),Ul(1,wt),Ul(2,da)],JP);var tg;let eO=(tg=class{constructor(e){this._storageService=e,this._disposables=new q,this._onDidChange=new O,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(wp._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,wp._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(wp._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,n){this._hiddenByDefaultCache.set(`${e.id}/${t}`,n)}isHidden(e,t){var o;const n=this._isHiddenByDefault(e,t),i=((o=this._data[e.id])==null?void 0:o.includes(t))??!1;return n?!i:i}updateHidden(e,t,n){this._isHiddenByDefault(e,t)&&(n=!n);const o=this._data[e.id];if(n)o?o.indexOf(t)<0&&o.push(t):this._data[e.id]=[t];else if(o){const r=o.indexOf(t);r>=0&&ite(o,r),o.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(wp._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}},wp=tg,tg._key="menu.hiddenCommands",tg);eO=wp=fE([Ul(0,da)],eO);class WC{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(gi.getMenuItems(this._id));let t;for(const n of e){const i=n.group||"";(!t||t[0]!==i)&&(t=[i,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeysAndSubmenuIds(n)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(WC._fillInKbExprKeys(e.when,this._structureContextKeys),v_(e)){if(e.command.precondition&&WC._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;WC._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(gi.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const n of e.keys())t.add(n)}}let tO=lC=class extends WC{constructor(e,t,n,i,o,r){super(e,n),this._hiddenStates=t,this._commandService=i,this._keybindingService=o,this._contextKeyService=r,this.refresh()}createActionGroups(e){const t=[];for(const n of this._menuGroups){const[i,o]=n;let r;for(const a of o)if(this._contextKeyService.contextMatchesRules(a.when)){const l=v_(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=fbe(this._id,l?a.command:a,this._hiddenStates);if(l){const d=QZ(this._commandService,this._keybindingService,a.command.id,a.when);(r??(r=[])).push(new bo(a.command,a.alt,e,c,d,this._contextKeyService,this._commandService))}else{const d=new lC(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),h=ri.join(...d.map(u=>u[1]));h.length>0&&(r??(r=[])).push(new C_(a,c,h))}}r&&r.length>0&&t.push([i,r])}return t}_sort(e){return e.sort(lC._compareMenuItems)}static _compareMenuItems(e,t){const n=e.group,i=t.group;if(n!==i){if(n){if(!i)return-1}else return 1;if(n==="navigation")return-1;if(i==="navigation")return 1;const a=n.localeCompare(i);if(a!==0)return a}const o=e.order||0,r=t.order||0;return o<r?-1:o>r?1:lC._compareTitles(v_(e)?e.command.title:e.title,v_(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,i=typeof t=="string"?t:t.original;return n.localeCompare(i)}};tO=lC=fE([Ul(3,Wt),Ul(4,wt),Ul(5,Ie)],tO);let qL=class{constructor(e,t,n,i,o,r){this._disposables=new q,this._menuInfo=new tO(e,t,n.emitEventsForSubmenuChanges,i,o,r);const a=new It(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},n.eventDebounceDelay);this._disposables.add(a),this._disposables.add(gi.onDidChangeMenu(h=>{for(const u of this._menuInfo.allMenuIds)if(h.has(u)){a.schedule();break}}));const l=this._disposables.add(new q),c=h=>{let u=!1,f=!1,g=!1;for(const p of h)if(u=u||p.isStructuralChange,f=f||p.isEnablementChange,g=g||p.isToggleChange,u&&f&&g)break;return{menu:this,isStructuralChange:u,isEnablementChange:f,isToggleChange:g}},d=()=>{l.add(r.onDidChangeContext(h=>{const u=h.affectsSome(this._menuInfo.structureContextKeys),f=h.affectsSome(this._menuInfo.preconditionContextKeys),g=h.affectsSome(this._menuInfo.toggledContextKeys);(u||f||g)&&this._onDidChange.fire({menu:this,isStructuralChange:u,isEnablementChange:f,isToggleChange:g})})),l.add(t.onDidChange(h=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new Rj({onWillAddFirstListener:d,onDidRemoveLastListener:l.clear.bind(l),delay:n.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};qL=fE([Ul(3,Wt),Ul(4,wt),Ul(5,Ie)],qL);function fbe(s,e,t){const n=_oe(e)?e.submenu.id:e.id,i=typeof e.title=="string"?e.title:e.title.value,o=Hf({id:`hide/${s.id}/${n}`,label:m("hide.label","Hide '{0}'",i),run(){t.updateHidden(s,n,!0)}}),r=Hf({id:`toggle/${s.id}/${n}`,label:i,get checked(){return!t.isHidden(s,n)},run(){t.updateHidden(s,n,!!this.checked)}});return{hide:o,toggle:r,get isHidden(){return!r.checked}}}function QZ(s,e,t,n=void 0,i=!0){return Hf({id:`configureKeybinding/${t}`,label:m("configure keybinding","Configure Keybinding"),enabled:i,run(){const r=!!!e.lookupKeybinding(t)&&n?n.serialize():void 0;s.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(r?` +when:${r}`:""))}})}var gbe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},gV=function(s,e){return function(t,n){e(t,n,s)}},nO;const mV="application/vnd.code.resources";var ng;let iO=(ng=class extends F{constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(md||nq)&&this.installWebKitWriteTextWorkaround(),this._register(se.runAndSubscribe(bT,({window:n,disposables:i})=>{i.add($(n.document,"copy",()=>this.clearResourcesState()))},{window:Et,disposables:this._store}))}installWebKitWriteTextWorkaround(){const e=()=>{const t=new Gb;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,Jv().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async n=>{(!(n instanceof Error)||n.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(n)})};this._register(se.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:n})=>{n.add($(t,"click",e)),n.add($(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.clearResourcesState(),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await Jv().navigator.clipboard.writeText(e)}catch(n){console.error(n)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=Zb(),n=t.activeElement,i=t.body.appendChild(te("textarea",{"aria-hidden":!0}));i.style.height="1px",i.style.width="1px",i.style.position="absolute",i.value=e,i.focus(),i.select(),t.execCommand("copy"),oi(n)&&n.focus(),i.remove()}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await Jv().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}async readResources(){try{const t=await Jv().navigator.clipboard.read();for(const n of t)if(n.types.includes(`web ${mV}`)){const i=await n.getType(`web ${mV}`);return JSON.parse(await i.text()).map(r=>Se.from(r))}}catch{}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return pT(e.substring(0,nO.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}},nO=ng,ng.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3,ng);iO=nO=gbe([gV(0,Su),gV(1,Hi)],iO);const Pd=tt("clipboardService");var mbe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pbe=function(s,e){return function(t,n){e(t,n,s)}};const BC="data-keybinding-context";let yW=class{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}};const JD=class JD extends yW{constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}};JD.INSTANCE=new JD;let Sb=JD;const _w=class _w extends yW{constructor(e,t,n){super(e,null),this._configurationService=t,this._values=k_.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(i=>{if(i.source===7){const o=Array.from(this._values,([r])=>r);this._values.clear(),n.fire(new _V(o))}else{const o=[];for(const r of i.affectedKeys){const a=`config.${r}`,l=this._values.findSuperstr(a);l!==void 0&&(o.push(...ot.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(o.push(a),this._values.delete(a))}n.fire(new _V(o))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(_w._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(_w._keyPrefix.length),n=this._configurationService.getValue(t);let i;switch(typeof n){case"number":case"boolean":case"string":i=n;break;default:Array.isArray(n)?i=JSON.stringify(n):i=n}return this._values.set(e,i),i}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}};_w._keyPrefix="config.";let sO=_w;class _be{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class pV{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class _V{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class bbe{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function vbe(s,e){return s.allKeysContainedIn(new Set(Object.keys(e)))}class JZ extends F{constructor(e){super(),this._onDidChangeContext=this._register(new Kg({merge:t=>new bbe(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new _be(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Cbe(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new pV(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new pV(e))}getContext(e){return this._isDisposed?Sb.INSTANCE:this.getContextValuesContainer(wbe(e))}dispose(){super.dispose(),this._isDisposed=!0}}let oO=class extends JZ{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new sO(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?Sb.INSTANCE:this._contexts.get(e)||Sb.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new yW(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}};oO=mbe([pbe(0,Ze)],oO);class Cbe extends JZ{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new ai),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(BC)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(BC,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const n=this._parent.getContextValuesContainer(this._myContextId).value;vbe(e,n)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(BC),super.dispose())}getContextValuesContainer(e){return this._isDisposed?Sb.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}}function wbe(s){for(;s;){if(s.hasAttribute(BC)){const e=s.getAttribute(BC);return e?parseInt(e,10):NaN}s=s.parentElement}return 0}function ybe(s,e,t){s.get(Ie).createKey(String(e),Sbe(t))}function Sbe(s){return bj(s,e=>{if(typeof e=="object"&&e.$mid===1)return Se.revive(e).toString();if(e instanceof Se)return e.toString()})}rt.registerCommand("_setContext",ybe);rt.registerCommand({id:"getContextKeyInfo",handler(){return[...le.all()].sort((s,e)=>s.key.localeCompare(e.key))},metadata:{description:m("getContextKeyInfo","A command that returns information about context keys"),args:[]}});rt.registerCommand("_generateContextKeyInfo",function(){const s=[],e=new Set;for(const t of le.all())e.has(t.key)||(e.add(t.key),s.push(t));s.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(s,void 0,2))});let kbe=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class bV{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(t);n.outgoing.set(i.key,i),i.incoming.set(n.key,n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new kbe(t,e),this._nodes.set(t,n)),n}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),i=this._findCycle(t,n);if(i)return i}}_findCycle(e,t){for(const[n,i]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const o=this._findCycle(i,t);if(o)return o;t.delete(n)}}}class dv{constructor(...e){this._entries=new Map;for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}get(e){return this._entries.get(e)}}const Lbe=!1;class vV extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class KL{constructor(e=new dv,t=!1,n,i=Lbe){this._services=e,this._strict=t,this._parent=n,this._enableTracing=i,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(Ce,this),this._globalGraph=i?(n==null?void 0:n._globalGraph)??new bV(o=>o):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,Mt(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)uT(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const n=this,i=new class extends KL{dispose(){n._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),t==null||t.add(i),i}invokeFunction(e,...t){this._throwIfDisposed();const n=HC.traceInvocation(this._enableTracing,e);let i=!1;try{return e({get:r=>{if(i)throw D3("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(r,n);if(!a)throw new Error(`[invokeFunction] unknown service '${r}'`);return a}},...t)}finally{i=!0,n.stop()}}createInstance(e,...t){this._throwIfDisposed();let n,i;return e instanceof Tl?(n=HC.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=HC.traceCreation(this._enableTracing,e),i=this._createInstance(e,t,n)),n.stop(),i}_createInstance(e,t=[],n){const i=Ma.getServiceDependencies(e).sort((a,l)=>a.index-l.index),o=[];for(const a of i){const l=this._getOrCreateServiceInstance(a.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),o.push(l)}const r=i.length>0?i[0].index:t.length;if(t.length!==r){console.trace(`[createInstance] First service dependency of ${e.name} at position ${r+1} conflicts with ${t.length} static arguments`);const a=r-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,r)}return Reflect.construct(e,t.concat(o))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof Tl)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const n=this._getServiceInstanceOrDescriptor(e);return n instanceof Tl?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){var l;const i=new bV(c=>c.id.toString());let o=0;const r=[{id:e,desc:t,_trace:n}],a=new Set;for(;r.length;){const c=r.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),i.lookupOrInsertNode(c),o++>1e3)throw new vV(i);for(const d of Ma.getServiceDependencies(c.desc.ctor)){const h=this._getServiceInstanceOrDescriptor(d.id);if(h||this._throwIfStrict(`[createInstance] ${e} depends on ${d.id} which is NOT registered.`,!0),(l=this._globalGraph)==null||l.insertEdge(String(c.id),String(d.id)),h instanceof Tl){const u={id:d.id,desc:h,_trace:c._trace.branch(d.id,!0)};i.insertEdge(c,u),r.push(u)}}}}for(;;){const c=i.roots();if(c.length===0){if(!i.isEmpty())throw new vV(i);break}for(const{data:d}of c){if(this._getServiceInstanceOrDescriptor(d.id)instanceof Tl){const u=this._createServiceInstanceWithOwner(d.id,d.desc.ctor,d.desc.staticArguments,d.desc.supportsDelayedInstantiation,d._trace);this._setCreatedServiceInstance(d.id,u)}i.removeNode(d)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],i,o){if(this._services.get(e)instanceof Tl)return this._createServiceInstance(e,t,n,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,n=[],i,o,r){if(i){const a=new KL(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new $ie(()=>{const d=a._createInstance(t,n,o);for(const[h,u]of l){const f=d[h];if(typeof f=="function")for(const g of u)g.disposable=f.apply(d,g.listener)}return l.clear(),r.add(d),d});return new Proxy(Object.create(null),{get(d,h){if(!c.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let g=l.get(h);return g||(g=new vs,l.set(h,g)),(_,b,v)=>{if(c.isInitialized)return c.value[h](_,b,v);{const C={listener:[_,b,v],disposable:void 0},w=g.push(C);return ve(()=>{var k;w(),(k=C.disposable)==null||k.dispose()})}}}if(h in d)return d[h];const u=c.value;let f=u[h];return typeof f!="function"||(f=f.bind(u),d[h]=f),f},set(d,h,u){return c.value[h]=u,!0},getPrototypeOf(d){return t.prototype}})}else{const a=this._createInstance(t,n,o);return r.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}const No=class No{static traceInvocation(e,t){return e?new No(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):No._None}static traceCreation(e,t){return e?new No(1,t.name):No._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const n=new No(3,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;No._totals+=e;let t=!1;function n(o,r){const a=[],l=new Array(o+1).join("	");for(const[c,d,h]of r._dep)if(d&&h){t=!0,a.push(`${l}CREATES -> ${c}`);const u=n(o+1,h);u&&a.push(u)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${No._totals.toFixed(2)}ms)`];(e>2||t)&&No.all.add(i.join(`
`))}};No.all=new Set,No._None=new class extends No{constructor(){super(0,null)}stop(){}branch(){return this}},No._totals=0;let HC=No;const xbe=new Set([We.inMemory,We.vscodeSourceControl,We.walkThrough,We.walkThroughSnippet,We.vscodeChatCodeBlock]);class Dbe{constructor(){this._byResource=new mi,this._byOwner=new Map}set(e,t,n){let i=this._byResource.get(e);i||(i=new Map,this._byResource.set(e,i)),i.set(t,n);let o=this._byOwner.get(t);o||(o=new mi,this._byOwner.set(t,o)),o.set(e,n)}get(e,t){const n=this._byResource.get(e);return n==null?void 0:n.get(t)}delete(e,t){let n=!1,i=!1;const o=this._byResource.get(e);o&&(n=o.delete(t));const r=this._byOwner.get(t);if(r&&(i=r.delete(e)),n!==i)throw new Error("illegal state");return n&&i}values(e){var t,n;return typeof e=="string"?((t=this._byOwner.get(e))==null?void 0:t.values())??ot.empty():Se.isUri(e)?((n=this._byResource.get(e))==null?void 0:n.values())??ot.empty():ot.map(ot.concat(...this._byOwner.values()),i=>i[1])}}class Ibe{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new mi,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const i=this._resourceStats(t);this._add(i),this._data.set(t,i)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(xbe.has(e.scheme))return t;for(const{severity:n}of this._service.read({resource:e}))n===_n.Error?t.errors+=1:n===_n.Warning?t.warnings+=1:n===_n.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Qd{constructor(){this._onMarkerChanged=new Rj({delay:0,merge:Qd._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new Dbe,this._stats=new Ibe(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(fj(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const i=[];for(const o of n){const r=Qd._toMarker(e,t,o);r&&i.push(r)}this._data.set(t,e,i),this._onMarkerChanged.fire([t])}}static _toMarker(e,t,n){let{code:i,severity:o,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:h,relatedInformation:u,tags:f}=n;if(r)return l=l>0?l:1,c=c>0?c:1,d=d>=l?d:l,h=h>0?h:c,{resource:t,owner:e,code:i,severity:o,message:r,source:a,startLineNumber:l,startColumn:c,endLineNumber:d,endColumn:h,relatedInformation:u,tags:f}}changeAll(e,t){const n=[],i=this._data.values(e);if(i)for(const o of i){const r=ot.first(o);r&&(n.push(r.resource),this._data.delete(r.resource,e))}if(cs(t)){const o=new mi;for(const{resource:r,marker:a}of t){const l=Qd._toMarker(e,r,a);if(!l)continue;const c=o.get(r);c?c.push(l):(o.set(r,[l]),n.push(r))}for(const[r,a]of o)this._data.set(r,e,a)}n.length>0&&this._onMarkerChanged.fire(n)}read(e=Object.create(null)){let{owner:t,resource:n,severities:i,take:o}=e;if((!o||o<0)&&(o=-1),t&&n){const r=this._data.get(n,t);if(r){const a=[];for(const l of r)if(Qd._accept(l,i)){const c=a.push(l);if(o>0&&c===o)break}return a}else return[]}else if(!t&&!n){const r=[];for(const a of this._data.values())for(const l of a)if(Qd._accept(l,i)){const c=r.push(l);if(o>0&&c===o)return r}return r}else{const r=this._data.values(n??t),a=[];for(const l of r)for(const c of l)if(Qd._accept(c,i)){const d=a.push(c);if(o>0&&d===o)return a}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new mi;for(const n of e)for(const i of n)t.set(i,!0);return Array.from(t.keys())}}class Tbe extends F{get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._configurationModel=Li.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=Li.createEmptyModel(this.logService);const e=ln.as(ca.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const n=this.getConfigurationDefaultOverrides();for(const i of e){const o=n[i],r=t[i];o!==void 0?this._configurationModel.setValue(i,o):r?this._configurationModel.setValue(i,r.default):this._configurationModel.removeValue(i)}}}const Iu=tt("accessibilitySignalService"),pt=class pt{static register(e){return new pt(e.fileName)}constructor(e){this.fileName=e}};pt.error=pt.register({fileName:"error.mp3"}),pt.warning=pt.register({fileName:"warning.mp3"}),pt.success=pt.register({fileName:"success.mp3"}),pt.foldedArea=pt.register({fileName:"foldedAreas.mp3"}),pt.break=pt.register({fileName:"break.mp3"}),pt.quickFixes=pt.register({fileName:"quickFixes.mp3"}),pt.taskCompleted=pt.register({fileName:"taskCompleted.mp3"}),pt.taskFailed=pt.register({fileName:"taskFailed.mp3"}),pt.terminalBell=pt.register({fileName:"terminalBell.mp3"}),pt.diffLineInserted=pt.register({fileName:"diffLineInserted.mp3"}),pt.diffLineDeleted=pt.register({fileName:"diffLineDeleted.mp3"}),pt.diffLineModified=pt.register({fileName:"diffLineModified.mp3"}),pt.chatRequestSent=pt.register({fileName:"chatRequestSent.mp3"}),pt.chatResponseReceived1=pt.register({fileName:"chatResponseReceived1.mp3"}),pt.chatResponseReceived2=pt.register({fileName:"chatResponseReceived2.mp3"}),pt.chatResponseReceived3=pt.register({fileName:"chatResponseReceived3.mp3"}),pt.chatResponseReceived4=pt.register({fileName:"chatResponseReceived4.mp3"}),pt.clear=pt.register({fileName:"clear.mp3"}),pt.save=pt.register({fileName:"save.mp3"}),pt.format=pt.register({fileName:"format.mp3"}),pt.voiceRecordingStarted=pt.register({fileName:"voiceRecordingStarted.mp3"}),pt.voiceRecordingStopped=pt.register({fileName:"voiceRecordingStopped.mp3"}),pt.progress=pt.register({fileName:"progress.mp3"});let Qt=pt;class Ebe{constructor(e){this.randomOneOf=e}}const Ke=class Ke{constructor(e,t,n,i,o,r){this.sound=e,this.name=t,this.legacySoundSettingsKey=n,this.settingsKey=i,this.legacyAnnouncementSettingsKey=o,this.announcementMessage=r}static register(e){const t=new Ebe("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),n=new Ke(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return Ke._signals.add(n),n}};Ke._signals=new Set,Ke.errorAtPosition=Ke.register({name:m("accessibilitySignals.positionHasError.name","Error at Position"),sound:Qt.error,announcementMessage:m("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"}),Ke.warningAtPosition=Ke.register({name:m("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:Qt.warning,announcementMessage:m("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"}),Ke.errorOnLine=Ke.register({name:m("accessibilitySignals.lineHasError.name","Error on Line"),sound:Qt.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:m("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"}),Ke.warningOnLine=Ke.register({name:m("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:Qt.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:m("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"}),Ke.foldedArea=Ke.register({name:m("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:Qt.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:m("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"}),Ke.break=Ke.register({name:m("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:Qt.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:m("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"}),Ke.inlineSuggestion=Ke.register({name:m("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:Qt.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"}),Ke.terminalQuickFix=Ke.register({name:m("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:Qt.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:m("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"}),Ke.onDebugBreak=Ke.register({name:m("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:Qt.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:m("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"}),Ke.noInlayHints=Ke.register({name:m("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:Qt.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:m("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"}),Ke.taskCompleted=Ke.register({name:m("accessibilitySignals.taskCompleted","Task Completed"),sound:Qt.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:m("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"}),Ke.taskFailed=Ke.register({name:m("accessibilitySignals.taskFailed","Task Failed"),sound:Qt.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:m("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"}),Ke.terminalCommandFailed=Ke.register({name:m("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:Qt.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:m("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"}),Ke.terminalCommandSucceeded=Ke.register({name:m("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:Qt.success,announcementMessage:m("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"}),Ke.terminalBell=Ke.register({name:m("accessibilitySignals.terminalBell","Terminal Bell"),sound:Qt.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:m("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"}),Ke.notebookCellCompleted=Ke.register({name:m("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:Qt.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:m("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"}),Ke.notebookCellFailed=Ke.register({name:m("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:Qt.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:m("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"}),Ke.diffLineInserted=Ke.register({name:m("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:Qt.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"}),Ke.diffLineDeleted=Ke.register({name:m("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:Qt.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"}),Ke.diffLineModified=Ke.register({name:m("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:Qt.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"}),Ke.chatRequestSent=Ke.register({name:m("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:Qt.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:m("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"}),Ke.chatResponseReceived=Ke.register({name:m("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[Qt.chatResponseReceived1,Qt.chatResponseReceived2,Qt.chatResponseReceived3,Qt.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"}),Ke.progress=Ke.register({name:m("accessibilitySignals.progress","Progress"),sound:Qt.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:m("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"}),Ke.clear=Ke.register({name:m("accessibilitySignals.clear","Clear"),sound:Qt.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:m("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"}),Ke.save=Ke.register({name:m("accessibilitySignals.save","Save"),sound:Qt.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:m("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"}),Ke.format=Ke.register({name:m("accessibilitySignals.format","Format"),sound:Qt.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:m("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"}),Ke.voiceRecordingStarted=Ke.register({name:m("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:Qt.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"}),Ke.voiceRecordingStopped=Ke.register({name:m("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:Qt.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"});let Fo=Ke;class Nbe extends F{constructor(e,t=[]){super(),this.logger=new voe([e,...t]),this._register(e.onDidChangeLogLevel(n=>this.setLevel(n)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}}const eY=[];function hv(s){eY.push(s)}function Rbe(){return eY.slice(0)}class Mbe{getParseResult(e){}}var ac=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Wn=function(s,e){return function(t,n){e(t,n,s)}};class Abe{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new O}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let rO=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new kne(new Abe(t))):Promise.reject(new Error("Model not found"))}};rO=ac([Wn(0,Ut)],rO);const eI=class eI{show(){return eI.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}};eI.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}};let aO=eI;class Pbe{withProgress(e,t,n){return t({report:()=>{}})}}class Obe{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class Fbe{async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let n=e;return t&&(n=n+`

`+t),Et.confirm(n)}async prompt(e){var i;let t;if(this.doConfirm(e.message,e.detail)){const o=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&o.push(e.cancelButton),t=await((i=o[0])==null?void 0:i.run({checkboxChecked:!1}))}return{result:t}}async error(e,t){await this.prompt({type:Tn.Error,message:e,detail:t})}}const bw=class bw{info(e){return this.notify({severity:Tn.Info,message:e})}warn(e){return this.notify({severity:Tn.Warning,message:e})}error(e){return this.notify({severity:Tn.Error,message:e})}notify(e){switch(e.severity){case Tn.Error:console.error(e.message);break;case Tn.Warning:console.warn(e.message);break;default:console.log(e.message);break}return bw.NO_OP}prompt(e,t,n,i){return bw.NO_OP}status(e,t){return F.None}};bw.NO_OP=new Vae;let lO=bw,cO=class{constructor(e){this._onWillExecuteCommand=new O,this._onDidExecuteCommand=new O,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=rt.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const i=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(i)}catch(i){return Promise.reject(i)}}};cO=ac([Wn(0,Ce)],cO);let kb=class extends sue{constructor(e,t,n,i,o,r){super(e,t,n,i,o),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=f=>{const g=new q;g.add($(f,ee.KEY_DOWN,p=>{const _=new Pt(p);this._dispatch(_,_.target)&&(_.preventDefault(),_.stopPropagation())})),g.add($(f,ee.KEY_UP,p=>{const _=new Pt(p);this._singleModifierDispatch(_,_.target)&&_.preventDefault()})),this._domNodeListeners.push(new Wbe(f,g))},l=f=>{for(let g=0;g<this._domNodeListeners.length;g++){const p=this._domNodeListeners[g];p.domNode===f&&(this._domNodeListeners.splice(g,1),p.dispose())}},c=f=>{f.getOption(61)||a(f.getContainerDomNode())},d=f=>{f.getOption(61)||l(f.getContainerDomNode())};this._register(r.onCodeEditorAdd(c)),this._register(r.onCodeEditorRemove(d)),r.listCodeEditors().forEach(c);const h=f=>{a(f.getContainerDomNode())},u=f=>{l(f.getContainerDomNode())};this._register(r.onDiffEditorAdd(h)),this._register(r.onDiffEditorRemove(u)),r.listDiffEditors().forEach(h)}addDynamicKeybinding(e,t,n,i){return Jr(rt.registerCommand(e,n),this.addDynamicKeybindings([{keybinding:t,command:e,when:i}]))}addDynamicKeybindings(e){const t=e.map(n=>({keybinding:OM(n.keybinding,mo),command:n.command??null,commandArgs:n.commandArgs,when:n.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),ve(()=>{for(let n=0;n<this._dynamicKeybindings.length;n++)if(this._dynamicKeybindings[n]===t[0]){this._dynamicKeybindings.splice(n,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(Ts.getDefaultKeybindings(),!0),t=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new TC(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return Et.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let i=0;for(const o of e){const r=o.when||void 0,a=o.keybinding;if(!a)n[i++]=new aH(void 0,o.command,o.commandArgs,r,t,null,!1);else{const l=o1.resolveKeybinding(a,mo);for(const c of l)n[i++]=new aH(c,o.command,o.commandArgs,r,t,null,!1)}}return n}resolveKeyboardEvent(e){const t=new pd(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new o1([t],mo)}};kb=ac([Wn(0,Ie),Wn(1,Wt),Wn(2,Zi),Wn(3,En),Wn(4,Hi),Wn(5,mt)],kb);class Wbe extends F{constructor(e,t){super(),this.domNode=e,this._register(t)}}function CV(s){return s&&typeof s=="object"&&(!s.overrideIdentifier||typeof s.overrideIdentifier=="string")&&(!s.resource||s.resource instanceof Se)}let GL=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new O,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new Tbe(e);this._configuration=new XT(t.reload(),Li.createEmptyModel(e),Li.createEmptyModel(e),Li.createEmptyModel(e),Li.createEmptyModel(e),Li.createEmptyModel(e),new mi,Li.createEmptyModel(e),new mi,e),t.dispose()}getValue(e,t){const n=typeof e=="string"?e:void 0,i=CV(e)?e:CV(t)?t:{};return this._configuration.getValue(n,i,void 0)}updateValues(e){const t={data:this._configuration.toData()},n=[];for(const i of e){const[o,r]=i;this.getValue(o)!==r&&(this._configuration.updateValue(o,r),n.push(o))}if(n.length>0){const i=new Jhe({keys:n,overrides:[]},t,this._configuration,void 0,this.logService);i.source=8,this._onDidChangeConfiguration.fire(i)}return Promise.resolve()}updateValue(e,t,n,i){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}};GL=ac([Wn(0,Hi)],GL);let dO=class{constructor(e,t,n){this.configurationService=e,this.modelService=t,this.languageService=n,this._onDidChangeConfiguration=new O,this.configurationService.onDidChangeConfiguration(i=>{this._onDidChangeConfiguration.fire({affectedKeys:i.affectedKeys,affectsConfiguration:(o,r)=>i.affectsConfiguration(r)})})}getValue(e,t,n){const i=A.isIPosition(t)?t:null,o=i?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0,r=e?this.getLanguage(e,i):void 0;return typeof o>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:r}):this.configurationService.getValue(o,{resource:e,overrideIdentifier:r})}getLanguage(e,t){const n=this.modelService.getModel(e);return n?t?n.getLanguageIdAtPosition(t.lineNumber,t.column):n.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}};dO=ac([Wn(0,Ze),Wn(1,Ut),Wn(2,tn)],dO);let hO=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:Ds||et?`
`:`\r
`}};hO=ac([Wn(0,Ze)],hO);class Bbe{publicLog2(){}}const vw=class vw{constructor(){const e=Se.from({scheme:vw.SCHEME,authority:"model",path:"/"});this.workspace={id:cG,folders:[new bue({uri:e,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return e&&e.scheme===vw.SCHEME?this.workspace.folders[0]:null}};vw.SCHEME="inmemory";let uO=vw;function ZL(s,e,t){if(!e||!(s instanceof GL))return;const n=[];Object.keys(e).forEach(i=>{Ghe(i)&&n.push([`editor.${i}`,e[i]]),t&&Zhe(i)&&n.push([`diffEditor.${i}`,e[i]])}),n.length>0&&s.updateValues(n)}let fO=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}async apply(e,t){const n=Array.isArray(e)?e:P9.convert(e),i=new Map;for(const a of n){if(!(a instanceof Mh))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=i.get(l);c||(c=[],i.set(l,c)),c.push(on.replaceMove(L.lift(a.textEdit.range),a.textEdit.text))}let o=0,r=0;for(const[a,l]of i)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),r+=1,o+=l.length;return{ariaSummary:Gg(QA.bulkEditServiceSummary,o,r),isApplied:o>0}}};fO=ac([Wn(0,Ut)],fO);class Hbe{getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return xr(e)}}let gO=class extends $he{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,n){if(!t){const i=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();i&&(t=i.getContainerDomNode())}return super.showContextView(e,t,n)}};gO=ac([Wn(0,Su),Wn(1,mt)],gO);class Vbe{constructor(){this._neverEmitter=new O,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class zbe extends sP{constructor(){super()}}class $be extends Nbe{constructor(){super(new boe)}}let mO=class extends gP{constructor(e,t,n,i,o,r){super(e,t,n,i,o,r),this.configure({blockMouse:!1})}};mO=ac([Wn(0,Zi),Wn(1,En),Wn(2,Rd),Wn(3,wt),Wn(4,nr),Wn(5,Ie)],mO);const pO={amdModuleId:"vs/editor/common/services/editorSimpleWorker",esmModuleLocation:void 0,label:"editorWorkerService"};let _O=class extends dA{constructor(e,t,n,i,o){super(pO,e,t,n,i,o)}};_O=ac([Wn(0,Ut),Wn(1,AT),Wn(2,Hi),Wn(3,cn),Wn(4,ue)],_O);class Ube{async playSignal(e,t){}}st(Hi,$be,0);st(Ze,GL,0);st(AT,dO,0);st(oK,hO,0);st(im,uO,0);st(_b,Hbe,0);st(Zi,Bbe,0);st(w0,Fbe,0);st(l9,Obe,0);st(En,lO,0);st(rc,Qd,0);st(tn,zbe,0);st(rr,hbe,0);st(Ut,IP,0);st(U9,vP,0);st(Ie,oO,0);st(lG,Pbe,0);st(Lu,aO,0);st(da,Nfe,0);st(to,_O,0);st(x0,fO,0);st(dG,Vbe,0);st(Qs,rO,0);st(xo,QP,0);st(Rr,k_e,0);st(Wt,cO,0);st(wt,kb,0);st(Nr,ZP,0);st(Rd,gO,0);st(eo,bP,0);st(Pd,iO,0);st(Lo,mO,0);st(nr,JP,0);st(Iu,Ube,0);st(aZ,Mbe,0);var Ne;(function(s){const e=new dv;for(const[l,c]of M8())e.set(l,c);const t=new KL(e,!0);e.set(Ce,t);function n(l){i||r({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof Tl?t.invokeFunction(d=>d.get(l)):c}s.get=n;let i=!1;const o=new O;function r(l){if(i)return t;i=!0;for(const[d,h]of M8())e.get(d)||e.set(d,h);for(const d in l)if(l.hasOwnProperty(d)){const h=tt(d);e.get(h)instanceof Tl&&e.set(h,l[d])}const c=Rbe();for(const d of c)try{t.createInstance(d)}catch(h){Pe(h)}return o.fire(),t}s.initialize=r;function a(l){if(i)return l();const c=new q,d=c.add(o.event(()=>{d.dispose(),c.add(l())}));return c}s.withServices=a})(Ne||(Ne={}));function jbe(s,e){return new qbe(s,e)}class qbe extends Qk{constructor(e,t){const n={amdModuleId:pO.amdModuleId,esmModuleLocation:pO.esmModuleLocation,label:t.label};super(n,t.keepIdleModels||!1,e),this._foreignModuleId=t.moduleId,this._foreignModuleCreateData=t.createData||null,this._foreignModuleHost=t.host||null,this._foreignProxy=null}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(n){return Promise.reject(n)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(e=>{const t=this._foreignModuleHost?I2(this._foreignModuleHost):[];return e.$loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,t).then(n=>{this._foreignModuleCreateData=null;const i=(a,l)=>e.$fmr(a,l),o=(a,l)=>function(){const c=Array.prototype.slice.call(arguments,0);return l(a,c)},r={};for(const a of n)r[a]=o(a,i);return r})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(e){return this.workerWithSyncedResources(e).then(t=>this.getProxy())}}const F0={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};class ws{constructor(e,t,n,i){this.startColumn=e,this.endColumn=t,this.className=n,this.type=i,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length,i=t.length;if(n!==i)return!1;for(let o=0;o<n;o++)if(!ws._equals(e[o],t[o]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;const i=t+1,o=n+1,r=n-t,a=[];let l=0;for(const c of e)c.endColumn<=i||c.startColumn>=o||(a[l++]=new ws(Math.max(1,c.startColumn-i+1),Math.min(r+1,c.endColumn-i+1),c.className,c.type));return a}static filter(e,t,n,i){if(e.length===0)return[];const o=[];let r=0;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.range;if(d.endLineNumber<t||d.startLineNumber>t||d.isEmpty()&&(c.type===0||c.type===3))continue;const h=d.startLineNumber===t?d.startColumn:n,u=d.endLineNumber===t?d.endColumn:i;o[r++]=new ws(h,u,c.inlineClassName,c.type)}return o}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=ws._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}}class wV{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=i}}class YL{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,i=e.length;n<i;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let i=0;for(;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;n.push(new wV(t,this.stopOffsets[i],this.classNames.join(" "),YL._metadata(this.metadata))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.metadata.splice(0,i+1),this.count-=i+1}return this.count>0&&t<e&&(n.push(new wV(t,e-1,this.classNames.join(" "),YL._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}class Kbe{static normalize(e,t){if(t.length===0)return[];const n=[],i=new YL;let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];let c=l.startColumn,d=l.endColumn;const h=l.className,u=l.type===1?2:l.type===2?4:0;if(c>1){const p=e.charCodeAt(c-2);ni(p)&&c--}if(d>1){const p=e.charCodeAt(d-2);ni(p)&&d--}const f=c-1,g=d-2;o=i.consumeLowerThan(f,o,n),i.count===0&&(o=f),i.insert(g,h,u)}return i.consumeLowerThan(1073741824,o,n),n}}class hi{constructor(e,t,n,i){this.endIndex=e,this.type=t,this.metadata=n,this.containsRTL=i,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}class tY{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class Tu{constructor(e,t,n,i,o,r,a,l,c,d,h,u,f,g,p,_,b,v,C){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=i,this.isBasicASCII=o,this.containsRTL=r,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=c.sort(ws.compare),this.tabSize=d,this.startVisibleColumn=h,this.spaceWidth=u,this.stopRenderingLineAfter=p,this.renderWhitespace=_==="all"?4:_==="boundary"?1:_==="selection"?2:_==="trailing"?3:0,this.renderControlCharacters=b,this.fontLigatures=v,this.selectionsOnLine=C&&C.sort((k,x)=>k.startOffset<x.startOffset?-1:1);const w=Math.abs(g-u),y=Math.abs(f-u);w<y?(this.renderSpaceWidth=g,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=f,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&ws.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class nY{constructor(e,t){this.partIndex=e,this.charIndex=t}}class El{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,n,i){const o=(t<<16|n<<0)>>>0;this._data[e-1]=o,this._horizontalOffset[e-1]=i}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=El.getPartIndex(t),i=El.getCharIndex(t);return new nY(n,i)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;const i=(e<<16|n<<0)>>>0;let o=0,r=this.length-1;for(;o+1<r;){const p=o+r>>>1,_=this._data[p];if(_===i)return p;_>i?r=p:o=p}if(o===r)return o;const a=this._data[o],l=this._data[r];if(a===i)return o;if(l===i)return r;const c=El.getPartIndex(a),d=El.getCharIndex(a),h=El.getPartIndex(l);let u;c!==h?u=t:u=El.getCharIndex(l);const f=n-d,g=u-n;return f<=g?o:r}}class bO{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function W0(s,e){if(s.lineContent.length===0){if(s.lineDecorations.length>0){e.appendString("<span>");let t=0,n=0,i=0;for(const r of s.lineDecorations)(r.type===1||r.type===2)&&(e.appendString('<span class="'),e.appendString(r.className),e.appendString('"></span>'),r.type===1&&(i|=1,t++),r.type===2&&(i|=2,n++));e.appendString("</span>");const o=new El(1,t+n);return o.setColumnInfo(1,t,0,0),new bO(o,!1,i)}return e.appendString("<span><span></span></span>"),new bO(new El(0,0),!1,0)}return nve(Ybe(s),e)}class Gbe{constructor(e,t,n,i){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=i}}function gE(s){const e=new Qb(1e4),t=W0(s,e);return new Gbe(t.characterMapping,e.build(),t.containsRTL,t.containsForeignElements)}class Zbe{constructor(e,t,n,i,o,r,a,l,c,d,h,u,f,g,p,_){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=i,this.isOverflowing=o,this.overflowingCharCount=r,this.parts=a,this.containsForeignElements=l,this.fauxIndentLength=c,this.tabSize=d,this.startVisibleColumn=h,this.containsRTL=u,this.spaceWidth=f,this.renderSpaceCharCode=g,this.renderWhitespace=p,this.renderControlCharacters=_}}function Ybe(s){const e=s.lineContent;let t,n,i;s.stopRenderingLineAfter!==-1&&s.stopRenderingLineAfter<e.length?(t=!0,n=e.length-s.stopRenderingLineAfter,i=s.stopRenderingLineAfter):(t=!1,n=0,i=e.length);let o=Xbe(e,s.containsRTL,s.lineTokens,s.fauxIndentLength,i);s.renderControlCharacters&&!s.isBasicASCII&&(o=Jbe(e,o)),(s.renderWhitespace===4||s.renderWhitespace===1||s.renderWhitespace===2&&s.selectionsOnLine||s.renderWhitespace===3&&!s.continuesWithWrappedLine)&&(o=eve(s,e,i,o));let r=0;if(s.lineDecorations.length>0){for(let a=0,l=s.lineDecorations.length;a<l;a++){const c=s.lineDecorations[a];c.type===3||c.type===1?r|=1:c.type===2&&(r|=2)}o=tve(e,i,o,s.lineDecorations)}return s.containsRTL||(o=Qbe(e,o,!s.isBasicASCII||s.fontLigatures)),new Zbe(s.useMonospaceOptimizations,s.canUseHalfwidthRightwardsArrow,e,i,t,n,o,r,s.fauxIndentLength,s.tabSize,s.startVisibleColumn,s.containsRTL,s.spaceWidth,s.renderSpaceCharCode,s.renderWhitespace,s.renderControlCharacters)}function Xbe(s,e,t,n,i){const o=[];let r=0;n>0&&(o[r++]=new hi(n,"",0,!1));let a=n;for(let l=0,c=t.getCount();l<c;l++){const d=t.getEndOffset(l);if(d<=n)continue;const h=t.getClassName(l);if(d>=i){const f=e?ob(s.substring(a,i)):!1;o[r++]=new hi(i,h,0,f);break}const u=e?ob(s.substring(a,d)):!1;o[r++]=new hi(d,h,0,u),a=d}return o}function Qbe(s,e,t){let n=0;const i=[];let o=0;if(t)for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex;if(n+50<c){const d=l.type,h=l.metadata,u=l.containsRTL;let f=-1,g=n;for(let p=n;p<c;p++)s.charCodeAt(p)===32&&(f=p),f!==-1&&p-g>=50&&(i[o++]=new hi(f+1,d,h,u),g=f+1,f=-1);g!==c&&(i[o++]=new hi(c,d,h,u))}else i[o++]=l;n=c}else for(let r=0,a=e.length;r<a;r++){const l=e[r],c=l.endIndex,d=c-n;if(d>50){const h=l.type,u=l.metadata,f=l.containsRTL,g=Math.ceil(d/50);for(let p=1;p<g;p++){const _=n+p*50;i[o++]=new hi(_,h,u,f)}i[o++]=new hi(c,h,u,f)}else i[o++]=l;n=c}return i}function iY(s){return s<32?s!==9:s===127||s>=8234&&s<=8238||s>=8294&&s<=8297||s>=8206&&s<=8207||s===1564}function Jbe(s,e){const t=[];let n=new hi(0,"",0,!1),i=0;for(const o of e){const r=o.endIndex;for(;i<r;i++){const a=s.charCodeAt(i);iY(a)&&(i>n.endIndex&&(n=new hi(i,o.type,o.metadata,o.containsRTL),t.push(n)),n=new hi(i+1,"mtkcontrol",o.metadata,!1),t.push(n))}i>n.endIndex&&(n=new hi(r,o.type,o.metadata,o.containsRTL),t.push(n))}return t}function eve(s,e,t,n){const i=s.continuesWithWrappedLine,o=s.fauxIndentLength,r=s.tabSize,a=s.startVisibleColumn,l=s.useMonospaceOptimizations,c=s.selectionsOnLine,d=s.renderWhitespace===1,h=s.renderWhitespace===3,u=s.renderSpaceWidth!==s.spaceWidth,f=[];let g=0,p=0,_=n[p].type,b=n[p].containsRTL,v=n[p].endIndex;const C=n.length;let w=!1,y=ds(e),k;y===-1?(w=!0,y=t,k=t):k=Ba(e);let x=!1,D=0,N=c&&c[D],W=a%r;for(let z=o;z<t;z++){const U=e.charCodeAt(z);N&&z>=N.endOffset&&(D++,N=c&&c[D]);let H;if(z<y||z>k)H=!0;else if(U===9)H=!0;else if(U===32)if(d)if(x)H=!0;else{const X=z+1<t?e.charCodeAt(z+1):0;H=X===32||X===9}else H=!0;else H=!1;if(H&&c&&(H=!!N&&N.startOffset<=z&&N.endOffset>z),H&&h&&(H=w||z>k),H&&b&&z>=y&&z<=k&&(H=!1),x){if(!H||!l&&W>=r){if(u){const X=g>0?f[g-1].endIndex:o;for(let re=X+1;re<=z;re++)f[g++]=new hi(re,"mtkw",1,!1)}else f[g++]=new hi(z,"mtkw",1,!1);W=W%r}}else(z===v||H&&z>o)&&(f[g++]=new hi(z,_,0,b),W=W%r);for(U===9?W=r:ru(U)?W+=2:W++,x=H;z===v&&(p++,p<C);)_=n[p].type,b=n[p].containsRTL,v=n[p].endIndex}let B=!1;if(x)if(i&&d){const z=t>0?e.charCodeAt(t-1):0,U=t>1?e.charCodeAt(t-2):0;z===32&&U!==32&&U!==9||(B=!0)}else B=!0;if(B)if(u){const z=g>0?f[g-1].endIndex:o;for(let U=z+1;U<=t;U++)f[g++]=new hi(U,"mtkw",1,!1)}else f[g++]=new hi(t,"mtkw",1,!1);else f[g++]=new hi(t,_,0,b);return f}function tve(s,e,t,n){n.sort(ws.compare);const i=Kbe.normalize(s,n),o=i.length;let r=0;const a=[];let l=0,c=0;for(let h=0,u=t.length;h<u;h++){const f=t[h],g=f.endIndex,p=f.type,_=f.metadata,b=f.containsRTL;for(;r<o&&i[r].startOffset<g;){const v=i[r];if(v.startOffset>c&&(c=v.startOffset,a[l++]=new hi(c,p,_,b)),v.endOffset+1<=g)c=v.endOffset+1,a[l++]=new hi(c,p+" "+v.className,_|v.metadata,b),r++;else{c=g,a[l++]=new hi(c,p+" "+v.className,_|v.metadata,b);break}}g>c&&(c=g,a[l++]=new hi(c,p,_,b))}const d=t[t.length-1].endIndex;if(r<o&&i[r].startOffset===d)for(;r<o&&i[r].startOffset===d;){const h=i[r];a[l++]=new hi(c,h.className,h.metadata,!1),r++}return a}function nve(s,e){const t=s.fontIsMonospace,n=s.canUseHalfwidthRightwardsArrow,i=s.containsForeignElements,o=s.lineContent,r=s.len,a=s.isOverflowing,l=s.overflowingCharCount,c=s.parts,d=s.fauxIndentLength,h=s.tabSize,u=s.startVisibleColumn,f=s.containsRTL,g=s.spaceWidth,p=s.renderSpaceCharCode,_=s.renderWhitespace,b=s.renderControlCharacters,v=new El(r+1,c.length);let C=!1,w=0,y=u,k=0,x=0,D=0;f?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let N=0,W=c.length;N<W;N++){const B=c[N],z=B.endIndex,U=B.type,H=B.containsRTL,X=_!==0&&B.isWhitespace(),re=X&&!t&&(U==="mtkw"||!i),fe=w===z&&B.isPseudoAfter();if(k=0,e.appendString("<span "),H&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(re?"mtkz":U),e.appendASCIICharCode(34),X){let pe=0;{let ce=w,Oe=y;for(;ce<z;ce++){const un=(o.charCodeAt(ce)===9?h-Oe%h:1)|0;pe+=un,ce>=d&&(Oe+=un)}}for(re&&(e.appendString(' style="width:'),e.appendString(String(g*pe)),e.appendString('px"')),e.appendASCIICharCode(62);w<z;w++){v.setColumnInfo(w+1,N-D,k,x),D=0;const ce=o.charCodeAt(w);let Oe,Fe;if(ce===9){Oe=h-y%h|0,Fe=Oe,!n||Fe>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let un=2;un<=Fe;un++)e.appendCharCode(160)}else Oe=2,Fe=1,e.appendCharCode(p),e.appendCharCode(8204);k+=Oe,x+=Fe,w>=d&&(y+=Fe)}}else for(e.appendASCIICharCode(62);w<z;w++){v.setColumnInfo(w+1,N-D,k,x),D=0;const pe=o.charCodeAt(w);let ce=1,Oe=1;switch(pe){case 9:ce=h-y%h,Oe=ce;for(let Fe=1;Fe<=ce;Fe++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:b?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:ru(pe)&&Oe++,b&&pe<32?e.appendCharCode(9216+pe):b&&pe===127?e.appendCharCode(9249):b&&iY(pe)?(e.appendString("[U+"),e.appendString(ive(pe)),e.appendString("]"),ce=8,Oe=ce):e.appendCharCode(pe)}k+=ce,x+=Oe,w>=d&&(y+=Oe)}fe?D++:D=0,w>=r&&!C&&B.isPseudoAfter()&&(C=!0,v.setColumnInfo(w+1,N,k,x)),e.appendString("</span>")}return C||v.setColumnInfo(r+1,c.length-1,k,x),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(m("showMore","Show more ({0})",sve(l))),e.appendString("</span>")),e.appendString("</span>"),new bO(v,f,i)}function ive(s){return s.toString(16).toUpperCase().padStart(4,"0")}function sve(s){return s<1024?m("overflow.chars","{0} chars",s):s<1024*1024?`${(s/1024).toFixed(1)} KB`:`${(s/1024/1024).toFixed(1)} MB`}class yV{constructor(e,t,n,i){this._viewportBrand=void 0,this.top=e|0,this.left=t|0,this.width=n|0,this.height=i|0}}class ove{constructor(e,t){this.tabSize=e,this.data=t}}class SW{constructor(e,t,n,i,o,r,a){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=i,this.startVisibleColumn=o,this.tokens=r,this.inlineDecorations=a}}class er{constructor(e,t,n,i,o,r,a,l,c,d){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=i,this.isBasicASCII=er.isBasicASCII(n,r),this.containsRTL=er.containsRTL(n,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=l,this.tabSize=c,this.startVisibleColumn=d}static isBasicASCII(e,t){return t?p0(e):!0}static containsRTL(e,t,n){return!t&&n?ob(e):!1}}class VC{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class rve{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=i}toInlineDecoration(e){return new VC(new L(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class sY{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class C1{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&en(e.data,t.data)}static equalsArr(e,t){return en(e,t,C1.equals)}}function ave(s){return Array.isArray(s)}function lve(s){return!ave(s)}function oY(s){return typeof s=="string"}function SV(s){return!oY(s)}function _f(s){return!s}function ad(s,e){return s.ignoreCase&&e?e.toLowerCase():e}function kV(s){return s.replace(/[&<>'"_]/g,"-")}function cve(s,e){console.log(`${s.languageId}: ${e}`)}function Kt(s,e){return new Error(`${s.languageId}: ${e}`)}function lh(s,e,t,n,i){const o=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let r=null;return e.replace(o,function(a,l,c,d,h,u,f,g,p){return _f(c)?_f(d)?!_f(h)&&h<n.length?ad(s,n[h]):!_f(f)&&s&&typeof s[f]=="string"?s[f]:(r===null&&(r=i.split("."),r.unshift(i)),!_f(u)&&u<r.length?ad(s,r[u]):""):ad(s,t):"$"})}function dve(s,e,t){const n=/\$[sS](\d\d?)/g;let i=null;return e.replace(n,function(o,r){return i===null&&(i=t.split("."),i.unshift(t)),!_f(r)&&r<i.length?ad(s,i[r]):""})}function Ky(s,e){let t=e;for(;t&&t.length>0;){const n=s.tokenizer[t];if(n)return n;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return null}function hve(s,e){let t=e;for(;t&&t.length>0;){if(s.stateNames[t])return!0;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return!1}var uve=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},fve=function(s,e){return function(t,n){e(t,n,s)}},vO;const rY=5,tI=class tI{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new R_(e,t);let n=R_.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let i=this._entries[n];return i||(i=new R_(e,t),this._entries[n]=i,i)}};tI._INSTANCE=new tI(rY);let w1=tI;class R_{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return R_._equals(this,e)}push(e){return w1.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return w1.create(this.parent,e)}}class Hp{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new Hp(this.languageId,this.state)}}const nI=class nI{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new zC(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new zC(e,t);const n=R_.getStackElementId(e);let i=this._entries[n];return i||(i=new zC(e,null),this._entries[n]=i,i)}};nI._INSTANCE=new nI(rY);let ch=nI;class zC{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:ch.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof zC)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class gve{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new Aw(e,t,this._languageId)))}nestedLanguageTokenize(e,t,n,i){const o=n.languageId,r=n.state,a=mn.get(o);if(!a)return this.enterLanguage(o),this.emit(i,""),r;const l=a.tokenize(e,t,r);if(i!==0)for(const c of l.tokens)this._tokens.push(new Aw(c.offset+i,c.type,c.language));else this._tokens=this._tokens.concat(l.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,l.endState}finalize(e){return new R3(this._tokens,e)}}class XL{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const n=this._theme.match(this._currentLanguageId,t)|1024;this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){const i=e!==null?e.length:0,o=t.length,r=n!==null?n.length:0;if(i===0&&o===0&&r===0)return new Uint32Array(0);if(i===0&&o===0)return n;if(o===0&&r===0)return e;const a=new Uint32Array(i+o+r);e!==null&&a.set(e);for(let l=0;l<o;l++)a[i+l]=t[l];return n!==null&&a.set(n,i+o),a}nestedLanguageTokenize(e,t,n,i){const o=n.languageId,r=n.state,a=mn.get(o);if(!a)return this.enterLanguage(o),this.emit(i,""),r;const l=a.tokenizeEncoded(e,t,r);if(i!==0)for(let c=0,d=l.tokens.length;c<d;c+=2)l.tokens[c]+=i;return this._prependTokens=XL._merge(this._prependTokens,this._tokens,l.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,l.endState}finalize(e){return new fT(XL._merge(this._prependTokens,this._tokens,null),e)}}let y1=vO=class extends F{constructor(e,t,n,i,o){super(),this._configurationService=o,this._languageService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=i,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._register(mn.onDidChange(a=>{if(r)return;let l=!1;for(let c=0,d=a.changedLanguages.length;c<d;c++){const h=a.changedLanguages[c];if(this._embeddedLanguages[h]){l=!0;break}}l&&(r=!0,mn.handleChange([this._languageId]),r=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const n=mn.get(t);if(n){if(n instanceof vO){const i=n.getLoadStatus();i.loaded===!1&&e.push(i.promise)}continue}mn.isResolved(t)||e.push(mn.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=w1.create(null,this._lexer.start);return ch.create(e,null)}tokenize(e,t,n){if(e.length>=this._maxTokenizationLineLength)return M9(this._languageId,n);const i=new gve,o=this._tokenize(e,t,n,i);return i.finalize(o)}tokenizeEncoded(e,t,n){if(e.length>=this._maxTokenizationLineLength)return YT(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),n);const i=new XL(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),o=this._tokenize(e,t,n,i);return i.finalize(o)}_tokenize(e,t,n,i){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,i):this._myTokenize(e,t,n,0,i)}_findLeavingNestedLanguageOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=Ky(this._lexer,t.stack.state),!n))throw Kt(this._lexer,"tokenizer state is not defined: "+t.stack.state);let i=-1,o=!1;for(const r of n){if(!SV(r.action)||r.action.nextEmbedded!=="@pop")continue;o=!0;let a=r.resolveRegex(t.stack.state);const l=a.source;if(l.substr(0,4)==="^(?:"&&l.substr(l.length-1,1)===")"){const d=(a.ignoreCase?"i":"")+(a.unicode?"u":"");a=new RegExp(l.substr(4,l.length-5),d)}const c=e.search(a);c===-1||c!==0&&r.matchOnlyAtLineStart||(i===-1||c<i)&&(i=c)}if(!o)throw Kt(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i}_nestedTokenize(e,t,n,i,o){const r=this._findLeavingNestedLanguageOffset(e,n);if(r===-1){const c=o.nestedLanguageTokenize(e,t,n.embeddedLanguageData,i);return ch.create(n.stack,new Hp(n.embeddedLanguageData.languageId,c))}const a=e.substring(0,r);a.length>0&&o.nestedLanguageTokenize(a,!1,n.embeddedLanguageData,i);const l=e.substring(r);return this._myTokenize(l,t,n,i+r,o)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,i,o){o.enterLanguage(this._languageId);const r=e.length,a=t&&this._lexer.includeLF?e+`
`:e,l=a.length;let c=n.embeddedLanguageData,d=n.stack,h=0,u=null,f=!0;for(;f||h<l;){const g=h,p=d.depth,_=u?u.groups.length:0,b=d.state;let v=null,C=null,w=null,y=null,k=null;if(u){v=u.matches;const N=u.groups.shift();C=N.matched,w=N.action,y=u.rule,u.groups.length===0&&(u=null)}else{if(!f&&h>=l)break;f=!1;let N=this._lexer.tokenizer[b];if(!N&&(N=Ky(this._lexer,b),!N))throw Kt(this._lexer,"tokenizer state is not defined: "+b);const W=a.substr(h);for(const B of N)if((h===0||!B.matchOnlyAtLineStart)&&(v=W.match(B.resolveRegex(b)),v)){C=v[0],w=B.action;break}}if(v||(v=[""],C=""),w||(h<l&&(v=[a.charAt(h)],C=v[0]),w=this._lexer.defaultToken),C===null)break;for(h+=C.length;lve(w)&&SV(w)&&w.test;)w=w.test(C,v,b,h===l);let x=null;if(typeof w=="string"||Array.isArray(w))x=w;else if(w.group)x=w.group;else if(w.token!==null&&w.token!==void 0){if(w.tokenSubst?x=lh(this._lexer,w.token,C,v,b):x=w.token,w.nextEmbedded)if(w.nextEmbedded==="@pop"){if(!c)throw Kt(this._lexer,"cannot pop embedded language if not inside one");c=null}else{if(c)throw Kt(this._lexer,"cannot enter embedded language from within an embedded language");k=lh(this._lexer,w.nextEmbedded,C,v,b)}if(w.goBack&&(h=Math.max(0,h-w.goBack)),w.switchTo&&typeof w.switchTo=="string"){let N=lh(this._lexer,w.switchTo,C,v,b);if(N[0]==="@"&&(N=N.substr(1)),Ky(this._lexer,N))d=d.switchTo(N);else throw Kt(this._lexer,"trying to switch to a state '"+N+"' that is undefined in rule: "+this._safeRuleName(y))}else{if(w.transform&&typeof w.transform=="function")throw Kt(this._lexer,"action.transform not supported");if(w.next)if(w.next==="@push"){if(d.depth>=this._lexer.maxStack)throw Kt(this._lexer,"maximum tokenizer stack size reached: ["+d.state+","+d.parent.state+",...]");d=d.push(b)}else if(w.next==="@pop"){if(d.depth<=1)throw Kt(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(y));d=d.pop()}else if(w.next==="@popall")d=d.popall();else{let N=lh(this._lexer,w.next,C,v,b);if(N[0]==="@"&&(N=N.substr(1)),Ky(this._lexer,N))d=d.push(N);else throw Kt(this._lexer,"trying to set a next state '"+N+"' that is undefined in rule: "+this._safeRuleName(y))}}w.log&&typeof w.log=="string"&&cve(this._lexer,this._lexer.languageId+": "+lh(this._lexer,w.log,C,v,b))}if(x===null)throw Kt(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(y));const D=N=>{const W=this._languageService.getLanguageIdByLanguageName(N)||this._languageService.getLanguageIdByMimeType(N)||N,B=this._getNestedEmbeddedLanguageData(W);if(h<l){const z=e.substr(h);return this._nestedTokenize(z,t,ch.create(d,B),i+h,o)}else return ch.create(d,B)};if(Array.isArray(x)){if(u&&u.groups.length>0)throw Kt(this._lexer,"groups cannot be nested: "+this._safeRuleName(y));if(v.length!==x.length+1)throw Kt(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(y));let N=0;for(let W=1;W<v.length;W++)N+=v[W].length;if(N!==C.length)throw Kt(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(y));u={rule:y,matches:v,groups:[]};for(let W=0;W<x.length;W++)u.groups[W]={action:x[W],matched:v[W+1]};h-=C.length;continue}else{if(x==="@rematch"&&(h-=C.length,C="",v=null,x="",k!==null))return D(k);if(C.length===0){if(l===0||p!==d.depth||b!==d.state||(u?u.groups.length:0)!==_)continue;throw Kt(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(y))}let N=null;if(oY(x)&&x.indexOf("@brackets")===0){const W=x.substr(9),B=mve(this._lexer,C);if(!B)throw Kt(this._lexer,"@brackets token returned but no bracket defined as: "+C);N=kV(B.token+W)}else{const W=x===""?"":x+this._lexer.tokenPostfix;N=kV(W)}g<r&&o.emit(g+i,N)}if(k!==null)return D(k)}return ch.create(d,c)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new Hp(e,pb);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),mn.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=mn.get(e);return t?new Hp(e,t.getInitialState()):new Hp(e,pb)}};y1=vO=uve([fve(4,Ze)],y1);function mve(s,e){if(!e)return null;e=ad(s,e);const t=s.brackets;for(const n of t){if(n.open===e)return{token:n.token,bracketType:1};if(n.close===e)return{token:n.token,bracketType:-1}}return null}const yR=Nd("standaloneColorizer",{createHTML:s=>s});class kW{static colorizeElement(e,t,n,i){i=i||{};const o=i.theme||"vs",r=i.mimeType||n.getAttribute("lang")||n.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const a=t.getLanguageIdByMimeType(r)||r;e.setTheme(o);const l=n.firstChild?n.firstChild.nodeValue:"";n.className+=" "+o;const c=d=>{const h=(yR==null?void 0:yR.createHTML(d))??d;n.innerHTML=h};return this.colorize(t,l||"",a,i).then(c,d=>console.error(d))}static async colorize(e,t,n,i){const o=e.languageIdCodec;let r=4;i&&typeof i.tabSize=="number"&&(r=i.tabSize),B3(t)&&(t=t.substr(1));const a=tc(t);if(!e.isRegisteredLanguageId(n))return LV(a,r,o);const l=await mn.getOrCreate(n);return l?pve(a,r,l,o):LV(a,r,o)}static colorizeLine(e,t,n,i,o=4){const r=er.isBasicASCII(e,t),a=er.containsRTL(e,r,n);return gE(new Tu(!1,!0,e,!1,r,a,0,i,[],o,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,n=4){const i=e.getLineContent(t);e.tokenization.forceTokenization(t);const r=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),r,n)}}function pve(s,e,t,n){return new Promise((i,o)=>{const r=()=>{const a=_ve(s,e,t,n);if(t instanceof y1){const l=t.getLoadStatus();if(l.loaded===!1){l.promise.then(r,o);return}}i(a)};r()})}function LV(s,e,t){let n=[];const o=new Uint32Array(2);o[0]=0,o[1]=33587200;for(let r=0,a=s.length;r<a;r++){const l=s[r];o[0]=l.length;const c=new _i(o,l,t),d=er.isBasicASCII(l,!0),h=er.containsRTL(l,d,!0),u=gE(new Tu(!1,!0,l,!1,d,h,0,c,[],e,0,0,0,0,-1,"none",!1,!1,null));n=n.concat(u.html),n.push("<br/>")}return n.join("")}function _ve(s,e,t,n){let i=[],o=t.getInitialState();for(let r=0,a=s.length;r<a;r++){const l=s[r],c=t.tokenizeEncoded(l,!0,o);_i.convertToEndOffset(c.tokens,l.length);const d=new _i(c.tokens,l,n),h=er.isBasicASCII(l,!0),u=er.containsRTL(l,h,!0),f=gE(new Tu(!1,!0,l,!1,h,u,0,d.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(f.html),i.push("<br/>"),o=c.endState}return i.join("")}var bve=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vve=function(s,e){return function(t,n){e(t,n,s)}},z_;let QL=(z_=class{constructor(e,t){}dispose(){}},z_.ID="editor.contrib.markerDecorations",z_);QL=bve([vve(1,U9)],QL);dt(QL.ID,QL,0);class aY extends F{constructor(e,t){super(),this._onDidChange=this._register(new O),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let n=!1,i=!1;const o=()=>{if(n&&!i)try{n=!1,i=!0,t()}finally{So(Le(this._referenceDomElement),()=>{i=!1,o()})}};this._resizeObserver=new ResizeObserver(r=>{r&&r[0]&&r[0].contentRect?e={width:r[0].contentRect.width,height:r[0].contentRect.height}:e=null,n=!0,o()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,i=this._referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this._width!==n||this._height!==i)&&(this._width=n,this._height=i,e&&this._onDidChange.fire())}}const a_=class a_{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=a_._read(e,this.key),n=o=>a_._read(e,o),i=(o,r)=>a_._write(e,o,r);this.migrate(t,n,i)}static _read(e,t){if(typeof e>"u")return;const n=t.indexOf(".");if(n>=0){const i=t.substring(0,n);return this._read(e[i],t.substring(n+1))}return e[t]}static _write(e,t,n){const i=t.indexOf(".");if(i>=0){const o=t.substring(0,i);e[o]=e[o]||{},this._write(e[o],t.substring(i+1),n);return}e[t]=n}};a_.items=[];let S1=a_;function nl(s,e){S1.items.push(new S1(s,e))}function Do(s,e){nl(s,(t,n,i)=>{if(typeof t<"u"){for(const[o,r]of e)if(t===o){i(s,r);return}}})}function Cve(s){S1.items.forEach(e=>e.apply(s))}Do("wordWrap",[[!0,"on"],[!1,"off"]]);Do("lineNumbers",[[!0,"on"],[!1,"off"]]);Do("cursorBlinking",[["visible","solid"]]);Do("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Do("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Do("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Do("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Do("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Do("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Do("autoIndent",[[!1,"advanced"],[!0,"full"]]);Do("matchBrackets",[[!0,"always"],[!1,"never"]]);Do("renderFinalNewline",[[!0,"on"],[!1,"off"]]);Do("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);Do("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);Do("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);nl("autoClosingBrackets",(s,e,t)=>{s===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});nl("renderIndentGuides",(s,e,t)=>{typeof s<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!s))});nl("highlightActiveIndentGuide",(s,e,t)=>{typeof s<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!s))});const wve={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};nl("suggest.filteredTypes",(s,e,t)=>{if(s&&typeof s=="object"){for(const n of Object.entries(wve))s[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});nl("quickSuggestions",(s,e,t)=>{if(typeof s=="boolean"){const n=s?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});nl("experimental.stickyScroll.enabled",(s,e,t)=>{typeof s=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",s))});nl("experimental.stickyScroll.maxLineCount",(s,e,t)=>{typeof s=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",s))});nl("codeActionsOnSave",(s,e,t)=>{if(s&&typeof s=="object"){let n=!1;const i={};for(const o of Object.entries(s))typeof o[1]=="boolean"?(n=!0,i[o[0]]=o[1]?"explicit":"never"):i[o[0]]=o[1];n&&t("codeActionsOnSave",i)}});nl("codeActionWidget.includeNearbyQuickfixes",(s,e,t)=>{typeof s=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",s))});nl("lightbulb.enabled",(s,e,t)=>{typeof s=="boolean"&&t("lightbulb.enabled",s?void 0:"off")});class yve{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new O,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}const Lb=new yve;var Sve=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},kve=function(s,e){return function(t,n){e(t,n,s)}};let CO=class extends F{constructor(e,t,n,i,o){super(),this._accessibilityService=o,this._onDidChange=this._register(new O),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new O),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new Tj,this.isSimpleWidget=e,this.contextMenuId=t,this._containerObserver=this._register(new aY(i,n.dimension)),this._targetWindowId=Le(i).vscodeWindowId,this._rawOptions=xV(n),this._validatedOptions=dh.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(gr.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(Lb.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(KM.onDidChange(()=>this._recomputeOptions())),this._register(Vw.getInstance(Le(i)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const e=this._computeOptions(),t=dh.checkEquals(this.options,e);t!==null&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=Bf.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),n=this._readFontInfo(t),i={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:n,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:Lb.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return dh.computeOptions(this._validatedOptions,i)}_readEnvConfiguration(){return{extraEditorClassName:xve(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:Wf||Sr,pixelRatio:Vw.getInstance(_8(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return KM.readFontInfo(_8(this._targetWindowId,!0).window,e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=xV(e);dh.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=dh.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=Lve(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};CO=Sve([kve(4,xo)],CO);function Lve(s){let e=0;for(;s;)s=Math.floor(s/10),e++;return e||1}function xve(){let s="";return!md&&!nq&&(s+="no-user-select "),md&&(s+="no-minimap-shadow ",s+="enable-user-select "),et&&(s+="mac "),s}class Dve{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class Ive{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class dh{static validateOptions(e){const t=new Dve;for(const n of Tp){const i=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(i))}return t}static computeOptions(e,t){const n=new Ive;for(const i of Tp)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?en(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!dh._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){const n=[];let i=!1;for(const o of Tp){const r=!dh._deepEquals(e._read(o.id),t._read(o.id));n[o.id]=r,r&&(i=!0)}return i?new Ij(n):null}static applyUpdate(e,t){let n=!1;for(const i of Tp)if(t.hasOwnProperty(i.name)){const o=i.applyUpdate(e[i.name],t[i.name]);e[i.name]=o.newValue,n=n||o.didChange}return n}}function xV(s){const e=Rc(s);return Cve(e),e}var Sh;(function(s){const e={total:0,min:Number.MAX_VALUE,max:0},t={...e},n={...e},i={...e};let o=0;const r={keydown:0,input:0,render:0};function a(){b(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),r.keydown=1,queueMicrotask(l)}s.onKeyDown=a;function l(){r.keydown===1&&(performance.mark("keydown/end"),r.keydown=2)}function c(){performance.mark("input/start"),r.input=1,_()}s.onBeforeInput=c;function d(){r.input===0&&c(),queueMicrotask(h)}s.onInput=d;function h(){r.input===1&&(performance.mark("input/end"),r.input=2)}function u(){b()}s.onKeyUp=u;function f(){b()}s.onSelectionChange=f;function g(){r.keydown===2&&r.input===2&&r.render===0&&(performance.mark("render/start"),r.render=1,queueMicrotask(p),_())}s.onRenderStart=g;function p(){r.render===1&&(performance.mark("render/end"),r.render=2)}function _(){setTimeout(b)}function b(){r.keydown===2&&r.input===2&&r.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),v("keydown",e),v("input",t),v("render",n),v("inputlatency",i),o++,C())}function v(x,D){const N=performance.getEntriesByName(x)[0].duration;D.total+=N,D.min=Math.min(D.min,N),D.max=Math.max(D.max,N)}function C(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),r.keydown=0,r.input=0,r.render=0}function w(){if(o===0)return;const x={keydown:y(e),input:y(t),render:y(n),total:y(i),sampleCount:o};return k(e),k(t),k(n),k(i),o=0,x}s.getAndClearMeasurements=w;function y(x){return{average:x.total/o,max:x.max,min:x.min}}function k(x){x.total=0,x.min=Number.MAX_VALUE,x.max=0}})(Sh||(Sh={}));class mE{constructor(e,t){this.x=e,this.y=t,this._pageCoordinatesBrand=void 0}toClientCoordinates(e){return new lY(this.x-e.scrollX,this.y-e.scrollY)}}class lY{constructor(e,t){this.clientX=e,this.clientY=t,this._clientCoordinatesBrand=void 0}toPageCoordinates(e){return new mE(this.clientX+e.scrollX,this.clientY+e.scrollY)}}class Tve{constructor(e,t,n,i){this.x=e,this.y=t,this.width=n,this.height=i,this._editorPagePositionBrand=void 0}}class Eve{constructor(e,t){this.x=e,this.y=t,this._positionRelativeToEditorBrand=void 0}}function LW(s){const e=Sn(s);return new Tve(e.left,e.top,e.width,e.height)}function xW(s,e,t){const n=e.width/s.offsetWidth,i=e.height/s.offsetHeight,o=(t.x-e.x)/n,r=(t.y-e.y)/i;return new Eve(o,r)}class mu extends Gr{constructor(e,t,n){super(Le(n),e),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=t,this.pos=new mE(this.posx,this.posy),this.editorPos=LW(n),this.relativePos=xW(n,this.editorPos,this.pos)}}class Nve{constructor(e){this._editorViewDomNode=e}_create(e){return new mu(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return $(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return $(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return $(e,ee.MOUSE_DOWN,n=>{t(this._create(n))})}onPointerDown(e,t){return $(e,ee.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onMouseLeave(e,t){return $(e,ee.MOUSE_LEAVE,n=>{t(this._create(n))})}onMouseMove(e,t){return $(e,"mousemove",n=>t(this._create(n)))}}class Rve{constructor(e){this._editorViewDomNode=e}_create(e){return new mu(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return $(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return $(e,ee.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onPointerLeave(e,t){return $(e,ee.POINTER_LEAVE,n=>{t(this._create(n))})}onPointerMove(e,t){return $(e,"pointermove",n=>t(this._create(n)))}}class Mve extends F{constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new tv),this._keydownListener=null}startMonitoring(e,t,n,i,o){this._keydownListener=hn(e.ownerDocument,"keydown",r=>{r.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,r.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,r=>{i(new mu(r,!0,this._editorViewDomNode))},r=>{this._keydownListener.dispose(),o(r)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}const iI=class iI{constructor(e){this._editor=e,this._instanceId=++iI._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new It(()=>this.garbageCollect(),1e3)}createClassNameRef(e){const t=this.getOrCreateRule(e);return t.increaseRefCount(),{className:t.className,dispose:()=>{t.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(e){const t=this.computeUniqueKey(e);let n=this._rules.get(t);if(!n){const i=this._counter++;n=new Ave(t,`dyn-rule-${this._instanceId}-${i}`,Hk(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,e),this._rules.set(t,n)}return n}computeUniqueKey(e){return JSON.stringify(e)}garbageCollect(){for(const e of this._rules.values())e.hasReferences()||(this._rules.delete(e.key),e.dispose())}};iI._idPool=0;let JL=iI;class Ave{constructor(e,t,n,i){this.key=e,this.className=t,this.properties=i,this._referenceCount=0,this._styleElementDisposables=new q,this._styleElement=Qo(n,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(e,t){let n=`.${e} {`;for(const i in t){const o=t[i];let r;typeof o=="object"?r=de(o.id):r=o;const a=Pve(i);n+=`
	${a}: ${r};`}return n+=`
}`,n}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function Pve(s){return s.replace(/(^[A-Z])/,([e])=>e.toLowerCase()).replace(/([A-Z])/g,([e])=>`-${e.toLowerCase()}`)}class B0 extends F{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,i=e.length;n<i;n++){const o=e[n];switch(o.type){case 0:this.onCompositionStart(o)&&(t=!0);break;case 1:this.onCompositionEnd(o)&&(t=!0);break;case 2:this.onConfigurationChanged(o)&&(t=!0);break;case 3:this.onCursorStateChanged(o)&&(t=!0);break;case 4:this.onDecorationsChanged(o)&&(t=!0);break;case 5:this.onFlushed(o)&&(t=!0);break;case 6:this.onFocusChanged(o)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case 8:this.onLineMappingChanged(o)&&(t=!0);break;case 9:this.onLinesChanged(o)&&(t=!0);break;case 10:this.onLinesDeleted(o)&&(t=!0);break;case 11:this.onLinesInserted(o)&&(t=!0);break;case 12:this.onRevealRangeRequest(o)&&(t=!0);break;case 13:this.onScrollChanged(o)&&(t=!0);break;case 15:this.onTokensChanged(o)&&(t=!0);break;case 14:this.onThemeChanged(o)&&(t=!0);break;case 16:this.onTokensColorsChanged(o)&&(t=!0);break;case 17:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}}class Io extends B0{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class Xa{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){const t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){const n=[];let i=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;const o=new Uint8Array(i);for(let r=0;r<i;r++)o[r]=n[i-r-1];return o}}class Ove{constructor(e,t){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class Fve extends Ove{constructor(e,t,n){super(e,t),this._renderingContextBrand=void 0,this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class Wve{constructor(e,t,n,i){this.outsideRenderedLine=e,this.lineNumber=t,this.ranges=n,this.continuesOnNextLine=i}}class pE{static from(e){const t=new Array(e.length);for(let n=0,i=e.length;n<i;n++){const o=e[n];t[n]=new pE(o.left,o.width)}return t}constructor(e,t){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}}class Kf{constructor(e,t){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}}class Bve{constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}}class DV{constructor(e,t){this.outsideRenderedLine=e,this.ranges=t}}class QS{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,i,o){const r=this._createRange();try{return r.setStart(e,t),r.setEnd(n,i),r.getClientRects()}catch{return null}finally{this._detachRange(r,o)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(Kf.compare);const t=[];let n=0,i=e[0];for(let o=1,r=e.length;o<r;o++){const a=e[o];i.left+i.width+.9>=a.left?i.width=Math.max(i.width,a.left+a.width-i.left):(t[n++]=i,i=a)}return t[n++]=i,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||e.length===0)return null;const i=[];for(let o=0,r=e.length;o<r;o++){const a=e[o];i[o]=new Kf(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(i)}static readHorizontalRanges(e,t,n,i,o,r){const l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),i=Math.min(l,Math.max(0,i)),t===i&&n===o&&n===0&&!e.children[t].firstChild){const u=e.children[t].getClientRects();return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(u,r.clientRectDeltaLeft,r.clientRectScale)}t!==i&&i>0&&o===0&&(i--,o=1073741824);let c=e.children[t].firstChild,d=e.children[i].firstChild;if((!c||!d)&&(!c&&n===0&&t>0&&(c=e.children[t-1].firstChild,n=1073741824),!d&&o===0&&i>0&&(d=e.children[i-1].firstChild,o=1073741824)),!c||!d)return null;n=Math.min(c.textContent.length,Math.max(0,n)),o=Math.min(d.textContent.length,Math.max(0,o));const h=this._readClientRects(c,n,d,o,r.endNode);return r.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,r.clientRectDeltaLeft,r.clientRectScale)}}const Hve=function(){return Oa?!0:!(Ds||Sr||md)}();let M_=!0;class IV{constructor(e,t){this.themeType=t;const n=e.options,i=n.get(50);n.get(38)==="off"?this.renderWhitespace=n.get(100):this.renderWhitespace="none",this.renderControlCharacters=n.get(95),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.useMonospaceOptimizations=i.isMonospace&&!n.get(33),this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(67),this.stopRenderingLineAfter=n.get(118),this.fontLigatures=n.get(51)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}}const sI=class sI{constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=Ct(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return Ha(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,i,o){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const r=i.getViewLineRenderingData(e),a=this._options,l=ws.filter(r.inlineDecorations,e,r.minColumn,r.maxColumn);let c=null;if(Ha(a.themeType)||this._options.renderWhitespace==="selection"){const f=i.selections;for(const g of f){if(g.endLineNumber<e||g.startLineNumber>e)continue;const p=g.startLineNumber===e?g.startColumn:r.minColumn,_=g.endLineNumber===e?g.endColumn:r.maxColumn;p<_&&(Ha(a.themeType)&&l.push(new ws(p,_,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(c||(c=[]),c.push(new tY(p-1,_-1))))}}const d=new Tu(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,r.content,r.continuesWithWrappedLine,r.isBasicASCII,r.containsRTL,r.minColumn-1,r.tokens,l,r.tabSize,r.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==nu.OFF,c);if(this._renderedViewLine&&this._renderedViewLine.input.equals(d))return!1;o.appendString('<div style="top:'),o.appendString(String(t)),o.appendString("px;height:"),o.appendString(String(n)),o.appendString('px;" class="'),o.appendString(sI.CLASS_NAME),o.appendString('">');const h=W0(d,o);o.appendString("</div>");let u=null;return M_&&Hve&&r.isBasicASCII&&a.useMonospaceOptimizations&&h.containsForeignElements===0&&(u=new Gy(this._renderedViewLine?this._renderedViewLine.domNode:null,d,h.characterMapping)),u||(u=dY(this._renderedViewLine?this._renderedViewLine.domNode:null,d,h.characterMapping,h.containsRTL,h.containsForeignElements)),this._renderedViewLine=u,!0}layoutLine(e,t,n){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(n))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof Gy:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof Gy?this._renderedViewLine.monospaceAssumptionsAreValid():M_}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof Gy&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,i){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));const o=this._renderedViewLine.input.stopRenderingLineAfter;if(o!==-1&&t>o+1&&n>o+1)return new DV(!0,[new Kf(this.getWidth(i),0)]);o!==-1&&t>o+1&&(t=o+1),o!==-1&&n>o+1&&(n=o+1);const r=this._renderedViewLine.getVisibleRangesForRange(e,t,n,i);return r&&r.length>0?new DV(!1,r):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};sI.CLASS_NAME="view-line";let Vc=sI;class Gy{constructor(e,t,n){this._cachedWidth=-1,this.domNode=e,this.input=t;const i=Math.floor(t.lineContent.length/300);if(i>0){this._keyColumnPixelOffsetCache=new Float32Array(i);for(let o=0;o<i;o++)this._keyColumnPixelOffsetCache[o]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){const t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return M_;if(this.input.lineContent.length<300){const e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),M_=!1)}return M_}toSlowRenderedLine(){return dY(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,i){const o=this._getColumnPixelOffset(e,t,i),r=this._getColumnPixelOffset(e,n,i);return[new Kf(o,r-o)]}_getColumnPixelOffset(e,t,n){if(t<=300){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const i=Math.floor((t-1)/300)-1,o=(i+1)*300+1;let r=-1;if(this._keyColumnPixelOffsetCache&&(r=this._keyColumnPixelOffsetCache[i],r===-1&&(r=this._actualReadPixelOffset(e,o,n),this._keyColumnPixelOffsetCache[i]=r)),r===-1){const c=this._characterMapping.getHorizontalOffset(t);return this._charWidth*c}const a=this._characterMapping.getHorizontalOffset(o),l=this._characterMapping.getHorizontalOffset(t);return r+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,n){if(!this.domNode)return-1;const i=this._characterMapping.getDomPosition(t),o=QS.readHorizontalRanges(this._getReadingTarget(this.domNode),i.partIndex,i.charIndex,i.partIndex,i.charIndex,n);return!o||o.length===0?-1:o[0].left}getColumnOfNodeOffset(e,t){return DW(this._characterMapping,e,t)}}class cY{constructor(e,t,n,i,o){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!i||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let r=0,a=this._characterMapping.length;r<=a;r++)this._pixelOffsetCache[r]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e==null||e.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,i){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const o=this._readPixelOffset(this.domNode,e,t,i);if(o===-1)return null;const r=this._readPixelOffset(this.domNode,e,n,i);return r===-1?null:[new Kf(o,r-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,i)}_readVisibleRangesForRange(e,t,n,i,o){if(n===i){const r=this._readPixelOffset(e,t,n,o);return r===-1?null:[new Kf(r,0)]}else return this._readRawVisibleRangesForRange(e,n,i,o)}_readPixelOffset(e,t,n,i){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(i);const o=this._getReadingTarget(e);return o.firstChild?(i.markDidDomLayout(),o.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const o=this._pixelOffsetCache[n];if(o!==-1)return o;const r=this._actualReadPixelOffset(e,t,n,i);return this._pixelOffsetCache[n]=r,r}return this._actualReadPixelOffset(e,t,n,i)}_actualReadPixelOffset(e,t,n,i){if(this._characterMapping.length===0){const l=QS.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(i);const o=this._characterMapping.getDomPosition(n),r=QS.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,i);if(!r||r.length===0)return-1;const a=r[0].left;if(this.input.isBasicASCII){const l=this._characterMapping.getHorizontalOffset(n),c=Math.round(this.input.spaceWidth*l);if(Math.abs(c-a)<=1)return c}return a}_readRawVisibleRangesForRange(e,t,n,i){if(t===1&&n===this._characterMapping.length)return[new Kf(0,this.getWidth(i))];const o=this._characterMapping.getDomPosition(t),r=this._characterMapping.getDomPosition(n);return QS.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,r.partIndex,r.charIndex,i)}getColumnOfNodeOffset(e,t){return DW(this._characterMapping,e,t)}}class Vve extends cY{_readVisibleRangesForRange(e,t,n,i,o){const r=super._readVisibleRangesForRange(e,t,n,i,o);if(!r||r.length===0||n===i||n===1&&i===this._characterMapping.length)return r;if(!this.input.containsRTL){const a=this._readPixelOffset(e,t,i,o);if(a!==-1){const l=r[r.length-1];l.left<a&&(l.width=a-l.left)}}return r}}const dY=function(){return Wf?zve:$ve}();function zve(s,e,t,n,i){return new Vve(s,e,t,n,i)}function $ve(s,e,t,n,i){return new cY(s,e,t,n,i)}function DW(s,e,t){const n=e.textContent.length;let i=-1;for(;e;)e=e.previousSibling,i++;return s.getColumn(new nY(i,t),n)}class k1{static whitespaceVisibleColumn(e,t,n){const i=e.length;let o=0,r=-1,a=-1;for(let l=0;l<i;l++){if(l===t)return[r,a,o];switch(o%n===0&&(r=l,a=o),e.charCodeAt(l)){case 32:o+=1;break;case 9:o=Gn.nextRenderTabStop(o,n);break;default:return[-1,-1,-1]}}return t===i?[r,a,o]:[-1,-1,-1]}static atomicPosition(e,t,n,i){const o=e.length,[r,a,l]=k1.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let c;switch(i){case 0:c=!0;break;case 1:c=!1;break;case 2:if(l%n===0)return t;c=l%n<=n/2;break}if(c){if(r===-1)return-1;let u=a;for(let f=r;f<o;++f){if(u===a+n)return r;switch(e.charCodeAt(f)){case 32:u+=1;break;case 9:u=Gn.nextRenderTabStop(u,n);break;default:return-1}}return u===a+n?r:-1}const d=Gn.nextRenderTabStop(l,n);let h=l;for(let u=t;u<o;u++){if(h===d)return u;switch(e.charCodeAt(u)){case 32:h+=1;break;case 9:h=Gn.nextRenderTabStop(h,n);break;default:return-1}}return h===d?o:-1}}class Yd{constructor(e=null){this.hitTarget=e,this.type=0}}class hY{get hitTarget(){return this.spanNode}constructor(e,t,n){this.position=e,this.spanNode=t,this.injectedText=n,this.type=1}}var bf;(function(s){function e(t,n,i){const o=t.getPositionFromDOMInfo(n,i);return o?new hY(o,n,null):new Yd(n)}s.createFromDOMInfo=e})(bf||(bf={}));class Uve{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class is{static _deduceRage(e,t=null){return!t&&e?new L(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,i,o,r){return{type:e,element:t,mouseColumn:n,position:i,range:o,detail:r}}static createViewZone(e,t,n,i,o){return{type:e,element:t,mouseColumn:n,position:i,range:this._deduceRage(i),detail:o}}static createContentText(e,t,n,i,o){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,i),detail:o}}static createContentEmpty(e,t,n,i){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:i}}static createContentWidget(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t,n,i){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:n,outsideDistance:i}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class fs{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}}class xb{constructor(e,t,n){this.viewModel=e.viewModel;const i=e.configuration.options;this.layoutInfo=i.get(146),this.viewDomNode=t.viewDomNode,this.lineHeight=i.get(67),this.stickyTabStops=i.get(117),this.typicalHalfwidthCharacterWidth=i.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return xb.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){const i=n.verticalOffset+n.height/2,o=e.viewModel.getLineCount();let r=null,a,l=null;return n.afterLineNumber!==o&&(l=new A(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(r=new A(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),l===null?a=r:r===null?a=l:t<i?a=r:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:r,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const i=this._context.viewModel.getLineCount(),o=this._context.viewModel.getLineMaxColumn(i);return{range:new L(i,o,i,o),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new L(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return xb._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class jve{constructor(e,t,n,i){this.editorPos=t,this.pos=n,this.relativePos=i,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,ns._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class qve extends jve{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=Xa.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,n,i,o){super(e,t,n,i),this.hitTestResult=new ja(()=>ns.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._ctx=e,this._eventTarget=o;const r=!!this._eventTarget;this._useHitTestTarget=!r}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?Gn.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return is.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return is.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,i){return is.createMargin(e,this.target,this._getMouseColumn(t),t,n,i)}fulfillViewZone(e,t,n){return is.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return is.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return is.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return is.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return is.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return is.createOverlayWidget(this.target,this._getMouseColumn(),e)}}const TV={isAfterLines:!0};function SR(s){return{isAfterLines:!1,horizontalDistanceToText:s}}class ns{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,n=Xa.collect(t,this._viewHelper.viewDomNode);return!!(fs.isChildOfContentWidgets(n)||fs.isChildOfOverflowingContentWidgets(n)||fs.isChildOfOverlayWidgets(n)||fs.isChildOfOverflowingOverlayWidgets(n))}createMouseTarget(e,t,n,i,o){const r=new xb(this._context,this._viewHelper,e),a=new qve(r,t,n,i,o);try{const l=ns._createMouseTarget(r,a);if(l.type===6&&r.stickyTabStops&&l.position!==null){const c=ns._snapToSoftTabBoundary(l.position,r.viewModel),d=L.fromPositions(c,c).plusRange(l.range);return a.fulfillContentText(c,d,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();const n=t;let i=null;return!fs.isChildOfOverflowGuard(t.targetPath)&&!fs.isChildOfOverflowingContentWidgets(t.targetPath)&&!fs.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(i=i||t.fulfillUnknown()),i=i||ns._hitTestContentWidget(e,n),i=i||ns._hitTestOverlayWidget(e,n),i=i||ns._hitTestMinimap(e,n),i=i||ns._hitTestScrollbarSlider(e,n),i=i||ns._hitTestViewZone(e,n),i=i||ns._hitTestMargin(e,n),i=i||ns._hitTestViewCursor(e,n),i=i||ns._hitTestTextArea(e,n),i=i||ns._hitTestViewLines(e,n),i=i||ns._hitTestScrollbar(e,n),i||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(fs.isChildOfContentWidgets(t.targetPath)||fs.isChildOfOverflowingContentWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(fs.isChildOfOverlayWidgets(t.targetPath)||fs.isChildOfOverflowingOverlayWidgets(t.targetPath)){const n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const n=e.lastRenderData.lastViewCursorsRenderData;for(const i of n)if(t.target===i.domNode)return t.fulfillContentText(i.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const n=e.lastRenderData.lastViewCursorsRenderData,i=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(const r of n){if(i<r.contentLeft||i>r.contentLeft+r.width)continue;const a=e.getVerticalOffsetForLineNumber(r.position.lineNumber);if(a<=o&&o<=a+r.height)return t.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){const i=t.isInContentArea?8:5;return t.fulfillViewZone(i,n.position,n)}return null}static _hitTestTextArea(e,t){return fs.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition();let o=Math.abs(t.relativePos.x);const r={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};if(o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth){const a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(n.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return r.glyphMarginLane=l[Math.floor(o/e.lineHeight)],t.fulfillMargin(2,i,n.range,r)}return o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,i,n.range,r):(o-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,i,n.range,r))}return null}static _hitTestViewLines(e,t){if(!fs.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new A(1,1),TV);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const i=e.viewModel.getLineCount(),o=e.viewModel.getLineMaxColumn(i);return t.fulfillContentEmpty(new A(i,o),TV)}if(fs.isStrictChildOfViewLines(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(i)===0){const r=e.getLineWidth(i),a=SR(t.mouseContentHorizontalOffset-r);return t.fulfillContentEmpty(new A(i,1),a)}const o=e.getLineWidth(i);if(t.mouseContentHorizontalOffset>=o){const r=SR(t.mouseContentHorizontalOffset-o),a=new A(i,e.viewModel.getLineMaxColumn(i));return t.fulfillContentEmpty(a,r)}}const n=t.hitTestResult.value;return n.type===1?ns.createMouseTargetFromHitTestPosition(e,t,n.spanNode,n.position,n.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(fs.isChildOfMinimap(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new A(n,i))}return null}static _hitTestScrollbarSlider(e,t){if(fs.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){const n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new A(i,o))}}return null}static _hitTestScrollbar(e,t){if(fs.isChildOfScrollableElement(t.targetPath)){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new A(n,i))}return null}getMouseColumn(e){const t=this._context.configuration.options,n=t.get(146),i=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return ns._getMouseColumn(i,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,i,o){const r=i.lineNumber,a=i.column,l=e.getLineWidth(r);if(t.mouseContentHorizontalOffset>l){const b=SR(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(i,b)}const c=e.visibleRangeForPosition(r,a);if(!c)return t.fulfillUnknown(i);const d=c.left;if(Math.abs(t.mouseContentHorizontalOffset-d)<1)return t.fulfillContentText(i,null,{mightBeForeignElement:!!o,injectedText:o});const h=[];if(h.push({offset:c.left,column:a}),a>1){const b=e.visibleRangeForPosition(r,a-1);b&&h.push({offset:b.left,column:a-1})}const u=e.viewModel.getLineMaxColumn(r);if(a<u){const b=e.visibleRangeForPosition(r,a+1);b&&h.push({offset:b.left,column:a+1})}h.sort((b,v)=>b.offset-v.offset);const f=t.pos.toClientCoordinates(Le(e.viewDomNode)),g=n.getBoundingClientRect(),p=g.left<=f.clientX&&f.clientX<=g.right;let _=null;for(let b=1;b<h.length;b++){const v=h[b-1],C=h[b];if(v.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=C.offset){_=new L(r,v.column,r,C.column);const w=Math.abs(v.offset-t.mouseContentHorizontalOffset),y=Math.abs(C.offset-t.mouseContentHorizontalOffset);i=w<y?new A(r,v.column):new A(r,C.column);break}}return t.fulfillContentText(i,_,{mightBeForeignElement:!p||!!o,injectedText:o})}static _doHitTestWithCaretRangeFromPoint(e,t){const n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.getVerticalOffsetForLineNumber(n),o=i+e.lineHeight;if(!(n===e.viewModel.getLineCount()&&t.mouseVerticalOffset>o)){const a=Math.floor((i+o)/2);let l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);const c=new mE(t.pos.x,l),d=this._actualDoHitTestWithCaretRangeFromPoint(e,c.toClientCoordinates(Le(e.viewDomNode)));if(d.type===1)return d}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(Le(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const n=Xg(e.viewDomNode);let i;if(n?typeof n.caretRangeFromPoint>"u"?i=Kve(n,t.clientX,t.clientY):i=n.caretRangeFromPoint(t.clientX,t.clientY):i=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!i||!i.startContainer)return new Yd;const o=i.startContainer;if(o.nodeType===o.TEXT_NODE){const r=o.parentNode,a=r?r.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===Vc.CLASS_NAME?bf.createFromDOMInfo(e,r,i.startOffset):new Yd(o.parentNode)}else if(o.nodeType===o.ELEMENT_NODE){const r=o.parentNode,a=r?r.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===Vc.CLASS_NAME?bf.createFromDOMInfo(e,o,o.textContent.length):new Yd(o)}return new Yd}static _doHitTestWithCaretPositionFromPoint(e,t){const n=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const i=n.offsetNode.parentNode,o=i?i.parentNode:null,r=o?o.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===Vc.CLASS_NAME?bf.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Yd(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const i=n.offsetNode.parentNode,o=i&&i.nodeType===i.ELEMENT_NODE?i.className:null,r=i?i.parentNode:null,a=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(o===Vc.CLASS_NAME){const l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return bf.createFromDOMInfo(e,l,0)}else if(a===Vc.CLASS_NAME)return bf.createFromDOMInfo(e,n.offsetNode,0)}return new Yd(n.offsetNode)}static _snapToSoftTabBoundary(e,t){const n=t.getLineContent(e.lineNumber),{tabSize:i}=t.model.getOptions(),o=k1.atomicPosition(n,e.column-1,i,2);return o!==-1?new A(e.lineNumber,o+1):e}static doHitTest(e,t){let n=new Yd;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(Le(e.viewDomNode)))),n.type===1){const i=e.viewModel.getInjectedTextAt(n.position),o=e.viewModel.normalizePosition(n.position,2);(i||!o.equals(n.position))&&(n=new hY(o,n.spanNode,i))}return n}}function Kve(s,e,t){const n=document.createRange();let i=s.elementFromPoint(e,t);if(i!==null){for(;i&&i.firstChild&&i.firstChild.nodeType!==i.firstChild.TEXT_NODE&&i.lastChild&&i.lastChild.firstChild;)i=i.lastChild;const o=i.getBoundingClientRect(),r=Le(i),a=r.getComputedStyle(i,null).getPropertyValue("font-style"),l=r.getComputedStyle(i,null).getPropertyValue("font-variant"),c=r.getComputedStyle(i,null).getPropertyValue("font-weight"),d=r.getComputedStyle(i,null).getPropertyValue("font-size"),h=r.getComputedStyle(i,null).getPropertyValue("line-height"),u=r.getComputedStyle(i,null).getPropertyValue("font-family"),f=`${a} ${l} ${c} ${d}/${h} ${u}`,g=i.innerText;let p=o.left,_=0,b;if(e>o.left+o.width)_=g.length;else{const v=wO.getInstance();for(let C=0;C<g.length+1;C++){if(b=v.getCharWidth(g.charAt(C),f)/2,p+=b,e<p){_=C;break}p+=b}}n.setStart(i.firstChild,_),n.setEnd(i.firstChild,_)}return n}const Lf=class Lf{static getInstance(){return Lf._INSTANCE||(Lf._INSTANCE=new Lf),Lf._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const n=e+t;if(this._cache[n])return this._cache[n];const i=this._canvas.getContext("2d");i.font=t;const r=i.measureText(e).width;return this._cache[n]=r,r}};Lf._INSTANCE=null;let wO=Lf;class IW extends B0{constructor(e,t,n){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new ns(this._context,n),this._mouseDownOperation=this._register(new Gve(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(r,a)=>this._createMouseTarget(r,a),r=>this._getMouseColumn(r))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const i=new Nve(this.viewHelper.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,r=>this._onContextMenu(r,!0))),this._register(i.onMouseMove(this.viewHelper.viewDomNode,r=>{this._onMouseMove(r),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=$(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new mu(a,!1,this.viewHelper.viewDomNode))}))})),this._register(i.onMouseUp(this.viewHelper.viewDomNode,r=>this._onMouseUp(r))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,r=>this._onMouseLeave(r)));let o=0;this._register(i.onPointerDown(this.viewHelper.viewDomNode,(r,a)=>{o=a})),this._register($(this.viewHelper.viewDomNode,ee.POINTER_UP,r=>{this._mouseDownOperation.onPointerUp()})),this._register(i.onMouseDown(this.viewHelper.viewDomNode,r=>this._onMouseDown(r,o))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=rL.INSTANCE;let t=0,n=gr.getZoomLevel(),i=!1,o=0;const r=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(76))return;const c=new Yg(l);if(e.acceptStandardWheelEvent(c),e.isPhysicalMouseWheel()){if(a(l)){const d=gr.getZoomLevel(),h=c.deltaY>0?1:-1;gr.setZoomLevel(d+h),c.preventDefault(),c.stopPropagation()}}else Date.now()-t>50&&(n=gr.getZoomLevel(),i=a(l),o=0),t=Date.now(),o+=c.deltaY,i&&(gr.setZoomLevel(n+o/5),c.preventDefault(),c.stopPropagation())};this._register($(this.viewHelper.viewDomNode,ee.MOUSE_WHEEL,r,{capture:!0,passive:!1}));function a(l){return et?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(146)){const t=this._context.configuration.options.get(146).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const i=new lY(e,t).toPageCoordinates(Le(this.viewHelper.viewDomNode)),o=LW(this.viewHelper.viewDomNode);if(i.y<o.y||i.y>o.y+o.height||i.x<o.x||i.x>o.x+o.width)return null;const r=xW(this.viewHelper.viewDomNode,o,i);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,i,r,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){const i=Xg(this.viewHelper.viewDomNode);i&&(n=i.elementsFromPoint(e.posx,e.posy).find(o=>this.viewHelper.viewDomNode.contains(o)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const n=this._createMouseTarget(e,!0),i=n.type===6||n.type===7,o=n.type===2||n.type===3||n.type===4,r=n.type===3,a=this._context.configuration.options.get(110),l=n.type===8||n.type===5,c=n.type===9;let d=e.leftButton||e.middleButton;et&&e.leftButton&&e.ctrlKey&&(d=!1);const h=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(d&&(i||r&&a))h(),this._mouseDownOperation.start(n.type,e,t);else if(o)e.preventDefault();else if(l){const u=n.detail;d&&this.viewHelper.shouldSuppressMouseDownOnViewZone(u.viewZoneId)&&(h(),this._mouseDownOperation.start(n.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(n.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:n})}}class Gve extends F{constructor(e,t,n,i,o,r){super(),this._context=e,this._viewController=t,this._viewHelper=n,this._mouseTargetFactory=i,this._createMouseTarget=o,this._getMouseColumn=r,this._mouseMoveMonitor=this._register(new Mve(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new Zve(this._context,this._viewHelper,this._mouseTargetFactory,(a,l,c)=>this._dispatchMouse(a,l,c))),this._mouseState=new yO,this._currentSelection=new me(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):t.type===13&&(t.outsidePosition==="above"||t.outsidePosition==="below")?this._topBottomDragScrolling.start(t,e):(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)))}start(e,t,n){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(e===3),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const i=this._findMousePosition(t,!0);if(!i||!i.position)return;this._mouseState.trySetCount(t.detail,i.position),t.detail=this._mouseState.count;const o=this._context.configuration.options;if(!o.get(92)&&o.get(35)&&!o.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&i.type===6&&i.position&&this._currentSelection.containsPosition(i.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,r=>this._onMouseDownThenMove(r),r=>{const a=this._findMousePosition(this._lastMouseEvent,!1);Mc(r)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:a?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(i,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,n,t.buttons,r=>this._onMouseDownThenMove(r),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,n=this._context.viewModel,i=this._context.viewLayout,o=this._getMouseColumn(e);if(e.posy<t.y){const a=t.y-e.posy,l=Math.max(i.getCurrentScrollTop()-a,0),c=xb.getZoneAtCoord(this._context,l);if(c){const h=this._helpPositionJumpOverViewZone(c);if(h)return is.createOutsideEditor(o,h,"above",a)}const d=i.getLineNumberAtVerticalOffset(l);return is.createOutsideEditor(o,new A(d,1),"above",a)}if(e.posy>t.y+t.height){const a=e.posy-t.y-t.height,l=i.getCurrentScrollTop()+e.relativePos.y,c=xb.getZoneAtCoord(this._context,l);if(c){const h=this._helpPositionJumpOverViewZone(c);if(h)return is.createOutsideEditor(o,h,"below",a)}const d=i.getLineNumberAtVerticalOffset(l);return is.createOutsideEditor(o,new A(d,n.getLineMaxColumn(d)),"below",a)}const r=i.getLineNumberAtVerticalOffset(i.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const a=t.x-e.posx;return is.createOutsideEditor(o,new A(r,1),"left",a)}if(e.posx>t.x+t.width){const a=e.posx-t.x-t.width;return is.createOutsideEditor(o,new A(r,n.getLineMaxColumn(r)),"right",a)}return null}_findMousePosition(e,t){const n=this._getPositionOutsideEditor(e);if(n)return n;const i=this._createMouseTarget(e,t);if(!i.position)return null;if(i.type===8||i.type===5){const r=this._helpPositionJumpOverViewZone(i.detail);if(r)return is.createViewZone(i.type,i.element,i.mouseColumn,r,i.detail)}return i}_helpPositionJumpOverViewZone(e){const t=new A(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),n=e.positionBefore,i=e.positionAfter;return n&&i?n.isBefore(t)?n:i:null}_dispatchMouse(e,t,n){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:n,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:e.type===6&&e.detail.injectedText!==null})}}class Zve extends F{constructor(e,t,n,i){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=i,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new Yve(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class Yve extends F{constructor(e,t,n,i,o,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=n,this._dispatchMouse=i,this._position=o,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=So(Le(r.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(67),t=this._context.configuration.options.get(146).height/e,n=this._position.outsideDistance/e;return n<=1.5?Math.max(30,t*(1+n)):n<=3?Math.max(60,t*(2+n)):Math.max(200,t*(7+n))}_execute(){const e=this._context.configuration.options.get(67),t=this._getScrollSpeed(),n=this._tick(),i=t*(n/1e3)*e,o=this._position.outsidePosition==="above"?-i:i;this._context.viewModel.viewLayout.deltaScrollNow(0,o),this._viewHelper.renderNow();const r=this._context.viewLayout.getLinesViewportData(),a=this._position.outsidePosition==="above"?r.startLineNumber:r.endLineNumber;let l;{const c=LW(this._viewHelper.viewDomNode),d=this._context.configuration.options.get(146).horizontalScrollbarHeight,h=new mE(this._mouseEvent.pos.x,c.y+c.height-d-.1),u=xW(this._viewHelper.viewDomNode,c,h);l=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,h,u,null)}(!l.position||l.position.lineNumber!==a)&&(this._position.outsidePosition==="above"?l=is.createOutsideEditor(this._position.mouseColumn,new A(a,1),"above",this._position.outsideDistance):l=is.createOutsideEditor(this._position.mouseColumn,new A(a,this._context.viewModel.getLineMaxColumn(a)),"below",this._position.outsideDistance)),this._dispatchMouse(l,!0,2),this._animationFrameDisposable=So(Le(l.element),()=>this._execute())}}const oI=class oI{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const n=new Date().getTime();n-this._lastSetMouseDownCountTime>oI.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};oI.CLEAR_MOUSE_DOWN_COUNT_TIME=400;let yO=oI;const l_=class l_{constructor(e,t,n,i,o){this.value=e,this.selectionStart=t,this.selectionEnd=n,this.selection=i,this.newlineCountBeforeSelection=o}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){const n=e.getValue(),i=e.getSelectionStart(),o=e.getSelectionEnd();let r;if(t){const a=n.substring(0,i),l=t.value.substring(0,t.selectionStart);a===l&&(r=t.newlineCountBeforeSelection)}return new l_(n,i,o,null,r)}collapseSelection(){return this.selectionStart===this.value.length?this:new l_(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,n){t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var i,o,r,a;if(e<=this.selectionStart){const l=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(((i=this.selection)==null?void 0:i.getStartPosition())??null,l,-1)}if(e>=this.selectionEnd){const l=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(((o=this.selection)==null?void 0:o.getEndPosition())??null,l,1)}const t=this.value.substring(this.selectionStart,e);if(t.indexOf("…")===-1)return this._finishDeduceEditorPosition(((r=this.selection)==null?void 0:r.getStartPosition())??null,t,1);const n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(((a=this.selection)==null?void 0:a.getEndPosition())??null,n,-1)}_finishDeduceEditorPosition(e,t,n){let i=0,o=-1;for(;(o=t.indexOf(`
`,o+1))!==-1;)i++;return[e,n*t.length,i]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const i=Math.min(ou(e.value,t.value),e.selectionStart,t.selectionStart),o=Math.min(Ak(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd);e.value.substring(i,e.value.length-o);const r=t.value.substring(i,t.value.length-o),a=e.selectionStart-i,l=e.selectionEnd-i,c=t.selectionStart-i,d=t.selectionEnd-i;if(c===d){const u=e.selectionStart-i;return{text:r,replacePrevCharCnt:u,replaceNextCharCnt:0,positionDelta:0}}const h=l-a;return{text:r,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const n=Math.min(ou(e.value,t.value),e.selectionEnd),i=Math.min(Ak(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(n,e.value.length-i),r=t.value.substring(n,t.value.length-i);e.selectionStart-n;const a=e.selectionEnd-n;t.selectionStart-n;const l=t.selectionEnd-n;return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:o.length-a,positionDelta:l-r.length}}};l_.EMPTY=new l_("",0,0,null,void 0);let ss=l_;class Vp{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const n=e*t,i=n+1,o=n+t;return new L(i,1,o+1,1)}static fromEditorSelection(e,t,n,i){const r=Vp._getPageOfLine(t.startLineNumber,n),a=Vp._getRangeForPage(r,n),l=Vp._getPageOfLine(t.endLineNumber,n),c=Vp._getRangeForPage(l,n);let d=a.intersectRanges(new L(1,1,t.startLineNumber,t.startColumn));if(i&&e.getValueLengthInRange(d,1)>500){const b=e.modifyPosition(d.getEndPosition(),-500);d=L.fromPositions(b,d.getEndPosition())}const h=e.getValueInRange(d,1),u=e.getLineCount(),f=e.getLineMaxColumn(u);let g=c.intersectRanges(new L(t.endLineNumber,t.endColumn,u,f));if(i&&e.getValueLengthInRange(g,1)>500){const b=e.modifyPosition(g.getStartPosition(),500);g=L.fromPositions(g.getStartPosition(),b)}const p=e.getValueInRange(g,1);let _;if(r===l||r+1===l)_=e.getValueInRange(t,1);else{const b=a.intersectRanges(t),v=c.intersectRanges(t);_=e.getValueInRange(b,1)+"…"+e.getValueInRange(v,1)}return i&&_.length>2*500&&(_=_.substring(0,500)+"…"+_.substring(_.length-500,_.length)),new ss(h+_+p,h.length,h.length+_.length,t,d.endLineNumber-d.startLineNumber)}}var Xve=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},EV=function(s,e){return function(t,n){e(t,n,s)}},ex;(function(s){s.Tap="-monaco-textarea-synthetic-tap"})(ex||(ex={}));const SO={forceCopyWithSyntaxHighlighting:!1},rI=class rI{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}};rI.INSTANCE=new rI;let L1=rI;class Qve{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";const t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}let kO=class extends F{get textAreaState(){return this._textAreaState}constructor(e,t,n,i,o,r){super(),this._host=e,this._textArea=t,this._OS=n,this._browser=i,this._accessibilityService=o,this._logService=r,this._onFocus=this._register(new O),this.onFocus=this._onFocus.event,this._onBlur=this._register(new O),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new O),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new O),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new O),this.onCut=this._onCut.event,this._onPaste=this._register(new O),this.onPaste=this._onPaste.event,this._onType=this._register(new O),this.onType=this._onType.event,this._onCompositionStart=this._register(new O),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new O),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new O),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new O),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new ai),this._asyncTriggerCut=this._register(new It(()=>this._onCut.fire(),0)),this._textAreaState=ss.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(se.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new It(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let a=null;this._register(this._textArea.onKeyDown(l=>{const c=new Pt(l);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),a=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(l=>{const c=new Pt(l);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(l=>{const c=new Qve;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&a&&a.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===l.data&&(a.code==="ArrowRight"||a.code==="ArrowLeft")){c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:l.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:l.data});return}this._onCompositionStart.fire({data:l.data})})),this._register(this._textArea.onCompositionUpdate(l=>{const c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){const h=ss.readFromTextArea(this._textArea,this._textAreaState),u=ss.deduceAndroidCompositionInput(this._textAreaState,h);this._textAreaState=h,this._onType.fire(u),this._onCompositionUpdate.fire(l);return}const d=c.handleCompositionUpdate(l.data);this._textAreaState=ss.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(d),this._onCompositionUpdate.fire(l)})),this._register(this._textArea.onCompositionEnd(l=>{const c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){const h=ss.readFromTextArea(this._textArea,this._textAreaState),u=ss.deduceAndroidCompositionInput(this._textAreaState,h);this._textAreaState=h,this._onType.fire(u),this._onCompositionEnd.fire();return}const d=c.handleCompositionUpdate(l.data);this._textAreaState=ss.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(d),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const c=ss.readFromTextArea(this._textArea,this._textAreaState),d=ss.deduceInput(this._textAreaState,c,this._OS===2);d.replacePrevCharCnt===0&&d.text.length===1&&(ni(d.text.charCodeAt(0))||d.text.charCodeAt(0)===127)||(this._textAreaState=c,(d.text!==""||d.replacePrevCharCnt!==0||d.replaceNextCharCnt!==0||d.positionDelta!==0)&&this._onType.fire(d))})),this._register(this._textArea.onCut(l=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(l),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(l=>{this._ensureClipboardGetsEditorSelection(l)})),this._register(this._textArea.onPaste(l=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),l.preventDefault(),!l.clipboardData)return;let[c,d]=LO.getTextData(l.clipboardData);c&&(d=d||L1.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:d}))})),this._register(this._textArea.onFocus(()=>{const l=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!l&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new It(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let e=0;return $(this._textArea.ownerDocument,"selectionchange",t=>{if(Sh.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const n=Date.now(),i=n-e;if(e=n,i<5)return;const o=n-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),o<100||!this._textAreaState.selection)return;const r=this._textArea.getValue();if(this._textAreaState.value!==r)return;const a=this._textArea.getSelectionStart(),l=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===a&&this._textAreaState.selectionEnd===l)return;const c=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(c[0],c[1],c[2]),h=this._textAreaState.deduceEditorPosition(l),u=this._host.deduceModelPosition(h[0],h[1],h[2]),f=new me(d.lineNumber,d.column,u.lineNumber,u.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeNativeTextAreaContent(e){!this._accessibilityService.isScreenReaderOptimized()&&e==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${e})`),this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),n={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};L1.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,`
`):t.text,n),e.preventDefault(),e.clipboardData&&LO.setTextData(e.clipboardData,t.text,t.html,n)}};kO=Xve([EV(4,xo),EV(5,Hi)],kO);const LO={getTextData(s){const e=s.getData(yn.text);let t=null;const n=s.getData("vscode-editor-data");if(typeof n=="string")try{t=JSON.parse(n),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&s.files.length>0?[Array.prototype.slice.call(s.files,0).map(o=>o.name).join(`
`),null]:[e,t]},setTextData(s,e,t,n){s.setData(yn.text,e),typeof t=="string"&&s.setData("text/html",t),s.setData("vscode-editor-data",JSON.stringify(n))}};class Jve extends F{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new nt(this._actual,"keydown")).event,this.onKeyUp=this._register(new nt(this._actual,"keyup")).event,this.onCompositionStart=this._register(new nt(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new nt(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new nt(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new nt(this._actual,"beforeinput")).event,this.onInput=this._register(new nt(this._actual,"input")).event,this.onCut=this._register(new nt(this._actual,"cut")).event,this.onCopy=this._register(new nt(this._actual,"copy")).event,this.onPaste=this._register(new nt(this._actual,"paste")).event,this.onFocus=this._register(new nt(this._actual,"focus")).event,this.onBlur=this._register(new nt(this._actual,"blur")).event,this._onSyntheticTap=this._register(new O),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>Sh.onKeyDown())),this._register(this.onBeforeInput(()=>Sh.onBeforeInput())),this._register(this.onInput(()=>Sh.onInput())),this._register(this.onKeyUp(()=>Sh.onKeyUp())),this._register($(this._actual,ex.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const e=Xg(this._actual);return e?e.activeElement===this._actual:this._actual.isConnected?Fi()===this._actual:!1}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const n=this._actual;n.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),n.value=t)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,n){const i=this._actual;let o=null;const r=Xg(i);r?o=r.activeElement:o=Fi();const a=Le(o),l=o===i,c=i.selectionStart,d=i.selectionEnd;if(l&&c===t&&d===n){Sr&&a.parent!==a&&i.focus();return}if(l){this.setIgnoreSelectionChangeTime("setSelectionRange"),i.setSelectionRange(t,n),Sr&&a.parent!==a&&i.focus();return}try{const h=Pse(i);this.setIgnoreSelectionChangeTime("setSelectionRange"),i.focus(),i.setSelectionRange(t,n),Ose(i,h)}catch{}}}class eCe extends IW{constructor(e,t,n){super(e,t,n),this._register(Ki.addTarget(this.viewHelper.linesContentDomNode)),this._register($(this.viewHelper.linesContentDomNode,Ft.Tap,o=>this.onTap(o))),this._register($(this.viewHelper.linesContentDomNode,Ft.Change,o=>this.onChange(o))),this._register($(this.viewHelper.linesContentDomNode,Ft.Contextmenu,o=>this._onContextMenu(new mu(o,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register($(this.viewHelper.linesContentDomNode,"pointerdown",o=>{const r=o.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const i=new Rve(this.viewHelper.viewDomNode);this._register(i.onPointerMove(this.viewHelper.viewDomNode,o=>this._onMouseMove(o))),this._register(i.onPointerUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(i.onPointerLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(i.onPointerDown(this.viewHelper.viewDomNode,(o,r)=>this._onMouseDown(o,r)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){const n=this._createMouseTarget(new mu(e,!1,this.viewHelper.viewDomNode),!1);n.position&&this.viewController.dispatchMouse({position:n.position,mouseColumn:n.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:n.type===6&&n.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}}class tCe extends IW{constructor(e,t,n){super(e,t,n),this._register(Ki.addTarget(this.viewHelper.linesContentDomNode)),this._register($(this.viewHelper.linesContentDomNode,Ft.Tap,i=>this.onTap(i))),this._register($(this.viewHelper.linesContentDomNode,Ft.Change,i=>this.onChange(i))),this._register($(this.viewHelper.linesContentDomNode,Ft.Contextmenu,i=>this._onContextMenu(new mu(i,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new mu(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const n=document.createEvent("CustomEvent");n.initEvent(ex.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class nCe extends F{constructor(e,t,n){super(),(Ua||xte&&Sj)&&H3.pointerEvents?this.handler=this._register(new eCe(e,t,n)):Et.TouchEvent?this.handler=this._register(new tCe(e,t,n)):this.handler=this._register(new IW(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}class Pm extends B0{}const aI=class aI extends Pm{constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new A(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const e=this._context.configuration.options;this._lineHeight=e.get(67);const t=e.get(68);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(96);const n=e.get(146);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){const t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){const t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new A(e,1));if(t.column!==1)return"";const n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){const i=Math.abs(this._lastCursorModelPosition.lineNumber-n);return i===0?'<span class="relative-current-line-number">'+n+"</span>":String(i)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===n||n%10===0)return String(n);const i=this._context.viewModel.getLineCount();return n===i?String(n):""}return String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}const t=Ds?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,o=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(c=>!!c.options.lineNumberClassName);o.sort((c,d)=>L.compareRangesUsingEnds(c.range,d.range));let r=0;const a=this._context.viewModel.getLineCount(),l=[];for(let c=n;c<=i;c++){const d=c-n;let h=this._getLineRenderLineNumber(c),u="";for(;r<o.length&&o[r].range.endLineNumber<c;)r++;for(let f=r;f<o.length;f++){const{range:g,options:p}=o[f];g.startLineNumber<=c&&(u+=" "+p.lineNumberClassName)}if(!h&&!u){l[d]="";continue}c===a&&this._context.viewModel.getLineLength(c)===0&&(this._renderFinalNewline==="off"&&(h=""),this._renderFinalNewline==="dimmed"&&(u+=" dimmed-line-number")),c===this._activeLineNumber&&(u+=" active-line-number"),l[d]=`<div class="${aI.CLASS_NAME}${t}${u}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${h}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};aI.CLASS_NAME="line-numbers";let tx=aI;Er((s,e)=>{const t=s.getColor(qfe),n=s.getColor(rge);n?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${n}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});const c_=class c_ extends Io{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(146);this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=Ct(document.createElement("div")),this._domNode.setClassName(c_.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Ct(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(c_.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);return this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);const n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}};c_.CLASS_NAME="glyph-margin",c_.OUTER_CLASS_NAME="margin";let nx=c_;const A_="monaco-mouse-cursor-text";var iCe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},NV=function(s,e){return function(t,n){e(t,n,s)}};class sCe{constructor(e,t,n,i,o){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=n,this.widthOfHiddenLineTextBefore=i,this.distanceToModelLineEnd=o,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new A(this.modelLineNumber,this.distanceToModelLineStart+1),n=new A(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const kR=Sr;let xO=class extends Io{constructor(e,t,n,i,o){super(e),this._keybindingService=i,this._instantiationService=o,this._primaryCursorPosition=new A(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=n,this._scrollLeft=0,this._scrollTop=0;const r=this._context.configuration.options,a=r.get(146);this._setAccessibilityOptions(r),this._contentLeft=a.contentLeft,this._contentWidth=a.contentWidth,this._contentHeight=a.height,this._fontInfo=r.get(50),this._lineHeight=r.get(67),this._emptySelectionClipboard=r.get(37),this._copyWithSyntaxHighlighting=r.get(25),this._visibleTextArea=null,this._selections=[new me(1,1,1,1)],this._modelSelections=[new me(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Ct(document.createElement("textarea")),Xa.write(this.textArea,7),this.textArea.setClassName(`inputarea ${A_}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:l}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${l*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(r)),this.textArea.setAttribute("aria-required",r.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(r.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",m("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",r.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=Ct(document.createElement("div")),this.textAreaCover.setPosition("absolute");const c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:u=>this._context.viewModel.getLineMaxColumn(u),getValueInRange:(u,f)=>this._context.viewModel.getValueInRange(u,f),getValueLengthInRange:(u,f)=>this._context.viewModel.getValueLengthInRange(u,f),modifyPosition:(u,f)=>this._context.viewModel.modifyPosition(u,f)},d={getDataToCopy:()=>{const u=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,Bi),f=this._context.viewModel.model.getEOL(),g=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),p=Array.isArray(u)?u:null,_=Array.isArray(u)?u.join(f):u;let b,v=null;if(SO.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&_.length<65536){const C=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);C&&(b=C.html,v=C.mode)}return{isFromEmptySelection:g,multicursorText:p,text:_,html:b,mode:v}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const u=this._selections[0];if(et&&u.isEmpty()){const g=u.getStartPosition();let p=this._getWordBeforePosition(g);if(p.length===0&&(p=this._getCharacterBeforePosition(g)),p.length>0)return new ss(p,p.length,p.length,L.fromPositions(g),0)}if(et&&!u.isEmpty()&&c.getValueLengthInRange(u,0)<500){const g=c.getValueInRange(u,0);return new ss(g,0,g.length,u,0)}if(md&&!u.isEmpty()){const g="vscode-placeholder";return new ss(g,0,g.length,null,void 0)}return ss.EMPTY}if(a8){const u=this._selections[0];if(u.isEmpty()){const f=u.getStartPosition(),[g,p]=this._getAndroidWordAtPosition(f);if(g.length>0)return new ss(g,p,p,L.fromPositions(f),0)}return ss.EMPTY}return Vp.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(u,f,g)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(u,f,g)},h=this._register(new Jve(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(kO,d,h,mo,{isAndroid:a8,isChrome:_0,isFirefox:Sr,isSafari:md})),this._register(this._textAreaInput.onKeyDown(u=>{this._viewController.emitKeyDown(u)})),this._register(this._textAreaInput.onKeyUp(u=>{this._viewController.emitKeyUp(u)})),this._register(this._textAreaInput.onPaste(u=>{let f=!1,g=null,p=null;u.metadata&&(f=this._emptySelectionClipboard&&!!u.metadata.isFromEmptySelection,g=typeof u.metadata.multicursorText<"u"?u.metadata.multicursorText:null,p=u.metadata.mode),this._viewController.paste(u.text,f,g,p)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(u=>{u.replacePrevCharCnt||u.replaceNextCharCnt||u.positionDelta?this._viewController.compositionType(u.text,u.replacePrevCharCnt,u.replaceNextCharCnt,u.positionDelta):this._viewController.type(u.text)})),this._register(this._textAreaInput.onSelectionChangeRequest(u=>{this._viewController.setSelection(u)})),this._register(this._textAreaInput.onCompositionStart(u=>{const f=this.textArea.domNode,g=this._modelSelections[0],{distanceToModelLineStart:p,widthOfHiddenTextBefore:_}=(()=>{const v=f.value.substring(0,Math.min(f.selectionStart,f.selectionEnd)),C=v.lastIndexOf(`
`),w=v.substring(C+1),y=w.lastIndexOf("	"),k=w.length-y-1,x=g.getStartPosition(),D=Math.min(x.column-1,k),N=x.column-1-D,W=w.substring(0,w.length-D),{tabSize:B}=this._context.viewModel.model.getOptions(),z=oCe(this.textArea.domNode.ownerDocument,W,this._fontInfo,B);return{distanceToModelLineStart:N,widthOfHiddenTextBefore:z}})(),{distanceToModelLineEnd:b}=(()=>{const v=f.value.substring(Math.max(f.selectionStart,f.selectionEnd)),C=v.indexOf(`
`),w=C===-1?v:v.substring(0,C),y=w.indexOf("	"),k=y===-1?w.length:w.length-y-1,x=g.getEndPosition(),D=Math.min(this._context.viewModel.model.getLineMaxColumn(x.lineNumber)-x.column,k);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(x.lineNumber)-x.column-D}})();this._context.viewModel.revealRange("keyboard",!0,L.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new sCe(this._context,g.startLineNumber,p,_,b),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${A_} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(u=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${A_}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(IC.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(e){this._textAreaInput.writeNativeTextAreaContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',n=this._context.viewModel.getLineContent(e.lineNumber),i=Lr(t,[]);let o=!0,r=e.column,a=!0,l=e.column,c=0;for(;c<50&&(o||a);){if(o&&r<=1&&(o=!1),o){const d=n.charCodeAt(r-2);i.get(d)!==0?o=!1:r--}if(a&&l>n.length&&(a=!1),a){const d=n.charCodeAt(l-1);i.get(d)!==0?a=!1:l++}c++}return[n.substring(r-1,l-1),e.column-r]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),n=Lr(this._context.configuration.options.get(132),[]);let i=e.column,o=0;for(;i>1;){const r=t.charCodeAt(i-2);if(n.get(r)!==0||o>50)return t.substring(i-1,e.column-1);o++,i--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const n=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!ni(n.charCodeAt(0)))return n}return""}_getAriaLabel(e){var n,i,o;if(e.get(2)===1){const r=(n=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))==null?void 0:n.getAriaLabel(),a=(i=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))==null?void 0:i.getAriaLabel(),l=(o=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))==null?void 0:o.getAriaLabel(),c=m("accessibilityModeOff","The editor is not accessible at this time.");return r?m("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",c,r):a?m("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",c,a):l?m("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",c,l):c}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);this._accessibilitySupport===2&&t===Ja.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const i=e.get(146).wrappingColumn;if(i!==-1&&this._accessibilitySupport!==1){const o=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(i*o.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=kR?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);this._setAccessibilityOptions(t),this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._contentHeight=n.height,this._fontInfo=t.get(50),this._lineHeight=t.get(67),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:i}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${i*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(125))),(e.hasChanged(34)||e.hasChanged(92))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!IC.enabled||e.get(34)&&e.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new A(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),(t=this._visibleTextArea)==null||t.prepareRender(e)}render(e){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const n=this._visibleTextArea.visibleTextareaStart,i=this._visibleTextArea.visibleTextareaEnd,o=this._visibleTextArea.startPosition,r=this._visibleTextArea.endPosition;if(o&&r&&n&&i&&i.left>=this._scrollLeft&&n.left<=this._scrollLeft+this._contentWidth){const a=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,l=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let c=this._visibleTextArea.widthOfHiddenLineTextBefore,d=this._contentLeft+n.left-this._scrollLeft,h=i.left-n.left+1;if(d<this._contentLeft){const b=this._contentLeft-d;d+=b,c+=b,h-=b}h>this._contentWidth&&(h=this._contentWidth);const u=this._context.viewModel.getViewLineData(o.lineNumber),f=u.tokens.findTokenIndexAtOffset(o.column-1),g=u.tokens.findTokenIndexAtOffset(r.column-1),p=f===g,_=this._visibleTextArea.definePresentation(p?u.tokens.getPresentation(f):null);this.textArea.domNode.scrollTop=l*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:a,left:d,width:h,height:this._lineHeight,useCover:!1,color:(mn.getColorMap()||[])[_.foreground],italic:_.italic,bold:_.bold,underline:_.underline,strikethrough:_.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const e=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(e<this._contentLeft||e>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(t<0||t>this._contentHeight){this._renderAtTopLeft();return}if(et||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const n=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=n*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:t,left:this._textAreaWrapping?this._contentLeft:e,width:this._textAreaWidth,height:kR?0:1,useCover:!1})}_newlinecount(e){let t=0,n=-1;do{if(n=e.indexOf(`
`,n+1),n===-1)break;t++}while(!0);return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:kR?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,n=this.textAreaCover;Ii(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?Z.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration(`${e.underline?" underline":""}${e.strikethrough?" line-through":""}`),n.setTop(e.useCover?e.top:0),n.setLeft(e.useCover?e.left:0),n.setWidth(e.useCover?e.width:0),n.setHeight(e.useCover?e.height:0);const i=this._context.configuration.options;i.get(57)?n.setClassName("monaco-editor-background textAreaCover "+nx.OUTER_CLASS_NAME):i.get(68).renderType!==0?n.setClassName("monaco-editor-background textAreaCover "+tx.CLASS_NAME):n.setClassName("monaco-editor-background textAreaCover")}};xO=iCe([NV(3,wt),NV(4,Ce)],xO);function oCe(s,e,t,n){if(e.length===0)return 0;const i=s.createElement("div");i.style.position="absolute",i.style.top="-50000px",i.style.width="50000px";const o=s.createElement("span");Ii(o,t),o.style.whiteSpace="pre",o.style.tabSize=`${n*t.spaceWidth}px`,o.append(e),i.appendChild(o),s.body.appendChild(i);const r=o.offsetWidth;return i.remove(),r}const rCe=()=>!0,aCe=()=>!1,lCe=s=>s===" "||s==="	";class rp{static shouldRecreate(e){return e.hasChanged(146)||e.hasChanged(132)||e.hasChanged(37)||e.hasChanged(77)||e.hasChanged(79)||e.hasChanged(80)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(129)||e.hasChanged(50)||e.hasChanged(92)||e.hasChanged(131)}constructor(e,t,n,i){this.languageConfigurationService=i,this._cursorMoveConfigurationBrand=void 0,this._languageId=e;const o=n.options,r=o.get(146),a=o.get(50);this.readOnly=o.get(92),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(117),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(r.height/this.lineHeight)-2),this.useTabStops=o.get(129),this.wordSeparators=o.get(132),this.emptySelectionClipboard=o.get(37),this.copyWithSyntaxHighlighting=o.get(25),this.multiCursorMergeOverlapping=o.get(77),this.multiCursorPaste=o.get(79),this.multiCursorLimit=o.get(80),this.autoClosingBrackets=o.get(6),this.autoClosingComments=o.get(7),this.autoClosingQuotes=o.get(11),this.autoClosingDelete=o.get(9),this.autoClosingOvertype=o.get(10),this.autoSurround=o.get(14),this.autoIndent=o.get(12),this.wordSegmenterLocales=o.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();const l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(const d of l)this.surroundingPairs[d.open]=d.close;const c=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=(c==null?void 0:c.blockCommentStartToken)??null}get electricChars(){var e;if(!this._electricChars){this._electricChars={};const t=(e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter)==null?void 0:e.getElectricCharacters();if(t)for(const n of t)this._electricChars[n]=!0}return this._electricChars}onElectricCharacter(e,t,n){const i=Tf(t,n-1),o=this.languageConfigurationService.getLanguageConfiguration(i.languageId).electricCharacter;return o?o.onElectricCharacter(e,i,n-i.firstCharOffset):null}normalizeIndentation(e){return j9(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,n){switch(t){case"beforeWhitespace":return lCe;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,n);case"always":return rCe;case"never":return aCe}}_getLanguageDefinedShouldAutoClose(e,t){const n=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return i=>n.indexOf(i)!==-1}visibleColumnFromColumn(e,t){return Gn.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){const i=Gn.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),o=e.getLineMinColumn(t);if(i<o)return o;const r=e.getLineMaxColumn(t);return i>r?r:i}}let ft=class uY{static fromModelState(e){return new cCe(e)}static fromViewState(e){return new dCe(e)}static fromModelSelection(e){const t=me.liftSelection(e),n=new Si(L.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return uY.fromModelState(n)}static fromModelSelections(e){const t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}constructor(e,t){this._cursorStateBrand=void 0,this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}};class cCe{constructor(e){this.modelState=e,this.viewState=null}}class dCe{constructor(e){this.modelState=null,this.viewState=e}}class Si{constructor(e,t,n,i,o){this.selectionStart=e,this.selectionStartKind=t,this.selectionStartLeftoverVisibleColumns=n,this.position=i,this.leftoverVisibleColumns=o,this._singleCursorStateBrand=void 0,this.selection=Si._computeSelection(this.selectionStart,this.position)}equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,i){return e?new Si(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new A(t,n),i):new Si(new L(t,n,t,n),0,i,new A(t,n),i)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?me.fromPositions(e.getStartPosition(),t):me.fromPositions(e.getEndPosition(),t)}}class Zs{constructor(e,t,n){this._editOperationResultBrand=void 0,this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}}function pu(s){return s==="'"||s==='"'||s==="`"}class vf{static columnSelect(e,t,n,i,o,r){const a=Math.abs(o-n)+1,l=n>o,c=i>r,d=i<r,h=[];for(let u=0;u<a;u++){const f=n+(l?-u:u),g=e.columnFromVisibleColumn(t,f,i),p=e.columnFromVisibleColumn(t,f,r),_=e.visibleColumnFromColumn(t,new A(f,g)),b=e.visibleColumnFromColumn(t,new A(f,p));d&&(_>r||b<i)||c&&(b>i||_<r)||h.push(new Si(new L(f,g,f,g),0,0,new A(f,p),0))}if(h.length===0)for(let u=0;u<a;u++){const f=n+(l?-u:u),g=t.getLineMaxColumn(f);h.push(new Si(new L(f,g,f,g),0,0,new A(f,g),0))}return{viewStates:h,reversed:l,fromLineNumber:n,fromVisualColumn:i,toLineNumber:o,toVisualColumn:r}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,vf.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0;const o=Math.min(n.fromViewLineNumber,n.toViewLineNumber),r=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=o;l<=r;l++){const c=t.getLineMaxColumn(l),d=e.visibleColumnFromColumn(t,new A(l,c));i=Math.max(i,d)}let a=n.toViewVisualColumn;return a<i&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,i){const o=i?e.pageSize:1,r=Math.max(1,n.toViewLineNumber-o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){const o=i?e.pageSize:1,r=Math.min(t.getLineCount(),n.toViewLineNumber+o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,r,n.toViewVisualColumn)}}class Oi{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return me.fromPositions(i.getEndPosition())}}class hCe{constructor(e,t){this._range=e,this._text=t}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return me.fromRange(i,0)}}class JS{constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return me.fromPositions(i.getStartPosition())}}class ix{constructor(e,t,n,i,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return me.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}class TW{constructor(e,t,n,i=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=i,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}class LR{constructor(e,t,n){this._cursorPositionBrand=void 0,this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}}class St{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-Yj(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){const n=t.lineNumber-1;return new A(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){const i=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),r=k1.atomicPosition(o,t.column-1,n,0);if(r!==-1&&r+1>=i)return new A(t.lineNumber,r+1)}return this.leftPosition(e,t)}static left(e,t,n){const i=e.stickyTabStops?St.leftPositionAtomicSoftTabs(t,n,e.tabSize):St.leftPosition(t,n);return new LR(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,o){let r,a;if(n.hasSelection()&&!i)r=n.selection.startLineNumber,a=n.selection.startColumn;else{const l=n.position.delta(void 0,-(o-1)),c=t.normalizePosition(St.clipPositionColumn(l,t),0),d=St.left(e,t,c);r=d.lineNumber,a=d.column}return n.move(i,r,a,0)}static clipPositionColumn(e,t){return new A(e.lineNumber,St.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+F3(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new A(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,o){if(n<e.getLineIndentColumn(t)){const r=e.getLineContent(t),a=k1.atomicPosition(r,n-1,i,1);if(a!==-1)return new A(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){const i=e.stickyTabStops?St.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):St.rightPosition(t,n.lineNumber,n.column);return new LR(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,o){let r,a;if(n.hasSelection()&&!i)r=n.selection.endLineNumber,a=n.selection.endColumn;else{const l=n.position.delta(void 0,o-1),c=t.normalizePosition(St.clipPositionColumn(l,t),1),d=St.right(e,t,c);r=d.lineNumber,a=d.column}return n.move(i,r,a,0)}static vertical(e,t,n,i,o,r,a,l){const c=Gn.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+o,d=t.getLineCount(),h=n===1&&i===1,u=n===d&&i===t.getLineMaxColumn(n),f=r<n?h:u;if(n=r,n<1?(n=1,a?i=t.getLineMinColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):n>d?(n=d,a?i=t.getLineMaxColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):i=e.columnFromVisibleColumn(t,n,c),f?o=0:o=c-Gn.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),l!==void 0){const g=new A(n,i),p=t.normalizePosition(g,l);o=o+(i-p.column),n=p.lineNumber,i=p.column}return new LR(n,i,o)}static down(e,t,n,i,o,r,a){return this.vertical(e,t,n,i,o,n+r,a,4)}static moveDown(e,t,n,i,o){let r,a;n.hasSelection()&&!i?(r=n.selection.endLineNumber,a=n.selection.endColumn):(r=n.position.lineNumber,a=n.position.column);let l=0,c;do if(c=St.down(e,t,r+l,a,n.leftoverVisibleColumns,o,!0),t.normalizePosition(new A(c.lineNumber,c.column),2).lineNumber>r)break;while(l++<10&&r+l<t.getLineCount());return n.move(i,c.lineNumber,c.column,c.leftoverVisibleColumns)}static translateDown(e,t,n){const i=n.selection,o=St.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=St.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new Si(new L(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new A(r.lineNumber,r.column),r.leftoverVisibleColumns)}static up(e,t,n,i,o,r,a){return this.vertical(e,t,n,i,o,n-r,a,3)}static moveUp(e,t,n,i,o){let r,a;n.hasSelection()&&!i?(r=n.selection.startLineNumber,a=n.selection.startColumn):(r=n.position.lineNumber,a=n.position.column);const l=St.up(e,t,r,a,n.leftoverVisibleColumns,o,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){const i=n.selection,o=St.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),r=St.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new Si(new L(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new A(r.lineNumber,r.column),r.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,i){let o=n.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return n.move(i,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,n,i){const o=t.getLineCount();let r=n.position.lineNumber;for(;r<o&&this._isBlankLine(t,r);)r++;for(;r<o&&!this._isBlankLine(t,r);)r++;return n.move(i,r,t.getLineMinColumn(r),0)}static moveToBeginningOfLine(e,t,n,i){const o=n.position.lineNumber,r=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||r;let l;return n.position.column===a?l=r:l=a,n.move(i,o,l,0)}static moveToEndOfLine(e,t,n,i,o){const r=n.position.lineNumber,a=t.getLineMaxColumn(r);return n.move(i,r,a,o?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){const o=t.getLineCount(),r=t.getLineMaxColumn(o);return n.move(i,o,r,0)}}class lm{static deleteRight(e,t,n,i){const o=[];let r=e!==3;for(let a=0,l=i.length;a<l;a++){const c=i[a];let d=c;if(d.isEmpty()){const h=c.getPosition(),u=St.right(t,n,h);d=new L(u.lineNumber,u.column,h.lineNumber,h.column)}if(d.isEmpty()){o[a]=null;continue}d.startLineNumber!==d.endLineNumber&&(r=!0),o[a]=new Oi(d,"")}return[r,o]}static isAutoClosingPairDelete(e,t,n,i,o,r,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,c=r.length;l<c;l++){const d=r[l],h=d.getPosition();if(!d.isEmpty())return!1;const u=o.getLineContent(h.lineNumber);if(h.column<2||h.column>=u.length+1)return!1;const f=u.charAt(h.column-2),g=i.get(f);if(!g)return!1;if(pu(f)){if(n==="never")return!1}else if(t==="never")return!1;const p=u.charAt(h.column-1);let _=!1;for(const b of g)b.open===f&&b.close===p&&(_=!0);if(!_)return!1;if(e==="auto"){let b=!1;for(let v=0,C=a.length;v<C;v++){const w=a[v];if(h.lineNumber===w.startLineNumber&&h.column===w.startColumn){b=!0;break}}if(!b)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){const i=[];for(let o=0,r=n.length;o<r;o++){const a=n[o].getPosition(),l=new L(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[o]=new Oi(l,"")}return[!0,i]}static deleteLeft(e,t,n,i,o){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,o))return this._runAutoClosingPairDelete(t,n,i);const r=[];let a=e!==2;for(let l=0,c=i.length;l<c;l++){const d=lm.getDeleteRange(i[l],n,t);if(d.isEmpty()){r[l]=null;continue}d.startLineNumber!==d.endLineNumber&&(a=!0),r[l]=new Oi(d,"")}return[a,r]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;const i=e.getPosition();if(n.useTabStops&&i.column>1){const o=t.getLineContent(i.lineNumber),r=ds(o),a=r===-1?o.length+1:r+1;if(i.column<=a){const l=n.visibleColumnFromColumn(t,i),c=Gn.prevIndentTabStop(l,n.indentSize),d=n.columnFromVisibleColumn(t,i.lineNumber,c);return new L(i.lineNumber,d,i.lineNumber,i.column)}}return L.fromPositions(lm.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){const n=xie(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){const n=e.lineNumber-1;return new A(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){const i=[];let o=null;n.sort((r,a)=>A.compare(r.getStartPosition(),a.getEndPosition()));for(let r=0,a=n.length;r<a;r++){const l=n[r];if(l.isEmpty())if(e.emptySelectionClipboard){const c=l.getPosition();let d,h,u,f;c.lineNumber<t.getLineCount()?(d=c.lineNumber,h=1,u=c.lineNumber+1,f=1):c.lineNumber>1&&(o==null?void 0:o.endLineNumber)!==c.lineNumber?(d=c.lineNumber-1,h=t.getLineMaxColumn(c.lineNumber-1),u=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber)):(d=c.lineNumber,h=1,u=c.lineNumber,f=t.getLineMaxColumn(c.lineNumber));const g=new L(d,h,u,f);o=g,g.isEmpty()?i[r]=null:i[r]=new Oi(g,"")}else i[r]=null;else i[r]=new Oi(l,"")}return new Zs(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class vt{static _createWord(e,t,n,i,o){return{start:i,end:o,wordType:t,nextCharClass:n}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0;const o=t.findPrevIntlWordBeforeOrAtOffset(e,n.column-2);for(let r=n.column-2;r>=0;r--){const a=e.charCodeAt(r),l=t.get(a);if(o&&r===o.index)return this._createIntlWord(o,l);if(l===0){if(i===2)return this._createWord(e,i,l,r+1,this._findEndOfWord(e,t,i,r+1));i=1}else if(l===2){if(i===1)return this._createWord(e,i,l,r+1,this._findEndOfWord(e,t,i,r+1));i=2}else if(l===1&&i!==0)return this._createWord(e,i,l,r+1,this._findEndOfWord(e,t,i,r+1))}return i!==0?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){const o=t.findNextIntlWordAtOrAfterOffset(e,i),r=e.length;for(let a=i;a<r;a++){const l=e.charCodeAt(a),c=t.get(l);if(o&&a===o.index+o.segment.length||c===1||n===1&&c===2||n===2&&c===0)return a}return r}static _findNextWordOnLine(e,t,n){const i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0;const o=e.length,r=t.findNextIntlWordAtOrAfterOffset(e,n.column-1);for(let a=n.column-1;a<o;a++){const l=e.charCodeAt(a),c=t.get(l);if(r&&a===r.index)return this._createIntlWord(r,c);if(c===0){if(i===2)return this._createWord(e,i,c,this._findStartOfWord(e,t,i,a-1),a);i=1}else if(c===2){if(i===1)return this._createWord(e,i,c,this._findStartOfWord(e,t,i,a-1),a);i=2}else if(c===1&&i!==0)return this._createWord(e,i,c,this._findStartOfWord(e,t,i,a-1),a)}return i!==0?this._createWord(e,i,1,this._findStartOfWord(e,t,i,o-1),o):null}static _findStartOfWord(e,t,n,i){const o=t.findPrevIntlWordBeforeOrAtOffset(e,i);for(let r=i;r>=0;r--){const a=e.charCodeAt(r),l=t.get(a);if(o&&r===o.index)return r;if(l===1||n===1&&l===2||n===2&&l===0)return r+1}return 0}static moveWordLeft(e,t,n,i,o){let r=n.lineNumber,a=n.column;a===1&&r>1&&(r=r-1,a=t.getLineMaxColumn(r));let l=vt._findPreviousWordOnLine(e,t,new A(r,a));if(i===0)return new A(r,l?l.start+1:1);if(i===1)return!o&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=vt._findPreviousWordOnLine(e,t,new A(r,l.start+1))),new A(r,l?l.start+1:1);if(i===3){for(;l&&l.wordType===2;)l=vt._findPreviousWordOnLine(e,t,new A(r,l.start+1));return new A(r,l?l.start+1:1)}return l&&a<=l.end+1&&(l=vt._findPreviousWordOnLine(e,t,new A(r,l.start+1))),new A(r,l?l.end+1:1)}static _moveWordPartLeft(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===1)return n>1?new A(n-1,e.getLineMaxColumn(n-1)):t;const o=e.getLineContent(n);for(let r=t.column-1;r>1;r--){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a===95&&l!==95)return new A(n,r);if(a===45&&l!==45)return new A(n,r);if((ph(a)||_y(a))&&Il(l))return new A(n,r);if(Il(a)&&Il(l)&&r+1<i){const c=o.charCodeAt(r);if(ph(c)||_y(c))return new A(n,r)}}return new A(n,1)}static moveWordRight(e,t,n,i){let o=n.lineNumber,r=n.column,a=!1;r===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,r=1);let l=vt._findNextWordOnLine(e,t,new A(o,r));if(i===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=vt._findNextWordOnLine(e,t,new A(o,l.end+1))),l?r=l.end+1:r=t.getLineMaxColumn(o);else if(i===3){for(a&&(r=0);l&&(l.wordType===2||l.start+1<=r);)l=vt._findNextWordOnLine(e,t,new A(o,l.end+1));l?r=l.start+1:r=t.getLineMaxColumn(o)}else l&&!a&&r>=l.start+1&&(l=vt._findNextWordOnLine(e,t,new A(o,l.end+1))),l?r=l.start+1:r=t.getLineMaxColumn(o);return new A(o,r)}static _moveWordPartRight(e,t){const n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new A(n+1,1):t;const o=e.getLineContent(n);for(let r=t.column+1;r<i;r++){const a=o.charCodeAt(r-2),l=o.charCodeAt(r-1);if(a!==95&&l===95)return new A(n,r);if(a!==45&&l===45)return new A(n,r);if((ph(a)||_y(a))&&Il(l))return new A(n,r);if(Il(a)&&Il(l)&&r+1<i){const c=o.charCodeAt(r);if(ph(c)||_y(c))return new A(n,r)}}return new A(n,i)}static _deleteWordLeftWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-2,o=Ba(n,i);return o+1<i?new L(t.lineNumber,o+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){const n=e.wordSeparators,i=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(lm.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){const h=e.selection.getPosition();return new L(h.lineNumber,h.column-1,h.lineNumber,h.column+1)}const a=new A(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,c=a.column;if(l===1&&c===1)return null;if(r){const h=this._deleteWordLeftWhitespace(i,a);if(h)return h}let d=vt._findPreviousWordOnLine(n,i,a);return t===0?d?c=d.start+1:c>1?c=1:(l--,c=i.getLineMaxColumn(l)):(d&&c<=d.end+1&&(d=vt._findPreviousWordOnLine(n,i,new A(l,d.start+1))),d?c=d.end+1:c>1?c=1:(l--,c=i.getLineMaxColumn(l))),new L(l,c,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;const i=new A(n.positionLineNumber,n.positionColumn),o=this._deleteInsideWordWhitespace(t,i);return o||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){const n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=n.length;if(i===0)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,o))return null;let r=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,r))return null;for(;o>0&&this._charAtIsWhitespace(n,o-1);)o--;for(;r+1<i&&this._charAtIsWhitespace(n,r+1);)r++;return new L(t.lineNumber,o+1,t.lineNumber,r+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){const i=t.getLineContent(n.lineNumber),o=i.length;if(o===0)return n.lineNumber>1?new L(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new L(n.lineNumber,1,n.lineNumber+1,1):new L(n.lineNumber,1,n.lineNumber,1);const r=h=>h.start+1<=n.column&&n.column<=h.end+1,a=(h,u)=>(h=Math.min(h,n.column),u=Math.max(u,n.column),new L(n.lineNumber,h,n.lineNumber,u)),l=h=>{let u=h.start+1,f=h.end+1,g=!1;for(;f-1<o&&this._charAtIsWhitespace(i,f-1);)g=!0,f++;if(!g)for(;u>1&&this._charAtIsWhitespace(i,u-2);)u--;return a(u,f)},c=vt._findPreviousWordOnLine(e,t,n);if(c&&r(c))return l(c);const d=vt._findNextWordOnLine(e,t,n);return d&&r(d)?l(d):c&&d?a(c.end+1,d.start+1):c?a(c.start+1,c.end+1):d?a(d.start+1,d.end+1):a(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=vt._moveWordPartLeft(e,n);return new L(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){const n=e.length;for(let i=t;i<n;i++){const o=e.charAt(i);if(o!==" "&&o!=="	")return i}return n}static _deleteWordRightWhitespace(e,t){const n=e.getLineContent(t.lineNumber),i=t.column-1,o=this._findFirstNonWhitespaceChar(n,i);return i+1<o?new L(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){const n=e.wordSeparators,i=e.model,o=e.selection,r=e.whitespaceHeuristics;if(!o.isEmpty())return o;const a=new A(o.positionLineNumber,o.positionColumn);let l=a.lineNumber,c=a.column;const d=i.getLineCount(),h=i.getLineMaxColumn(l);if(l===d&&c===h)return null;if(r){const f=this._deleteWordRightWhitespace(i,a);if(f)return f}let u=vt._findNextWordOnLine(n,i,a);return t===2?u?c=u.end+1:c<h||l===d?c=h:(l++,u=vt._findNextWordOnLine(n,i,new A(l,1)),u?c=u.start+1:c=i.getLineMaxColumn(l)):(u&&c>=u.start+1&&(u=vt._findNextWordOnLine(n,i,new A(l,u.end+1))),u?c=u.start+1:c<h||l===d?c=h:(l++,u=vt._findNextWordOnLine(n,i,new A(l,1)),u?c=u.start+1:c=i.getLineMaxColumn(l))),new L(l,c,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;const n=t.getPosition(),i=vt._moveWordPartRight(e,n);return new L(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){const i=new L(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n,i){const o=Lr(t,n),r=vt._findPreviousWordOnLine(o,e,i);if(r&&r.wordType===1&&r.start<=i.column-1&&i.column-1<=r.end)return vt._createWordAtPosition(e,i.lineNumber,r);const a=vt._findNextWordOnLine(o,e,i);return a&&a.wordType===1&&a.start<=i.column-1&&i.column-1<=a.end?vt._createWordAtPosition(e,i.lineNumber,a):null}static word(e,t,n,i,o){const r=Lr(e.wordSeparators,e.wordSegmenterLocales),a=vt._findPreviousWordOnLine(r,t,o),l=vt._findNextWordOnLine(r,t,o);if(!i){let f,g;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(f=a.start+1,g=a.end+1):l&&l.wordType===1&&l.start<=o.column-1&&o.column-1<=l.end?(f=l.start+1,g=l.end+1):(a?f=a.end+1:f=1,l?g=l.start+1:g=t.getLineMaxColumn(o.lineNumber)),new Si(new L(o.lineNumber,f,o.lineNumber,g),1,0,new A(o.lineNumber,g),0)}let c,d;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(c=a.start+1,d=a.end+1):l&&l.wordType===1&&l.start<o.column-1&&o.column-1<l.end?(c=l.start+1,d=l.end+1):(c=o.column,d=o.column);const h=o.lineNumber;let u;if(n.selectionStart.containsPosition(o))u=n.selectionStart.endColumn;else if(o.isBeforeOrEqual(n.selectionStart.getStartPosition())){u=c;const f=new A(h,u);n.selectionStart.containsPosition(f)&&(u=n.selectionStart.endColumn)}else{u=d;const f=new A(h,u);n.selectionStart.containsPosition(f)&&(u=n.selectionStart.startColumn)}return n.move(!0,h,u,0)}}class _E extends vt{static deleteWordPartLeft(e){const t=Zy([vt.deleteWordLeft(e,0),vt.deleteWordLeft(e,2),vt._deleteWordPartLeft(e.model,e.selection)]);return t.sort(L.compareRangesUsingEnds),t[2]}static deleteWordPartRight(e){const t=Zy([vt.deleteWordRight(e,0),vt.deleteWordRight(e,2),vt._deleteWordPartRight(e.model,e.selection)]);return t.sort(L.compareRangesUsingStarts),t[0]}static moveWordPartLeft(e,t,n,i){const o=Zy([vt.moveWordLeft(e,t,n,0,i),vt.moveWordLeft(e,t,n,2,i),vt._moveWordPartLeft(t,n)]);return o.sort(A.compare),o[2]}static moveWordPartRight(e,t,n){const i=Zy([vt.moveWordRight(e,t,n,0),vt.moveWordRight(e,t,n,2),vt._moveWordPartRight(t,n)]);return i.sort(A.compare),i[0]}}function Zy(s){return s.filter(e=>!!e)}class yi{static addCursorDown(e,t,n){const i=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];i[o++]=new ft(l.modelState,l.viewState),n?i[o++]=ft.fromModelState(St.translateDown(e.cursorConfig,e.model,l.modelState)):i[o++]=ft.fromViewState(St.translateDown(e.cursorConfig,e,l.viewState))}return i}static addCursorUp(e,t,n){const i=[];let o=0;for(let r=0,a=t.length;r<a;r++){const l=t[r];i[o++]=new ft(l.modelState,l.viewState),n?i[o++]=ft.fromModelState(St.translateUp(e.cursorConfig,e.model,l.modelState)):i[o++]=ft.fromViewState(St.translateUp(e.cursorConfig,e,l.viewState))}return i}static moveToBeginningOfLine(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];i[o]=this._moveToLineStart(e,a,n)}return i}static _moveToLineStart(e,t,n){const i=t.viewState.position.column,o=t.modelState.position.column,r=i===o,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!r&&!(i===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return ft.fromViewState(St.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return ft.fromModelState(St.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=this._moveToLineEnd(e,l,n,i)}return o}static _moveToLineEnd(e,t,n,i){const o=t.viewState.position,r=e.getLineMaxColumn(o.lineNumber),a=o.column===r,l=t.modelState.position,c=e.model.getLineMaxColumn(l.lineNumber),d=r-o.column===c-l.column;return a||d?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return ft.fromViewState(St.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return ft.fromModelState(St.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){const n=[];for(let i=0,o=t.length;i<o;i++){const r=t[i],a=r.modelState.selection.startLineNumber,l=e.model.getLineCount();let c=r.modelState.selection.endLineNumber,d;c===l?d=e.model.getLineMaxColumn(l):(c++,d=1),n[i]=ft.fromModelState(new Si(new L(a,1,a,1),0,0,new A(c,d),0))}return n}static moveToBeginningOfBuffer(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];i[o]=ft.fromModelState(St.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o];i[o]=ft.fromModelState(St.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static selectAll(e,t){const n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return ft.fromModelState(new Si(new L(1,1,1,1),0,0,new A(n,i),0))}static line(e,t,n,i,o){const r=e.model.validatePosition(i),a=o?e.coordinatesConverter.validateViewPosition(new A(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);if(!n){const c=e.model.getLineCount();let d=r.lineNumber+1,h=1;return d>c&&(d=c,h=e.model.getLineMaxColumn(d)),ft.fromModelState(new Si(new L(r.lineNumber,1,d,h),2,0,new A(d,h),0))}const l=t.modelState.selectionStart.getStartPosition().lineNumber;if(r.lineNumber<l)return ft.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(r.lineNumber>l){const c=e.getLineCount();let d=a.lineNumber+1,h=1;return d>c&&(d=c,h=e.getLineMaxColumn(d)),ft.fromViewState(t.viewState.move(!0,d,h,0))}else{const c=t.modelState.selectionStart.getEndPosition();return ft.fromModelState(t.modelState.move(!0,c.lineNumber,c.column,0))}}static word(e,t,n,i){const o=e.model.validatePosition(i);return ft.fromModelState(vt.word(e.cursorConfig,e.model,t.modelState,n,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new ft(t.modelState,t.viewState);const n=t.viewState.position.lineNumber,i=t.viewState.position.column;return ft.fromViewState(new Si(new L(n,i,n,i),0,0,new A(n,i),0))}static moveTo(e,t,n,i,o){if(n){if(t.modelState.selectionStartKind===1)return this.word(e,t,n,i);if(t.modelState.selectionStartKind===2)return this.line(e,t,n,i,o)}const r=e.model.validatePosition(i),a=o?e.coordinatesConverter.validateViewPosition(new A(o.lineNumber,o.column),r):e.coordinatesConverter.convertModelPositionToViewPosition(r);return ft.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,i,o,r){switch(n){case 0:return r===4?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,o);case 1:return r===4?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,o);case 2:return r===2?this._moveUpByViewLines(e,t,i,o):this._moveUpByModelLines(e,t,i,o);case 3:return r===2?this._moveDownByViewLines(e,t,i,o):this._moveDownByModelLines(e,t,i,o);case 4:return r===2?t.map(a=>ft.fromViewState(St.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>ft.fromModelState(St.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 5:return r===2?t.map(a=>ft.fromViewState(St.moveToNextBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>ft.fromModelState(St.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,i)));case 6:return this._moveToViewMinColumn(e,t,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case 8:return this._moveToViewCenterColumn(e,t,i);case 9:return this._moveToViewMaxColumn(e,t,i);case 10:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,o){const r=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(r);switch(n){case 11:{const l=this._firstLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,c)]}case 13:{const l=this._lastLineNumberInRange(e.model,a,o),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,c)]}case 12:{const l=Math.round((a.startLineNumber+a.endLineNumber)/2),c=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,c)]}case 14:{const l=[];for(let c=0,d=t.length;c<d;c++){const h=t[c];l[c]=this.findPositionInViewportIfOutside(e,h,r,i)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){const o=t.viewState.position.lineNumber;if(n.startLineNumber<=o&&o<=n.endLineNumber-1)return new ft(t.modelState,t.viewState);{let r;o>n.endLineNumber-1?r=n.endLineNumber-1:o<n.startLineNumber?r=n.startLineNumber:r=o;const a=St.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,r,!1);return ft.fromViewState(t.viewState.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map(o=>ft.fromViewState(St.moveLeft(e.cursorConfig,e,o.viewState,n,i)))}static _moveHalfLineLeft(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);i[o]=ft.fromViewState(St.moveLeft(e.cursorConfig,e,a.viewState,n,c))}return i}static _moveRight(e,t,n,i){return t.map(o=>ft.fromViewState(St.moveRight(e.cursorConfig,e,o.viewState,n,i)))}static _moveHalfLineRight(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round(e.getLineLength(l)/2);i[o]=ft.fromViewState(St.moveRight(e.cursorConfig,e,a.viewState,n,c))}return i}static _moveDownByViewLines(e,t,n,i){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=ft.fromViewState(St.moveDown(e.cursorConfig,e,l.viewState,n,i))}return o}static _moveDownByModelLines(e,t,n,i){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=ft.fromModelState(St.moveDown(e.cursorConfig,e.model,l.modelState,n,i))}return o}static _moveUpByViewLines(e,t,n,i){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=ft.fromViewState(St.moveUp(e.cursorConfig,e,l.viewState,n,i))}return o}static _moveUpByModelLines(e,t,n,i){const o=[];for(let r=0,a=t.length;r<a;r++){const l=t[r];o[r]=ft.fromModelState(St.moveUp(e.cursorConfig,e.model,l.modelState,n,i))}return o}static _moveToViewPosition(e,t,n,i,o){return ft.fromViewState(t.viewState.move(n,i,o,0))}static _moveToModelPosition(e,t,n,i,o){return ft.fromModelState(t.modelState.move(n,i,o,0))}static _moveToViewMinColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMinColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineFirstNonWhitespaceColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewCenterColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);i[o]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewMaxColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineMaxColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,c)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.viewState.position.lineNumber,c=e.getLineLastNonWhitespaceColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,c)}return i}}var sx;(function(s){const e=function(n){if(!fi(n))return!1;const i=n;return!(!qs(i.to)||!ls(i.select)&&!pj(i.select)||!ls(i.by)&&!qs(i.by)||!ls(i.value)&&!tu(i.value))};s.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},s.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},s.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function t(n){if(!n.to)return null;let i;switch(n.to){case s.RawDirection.Left:i=0;break;case s.RawDirection.Right:i=1;break;case s.RawDirection.Up:i=2;break;case s.RawDirection.Down:i=3;break;case s.RawDirection.PrevBlankLine:i=4;break;case s.RawDirection.NextBlankLine:i=5;break;case s.RawDirection.WrappedLineStart:i=6;break;case s.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case s.RawDirection.WrappedLineColumnCenter:i=8;break;case s.RawDirection.WrappedLineEnd:i=9;break;case s.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case s.RawDirection.ViewPortTop:i=11;break;case s.RawDirection.ViewPortBottom:i=13;break;case s.RawDirection.ViewPortCenter:i=12;break;case s.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let o=0;switch(n.by){case s.RawUnit.Line:o=1;break;case s.RawUnit.WrappedLine:o=2;break;case s.RawUnit.Character:o=3;break;case s.RawUnit.HalfLine:o=4;break}return{direction:i,unit:o,select:!!n.select,value:n.value||1}}s.parse=t})(sx||(sx={}));class EW{constructor(e,t,n){this._indentRulesSupport=t,this._indentationLineProcessor=new fY(e,n)}shouldIncrease(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(n)}shouldDecrease(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(n)}shouldIgnore(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(n)}shouldIndentNextLine(e,t){const n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(n)}}class NW{constructor(e,t){this.model=e,this.indentationLineProcessor=new fY(e,t)}getProcessedTokenContextAroundRange(e){const t=this._getProcessedTokensBeforeRange(e),n=this._getProcessedTokensAfterRange(e),i=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:n,previousLineProcessedTokens:i}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);const t=this.model.tokenization.getLineTokens(e.startLineNumber),n=Tf(t,e.startColumn-1);let i;if(RW(this.model,e.getStartPosition())){const r=e.startColumn-1-n.firstCharOffset,a=n.firstCharOffset,l=a+r;i=t.sliceAndInflate(a,l,0)}else{const r=e.startColumn-1;i=t.sliceAndInflate(0,r,0)}return this.indentationLineProcessor.getProcessedTokens(i)}_getProcessedTokensAfterRange(e){const t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);const n=this.model.tokenization.getLineTokens(t.lineNumber),i=Tf(n,t.column-1),o=t.column-1-i.firstCharOffset,r=i.firstCharOffset+o,a=i.firstCharOffset+i.getLineLength(),l=n.sliceAndInflate(r,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){const t=f=>{this.model.tokenization.forceTokenization(f);const g=this.model.tokenization.getLineTokens(f),p=this.model.getLineMaxColumn(f)-1;return Tf(g,p)};this.model.tokenization.forceTokenization(e.startLineNumber);const n=this.model.tokenization.getLineTokens(e.startLineNumber),i=Tf(n,e.startColumn-1),o=_i.createEmpty("",i.languageIdCodec),r=e.startLineNumber-1;if(r===0||!(i.firstCharOffset===0))return o;const c=t(r);if(!(i.languageId===c.languageId))return o;const h=c.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(h)}}class fY{constructor(e,t){this.model=e,this.languageConfigurationService=t}getProcessedLine(e,t){var r,a;const n=(l,c)=>{const d=Rt(l);return c+l.substring(d.length)};(a=(r=this.model.tokenization).forceTokenization)==null||a.call(r,e);const i=this.model.tokenization.getLineTokens(e);let o=this.getProcessedTokens(i).getLineContent();return t!==void 0&&(o=n(o,t)),o}getProcessedTokens(e){const t=l=>l===2||l===3||l===1,n=e.getLanguageId(0),o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew.getBracketRegExp({global:!0}),r=[];return e.forEach(l=>{const c=e.getStandardTokenType(l);let d=e.getTokenText(l);t(c)&&(d=d.replace(o,""));const h=e.getMetadata(l);r.push({text:d,metadata:h})}),_i.createFromTextAndMetadata(r,e.languageIdCodec)}}function RW(s,e){s.tokenization.forceTokenization(e.lineNumber);const t=s.tokenization.getLineTokens(e.lineNumber),n=Tf(t,e.column-1),i=n.firstCharOffset===0,o=t.getLanguageId(0)===n.languageId;return!i&&!o}function P_(s,e,t,n){e.tokenization.forceTokenization(t.startLineNumber);const i=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=n.getLanguageConfiguration(i);if(!o)return null;const a=new NW(e,n).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),c=a.beforeRangeProcessedTokens.getLineContent(),d=a.afterRangeProcessedTokens.getLineContent(),h=o.onEnter(s,l,c,d);if(!h)return null;const u=h.indentAction;let f=h.appendText;const g=h.removeText||0;f?u===Vn.Indent&&(f="	"+f):u===Vn.Indent||u===Vn.IndentOutdent?f="	":f="";let p=Gq(e,t.startLineNumber,t.startColumn);return g&&(p=p.substring(0,p.length-g)),{indentAction:u,appendText:f,removeText:g,indentation:p}}var uCe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},fCe=function(s,e){return function(t,n){e(t,n,s)}},ek;const xR=Object.create(null);function zu(s,e){if(e<=0)return"";xR[s]||(xR[s]=["",s]);const t=xR[s];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+s;return t[e]}let Dr=ek=class{static unshiftIndent(e,t,n,i,o){const r=Gn.visibleColumnFromColumn(e,t,n);if(o){const a=zu(" ",i),c=Gn.prevIndentTabStop(r,i)/i;return zu(a,c)}else{const a="	",c=Gn.prevRenderTabStop(r,n)/n;return zu(a,c)}}static shiftIndent(e,t,n,i,o){const r=Gn.visibleColumnFromColumn(e,t,n);if(o){const a=zu(" ",i),c=Gn.nextIndentTabStop(r,i)/i;return zu(a,c)}else{const a="	",c=Gn.nextRenderTabStop(r,n)/n;return zu(a,c)}}constructor(e,t,n){this._languageConfigurationService=n,this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){const n=this._selection.startLineNumber;let i=this._selection.endLineNumber;this._selection.endColumn===1&&n!==i&&(i=i-1);const{tabSize:o,indentSize:r,insertSpaces:a}=this._opts,l=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let c=0,d=0;for(let h=n;h<=i;h++,c=d){d=0;const u=e.getLineContent(h);let f=ds(u);if(this._opts.isUnshift&&(u.length===0||f===0)||!l&&!this._opts.isUnshift&&u.length===0)continue;if(f===-1&&(f=u.length),h>1&&Gn.visibleColumnFromColumn(u,f+1,o)%r!==0&&e.tokenization.isCheapToTokenize(h-1)){const _=P_(this._opts.autoIndent,e,new L(h-1,e.getLineMaxColumn(h-1),h-1,e.getLineMaxColumn(h-1)),this._languageConfigurationService);if(_){if(d=c,_.appendText)for(let b=0,v=_.appendText.length;b<v&&d<r&&_.appendText.charCodeAt(b)===32;b++)d++;_.removeText&&(d=Math.max(0,d-_.removeText));for(let b=0;b<d&&!(f===0||u.charCodeAt(f-1)!==32);b++)f--}}if(this._opts.isUnshift&&f===0)continue;let g;this._opts.isUnshift?g=ek.unshiftIndent(u,f+1,o,r,a):g=ek.shiftIndent(u,f+1,o,r,a),this._addEditOperation(t,new L(h,1,h,f+1),g),h===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=f+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const c=a?zu(" ",r):"	";for(let d=n;d<=i;d++){const h=e.getLineContent(d);let u=ds(h);if(!(this._opts.isUnshift&&(h.length===0||u===0))&&!(!l&&!this._opts.isUnshift&&h.length===0)&&(u===-1&&(u=h.length),!(this._opts.isUnshift&&u===0)))if(this._opts.isUnshift){u=Math.min(u,r);for(let f=0;f<u;f++)if(h.charCodeAt(f)===9){u=f+1;break}this._addEditOperation(t,new L(d,1,d,u+1),"")}else this._addEditOperation(t,new L(d,1,d,1),c),d===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){const i=t.getInverseEditOperations()[0];return new me(i.range.endLineNumber,i.range.endColumn,i.range.endLineNumber,i.range.endColumn)}const n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const i=this._selection.startColumn;return n.startColumn<=i?n:n.getDirection()===0?new me(n.startLineNumber,i,n.endLineNumber,n.endColumn):new me(n.endLineNumber,n.endColumn,n.startLineNumber,i)}return n}};Dr=ek=uCe([fCe(2,cn)],Dr);class gCe{constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new L(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new L(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){const n=t.getInverseEditOperations(),i=n[0].range,o=n[1].range;return new me(i.endLineNumber,i.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}}class mCe{constructor(e,t,n){this._position=e,this._text=t,this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new L(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return new me(i.endLineNumber,i.startColumn,i.endLineNumber,i.endColumn-this._charAfter.length)}}function pCe(s,e,t){const n=s.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let i,o=-1;for(i=e-1;i>=1;i--){if(s.tokenization.getLanguageIdAtPosition(i,0)!==n)return o;const r=s.getLineContent(i);if(t.shouldIgnore(i)||/^\s+$/.test(r)||r===""){o=i;continue}return i}}return-1}function x1(s,e,t,n=!0,i){if(s<4)return null;const o=i.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!o)return null;const r=new EW(e,o,i);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};const a=pCe(e,t,r);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(r.shouldIncrease(a)||r.shouldIndentNextLine(a)){const l=e.getLineContent(a);return{indentation:Rt(l),action:Vn.Indent,line:a}}else if(r.shouldDecrease(a)){const l=e.getLineContent(a);return{indentation:Rt(l),action:null,line:a}}else{if(a===1)return{indentation:Rt(e.getLineContent(a)),action:null,line:a};const l=a-1,c=o.getIndentMetadata(e.getLineContent(l));if(!(c&3)&&c&4){let d=0;for(let h=l-1;h>0;h--)if(!r.shouldIndentNextLine(h)){d=h;break}return{indentation:Rt(e.getLineContent(d+1)),action:null,line:d+1}}if(n)return{indentation:Rt(e.getLineContent(a)),action:null,line:a};for(let d=a;d>0;d--){if(r.shouldIncrease(d))return{indentation:Rt(e.getLineContent(d)),action:Vn.Indent,line:d};if(r.shouldIndentNextLine(d)){let h=0;for(let u=d-1;u>0;u--)if(!r.shouldIndentNextLine(d)){h=u;break}return{indentation:Rt(e.getLineContent(h+1)),action:null,line:h+1}}else if(r.shouldDecrease(d))return{indentation:Rt(e.getLineContent(d)),action:null,line:d}}return{indentation:Rt(e.getLineContent(1)),action:null,line:1}}}function $C(s,e,t,n,i,o){if(s<4)return null;const r=o.getLanguageConfiguration(t);if(!r)return null;const a=o.getLanguageConfiguration(t).indentRulesSupport;if(!a)return null;const l=new EW(e,a,o),c=x1(s,e,n,void 0,o);if(c){const d=c.line;if(d!==void 0){let h=!0;for(let u=d;u<n-1;u++)if(!/^\s*$/.test(e.getLineContent(u))){h=!1;break}if(h){const u=r.onEnter(s,"",e.getLineContent(d),"");if(u){let f=Rt(e.getLineContent(d));return u.removeText&&(f=f.substring(0,f.length-u.removeText)),u.indentAction===Vn.Indent||u.indentAction===Vn.IndentOutdent?f=i.shiftIndent(f):u.indentAction===Vn.Outdent&&(f=i.unshiftIndent(f)),l.shouldDecrease(n)&&(f=i.unshiftIndent(f)),u.appendText&&(f+=u.appendText),Rt(f)}}}return l.shouldDecrease(n)?c.action===Vn.Indent?c.indentation:i.unshiftIndent(c.indentation):c.action===Vn.Indent?i.shiftIndent(c.indentation):c.indentation}return null}function _Ce(s,e,t,n,i){if(s<4)return null;const o=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),r=i.getLanguageConfiguration(o).indentRulesSupport;if(!r)return null;e.tokenization.forceTokenization(t.startLineNumber);const l=new NW(e,i).getProcessedTokenContextAroundRange(t),c=l.afterRangeProcessedTokens,d=l.beforeRangeProcessedTokens,h=Rt(d.getLineContent()),u=vCe(e,t.startLineNumber,d),f=RW(e,t.getStartPosition()),g=e.getLineContent(t.startLineNumber),p=Rt(g),_=x1(s,u,t.startLineNumber+1,void 0,i);if(!_){const v=f?p:h;return{beforeEnter:v,afterEnter:v}}let b=f?p:_.indentation;return _.action===Vn.Indent&&(b=n.shiftIndent(b)),r.shouldDecrease(c.getLineContent())&&(b=n.unshiftIndent(b)),{beforeEnter:f?p:h,afterEnter:b}}function bCe(s,e,t,n,i,o){const r=s.autoIndent;if(r<4||RW(e,t.getStartPosition()))return null;const l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),c=o.getLanguageConfiguration(l).indentRulesSupport;if(!c)return null;const h=new NW(e,o).getProcessedTokenContextAroundRange(t),u=h.beforeRangeProcessedTokens.getLineContent(),f=h.afterRangeProcessedTokens.getLineContent(),g=u+f,p=u+n+f;if(!c.shouldDecrease(g)&&c.shouldDecrease(p)){const b=x1(r,e,t.startLineNumber,!1,o);if(!b)return null;let v=b.indentation;return b.action!==Vn.Indent&&(v=i.unshiftIndent(v)),v}const _=t.startLineNumber-1;if(_>0){const b=e.getLineContent(_);if(c.shouldIndentNextLine(b)&&c.shouldIncrease(p)){const v=x1(r,e,t.startLineNumber,!1,o),C=v==null?void 0:v.indentation;if(C!==void 0){const w=e.getLineContent(t.startLineNumber),y=Rt(w),x=i.shiftIndent(C)===y,D=/^\s*$/.test(g),N=s.autoClosingPairs.autoClosingPairsOpenByEnd.get(n),B=N&&N.length>0&&D;if(x&&B)return C}}}return null}function gY(s,e,t){const n=t.getLanguageConfiguration(s.getLanguageId()).indentRulesSupport;return!n||e<1||e>s.getLineCount()?null:n.getIndentMetadata(s.getLineContent(e))}function vCe(s,e,t){return{tokenization:{getLineTokens:i=>i===e?t:s.tokenization.getLineTokens(i),getLanguageId:()=>s.getLanguageId(),getLanguageIdAtPosition:(i,o)=>s.getLanguageIdAtPosition(i,o)},getLineContent:i=>i===e?t.getLineContent():s.getLineContent(i)}}class CCe{static getEdits(e,t,n,i,o){if(!o&&this._isAutoIndentType(e,t,n)){const r=[];for(const l of n){const c=this._findActualIndentationForSelection(e,t,l,i);if(c===null)return;r.push({selection:l,indentation:c})}const a=DO.getAutoClosingPairClose(e,t,n,i,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,r,i,a)}}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,o=n.length;i<o;i++)if(!t.tokenization.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,n,i){const o=bCe(e,t,n,i,{shiftIndent:a=>PW(e,a),unshiftIndent:a=>ox(e,a)},e.languageConfigurationService);if(o===null)return null;const r=Gq(t,n.startLineNumber,n.startColumn);return o===e.normalizeIndentation(r)?null:o}static _getIndentationAndAutoClosingPairEdits(e,t,n,i,o){const r=n.map(({selection:l,indentation:c})=>{if(o!==null){const d=this._getEditFromIndentationAndSelection(e,t,c,l,i,!1);return new NCe(d,l,i,o)}else{const d=this._getEditFromIndentationAndSelection(e,t,c,l,i,!0);return ef(d.range,d.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new Zs(4,r,a)}static _getEditFromIndentationAndSelection(e,t,n,i,o,r=!0){const a=i.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a);let c=e.normalizeIndentation(n);if(l!==0){const h=t.getLineContent(a);c+=h.substring(l-1,i.startColumn-1)}return c+=r?o:"",{range:new L(a,1,i.endLineNumber,i.endColumn),text:c}}}class wCe{static getEdits(e,t,n,i,o,r){if(mY(t,n,i,o,r))return this._runAutoClosingOvertype(e,i,r)}static _runAutoClosingOvertype(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const l=t[o].getPosition(),c=new L(l.lineNumber,l.column,l.lineNumber,l.column+1);i[o]=new Oi(c,n)}return new Zs(4,i,{shouldPushStackElementBefore:vE(e,4),shouldPushStackElementAfter:!1})}}class yCe{static getEdits(e,t,n,i,o){if(mY(e,t,n,i,o)){const r=n.map(a=>new Oi(new L(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new Zs(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}class DO{static getEdits(e,t,n,i,o,r){if(!r){const a=this.getAutoClosingPairClose(e,t,n,i,o);if(a!==null)return this._runAutoClosingOpenCharType(n,i,o,a)}}static _runAutoClosingOpenCharType(e,t,n,i){const o=[];for(let r=0,a=e.length;r<a;r++){const l=e[r];o[r]=new ECe(l,t,!n,i)}return new Zs(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,n,i,o){for(const g of n)if(!g.isEmpty())return null;const r=n.map(g=>{const p=g.getPosition();return o?{lineNumber:p.lineNumber,beforeColumn:p.column-i.length,afterColumn:p.column}:{lineNumber:p.lineNumber,beforeColumn:p.column,afterColumn:p.column}}),a=this._findAutoClosingPairOpen(e,t,r.map(g=>new A(g.lineNumber,g.beforeColumn)),i);if(!a)return null;let l,c;if(pu(i)?(l=e.autoClosingQuotes,c=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,c=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,c=e.shouldAutoCloseBefore.bracket),l==="never")return null;const h=this._findContainedAutoClosingPair(e,a),u=h?h.close:"";let f=!0;for(const g of r){const{lineNumber:p,beforeColumn:_,afterColumn:b}=g,v=t.getLineContent(p),C=v.substring(0,_-1),w=v.substring(b-1);if(w.startsWith(u)||(f=!1),w.length>0){const D=w.charAt(0);if(!this._isBeforeClosingBrace(e,w)&&!c(D))return null}if(a.open.length===1&&(i==="'"||i==='"')&&l!=="always"){const D=Lr(e.wordSeparators,[]);if(C.length>0){const N=C.charCodeAt(C.length-1);if(D.get(N)===0)return null}}if(!t.tokenization.isCheapToTokenize(p))return null;t.tokenization.forceTokenization(p);const y=t.tokenization.getLineTokens(p),k=Tf(y,_-1);if(!a.shouldAutoClose(k,_-k.firstCharOffset))return null;const x=a.findNeutralCharacter();if(x){const D=t.tokenization.getTokenTypeIfInsertingCharacter(p,_,x);if(!a.isOK(D))return null}}return f?a.close.substring(0,a.close.length-u.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;const n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[];let o=null;for(const r of i)r.open!==t.open&&t.open.includes(r.open)&&t.close.endsWith(r.close)&&(!o||r.open.length>o.open.length)&&(o=r);return o}static _findAutoClosingPairOpen(e,t,n,i){const o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!o)return null;let r=null;for(const a of o)if(r===null||a.open.length>r.open.length){let l=!0;for(const c of n)if(t.getValueInRange(new L(c.lineNumber,c.column-a.open.length+1,c.lineNumber,c.column))+i!==a.open){l=!1;break}l&&(r=a)}return r}static _isBeforeClosingBrace(e,t){const n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],r=i.some(l=>t.startsWith(l.open)),a=o.some(l=>t.startsWith(l.close));return!r&&a}}class SCe{static getEdits(e,t,n,i,o){if(!o&&this._isSurroundSelectionType(e,t,n,i))return this._runSurroundSelectionType(e,n,i)}static _runSurroundSelectionType(e,t,n){const i=[];for(let o=0,r=t.length;o<r;o++){const a=t[o],l=e.surroundingPairs[n];i[o]=new gCe(a,n,l)}return new Zs(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,n,i){if(!pY(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;const o=pu(i);for(const r of n){if(r.isEmpty())return!1;let a=!0;for(let l=r.startLineNumber;l<=r.endLineNumber;l++){const c=t.getLineContent(l),d=l===r.startLineNumber?r.startColumn-1:0,h=l===r.endLineNumber?r.endColumn-1:c.length,u=c.substring(d,h);if(/[^ \t]/.test(u)){a=!1;break}}if(a)return!1;if(o&&r.startLineNumber===r.endLineNumber&&r.startColumn+1===r.endColumn){const l=t.getValueInRange(r);if(pu(l))return!1}}return!0}}class kCe{static getEdits(e,t,n,i,o,r){if(!r&&this._isTypeInterceptorElectricChar(t,n,i)){const a=this._typeInterceptorElectricChar(e,t,n,i[0],o);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,i,o){if(!t.electricChars.hasOwnProperty(o)||!i.isEmpty())return null;const r=i.getPosition();n.tokenization.forceTokenization(r.lineNumber);const a=n.tokenization.getLineTokens(r.lineNumber);let l;try{l=t.onElectricCharacter(o,a,r.column)}catch(c){return Pe(c),null}if(!l)return null;if(l.matchOpenBracket){const c=(a.getLineContent()+o).lastIndexOf(l.matchOpenBracket)+1,d=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:r.lineNumber,column:c},500);if(d){if(d.startLineNumber===r.lineNumber)return null;const h=n.getLineContent(d.startLineNumber),u=Rt(h),f=t.normalizeIndentation(u),g=n.getLineContent(r.lineNumber),p=n.getLineFirstNonWhitespaceColumn(r.lineNumber)||r.column,_=g.substring(p-1,r.column-1),b=f+_+o,v=new L(r.lineNumber,1,r.lineNumber,r.column),C=new Oi(v,b);return new Zs(AW(b,e),[C],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}class LCe{static getEdits(e,t,n){const i=[];for(let r=0,a=t.length;r<a;r++)i[r]=new Oi(t[r],n);const o=AW(n,e);return new Zs(o,i,{shouldPushStackElementBefore:vE(e,o),shouldPushStackElementAfter:!1})}}class bE{static getEdits(e,t,n,i,o){if(!o&&i===`
`){const r=[];for(let a=0,l=n.length;a<l;a++)r[a]=this._enter(e,t,!1,n[a]);return new Zs(4,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,n,i){if(e.autoIndent===0)return ef(i,`
`,n);if(!t.tokenization.isCheapToTokenize(i.getStartPosition().lineNumber)||e.autoIndent===1){const l=t.getLineContent(i.startLineNumber),c=Rt(l).substring(0,i.startColumn-1);return ef(i,`
`+e.normalizeIndentation(c),n)}const o=P_(e.autoIndent,t,i,e.languageConfigurationService);if(o){if(o.indentAction===Vn.None)return ef(i,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===Vn.Indent)return ef(i,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===Vn.IndentOutdent){const l=e.normalizeIndentation(o.indentation),c=e.normalizeIndentation(o.indentation+o.appendText),d=`
`+c+`
`+l;return n?new JS(i,d,!0):new ix(i,d,-1,c.length-l.length,!0)}else if(o.indentAction===Vn.Outdent){const l=ox(e,o.indentation);return ef(i,`
`+e.normalizeIndentation(l+o.appendText),n)}}const r=t.getLineContent(i.startLineNumber),a=Rt(r).substring(0,i.startColumn-1);if(e.autoIndent>=4){const l=_Ce(e.autoIndent,t,i,{unshiftIndent:c=>ox(e,c),shiftIndent:c=>PW(e,c),normalizeIndentation:c=>e.normalizeIndentation(c)},e.languageConfigurationService);if(l){let c=e.visibleColumnFromColumn(t,i.getEndPosition());const d=i.endColumn,h=t.getLineContent(i.endLineNumber),u=ds(h);if(u>=0?i=i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,u+1)):i=i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new JS(i,`
`+e.normalizeIndentation(l.afterEnter),!0);{let f=0;return d<=u+1&&(e.insertSpaces||(c=Math.ceil(c/e.indentSize)),f=Math.min(c+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new ix(i,`
`+e.normalizeIndentation(l.afterEnter),0,f,!0)}}}return ef(i,`
`+e.normalizeIndentation(a),n)}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];const i=[];for(let o=0,r=n.length;o<r;o++){let a=n[o].positionLineNumber;if(a===1)i[o]=new JS(new L(1,1,1,1),`
`);else{a--;const l=t.getLineMaxColumn(a);i[o]=this._enter(e,t,!1,new L(a,l,a,l))}}return i}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];const i=[];for(let o=0,r=n.length;o<r;o++){const a=n[o].positionLineNumber,l=t.getLineMaxColumn(a);i[o]=this._enter(e,t,!1,new L(a,l,a,l))}return i}static lineBreakInsert(e,t,n){const i=[];for(let o=0,r=n.length;o<r;o++)i[o]=this._enter(e,t,!0,n[o]);return i}}class xCe{static getEdits(e,t,n,i,o,r){const a=this._distributePasteToCursors(e,n,i,o,r);return a?(n=n.sort(L.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,i,o)}static _distributePasteToCursors(e,t,n,i,o){if(i||t.length===1)return null;if(o&&o.length===t.length)return o;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substring(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substring(0,n.length-1));const r=tc(n);if(r.length===t.length)return r}return null}static _distributedPaste(e,t,n,i){const o=[];for(let r=0,a=n.length;r<a;r++)o[r]=new Oi(n[r],i[r]);return new Zs(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,o){const r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a],d=c.getPosition();if(o&&!c.isEmpty()&&(o=!1),o&&i.indexOf(`
`)!==i.length-1&&(o=!1),o){const h=new L(d.lineNumber,1,d.lineNumber,1);r[a]=new TW(h,i,c,!0)}else r[a]=new Oi(c,i)}return new Zs(0,r,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}class DCe{static getEdits(e,t,n,i,o,r,a,l){const c=i.map(d=>this._compositionType(n,d,o,r,a,l));return new Zs(4,c,{shouldPushStackElementBefore:vE(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,o,r){if(!t.isEmpty())return null;const a=t.getPosition(),l=Math.max(1,a.column-i),c=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),d=new L(a.lineNumber,l,a.lineNumber,c);return e.getValueInRange(d)===n&&r===0?null:new ix(d,n,0,r)}}class ICe{static getEdits(e,t,n){const i=[];for(let r=0,a=t.length;r<a;r++)i[r]=new Oi(t[r],n);const o=AW(n,e);return new Zs(o,i,{shouldPushStackElementBefore:vE(e,o),shouldPushStackElementAfter:!1})}}class TCe{static getCommands(e,t,n){const i=[];for(let o=0,r=n.length;o<r;o++){const a=n[o];if(a.isEmpty()){const l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let c=this._goodIndentForLine(e,t,a.startLineNumber);c=c||"	";const d=e.normalizeIndentation(c);if(!l.startsWith(d)){i[o]=new Oi(new L(a.startLineNumber,1,a.startLineNumber,l.length+1),d,!0);continue}}i[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){const l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){i[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[o]=new Dr(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return i}static _goodIndentForLine(e,t,n){let i=null,o="";const r=x1(e.autoIndent,t,n,!1,e.languageConfigurationService);if(r)i=r.action,o=r.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){const d=t.getLineContent(a);if(Ba(d)>=0)break}if(a<1)return null;const l=t.getLineMaxColumn(a),c=P_(e.autoIndent,t,new L(a,l,a,l),e.languageConfigurationService);c&&(o=c.indentation+c.appendText)}return i&&(i===Vn.Indent&&(o=PW(e,o)),i===Vn.Outdent&&(o=ox(e,o)),o=e.normalizeIndentation(o)),o||null}static _replaceJumpToNextIndent(e,t,n,i){let o="";const r=n.getStartPosition();if(e.insertSpaces){const a=e.visibleColumnFromColumn(t,r),l=e.indentSize,c=l-a%l;for(let d=0;d<c;d++)o+=" "}else o="	";return new Oi(n,o,i)}}class MW extends ix{constructor(e,t,n,i,o,r){super(e,t,n,i),this._openCharacter=o,this._closeCharacter=r,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,n){return this.closeCharacterRange=new L(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new L(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,n)}}class ECe extends MW{constructor(e,t,n,i){const o=(n?t:"")+i,r=0,a=-i.length;super(e,o,r,a,t,i)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,i,t)}}class NCe extends MW{constructor(e,t,n,i){const o=n+i,r=0,a=n.length;super(t,o,r,a,n,i),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:o}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length!==2)throw new Error("There should be two inverse edit operations!");const i=n[0].range,o=n[1].range,r=i.plusRange(o);return this._computeCursorStateWithRange(e,r,t)}}function AW(s,e){return s===" "?e===5||e===6?6:5:4}function vE(s,e){return MV(s)&&!MV(e)?!0:s===5?!1:RV(s)!==RV(e)}function RV(s){return s===6||s===5?"space":s}function MV(s){return s===4||s===5||s===6}function mY(s,e,t,n,i){if(s.autoClosingOvertype==="never"||!s.autoClosingPairs.autoClosingPairsCloseSingleChar.has(i))return!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(!a.isEmpty())return!1;const l=a.getPosition(),c=e.getLineContent(l.lineNumber);if(c.charAt(l.column-1)!==i)return!1;const h=pu(i);if((l.column>2?c.charCodeAt(l.column-2):0)===92&&h)return!1;if(s.autoClosingOvertype==="auto"){let f=!1;for(let g=0,p=n.length;g<p;g++){const _=n[g];if(l.lineNumber===_.startLineNumber&&l.column===_.startColumn){f=!0;break}}if(!f)return!1}}return!0}function ef(s,e,t){return t?new JS(s,e,!0):new Oi(s,e,!0)}function PW(s,e,t){return t=t||1,Dr.shiftIndent(e,e.length+t,s.tabSize,s.indentSize,s.insertSpaces)}function ox(s,e,t){return t=t||1,Dr.unshiftIndent(e,e.length+t,s.tabSize,s.indentSize,s.insertSpaces)}function pY(s,e){return pu(e)?s.autoSurround==="quotes"||s.autoSurround==="languageDefined":s.autoSurround==="brackets"||s.autoSurround==="languageDefined"}class hh{static indent(e,t,n){if(t===null||n===null)return[];const i=[];for(let o=0,r=n.length;o<r;o++)i[o]=new Dr(n[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static outdent(e,t,n){const i=[];for(let o=0,r=n.length;o<r;o++)i[o]=new Dr(n[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static paste(e,t,n,i,o,r){return xCe.getEdits(e,t,n,i,o,r)}static tab(e,t,n){return TCe.getCommands(e,t,n)}static compositionType(e,t,n,i,o,r,a,l){return DCe.getEdits(e,t,n,i,o,r,a,l)}static compositionEndWithInterceptors(e,t,n,i,o,r){if(!i)return null;let a=null;for(const u of i)if(a===null)a=u.insertedText;else if(a!==u.insertedText)return null;if(!a||a.length!==1)return null;const l=a;let c=!1;for(const u of i)if(u.deletedText.length!==0){c=!0;break}if(c){if(!pY(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;const u=pu(l);for(const p of i)if(p.deletedSelectionStart!==0||p.deletedSelectionEnd!==p.deletedText.length||/^[ \t]+$/.test(p.deletedText)||u&&pu(p.deletedText))return null;const f=[];for(const p of o){if(!p.isEmpty())return null;f.push(p.getPosition())}if(f.length!==i.length)return null;const g=[];for(let p=0,_=f.length;p<_;p++)g.push(new mCe(f[p],i[p].deletedText,t.surroundingPairs[l]));return new Zs(4,g,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const d=yCe.getEdits(t,n,o,r,l);if(d!==void 0)return d;const h=DO.getEdits(t,n,o,l,!0,!1);return h!==void 0?h:null}static typeWithInterceptors(e,t,n,i,o,r,a){const l=bE.getEdits(n,i,o,a,e);if(l!==void 0)return l;const c=CCe.getEdits(n,i,o,a,e);if(c!==void 0)return c;const d=wCe.getEdits(t,n,i,o,r,a);if(d!==void 0)return d;const h=DO.getEdits(n,i,o,a,!1,e);if(h!==void 0)return h;const u=SCe.getEdits(n,i,o,a,e);if(u!==void 0)return u;const f=kCe.getEdits(t,n,i,o,a,e);return f!==void 0?f:LCe.getEdits(t,o,a)}static typeWithoutInterceptors(e,t,n,i,o){return ICe.getEdits(e,i,o)}}class RCe{constructor(e,t,n,i,o,r){this.deletedText=e,this.deletedSelectionStart=t,this.deletedSelectionEnd=n,this.insertedText=i,this.insertedSelectionStart=o,this.insertedSelectionEnd=r}}var I;(function(s){s.editorSimpleInput=new le("editorSimpleInput",!1,!0),s.editorTextFocus=new le("editorTextFocus",!1,m("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),s.focus=new le("editorFocus",!1,m("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),s.textInputFocus=new le("textInputFocus",!1,m("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),s.readOnly=new le("editorReadonly",!1,m("editorReadonly","Whether the editor is read-only")),s.inDiffEditor=new le("inDiffEditor",!1,m("inDiffEditor","Whether the context is a diff editor")),s.isEmbeddedDiffEditor=new le("isEmbeddedDiffEditor",!1,m("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),s.inMultiDiffEditor=new le("inMultiDiffEditor",!1,m("inMultiDiffEditor","Whether the context is a multi diff editor")),s.multiDiffEditorAllCollapsed=new le("multiDiffEditorAllCollapsed",void 0,m("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),s.hasChanges=new le("diffEditorHasChanges",!1,m("diffEditorHasChanges","Whether the diff editor has changes")),s.comparingMovedCode=new le("comparingMovedCode",!1,m("comparingMovedCode","Whether a moved code block is selected for comparison")),s.accessibleDiffViewerVisible=new le("accessibleDiffViewerVisible",!1,m("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),s.diffEditorRenderSideBySideInlineBreakpointReached=new le("diffEditorRenderSideBySideInlineBreakpointReached",!1,m("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),s.diffEditorInlineMode=new le("diffEditorInlineMode",!1,m("diffEditorInlineMode","Whether inline mode is active")),s.diffEditorOriginalWritable=new le("diffEditorOriginalWritable",!1,m("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),s.diffEditorModifiedWritable=new le("diffEditorModifiedWritable",!1,m("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),s.diffEditorOriginalUri=new le("diffEditorOriginalUri","",m("diffEditorOriginalUri","The uri of the original document")),s.diffEditorModifiedUri=new le("diffEditorModifiedUri","",m("diffEditorModifiedUri","The uri of the modified document")),s.columnSelection=new le("editorColumnSelection",!1,m("editorColumnSelection","Whether `editor.columnSelection` is enabled")),s.writable=s.readOnly.toNegated(),s.hasNonEmptySelection=new le("editorHasSelection",!1,m("editorHasSelection","Whether the editor has text selected")),s.hasOnlyEmptySelection=s.hasNonEmptySelection.toNegated(),s.hasMultipleSelections=new le("editorHasMultipleSelections",!1,m("editorHasMultipleSelections","Whether the editor has multiple selections")),s.hasSingleSelection=s.hasMultipleSelections.toNegated(),s.tabMovesFocus=new le("editorTabMovesFocus",!1,m("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),s.tabDoesNotMoveFocus=s.tabMovesFocus.toNegated(),s.isInEmbeddedEditor=new le("isInEmbeddedEditor",!1,!0),s.canUndo=new le("canUndo",!1,!0),s.canRedo=new le("canRedo",!1,!0),s.hoverVisible=new le("editorHoverVisible",!1,m("editorHoverVisible","Whether the editor hover is visible")),s.hoverFocused=new le("editorHoverFocused",!1,m("editorHoverFocused","Whether the editor hover is focused")),s.stickyScrollFocused=new le("stickyScrollFocused",!1,m("stickyScrollFocused","Whether the sticky scroll is focused")),s.stickyScrollVisible=new le("stickyScrollVisible",!1,m("stickyScrollVisible","Whether the sticky scroll is visible")),s.standaloneColorPickerVisible=new le("standaloneColorPickerVisible",!1,m("standaloneColorPickerVisible","Whether the standalone color picker is visible")),s.standaloneColorPickerFocused=new le("standaloneColorPickerFocused",!1,m("standaloneColorPickerFocused","Whether the standalone color picker is focused")),s.inCompositeEditor=new le("inCompositeEditor",void 0,m("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),s.notInCompositeEditor=s.inCompositeEditor.toNegated(),s.languageId=new le("editorLangId","",m("editorLangId","The language identifier of the editor")),s.hasCompletionItemProvider=new le("editorHasCompletionItemProvider",!1,m("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),s.hasCodeActionsProvider=new le("editorHasCodeActionsProvider",!1,m("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),s.hasCodeLensProvider=new le("editorHasCodeLensProvider",!1,m("editorHasCodeLensProvider","Whether the editor has a code lens provider")),s.hasDefinitionProvider=new le("editorHasDefinitionProvider",!1,m("editorHasDefinitionProvider","Whether the editor has a definition provider")),s.hasDeclarationProvider=new le("editorHasDeclarationProvider",!1,m("editorHasDeclarationProvider","Whether the editor has a declaration provider")),s.hasImplementationProvider=new le("editorHasImplementationProvider",!1,m("editorHasImplementationProvider","Whether the editor has an implementation provider")),s.hasTypeDefinitionProvider=new le("editorHasTypeDefinitionProvider",!1,m("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),s.hasHoverProvider=new le("editorHasHoverProvider",!1,m("editorHasHoverProvider","Whether the editor has a hover provider")),s.hasDocumentHighlightProvider=new le("editorHasDocumentHighlightProvider",!1,m("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),s.hasDocumentSymbolProvider=new le("editorHasDocumentSymbolProvider",!1,m("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),s.hasReferenceProvider=new le("editorHasReferenceProvider",!1,m("editorHasReferenceProvider","Whether the editor has a reference provider")),s.hasRenameProvider=new le("editorHasRenameProvider",!1,m("editorHasRenameProvider","Whether the editor has a rename provider")),s.hasSignatureHelpProvider=new le("editorHasSignatureHelpProvider",!1,m("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),s.hasInlayHintsProvider=new le("editorHasInlayHintsProvider",!1,m("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),s.hasDocumentFormattingProvider=new le("editorHasDocumentFormattingProvider",!1,m("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),s.hasDocumentSelectionFormattingProvider=new le("editorHasDocumentSelectionFormattingProvider",!1,m("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),s.hasMultipleDocumentFormattingProvider=new le("editorHasMultipleDocumentFormattingProvider",!1,m("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),s.hasMultipleDocumentSelectionFormattingProvider=new le("editorHasMultipleDocumentSelectionFormattingProvider",!1,m("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))})(I||(I={}));const bt=0;class Cn extends Zn{runEditorCommand(e,t,n){const i=t._getViewModel();i&&this.runCoreEditorCommand(i,n||{})}}var Ri;(function(s){const e=function(n){if(!fi(n))return!1;const i=n;return!(!qs(i.to)||!ls(i.by)&&!qs(i.by)||!ls(i.value)&&!tu(i.value)||!ls(i.revealCursor)&&!pj(i.revealCursor))};s.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:e,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},s.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},s.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function t(n){let i;switch(n.to){case s.RawDirection.Up:i=1;break;case s.RawDirection.Right:i=2;break;case s.RawDirection.Down:i=3;break;case s.RawDirection.Left:i=4;break;default:return null}let o;switch(n.by){case s.RawUnit.Line:o=1;break;case s.RawUnit.WrappedLine:o=2;break;case s.RawUnit.Page:o=3;break;case s.RawUnit.HalfPage:o=4;break;case s.RawUnit.Editor:o=5;break;case s.RawUnit.Column:o=6;break;default:o=2}const r=Math.floor(n.value||1),a=!!n.revealCursor;return{direction:i,unit:o,value:r,revealCursor:a,select:!!n.select}}s.parse=t})(Ri||(Ri={}));var zp;(function(s){const e=function(t){if(!fi(t))return!1;const n=t;return!(!tu(n.lineNumber)&&!qs(n.lineNumber)||!ls(n.at)&&!qs(n.at))};s.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:e,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},s.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(zp||(zp={}));class IO{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(mt).getFocusedCodeEditor();return i&&i.hasTextFocus()?this._runEditorCommand(t,i,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{const i=Fi();return i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0?(this.runDOMCommand(i),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{const i=t.get(mt).getActiveCodeEditor();return i?(i.focus(),this._runEditorCommand(t,i,n)):!1})}_runEditorCommand(e,t,n){const i=this.runEditorCommand(e,t,n);return i||!0}}var li;(function(s){class e extends Cn{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){if(!C.position)return;v.model.pushStackElement(),v.setCursorStates(C.source,3,[yi.moveTo(v,v.getPrimaryCursorState(),this._inSelectionMode,C.position,C.viewPosition)])&&C.revealType!==2&&v.revealAllCursors(C.source,!0,!0)}}s.MoveTo=oe(new e({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),s.MoveToSelect=oe(new e({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class t extends Cn{runCoreEditorCommand(v,C){v.model.pushStackElement();const w=this._getColumnSelectResult(v,v.getPrimaryCursorState(),v.getCursorColumnSelectData(),C);w!==null&&(v.setCursorStates(C.source,3,w.viewStates.map(y=>ft.fromViewState(y))),v.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:w.fromLineNumber,fromViewVisualColumn:w.fromVisualColumn,toViewLineNumber:w.toLineNumber,toViewVisualColumn:w.toVisualColumn}),w.reversed?v.revealTopMostCursor(C.source):v.revealBottomMostCursor(C.source))}}s.ColumnSelect=oe(new class extends t{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(b,v,C,w){if(typeof w.position>"u"||typeof w.viewPosition>"u"||typeof w.mouseColumn>"u")return null;const y=b.model.validatePosition(w.position),k=b.coordinatesConverter.validateViewPosition(new A(w.viewPosition.lineNumber,w.viewPosition.column),y),x=w.doColumnSelect?C.fromViewLineNumber:k.lineNumber,D=w.doColumnSelect?C.fromViewVisualColumn:w.mouseColumn-1;return vf.columnSelect(b.cursorConfig,b,x,D,k.lineNumber,w.mouseColumn-1)}}),s.CursorColumnSelectLeft=oe(new class extends t{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(b,v,C,w){return vf.columnSelectLeft(b.cursorConfig,b,C)}}),s.CursorColumnSelectRight=oe(new class extends t{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(b,v,C,w){return vf.columnSelectRight(b.cursorConfig,b,C)}});class n extends t{constructor(v){super(v),this._isPaged=v.isPaged}_getColumnSelectResult(v,C,w,y){return vf.columnSelectUp(v.cursorConfig,v,w,this._isPaged)}}s.CursorColumnSelectUp=oe(new n({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:3600,linux:{primary:0}}})),s.CursorColumnSelectPageUp=oe(new n({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:3595,linux:{primary:0}}}));class i extends t{constructor(v){super(v),this._isPaged=v.isPaged}_getColumnSelectResult(v,C,w,y){return vf.columnSelectDown(v.cursorConfig,v,w,this._isPaged)}}s.CursorColumnSelectDown=oe(new i({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:3602,linux:{primary:0}}})),s.CursorColumnSelectPageDown=oe(new i({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:3596,linux:{primary:0}}}));class o extends Cn{constructor(){super({id:"cursorMove",precondition:void 0,metadata:sx.metadata})}runCoreEditorCommand(v,C){const w=sx.parse(C);w&&this._runCursorMove(v,C.source,w)}_runCursorMove(v,C,w){v.model.pushStackElement(),v.setCursorStates(C,3,o._move(v,v.getCursorStates(),w)),v.revealAllCursors(C,!0)}static _move(v,C,w){const y=w.select,k=w.value;switch(w.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return yi.simpleMove(v,C,w.direction,y,k,w.unit);case 11:case 13:case 12:case 14:return yi.viewportMove(v,C,w.direction,y,k);default:return null}}}s.CursorMoveImpl=o,s.CursorMove=oe(new o);class r extends Cn{constructor(v){super(v),this._staticArgs=v.args}runCoreEditorCommand(v,C){let w=this._staticArgs;this._staticArgs.value===-1&&(w={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:C.pageSize||v.cursorConfig.pageSize}),v.model.pushStackElement(),v.setCursorStates(C.source,3,yi.simpleMove(v,v.getCursorStates(),w.direction,w.select,w.value,w.unit)),v.revealAllCursors(C.source,!0)}}s.CursorLeft=oe(new r({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),s.CursorLeftSelect=oe(new r({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:1039}})),s.CursorRight=oe(new r({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),s.CursorRightSelect=oe(new r({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:1041}})),s.CursorUp=oe(new r({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),s.CursorUpSelect=oe(new r({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),s.CursorPageUp=oe(new r({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:11}})),s.CursorPageUpSelect=oe(new r({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:1035}})),s.CursorDown=oe(new r({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),s.CursorDownSelect=oe(new r({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),s.CursorPageDown=oe(new r({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:12}})),s.CursorPageDownSelect=oe(new r({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:1036}})),s.CreateCursor=oe(new class extends Cn{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(b,v){if(!v.position)return;let C;v.wholeLine?C=yi.line(b,b.getPrimaryCursorState(),!1,v.position,v.viewPosition):C=yi.moveTo(b,b.getPrimaryCursorState(),!1,v.position,v.viewPosition);const w=b.getCursorStates();if(w.length>1){const y=C.modelState?C.modelState.position:null,k=C.viewState?C.viewState.position:null;for(let x=0,D=w.length;x<D;x++){const N=w[x];if(!(y&&!N.modelState.selection.containsPosition(y))&&!(k&&!N.viewState.selection.containsPosition(k))){w.splice(x,1),b.model.pushStackElement(),b.setCursorStates(v.source,3,w);return}}}w.push(C),b.model.pushStackElement(),b.setCursorStates(v.source,3,w)}}),s.LastCursorMoveToSelect=oe(new class extends Cn{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(b,v){if(!v.position)return;const C=b.getLastAddedCursorIndex(),w=b.getCursorStates(),y=w.slice(0);y[C]=yi.moveTo(b,w[C],!0,v.position,v.viewPosition),b.model.pushStackElement(),b.setCursorStates(v.source,3,y)}});class a extends Cn{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,yi.moveToBeginningOfLine(v,v.getCursorStates(),this._inSelectionMode)),v.revealAllCursors(C.source,!0)}}s.CursorHome=oe(new a({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),s.CursorHomeSelect=oe(new a({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class l extends Cn{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,this._exec(v.getCursorStates())),v.revealAllCursors(C.source,!0)}_exec(v){const C=[];for(let w=0,y=v.length;w<y;w++){const k=v[w],x=k.modelState.position.lineNumber;C[w]=ft.fromModelState(k.modelState.move(this._inSelectionMode,x,1,0))}return C}}s.CursorLineStart=oe(new l({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:0,mac:{primary:287}}})),s.CursorLineStartSelect=oe(new l({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:0,mac:{primary:1311}}}));class c extends Cn{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,yi.moveToEndOfLine(v,v.getCursorStates(),this._inSelectionMode,C.sticky||!1)),v.revealAllCursors(C.source,!0)}}s.CursorEnd=oe(new c({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:bt,kbExpr:I.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),s.CursorEndSelect=oe(new c({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:bt,kbExpr:I.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:m("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class d extends Cn{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,this._exec(v,v.getCursorStates())),v.revealAllCursors(C.source,!0)}_exec(v,C){const w=[];for(let y=0,k=C.length;y<k;y++){const x=C[y],D=x.modelState.position.lineNumber,N=v.model.getLineMaxColumn(D);w[y]=ft.fromModelState(x.modelState.move(this._inSelectionMode,D,N,0))}return w}}s.CursorLineEnd=oe(new d({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:0,mac:{primary:291}}})),s.CursorLineEndSelect=oe(new d({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:0,mac:{primary:1315}}}));class h extends Cn{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,yi.moveToBeginningOfBuffer(v,v.getCursorStates(),this._inSelectionMode)),v.revealAllCursors(C.source,!0)}}s.CursorTop=oe(new h({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:2062,mac:{primary:2064}}})),s.CursorTopSelect=oe(new h({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:3086,mac:{primary:3088}}}));class u extends Cn{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){v.model.pushStackElement(),v.setCursorStates(C.source,3,yi.moveToEndOfBuffer(v,v.getCursorStates(),this._inSelectionMode)),v.revealAllCursors(C.source,!0)}}s.CursorBottom=oe(new u({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:2061,mac:{primary:2066}}})),s.CursorBottomSelect=oe(new u({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:3085,mac:{primary:3090}}}));class f extends Cn{constructor(){super({id:"editorScroll",precondition:void 0,metadata:Ri.metadata})}determineScrollMethod(v){const C=[6],w=[1,2,3,4,5,6],y=[4,2],k=[1,3];return C.includes(v.unit)&&y.includes(v.direction)?this._runHorizontalEditorScroll.bind(this):w.includes(v.unit)&&k.includes(v.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(v,C){const w=Ri.parse(C);if(!w)return;const y=this.determineScrollMethod(w);y&&y(v,C.source,w)}_runVerticalEditorScroll(v,C,w){const y=this._computeDesiredScrollTop(v,w);if(w.revealCursor){const k=v.getCompletelyVisibleViewRangeAtScrollTop(y);v.setCursorStates(C,3,[yi.findPositionInViewportIfOutside(v,v.getPrimaryCursorState(),k,w.select)])}v.viewLayout.setScrollPosition({scrollTop:y},0)}_computeDesiredScrollTop(v,C){if(C.unit===1){const k=v.viewLayout.getFutureViewport(),x=v.getCompletelyVisibleViewRangeAtScrollTop(k.top),D=v.coordinatesConverter.convertViewRangeToModelRange(x);let N;C.direction===1?N=Math.max(1,D.startLineNumber-C.value):N=Math.min(v.model.getLineCount(),D.startLineNumber+C.value);const W=v.coordinatesConverter.convertModelPositionToViewPosition(new A(N,1));return v.viewLayout.getVerticalOffsetForLineNumber(W.lineNumber)}if(C.unit===5){let k=0;return C.direction===3&&(k=v.model.getLineCount()-v.cursorConfig.pageSize),v.viewLayout.getVerticalOffsetForLineNumber(k)}let w;C.unit===3?w=v.cursorConfig.pageSize*C.value:C.unit===4?w=Math.round(v.cursorConfig.pageSize/2)*C.value:w=C.value;const y=(C.direction===1?-1:1)*w;return v.viewLayout.getCurrentScrollTop()+y*v.cursorConfig.lineHeight}_runHorizontalEditorScroll(v,C,w){const y=this._computeDesiredScrollLeft(v,w);v.viewLayout.setScrollPosition({scrollLeft:y},0)}_computeDesiredScrollLeft(v,C){const w=(C.direction===4?-1:1)*C.value;return v.viewLayout.getCurrentScrollLeft()+w*v.cursorConfig.typicalHalfwidthCharacterWidth}}s.EditorScrollImpl=f,s.EditorScroll=oe(new f),s.ScrollLineUp=oe(new class extends Cn{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(b,v){s.EditorScroll.runCoreEditorCommand(b,{to:Ri.RawDirection.Up,by:Ri.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:v.source})}}),s.ScrollPageUp=oe(new class extends Cn{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(b,v){s.EditorScroll.runCoreEditorCommand(b,{to:Ri.RawDirection.Up,by:Ri.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:v.source})}}),s.ScrollEditorTop=oe(new class extends Cn{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus}})}runCoreEditorCommand(b,v){s.EditorScroll.runCoreEditorCommand(b,{to:Ri.RawDirection.Up,by:Ri.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:v.source})}}),s.ScrollLineDown=oe(new class extends Cn{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(b,v){s.EditorScroll.runCoreEditorCommand(b,{to:Ri.RawDirection.Down,by:Ri.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:v.source})}}),s.ScrollPageDown=oe(new class extends Cn{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(b,v){s.EditorScroll.runCoreEditorCommand(b,{to:Ri.RawDirection.Down,by:Ri.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:v.source})}}),s.ScrollEditorBottom=oe(new class extends Cn{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus}})}runCoreEditorCommand(b,v){s.EditorScroll.runCoreEditorCommand(b,{to:Ri.RawDirection.Down,by:Ri.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:v.source})}}),s.ScrollLeft=oe(new class extends Cn{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus}})}runCoreEditorCommand(b,v){s.EditorScroll.runCoreEditorCommand(b,{to:Ri.RawDirection.Left,by:Ri.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:v.source})}}),s.ScrollRight=oe(new class extends Cn{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus}})}runCoreEditorCommand(b,v){s.EditorScroll.runCoreEditorCommand(b,{to:Ri.RawDirection.Right,by:Ri.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:v.source})}});class g extends Cn{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){C.position&&(v.model.pushStackElement(),v.setCursorStates(C.source,3,[yi.word(v,v.getPrimaryCursorState(),this._inSelectionMode,C.position)]),C.revealType!==2&&v.revealAllCursors(C.source,!0,!0))}}s.WordSelect=oe(new g({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),s.WordSelectDrag=oe(new g({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),s.LastCursorWordSelect=oe(new class extends Cn{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(b,v){if(!v.position)return;const C=b.getLastAddedCursorIndex(),w=b.getCursorStates(),y=w.slice(0),k=w[C];y[C]=yi.word(b,k,k.modelState.hasSelection(),v.position),b.model.pushStackElement(),b.setCursorStates(v.source,3,y)}});class p extends Cn{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){C.position&&(v.model.pushStackElement(),v.setCursorStates(C.source,3,[yi.line(v,v.getPrimaryCursorState(),this._inSelectionMode,C.position,C.viewPosition)]),C.revealType!==2&&v.revealAllCursors(C.source,!1,!0))}}s.LineSelect=oe(new p({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),s.LineSelectDrag=oe(new p({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class _ extends Cn{constructor(v){super(v),this._inSelectionMode=v.inSelectionMode}runCoreEditorCommand(v,C){if(!C.position)return;const w=v.getLastAddedCursorIndex(),y=v.getCursorStates(),k=y.slice(0);k[w]=yi.line(v,y[w],this._inSelectionMode,C.position,C.viewPosition),v.model.pushStackElement(),v.setCursorStates(C.source,3,k)}}s.LastCursorLineSelect=oe(new _({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),s.LastCursorLineSelectDrag=oe(new _({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),s.CancelSelection=oe(new class extends Cn{constructor(){super({id:"cancelSelection",precondition:I.hasNonEmptySelection,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,v){b.model.pushStackElement(),b.setCursorStates(v.source,3,[yi.cancelSelection(b,b.getPrimaryCursorState())]),b.revealAllCursors(v.source,!0)}}),s.RemoveSecondaryCursors=oe(new class extends Cn{constructor(){super({id:"removeSecondaryCursors",precondition:I.hasMultipleSelections,kbOpts:{weight:bt+1,kbExpr:I.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(b,v){b.model.pushStackElement(),b.setCursorStates(v.source,3,[b.getPrimaryCursorState()]),b.revealAllCursors(v.source,!0),Zl(m("removedCursor","Removed secondary cursors"))}}),s.RevealLine=oe(new class extends Cn{constructor(){super({id:"revealLine",precondition:void 0,metadata:zp.metadata})}runCoreEditorCommand(b,v){const C=v,w=C.lineNumber||0;let y=typeof w=="number"?w+1:parseInt(w)+1;y<1&&(y=1);const k=b.model.getLineCount();y>k&&(y=k);const x=new L(y,1,y,b.model.getLineMaxColumn(y));let D=0;if(C.at)switch(C.at){case zp.RawAtArgument.Top:D=3;break;case zp.RawAtArgument.Center:D=1;break;case zp.RawAtArgument.Bottom:D=4;break}const N=b.coordinatesConverter.convertModelRangeToViewRange(x);b.revealRange(v.source,!1,N,D,0)}}),s.SelectAll=new class extends IO{constructor(){super(Soe)}runDOMCommand(b){Sr&&(b.focus(),b.select()),b.ownerDocument.execCommand("selectAll")}runEditorCommand(b,v,C){const w=v._getViewModel();w&&this.runCoreEditorCommand(w,C)}runCoreEditorCommand(b,v){b.model.pushStackElement(),b.setCursorStates("keyboard",3,[yi.selectAll(b,b.getPrimaryCursorState())])}},s.SetSelection=oe(new class extends Cn{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(b,v){v.selection&&(b.model.pushStackElement(),b.setCursorStates(v.source,3,[ft.fromModelSelection(v.selection)]))}})})(li||(li={}));const MCe=K.and(I.textInputFocus,I.columnSelection);function uv(s,e){Ts.registerKeybindingRule({id:s,primary:e,when:MCe,weight:bt+1})}uv(li.CursorColumnSelectLeft.id,1039);uv(li.CursorColumnSelectRight.id,1041);uv(li.CursorColumnSelectUp.id,1040);uv(li.CursorColumnSelectPageUp.id,1035);uv(li.CursorColumnSelectDown.id,1042);uv(li.CursorColumnSelectPageDown.id,1036);function AV(s){return s.register(),s}var O_;(function(s){class e extends Zn{runEditorCommand(n,i,o){const r=i._getViewModel();r&&this.runCoreEditingCommand(i,r,o||{})}}s.CoreEditingCommand=e,s.LineBreakInsert=oe(new class extends e{constructor(){super({id:"lineBreakInsert",precondition:I.writable,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,bE.lineBreakInsert(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection)))}}),s.Outdent=oe(new class extends e{constructor(){super({id:"outdent",precondition:I.writable,kbOpts:{weight:bt,kbExpr:K.and(I.editorTextFocus,I.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,hh.outdent(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),s.Tab=oe(new class extends e{constructor(){super({id:"tab",precondition:I.writable,kbOpts:{weight:bt,kbExpr:K.and(I.editorTextFocus,I.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(t,n,i){t.pushUndoStop(),t.executeCommands(this.id,hh.tab(n.cursorConfig,n.model,n.getCursorStates().map(o=>o.modelState.selection))),t.pushUndoStop()}}),s.DeleteLeft=oe(new class extends e{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(t,n,i){const[o,r]=lm.deleteLeft(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection),n.getCursorAutoClosedCharacters());o&&t.pushUndoStop(),t.executeCommands(this.id,r),n.setPrevEditOperationType(2)}}),s.DeleteRight=oe(new class extends e{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:bt,kbExpr:I.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(t,n,i){const[o,r]=lm.deleteRight(n.getPrevEditOperationType(),n.cursorConfig,n.model,n.getCursorStates().map(a=>a.modelState.selection));o&&t.pushUndoStop(),t.executeCommands(this.id,r),n.setPrevEditOperationType(3)}}),s.Undo=new class extends IO{constructor(){super(Pq)}runDOMCommand(t){t.ownerDocument.execCommand("undo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(92)===!0))return n.getModel().undo()}},s.Redo=new class extends IO{constructor(){super(Oq)}runDOMCommand(t){t.ownerDocument.execCommand("redo")}runEditorCommand(t,n,i){if(!(!n.hasModel()||n.getOption(92)===!0))return n.getModel().redo()}}})(O_||(O_={}));class PV extends ET{constructor(e,t,n){super({id:e,precondition:void 0,metadata:n}),this._handlerId=t}runCommand(e,t){const n=e.get(mt).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}}function Om(s,e){AV(new PV("default:"+s,s)),AV(new PV(s,s,e))}Om("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Om("replacePreviousChar");Om("compositionType");Om("compositionStart");Om("compositionEnd");Om("paste");Om("cut");class ACe{constructor(e,t,n,i){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=i}paste(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){li.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new A(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const t=this.configuration.options,n=Ds&&t.get(108),i=t.get(22);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){li.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){li.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,n){e=this._validateViewColumn(e),li.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),li.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){li.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){li.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){li.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){li.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){li.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){li.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){li.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){li.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){li.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}class _Y{constructor(e){this._lineFactory=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new _t("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;const n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){const l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>i)return null;let o=0,r=0;for(let l=n;l<=i;l++){const c=l-this._rendLineNumberStart;e<=l&&l<=t&&(r===0?(o=c,r=1):r++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(o,r)}onLinesChanged(e,t){const n=e+t-1;if(this.getCount()===0)return!1;const i=this.getStartLineNumber(),o=this.getEndLineNumber();let r=!1;for(let a=e;a<=n;a++)a>=i&&a<=o&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}onLinesInserted(e,t){if(this.getCount()===0)return null;const n=t-e+1,i=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>o)return null;if(n+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);const r=[];for(let h=0;h<n;h++)r[h]=this._lineFactory.createLine();const a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),c=this._lines.slice(a,this._lines.length-n),d=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(r).concat(c),d}onTokensChanged(e){if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),n=this.getEndLineNumber();let i=!1;for(let o=0,r=e.length;o<r;o++){const a=e[o];if(a.toLineNumber<t||a.fromLineNumber>n)continue;const l=Math.max(t,a.fromLineNumber),c=Math.min(n,a.toLineNumber);for(let d=l;d<=c;d++){const h=d-this._rendLineNumberStart;this._lines[h].onTokensChanged(),i=!0}}return i}}class bY{constructor(e){this._lineFactory=e,this.domNode=this._createDomNode(),this._linesCollection=new _Y(this._lineFactory)}_createDomNode(){const e=Ct(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(146)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const o=t[n].getDomNode();o==null||o.remove()}return!0}onLinesInserted(e){const t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++){const o=t[n].getDomNode();o==null||o.remove()}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const t=this._linesCollection._get(),n=new TO(this.domNode.domNode,this._lineFactory,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}const Nc=class Nc{constructor(e,t,n){this._domNode=e,this._lineFactory=t,this._viewportData=n}render(e,t,n,i){const o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||n<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=n-t+1,o.lines=[];for(let r=t;r<=n;r++)o.lines[r-t]=this._lineFactory.createLine();return this._finishRendering(o,!0,i),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(n-o.rendLineNumberStart,o.linesLength-1),i,t),o.rendLineNumberStart>t){const r=t,a=Math.min(n,o.rendLineNumberStart-1);r<=a&&(this._insertLinesBefore(o,r,a,i,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart<t){const r=Math.min(o.linesLength,t-o.rendLineNumberStart);r>0&&(this._removeLinesBefore(o,r),o.linesLength-=r)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<n){const r=o.rendLineNumberStart+o.linesLength,a=n;r<=a&&(this._insertLinesAfter(o,r,a,i,t),o.linesLength+=a-r+1)}else if(o.rendLineNumberStart+o.linesLength-1>n){const r=Math.max(0,n-o.rendLineNumberStart+1),l=o.linesLength-1-r+1;l>0&&(this._removeLinesAfter(o,l),o.linesLength-=l)}return this._finishRendering(o,!1,i),o}_renderUntouchedLines(e,t,n,i,o){const r=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){const c=r+l;a[l].layoutLine(c,i[c-o],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,n,i,o){const r=[];let a=0;for(let l=t;l<=n;l++)r[a++]=this._lineFactory.createLine();e.lines=r.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++){const i=e.lines[n].getDomNode();i==null||i.remove()}e.lines.splice(0,t)}_insertLinesAfter(e,t,n,i,o){const r=[];let a=0;for(let l=t;l<=n;l++)r[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(r)}_removeLinesAfter(e,t){const n=e.linesLength-t;for(let i=0;i<t;i++){const o=e.lines[n+i].getDomNode();o==null||o.remove()}e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,i){Nc._ttPolicy&&(n=Nc._ttPolicy.createHTML(n));const o=this._domNode.lastChild;t||!o?this._domNode.innerHTML=n:o.insertAdjacentHTML("afterend",n);let r=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){const l=e.lines[a];i[a]&&(l.setDomNode(r),r=r.previousSibling)}}_finishRenderingInvalidLines(e,t,n){const i=document.createElement("div");Nc._ttPolicy&&(t=Nc._ttPolicy.createHTML(t)),i.innerHTML=t;for(let o=0;o<e.linesLength;o++){const r=e.lines[o];if(n[o]){const a=i.firstChild,l=r.getDomNode();l.parentNode.replaceChild(a,l),r.setDomNode(a)}}}_finishRendering(e,t,n){const i=Nc._sb,o=e.linesLength,r=e.lines,a=e.rendLineNumberStart,l=[];{i.reset();let c=!1;for(let d=0;d<o;d++){const h=r[d];l[d]=!1,!(h.getDomNode()||!h.renderLine(d+a,n[d],this._viewportData.lineHeight,this._viewportData,i))&&(l[d]=!0,c=!0)}c&&this._finishRenderingNewLines(e,t,i.build(),l)}{i.reset();let c=!1;const d=[];for(let h=0;h<o;h++){const u=r[h];d[h]=!1,!(l[h]||!u.renderLine(h+a,n[h],this._viewportData.lineHeight,this._viewportData,i))&&(d[h]=!0,c=!0)}c&&this._finishRenderingInvalidLines(e,i.build(),d)}}};Nc._ttPolicy=Nd("editorViewLayer",{createHTML:e=>e}),Nc._sb=new Qb(1e5);let TO=Nc;class vY extends Io{constructor(e){super(e),this._dynamicOverlays=[],this._isFocused=!1,this._visibleLines=new bY({createLine:()=>new PCe(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;const n=this._context.configuration.options.get(50);Ii(this.domNode,n),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const n=this._context.configuration.options.get(50);return Ii(this.domNode,n),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,i=t.length;n<i;n++){const o=t[n];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class PCe{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Ct(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,n,i,o){let r="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){const c=this._dynamicOverlays[a];r+=c.render(i.startLineNumber,e)}return this._renderedContent===r?!1:(this._renderedContent=r,o.appendString('<div style="top:'),o.appendString(String(t)),o.appendString("px;height:"),o.appendString(String(n)),o.appendString('px;">'),o.appendString(r),o.appendString("</div>"),!0)}layoutLine(e,t,n){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(n))}}class OCe extends vY{constructor(e){super(e);const n=this._context.configuration.options.get(146);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const n=this._context.configuration.options.get(146);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class FCe extends vY{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(146);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Ii(this.domNode,t.get(50))}onConfigurationChanged(e){const t=this._context.configuration.options;Ii(this.domNode,t.get(50));const n=t.get(146);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}class CE{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var t;(t=this.onKeyDown)==null||t.call(this,e)}emitKeyUp(e){var t;(t=this.onKeyUp)==null||t.call(this,e)}emitContextMenu(e){var t;(t=this.onContextMenu)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var t;(t=this.onMouseMove)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var t;(t=this.onMouseLeave)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var t;(t=this.onMouseDown)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var t;(t=this.onMouseUp)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var t;(t=this.onMouseDrag)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var t;(t=this.onMouseDrop)==null||t.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;(e=this.onMouseDropCanceled)==null||e.call(this)}emitMouseWheel(e){var t;(t=this.onMouseWheel)==null||t.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return CE.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){const n={...e};return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),(n.type===5||n.type===8)&&(n.detail=this.convertViewToModelViewZoneData(n.detail,t)),n}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new A(e.afterLineNumber,1)).lineNumber}}}class WCe extends Io{constructor(e){super(e),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=Ct(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1;const n=this._context.configuration.options.get(146),i=n.contentWidth-n.verticalScrollbarWidth;this.contentWidth!==i&&(this.contentWidth=i,e=!0);const o=n.contentLeft;return this.contentLeft!==o&&(this.contentLeft=o,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0;const n=e.getDecorationsInViewport();for(const i of n){if(!i.options.blockClassName)continue;let o=this.blocks[t];o||(o=this.blocks[t]=Ct(document.createElement("div")),this.domNode.appendChild(o));let r,a;i.options.blockIsAfterEnd?(r=e.getVerticalOffsetAfterLineNumber(i.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(i.range.endLineNumber,!0)):(r=e.getVerticalOffsetForLineNumber(i.range.startLineNumber,!0),a=i.range.isEmpty()&&!i.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(i.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(i.range.endLineNumber,!0));const[l,c,d,h]=i.options.blockPadding??[0,0,0,0];o.setClassName("blockDecorations-block "+i.options.blockClassName),o.setLeft(this.contentLeft-h),o.setWidth(this.contentWidth+h+c),o.setTop(r-e.scrollTop-l),o.setHeight(a-r+l+d),t++}for(let i=t;i<this.blocks.length;i++)this.blocks[i].domNode.remove();this.blocks.length=t}}class BCe extends Io{constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Ct(document.createElement("div")),Xa.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Ct(document.createElement("div")),Xa.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){const e=Object.keys(this._widgets);for(const t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){const t=new HCe(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n,i,o){this._widgets[e.getId()].setPosition(t,n,i,o),this.setShouldRender()}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const n=this._widgets[t];delete this._widgets[t];const i=n.domNode.domNode;i.remove(),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].prepareRender(e)}render(e){const t=Object.keys(this._widgets);for(const n of t)this._widgets[n].render(e)}}class HCe{constructor(e,t,n){this._primaryAnchor=new zv(null,null),this._secondaryAnchor=new zv(null,null),this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=Ct(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const i=this._context.configuration.options,o=i.get(146);this._fixedOverflowWidgets=i.get(42),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=i.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),e.hasChanged(146)){const n=t.get(146);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,n){this._affinity=e,this._primaryAnchor=i(t,this._context.viewModel,this._affinity),this._secondaryAnchor=i(n,this._context.viewModel,this._affinity);function i(o,r,a){if(!o)return new zv(null,null);const l=r.model.validatePosition(o);if(r.coordinatesConverter.modelPositionIsVisible(l)){const c=r.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new zv(o,c)}return new zv(o,null)}}_getMaxWidth(){const e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?(t==null?void 0:t.innerWidth)||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,n,i){this._setPosition(i,e,t),this._preference=n,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,n,i){const o=e.top,r=o,a=e.top+e.height,l=i.viewportHeight-a,c=o-n,d=r>=n,h=a,u=l>=n;let f=e.left;return f+t>i.scrollLeft+i.viewportWidth&&(f=i.scrollLeft+i.viewportWidth-t),f<i.scrollLeft&&(f=i.scrollLeft),{fitsAbove:d,aboveTop:c,fitsBelow:u,belowTop:h,left:f}}_layoutHorizontalSegmentInPage(e,t,n,i){const a=Math.max(15,t.left-i),l=Math.min(t.left+t.width+i,e.width-15),d=this._viewDomNode.domNode.ownerDocument.defaultView;let h=t.left+n-((d==null?void 0:d.scrollX)??0);if(h+i>l){const u=h-(l-i);h-=u,n-=u}if(h<a){const u=h-a;h-=u,n-=u}return[n,h]}_layoutBoxInPage(e,t,n,i){const o=e.top-n,r=e.top+e.height,a=Sn(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,c=l.defaultView,d=a.top+o-((c==null?void 0:c.scrollY)??0),h=a.top+r-((c==null?void 0:c.scrollY)??0),u=lu(l.body),[f,g]=this._layoutHorizontalSegmentInPage(u,a,e.left-i.scrollLeft+this._contentLeft,t),p=22,_=22,b=d>=p,v=h+n<=u.height-_;return this._fixedOverflowWidgets?{fitsAbove:b,aboveTop:Math.max(d,p),fitsBelow:v,belowTop:h,left:g}:{fitsAbove:b,aboveTop:o,fitsBelow:v,belowTop:r,left:f}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new $v(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){var r,a;const t=o(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),n=((r=this._secondaryAnchor.viewPosition)==null?void 0:r.lineNumber)===((a=this._primaryAnchor.viewPosition)==null?void 0:a.lineNumber)?this._secondaryAnchor.viewPosition:null,i=o(n,this._affinity,this._lineHeight);return{primary:t,secondary:i};function o(l,c,d){if(!l)return null;const h=e.visibleRangeForPosition(l);if(!h)return null;const u=l.column===1&&c===3?0:h.left,f=e.getVerticalOffsetForLineNumber(l.lineNumber)-e.scrollTop;return new OV(f,u,d)}}_reduceAnchorCoordinates(e,t,n){if(!t)return e;const i=this._context.configuration.options.get(50);let o=t.left;return o<e.left?o=Math.max(o,e.left-n+i.typicalFullwidthCharacterWidth):o=Math.min(o,e.left+n-i.typicalFullwidthCharacterWidth),new OV(e.top,o,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:n}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let r=null;if(typeof this._actual.beforeRender=="function"&&(r=DR(this._actual.beforeRender,this._actual)),r)this._cachedDomNodeOffsetWidth=r.width,this._cachedDomNodeOffsetHeight=r.height;else{const l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}const i=this._reduceAnchorCoordinates(t,n,this._cachedDomNodeOffsetWidth);let o;this.allowEditorOverflow?o=this._layoutBoxInPage(i,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):o=this._layoutBoxInViewport(i,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let r=1;r<=2;r++)for(const a of this._preference)if(a===1){if(!o)return null;if(r===2||o.fitsAbove)return{kind:"inViewport",coordinate:new $v(o.aboveTop,o.left),position:1}}else if(a===2){if(!o)return null;if(r===2||o.fitsBelow)return{kind:"inViewport",coordinate:new $v(o.belowTop,o.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new $v(i.top,i.left)),position:0}:{kind:"inViewport",coordinate:new $v(i.top,i.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){var t;if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,((t=this._renderData)==null?void 0:t.kind)==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&DR(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&DR(this._actual.afterRender,this._actual,this._renderData.position)}}class zv{constructor(e,t){this.modelPosition=e,this.viewPosition=t}}class $v{constructor(e,t){this.top=e,this.left=t,this._coordinateBrand=void 0}}class OV{constructor(e,t,n){this.top=e,this.left=t,this.height=n,this._anchorCoordinateBrand=void 0}}function DR(s,e,...t){try{return s.call(e,...t)}catch{return null}}class CY extends Pm{constructor(e){super(),this._context=e;const t=this._context.configuration.options,n=t.get(146);this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new me(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1;const t=new Set;for(const o of this._selections)t.add(o.positionLineNumber);const n=Array.from(t);n.sort((o,r)=>o-r),en(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);const i=this._selections.every(o=>o.isEmpty());return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);return this._renderLineHighlight=t.get(97),this._renderLineHighlightOnlyWhenFocus=t.get(98),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=[];for(let r=t;r<=n;r++){const a=r-t;i[a]=""}if(this._wordWrap){const r=this._renderOne(e,!1);for(const a of this._cursorLineNumbers){const l=this._context.viewModel.coordinatesConverter,c=l.convertViewPositionToModelPosition(new A(a,1)).lineNumber,d=l.convertModelPositionToViewPosition(new A(c,1)).lineNumber,h=l.convertModelPositionToViewPosition(new A(c,this._context.viewModel.model.getLineMaxColumn(c))).lineNumber,u=Math.max(d,t),f=Math.min(h,n);for(let g=u;g<=f;g++){const p=g-t;i[p]=r}}}const o=this._renderOne(e,!0);for(const r of this._cursorLineNumbers){if(r<t||r>n)continue;const a=r-t;i[a]=o}this._renderData=i}render(e,t){if(!this._renderData)return"";const n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}class VCe extends CY{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}class zCe extends CY{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}Er((s,e)=>{const t=s.getColor(RG);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||s.defines(SH)){const n=s.getColor(SH);n&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${n}; }`),Ha(s.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});class $Ce extends Pm{constructor(e){super(),this._context=e;const t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){const t=e.getDecorationsInViewport();let n=[],i=0;for(let l=0,c=t.length;l<c;l++){const d=t[l];d.options.className&&(n[i++]=d)}n=n.sort((l,c)=>{if(l.options.zIndex<c.options.zIndex)return-1;if(l.options.zIndex>c.options.zIndex)return 1;const d=l.options.className,h=c.options.className;return d<h?-1:d>h?1:L.compareRangesUsingStarts(l.range,c.range)});const o=e.visibleRange.startLineNumber,r=e.visibleRange.endLineNumber,a=[];for(let l=o;l<=r;l++){const c=l-o;a[c]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){const i=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let r=0,a=t.length;r<a;r++){const l=t[r];if(!l.options.isWholeLine)continue;const c='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',d=Math.max(l.range.startLineNumber,i),h=Math.min(l.range.endLineNumber,o);for(let u=d;u<=h;u++){const f=u-i;n[f]+=c}}}_renderNormalDecorations(e,t,n){const i=e.visibleRange.startLineNumber;let o=null,r=!1,a=null,l=!1;for(let c=0,d=t.length;c<d;c++){const h=t[c];if(h.options.isWholeLine)continue;const u=h.options.className,f=!!h.options.showIfCollapsed;let g=h.range;if(f&&g.endColumn===1&&g.endLineNumber!==g.startLineNumber&&(g=new L(g.startLineNumber,g.startColumn,g.endLineNumber-1,this._context.viewModel.getLineMaxColumn(g.endLineNumber-1))),o===u&&r===f&&L.areIntersectingOrTouching(a,g)){a=L.plusRange(a,g);continue}o!==null&&this._renderNormalDecoration(e,a,o,l,r,i,n),o=u,r=f,a=g,l=h.options.shouldFillLineOnLineBreak??!1}o!==null&&this._renderNormalDecoration(e,a,o,l,r,i,n)}_renderNormalDecoration(e,t,n,i,o,r,a){const l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let c=0,d=l.length;c<d;c++){const h=l[c];if(h.outsideRenderedLine)continue;const u=h.lineNumber-r;if(o&&h.ranges.length===1){const f=h.ranges[0];if(f.width<this._typicalHalfwidthCharacterWidth){const g=Math.round(f.left+f.width/2),p=Math.max(0,Math.round(g-this._typicalHalfwidthCharacterWidth/2));h.ranges[0]=new pE(p,this._typicalHalfwidthCharacterWidth)}}for(let f=0,g=h.ranges.length;f<g;f++){const p=i&&h.continuesOnNextLine&&g===1,_=h.ranges[f],b='<div class="cdr '+n+'" style="left:'+String(_.left)+"px;width:"+(p?"100%;":String(_.width)+"px;")+'"></div>';a[u]+=b}}}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class UCe extends Io{constructor(e,t,n,i){super(e);const o=this._context.configuration.options,r=o.get(104),a=o.get(75),l=o.get(40),c=o.get(107),d={listenOnDomNode:n.domNode,className:"editor-scrollable "+uA(e.theme.type),useShadows:!1,lazyRender:!0,vertical:r.vertical,horizontal:r.horizontal,verticalHasArrows:r.verticalHasArrows,horizontalHasArrows:r.horizontalHasArrows,verticalScrollbarSize:r.verticalScrollbarSize,verticalSliderSize:r.verticalSliderSize,horizontalScrollbarSize:r.horizontalScrollbarSize,horizontalSliderSize:r.horizontalSliderSize,handleMouseWheel:r.handleMouseWheel,alwaysConsumeMouseWheel:r.alwaysConsumeMouseWheel,arrowSize:r.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:c,scrollByPage:r.scrollByPage};this.scrollbar=this._register(new UT(t.domNode,d,this._context.viewLayout.getScrollable())),Xa.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=Ct(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const h=(u,f,g)=>{const p={};{const _=u.scrollTop;_&&(p.scrollTop=this._context.viewLayout.getCurrentScrollTop()+_,u.scrollTop=0)}if(g){const _=u.scrollLeft;_&&(p.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+_,u.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(p,1)};this._register($(n.domNode,"scroll",u=>h(n.domNode,!0,!0))),this._register($(t.domNode,"scroll",u=>h(t.domNode,!0,!1))),this._register($(i.domNode,"scroll",u=>h(i.domNode,!0,!1))),this._register($(this.scrollbarDomNode.domNode,"scroll",u=>h(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const e=this._context.configuration.options,t=e.get(146);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(73).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(104)||e.hasChanged(75)||e.hasChanged(40)){const t=this._context.configuration.options,n=t.get(104),i=t.get(75),o=t.get(40),r=t.get(107),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:o,scrollPredominantAxis:r};this.scrollbar.updateOptions(a)}return e.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+uA(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}}class EO{constructor(e,t,n,i,o){this.startLineNumber=e,this.endLineNumber=t,this.className=n,this.tooltip=i,this._decorationToRenderBrand=void 0,this.zIndex=o??0}}class jCe{constructor(e,t,n){this.className=e,this.zIndex=t,this.tooltip=n}}class qCe{constructor(){this.decorations=[]}add(e){this.decorations.push(e)}getDecorations(){return this.decorations}}class wY extends Pm{_render(e,t,n){const i=[];for(let a=e;a<=t;a++){const l=a-e;i[l]=new qCe}if(n.length===0)return i;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let o=null,r=0;for(let a=0,l=n.length;a<l;a++){const c=n[a],d=c.className,h=c.zIndex;let u=Math.max(c.startLineNumber,e)-e;const f=Math.min(c.endLineNumber,t)-e;o===d?(u=Math.max(r+1,u),r=Math.max(r,f)):(o=d,r=f);for(let g=u;g<=r;g++)i[g].add(new jCe(d,h,c.tooltip))}return i}}class KCe extends Io{constructor(e){super(e),this._widgets={},this._context=e;const t=this._context.configuration.options,n=t.get(146);this.domNode=Ct(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);return this._lineHeight=t.get(67),this._glyphMargin=t.get(57),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){const t=Ct(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){const n=this._widgets[e.getId()];return n.preference.lane===t.lane&&n.preference.zIndex===t.zIndex&&L.equalsRange(n.preference.range,t.range)?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){const t=e.getId();if(this._widgets[t]){const i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){var r;const n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,o=e.getDecorationsInViewport();for(const a of o){const l=a.options.glyphMarginClassName;if(!l)continue;const c=Math.max(a.range.startLineNumber,n),d=Math.min(a.range.endLineNumber,i),h=((r=a.options.glyphMargin)==null?void 0:r.position)??ia.Center,u=a.options.zIndex??0;for(let f=c;f<=d;f++){const g=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new A(f,0)),p=this._context.viewModel.glyphLanes.getLanesAtLine(g.lineNumber).indexOf(h);t.push(new GCe(f,p,u,l))}}}_collectWidgetBasedGlyphRenderRequest(e,t){const n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(const o of Object.values(this._widgets)){const r=o.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(L.lift(r));if(!a||!l||l<n||a>i)continue;const c=Math.max(a,n),d=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new A(c,0)),h=this._context.viewModel.glyphLanes.getLanesAtLine(d.lineNumber).indexOf(o.preference.lane);t.push(new ZCe(c,h,o.preference.zIndex,o))}}_collectSortedGlyphRenderRequests(e){const t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((n,i)=>n.lineNumber===i.lineNumber?n.laneIndex===i.laneIndex?n.zIndex===i.zIndex?i.type===n.type?n.type===0&&i.type===0?n.className<i.className?-1:1:0:i.type-n.type:i.zIndex-n.zIndex:n.laneIndex-i.laneIndex:n.lineNumber-i.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const i of Object.values(this._widgets))i.renderInfo=null;const t=new gd(this._collectSortedGlyphRenderRequests(e)),n=[];for(;t.length>0;){const i=t.peek();if(!i)break;const o=t.takeWhile(a=>a.lineNumber===i.lineNumber&&a.laneIndex===i.laneIndex);if(!o||o.length===0)break;const r=o[0];if(r.type===0){const a=[];for(const l of o){if(l.zIndex!==r.zIndex||l.type!==r.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}n.push(r.accept(a.join(" ")))}else r.widget.renderInfo={lineNumber:r.lineNumber,laneIndex:r.laneIndex}}this._decorationGlyphsToRender=n}render(e){if(!this._glyphMargin){for(const n of Object.values(this._widgets))n.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;){const n=this._managedDomNodes.pop();n==null||n.domNode.remove()}return}const t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const n of Object.values(this._widgets))if(!n.renderInfo)n.domNode.setDisplay("none");else{const i=e.viewportData.relativeVerticalOffset[n.renderInfo.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+n.renderInfo.laneIndex*this._lineHeight;n.domNode.setDisplay("block"),n.domNode.setTop(i),n.domNode.setLeft(o),n.domNode.setWidth(t),n.domNode.setHeight(this._lineHeight)}for(let n=0;n<this._decorationGlyphsToRender.length;n++){const i=this._decorationGlyphsToRender[n],o=e.viewportData.relativeVerticalOffset[i.lineNumber-e.viewportData.startLineNumber],r=this._glyphMarginLeft+i.laneIndex*this._lineHeight;let a;n<this._managedDomNodes.length?a=this._managedDomNodes[n]:(a=Ct(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+i.combinedClassName),a.setPosition("absolute"),a.setTop(o),a.setLeft(r),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;){const n=this._managedDomNodes.pop();n==null||n.domNode.remove()}}}class GCe{constructor(e,t,n,i){this.lineNumber=e,this.laneIndex=t,this.zIndex=n,this.className=i,this.type=0}accept(e){return new YCe(this.lineNumber,this.laneIndex,e)}}class ZCe{constructor(e,t,n,i){this.lineNumber=e,this.laneIndex=t,this.zIndex=n,this.widget=i,this.type=1}}class YCe{constructor(e,t,n){this.lineNumber=e,this.laneIndex=t,this.combinedClassName=n}}class XCe extends Pm{constructor(e){super(),this._context=e,this._primaryPosition=null;const t=this._context.configuration.options,n=t.get(147),i=t.get(50);this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(147),i=t.get(50);return this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){var i;const n=e.selections[0].getPosition();return(i=this._primaryPosition)!=null&&i.equals(n)?!1:(this._primaryPosition=n,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){var l,c;if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=e.scrollWidth,o=this._primaryPosition,r=this.getGuidesByLine(t,Math.min(n+1,this._context.viewModel.getLineCount()),o),a=[];for(let d=t;d<=n;d++){const h=d-t,u=r[h];let f="";const g=((l=e.visibleRangeForPosition(new A(d,1)))==null?void 0:l.left)??0;for(const p of u){const _=p.column===-1?g+(p.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new A(d,p.column)).left;if(_>i||this._maxIndentLeft>0&&_>this._maxIndentLeft)break;const b=p.horizontalLine?p.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",v=p.horizontalLine?(((c=e.visibleRangeForPosition(new A(d,p.horizontalLine.endColumn)))==null?void 0:c.left)??_+this._spaceWidth)-_:this._spaceWidth;f+=`<div class="core-guide ${p.className} ${b}" style="left:${_}px;width:${v}px"></div>`}a[h]=f}this._renderResult=a}getGuidesByLine(e,t,n){const i=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?$f.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?$f.EnabledForActive:$f.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,o=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null;let r=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&n){const h=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);r=h.startLineNumber,a=h.endLineNumber,l=h.indent}const{indentSize:c}=this._context.viewModel.model.getOptions(),d=[];for(let h=e;h<=t;h++){const u=new Array;d.push(u);const f=i?i[h-e]:[],g=new gd(f),p=o?o[h-e]:0;for(let _=1;_<=p;_++){const b=(_-1)*c+1,v=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||f.length===0)&&r<=h&&h<=a&&_===l;u.push(...g.takeWhile(w=>w.visibleColumn<b)||[]);const C=g.peek();(!C||C.visibleColumn!==b||C.horizontalLine)&&u.push(new Nf(b,-1,`core-guide-indent lvl-${(_-1)%30}`+(v?" indent-active":""),null,-1,-1))}u.push(...g.takeWhile(_=>!0)||[])}return d}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}function ap(s){if(!(s&&s.isTransparent()))return s}Er((s,e)=>{const t=[{bracketColor:OG,guideColor:pge,guideColorActive:yge},{bracketColor:FG,guideColor:_ge,guideColorActive:Sge},{bracketColor:WG,guideColor:bge,guideColorActive:kge},{bracketColor:BG,guideColor:vge,guideColorActive:Lge},{bracketColor:HG,guideColor:Cge,guideColorActive:xge},{bracketColor:VG,guideColor:wge,guideColorActive:Dge}],n=new QG,i=[{indentColor:A0,indentColorActive:P0},{indentColor:Zfe,indentColorActive:ege},{indentColor:Yfe,indentColorActive:tge},{indentColor:Xfe,indentColorActive:nge},{indentColor:Qfe,indentColorActive:ige},{indentColor:Jfe,indentColorActive:sge}],o=t.map(a=>{const l=s.getColor(a.bracketColor),c=s.getColor(a.guideColor),d=s.getColor(a.guideColorActive),h=ap(ap(c)??(l==null?void 0:l.transparent(.3))),u=ap(ap(d)??l);if(!(!h||!u))return{guideColor:h,guideColorActive:u}}).filter(Vl),r=i.map(a=>{const l=s.getColor(a.indentColor),c=s.getColor(a.indentColorActive),d=ap(l),h=ap(c);if(!(!d||!h))return{indentColor:d,indentColorActive:h}}).filter(Vl);if(o.length>0){for(let a=0;a<30;a++){const l=o[a%o.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${n.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${n.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${n.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(r.length>0){for(let a=0;a<30;a++){const l=r[a%r.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});class IR{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(e,t){this._domNode=e,this.endNode=t,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}class QCe{constructor(){this._currentVisibleRange=new L(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}}class JCe{constructor(e,t,n,i,o,r,a){this.minimalReveal=e,this.lineNumber=t,this.startColumn=n,this.endColumn=i,this.startScrollTop=o,this.stopScrollTop=r,this.scrollType=a,this.type="range",this.minLineNumber=t,this.maxLineNumber=t}}class ewe{constructor(e,t,n,i,o){this.minimalReveal=e,this.selections=t,this.startScrollTop=n,this.stopScrollTop=i,this.scrollType=o,this.type="selections";let r=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,c=t.length;l<c;l++){const d=t[l];r=Math.min(r,d.startLineNumber),a=Math.max(a,d.endLineNumber)}this.minLineNumber=r,this.maxLineNumber=a}}const lI=class lI extends Io{constructor(e,t){super(e);const n=this._context.configuration,i=this._context.configuration.options,o=i.get(50),r=i.get(147);this._lineHeight=i.get(67),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=r.isViewportWrapping,this._revealHorizontalRightPadding=i.get(101),this._cursorSurroundingLines=i.get(29),this._cursorSurroundingLinesStyle=i.get(30),this._canUseLayerHinting=!i.get(32),this._viewLineOptions=new IV(n,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new bY({createLine:()=>new Vc(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,Xa.write(this.domNode,8),this.domNode.setClassName(`view-lines ${A_}`),Ii(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new It(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new It(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new QCe,this._horizontalRevealRequest=null,this._stickyScrollEnabled=i.get(116).enabled,this._maxNumberStickyLines=i.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(147)&&(this._maxLineWidth=0);const t=this._context.configuration.options,n=t.get(50),i=t.get(147);return this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(101),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(116).enabled,this._maxNumberStickyLines=t.get(116).maxLineCount,Ii(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const e=this._context.configuration,t=new IV(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=n;o<=i;o++)this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=!1;for(let o=t;o<=n;o++)i=this._visibleLines.getVisibleLine(o).onSelectionChanged()||i;return i}onDecorationsChanged(e){{const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){const t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){const t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new JCe(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new ewe(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;const o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){const t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){const n=this._getViewLineDomNode(e);if(n===null)return null;const i=this._getLineNumberFor(n);if(i===-1||i<1||i>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(i)===1)return new A(i,1);const o=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(i<o||i>r)return null;let a=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(e,t);const l=this._context.viewModel.getLineMinColumn(i);return a<l&&(a=l),new A(i,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===Vc.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++){const o=this._visibleLines.getVisibleLine(i);if(e===o.getDomNode())return i}return-1}getLineWidth(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();if(e<t||e>n)return-1;const i=new IR(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getWidth(i);return this._updateLineWidthsSlowIfDomDidLayout(i),o}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;const n=e.endLineNumber,i=L.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;const o=[];let r=0;const a=new IR(this.domNode.domNode,this._textRangeRestingSpot);let l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new A(i.startLineNumber,1)).lineNumber);const c=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let h=i.startLineNumber;h<=i.endLineNumber;h++){if(h<c||h>d)continue;const u=h===i.startLineNumber?i.startColumn:1,f=h!==i.endLineNumber,g=f?this._context.viewModel.getLineMaxColumn(h):i.endColumn,p=this._visibleLines.getVisibleLine(h).getVisibleRangesForRange(h,u,g,a);if(p){if(t&&h<n){const _=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new A(h+1,1)).lineNumber,_!==l&&(p.ranges[p.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[r++]=new Wve(p.outsideRenderedLine,h,pE.from(p.ranges),f)}}return this._updateLineWidthsSlowIfDomDidLayout(a),r===0?null:o}_visibleRangesForLineRange(e,t,n){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;const i=new IR(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,i);return this._updateLineWidthsSlowIfDomDidLayout(i),o}visibleRangeForPosition(e){const t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new Bve(t.outsideRenderedLine,t.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){const t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();let i=1,o=!0;for(let r=t;r<=n;r++){const a=this._visibleLines.getVisibleLine(r);if(e&&!a.getWidthIsFast()){o=!1;continue}i=Math.max(i,a.getWidth(null))}return o&&t===1&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1;const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=n;o<=i;o++){const r=this._visibleLines.getVisibleLine(o);if(r.needsMonospaceFontCheck()){const a=r.getWidth(null);a>t&&(t=a,e=o)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let o=n;o<=i;o++)this._visibleLines.getVisibleLine(o).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const i=this._computeScrollLeftToReveal(n);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:i.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),Ds&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=n;o<=i;o++)if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){const t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,i,o,r){const a=e.top,l=e.height,c=a+l;let d,h,u;if(o&&o.length>0){let b=o[0].startLineNumber,v=o[0].endLineNumber;for(let C=1,w=o.length;C<w;C++){const y=o[C];b=Math.min(b,y.startLineNumber),v=Math.max(v,y.endLineNumber)}d=!1,h=this._context.viewLayout.getVerticalOffsetForLineNumber(b),u=this._context.viewLayout.getVerticalOffsetForLineNumber(v)+this._lineHeight}else if(i)d=!0,h=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),u=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight;else return-1;const f=(t==="mouse"||n)&&this._cursorSurroundingLinesStyle==="default";let g=0,p=0;if(f)n||(g=this._lineHeight);else{const b=l/this._lineHeight,v=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),C=Math.min(b/2,v);g=C*this._lineHeight,p=Math.max(0,C-1)*this._lineHeight}n||(r===0||r===4)&&(p+=this._lineHeight),h-=g,u+=p;let _;if(u-h>l){if(!d)return-1;_=h}else if(r===5||r===6)if(r===6&&a<=h&&u<=c)_=a;else{const b=Math.max(5*this._lineHeight,l*.2),v=h-b,C=u-l;_=Math.max(C,v)}else if(r===1||r===2)if(r===2&&a<=h&&u<=c)_=a;else{const b=(h+u)/2;_=Math.max(0,b-l/2)}else _=this._computeMinimumScrolling(a,c,h,u,r===3,r===4);return _}_computeScrollLeftToReveal(e){const t=this._context.viewLayout.getCurrentViewport(),n=this._context.configuration.options.get(146),i=t.left,o=i+t.width-n.verticalScrollbarWidth;let r=1073741824,a=0;if(e.type==="range"){const c=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!c)return null;for(const d of c.ranges)r=Math.min(r,Math.round(d.left)),a=Math.max(a,Math.round(d.left+d.width))}else for(const c of e.selections){if(c.startLineNumber!==c.endLineNumber)return null;const d=this._visibleRangesForLineRange(c.startLineNumber,c.startColumn,c.endColumn);if(!d)return null;for(const h of d.ranges)r=Math.min(r,Math.round(h.left)),a=Math.max(a,Math.round(h.left+h.width))}return e.minimalReveal||(r=Math.max(0,r-lI.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-r>t.width?null:{scrollLeft:this._computeMinimumScrolling(i,o,r,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,n,i,o,r){e=e|0,t=t|0,n=n|0,i=i|0,o=!!o,r=!!r;const a=t-e;if(i-n<a){if(o)return n;if(r)return Math.max(0,i-a);if(n<e)return n;if(i>t)return Math.max(0,i-a)}else return n;return e}};lI.HORIZONTAL_EXTRA_PX=30;let NO=lI;class twe extends wY{constructor(e){super(),this._context=e;const n=this._context.configuration.options.get(146);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const n=this._context.configuration.options.get(146);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.linesDecorationsClassName,c=a.options.zIndex;l&&(n[i++]=new EO(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,c));const d=a.options.firstLineDecorationClassName;d&&(n[i++]=new EO(a.range.startLineNumber,a.range.startLineNumber,d,a.options.linesDecorationsTooltip??null,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o=this._decorationsLeft.toString(),r=this._decorationsWidth.toString(),a='" style="left:'+o+"px;width:"+r+'px;"></div>',l=[];for(let c=t;c<=n;c++){const d=c-t,h=i[d].getDecorations();let u="";for(const f of h){let g='<div class="cldr '+f.className;f.tooltip!==null&&(g+='" title="'+f.tooltip),g+=a,u+=g}l[d]=u}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}class nwe extends wY{constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){const t=e.getDecorationsInViewport(),n=[];let i=0;for(let o=0,r=t.length;o<r;o++){const a=t[o],l=a.options.marginClassName,c=a.options.zIndex;l&&(n[i++]=new EO(a.range.startLineNumber,a.range.endLineNumber,l,null,c))}return n}prepareRender(e){const t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o=[];for(let r=t;r<=n;r++){const a=r-t,l=i[a].getDecorations();let c="";for(const d of l)c+='<div class="cmdr '+d.className+'" style=""></div>';o[a]=c}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}}const th=class th{constructor(e,t,n,i){this._rgba8Brand=void 0,this.r=th._clamp(e),this.g=th._clamp(t),this.b=th._clamp(n),this.a=th._clamp(i)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};th.Empty=new th(0,0,0,0);let ld=th;const cI=class cI extends F{static getInstance(){return this._INSTANCE||(this._INSTANCE=new cI),this._INSTANCE}constructor(){super(),this._onDidChange=new O,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(mn.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const e=mn.getColorMap();if(!e){this._colors=[ld.Empty],this._backgroundIsLight=!0;return}this._colors=[ld.Empty];for(let n=1;n<e.length;n++){const i=e[n].rgba;this._colors[n]=new ld(i.r,i.g,i.b,Math.round(i.a*255))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};cI._INSTANCE=null;let rx=cI;const iwe=(()=>{const s=[];for(let e=32;e<=126;e++)s.push(e);return s.push(65533),s})(),swe=(s,e)=>(s-=32,s<0||s>96?e<=2?(s+96)%96:95:s);class D1{constructor(e,t){this.scale=t,this._minimapCharRendererBrand=void 0,this.charDataNormal=D1.soften(e,12/15),this.charDataLight=D1.soften(e,50/60)}static soften(e,t){const n=new Uint8ClampedArray(e.length);for(let i=0,o=e.length;i<o;i++)n[i]=qk(e[i]*t);return n}renderChar(e,t,n,i,o,r,a,l,c,d,h){const u=1*this.scale,f=2*this.scale,g=h?1:f;if(t+u>e.width||n+g>e.height){console.warn("bad render request outside image data");return}const p=d?this.charDataLight:this.charDataNormal,_=swe(i,c),b=e.width*4,v=a.r,C=a.g,w=a.b,y=o.r-v,k=o.g-C,x=o.b-w,D=Math.max(r,l),N=e.data;let W=_*u*f,B=n*b+t*4;for(let z=0;z<g;z++){let U=B;for(let H=0;H<u;H++){const X=p[W++]/255*(r/255);N[U++]=v+y*X,N[U++]=C+k*X,N[U++]=w+x*X,N[U++]=D}B+=b}}blockRenderChar(e,t,n,i,o,r,a,l){const c=1*this.scale,d=2*this.scale,h=l?1:d;if(t+c>e.width||n+h>e.height){console.warn("bad render request outside image data");return}const u=e.width*4,f=.5*(o/255),g=r.r,p=r.g,_=r.b,b=i.r-g,v=i.g-p,C=i.b-_,w=g+b*f,y=p+v*f,k=_+C*f,x=Math.max(o,a),D=e.data;let N=n*u+t*4;for(let W=0;W<h;W++){let B=N;for(let z=0;z<c;z++)D[B++]=w,D[B++]=y,D[B++]=k,D[B++]=x;N+=u}}}const FV={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},WV=s=>{const e=new Uint8ClampedArray(s.length/2);for(let t=0;t<s.length;t+=2)e[t>>1]=FV[s[t]]<<4|FV[s[t+1]]&15;return e},BV={1:iu(()=>WV("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:iu(()=>WV("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};class UC{static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return BV[e]?n=new D1(BV[e](),e):n=UC.createFromSampleData(UC.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){const t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let i=0;for(const o of iwe)n.fillText(String.fromCharCode(o),i,16/2),i+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){if(e.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const i=UC._downsample(e,t);return new D1(i,t)}static _downsampleChar(e,t,n,i,o){const r=1*o,a=2*o;let l=i,c=0;for(let d=0;d<a;d++){const h=d/a*16,u=(d+1)/a*16;for(let f=0;f<r;f++){const g=f/r*10,p=(f+1)/r*10;let _=0,b=0;for(let C=h;C<u;C++){const w=t+Math.floor(C)*3840,y=1-(C-Math.floor(C));for(let k=g;k<p;k++){const x=1-(k-Math.floor(k)),D=w+Math.floor(k)*4,N=x*y;b+=N,_+=e[D]*e[D+3]/255*N}}const v=_/b;c=Math.max(c,v),n[l++]=qk(v)}}return c}static _downsample(e,t){const n=2*t*1*t,i=n*96,o=new Uint8ClampedArray(i);let r=0,a=0,l=0;for(let c=0;c<96;c++)l=Math.max(l,this._downsampleChar(e,a,o,r,t)),r+=n,a+=10*4;if(l>0){const c=255/l;for(let d=0;d<i;d++)o[d]*=c}return o}}const yY=Bi?'"Segoe WPC", "Segoe UI", sans-serif':et?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif',owe=140,rwe=2;class F_{constructor(e,t,n){const i=e.options,o=i.get(144),r=i.get(146),a=r.minimap,l=i.get(50),c=i.get(73);this.renderMinimap=a.renderMinimap,this.size=c.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=i.get(106),this.paddingTop=i.get(84).top,this.paddingBottom=i.get(84).bottom,this.showSlider=c.showSlider,this.autohide=c.autohide,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(67),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=r.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=r.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=yY,this.sectionHeaderFontSize=c.sectionHeaderFontSize*o,this.sectionHeaderLetterSpacing=c.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=F_._getSectionHeaderColor(t,n.getColor(1)),this.charRenderer=iu(()=>UC.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=F_._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=F_._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){const n=e.getColor(Yle);return n?new ld(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){const t=e.getColor(Xle);return t?ld._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){const n=e.getColor(sc);return n?new ld(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}}class jC{constructor(e,t,n,i,o,r,a,l,c){this.scrollTop=e,this.scrollHeight=t,this.sliderNeeded=n,this._computedSliderRatio=i,this.sliderTop=o,this.sliderHeight=r,this.topPaddingLineCount=a,this.startLineNumber=l,this.endLineNumber=c}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumber,e.endLineNumber);return t>n?null:[t,n]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,n,i,o,r,a,l,c,d,h){const u=e.pixelRatio,f=e.minimapLineHeight,g=Math.floor(e.canvasInnerHeight/f),p=e.lineHeight;if(e.minimapHeightIsEditorHeight){let k=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(k+=Math.max(0,o-e.lineHeight-e.paddingBottom));const x=Math.max(1,Math.floor(o*o/k)),D=Math.max(0,e.minimapHeight-x),N=D/(d-o),W=c*N,B=D>0,z=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),U=Math.floor(e.paddingTop/e.lineHeight);return new jC(c,d,B,N,W,x,U,1,Math.min(a,z))}let _;if(r&&n!==a){const k=n-t+1;_=Math.floor(k*f/u)}else{const k=o/p;_=Math.floor(k*f/u)}const b=Math.floor(e.paddingTop/p);let v=Math.floor(e.paddingBottom/p);if(e.scrollBeyondLastLine){const k=o/p;v=Math.max(v,k-1)}let C;if(v>0){const k=o/p;C=(b+a+v-k-1)*f/u}else C=Math.max(0,(b+a)*f/u-_);C=Math.min(e.minimapHeight-_,C);const w=C/(d-o),y=c*w;if(g>=b+a+v){const k=C>0;return new jC(c,d,k,w,y,_,b,1,a)}else{let k;t>1?k=t+b:k=Math.max(1,c/p);let x,D=Math.max(1,Math.floor(k-y*u/f));D<b?(x=b-D+1,D=1):(x=0,D=Math.max(1,D-b)),h&&h.scrollHeight===d&&(h.scrollTop>c&&(D=Math.min(D,h.startLineNumber),x=Math.max(x,h.topPaddingLineCount)),h.scrollTop<c&&(D=Math.max(D,h.startLineNumber),x=Math.min(x,h.topPaddingLineCount)));const N=Math.min(a,D-x+g-1),W=(c-i)/p;let B;return c>=e.paddingTop?B=(t-D+x+W)*f/u:B=c/e.paddingTop*(x+W)*f/u,new jC(c,d,!0,w,B,_,x,D,N)}}}const dI=class dI{constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}};dI.INVALID=new dI(-1);let ax=dI;class HV{constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new _Y({createLine:()=>ax.INVALID}),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;const n=this._renderedLines._get().lines;for(let i=0,o=n.length;i<o;i++)if(n[i].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){const e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}}class OW{constructor(e,t,n,i){this._backgroundFillData=OW._createBackgroundFillData(t,n,i),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){const i=n.r,o=n.g,r=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4);let c=0;for(let d=0;d<t;d++)for(let h=0;h<e;h++)l[c]=i,l[c+1]=o,l[c+2]=r,l[c+3]=a,c+=4;return l}}class I1{static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];const{minimapLineCount:i}=p_.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),o=t/i,r=o/2;if(!n||n.minimapLines.length===0){const _=[];if(_[0]=1,i>1){for(let b=0,v=i-1;b<v;b++)_[b]=Math.round(b*o+r);_[i-1]=t}return[new I1(o,_),[]]}const a=n.minimapLines,l=a.length,c=[];let d=0,h=0,u=1;const f=10;let g=[],p=null;for(let _=0;_<i;_++){const b=Math.max(u,Math.round(_*o)),v=Math.max(b,Math.round((_+1)*o));for(;d<l&&a[d]<b;){if(g.length<f){const w=d+1+h;p&&p.type==="deleted"&&p._oldIndex===d-1?p.deleteToLineNumber++:(p={type:"deleted",_oldIndex:d,deleteFromLineNumber:w,deleteToLineNumber:w},g.push(p)),h--}d++}let C;if(d<l&&a[d]<=v)C=a[d],d++;else if(_===0?C=1:_+1===i?C=t:C=Math.round(_*o+r),g.length<f){const w=d+1+h;p&&p.type==="inserted"&&p._i===_-1?p.insertToLineNumber++:(p={type:"inserted",_i:_,insertFromLineNumber:w,insertToLineNumber:w},g.push(p)),h++}c[_]=C,u=C}if(g.length<f)for(;d<l;){const _=d+1+h;p&&p.type==="deleted"&&p._oldIndex===d-1?p.deleteToLineNumber++:(p={type:"deleted",_oldIndex:d,deleteFromLineNumber:_,deleteToLineNumber:_},g.push(p)),h--,d++}else g=[{type:"flush"}];return[new I1(o,c),g]}constructor(e,t){this.samplingRatio=e,this.minimapLines=t}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let i=this.modelLineToMinimapLine(t)-1;for(;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){const o=this.minimapLines[n];if(o<e||o>t)return null}return[n+1,i+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}onLinesDeleted(e){const t=e.toLineNumber-e.fromLineNumber+1;let n=this.minimapLines.length,i=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,o),i=Math.max(i,o)):this.minimapLines[o]-=t;return[n,i]}onLinesInserted(e){const t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}}class awe extends Io{constructor(e){super(e),this._sectionHeaderCache=new ic(10,1.5),this.tokensColorTracker=rx.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new F_(this._context.configuration,this._context.theme,this.tokensColorTracker);const[t]=I1.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new $p(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const e=new F_(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){const t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){const[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){const t=[];for(const n of e.ranges){const i=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);i&&t.push({fromLineNumber:i[0],toLineNumber:i[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));const i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}_recreateLineSampling(){this._minimapSelections=null;const e=!!this._samplingState,[t,n]=I1.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(const i of n)switch(i.type){case"deleted":this._actual.onLinesDeleted(i.deleteFromLineNumber,i.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(i.insertFromLineNumber,i.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){const i=[];for(let o=0,r=t-e+1;o<r;o++)n[o]?i[o]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+o-1]):i[o]=null;return i}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const e of this._selections){const[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new me(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){const n=this._getMinimapDecorationsInViewport(e,t).filter(i=>{var o;return!((o=i.options.minimap)!=null&&o.sectionHeaderStyle)});if(this._samplingState){const i=[];for(const o of n){if(!o.options.minimap)continue;const r=o.range,a=this._samplingState.modelLineToMinimapLine(r.startLineNumber),l=this._samplingState.modelLineToMinimapLine(r.endLineNumber);i.push(new sY(new L(a,r.startColumn,l,r.endColumn),o.options))}return i}return n}getSectionHeaderDecorationsInViewport(e,t){const n=this.options.minimapLineHeight,o=this.options.sectionHeaderFontSize/n;return e=Math.floor(Math.max(1,e-o)),this._getMinimapDecorationsInViewport(e,t).filter(r=>{var a;return!!((a=r.options.minimap)!=null&&a.sectionHeaderStyle)})}_getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){const i=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];n=new L(i,1,o,this._context.viewModel.getLineMaxColumn(o))}else n=new L(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(n)}getSectionHeaderText(e,t){var r;const n=(r=e.options.minimap)==null?void 0:r.sectionHeaderText;if(!n)return null;const i=this._sectionHeaderCache.get(n);if(i)return i;const o=t(n);return this._sectionHeaderCache.set(n,o),o}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new L(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}}class $p extends F{constructor(e,t){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(O6),this._domNode=Ct(document.createElement("div")),Xa.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Ct(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Ct(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Ct(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Ct(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Ct(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=hn(this._domNode.domNode,ee.POINTER_DOWN,n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.button===0&&this._lastRenderData){const c=Sn(this._slider.domNode),d=c.top+c.height/2;this._startSliderDragging(n,d,this._lastRenderData.renderedLayout)}return}const o=this._model.options.minimapLineHeight,r=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.offsetY;let l=Math.floor(r/o)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new tv,this._sliderPointerDownListener=hn(this._slider.domNode,ee.POINTER_DOWN,n=>{n.preventDefault(),n.stopPropagation(),n.button===0&&this._lastRenderData&&this._startSliderDragging(n,n.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Ki.addTarget(this._domNode.domNode),this._sliderTouchStartListener=$(this._domNode.domNode,Ft.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=$(this._domNode.domNode,Ft.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=hn(this._domNode.domNode,Ft.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n){if(!e.target||!(e.target instanceof Element))return;const i=e.pageX;this._slider.toggleClassName("active",!0);const o=(r,a)=>{const l=Sn(this._domNode.domNode),c=Math.min(Math.abs(a-i),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(Bi&&c>owe){this._model.setScrollTop(n.scrollTop);return}const d=r-t;this._model.setScrollTop(n.getDesiredScrollTopFromDelta(d))};e.pageY!==t&&o(e.pageY,i),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>o(r.pageY,r.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){const t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new OW(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){var n;return(n=this._lastRenderData)==null||n.onLinesDeleted(e,t),!0}onLinesInserted(e,t){var n;return(n=this._lastRenderData)==null||n.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(O6),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const n=jC.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;const t=this._model.getSelections();t.sort(L.compareRangesUsingStarts);const n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((u,f)=>(u.options.zIndex||0)-(f.options.zIndex||0));const{canvasInnerWidth:i,canvasInnerHeight:o}=this._model.options,r=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,c=this._decorationsCanvas.domNode.getContext("2d");c.clearRect(0,0,i,o);const d=new VV(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(c,t,d,e,r),this._renderDecorationsLineHighlights(c,n,d,e,r);const h=new VV(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(c,t,h,e,r,l,a,i),this._renderDecorationsHighlights(c,n,h,e,r,l,a,i),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,n,i,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let r=0,a=0;for(const l of t){const c=i.intersectWithViewport(l);if(!c)continue;const[d,h]=c;for(let g=d;g<=h;g++)n.set(g,!0);const u=i.getYForLineNumber(d,o),f=i.getYForLineNumber(h,o);a>=u||(a>r&&e.fillRect(gl,r,e.canvas.width,a-r),r=u),a=f}a>r&&e.fillRect(gl,r,e.canvas.width,a-r)}_renderDecorationsLineHighlights(e,t,n,i,o){const r=new Map;for(let a=t.length-1;a>=0;a--){const l=t[a],c=l.options.minimap;if(!c||c.position!==1)continue;const d=i.intersectWithViewport(l.range);if(!d)continue;const[h,u]=d,f=c.getColor(this._theme.value);if(!f||f.isTransparent())continue;let g=r.get(f.toString());g||(g=f.transparent(.5).toString(),r.set(f.toString(),g)),e.fillStyle=g;for(let p=h;p<=u;p++){if(n.has(p))continue;n.set(p,!0);const _=i.getYForLineNumber(h,o);e.fillRect(gl,_,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,n,i,o,r,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const c of t){const d=i.intersectWithViewport(c);if(!d)continue;const[h,u]=d;for(let f=h;f<=u;f++)this.renderDecorationOnLine(e,n,c,this._selectionColor,i,f,o,o,r,a,l)}}_renderDecorationsHighlights(e,t,n,i,o,r,a,l){for(const c of t){const d=c.options.minimap;if(!d)continue;const h=i.intersectWithViewport(c.range);if(!h)continue;const[u,f]=h,g=d.getColor(this._theme.value);if(!(!g||g.isTransparent()))for(let p=u;p<=f;p++)switch(d.position){case 1:this.renderDecorationOnLine(e,n,c.range,g,i,p,o,o,r,a,l);continue;case 2:{const _=i.getYForLineNumber(p,o);this.renderDecoration(e,g,2,_,rwe,o);continue}}}}renderDecorationOnLine(e,t,n,i,o,r,a,l,c,d,h){const u=o.getYForLineNumber(r,l);if(u+a<0||u>this._model.options.canvasInnerHeight)return;const{startLineNumber:f,endLineNumber:g}=n,p=f===r?n.startColumn:1,_=g===r?n.endColumn:this._model.getLineMaxColumn(r),b=this.getXOffsetForPosition(t,r,p,c,d,h),v=this.getXOffsetForPosition(t,r,_,c,d,h);this.renderDecoration(e,i,b,u,v-b,a)}getXOffsetForPosition(e,t,n,i,o,r){if(n===1)return gl;if((n-1)*o>=r)return r;let l=e.get(t);if(!l){const c=this._model.getLineContent(t);l=[gl];let d=gl;for(let h=1;h<c.length+1;h++){const u=c.charCodeAt(h-1),f=u===9?i*o:ru(u)?2*o:o,g=d+f;if(g>=r){l[h]=r;break}l[h]=g,d=g}e.set(t,l)}return n-1<l.length?l[n-1]:r}renderDecoration(e,t,n,i,o,r){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,o,r)}_renderSectionHeaders(e){var p;const t=this._model.options.minimapLineHeight,n=this._model.options.sectionHeaderFontSize,i=this._model.options.sectionHeaderLetterSpacing,o=n*1.5,{canvasInnerWidth:r}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,c=this._model.options.sectionHeaderFontColor,d=`rgb(${c.r} ${c.g} ${c.b})`,h=d,u=this._decorationsCanvas.domNode.getContext("2d");u.letterSpacing=i+"px",u.font="500 "+n+"px "+this._model.options.sectionHeaderFontFamily,u.strokeStyle=h,u.lineWidth=.2;const f=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);f.sort((_,b)=>_.range.startLineNumber-b.range.startLineNumber);const g=$p._fitSectionHeader.bind(null,u,r-gl);for(const _ of f){const b=e.getYForLineNumber(_.range.startLineNumber,t)+n,v=b-n,C=v+2,w=this._model.getSectionHeaderText(_,g);$p._renderSectionLabel(u,w,((p=_.options.minimap)==null?void 0:p.sectionHeaderStyle)===2,l,d,r,v,o,b,C)}}static _fitSectionHeader(e,t,n){if(!n)return n;const i="…",o=e.measureText(n).width,r=e.measureText(i).width;if(o<=t||o<=r)return n;const a=n.length,l=o/n.length,c=Math.floor((t-r)/l)-1;let d=Math.ceil(c/2);for(;d>0&&/\s/.test(n[d-1]);)--d;return n.substring(0,d)+i+n.substring(a-(c-d))}static _renderSectionLabel(e,t,n,i,o,r,a,l,c,d){t&&(e.fillStyle=i,e.fillRect(0,a,r,l),e.fillStyle=o,e.fillText(t,gl,c)),n&&(e.beginPath(),e.moveTo(0,d),e.lineTo(r,d),e.closePath(),e.stroke())}renderLines(e){const t=e.startLineNumber,n=e.endLineNumber,i=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){const X=this._lastRenderData._get();return new HV(e,X.imageData,X.lines)}const o=this._getBuffer();if(!o)return null;const[r,a,l]=$p._renderUntouchedLines(o,e.topPaddingLineCount,t,n,i,this._lastRenderData),c=this._model.getMinimapLinesRenderingData(t,n,l),d=this._model.getOptions().tabSize,h=this._model.options.defaultBackgroundColor,u=this._model.options.backgroundColor,f=this._model.options.foregroundAlpha,g=this._model.tokensColorTracker,p=g.backgroundIsLight(),_=this._model.options.renderMinimap,b=this._model.options.charRenderer(),v=this._model.options.fontScale,C=this._model.options.minimapCharWidth,y=(_===1?2:3)*v,k=i>y?Math.floor((i-y)/2):0,x=u.a/255,D=new ld(Math.round((u.r-h.r)*x+h.r),Math.round((u.g-h.g)*x+h.g),Math.round((u.b-h.b)*x+h.b),255);let N=e.topPaddingLineCount*i;const W=[];for(let X=0,re=n-t+1;X<re;X++)l[X]&&$p._renderLine(o,D,u.a,p,_,C,g,f,b,N,k,d,c[X],v,i),W[X]=new ax(N),N+=i;const B=r===-1?0:r,U=(a===-1?o.height:a)-B;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,B,o.width,U),new HV(e,o,W)}static _renderUntouchedLines(e,t,n,i,o,r){const a=[];if(!r){for(let N=0,W=i-n+1;N<W;N++)a[N]=!0;return[-1,-1,a]}const l=r._get(),c=l.imageData.data,d=l.rendLineNumberStart,h=l.lines,u=h.length,f=e.width,g=e.data,p=(i-n+1)*o*f*4;let _=-1,b=-1,v=-1,C=-1,w=-1,y=-1,k=t*o;for(let N=n;N<=i;N++){const W=N-n,B=N-d,z=B>=0&&B<u?h[B].dy:-1;if(z===-1){a[W]=!0,k+=o;continue}const U=z*f*4,H=(z+o)*f*4,X=k*f*4,re=(k+o)*f*4;C===U&&y===X?(C=H,y=re):(v!==-1&&(g.set(c.subarray(v,C),w),_===-1&&v===0&&v===w&&(_=C),b===-1&&C===p&&v===w&&(b=v)),v=U,C=H,w=X,y=re),a[W]=!1,k+=o}v!==-1&&(g.set(c.subarray(v,C),w),_===-1&&v===0&&v===w&&(_=C),b===-1&&C===p&&v===w&&(b=v));const x=_===-1?-1:_/(f*4),D=b===-1?-1:b/(f*4);return[x,D,a]}static _renderLine(e,t,n,i,o,r,a,l,c,d,h,u,f,g,p){const _=f.content,b=f.tokens,v=e.width-r,C=p===1;let w=gl,y=0,k=0;for(let x=0,D=b.getCount();x<D;x++){const N=b.getEndOffset(x),W=b.getForeground(x),B=a.getColor(W);for(;y<N;y++){if(w>v)return;const z=_.charCodeAt(y);if(z===9){const U=u-(y+k)%u;k+=U-1,w+=U*r}else if(z===32)w+=r;else{const U=ru(z)?2:1;for(let H=0;H<U;H++)if(o===2?c.blockRenderChar(e,w,d+h,B,l,t,n,C):c.renderChar(e,w,d+h,z,B,l,t,n,g,i,C),w+=r,w>v)return}}}}}class VV{constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let i=0,o=this._endLineNumber-this._startLineNumber+1;i<o;i++)this._values[i]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}}class lwe extends Io{constructor(e,t){super(e),this._viewDomNode=t;const i=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=Ct(document.createElement("div")),Xa.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=Ct(document.createElement("div")),Xa.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const n=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){const t=Ct(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const n=this._widgets[e.getId()],i=t?t.preference:null,o=t==null?void 0:t.stackOridinal;return n.preference===i&&n.stack===o?(this._updateMaxMinWidth(),!1):(n.preference=i,n.stack=o,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var n,i;let e=0;const t=Object.keys(this._widgets);for(let o=0,r=t.length;o<r;o++){const a=t[o],c=(i=(n=this._widgets[a].widget).getMinContentWidthInPx)==null?void 0:i.call(n);typeof c<"u"&&(e=Math.max(e,c))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){const n=e.domNode;if(e.preference===null){n.setTop("");return}const i=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){const o=n.domNode.clientHeight;n.setTop(this._editorHeight-o-2*this._horizontalScrollbarHeight)}else n.setTop(0);e.stack!==void 0?(n.setTop(t[e.preference]),t[e.preference]+=n.domNode.clientWidth):n.setRight(i)}else if(e.preference===2)n.domNode.style.right="50%",e.stack!==void 0?(n.setTop(t[2]),t[2]+=n.domNode.clientHeight):n.setTop(0);else{const{top:o,left:r}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const l=this._viewDomNodeRect;n.setTop(o+l.top),n.setLeft(r+l.left),n.setPosition("fixed")}else n.setTop(o),n.setLeft(r),n.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=Sn(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),n=Array.from({length:3},()=>0);t.sort((i,o)=>(this._widgets[i].stack||0)-(this._widgets[o].stack||0));for(let i=0,o=t.length;i<o;i++){const r=t[i];this._renderWidget(this._widgets[r],n)}}}class cwe{constructor(e,t){const n=e.options;this.lineHeight=n.get(67),this.pixelRatio=n.get(144),this.overviewRulerLanes=n.get(83),this.renderBorder=n.get(82);const i=t.getColor(age);this.borderColor=i?i.toString():null,this.hideCursor=n.get(59);const o=t.getColor(sE);this.cursorColorSingle=o?o.transparent(.7).toString():null;const r=t.getColor(MG);this.cursorColorPrimary=r?r.transparent(.7).toString():null;const a=t.getColor(AG);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;const l=n.get(73),c=l.enabled,d=l.side,h=t.getColor(lge),u=mn.getDefaultBackground();h?this.backgroundColor=h:c&&d==="right"?this.backgroundColor=u:this.backgroundColor=null;const g=n.get(146).overviewRuler;this.top=g.top,this.right=g.right,this.domWidth=g.width,this.domHeight=g.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[p,_]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=p,this.w=_}_initLanes(e,t,n){const i=t-e;if(n>=3){const o=Math.floor(i/3),r=Math.floor(i/3),a=i-o-r,l=e,c=l+o,d=l+o+a;return[[0,l,c,l,d,l,c,l],[0,o,a,o+a,r,o+a+r,a+r,o+a+r]]}else if(n===2){const o=Math.floor(i/2),r=i-o,a=e,l=a+o;return[[0,a,a,a,l,a,a,a],[0,o,o,o,r,o+r,o+r,o+r]]}else{const o=e,r=i;return[[0,o,o,o,o,o,o,o],[0,r,r,r,r,r,r,r]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&Z.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class dwe extends Io{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=Ct(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=mn.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new A(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new cwe(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++){let i=this._settings.cursorColorSingle;n>1&&(i=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:i})}return this._cursorPositions.sort((t,n)=>A.compare(t.position,n.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?Z.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(C1.compareByRenderingProps),this._actualShouldRender===1&&!C1.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!en(this._renderedCursorPositions,this._cursorPositions,(g,p)=>g.position.lineNumber===p.position.lineNumber&&g.color===p.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const n=this._settings.canvasWidth,i=this._settings.canvasHeight,o=this._settings.lineHeight,r=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=i/a,c=6*this._settings.pixelRatio|0,d=c/2|0,h=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(h.fillStyle=Z.Format.CSS.formatHexA(e),h.fillRect(0,0,n,i)):(h.clearRect(0,0,n,i),h.fillStyle=Z.Format.CSS.formatHexA(e),h.fillRect(0,0,n,i)):h.clearRect(0,0,n,i);const u=this._settings.x,f=this._settings.w;for(const g of t){const p=g.color,_=g.data;h.fillStyle=p;let b=0,v=0,C=0;for(let w=0,y=_.length/3;w<y;w++){const k=_[3*w],x=_[3*w+1],D=_[3*w+2];let N=r.getVerticalOffsetForLineNumber(x)*l|0,W=(r.getVerticalOffsetForLineNumber(D)+o)*l|0;if(W-N<c){let z=(N+W)/2|0;z<d?z=d:z+d>i&&(z=i-d),N=z-d,W=z+d}N>C+1||k!==b?(w!==0&&h.fillRect(u[b],v,f[b],C-v),b=k,v=N,C=W):W>C&&(C=W)}h.fillRect(u[b],v,f[b],C-v)}if(!this._settings.hideCursor){const g=2*this._settings.pixelRatio|0,p=g/2|0,_=this._settings.x[7],b=this._settings.w[7];let v=-100,C=-100,w=null;for(let y=0,k=this._cursorPositions.length;y<k;y++){const x=this._cursorPositions[y].color;if(!x)continue;const D=this._cursorPositions[y].position;let N=r.getVerticalOffsetForLineNumber(D.lineNumber)*l|0;N<p?N=p:N+p>i&&(N=i-p);const W=N-p,B=W+g;W>C+1||x!==w?(y!==0&&w&&h.fillRect(_,v,b,C-v),v=W,C=B):B>C&&(C=B),w=x,h.fillStyle=x}w&&h.fillRect(_,v,b,C-v)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,i),h.moveTo(1,0),h.lineTo(n,0),h.stroke())}}class zV{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class SY{constructor(e,t,n,i){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=i,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class hwe{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(SY.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=Math.floor(this._outerHeight),o=n/i,r=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,c=this._zones.length;l<c;l++){const d=this._zones[l];if(!e){const w=d.getColorZones();if(w){a.push(w);continue}}const h=this._getVerticalOffsetForLine(d.startLineNumber),u=d.heightInLines===0?this._getVerticalOffsetForLine(d.endLineNumber)+t:h+d.heightInLines*t,f=Math.floor(o*h),g=Math.floor(o*u);let p=Math.floor((f+g)/2),_=g-p;_<r&&(_=r),p-_<0&&(p=_),p+_>n&&(p=n-_);const b=d.color;let v=this._color2Id[b];v||(v=++this._lastAssignedId,this._color2Id[b]=v,this._id2Color[v]=b);const C=new zV(p-_,p+_,v);d.setColorZone(C),a.push(C)}return this._colorZonesInvalid=!1,a.sort(zV.compare),a}}class uwe extends B0{constructor(e,t){super(),this._context=e;const n=this._context.configuration.options;this._domNode=Ct(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new hwe(i=>this._context.viewLayout.getVerticalOffsetForLineNumber(i)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(67)),this._zoneManager.setPixelRatio(n.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(144)&&(this._zoneManager.setPixelRatio(t.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(o,n,i,e),!0}_renderOneLane(e,t,n,i){let o=0,r=0,a=0;for(const l of t){const c=l.colorId,d=l.from,h=l.to;c!==o?(e.fillRect(0,r,i,a-r),o=c,e.fillStyle=n[o],r=d,a=h):a>=d?a=Math.max(a,h):(e.fillRect(0,r,i,a-r),r=d,a=h)}e.fillRect(0,r,i,a-r)}}class fwe extends Io{constructor(e){super(e),this.domNode=Ct(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.viewModel.model.getOptions(),o=i;let r=t-e;for(;r>0;){const a=Ct(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),r--}return}let n=e-t;for(;n>0;){const i=this._renderedRulers.pop();this.domNode.removeChild(i),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){const i=this._renderedRulers[t],o=this._rulers[t];i.setBoxShadow(o.color?`1px 0 0 0 ${o.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}}class gwe extends Io{constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const n=this._context.configuration.options.get(104);this._useShadows=n.useShadows,this._domNode=Ct(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const t=this._context.configuration.options.get(146);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){const n=this._context.configuration.options.get(104);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}class mwe{constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}}class pwe{constructor(e,t){this.lineNumber=e,this.ranges=t}}function _we(s){return new mwe(s)}function bwe(s){return new pwe(s.lineNumber,s.ranges.map(_we))}const Dn=class Dn extends Pm{constructor(e){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=e;const t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){const i=this._typicalHalfwidthCharacterWidth/4;let o=null,r=null;if(n&&n.length>0&&t.length>0){const a=t[0].lineNumber;if(a===e.startLineNumber)for(let c=0;!o&&c<n.length;c++)n[c].lineNumber===a&&(o=n[c].ranges[0]);const l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let c=n.length-1;!r&&c>=0;c--)n[c].lineNumber===l&&(r=n[c].ranges[0]);o&&!o.startStyle&&(o=null),r&&!r.startStyle&&(r=null)}for(let a=0,l=t.length;a<l;a++){const c=t[a].ranges[0],d=c.left,h=c.left+c.width,u={top:0,bottom:0},f={top:0,bottom:0};if(a>0){const g=t[a-1].ranges[0].left,p=t[a-1].ranges[0].left+t[a-1].ranges[0].width;Yy(d-g)<i?u.top=2:d>g&&(u.top=1),Yy(h-p)<i?f.top=2:g<h&&h<p&&(f.top=1)}else o&&(u.top=o.startStyle.top,f.top=o.endStyle.top);if(a+1<l){const g=t[a+1].ranges[0].left,p=t[a+1].ranges[0].left+t[a+1].ranges[0].width;Yy(d-g)<i?u.bottom=2:g<d&&d<p&&(u.bottom=1),Yy(h-p)<i?f.bottom=2:h<p&&(f.bottom=1)}else r&&(u.bottom=r.startStyle.bottom,f.bottom=r.endStyle.bottom);c.startStyle=u,c.endStyle=f}}_getVisibleRangesWithStyle(e,t,n){const o=(t.linesVisibleRangesForRange(e,!0)||[]).map(bwe);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,n),o}_createSelectionPiece(e,t,n,i,o){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+i.toString()+"px;width:"+o.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,n,i){if(i.length===0)return;const o=!!i[0].ranges[0].startStyle,r=i[0].lineNumber,a=i[i.length-1].lineNumber;for(let l=0,c=i.length;l<c;l++){const d=i[l],h=d.lineNumber,u=h-t,f=n&&h===r?1:0,g=n&&h!==r&&h===a?1:0;let p="",_="";for(let b=0,v=d.ranges.length;b<v;b++){const C=d.ranges[b];if(o){const y=C.startStyle,k=C.endStyle;if(y.top===1||y.bottom===1){p+=this._createSelectionPiece(f,g,Dn.SELECTION_CLASS_NAME,C.left-Dn.ROUNDED_PIECE_WIDTH,Dn.ROUNDED_PIECE_WIDTH);let x=Dn.EDITOR_BACKGROUND_CLASS_NAME;y.top===1&&(x+=" "+Dn.SELECTION_TOP_RIGHT),y.bottom===1&&(x+=" "+Dn.SELECTION_BOTTOM_RIGHT),p+=this._createSelectionPiece(f,g,x,C.left-Dn.ROUNDED_PIECE_WIDTH,Dn.ROUNDED_PIECE_WIDTH)}if(k.top===1||k.bottom===1){p+=this._createSelectionPiece(f,g,Dn.SELECTION_CLASS_NAME,C.left+C.width,Dn.ROUNDED_PIECE_WIDTH);let x=Dn.EDITOR_BACKGROUND_CLASS_NAME;k.top===1&&(x+=" "+Dn.SELECTION_TOP_LEFT),k.bottom===1&&(x+=" "+Dn.SELECTION_BOTTOM_LEFT),p+=this._createSelectionPiece(f,g,x,C.left+C.width,Dn.ROUNDED_PIECE_WIDTH)}}let w=Dn.SELECTION_CLASS_NAME;if(o){const y=C.startStyle,k=C.endStyle;y.top===0&&(w+=" "+Dn.SELECTION_TOP_LEFT),y.bottom===0&&(w+=" "+Dn.SELECTION_BOTTOM_LEFT),k.top===0&&(w+=" "+Dn.SELECTION_TOP_RIGHT),k.bottom===0&&(w+=" "+Dn.SELECTION_BOTTOM_RIGHT)}_+=this._createSelectionPiece(f,g,w,C.left,C.width)}e[u][0]+=p,e[u][1]+=_}}prepareRender(e){const t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(let r=n;r<=i;r++){const a=r-n;t[a]=["",""]}const o=[];for(let r=0,a=this._selections.length;r<a;r++){const l=this._selections[r];if(l.isEmpty()){o[r]=null;continue}const c=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[r]);o[r]=c,this._actualRenderOneSelection(t,n,this._selections.length>1,c)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([r,a])=>r+a)}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};Dn.SELECTION_CLASS_NAME="selected-text",Dn.SELECTION_TOP_LEFT="top-left-radius",Dn.SELECTION_BOTTOM_LEFT="bottom-left-radius",Dn.SELECTION_TOP_RIGHT="top-right-radius",Dn.SELECTION_BOTTOM_RIGHT="bottom-right-radius",Dn.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background",Dn.ROUNDED_PIECE_WIDTH=10;let RO=Dn;Er((s,e)=>{const t=s.getColor(Ile);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function Yy(s){return s<0?-s:s}class $V{constructor(e,t,n,i,o,r,a){this.top=e,this.left=t,this.paddingLeft=n,this.width=i,this.height=o,this.textContent=r,this.textContentClassName=a}}var Yc;(function(s){s[s.Single=0]="Single",s[s.MultiPrimary=1]="MultiPrimary",s[s.MultiSecondary=2]="MultiSecondary"})(Yc||(Yc={}));class UV{constructor(e,t){this._context=e;const n=this._context.configuration.options,i=n.get(50);this._cursorStyle=n.get(28),this._lineHeight=n.get(67),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(n.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Ct(document.createElement("div")),this._domNode.setClassName(`cursor ${A_}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Ii(this._domNode,i),this._domNode.setDisplay("none"),this._position=new A(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case Yc.Single:this._pluralityClass="";break;case Yc.MultiPrimary:this._pluralityClass="cursor-primary";break;case Yc.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(50);return this._cursorStyle=t.get(28),this._lineHeight=t.get(67),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),Ii(this._domNode,n),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){const{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[i,o]=Cie(n,t-1);return[new A(e,i+1),n.substring(i,o)]}_prepareRender(e){let t="",n="";const[i,o]=this._getGraphemeAwarePosition();if(this._cursorStyle===ki.Line||this._cursorStyle===ki.LineThin){const u=e.visibleRangeForPosition(i);if(!u||u.outsideRenderedLine)return null;const f=Le(this._domNode.domNode);let g;this._cursorStyle===ki.Line?(g=v8(f,this._lineCursorWidth>0?this._lineCursorWidth:2),g>2&&(t=o,n=this._getTokenClassName(i))):g=v8(f,1);let p=u.left,_=0;g>=2&&p>=1&&(_=1,p-=_);const b=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.bigNumbersDelta;return new $V(b,p,_,g,this._lineHeight,t,n)}const r=e.linesVisibleRangesForRange(new L(i.lineNumber,i.column,i.lineNumber,i.column+o.length),!1);if(!r||r.length===0)return null;const a=r[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;const l=a.ranges[0],c=o==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===ki.Block&&(t=o,n=this._getTokenClassName(i));let d=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.bigNumbersDelta,h=this._lineHeight;return(this._cursorStyle===ki.Underline||this._cursorStyle===ki.UnderlineThin)&&(d+=this._lineHeight-2,h=2),new $V(d,l.left,0,c,h,t,n)}_getTokenClassName(e){const t=this._context.viewModel.getViewLineData(e.lineNumber),n=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(n)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${A_} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}const Cw=class Cw extends Io{constructor(e){super(e);const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new UV(this._context,Yc.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=Ct(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new la,this._cursorFlatBlinkInterval=new U3,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){const t=this._context.configuration.options;this._readOnly=t.get(92),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,n){const i=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&n!==3;if(this._primaryCursor.setPlurality(t.length?Yc.MultiPrimary:Yc.Single),this._primaryCursor.onCursorPositionChanged(e,i),this._updateBlinking(),this._secondaryCursors.length<t.length){const o=t.length-this._secondaryCursors.length;for(let r=0;r<o;r++){const a=new UV(this._context,Yc.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){const o=this._secondaryCursors.length-t.length;for(let r=0;r<o;r++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let o=0;o<t.length;o++)this._secondaryCursors[o].onCursorPositionChanged(t[o],i)}onCursorStateChanged(e){const t=[];for(let i=0,o=e.selections.length;i<o;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);const n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){const t=n=>{for(let i=0,o=e.ranges.length;i<o;i++)if(e.ranges[i].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(const n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},Cw.BLINK_INTERVAL,Le(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},Cw.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case ki.Line:e+=" cursor-line-style";break;case ki.Block:e+=" cursor-block-style";break;case ki.Underline:e+=" cursor-underline-style";break;case ki.LineThin:e+=" cursor-line-thin-style";break;case ki.BlockOutline:e+=" cursor-block-outline-style";break;case ki.UnderlineThin:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){const t=[];let n=0;const i=this._primaryCursor.render(e);i&&(t[n++]=i);for(let o=0,r=this._secondaryCursors.length;o<r;o++){const a=this._secondaryCursors[o].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};Cw.BLINK_INTERVAL=500;let MO=Cw;Er((s,e)=>{const t=[{class:".cursor",foreground:sE,background:z9},{class:".cursor-primary",foreground:MG,background:Ufe},{class:".cursor-secondary",foreground:AG,background:jfe}];for(const n of t){const i=s.getColor(n.foreground);if(i){let o=s.getColor(n.background);o||(o=i.opposite()),e.addRule(`.monaco-editor .cursors-layer ${n.class} { background-color: ${i}; border-color: ${i}; color: ${o}; }`),Ha(s.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${n.class} { border-left: 1px solid ${o}; border-right: 1px solid ${o}; }`)}}});const TR=()=>{throw new Error("Invalid change accessor")};class vwe extends Io{constructor(e){super(e);const t=this._context.configuration.options,n=t.get(146);this._lineHeight=t.get(67),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=Ct(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Ct(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const e=this._context.viewLayout.getWhitespaces(),t=new Map;for(const i of e)t.set(i.id,i);let n=!1;return this._context.viewModel.changeWhitespace(i=>{const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],c=this._zones[l],d=this._computeWhitespaceProps(c.delegate);c.isInHiddenArea=d.isInHiddenArea;const h=t.get(l);h&&(h.afterLineNumber!==d.afterViewLineNumber||h.height!==d.heightInPx)&&(i.changeOneWhitespace(l,d.afterViewLineNumber,d.heightInPx),this._safeCallOnComputedHeight(c.delegate,d.heightInPx),n=!0)}}),n}onConfigurationChanged(e){const t=this._context.configuration.options,n=t.get(146);return this._lineHeight=t.get(67),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{const r=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new A(r,this._context.viewModel.model.getLineMaxColumn(r))}let n;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});const i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),o=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!o,afterViewLineNumber:i.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(n=>{const i={addZone:o=>(t=!0,this._addZone(n,o)),removeZone:o=>{o&&(t=this._removeZone(n,o)||t)},layoutZone:o=>{o&&(t=this._layoutZone(n,o)||t)}};Cwe(e,i),i.addZone=TR,i.removeZone=TR,i.layoutZone=TR}),t}_addZone(e,t){const n=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:Ct(t.domNode),marginDomNode:t.marginDomNode?Ct(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,n.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.remove(),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){const n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=i.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){Pe(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){Pe(n)}}prepareRender(e){}render(e){const t=e.viewportData.whitespaceViewportData,n={};let i=!1;for(const r of t)this._zones[r.id].isInHiddenArea||(n[r.id]=r,i=!0);const o=Object.keys(this._zones);for(let r=0,a=o.length;r<a;r++){const l=o[r],c=this._zones[l];let d=0,h=0,u="none";n.hasOwnProperty(l)?(d=n[l].verticalOffset-e.bigNumbersDelta,h=n[l].height,u="block",c.isVisible||(c.domNode.setAttribute("monaco-visible-view-zone","true"),c.isVisible=!0),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(c.isVisible&&(c.domNode.removeAttribute("monaco-visible-view-zone"),c.isVisible=!1),this._safeCallOnDomNodeTop(c.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),c.domNode.setTop(d),c.domNode.setHeight(h),c.domNode.setDisplay(u),c.marginDomNode&&(c.marginDomNode.setTop(d),c.marginDomNode.setHeight(h),c.marginDomNode.setDisplay(u))}i&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}function Cwe(s,e){try{return s(e)}catch(t){Pe(t)}}class wwe extends Pm{constructor(e){super(),this._context=e,this._options=new jV(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){const t=new jV(this._context.configuration);return this._options.equals(t)?e.hasChanged(146):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber-t+1,o=new Array(i);for(let a=0;a<i;a++)o[a]=!0;const r=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,o);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){const l=a-e.viewportData.startLineNumber,c=r.data[l];let d=null;if(this._options.renderWhitespace==="selection"){const h=this._selection;for(const u of h){if(u.endLineNumber<a||u.startLineNumber>a)continue;const f=u.startLineNumber===a?u.startColumn:c.minColumn,g=u.endLineNumber===a?u.endColumn:c.maxColumn;f<g&&(d||(d=[]),d.push(new tY(f-1,g-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,d,c)}}_applyRenderWhitespace(e,t,n,i){if(this._options.renderWhitespace==="selection"&&!n||this._options.renderWhitespace==="trailing"&&i.continuesWithWrappedLine)return"";const o=this._context.theme.getColor($9),r=this._options.renderWithSVG,a=i.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),c=i.continuesWithWrappedLine,d=i.minColumn-1,h=this._options.renderWhitespace==="boundary",u=this._options.renderWhitespace==="trailing",f=this._options.lineHeight,g=this._options.middotWidth,p=this._options.wsmiddotWidth,_=this._options.spaceWidth,b=Math.abs(p-_),v=Math.abs(g-_),C=b<v?11825:183,w=this._options.canUseHalfwidthRightwardsArrow;let y="",k=!1,x=ds(a),D;x===-1?(k=!0,x=l,D=l):D=Ba(a);let N=0,W=n&&n[N],B=0;for(let z=d;z<l;z++){const U=a.charCodeAt(z);if(W&&z>=W.endOffset&&(N++,W=n&&n[N]),U!==9&&U!==32||u&&!k&&z<=D)continue;if(h&&z>=x&&z<=D&&U===32){const X=z-1>=0?a.charCodeAt(z-1):0,re=z+1<l?a.charCodeAt(z+1):0;if(X!==32&&re!==32)continue}if(h&&c&&z===l-1){const X=z-1>=0?a.charCodeAt(z-1):0;if(U===32&&X!==32&&X!==9)continue}if(n&&(!W||W.startOffset>z||W.endOffset<=z))continue;const H=e.visibleRangeForPosition(new A(t,z+1));H&&(r?(B=Math.max(B,H.left),U===9?y+=this._renderArrow(f,_,H.left):y+=`<circle cx="${(H.left+_/2).toFixed(2)}" cy="${(f/2).toFixed(2)}" r="${(_/7).toFixed(2)}" />`):U===9?y+=`<div class="mwh" style="left:${H.left}px;height:${f}px;">${w?"￫":"→"}</div>`:y+=`<div class="mwh" style="left:${H.left}px;height:${f}px;">${String.fromCharCode(C)}</div>`)}return r?(B=Math.round(B+_),`<svg style="bottom:0;position:absolute;width:${B}px;height:${f}px" viewBox="0 0 ${B} ${f}" xmlns="http://www.w3.org/2000/svg" fill="${o}">`+y+"</svg>"):y}_renderArrow(e,t,n){const i=t/7,o=t,r=e/2,a=n,l={x:0,y:i/2},c={x:100/125*o,y:l.y},d={x:c.x-.2*c.x,y:c.y+.2*c.x},h={x:d.x+.1*c.x,y:d.y+.1*c.x},u={x:h.x+.35*c.x,y:h.y-.35*c.x},f={x:u.x,y:-u.y},g={x:h.x,y:-h.y},p={x:d.x,y:-d.y},_={x:c.x,y:-c.y},b={x:l.x,y:-l.y};return`<path d="M ${[l,c,d,h,u,f,g,p,_,b].map(w=>`${(a+w.x).toFixed(2)} ${(r+w.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";const n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}}class jV{constructor(e){const t=e.options,n=t.get(50),i=t.get(38);i==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):i==="svg"?(this.renderWhitespace=t.get(100),this.renderWithSVG=!0):(this.renderWhitespace=t.get(100),this.renderWithSVG=!1),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(67),this.stopRenderingLineAfter=t.get(118)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}}class ywe{constructor(e,t,n,i){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=n,this._model=i,this.visibleRange=new L(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}class Swe{get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}}class kwe{constructor(e,t,n){this.configuration=e,this.theme=new Swe(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}var Lwe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},xwe=function(s,e){return function(t,n){e(t,n,s)}};let AO=class extends B0{constructor(e,t,n,i,o,r,a){super(),this._instantiationService=a,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new me(1,1,1,1)],this._renderAnimationFrame=null;const l=new ACe(t,i,o,e);this._context=new kwe(t,n,i),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(xO,this._context,l,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=Ct(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Ct(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Ct(document.createElement("div")),Xa.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new UCe(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new NO(this._context,this._linesContent),this._viewZones=new vwe(this._context),this._viewParts.push(this._viewZones);const c=new dwe(this._context);this._viewParts.push(c);const d=new gwe(this._context);this._viewParts.push(d);const h=new OCe(this._context);this._viewParts.push(h),h.addDynamicOverlay(new VCe(this._context)),h.addDynamicOverlay(new RO(this._context)),h.addDynamicOverlay(new XCe(this._context)),h.addDynamicOverlay(new $Ce(this._context)),h.addDynamicOverlay(new wwe(this._context));const u=new FCe(this._context);this._viewParts.push(u),u.addDynamicOverlay(new zCe(this._context)),u.addDynamicOverlay(new nwe(this._context)),u.addDynamicOverlay(new twe(this._context)),u.addDynamicOverlay(new tx(this._context)),this._glyphMarginWidgets=new KCe(this._context),this._viewParts.push(this._glyphMarginWidgets);const f=new nx(this._context);f.getDomNode().appendChild(this._viewZones.marginDomNode),f.getDomNode().appendChild(u.getDomNode()),f.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(f),this._contentWidgets=new BCe(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new MO(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new lwe(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const g=new fwe(this._context);this._viewParts.push(g);const p=new WCe(this._context);this._viewParts.push(p);const _=new awe(this._context);if(this._viewParts.push(_),c){const b=this._scrollbar.getOverviewRulerLayoutInfo();b.parent.insertBefore(c.getDomNode(),b.insertBefore)}this._linesContent.appendChild(h.getDomNode()),this._linesContent.appendChild(g.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(f.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(d.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(_.getDomNode()),this._overflowGuardContainer.appendChild(p.domNode),this.domNode.appendChild(this._overflowGuardContainer),r?(r.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),r.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new nCe(this._context,l,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const e=this._context.viewModel.model,t=this._context.viewModel.glyphLanes;let n=[],i=0;n=n.concat(e.getAllMarginDecorations().map(o=>{var a,l;const r=((a=o.options.glyphMargin)==null?void 0:a.position)??ia.Center;return i=Math.max(i,o.range.endLineNumber),{range:o.range,lane:r,persist:(l=o.options.glyphMargin)==null?void 0:l.persistLane}})),n=n.concat(this._glyphMarginWidgets.getWidgets().map(o=>{const r=e.validateRange(o.preference.range);return i=Math.max(i,r.endLineNumber),{range:r,lane:o.preference.lane}})),n.sort((o,r)=>L.compareRangesUsingStarts(o.range,r.range)),t.reset(i);for(const o of n)t.push(o.lane,o.range,o.persist);return t}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:e=>{this._textAreaHandler.textArea.domNode.dispatchEvent(e)},getLastRenderData:()=>{const e=this._viewCursors.getLastRenderData()||[],t=this._textAreaHandler.getLastRenderData();return new Uve(e,t)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:e=>this._viewZones.shouldSuppressMouseDownOnViewZone(e),shouldSuppressMouseDownOnWidget:e=>this._contentWidgets.shouldSuppressMouseDownOnWidget(e),getPositionFromDOMInfo:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(e,t)),visibleRangeForPosition:(e,t)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new A(e,t))),getLineWidth:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(e))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:e=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(e))}}_applyLayout(){const t=this._context.configuration.options.get(146);this.domNode.setWidth(t.width),this.domNode.setHeight(t.height),this._overflowGuardContainer.setWidth(t.width),this._overflowGuardContainer.setHeight(t.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const e=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+uA(this._context.theme.type)+e}handleEvents(e){super.handleEvents(e),this._scheduleRender()}onConfigurationChanged(e){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(e){return this._selections=e.selections,!1}onDecorationsChanged(e){return e.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(e){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(e){return this._context.theme.update(e.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const e of this._viewParts)e.dispose();super.dispose()}_scheduleRender(){var e;if(this._store.isDisposed)throw new _t;if(this._renderAnimationFrame===null){const t=this._createCoordinatedRendering();this._renderAnimationFrame=PO.INSTANCE.scheduleCoordinatedRendering({window:Le((e=this.domNode)==null?void 0:e.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new _t;try{return t.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new _t;return t.renderText()},prepareRender:(n,i)=>{if(this._store.isDisposed)throw new _t;return t.prepareRender(n,i)},render:(n,i)=>{if(this._store.isDisposed)throw new _t;return t.render(n,i)}})}}_flushAccumulatedAndRenderNow(){const e=this._createCoordinatedRendering();kh(()=>e.prepareRenderText());const t=kh(()=>e.renderText());if(t){const[n,i]=t;kh(()=>e.prepareRender(n,i)),kh(()=>e.render(n,i))}}_getViewPartsToRender(){const e=[];let t=0;for(const n of this._viewParts)n.shouldRender()&&(e[t++]=n);return e}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const e=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(e.requiredLanes)}Sh.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let e=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&e.length===0)return null;const t=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(t.startLineNumber,t.endLineNumber,t.centeredLineNumber);const n=new ywe(this._selections,t,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(n),this._viewLines.shouldRender()&&(this._viewLines.renderText(n),this._viewLines.onDidRender(),e=this._getViewPartsToRender()),[e,new Fve(this._context.viewLayout,n,this._viewLines)]},prepareRender:(e,t)=>{for(const n of e)n.prepareRender(t)},render:(e,t)=>{for(const n of e)n.render(t),n.onDidRender()}}}delegateVerticalScrollbarPointerDown(e){this._scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._scrollbar.delegateScrollFromMouseWheelEvent(e)}restoreState(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(e,t){const n=this._context.viewModel.model.validatePosition({lineNumber:e,column:t}),i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);this._flushAccumulatedAndRenderNow();const o=this._viewLines.visibleRangeForPosition(new A(i.lineNumber,i.column));return o?o.left:-1}getTargetAtClientPoint(e,t){const n=this._pointerHandler.getTargetAtClientPoint(e,t);return n?CE.convertViewToModelMouseTarget(n,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(e){return new uwe(this._context,e)}change(e){this._viewZones.changeViewZones(e),this._scheduleRender()}render(e,t){if(t){this._viewLines.forceShouldRender();for(const n of this._viewParts)n.forceShouldRender()}e?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(e){this._textAreaHandler.writeScreenReaderContent(e)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(e){this._textAreaHandler.setAriaOptions(e)}addContentWidget(e){this._contentWidgets.addWidget(e.widget),this.layoutContentWidget(e),this._scheduleRender()}layoutContentWidget(e){var t,n,i,o;this._contentWidgets.setWidgetPosition(e.widget,((t=e.position)==null?void 0:t.position)??null,((n=e.position)==null?void 0:n.secondaryPosition)??null,((i=e.position)==null?void 0:i.preference)??null,((o=e.position)==null?void 0:o.positionAffinity)??null),this._scheduleRender()}removeContentWidget(e){this._contentWidgets.removeWidget(e.widget),this._scheduleRender()}addOverlayWidget(e){this._overlayWidgets.addWidget(e.widget),this.layoutOverlayWidget(e),this._scheduleRender()}layoutOverlayWidget(e){this._overlayWidgets.setWidgetPosition(e.widget,e.position)&&this._scheduleRender()}removeOverlayWidget(e){this._overlayWidgets.removeWidget(e.widget),this._scheduleRender()}addGlyphMarginWidget(e){this._glyphMarginWidgets.addWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(e){const t=e.position;this._glyphMarginWidgets.setWidgetPosition(e.widget,t)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(e){this._glyphMarginWidgets.removeWidget(e.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};AO=Lwe([xwe(6,Ce)],AO);function kh(s){try{return s()}catch(e){return Pe(e),null}}const hI=class hI{constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{const t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(const[n,i]of this._animationFrameRunners)i.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){const t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,Bk(e,t,100))}}_onRenderScheduled(){const e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const n of e)kh(()=>n.prepareRenderText());const t=[];for(let n=0,i=e.length;n<i;n++){const o=e[n];t[n]=kh(()=>o.renderText())}for(let n=0,i=e.length;n<i;n++){const o=e[n],r=t[n];if(!r)continue;const[a,l]=r;kh(()=>o.prepareRender(a,l))}for(let n=0,i=e.length;n<i;n++){const o=e[n],r=t[n];if(!r)continue;const[a,l]=r;kh(()=>o.render(a,l))}}};hI.INSTANCE=new hI;let PO=hI;class qC{constructor(e,t,n,i,o){this.injectionOffsets=e,this.injectionOptions=t,this.breakOffsets=n,this.breakOffsetsVisibleColumn=i,this.wrappedTextIndentLength=o}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){const t=e>0?this.breakOffsets[e-1]:0;let i=this.breakOffsets[e]-t;return e>0&&(i+=this.wrappedTextIndentLength),i}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let i=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&i>this.injectionOffsets[o];o++)i<this.injectionOffsets[o]+this.injectionOptions[o].content.length?i=this.injectionOffsets[o]:i-=this.injectionOptions[o].content.length;return i}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let i=0;i<this.injectionOffsets.length&&!(e<this.injectionOffsets[i]||t!==1&&e===this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,i=this.breakOffsets.length-1,o=0,r=0;for(;n<=i;){o=n+(i-n)/2|0;const l=this.breakOffsets[o];if(r=o>0?this.breakOffsets[o-1]:0,t===0)if(e<=r)i=o-1;else if(e>l)n=o+1;else break;else if(e<r)i=o-1;else if(e>=l)n=o+1;else break}let a=e-r;return o>0&&(a+=this.wrappedTextIndentLength),new Xy(o,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){const i=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(o!==i)return this.offsetInInputWithInjectionsToOutputPosition(o,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new Xy(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){const i=this.getOutputLineCount()-1;if(e<i&&t===this.getMaxOutputOffset(e))return new Xy(e+1,this.getMinOutputOffset(e+1))}return new Xy(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){const n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2){if(e===n.offsetInInputWithInjections+n.length&&qV(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let i=n.offsetInInputWithInjections;if(KV(this.injectionOptions[n.injectedTextIndex].cursorStops))return i;let o=n.injectedTextIndex-1;for(;o>=0&&this.injectionOffsets[o]===this.injectionOffsets[n.injectedTextIndex]&&!(qV(this.injectionOptions[o].cursorStops)||(i-=this.injectionOptions[o].content.length,KV(this.injectionOptions[o].cursorStops)));)o--;return i}}else if(t===1||t===4){let i=n.offsetInInputWithInjections+n.length,o=n.injectedTextIndex;for(;o+1<this.injectionOffsets.length&&this.injectionOffsets[o+1]===this.injectionOffsets[o];)i+=this.injectionOptions[o+1].content.length,o++;return i}else if(t===0||t===3){let i=n.offsetInInputWithInjections,o=n.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)i-=this.injectionOptions[o-1].content.length,o--;return i}TT()}getInjectedText(e,t){const n=this.outputPositionToOffsetInInputWithInjections(e,t),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}getInjectedTextAtOffset(e){const t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let i=0;for(let o=0;o<t.length;o++){const r=n[o].content.length,a=t[o]+i,l=t[o]+i+r;if(a>e)break;if(e<=l)return{injectedTextIndex:o,offsetInInputWithInjections:a,length:r};i+=r}}}}function qV(s){return s==null?!0:s===Zr.Right||s===Zr.Both}function KV(s){return s==null?!0:s===Zr.Left||s===Zr.Both}class Xy{constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new A(e+this.outputLineIndex,this.outputOffset+1)}}const ER=Nd("domLineBreaksComputer",{createHTML:s=>s});class FW{static create(e){return new FW(new WeakRef(e))}constructor(e){this.targetWindow=e}createLineBreaksComputer(e,t,n,i,o){const r=[],a=[];return{addRequest:(l,c,d)=>{r.push(l),a.push(c)},finalize:()=>Dwe(mh(this.targetWindow.deref()),r,e,t,n,i,o,a)}}}function Dwe(s,e,t,n,i,o,r,a){function l(N){const W=a[N];if(W){const B=Ga.applyInjectedText(e[N],W),z=W.map(H=>H.options),U=W.map(H=>H.column-1);return new qC(U,z,[B.length],[],0)}else return null}if(i===-1){const N=[];for(let W=0,B=e.length;W<B;W++)N[W]=l(W);return N}const c=Math.round(i*t.typicalHalfwidthCharacterWidth),h=Math.round(n*(o===3?2:o===2?1:0)),u=Math.ceil(t.spaceWidth*h),f=document.createElement("div");Ii(f,t);const g=new Qb(1e4),p=[],_=[],b=[],v=[],C=[];for(let N=0;N<e.length;N++){const W=Ga.applyInjectedText(e[N],a[N]);let B=0,z=0,U=c;if(o!==0)if(B=ds(W),B===-1)B=0;else{for(let fe=0;fe<B;fe++){const pe=W.charCodeAt(fe)===9?n-z%n:1;z+=pe}const re=Math.ceil(t.spaceWidth*z);re+t.typicalFullwidthCharacterWidth>c?(B=0,z=0):U=c-re}const H=W.substr(B),X=Iwe(H,z,n,U,g,u);p[N]=B,_[N]=z,b[N]=H,v[N]=X[0],C[N]=X[1]}const w=g.build(),y=(ER==null?void 0:ER.createHTML(w))??w;f.innerHTML=y,f.style.position="absolute",f.style.top="10000",r==="keepAll"?(f.style.wordBreak="keep-all",f.style.overflowWrap="anywhere"):(f.style.wordBreak="inherit",f.style.overflowWrap="break-word"),s.document.body.appendChild(f);const k=document.createRange(),x=Array.prototype.slice.call(f.children,0),D=[];for(let N=0;N<e.length;N++){const W=x[N],B=Twe(k,W,b[N],v[N]);if(B===null){D[N]=l(N);continue}const z=p[N],U=_[N]+h,H=C[N],X=[];for(let ce=0,Oe=B.length;ce<Oe;ce++)X[ce]=H[B[ce]];if(z!==0)for(let ce=0,Oe=B.length;ce<Oe;ce++)B[ce]+=z;let re,fe;const pe=a[N];pe?(re=pe.map(ce=>ce.options),fe=pe.map(ce=>ce.column-1)):(re=null,fe=null),D[N]=new qC(fe,re,B,X,U)}return f.remove(),D}function Iwe(s,e,t,n,i,o){if(o!==0){const u=String(o);i.appendString('<div style="text-indent: -'),i.appendString(u),i.appendString("px; padding-left: "),i.appendString(u),i.appendString("px; box-sizing: border-box; width:")}else i.appendString('<div style="width:');i.appendString(String(n)),i.appendString('px;">');const r=s.length;let a=e,l=0;const c=[],d=[];let h=0<r?s.charCodeAt(0):0;i.appendString("<span>");for(let u=0;u<r;u++){u!==0&&u%16384===0&&i.appendString("</span><span>"),c[u]=l,d[u]=a;const f=h;h=u+1<r?s.charCodeAt(u+1):0;let g=1,p=1;switch(f){case 9:g=t-a%t,p=g;for(let _=1;_<=g;_++)_<g?i.appendCharCode(160):i.appendASCIICharCode(32);break;case 32:h===32?i.appendCharCode(160):i.appendASCIICharCode(32);break;case 60:i.appendString("&lt;");break;case 62:i.appendString("&gt;");break;case 38:i.appendString("&amp;");break;case 0:i.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:i.appendCharCode(65533);break;default:ru(f)&&p++,f<32?i.appendCharCode(9216+f):i.appendCharCode(f)}l+=g,a+=p}return i.appendString("</span>"),c[s.length]=l,d[s.length]=a,i.appendString("</div>"),[c,d]}function Twe(s,e,t,n){if(t.length<=1)return null;const i=Array.prototype.slice.call(e.children,0),o=[];try{OO(s,i,n,0,null,t.length-1,null,o)}catch(r){return console.log(r),null}return o.length===0?null:(o.push(t.length),o)}function OO(s,e,t,n,i,o,r,a){if(n===o||(i=i||NR(s,e,t[n],t[n+1]),r=r||NR(s,e,t[o],t[o+1]),Math.abs(i[0].top-r[0].top)<=.1))return;if(n+1===o){a.push(o);return}const l=n+(o-n)/2|0,c=NR(s,e,t[l],t[l+1]);OO(s,e,t,n,i,l,c,a),OO(s,e,t,l,c,o,r,a)}function NR(s,e,t,n){return s.setStart(e[t/16384|0].firstChild,t%16384),s.setEnd(e[n/16384|0].firstChild,n%16384),s.getClientRects()}class Ewe extends F{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new I3),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,n){this._editor=e,this._instantiationService=n;for(const i of t){if(this._pending.has(i.id)){Pe(new Error(`Cannot have two contributions with the same id ${i.id}`));continue}this._pending.set(i.id,i)}this._instantiateSome(0),this._register(Qv(Le(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(Qv(Le(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(Qv(Le(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const e={};for(const[t,n]of this._instances)typeof n.saveViewState=="function"&&(e[t]=n.saveViewState());return e}restoreViewState(e){for(const[t,n]of this._instances)typeof n.restoreViewState=="function"&&n.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return Qv(Le((e=this._editor)==null?void 0:e.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const t=this._findPendingContributionsByInstantiation(e);for(const n of t)this._instantiateById(n.id)}_findPendingContributionsByInstantiation(e){const t=[];for(const[,n]of this._pending)n.instantiation===e&&t.push(n);return t}_instantiateById(e){const t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const n=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,n),typeof n.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(n){Pe(n)}}}}class kY{constructor(e,t,n,i,o,r,a){this.id=e,this.label=t,this.alias=n,this.metadata=i,this._precondition=o,this._run=r,this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}}class WW{static create(e){return new WW(e.get(135),e.get(134))}constructor(e,t){this.classifier=new Nwe(e,t)}createLineBreaksComputer(e,t,n,i,o){const r=[],a=[],l=[];return{addRequest:(c,d,h)=>{r.push(c),a.push(d),l.push(h)},finalize:()=>{const c=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,d=[];for(let h=0,u=r.length;h<u;h++){const f=a[h],g=l[h];g&&!g.injectionOptions&&!f?d[h]=Rwe(this.classifier,g,r[h],t,n,c,i,o):d[h]=Mwe(this.classifier,r[h],f,t,n,c,i,o)}return FO.length=0,WO.length=0,d}}}}class Nwe extends Jb{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let FO=[],WO=[];function Rwe(s,e,t,n,i,o,r,a){if(i===-1)return null;const l=t.length;if(l<=1)return null;const c=a==="keepAll",d=e.breakOffsets,h=e.breakOffsetsVisibleColumn,u=LY(t,n,i,o,r),f=i-u,g=FO,p=WO;let _=0,b=0,v=0,C=i;const w=d.length;let y=0;if(y>=0){let k=Math.abs(h[y]-C);for(;y+1<w;){const x=Math.abs(h[y+1]-C);if(x>=k)break;k=x,y++}}for(;y<w;){let k=y<0?0:d[y],x=y<0?0:h[y];b>k&&(k=b,x=v);let D=0,N=0,W=0,B=0;if(x<=C){let U=x,H=k===0?0:t.charCodeAt(k-1),X=k===0?0:s.get(H),re=!0;for(let fe=k;fe<l;fe++){const pe=fe,ce=t.charCodeAt(fe);let Oe,Fe;if(ni(ce)?(fe++,Oe=0,Fe=2):(Oe=s.get(ce),Fe=KC(ce,U,n,o)),pe>b&&BO(H,X,ce,Oe,c)&&(D=pe,N=U),U+=Fe,U>C){pe>b?(W=pe,B=U-Fe):(W=fe+1,B=U),U-N>f&&(D=0),re=!1;break}H=ce,X=Oe}if(re){_>0&&(g[_]=d[d.length-1],p[_]=h[d.length-1],_++);break}}if(D===0){let U=x,H=t.charCodeAt(k),X=s.get(H),re=!1;for(let fe=k-1;fe>=b;fe--){const pe=fe+1,ce=t.charCodeAt(fe);if(ce===9){re=!0;break}let Oe,Fe;if(Zg(ce)?(fe--,Oe=0,Fe=2):(Oe=s.get(ce),Fe=ru(ce)?o:1),U<=C){if(W===0&&(W=pe,B=U),U<=C-f)break;if(BO(ce,Oe,H,X,c)){D=pe,N=U;break}}U-=Fe,H=ce,X=Oe}if(D!==0){const fe=f-(B-N);if(fe<=n){const pe=t.charCodeAt(W);let ce;ni(pe)?ce=2:ce=KC(pe,B,n,o),fe-ce<0&&(D=0)}}if(re){y--;continue}}if(D===0&&(D=W,N=B),D<=b){const U=t.charCodeAt(b);ni(U)?(D=b+2,N=v+2):(D=b+1,N=v+KC(U,v,n,o))}for(b=D,g[_]=D,v=N,p[_]=N,_++,C=N+f;y<0||y<w&&h[y]<N;)y++;let z=Math.abs(h[y]-C);for(;y+1<w;){const U=Math.abs(h[y+1]-C);if(U>=z)break;z=U,y++}}return _===0?null:(g.length=_,p.length=_,FO=e.breakOffsets,WO=e.breakOffsetsVisibleColumn,e.breakOffsets=g,e.breakOffsetsVisibleColumn=p,e.wrappedTextIndentLength=u,e)}function Mwe(s,e,t,n,i,o,r,a){const l=Ga.applyInjectedText(e,t);let c,d;if(t&&t.length>0?(c=t.map(N=>N.options),d=t.map(N=>N.column-1)):(c=null,d=null),i===-1)return c?new qC(d,c,[l.length],[],0):null;const h=l.length;if(h<=1)return c?new qC(d,c,[l.length],[],0):null;const u=a==="keepAll",f=LY(l,n,i,o,r),g=i-f,p=[],_=[];let b=0,v=0,C=0,w=i,y=l.charCodeAt(0),k=s.get(y),x=KC(y,0,n,o),D=1;ni(y)&&(x+=1,y=l.charCodeAt(1),k=s.get(y),D++);for(let N=D;N<h;N++){const W=N,B=l.charCodeAt(N);let z,U;ni(B)?(N++,z=0,U=2):(z=s.get(B),U=KC(B,x,n,o)),BO(y,k,B,z,u)&&(v=W,C=x),x+=U,x>w&&((v===0||x-C>g)&&(v=W,C=x-U),p[b]=v,_[b]=C,b++,w=C+g,v=0),y=B,k=z}return b===0&&(!t||t.length===0)?null:(p[b]=h,_[b]=x,new qC(d,c,p,_,f))}function KC(s,e,t,n){return s===9?t-e%t:ru(s)||s<32?n:1}function GV(s,e){return e-s%e}function BO(s,e,t,n,i){return t!==32&&(e===2&&n!==2||e!==1&&n===1||!i&&e===3&&n!==2||!i&&n===3&&e!==1)}function LY(s,e,t,n,i){let o=0;if(i!==0){const r=ds(s);if(r!==-1){for(let l=0;l<r;l++){const c=s.charCodeAt(l)===9?GV(o,e):1;o+=c}const a=i===3?2:i===2?1:0;for(let l=0;l<a;l++){const c=GV(o,e);o+=c}o+n>t&&(o=0)}}return o}class lx{constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new Si(new L(1,1,1,1),0,0,new A(1,1),0),new Si(new L(1,1,1,1),0,0,new A(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new ft(this.modelState,this.viewState)}readSelectionFromMarkers(e){const t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?me.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):me.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}static _validateViewState(e,t){const n=t.position,i=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),r=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,i,n,r),l=this._validatePositionWithCache(e,o,i,a);return n.equals(r)&&i.equals(a)&&o.equals(l)?t:new Si(L.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+i.column-a.column,r,t.leftoverVisibleColumns+n.column-r.column)}_setState(e,t,n){if(n&&(n=lx._validateViewState(e.viewModel,n)),t){const i=e.model.validateRange(t.selectionStart),o=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,r=e.model.validatePosition(t.position),a=t.position.equals(r)?t.leftoverVisibleColumns:0;t=new Si(i,t.selectionStartKind,o,r,a)}else{if(!n)return;const i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new Si(i,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,o,n.leftoverVisibleColumns)}if(n){const i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new Si(i,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{const i=e.coordinatesConverter.convertModelPositionToViewPosition(new A(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new A(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),r=new L(i.lineNumber,i.column,o.lineNumber,o.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new Si(r,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}}class ZV{constructor(e){this.context=e,this.cursors=[new lx(e)],this.lastAddedCursorIndex=0}dispose(){for(const e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(const e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(const e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(const e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return jre(this.cursors,ks(e=>e.viewState.position,A.compare)).viewState.position}getBottomMostViewPosition(){return Ure(this.cursors,ks(e=>e.viewState.position,A.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(ft.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){const t=this.cursors.length-1,n=e.length;if(t<n){const i=n-t;for(let o=0;o<i;o++)this._addSecondaryCursor()}else if(t>n){const i=t-n;for(let o=0;o<i;o++)this._removeSecondaryCursor(this.cursors.length-2)}for(let i=0;i<n;i++)this.cursors[i+1].setState(this.context,e[i].modelState,e[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new lx(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;const e=this.cursors.slice(0),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(ks(n=>n.selection,L.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){const i=t[n],o=t[n+1],r=i.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||r.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(r.getEndPosition()):l=a.getStartPosition().isBefore(r.getEndPosition()),l){const c=i.index<o.index?n:n+1,d=i.index<o.index?n+1:n,h=t[d].index,u=t[c].index,f=t[d].selection,g=t[c].selection;if(!f.equalsSelection(g)){const p=f.plusRange(g),_=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,b=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn;let v;h===this.lastAddedCursorIndex?(v=_,this.lastAddedCursorIndex=u):v=b;let C;v?C=new me(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn):C=new me(p.endLineNumber,p.endColumn,p.startLineNumber,p.startColumn),t[c].selection=C;const w=ft.fromModelSelection(C);e[u].setState(this.context,w.modelState,w.viewState)}for(const p of t)p.index>h&&p.index--;e.splice(h,1),t.splice(d,1),this._removeSecondaryCursor(h-1),n--}}}}class YV{constructor(e,t,n,i){this._cursorContextBrand=void 0,this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=i}}class Awe{constructor(){this.type=0}}class Pwe{constructor(){this.type=1}}class Owe{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class Fwe{constructor(e,t,n){this.selections=e,this.modelSelections=t,this.reason=n,this.type=3}}class $u{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class Qy{constructor(){this.type=5}}class Wwe{constructor(e){this.type=6,this.isFocused=e}}class Bwe{constructor(){this.type=7}}class Jy{constructor(){this.type=8}}class xY{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class HO{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class VO{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class GC{constructor(e,t,n,i,o,r,a){this.source=e,this.minimalReveal=t,this.range=n,this.selections=i,this.verticalType=o,this.revealHorizontal=r,this.scrollType=a,this.type=12}}class Hwe{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class Vwe{constructor(e){this.theme=e,this.type=14}}class zwe{constructor(e){this.type=15,this.ranges=e}}class $we{constructor(){this.type=16}}let Uwe=class{constructor(){this.type=17}};class jwe extends F{constructor(){super(),this._onEvent=this._register(new O),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){const i=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(i){this._outgoingEvents[t]=i;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new qwe),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class qwe{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class BW{constructor(e,t,n,i){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=i,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new BW(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class HW{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new HW(this.oldHasFocus,e.hasFocus)}}class VW{constructor(e,t,n,i,o,r,a,l){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=i,this.scrollWidth=o,this.scrollLeft=r,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new VW(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class Kwe{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class Gwe{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class cx{constructor(e,t,n,i,o,r,a){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=i,this.source=o,this.reason=r,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length,i=t.length;if(n!==i)return!1;for(let o=0;o<n;o++)if(!e[o].equalsSelection(t[o]))return!1;return!0}isNoOp(){return cx._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new cx(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class Zwe{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class Ywe{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class Xwe{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class Qwe{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class Jwe{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class e1e{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class t1e{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}class n1e extends F{constructor(e,t,n,i){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new YV(this._model,this._viewModel,this._coordinatesConverter,i),this._cursors=new ZV(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=Mt(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new YV(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){const n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let o=!1;const r=this.context.cursorConfig.multiCursorLimit;i!==null&&i.length>r&&(i=i.slice(0,r),o=!0);const a=ZC.from(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,a,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,n,i,o,r){const a=this._cursors.getViewPositions();let l=null,c=null;a.length>1?c=this._cursors.getViewSelections():l=L.fromPositions(a[0],a[0]),e.emitViewEvent(new GC(t,n,l,c,i,o,r))}revealPrimary(e,t,n,i,o,r){const l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new GC(t,n,null,l,i,o,r))}saveState(){const e=[],t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){const o=t[n];e.push({inSelectionMode:!o.isEmpty(),selectionStart:{lineNumber:o.selectionStartLineNumber,column:o.selectionStartColumn},position:{lineNumber:o.positionLineNumber,column:o.positionColumn}})}return e}restoreState(e,t){const n=[];for(let i=0,o=t.length;i<o;i++){const r=t[i];let a=1,l=1;r.position&&r.position.lineNumber&&(a=r.position.lineNumber),r.position&&r.position.column&&(l=r.position.column);let c=a,d=l;r.selectionStart&&r.selectionStart.lineNumber&&(c=r.selectionStart.lineNumber),r.selectionStart&&r.selectionStart.column&&(d=r.selectionStart.column),n.push({selectionStartLineNumber:c,selectionStartColumn:d,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,ft.fromModelSelections(n)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof lZ){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;const i=n.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new ZV(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){const o=ft.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,o)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{const o=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,ft.fromModelSelections(o))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}setSelections(e,t,n,i){this.setStates(e,t,i,ft.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){const n=[],i=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});const o=this._model.deltaDecorations([],n),r=this._model.deltaDecorations([],i);this._autoClosedActions.push(new XV(this._model,o,r))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();const t=i1e.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);const n=[],i=[];for(let o=0;o<e.commands.length;o++){const r=e.commands[o];r instanceof MW&&r.enclosingRange&&r.closeCharacterRange&&(n.push(r.closeCharacterRange),i.push(r.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,o){const r=ZC.from(this._model,this);if(r.equals(i))return!1;const a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new Fwe(l,a,n)),!i||i.cursorState.length!==r.cursorState.length||r.cursorState.some((c,d)=>!c.modelState.equals(i.cursorState[d].modelState))){const c=i?i.cursorState.map(h=>h.modelState.selection):null,d=i?i.modelVersionId:0;e.emitOutgoingEvent(new cx(c,a,d,r.modelVersionId,t||"keyboard",n,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;const t=[];for(let n=0,i=e.length;n<i;n++){const o=e[n];if(!o.text||o.text.indexOf(`
`)>=0)return null;const r=o.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!r)return null;const a=r[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;const c=l[0].open,d=o.text.length-r[2].length-1,h=o.text.lastIndexOf(c,d-1);if(h===-1)return null;t.push([h,d])}return t}executeEdits(e,t,n,i){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(n)),o&&(n[0]._isTracked=!0);const r=[],a=[],l=this._model.pushEditOperations(this.getSelections(),n,c=>{if(o)for(let h=0,u=o.length;h<u;h++){const[f,g]=o[h],p=c[h],_=p.range.startLineNumber,b=p.range.startColumn-1+f,v=p.range.startColumn-1+g;r.push(new L(_,v+1,_,v+2)),a.push(new L(_,b+1,_,v+2))}const d=i(c);return d&&(this._isHandling=!0),d});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),r.length>0&&this._pushAutoClosedAction(r,a)}_executeEdit(e,t,n,i=0){if(this.context.cursorConfig.readOnly)return;const o=ZC.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(r){Pe(r)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,o,!1)&&this.revealAll(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return XV.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new YC(this._model,this.getSelections())}endComposition(e,t){const n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(hh.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){const i=t.length;let o=0;for(;o<i;){const r=F3(t,o),a=t.substr(o,r);this._executeEditOperation(hh.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),o+=r}}else this._executeEditOperation(hh.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,i,o,r){if(t.length===0&&n===0&&i===0){if(o!==0){const a=this.getSelections().map(l=>{const c=l.getPosition();return new me(c.lineNumber,c.column+o,c.lineNumber,c.column+o)});this.setSelections(e,r,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(hh.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,o))},e,r)}paste(e,t,n,i,o){this._executeEdit(()=>{this._executeEditOperation(hh.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(lm.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Zs(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new Zs(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}}class ZC{static from(e,t){return new ZC(e.getVersionId(),t.getCursorStates())}constructor(e,t){this.modelVersionId=e,this.cursorState=t}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}}class XV{static getAllAutoClosedCharacters(e){let t=[];for(const n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){const n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){const t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){const i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(L.compareRangesUsingStarts),e.sort(L.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}}class i1e{static executeCommands(e,t,n){const i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(i,n);for(let r=0,a=i.trackedRanges.length;r<a;r++)i.model._setTrackedRange(i.trackedRanges[r],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;const n=this._getEditOperations(e,t);if(n.operations.length===0)return null;const i=n.operations,o=this._getLoserCursorMap(i);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const r=[];for(let c=0,d=i.length;c<d;c++)o.hasOwnProperty(i[c].identifier.major.toString())||r.push(i[c]);n.hadTrackedEditOperation&&r.length>0&&(r[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,r,c=>{const d=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f]=[];for(const f of c)f.identifier&&d[f.identifier.major].push(f);const h=(f,g)=>f.identifier.minor-g.identifier.minor,u=[];for(let f=0;f<e.selectionsBefore.length;f++)d[f].length>0?(d[f].sort(h),u[f]=t[f].computeCursorState(e.model,{getInverseEditOperations:()=>d[f],getTrackedSelection:g=>{const p=parseInt(g,10),_=e.model._getTrackedRange(e.trackedRanges[p]);return e.trackedRangesDirection[p]===0?new me(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn):new me(_.endLineNumber,_.endColumn,_.startLineNumber,_.startColumn)}})):u[f]=e.selectionsBefore[f];return u});a||(a=e.selectionsBefore);const l=[];for(const c in o)o.hasOwnProperty(c)&&l.push(parseInt(c,10));l.sort((c,d)=>d-c);for(const c of l)a.splice(c,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let o=0,r=t.length;o<r;o++){const a=t[o];if(a){const l=this._getEditOperationsFromCommand(e,o,a);n=n.concat(l.operations),i=i||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){const i=[];let o=0;const r=(h,u,f=!1)=>{L.isEmpty(h)&&u===""||i.push({identifier:{major:t,minor:o++},range:h,text:u,forceMoveMarkers:f,isAutoWhitespaceEdit:n.insertsAutoWhitespace})};let a=!1;const d={addEditOperation:r,addTrackedEditOperation:(h,u,f)=>{a=!0,r(h,u,f)},trackSelection:(h,u)=>{const f=me.liftSelection(h);let g;if(f.isEmpty())if(typeof u=="boolean")u?g=2:g=3;else{const b=e.model.getLineMaxColumn(f.startLineNumber);f.startColumn===b?g=2:g=3}else g=1;const p=e.trackedRanges.length,_=e.model._setTrackedRange(null,f,g);return e.trackedRanges[p]=_,e.trackedRangesDirection[p]=f.getDirection(),p.toString()}};try{n.getEditOperations(e.model,d)}catch(h){return Pe(h),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,i)=>-L.compareRangesUsingEnds(n.range,i.range));const t={};for(let n=1;n<e.length;n++){const i=e[n-1],o=e[n];if(L.getStartPosition(i.range).isBefore(L.getEndPosition(o.range))){let r;i.identifier.major>o.identifier.major?r=i.identifier.major:r=o.identifier.major,t[r.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===r&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}}class s1e{constructor(e,t,n){this.text=e,this.startSelection=t,this.endSelection=n}}class YC{static _capture(e,t){const n=[];for(const i of t){if(i.startLineNumber!==i.endLineNumber)return null;n.push(new s1e(e.getLineContent(i.startLineNumber),i.startColumn-1,i.endColumn-1))}return n}constructor(e,t){this._original=YC._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;const n=YC._capture(e,t);if(!n||this._original.length!==n.length)return null;const i=[];for(let o=0,r=this._original.length;o<r;o++)i.push(YC._deduceOutcome(this._original[o],n[o]));return i}static _deduceOutcome(e,t){const n=Math.min(e.startSelection,t.startSelection,ou(e.text,t.text)),i=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,Ak(e.text,t.text)),o=e.text.substring(n,e.text.length-i),r=t.text.substring(n,t.text.length-i);return new RCe(o,e.startSelection-n,e.endSelection-n,r,t.startSelection-n,t.endSelection-n)}}class o1e{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}class r1e{constructor(e,t,n,i,o){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=i,this.minWidth=o,this.prefixSum=0}}var Wh;let a1e=(Wh=class{constructor(e,t,n,i){this._instanceId=Jj(++Wh.INSTANCE_COUNT),this._pendingChanges=new o1e,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=i}static findInsertionIndex(e,t,n){let i=0,o=e.length;for(;i<o;){const r=i+o>>>1;t===e[r].afterLineNumber?n<e[r].ordinal?o=r:i=r+1:t<e[r].afterLineNumber?o=r:i=r+1}return i}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(i,o,r,a)=>{t=!0,i=i|0,o=o|0,r=r|0,a=a|0;const l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new r1e(l,i,o,r,a)),l},changeOneWhitespace:(i,o,r)=>{t=!0,o=o|0,r=r|0,this._pendingChanges.change({id:i,newAfterLineNumber:o,newHeight:r})},removeWhitespace:i=>{t=!0,this._pendingChanges.remove({id:i})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const l of e)this._insertWhitespace(l);for(const l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(const l of n){const c=this._findWhitespaceIndex(l.id);c!==-1&&this._removeWhitespace(c)}return}const i=new Set;for(const l of n)i.add(l.id);const o=new Map;for(const l of t)o.set(l.id,l);const r=l=>{const c=[];for(const d of l)if(!i.has(d.id)){if(o.has(d.id)){const h=o.get(d.id);d.afterLineNumber=h.newAfterLineNumber,d.height=h.newHeight}c.push(d)}return c},a=r(this._arr).concat(r(e));a.sort((l,c)=>l.afterLineNumber===c.afterLineNumber?l.ordinal-c.ordinal:l.afterLineNumber-c.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=Wh.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const i=this._findWhitespaceIndex(e);if(i!==-1&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){const o=this._arr[i];this._removeWhitespace(i),o.afterLineNumber=t,this._insertWhitespace(o)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const o=this._arr[n].afterLineNumber;e<=o&&o<=t?this._arr[n].afterLineNumber=e-1:o>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const o=this._arr[n].afterLineNumber;e<=o&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;const t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;const t=this._arr;let n=0,i=t.length-1;for(;n<=i;){const r=(i-n|0)/2|0,a=n+r|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else i=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;const n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n;e>1?n=this._lineHeight*(e-1):n=0;const i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return n+i+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;const n=this._lineHeight*e,i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return n+i+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;const t=this._lineCount|0,n=this._lineHeight;let i=1,o=t;for(;i<o;){const r=(i+o)/2|0,a=this.getVerticalOffsetForLineNumber(r)|0;if(e>=a+n)i=r+1;else{if(e>=a)return r;o=r}}return i>t?t:i}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this._lineHeight,i=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(i)|0;let r=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(i)|0;const l=this.getWhitespacesCount()|0;let c,d;a===-1?(a=l,d=r+1,c=0):(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);let h=o,u=h;const f=5e5;let g=0;o>=f&&(g=Math.floor(o/f)*f,g=Math.floor(g/n)*n,u-=g);const p=[],_=e+(t-e)/2;let b=-1;for(let y=i;y<=r;y++){if(b===-1){const k=h,x=h+n;(k<=_&&_<x||k>_)&&(b=y)}for(h+=n,p[y-i]=u,u+=n;d===y;)u+=c,h+=c,a++,a>=l?d=r+1:(d=this.getAfterLineNumberForWhitespaceIndex(a)|0,c=this.getHeightForWhitespaceIndex(a)|0);if(h>=t){r=y;break}}b===-1&&(b=r);const v=this.getVerticalOffsetForLineNumber(r)|0;let C=i,w=r;return C<w&&o<e&&C++,C<w&&v+n>t&&w--,{bigNumbersDelta:g,startLineNumber:i,endLineNumber:r,relativeVerticalOffset:p,centeredLineNumber:b,completelyVisibleStartLineNumber:C,completelyVisibleEndLineNumber:w,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n;t>=1?n=this._lineHeight*t:n=0;let i;return e>0?i=this.getWhitespacesAccumulatedHeight(e-1):i=0,n+i+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;const i=this.getVerticalOffsetForWhitespaceIndex(n),o=this.getHeightForWhitespaceIndex(n);if(e>=i+o)return-1;for(;t<n;){const r=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(e>=a+l)t=r+1;else{if(e>=a)return r;n=r}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const i=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),r=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:r,verticalOffset:n,height:i}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];const o=[];for(let r=n;r<=i;r++){const a=this.getVerticalOffsetForWhitespaceIndex(r),l=this.getHeightForWhitespaceIndex(r);if(a>=t)break;o.push({id:this.getIdForWhitespaceIndex(r),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(r),verticalOffset:a,height:l})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}},Wh.INSTANCE_COUNT=0,Wh);const l1e=125;class cC{constructor(e,t,n,i){e=e|0,t=t|0,n=n|0,i=i|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),i<0&&(i=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=i,this.scrollHeight=Math.max(n,i)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class c1e extends F{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new O),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new cC(0,0,0,0),this._scrollable=this._register(new nv({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new BW(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class d1e extends F{constructor(e,t,n){super(),this._configuration=e;const i=this._configuration.options,o=i.get(146),r=i.get(84);this._linesLayout=new a1e(t,i.get(67),r.top,r.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new c1e(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new cC(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?l1e:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const n=t.get(84);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(146)){const n=t.get(146),i=n.contentWidth,o=n.height,r=this._scrollable.getScrollDimensions(),a=r.contentWidth;this._scrollable.setScrollDimensions(new cC(i,r.contentWidth,o,this._getContentHeight(i,o,a)))}else this._updateHeight();e.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const i=this._configuration.options.get(104);return i.horizontal===2||e>=t?0:i.horizontalScrollbarSize}_getContentHeight(e,t,n){const i=this._configuration.options;let o=this._linesLayout.getLinesTotalHeight();return i.get(106)?o+=Math.max(0,t-i.get(67)-i.get(84).bottom):i.get(104).ignoreHorizontalScrollbarInContentHeight||(o+=this._getHorizontalScrollbarHeight(e,n)),o}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new cC(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new yV(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new yV(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,n=e.get(147),i=e.get(50),o=e.get(146);if(n.isViewportWrapping){const r=e.get(73);return t>o.contentWidth+i.typicalHalfwidthCharacterWidth&&r.enabled&&r.side==="right"?t+o.verticalScrollbarWidth:t}else{const r=e.get(105)*i.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+r+o.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new cC(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),i=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-i,scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}class h1e{constructor(e,t,n,i,o){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=i,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const i=e.range,o=e.options;let r;if(o.isWholeLine){const a=this._coordinatesConverter.convertModelPositionToViewPosition(new A(i.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new A(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)),1);r=new L(a.lineNumber,a.column,l.lineNumber,l.column)}else r=this._coordinatesConverter.convertModelRangeToViewRange(i,1);n=new sY(r,o),this._decorationsCache[t]=n}return n}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,n=!1){const i=new L(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(i,t,n).inlineDecorations[0]}_getDecorationsInRange(e,t,n){const i=this._linesCollection.getDecorationsInRange(e,this.editorId,xk(this.configuration.options),t,n),o=e.startLineNumber,r=e.endLineNumber,a=[];let l=0;const c=[];for(let d=o;d<=r;d++)c[d-o]=[];for(let d=0,h=i.length;d<h;d++){const u=i[d],f=u.options;if(!zW(this.model,u))continue;const g=this._getOrCreateViewModelDecoration(u),p=g.range;if(a[l++]=g,f.inlineClassName){const _=new VC(p,f.inlineClassName,f.inlineClassNameAffectsLetterSpacing?3:0),b=Math.max(o,p.startLineNumber),v=Math.min(r,p.endLineNumber);for(let C=b;C<=v;C++)c[C-o].push(_)}if(f.beforeContentClassName&&o<=p.startLineNumber&&p.startLineNumber<=r){const _=new VC(new L(p.startLineNumber,p.startColumn,p.startLineNumber,p.startColumn),f.beforeContentClassName,1);c[p.startLineNumber-o].push(_)}if(f.afterContentClassName&&o<=p.endLineNumber&&p.endLineNumber<=r){const _=new VC(new L(p.endLineNumber,p.endColumn,p.endLineNumber,p.endColumn),f.afterContentClassName,2);c[p.endLineNumber-o].push(_)}}return{decorations:a,inlineDecorations:c}}}function zW(s,e){return!(e.options.hideInCommentTokens&&$W(s,e)||e.options.hideInStringTokens&&UW(s,e))}function $W(s,e){return DY(s,e.range,t=>t===1)}function UW(s,e){return DY(s,e.range,t=>t===2)}function DY(s,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){const i=s.tokenization.getLineTokens(n),o=n===e.startLineNumber,r=n===e.endLineNumber;let a=o?i.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<i.getCount()&&!(r&&i.getStartOffset(a)>e.endColumn-1);){if(!t(i.getStandardTokenType(a)))return!1;a++}}return!0}function RR(s,e){return s===null?e?dx.INSTANCE:hx.INSTANCE:new u1e(s,e)}class u1e{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();const i=n>0?this._projectionData.breakOffsets[n-1]:0,o=this._projectionData.breakOffsets[n];let r;if(this._projectionData.injectionOffsets!==null){const a=this._projectionData.injectionOffsets.map((c,d)=>new Ga(0,0,c+1,this._projectionData.injectionOptions[d],0));r=Ga.applyInjectedText(e.getLineContent(t),a).substring(i,o)}else r=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:o+1});return n>0&&(r=QV(this._projectionData.wrappedTextIndentLength)+r),r}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){const i=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],i),i[0]}getViewLinesData(e,t,n,i,o,r,a){this._assertVisible();const l=this._projectionData,c=l.injectionOffsets,d=l.injectionOptions;let h=null;if(c){h=[];let f=0,g=0;for(let p=0;p<l.getOutputLineCount();p++){const _=new Array;h[p]=_;const b=p>0?l.breakOffsets[p-1]:0,v=l.breakOffsets[p];for(;g<c.length;){const C=d[g].content.length,w=c[g]+f,y=w+C;if(w>v)break;if(b<y){const k=d[g];if(k.inlineClassName){const x=p>0?l.wrappedTextIndentLength:0,D=x+Math.max(w-b,0),N=x+Math.min(y-b,v-b);D!==N&&_.push(new rve(D,N,k.inlineClassName,k.inlineClassNameAffectsLetterSpacing))}}if(y<=v)f+=C,g++;else break}}}let u;c?u=e.tokenization.getLineTokens(t).withInserted(c.map((f,g)=>({offset:f,text:d[g].content,tokenMetadata:_i.defaultTokenMetadata}))):u=e.tokenization.getLineTokens(t);for(let f=n;f<n+i;f++){const g=o+f-n;if(!r[g]){a[g]=null;continue}a[g]=this._getViewLineData(u,h?h[f]:null,f)}}_getViewLineData(e,t,n){this._assertVisible();const i=this._projectionData,o=n>0?i.wrappedTextIndentLength:0,r=n>0?i.breakOffsets[n-1]:0,a=i.breakOffsets[n],l=e.sliceAndInflate(r,a,o);let c=l.getLineContent();n>0&&(c=QV(i.wrappedTextIndentLength)+c);const d=this._projectionData.getMinOutputOffset(n)+1,h=c.length+1,u=n+1<this.getViewLineCount(),f=n===0?0:i.breakOffsetsVisibleColumn[n-1];return new SW(c,u,d,h,f,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();const n=this._projectionData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){const i=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}const uI=class uI{constructor(){}isVisible(){return!0}setVisible(e){return e?this:hx.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){const i=e.tokenization.getLineTokens(t),o=i.getLineContent();return new SW(o,!1,1,o.length+1,0,i.inflate(),null)}getViewLinesData(e,t,n,i,o,r,a){if(!r[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new A(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}};uI.INSTANCE=new uI;let dx=uI;const fI=class fI{constructor(){}isVisible(){return!1}setVisible(e){return e?dx.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,i,o,r,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}};fI.INSTANCE=new fI;let hx=fI;const MR=[""];function QV(s){if(s>=MR.length)for(let e=1;e<=s;e++)MR[e]=f1e(e);return MR[s]}function f1e(s){return new Array(s+1).join(" ")}class g1e{constructor(e,t,n,i,o,r,a,l,c,d){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=o,this.tabSize=r,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=c,this.wordBreak=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new p1e(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),i=this.model.getInjectedTextDecorations(this._editorId),o=n.length,r=this.createLineBreaksComputer(),a=new gd(Ga.fromDecorations(i));for(let p=0;p<o;p++){const _=a.takeWhile(b=>b.lineNumber===p+1);r.addRequest(n[p],_,t?t[p]:null)}const l=r.finalize(),c=[],d=this.hiddenAreasDecorationIds.map(p=>this.model.getDecorationRange(p)).sort(L.compareRangesUsingStarts);let h=1,u=0,f=-1,g=f+1<d.length?u+1:o+2;for(let p=0;p<o;p++){const _=p+1;_===g&&(f++,h=d[f].startLineNumber,u=d[f].endLineNumber,g=f+1<d.length?u+1:o+2);const b=_>=h&&_<=u,v=RR(l[p],!b);c[p]=v.getViewLineCount(),this.modelLineProjections[p]=v}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new Tae(c)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){const t=e.map(u=>this.model.validateRange(u)),n=m1e(t),i=this.hiddenAreasDecorationIds.map(u=>this.model.getDecorationRange(u)).sort(L.compareRangesUsingStarts);if(n.length===i.length){let u=!1;for(let f=0;f<n.length;f++)if(!n[f].equalsRange(i[f])){u=!0;break}if(!u)return!1}const o=n.map(u=>({range:u,options:Ve.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,o);const r=n;let a=1,l=0,c=-1,d=c+1<r.length?l+1:this.modelLineProjections.length+2,h=!1;for(let u=0;u<this.modelLineProjections.length;u++){const f=u+1;f===d&&(c++,a=r[c].startLineNumber,l=r[c].endLineNumber,d=c+1<r.length?l+1:this.modelLineProjections.length+2);let g=!1;if(f>=a&&f<=l?this.modelLineProjections[u].isVisible()&&(this.modelLineProjections[u]=this.modelLineProjections[u].setVisible(!1),g=!0):(h=!0,this.modelLineProjections[u].isVisible()||(this.modelLineProjections[u]=this.modelLineProjections[u].setVisible(!0),g=!0)),g){const p=this.modelLineProjections[u].getViewLineCount();this.projectedModelLineLineCounts.setValue(u,p)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,i,o){const r=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===n,c=this.wrappingIndent===i,d=this.wordBreak===o;if(r&&a&&l&&c&&d)return!1;const h=r&&a&&!l&&c&&d;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i,this.wordBreak=o;let u=null;if(h){u=[];for(let f=0,g=this.modelLineProjections.length;f<g;f++)u[f]=this.modelLineProjections[f].getProjectionData()}return this._constructLines(!1,u),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;const i=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new HO(i,o)}onModelLinesInserted(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;const o=t>2&&!this.modelLineProjections[t-2].isVisible(),r=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let a=0;const l=[],c=[];for(let d=0,h=i.length;d<h;d++){const u=RR(i[d],!o);l.push(u);const f=u.getViewLineCount();a+=f,c[d]=f}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,c),new VO(r,r+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];const i=t-1,o=this.modelLineProjections[i].getViewLineCount(),r=this.modelLineProjections[i].isVisible(),a=RR(n,r);this.modelLineProjections[i]=a;const l=this.modelLineProjections[i].getViewLineCount();let c=!1,d=0,h=-1,u=0,f=-1,g=0,p=-1;o>l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1,g=h+1,p=g+(o-l)-1,c=!0):o<l?(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+o-1,u=h+1,f=u+(l-o)-1,c=!0):(d=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=d+l-1),this.projectedModelLineLineCounts.setValue(i,l);const _=d<=h?new xY(d,h-d+1):null,b=u<=f?new VO(u,f):null,v=g<=p?new HO(g,p):null;return[c,_,b,v]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),r=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(i.lineNumber,o.lineNumber,r.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),c=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:c.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new JV(n+1,i)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new A(e.modelLineNumber,i)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new A(e.modelLineNumber,i)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),o=new Array;let r=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=i.modelLineNumber;l++){const c=this.modelLineProjections[l-1];if(c.isVisible()){const d=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,h=l===i.modelLineNumber?i.modelLineWrappedLineIdx+1:c.getViewLineCount();for(let u=d;u<h;u++)a.push(new JV(l,u))}if(!c.isVisible()&&r){const d=new A(l-1,this.model.getLineMaxColumn(l-1)+1),h=L.fromPositions(r,d);o.push(new ez(h,a)),a=[],r=null}else c.isVisible()&&!r&&(r=new A(l,1))}if(r){const l=L.fromPositions(r,this.getModelEndPositionOfViewLine(i));o.push(new ez(l,a))}return o}getViewLinesBracketGuides(e,t,n,i){const o=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,r=[];for(const a of this.getViewLineInfosGroupedByModelRanges(e,t)){const l=a.modelRange.startLineNumber,c=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,o,i);for(const d of a.viewLines){const u=c[d.modelLineNumber-l].map(f=>{if(f.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesAfterColumn).lineNumber>=d.modelLineWrappedLineIdx||f.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.forWrappedLinesBeforeOrAtColumn).lineNumber<d.modelLineWrappedLineIdx)return;if(!f.horizontalLine)return f;let g=-1;if(f.column!==-1){const b=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.column);if(b.lineNumber===d.modelLineWrappedLineIdx)g=b.column;else if(b.lineNumber<d.modelLineWrappedLineIdx)g=this.getMinColumnOfViewLine(d);else if(b.lineNumber>d.modelLineWrappedLineIdx)return}const p=this.convertModelPositionToViewPosition(d.modelLineNumber,f.horizontalLine.endColumn),_=this.modelLineProjections[d.modelLineNumber-1].getViewPositionOfModelPosition(0,f.horizontalLine.endColumn);return _.lineNumber===d.modelLineWrappedLineIdx?new Nf(f.visibleColumn,g,f.className,new RC(f.horizontalLine.top,p.column),-1,-1):_.lineNumber<d.modelLineWrappedLineIdx||f.visibleColumn!==-1?void 0:new Nf(f.visibleColumn,g,f.className,new RC(f.horizontalLine.top,this.getMaxColumnOfViewLine(d)),-1,-1)});r.push(u.filter(f=>!!f))}}return r}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let o=[];const r=[],a=[],l=n.lineNumber-1,c=i.lineNumber-1;let d=null;for(let g=l;g<=c;g++){const p=this.modelLineProjections[g];if(p.isVisible()){const _=p.getViewLineNumberOfModelPosition(0,g===l?n.column:1),b=p.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(g+1)),v=b-_+1;let C=0;v>1&&p.getViewLineMinColumn(this.model,g+1,b)===1&&(C=_===0?1:2),r.push(v),a.push(C),d===null&&(d=new A(g+1,0))}else d!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,g)),d=null)}d!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(d.lineNumber,i.lineNumber)),d=null);const h=t-e+1,u=new Array(h);let f=0;for(let g=0,p=o.length;g<p;g++){let _=o[g];const b=Math.min(h-f,r[g]),v=a[g];let C;v===2?C=0:v===1?C=1:C=b;for(let w=0;w<b;w++)w===C&&(_=0),u[f++]=_}return u}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.projectedModelLineLineCounts.getIndexOf(e-1);let o=e;const r=i.index,a=i.remainder,l=[];for(let c=r,d=this.model.getLineCount();c<d;c++){const h=this.modelLineProjections[c];if(!h.isVisible())continue;const u=c===r?a:0;let f=h.getViewLineCount()-u,g=!1;if(o+f>t&&(g=!0,f=t-o+1),h.getViewLinesData(this.model,c+1,u,f,o-e,n,l),o+=f,g)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);const i=this.projectedModelLineLineCounts.getIndexOf(e-1),o=i.index,r=i.remainder,a=this.modelLineProjections[o],l=a.getViewLineMinColumn(this.model,o+1,r),c=a.getViewLineMaxColumn(this.model,o+1,r);t<l&&(t=l),t>c&&(t=c);const d=a.getModelColumnOfViewPosition(r,t);return this.model.validatePosition(new A(o+1,d)).equals(n)?new A(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new L(n.lineNumber,n.column,i.lineNumber,i.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e),i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new A(n.modelLineNumber,i))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new L(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2,i=!1,o=!1){const r=this.model.validatePosition(new A(e,t)),a=r.lineNumber,l=r.column;let c=a-1,d=!1;if(o)for(;c<this.modelLineProjections.length&&!this.modelLineProjections[c].isVisible();)c++,d=!0;else for(;c>0&&!this.modelLineProjections[c].isVisible();)c--,d=!0;if(c===0&&!this.modelLineProjections[c].isVisible())return new A(i?0:1,1);const h=1+this.projectedModelLineLineCounts.getPrefixSum(c);let u;return d?o?u=this.modelLineProjections[c].getViewPositionOfModelPosition(h,1,n):u=this.modelLineProjections[c].getViewPositionOfModelPosition(h,this.model.getLineMaxColumn(c+1),n):u=this.modelLineProjections[a-1].getViewPositionOfModelPosition(h,l,n),u}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return L.fromPositions(n)}else{const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),i=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new L(n.lineNumber,n.column,i.lineNumber,i.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const o=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(o,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;const i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n,i,o){const r=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-r.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new L(r.lineNumber,1,a.lineNumber,a.column),t,n,i,o);let l=[];const c=r.lineNumber-1,d=a.lineNumber-1;let h=null;for(let p=c;p<=d;p++)if(this.modelLineProjections[p].isVisible())h===null&&(h=new A(p+1,p===c?r.column:1));else if(h!==null){const b=this.model.getLineMaxColumn(p);l=l.concat(this.model.getDecorationsInRange(new L(h.lineNumber,h.column,p,b),t,n,i)),h=null}h!==null&&(l=l.concat(this.model.getDecorationsInRange(new L(h.lineNumber,h.column,a.lineNumber,a.column),t,n,i)),h=null),l.sort((p,_)=>{const b=L.compareRangesUsingStarts(p.range,_.range);return b===0?p.id<_.id?-1:p.id>_.id?1:0:b});const u=[];let f=0,g=null;for(const p of l){const _=p.id;g!==_&&(g=_,u[f++]=p)}return u}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}}function m1e(s){if(s.length===0)return[];const e=s.slice();e.sort(L.compareRangesUsingStarts);const t=[];let n=e[0].startLineNumber,i=e[0].endLineNumber;for(let o=1,r=e.length;o<r;o++){const a=e[o];a.startLineNumber>i+1?(t.push(new L(n,1,i,1)),n=a.startLineNumber,i=a.endLineNumber):a.endLineNumber>i&&(i=a.endLineNumber)}return t.push(new L(n,1,i,1)),t}class JV{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class ez{constructor(e,t){this.modelRange=e,this.viewLines=t}}class p1e{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,n,i){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,n,i)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class _1e{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new b1e(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,i){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,n,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new HO(t,n)}onModelLinesInserted(e,t,n,i){return new VO(t,n)}onModelLineChanged(e,t,n){return[!1,new xY(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1,i=new Array(n);for(let o=0;o<n;o++)i[o]=0;return i}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new SW(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);const o=[];for(let r=e;r<=t;r++){const a=r-e;o[a]=n[a]?this.getViewLineData(r):null}return o}getDecorationsInRange(e,t,n,i,o){return this.model.getDecorationsInRange(e,t,n,i,o)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class b1e{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}const Uu=ia.Right;class v1e{constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*Uu/8))}reset(e){const t=Math.ceil((e+1)*Uu/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,n){n&&(this.persist|=1<<e-1);for(let i=t.startLineNumber;i<=t.endLineNumber;i++){const o=Uu*i+(e-1);this.lanes[o>>>3]|=1<<o%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(i))}}getLanesAtLine(e){const t=[];let n=Uu*e;for(let i=0;i<Uu;i++)(this.persist&1<<i||this.lanes[n>>>3]&1<<n%8)&&t.push(i+1),n++;return t.length?t:[ia.Center]}countAtLine(e){let t=Uu*e,n=0;for(let i=0;i<Uu;i++)(this.persist&1<<i||this.lanes[t>>>3]&1<<t%8)&&n++,t++;return n}}let C1e=class extends F{constructor(e,t,n,i,o,r,a,l,c,d){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=c,this._transactionalTarget=d,this.hiddenAreasModel=new y1e,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new jwe,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new rp(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new It(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=jW.create(this.model),this.glyphLanes=new v1e(0),this.model.isTooLargeForTokenization())this._lines=new _1e(this.model);else{const h=this._configuration.options,u=h.get(50),f=h.get(140),g=h.get(147),p=h.get(139),_=h.get(130);this._lines=new g1e(this._editorId,this.model,i,o,u,this.model.getOptions().tabSize,f,g.wrappingColumn,p,_)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new n1e(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new d1e(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll(h=>{h.scrollTopChanged&&this._handleVisibleLinesChanged(),h.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new Hwe(h)),this._eventDispatcher.emitOutgoingEvent(new VW(h.oldScrollWidth,h.oldScrollLeft,h.oldScrollHeight,h.oldScrollTop,h.scrollWidth,h.scrollLeft,h.scrollHeight,h.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(h=>{this._eventDispatcher.emitOutgoingEvent(h)})),this._decorations=new h1e(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(h=>{try{const u=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(u,h)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(rx.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new $we)})),this._register(this._themeService.onDidColorThemeChange(h=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new Vwe(h))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new L(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new Wwe(e)),this._eventDispatcher.emitOutgoingEvent(new HW(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new Awe)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new Pwe)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new A(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new nz(t,this._viewportStart.startLineDelta)}return new nz(null,0)}_onConfigurationChanged(e,t){const n=this._captureStableViewport(),i=this._configuration.options,o=i.get(50),r=i.get(140),a=i.get(147),l=i.get(139),c=i.get(130);this._lines.setWrappingSettings(o,r,a.wrappingColumn,l,c)&&(e.emitViewEvent(new Qy),e.emitViewEvent(new Jy),e.emitViewEvent(new $u(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(92)&&(this._decorations.reset(),e.emitViewEvent(new $u(null))),t.hasChanged(99)&&(this._decorations.reset(),e.emitViewEvent(new $u(null))),e.emitViewEvent(new Owe(t)),this.viewLayout.onConfigurationChanged(t),n.recoverViewportStart(this.coordinatesConverter,this.viewLayout),rp.shouldRecreate(t)&&(this.cursorConfig=new rp(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(e=>{try{const n=this._eventDispatcher.beginEmitViewEvents();let i=!1,o=!1;const r=e instanceof Uf?e.rawContentChangedEvent.changes:e.changes,a=e instanceof Uf?e.rawContentChangedEvent.versionId:null,l=this._lines.createLineBreaksComputer();for(const h of r)switch(h.changeType){case 4:{for(let u=0;u<h.detail.length;u++){const f=h.detail[u];let g=h.injectedTexts[u];g&&(g=g.filter(p=>!p.ownerId||p.ownerId===this._editorId)),l.addRequest(f,g,null)}break}case 2:{let u=null;h.injectedText&&(u=h.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),l.addRequest(h.detail,u,null);break}}const c=l.finalize(),d=new gd(c);for(const h of r)switch(h.changeType){case 1:{this._lines.onModelFlushed(),n.emitViewEvent(new Qy),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),i=!0;break}case 3:{const u=this._lines.onModelLinesDeleted(a,h.fromLineNumber,h.toLineNumber);u!==null&&(n.emitViewEvent(u),this.viewLayout.onLinesDeleted(u.fromLineNumber,u.toLineNumber)),i=!0;break}case 4:{const u=d.takeCount(h.detail.length),f=this._lines.onModelLinesInserted(a,h.fromLineNumber,h.toLineNumber,u);f!==null&&(n.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),i=!0;break}case 2:{const u=d.dequeue(),[f,g,p,_]=this._lines.onModelLineChanged(a,h.lineNumber,u);o=f,g&&n.emitViewEvent(g),p&&(n.emitViewEvent(p),this.viewLayout.onLinesInserted(p.fromLineNumber,p.toLineNumber)),_&&(n.emitViewEvent(_),this.viewLayout.onLinesDeleted(_.fromLineNumber,_.toLineNumber));break}case 5:break}a!==null&&this._lines.acceptVersionId(a),this.viewLayout.onHeightMaybeChanged(),!i&&o&&(n.emitViewEvent(new Jy),n.emitViewEvent(new $u(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const n=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(n){const i=this.coordinatesConverter.convertModelPositionToViewPosition(n.getStartPosition()),o=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber);this.viewLayout.setScrollPosition({scrollTop:o+this._viewportStart.startLineDelta},1)}}try{const n=this._eventDispatcher.beginEmitViewEvents();e instanceof Uf&&n.emitOutgoingEvent(new Jwe(e.contentChangedEvent)),this._cursor.onModelContentChanged(n,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(e=>{const t=[];for(let n=0,i=e.ranges.length;n<i;n++){const o=e.ranges[n],r=this.coordinatesConverter.convertModelPositionToViewPosition(new A(o.fromLineNumber,1)).lineNumber,a=this.coordinatesConverter.convertModelPositionToViewPosition(new A(o.toLineNumber,this.model.getLineMaxColumn(o.toLineNumber))).lineNumber;t[n]={fromLineNumber:r,toLineNumber:a}}this._eventDispatcher.emitSingleViewEvent(new zwe(t)),this._eventDispatcher.emitOutgoingEvent(new t1e(e))})),this._register(this.model.onDidChangeLanguageConfiguration(e=>{this._eventDispatcher.emitSingleViewEvent(new Bwe),this.cursorConfig=new rp(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new Qwe(e))})),this._register(this.model.onDidChangeLanguage(e=>{this.cursorConfig=new rp(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new Xwe(e))})),this._register(this.model.onDidChangeOptions(e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const t=this._eventDispatcher.beginEmitViewEvents();t.emitViewEvent(new Qy),t.emitViewEvent(new Jy),t.emitViewEvent(new $u(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new rp(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new e1e(e))})),this._register(this.model.onDidChangeDecorations(e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new $u(e)),this._eventDispatcher.emitOutgoingEvent(new Ywe(e))}))}setHiddenAreas(e,t){var r;this.hiddenAreasModel.setHiddenAreas(t,e);const n=this.hiddenAreasModel.getMergedRanges();if(n===this.previousHiddenAreas)return;this.previousHiddenAreas=n;const i=this._captureStableViewport();let o=!1;try{const a=this._eventDispatcher.beginEmitViewEvents();o=this._lines.setHiddenAreas(n),o&&(a.emitViewEvent(new Qy),a.emitViewEvent(new Jy),a.emitViewEvent(new $u(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const l=(r=i.viewportStartModelPosition)==null?void 0:r.lineNumber;l&&n.some(d=>d.startLineNumber<=l&&l<=d.endLineNumber)||i.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),o&&this._eventDispatcher.emitOutgoingEvent(new Gwe)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(146),t=this._configuration.options.get(67),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),o=Math.max(1,i.completelyVisibleStartLineNumber-n),r=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new L(o,this.getLineMinColumn(o),r,this.getLineMaxColumn(r)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(n.length===0)return[t];const i=[];let o=0,r=t.startLineNumber,a=t.startColumn;const l=t.endLineNumber,c=t.endColumn;for(let d=0,h=n.length;d<h;d++){const u=n[d].startLineNumber,f=n[d].endLineNumber;f<r||u>l||(r<u&&(i[o++]=new L(r,a,u-1,this.model.getLineMaxColumn(u-1))),r=f+1,a=1)}return(r<l||r===l&&a<c)&&(i[o++]=new L(r,a,l,c)),i}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new L(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new L(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new A(n,this.getLineMinColumn(n))),o=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:o}}reduceRestoreState(e){if(typeof e.firstPosition>"u")return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=ds(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=Ba(this.getLineContent(e));return t===-1?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const i=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,i)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const n=this.model.mightContainRTL(),i=this.model.mightContainNonBasicASCII(),o=this.getTabSize(),r=this._lines.getViewLineData(e);return r.inlineDecorations&&(t=[...t,...r.inlineDecorations.map(a=>a.toInlineDecoration(e))]),new er(r.minColumn,r.maxColumn,r.content,r.continuesWithWrappedLine,n,i,r.tokens,t,o,r.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){const i=this._lines.getViewLinesData(e,t,n);return new ove(this.getTabSize(),i)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,xk(this._configuration.options)),n=new w1e;for(const i of t){const o=i.options,r=o.overviewRuler;if(!r)continue;const a=r.position;if(a===0)continue;const l=r.getColor(e.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.startLineNumber,i.range.startColumn),d=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.endLineNumber,i.range.endColumn);n.accept(l,o.zIndex,c,d,a)}return n.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const n=t.options.overviewRuler;n==null||n.invalidateCachedColor();const i=t.options.minimap;i==null||i.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getValueLengthInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(n,t)}modifyPosition(e,t){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e),i=this.model.modifyPosition(n,t);return this.coordinatesConverter.convertModelPositionToViewPosition(i)}deduceModelPositionRelativeToViewPosition(e,t,n){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e);this.model.getEOL().length===2&&(t<0?t-=n:t+=n);const r=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(r)}getPlainTextToCopy(e,t,n){const i=n?`\r
`:this.model.getEOL();e=e.slice(0),e.sort(L.compareRangesUsingStarts);let o=!1,r=!1;for(const l of e)l.isEmpty()?o=!0:r=!0;if(!r){if(!t)return"";const l=e.map(d=>d.startLineNumber);let c="";for(let d=0;d<l.length;d++)d>0&&l[d-1]===l[d]||(c+=this.model.getLineContent(l[d])+i);return c}if(o&&t){const l=[];let c=0;for(const d of e){const h=d.startLineNumber;d.isEmpty()?h!==c&&l.push(this.model.getLineContent(h)):l.push(this.model.getValueInRange(d,n?2:0)),c=h}return l.length===1?l[0]:l}const a=[];for(const l of e)l.isEmpty()||a.push(this.model.getValueInRange(l,n?2:0));return a.length===1?a[0]:a}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===xs||e.length!==1)return null;let i=e[0];if(i.isEmpty()){if(!t)return null;const d=i.startLineNumber;i=new L(d,this.model.getLineMinColumn(d),d,this.model.getLineMaxColumn(d))}const o=this._configuration.options.get(50),r=this._getColorMap(),l=/[:;\\\/<>]/.test(o.fontFamily)||o.fontFamily===Ls.fontFamily;let c;return l?c=Ls.fontFamily:(c=o.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Ls.fontFamily}`),{mode:n,html:`<div style="color: ${r[1]};background-color: ${r[2]};font-family: ${c};font-weight: ${o.fontWeight};font-size: ${o.fontSize}px;line-height: ${o.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(i,r)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,r=e.endColumn,a=this.getTabSize();let l="";for(let c=n;c<=o;c++){const d=this.model.tokenization.getLineTokens(c),h=d.getLineContent(),u=c===n?i-1:0,f=c===o?r-1:h.length;h===""?l+="<br>":l+=Mhe(h,d.inflate(),t,u,f,a,Bi)}return l}_getColorMap(){const e=mn.getColorMap(),t=["#000000"];if(e)for(let n=1,i=e.length;n<i;n++)t[n]=Z.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector(i=>this._cursor.setStates(i,e,t,n))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t,n=0){this._withViewEventsCollector(i=>this._cursor.setSelections(i,e,t,n))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector(t=>this._cursor.restoreState(t,e))}_executeCursorEdit(e){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new Zwe);return}this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit(i=>this._cursor.executeEdits(i,e,t,n))}startComposition(){this._executeCursorEdit(e=>this._cursor.startComposition(e))}endComposition(e){this._executeCursorEdit(t=>this._cursor.endComposition(t,e))}type(e,t){this._executeCursorEdit(n=>this._cursor.type(n,e,t))}compositionType(e,t,n,i,o){this._executeCursorEdit(r=>this._cursor.compositionType(r,e,t,n,i,o))}paste(e,t,n,i){this._executeCursorEdit(o=>this._cursor.paste(o,e,t,n,i))}cut(e){this._executeCursorEdit(t=>this._cursor.cut(t,e))}executeCommand(e,t){this._executeCursorEdit(n=>this._cursor.executeCommand(n,e,t))}executeCommands(e,t){this._executeCursorEdit(n=>this._cursor.executeCommands(n,e,t))}revealAllCursors(e,t,n=!1){this._withViewEventsCollector(i=>this._cursor.revealAll(i,e,n,0,t,0))}revealPrimaryCursor(e,t,n=!1){this._withViewEventsCollector(i=>this._cursor.revealPrimary(i,e,n,0,t,0))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new L(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new GC(e,!1,n,null,0,!0,0)))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new L(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector(i=>i.emitViewEvent(new GC(e,!1,n,null,0,!0,0)))}revealRange(e,t,n,i,o){this._withViewEventsCollector(r=>r.emitViewEvent(new GC(e,!1,n,null,i,t,o)))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new Uwe),this._eventDispatcher.emitOutgoingEvent(new Kwe))}_withViewEventsCollector(e){return this._transactionalTarget.batchChanges(()=>{try{const t=this._eventDispatcher.beginEmitViewEvents();return e(t)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(e){this._withViewEventsCollector(()=>{e()})}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}};class jW{static create(e){const t=e._setTrackedRange(null,new L(1,1,1,1),1);return new jW(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,n,i,o){this._model=e,this._viewLineNumber=t,this._isValid=n,this._modelTrackedRange=i,this._startLineDelta=o}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const n=e.coordinatesConverter.convertViewPositionToModelPosition(new A(t,e.getLineMinColumn(t))),i=e.model._setTrackedRange(this._modelTrackedRange,new L(n.lineNumber,n.column,n.lineNumber,n.column),1),o=e.viewLayout.getVerticalOffsetForLineNumber(t),r=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=i,this._startLineDelta=r-o}invalidate(){this._isValid=!1}}class w1e{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,i,o){const r=this._asMap[e];if(r){const a=r.data,l=a[a.length-3],c=a[a.length-1];if(l===o&&c+1>=n){i>c&&(a[a.length-1]=i);return}a.push(o,n,i)}else{const a=new C1(e,t,[o,n,i]);this._asMap[e]=a,this.asArray.push(a)}}}class y1e{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const n=this.hiddenAreas.get(e);n&&tz(n,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce((t,n)=>S1e(t,n),[]);return tz(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}}function S1e(s,e){const t=[];let n=0,i=0;for(;n<s.length&&i<e.length;){const o=s[n],r=e[i];if(o.endLineNumber<r.startLineNumber-1)t.push(s[n++]);else if(r.endLineNumber<o.startLineNumber-1)t.push(e[i++]);else{const a=Math.min(o.startLineNumber,r.startLineNumber),l=Math.max(o.endLineNumber,r.endLineNumber);t.push(new L(a,1,l,1)),n++,i++}}for(;n<s.length;)t.push(s[n++]);for(;i<e.length;)t.push(e[i++]);return t}function tz(s,e){if(s.length!==e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].equalsRange(e[t]))return!1;return!0}class nz{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const n=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),i=t.getVerticalOffsetForLineNumber(n.lineNumber);t.setScrollPosition({scrollTop:i+this.startLineDelta},1)}}var k1e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mc=function(s,e){return function(t,n){e(t,n,s)}},tf,ig;let T1=(ig=class extends F{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,t,n,i,o,r,a,l,c,d,h,u){super(),this.languageConfigurationService=h,this._deliveryQueue=Ene(),this._contributions=this._register(new Ewe),this._onDidDispose=this._register(new O),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new iz({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new iz({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Ji(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new O({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new O),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new O),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),o.willCreateCodeEditor();const f={...t};this._domElement=e,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++L1e,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=n.telemetryData,this._configuration=this._register(this._createConfiguration(n.isSimpleWidget||!1,n.contextMenuId??(n.isSimpleWidget?ge.SimpleEditorContext:ge.EditorContext),f,d)),this._register(this._configuration.onDidChange(_=>{this._onDidChangeConfiguration.fire(_);const b=this._configuration.options;if(_.hasChanged(146)){const v=b.get(146);this._onDidLayoutChange.fire(v)}})),this._contextKeyService=this._register(a.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=o,this._commandService=r,this._themeService=l,this._register(new D1e(this,this._contextKeyService)),this._register(new I1e(this,this._contextKeyService,u)),this._instantiationService=this._register(i.createChild(new dv([Ie,this._contextKeyService]))),this._modelData=null,this._focusTracker=new T1e(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let g;Array.isArray(n.contributions)?g=n.contributions:g=Vf.getEditorContributions(),this._contributions.initialize(this,g,this._instantiationService);for(const _ of Vf.getEditorActions()){if(this._actions.has(_.id)){Pe(new Error(`Cannot have two actions with the same id ${_.id}`));continue}const b=new kY(_.id,_.label,_.alias,_.metadata,_.precondition??void 0,v=>this._instantiationService.invokeFunction(C=>Promise.resolve(_.runEditorCommand(C,this,v))),this._contextKeyService);this._actions.set(b.id,b)}const p=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new $se(this._domElement,{onDragOver:_=>{if(!p())return;const b=this.getTargetAtClientPoint(_.clientX,_.clientY);b!=null&&b.position&&this.showDropIndicatorAt(b.position)},onDrop:async _=>{if(!p()||(this.removeDropIndicator(),!_.dataTransfer))return;const b=this.getTargetAtClientPoint(_.clientX,_.clientY);b!=null&&b.position&&this._onDropIntoEditor.fire({position:b.position,event:_})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var t;(t=this._modelData)==null||t.view.writeScreenReaderContent(e)}_createConfiguration(e,t,n,i){return new CO(e,t,n,this._domElement,i)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return F0.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?vt.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),e):null}getValue(e=null){if(!this._modelData)return"";const t=!!(e&&e.preserveBOM);let n=0;return e&&e.lineEnding&&e.lineEnding===`
`?n=1:e&&e.lineEnding&&e.lineEnding===`\r
`&&(n=2),this._modelData.model.getValue(n,t)}setValue(e){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(e)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(e=null){var t;try{this._beginUpdate();const n=e;if(this._modelData===null&&n===null||this._modelData&&this._modelData.model===n)return;const i={oldModelUrl:((t=this._modelData)==null?void 0:t.model.uri)||null,newModelUrl:(n==null?void 0:n.uri)||null};this._onWillChangeModel.fire(i);const o=this.hasTextFocus(),r=this._detachModel();this._attachModel(n),o&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(i),this._postDetachModelCleanup(r),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const t=this._decorationTypeSubtypes[e];for(const n in t)this._removeDecorationType(e+"-"+n)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,t,n,i){const o=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,i)}getTopForLineNumber(e,t=!1){return this._modelData?tf._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}getTopForPosition(e,t){return this._modelData?tf._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}static _getVerticalOffsetForPosition(e,t,n,i=!1){const o=e.model.validatePosition({lineNumber:t,column:n}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,i)}getBottomForLineNumber(e,t=!1){if(!this._modelData)return-1;const n=this._modelData.model.getLineMaxColumn(e);return tf._getVerticalOffsetAfterPosition(this._modelData,e,n,t)}setHiddenAreas(e,t){var n;(n=this._modelData)==null||n.viewModel.setHiddenAreas(e.map(i=>L.lift(i)),t)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const t=this._modelData.model.validatePosition(e),n=this._modelData.model.getOptions().tabSize;return Gn.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,n)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e,t="api"){if(this._modelData){if(!A.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,t,n,i){if(!this._modelData)return;if(!L.isIRange(e))throw new Error("Invalid arguments");const o=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",n,r,t,i)}revealLine(e,t=0){this._revealLine(e,0,t)}revealLineInCenter(e,t=0){this._revealLine(e,1,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._revealLine(e,2,t)}revealLineNearTop(e,t=0){this._revealLine(e,5,t)}_revealLine(e,t,n){if(typeof e!="number")throw new Error("Invalid arguments");this._sendRevealRange(new L(e,1,e,1),t,!1,n)}revealPosition(e,t=0){this._revealPosition(e,0,!0,t)}revealPositionInCenter(e,t=0){this._revealPosition(e,1,!0,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._revealPosition(e,2,!0,t)}revealPositionNearTop(e,t=0){this._revealPosition(e,5,!0,t)}_revealPosition(e,t,n,i){if(!A.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new L(e.lineNumber,e.column,e.lineNumber,e.column),t,n,i)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e,t="api"){const n=me.isISelection(e),i=L.isIRange(e);if(!n&&!i)throw new Error("Invalid arguments");if(n)this._setSelectionImpl(e,t);else if(i){const o={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(o,t)}}_setSelectionImpl(e,t){if(!this._modelData)return;const n=new me(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[n])}revealLines(e,t,n=0){this._revealLines(e,t,0,n)}revealLinesInCenter(e,t,n=0){this._revealLines(e,t,1,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._revealLines(e,t,2,n)}revealLinesNearTop(e,t,n=0){this._revealLines(e,t,5,n)}_revealLines(e,t,n,i){if(typeof e!="number"||typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new L(e,1,t,1),n,!1,i)}revealRange(e,t=0,n=!1,i=!0){this._revealRange(e,n?1:0,i,t)}revealRangeInCenter(e,t=0){this._revealRange(e,1,!0,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._revealRange(e,2,!0,t)}revealRangeNearTop(e,t=0){this._revealRange(e,5,!0,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._revealRange(e,6,!0,t)}revealRangeAtTop(e,t=0){this._revealRange(e,3,!0,t)}_revealRange(e,t,n,i){if(!L.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(L.lift(e),t,n,i)}setSelections(e,t="api",n=0){if(this._modelData){if(!e||e.length===0)throw new Error("Invalid arguments");for(let i=0,o=e.length;i<o;i++)if(!me.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,n)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}setScrollTop(e,t=1){if(this._modelData){if(typeof e!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}setScrollPosition(e,t=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState(),t=this._modelData.viewModel.saveCursorState(),n=this._modelData.viewModel.saveState();return{cursorState:t,viewState:n,contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const t=e;if(t&&t.cursorState&&t.viewState){const n=t.cursorState;Array.isArray(n)?n.length>0&&this._modelData.viewModel.restoreCursorState(n):this._modelData.viewModel.restoreCursorState([n]),this._contributions.restoreViewState(t.contributionsState||{});const i=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(i)}}handleInitialized(){var e;(e=this._getViewModel())==null||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter(t=>t.isSupported()),e}getAction(e){return this._actions.get(e)||null}trigger(e,t,n){n=n||{};try{switch(this._beginUpdate(),t){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(e);return;case"type":{const o=n;this._type(e,o.text||"");return}case"replacePreviousChar":{const o=n;this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);return}case"compositionType":{const o=n;this._compositionType(e,o.text||"",o.replacePrevCharCnt||0,o.replaceNextCharCnt||0,o.positionDelta||0);return}case"paste":{const o=n;this._paste(e,o.text||"",o.pasteOnNewLine||!1,o.multicursorText||null,o.mode||null,o.clipboardEvent);return}case"cut":this._cut(e);return}const i=this.getAction(t);if(i){Promise.resolve(i.run(n)).then(void 0,Pe);return}if(!this._modelData||this._triggerEditorCommand(e,t,n))return;this._triggerCommand(t,n)}finally{this._endUpdate()}}_triggerCommand(e,t){this._commandService.executeCommand(e,t)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,t){!this._modelData||t.length===0||(e==="keyboard"&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),e==="keyboard"&&this._onDidType.fire(t))}_compositionType(e,t,n,i,o){this._modelData&&this._modelData.viewModel.compositionType(t,n,i,o,e)}_paste(e,t,n,i,o,r){if(!this._modelData)return;const a=this._modelData.viewModel,l=a.getSelection().getStartPosition();a.paste(t,n,i,e);const c=a.getSelection().getStartPosition();e==="keyboard"&&this._onDidPaste.fire({clipboardEvent:r,range:new L(l.lineNumber,l.column,c.lineNumber,c.column),languageId:o})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,t,n){const i=Vf.getEditorCommand(t);return i?(n=n||{},n.source=e,this._instantiationService.invokeFunction(o=>{Promise.resolve(i.runEditorCommand(o,this,n)).then(void 0,Pe)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(e,t,n){if(!this._modelData||this._configuration.options.get(92))return!1;let i;return n?Array.isArray(n)?i=()=>n:i=n:i=()=>null,this._modelData.viewModel.executeEdits(e,t,i),!0}executeCommand(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}executeCommands(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}createDecorationsCollection(e){return new E1e(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,xk(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,xk(this._configuration.options)):null}deltaDecorations(e,t){return this._modelData?e.length===0&&t.length===0?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}removeDecorations(e){!this._modelData||e.length===0||this._modelData.model.changeDecorations(t=>{t.deltaDecorations(e,[])})}removeDecorationsByType(e){const t=this._decorationTypeKeysToIds[e];t&&this.changeDecorations(n=>n.deltaDecorations(t,[])),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(e){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(e)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e,t=!1){this._configuration.observeContainer(e),t||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}layoutContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(n)}}removeContentWidget(e){const t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){const n=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(n)}}addOverlayWidget(e){const t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}layoutOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(n)}}removeOverlayWidget(e){const t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){const n=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(n)}}addGlyphMarginWidget(e){const t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}layoutGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const n=this._glyphMarginWidgets[t];n.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(n)}}removeGlyphMarginWidget(e){const t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){const n=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(n)}}changeViewZones(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(e)}getTargetAtClientPoint(e,t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(e,t)}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const t=this._modelData.model.validatePosition(e),n=this._configuration.options,i=n.get(146),o=tf._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),r=this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+i.glyphMarginWidth+i.lineNumbersWidth+i.decorationsWidth-this.getScrollLeft();return{top:o,left:r,height:n.get(67)}}getOffsetForColumn(e,t){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(e,t)}render(e=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,e)})}setAriaOptions(e){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(e)}applyFontInfo(e){Ii(e,this._configuration.options.get(50))}setBanner(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e){this._modelData=null;return}const t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const n=e.onBeforeAttached(),i=new C1e(this._id,this._configuration,e,FW.create(Le(this._domElement)),WW.create(this._configuration.options),a=>So(Le(this._domElement),a),this.languageConfigurationService,this._themeService,n,{batchChanges:a=>{try{return this._beginUpdate(),a()}finally{this._endUpdate()}}});t.push(e.onWillDispose(()=>this.setModel(null))),t.push(i.onEvent(a=>{switch(a.kind){case 0:this._onDidContentSizeChange.fire(a);break;case 1:this._editorTextFocus.setValue(a.hasFocus);break;case 2:this._onDidScrollChange.fire(a);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(a.reachedMaxCursorCount){const h=this.getOption(80),u=m("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",h);this._notificationService.prompt(PT.Warning,u,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:m("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const l=[];for(let h=0,u=a.selections.length;h<u;h++)l[h]=a.selections[h].getPosition();const c={position:l[0],secondaryPositions:l.slice(1),reason:a.reason,source:a.source};this._onDidChangeCursorPosition.fire(c);const d={selection:a.selections[0],secondarySelections:a.selections.slice(1),modelVersionId:a.modelVersionId,oldSelections:a.oldSelections,oldModelVersionId:a.oldModelVersionId,source:a.source,reason:a.reason};this._onDidChangeCursorSelection.fire(d);break}case 7:this._onDidChangeModelDecorations.fire(a.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(a.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(a.event);break;case 10:this._onDidChangeModelContent.fire(a.event);break;case 11:this._onDidChangeModelOptions.fire(a.event);break;case 12:this._onDidChangeModelTokens.fire(a.event);break}}));const[o,r]=this._createView(i);if(r){this._domElement.appendChild(o.domNode.domNode);let a=Object.keys(this._contentWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];o.addContentWidget(this._contentWidgets[d])}a=Object.keys(this._overlayWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];o.addOverlayWidget(this._overlayWidgets[d])}a=Object.keys(this._glyphMarginWidgets);for(let l=0,c=a.length;l<c;l++){const d=a[l];o.addGlyphMarginWidget(this._glyphMarginWidgets[d])}o.render(!1,!0),o.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new x1e(e,i,o,r,t,n)}_createView(e){let t;this.isSimpleWidget?t={paste:(o,r,a,l)=>{this._paste("keyboard",o,r,a,l)},type:o=>{this._type("keyboard",o)},compositionType:(o,r,a,l)=>{this._compositionType("keyboard",o,r,a,l)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:t={paste:(o,r,a,l)=>{const c={text:o,pasteOnNewLine:r,multicursorText:a,mode:l};this._commandService.executeCommand("paste",c)},type:o=>{const r={text:o};this._commandService.executeCommand("type",r)},compositionType:(o,r,a,l)=>{if(a||l){const c={text:o,replacePrevCharCnt:r,replaceNextCharCnt:a,positionDelta:l};this._commandService.executeCommand("compositionType",c)}else{const c={text:o,replaceCharCnt:r};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const n=new CE(e.coordinatesConverter);return n.onKeyDown=o=>this._onKeyDown.fire(o),n.onKeyUp=o=>this._onKeyUp.fire(o),n.onContextMenu=o=>this._onContextMenu.fire(o),n.onMouseMove=o=>this._onMouseMove.fire(o),n.onMouseLeave=o=>this._onMouseLeave.fire(o),n.onMouseDown=o=>this._onMouseDown.fire(o),n.onMouseUp=o=>this._onMouseUp.fire(o),n.onMouseDrag=o=>this._onMouseDrag.fire(o),n.onMouseDrop=o=>this._onMouseDrop.fire(o),n.onMouseDropCanceled=o=>this._onMouseDropCanceled.fire(o),n.onMouseWheel=o=>this._onMouseWheel.fire(o),[new AO(t,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){e==null||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var n;if((n=this._contributionsDisposable)==null||n.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&t.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return this._modelData!==null}showDropIndicatorAt(e){const t=[{range:new L(e.lineNumber,e.column,e.lineNumber,e.column),options:tf.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,t){this._contextKeyService.createKey(e,t)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}},tf=ig,ig.dropIntoEditorDecorationOptions=Ve.register({description:"workbench-dnd-target",className:"dnd-target"}),ig);T1=tf=k1e([mc(3,Ce),mc(4,mt),mc(5,Wt),mc(6,Ie),mc(7,Yn),mc(8,En),mc(9,xo),mc(10,cn),mc(11,ue)],T1);let L1e=0;class x1e{constructor(e,t,n,i,o,r){this.model=e,this.viewModel=t,this.view=n,this.hasRealView=i,this.listenersToRemove=o,this.attachedView=r}dispose(){Mt(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class iz extends F{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new O(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new O(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const t=e?2:1;this._value!==t&&(this._value=t,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}class Ji extends O{constructor(e,t){super({deliveryQueue:t}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class D1e extends F{constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=I.editorSimpleInput.bindTo(t),this._editorFocus=I.focus.bindTo(t),this._textInputFocus=I.textInputFocus.bindTo(t),this._editorTextFocus=I.editorTextFocus.bindTo(t),this._tabMovesFocus=I.tabMovesFocus.bindTo(t),this._editorReadonly=I.readOnly.bindTo(t),this._inDiffEditor=I.inDiffEditor.bindTo(t),this._editorColumnSelection=I.columnSelection.bindTo(t),this._hasMultipleSelections=I.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=I.hasNonEmptySelection.bindTo(t),this._canUndo=I.canUndo.bindTo(t),this._canRedo=I.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(Lb.onDidChangeTabFocus(n=>this._tabMovesFocus.set(n))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(Lb.getTabFocusMode()),this._editorReadonly.set(e.get(92)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}}class I1e extends F{constructor(e,t,n){super(),this._editor=e,this._contextKeyService=t,this._languageFeaturesService=n,this._langId=I.languageId.bindTo(t),this._hasCompletionItemProvider=I.hasCompletionItemProvider.bindTo(t),this._hasCodeActionsProvider=I.hasCodeActionsProvider.bindTo(t),this._hasCodeLensProvider=I.hasCodeLensProvider.bindTo(t),this._hasDefinitionProvider=I.hasDefinitionProvider.bindTo(t),this._hasDeclarationProvider=I.hasDeclarationProvider.bindTo(t),this._hasImplementationProvider=I.hasImplementationProvider.bindTo(t),this._hasTypeDefinitionProvider=I.hasTypeDefinitionProvider.bindTo(t),this._hasHoverProvider=I.hasHoverProvider.bindTo(t),this._hasDocumentHighlightProvider=I.hasDocumentHighlightProvider.bindTo(t),this._hasDocumentSymbolProvider=I.hasDocumentSymbolProvider.bindTo(t),this._hasReferenceProvider=I.hasReferenceProvider.bindTo(t),this._hasRenameProvider=I.hasRenameProvider.bindTo(t),this._hasSignatureHelpProvider=I.hasSignatureHelpProvider.bindTo(t),this._hasInlayHintsProvider=I.hasInlayHintsProvider.bindTo(t),this._hasDocumentFormattingProvider=I.hasDocumentFormattingProvider.bindTo(t),this._hasDocumentSelectionFormattingProvider=I.hasDocumentSelectionFormattingProvider.bindTo(t),this._hasMultipleDocumentFormattingProvider=I.hasMultipleDocumentFormattingProvider.bindTo(t),this._hasMultipleDocumentSelectionFormattingProvider=I.hasMultipleDocumentSelectionFormattingProvider.bindTo(t),this._isInEmbeddedEditor=I.isInEmbeddedEditor.bindTo(t);const i=()=>this._update();this._register(e.onDidChangeModel(i)),this._register(e.onDidChangeModelLanguage(i)),this._register(n.completionProvider.onDidChange(i)),this._register(n.codeActionProvider.onDidChange(i)),this._register(n.codeLensProvider.onDidChange(i)),this._register(n.definitionProvider.onDidChange(i)),this._register(n.declarationProvider.onDidChange(i)),this._register(n.implementationProvider.onDidChange(i)),this._register(n.typeDefinitionProvider.onDidChange(i)),this._register(n.hoverProvider.onDidChange(i)),this._register(n.documentHighlightProvider.onDidChange(i)),this._register(n.documentSymbolProvider.onDidChange(i)),this._register(n.referenceProvider.onDidChange(i)),this._register(n.renameProvider.onDidChange(i)),this._register(n.documentFormattingEditProvider.onDidChange(i)),this._register(n.documentRangeFormattingEditProvider.onDidChange(i)),this._register(n.signatureHelpProvider.onDidChange(i)),this._register(n.inlayHintsProvider.onDidChange(i)),i()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const e=this._editor.getModel();if(!e){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===We.walkThroughSnippet||e.uri.scheme===We.vscodeChatCodeBlock)})}}class T1e extends F{constructor(e,t){super(),this._onChange=this._register(new O),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(Ka(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(Ka(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class E1e{get length(){return this._decorationIds.length}constructor(e,t){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(t)&&t.length>0&&this.set(t)}onDidChange(e,t,n){return this._editor.onDidChangeModelDecorations(i=>{this._isChangingDecorations||e.call(t,i)},n)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),t=[];for(const n of this._decorationIds){const i=e.getDecorationRange(n);i&&t.push(i)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(n=>{t=n.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}}const N1e=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),R1e=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function AR(s){return N1e+encodeURIComponent(s.toString())+R1e}const M1e=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),A1e=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function P1e(s){return M1e+encodeURIComponent(s.toString())+A1e}Er((s,e)=>{const t=s.getColor(BT);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${AR(t)}") repeat-x bottom left; }`);const n=s.getColor(vd);n&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${AR(n)}") repeat-x bottom left; }`);const i=s.getColor(Gl);i&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${AR(i)}") repeat-x bottom left; }`);const o=s.getColor(xle);o&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${P1e(o)}") no-repeat bottom left; }`);const r=s.getColor(cge);r&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${r.rgba.a}; }`)});class Qa{static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new Qa(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,n=0;const i=e.getVisibleRanges();if(i.length>0){t=i[0].getStartPosition();const o=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-o}return new Qa(e.getScrollTop(),e.getContentHeight(),t,n,e.getPosition())}constructor(e,t,n,i,o){this._initialScrollTop=e,this._initialContentHeight=t,this._visiblePosition=n,this._visiblePositionScrollDelta=i,this._cursorPosition=o}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){const t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;const t=e.getPosition();if(!this._cursorPosition||!t)return;const n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n,1)}}function O1e(s,e,t,n){if(s.length===0)return e;if(e.length===0)return s;const i=[];let o=0,r=0;for(;o<s.length&&r<e.length;){const a=s[o],l=e[r],c=t(a),d=t(l);c<d?(i.push(a),o++):c>d?(i.push(l),r++):(i.push(n(a,l)),o++,r++)}for(;o<s.length;)i.push(s[o]),o++;for(;r<e.length;)i.push(e[r]),r++;return i}function ux(s,e){const t=new q,n=s.createDecorationsCollection();return t.add(T0({debugName:()=>`Apply decorations from ${e.debugName}`},i=>{const o=e.read(i);n.set(o)})),t.add({dispose:()=>{n.clear()}}),t}function Up(s,e){return s.appendChild(e),ve(()=>{e.remove()})}function F1e(s,e){return s.prepend(e),ve(()=>{e.remove()})}class IY extends F{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,t){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new aY(e,t)),this._width=Ge(this,this.elementSizeObserver.getWidth()),this._height=Ge(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(n=>rn(i=>{this._width.set(this.elementSizeObserver.getWidth(),i),this._height.set(this.elementSizeObserver.getHeight(),i)})))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function sz(s,e,t){let n=e.get(),i=n,o=n;const r=Ge("animatedValue",n);let a=-1;const l=300;let c;t.add(E0({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(h,u)=>(h.didChange(e)&&(u.animate=u.animate||h.change),!0)},(h,u)=>{c!==void 0&&(s.cancelAnimationFrame(c),c=void 0),i=o,n=e.read(h),a=Date.now()-(u.animate?0:l),d()}));function d(){const h=Date.now()-a;o=Math.floor(W1e(h,i,n-i,l)),h<l?c=s.requestAnimationFrame(d):o=n,r.set(o,void 0)}return r}function W1e(s,e,t,n){return s===n?e+t:t*(-Math.pow(2,-10*s/n)+1)+e}class qW extends F{constructor(e,t,n){super(),this._register(new zO(e,n)),this._register(wd(n,{height:t.actualHeight,top:t.actualTop}))}}class jp{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,t){this._afterLineNumber=e,this.heightInPx=t,this.domNode=document.createElement("div"),this._actualTop=Ge(this,void 0),this._actualHeight=Ge(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=n=>{this._actualTop.set(n,void 0)},this.onComputedHeight=n=>{this._actualHeight.set(n,void 0)}}}const gI=class gI{constructor(e,t){this._editor=e,this._domElement=t,this._overlayWidgetId=`managedOverlayWidget-${gI._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}};gI._counter=0;let zO=gI;function wd(s,e){return Ae(t=>{for(let[n,i]of Object.entries(e))i&&typeof i=="object"&&"read"in i&&(i=i.read(t)),typeof i=="number"&&(i=`${i}px`),n=n.replace(/[A-Z]/g,o=>"-"+o.toLowerCase()),s.style[n]=i})}function fx(s,e,t,n){const i=new q,o=[];return i.add(Ks((r,a)=>{const l=e.read(r),c=new Map,d=new Map;t&&t(!0),s.changeViewZones(h=>{for(const u of o)h.removeZone(u),n==null||n.delete(u);o.length=0;for(const u of l){const f=h.addZone(u);u.setZoneId&&u.setZoneId(f),o.push(f),n==null||n.add(f),c.set(u,f)}}),t&&t(!1),a.add(E0({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(h,u){const f=d.get(h.changedObservable);return f!==void 0&&u.zoneIds.push(f),!0}},(h,u)=>{for(const f of l)f.onChange&&(d.set(f.onChange,c.get(f)),f.onChange.read(h));t&&t(!0),s.changeViewZones(f=>{for(const g of u.zoneIds)f.layoutZone(g)}),t&&t(!1)}))})),i.add({dispose(){t&&t(!0),s.changeViewZones(r=>{for(const a of o)r.removeZone(a)}),n==null||n.clear(),t&&t(!1)}}),i}class B1e extends an{dispose(){super.dispose(!0)}}function oz(s,e){const t=Uw(e,i=>i.original.startLineNumber<=s.lineNumber);if(!t)return L.fromPositions(s);if(t.original.endLineNumberExclusive<=s.lineNumber){const i=s.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return L.fromPositions(new A(i,s.column))}if(!t.innerChanges)return L.fromPositions(new A(t.modified.startLineNumber,1));const n=Uw(t.innerChanges,i=>i.originalRange.getStartPosition().isBeforeOrEqual(s));if(!n){const i=s.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return L.fromPositions(new A(i,s.column))}if(n.originalRange.containsPosition(s))return n.modifiedRange;{const i=H1e(n.originalRange.getEndPosition(),s);return L.fromPositions(i.addToPosition(n.modifiedRange.getEndPosition()))}}function H1e(s,e){return s.lineNumber===e.lineNumber?new sa(0,e.column-s.column):new sa(e.lineNumber-s.lineNumber,e.column-1)}function V1e(s,e){let t;return s.filter(n=>{const i=e(n,t);return t=n,i})}class gx{static create(e,t=void 0){return new rz(e,e,t)}static createWithDisposable(e,t,n=void 0){const i=new q;return i.add(t),i.add(e),new rz(e,i,n)}}class rz extends gx{constructor(e,t,n){super(),this.object=e,this._disposable=t,this._debugOwner=n,this._refCount=1,this._isDisposed=!1,this._owners=[],n&&this._addOwner(n)}_addOwner(e){e&&this._owners.push(e)}createNewRef(e){return this._refCount++,e&&this._addOwner(e),new z1e(this,e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(e){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),e){const t=this._owners.indexOf(e);t!==-1&&this._owners.splice(t,1)}}}class z1e extends gx{constructor(e,t){super(),this._base=e,this._debugOwner=t,this._isDisposed=!1}get object(){return this._base.object}createNewRef(e){return this._base.createNewRef(e)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}var KW=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},GW=function(s,e){return function(t,n){e(t,n,s)}};const $1e=jt("diff-review-insert",J.add,m("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),U1e=jt("diff-review-remove",J.remove,m("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),j1e=jt("diff-review-close",J.close,m("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));var $_;let Mf=($_=class extends F{constructor(e,t,n,i,o,r,a,l,c){super(),this._parentNode=e,this._visible=t,this._setVisible=n,this._canClose=i,this._width=o,this._height=r,this._diffs=a,this._models=l,this._instantiationService=c,this._state=xu(this,(d,h)=>{const u=this._visible.read(d);if(this._parentNode.style.visibility=u?"visible":"hidden",!u)return null;const f=h.add(this._instantiationService.createInstance($O,this._diffs,this._models,this._setVisible,this._canClose)),g=h.add(this._instantiationService.createInstance(UO,this._parentNode,f,this._width,this._height,this._models));return{model:f,view:g}}).recomputeInitiallyAndOnChange(this._store)}next(){rn(e=>{const t=this._visible.get();this._setVisible(!0,e),t&&this._state.get().model.nextGroup(e)})}prev(){rn(e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)})}close(){rn(e=>{this._setVisible(!1,e)})}},$_._ttPolicy=Nd("diffReview",{createHTML:e=>e}),$_);Mf=KW([GW(8,Ce)],Mf);let $O=class extends F{constructor(e,t,n,i,o){super(),this._diffs=e,this._models=t,this._setVisible=n,this.canClose=i,this._accessibilitySignalService=o,this._groups=Ge(this,[]),this._currentGroupIdx=Ge(this,0),this._currentElementIdx=Ge(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((r,a)=>this._groups.read(a)[r]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((r,a)=>{var l;return(l=this.currentGroup.read(a))==null?void 0:l.lines[r]}),this._register(Ae(r=>{const a=this._diffs.read(r);if(!a){this._groups.set([],void 0);return}const l=q1e(a,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());rn(c=>{const d=this._models.getModifiedPosition();if(d){const h=l.findIndex(u=>(d==null?void 0:d.lineNumber)<u.range.modified.endLineNumberExclusive);h!==-1&&this._currentGroupIdx.set(h,c)}this._groups.set(l,c)})})),this._register(Ae(r=>{const a=this.currentElement.read(r);(a==null?void 0:a.type)===_s.Deleted?this._accessibilitySignalService.playSignal(Fo.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(a==null?void 0:a.type)===_s.Added&&this._accessibilitySignalService.playSignal(Fo.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register(Ae(r=>{const a=this.currentElement.read(r);if(a&&a.type!==_s.Header){const l=a.modifiedLineNumber??a.diff.modified.startLineNumber;this._models.modifiedSetSelection(L.fromPositions(new A(l,1)))}}))}_goToGroupDelta(e,t){const n=this.groups.get();!n||n.length<=1||sm(t,i=>{this._currentGroupIdx.set(Ye.ofLength(n.length).clipCyclic(this._currentGroupIdx.get()+e),i),this._currentElementIdx.set(0,i)})}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const t=this.currentGroup.get();!t||t.lines.length<=1||rn(n=>{this._currentElementIdx.set(Ye.ofLength(t.lines.length).clip(this._currentElementIdx.get()+e),n)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const t=this.currentGroup.get();if(!t)return;const n=t.lines.indexOf(e);n!==-1&&rn(i=>{this._currentElementIdx.set(n,i)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===_s.Deleted?this._models.originalReveal(L.fromPositions(new A(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==_s.Header?L.fromPositions(new A(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};$O=KW([GW(4,Iu)],$O);const Uv=3;function q1e(s,e,t){const n=[];for(const i of v3(s,(o,r)=>r.modified.startLineNumber-o.modified.endLineNumberExclusive<2*Uv)){const o=[];o.push(new G1e);const r=new ze(Math.max(1,i[0].original.startLineNumber-Uv),Math.min(i[i.length-1].original.endLineNumberExclusive+Uv,e+1)),a=new ze(Math.max(1,i[0].modified.startLineNumber-Uv),Math.min(i[i.length-1].modified.endLineNumberExclusive+Uv,t+1));uj(i,(d,h)=>{const u=new ze(d?d.original.endLineNumberExclusive:r.startLineNumber,h?h.original.startLineNumber:r.endLineNumberExclusive),f=new ze(d?d.modified.endLineNumberExclusive:a.startLineNumber,h?h.modified.startLineNumber:a.endLineNumberExclusive);u.forEach(g=>{o.push(new X1e(g,f.startLineNumber+(g-u.startLineNumber)))}),h&&(h.original.forEach(g=>{o.push(new Z1e(h,g))}),h.modified.forEach(g=>{o.push(new Y1e(h,g))}))});const l=i[0].modified.join(i[i.length-1].modified),c=i[0].original.join(i[i.length-1].original);n.push(new K1e(new as(l,c),o))}return n}var _s;(function(s){s[s.Header=0]="Header",s[s.Unchanged=1]="Unchanged",s[s.Deleted=2]="Deleted",s[s.Added=3]="Added"})(_s||(_s={}));class K1e{constructor(e,t){this.range=e,this.lines=t}}class G1e{constructor(){this.type=_s.Header}}class Z1e{constructor(e,t){this.diff=e,this.originalLineNumber=t,this.type=_s.Deleted,this.modifiedLineNumber=void 0}}class Y1e{constructor(e,t){this.diff=e,this.modifiedLineNumber=t,this.type=_s.Added,this.originalLineNumber=void 0}}class X1e{constructor(e,t){this.originalLineNumber=e,this.modifiedLineNumber=t,this.type=_s.Unchanged}}let UO=class extends F{constructor(e,t,n,i,o,r){super(),this._element=e,this._model=t,this._width=n,this._height=i,this._models=o,this._languageService=r,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const a=document.createElement("div");a.className="diff-review-actions",this._actionBar=this._register(new Zo(a)),this._register(Ae(l=>{this._actionBar.clear(),this._model.canClose.read(l)&&this._actionBar.push(new _o("diffreview.close",m("label.close","Close"),"close-diff-review "+De.asClassName(j1e),!0,async()=>t.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new S0(this._content,{})),Di(this.domNode,this._scrollbar.getDomNode(),a),this._register(Ae(l=>{this._height.read(l),this._width.read(l),this._scrollbar.scanDomNode()})),this._register(ve(()=>{Di(this.domNode)})),this._register(wd(this.domNode,{width:this._width,height:this._height})),this._register(wd(this._content,{width:this._width,height:this._height})),this._register(Ks((l,c)=>{this._model.currentGroup.read(l),this._render(c)})),this._register(hn(this.domNode,"keydown",l=>{(l.equals(18)||l.equals(2066)||l.equals(530))&&(l.preventDefault(),this._model.goToNextLine()),(l.equals(16)||l.equals(2064)||l.equals(528))&&(l.preventDefault(),this._model.goToPreviousLine()),(l.equals(9)||l.equals(2057)||l.equals(521)||l.equals(1033))&&(l.preventDefault(),this._model.close()),(l.equals(10)||l.equals(3))&&(l.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(e){const t=this._models.getOriginalOptions(),n=this._models.getModifiedOptions(),i=document.createElement("div");i.className="diff-review-table",i.setAttribute("role","list"),i.setAttribute("aria-label",m("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),Ii(i,n.get(50)),Di(this._content,i);const o=this._models.getOriginalModel(),r=this._models.getModifiedModel();if(!o||!r)return;const a=o.getOptions(),l=r.getOptions(),c=n.get(67),d=this._model.currentGroup.get();for(const h of(d==null?void 0:d.lines)||[]){if(!d)break;let u;if(h.type===_s.Header){const g=document.createElement("div");g.className="diff-review-row",g.setAttribute("role","listitem");const p=d.range,_=this._model.currentGroupIndex.get(),b=this._model.groups.get().length,v=k=>k===0?m("no_lines_changed","no lines changed"):k===1?m("one_line_changed","1 line changed"):m("more_lines_changed","{0} lines changed",k),C=v(p.original.length),w=v(p.modified.length);g.setAttribute("aria-label",m({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",_+1,b,p.original.startLineNumber,C,p.modified.startLineNumber,w));const y=document.createElement("div");y.className="diff-review-cell diff-review-summary",y.appendChild(document.createTextNode(`${_+1}/${b}: @@ -${p.original.startLineNumber},${p.original.length} +${p.modified.startLineNumber},${p.modified.length} @@`)),g.appendChild(y),u=g}else u=this._createRow(h,c,this._width.get(),t,o,a,n,r,l);i.appendChild(u);const f=_e(g=>this._model.currentElement.read(g)===h);e.add(Ae(g=>{const p=f.read(g);u.tabIndex=p?0:-1,p&&u.focus()})),e.add($(u,"focus",()=>{this._model.goToLine(h)}))}this._scrollbar.scanDomNode()}_createRow(e,t,n,i,o,r,a,l,c){const d=i.get(146),h=d.glyphMarginWidth+d.lineNumbersWidth,u=a.get(146),f=10+u.glyphMarginWidth+u.lineNumbersWidth;let g="diff-review-row",p="";const _="diff-review-spacer";let b=null;switch(e.type){case _s.Added:g="diff-review-row line-insert",p=" char-insert",b=$1e;break;case _s.Deleted:g="diff-review-row line-delete",p=" char-delete",b=U1e;break}const v=document.createElement("div");v.style.minWidth=n+"px",v.className=g,v.setAttribute("role","listitem"),v.ariaLevel="";const C=document.createElement("div");C.className="diff-review-cell",C.style.height=`${t}px`,v.appendChild(C);const w=document.createElement("span");w.style.width=h+"px",w.style.minWidth=h+"px",w.className="diff-review-line-number"+p,e.originalLineNumber!==void 0?w.appendChild(document.createTextNode(String(e.originalLineNumber))):w.innerText=" ",C.appendChild(w);const y=document.createElement("span");y.style.width=f+"px",y.style.minWidth=f+"px",y.style.paddingRight="10px",y.className="diff-review-line-number"+p,e.modifiedLineNumber!==void 0?y.appendChild(document.createTextNode(String(e.modifiedLineNumber))):y.innerText=" ",C.appendChild(y);const k=document.createElement("span");if(k.className=_,b){const N=document.createElement("span");N.className=De.asClassName(b),N.innerText="  ",k.appendChild(N)}else k.innerText="  ";C.appendChild(k);let x;if(e.modifiedLineNumber!==void 0){let N=this._getLineHtml(l,a,c.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);Mf._ttPolicy&&(N=Mf._ttPolicy.createHTML(N)),C.insertAdjacentHTML("beforeend",N),x=l.getLineContent(e.modifiedLineNumber)}else{let N=this._getLineHtml(o,i,r.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);Mf._ttPolicy&&(N=Mf._ttPolicy.createHTML(N)),C.insertAdjacentHTML("beforeend",N),x=o.getLineContent(e.originalLineNumber)}x.length===0&&(x=m("blankLine","blank"));let D="";switch(e.type){case _s.Unchanged:e.originalLineNumber===e.modifiedLineNumber?D=m({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",x,e.originalLineNumber):D=m("equalLine","{0} original line {1} modified line {2}",x,e.originalLineNumber,e.modifiedLineNumber);break;case _s.Added:D=m("insertLine","+ {0} modified line {1}",x,e.modifiedLineNumber);break;case _s.Deleted:D=m("deleteLine","- {0} original line {1}",x,e.originalLineNumber);break}return v.setAttribute("aria-label",D),v}_getLineHtml(e,t,n,i,o){const r=e.getLineContent(i),a=t.get(50),l=_i.createEmpty(r,o),c=er.isBasicASCII(r,e.mightContainNonBasicASCII()),d=er.containsRTL(r,c,e.mightContainRTL());return gE(new Tu(a.isMonospace&&!t.get(33),a.canUseHalfwidthRightwardsArrow,r,!1,c,d,0,l,[],n,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,t.get(118),t.get(100),t.get(95),t.get(51)!==nu.OFF,null)).html}};UO=KW([GW(5,tn)],UO);class Q1e{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}T("diffEditor.move.border","#8b8b8b9c",m("diffEditor.move.border","The border color for text that got moved in the diff editor."));T("diffEditor.moveActive.border","#FFA500",m("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));T("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},m("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const J1e=jt("diff-insert",J.add,m("diffInsertIcon","Line decoration for inserts in the diff editor.")),TY=jt("diff-remove",J.remove,m("diffRemoveIcon","Line decoration for removals in the diff editor.")),mx=Ve.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+De.asClassName(J1e),marginClassName:"gutter-insert"}),E1=Ve.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+De.asClassName(TY),marginClassName:"gutter-delete"}),az=Ve.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),lz=Ve.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),px=Ve.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),ZW=Ve.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),YW=Ve.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),Db=Ve.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),XW=Ve.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),QW=Ve.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"});var EY=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},jO=function(s,e){return function(t,n){e(t,n,s)}},nf;const H0=tt("diffProviderFactoryService");let qO=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(KO,e)}};qO=EY([jO(0,Ce)],qO);st(H0,qO,1);var sg;let KO=(sg=class{constructor(e,t,n){this.editorWorkerService=t,this.telemetryService=n,this.onDidChangeEventEmitter=new O,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;(e=this.diffAlgorithmOnDidChangeSubscription)==null||e.dispose()}async computeDiff(e,t,n,i){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(e,t,n,i);if(e.isDisposed()||t.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(e.getLineCount()===1&&e.getLineMaxColumn(1)===1)return t.getLineCount()===1&&t.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new Go(new ze(1,2),new ze(1,t.getLineCount()+1),[new Oo(e.getFullModelRange(),t.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const o=JSON.stringify([e.uri.toString(),t.uri.toString()]),r=JSON.stringify([e.id,t.id,e.getAlternativeVersionId(),t.getAlternativeVersionId(),JSON.stringify(n)]),a=nf.diffCache.get(o);if(a&&a.context===r)return a.result;const l=pi.create(),c=await this.editorWorkerService.computeDiff(e.uri,t.uri,n,this.diffAlgorithm),d=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:d,timedOut:(c==null?void 0:c.quitEarly)??!0,detectedMoves:n.computeMoves?(c==null?void 0:c.moves.length)??0:-1}),i.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!c)throw new Error("no diff result available");return nf.diffCache.size>10&&nf.diffCache.delete(nf.diffCache.keys().next().value),nf.diffCache.set(o,{result:c,context:r}),c}setOptions(e){var n;let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&((n=this.diffAlgorithmOnDidChangeSubscription)==null||n.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,typeof e.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),t=!0),t&&this.onDidChangeEventEmitter.fire()}},nf=sg,sg.diffCache=new Map,sg);KO=nf=EY([jO(1,to),jO(2,Zi)],KO);function wE(){return P2&&!!P2.VSCODE_DEV}function NY(s){if(wE()){const e=e0e();return e.add(s),{dispose(){e.delete(s)}}}else return{dispose(){}}}function e0e(){eS||(eS=new Set);const s=globalThis;return s.$hotReload_applyNewExports||(s.$hotReload_applyNewExports=e=>{const t={config:{mode:void 0},...e},n=[];for(const i of eS){const o=i(t);o&&n.push(o)}if(n.length>0)return i=>{let o=!1;for(const r of n)r(i)&&(o=!0);return o}}),eS}let eS;wE()&&NY(({oldExports:s,newSrc:e,config:t})=>{if(t.mode==="patch-prototype")return n=>{var i,o;for(const r in n){const a=n[r];if(console.log(`[hot-reload] Patching prototype methods of '${r}'`,{exportedItem:a}),typeof a=="function"&&a.prototype){const l=s[r];if(l){for(const c of Object.getOwnPropertyNames(a.prototype)){const d=Object.getOwnPropertyDescriptor(a.prototype,c),h=Object.getOwnPropertyDescriptor(l.prototype,c);((i=d==null?void 0:d.value)==null?void 0:i.toString())!==((o=h==null?void 0:h.value)==null?void 0:o.toString())&&console.log(`[hot-reload] Patching prototype method '${r}.${c}'`),Object.defineProperty(l.prototype,c,d)}n[r]=l}}}return!0}});function co(s,e){return t0e([s],e),s}function t0e(s,e){wE()&&Pi("reload",n=>NY(({oldExports:i})=>{if([...Object.values(i)].some(o=>s.includes(o)))return o=>(n(void 0),!0)})).read(e)}var n0e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},i0e=function(s,e){return function(t,n){e(t,n,s)}};let GO=class extends F{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,t,n){super(),this.model=e,this._options=t,this._diffProviderFactoryService=n,this._isDiffUpToDate=Ge(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=Ge(this,void 0),this.diff=this._diff,this._unchangedRegions=Ge(this,void 0),this.unchangedRegions=_e(this,a=>{var l;return this._options.hideUnchangedRegions.read(a)?((l=this._unchangedRegions.read(a))==null?void 0:l.regions)??[]:(rn(c=>{var d;for(const h of((d=this._unchangedRegions.get())==null?void 0:d.regions)||[])h.collapseAll(c)}),[])}),this.movedTextToCompare=Ge(this,void 0),this._activeMovedText=Ge(this,void 0),this._hoveredMovedText=Ge(this,void 0),this.activeMovedText=_e(this,a=>this.movedTextToCompare.read(a)??this._hoveredMovedText.read(a)??this._activeMovedText.read(a)),this._cancellationTokenSource=new an,this._diffProvider=_e(this,a=>{const l=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(a)}),c=Pi("onDidChange",l.onDidChange);return{diffProvider:l,onChangeSignal:c}}),this._register(ve(()=>this._cancellationTokenSource.cancel()));const i=ov("contentChangedSignal"),o=this._register(new It(()=>i.trigger(void 0),200));this._register(Ae(a=>{const l=this._unchangedRegions.read(a);if(!l||l.regions.some(g=>g.isDragged.read(a)))return;const c=l.originalDecorationIds.map(g=>e.original.getDecorationRange(g)).map(g=>g?ze.fromRangeInclusive(g):void 0),d=l.modifiedDecorationIds.map(g=>e.modified.getDecorationRange(g)).map(g=>g?ze.fromRangeInclusive(g):void 0),h=l.regions.map((g,p)=>!c[p]||!d[p]?void 0:new Lh(c[p].startLineNumber,d[p].startLineNumber,c[p].length,g.visibleLineCountTop.read(a),g.visibleLineCountBottom.read(a))).filter(Vl),u=[];let f=!1;for(const g of v3(h,(p,_)=>p.getHiddenModifiedRange(a).endLineNumberExclusive===_.getHiddenModifiedRange(a).startLineNumber))if(g.length>1){f=!0;const p=g.reduce((b,v)=>b+v.lineCount,0),_=new Lh(g[0].originalLineNumber,g[0].modifiedLineNumber,p,g[0].visibleLineCountTop.get(),g[g.length-1].visibleLineCountBottom.get());u.push(_)}else u.push(g[0]);if(f){const g=e.original.deltaDecorations(l.originalDecorationIds,u.map(_=>({range:_.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),p=e.modified.deltaDecorations(l.modifiedDecorationIds,u.map(_=>({range:_.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));rn(_=>{this._unchangedRegions.set({regions:u,originalDecorationIds:g,modifiedDecorationIds:p},_)})}}));const r=(a,l,c)=>{const d=Lh.fromDiffs(a.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(c),this._options.hideUnchangedRegionsContextLineCount.read(c));let h;const u=this._unchangedRegions.get();if(u){const _=u.originalDecorationIds.map(w=>e.original.getDecorationRange(w)).map(w=>w?ze.fromRangeInclusive(w):void 0),b=u.modifiedDecorationIds.map(w=>e.modified.getDecorationRange(w)).map(w=>w?ze.fromRangeInclusive(w):void 0);let C=V1e(u.regions.map((w,y)=>{if(!_[y]||!b[y])return;const k=_[y].length;return new Lh(_[y].startLineNumber,b[y].startLineNumber,k,Math.min(w.visibleLineCountTop.get(),k),Math.min(w.visibleLineCountBottom.get(),k-w.visibleLineCountTop.get()))}).filter(Vl),(w,y)=>!y||w.modifiedLineNumber>=y.modifiedLineNumber+y.lineCount&&w.originalLineNumber>=y.originalLineNumber+y.lineCount).map(w=>new as(w.getHiddenOriginalRange(c),w.getHiddenModifiedRange(c)));C=as.clip(C,ze.ofLength(1,e.original.getLineCount()),ze.ofLength(1,e.modified.getLineCount())),h=as.inverse(C,e.original.getLineCount(),e.modified.getLineCount())}const f=[];if(h)for(const _ of d){const b=h.filter(v=>v.original.intersectsStrict(_.originalUnchangedRange)&&v.modified.intersectsStrict(_.modifiedUnchangedRange));f.push(..._.setVisibleRanges(b,l))}else f.push(...d);const g=e.original.deltaDecorations((u==null?void 0:u.originalDecorationIds)||[],f.map(_=>({range:_.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),p=e.modified.deltaDecorations((u==null?void 0:u.modifiedDecorationIds)||[],f.map(_=>({range:_.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:f,originalDecorationIds:g,modifiedDecorationIds:p},l)};this._register(e.modified.onDidChangeContent(a=>{if(this._diff.get()){const c=Gc.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),o.schedule()})),this._register(e.original.onDidChangeContent(a=>{if(this._diff.get()){const c=Gc.fromModelContentChanges(a.changes);this._lastDiff,e.original,e.modified}this._isDiffUpToDate.set(!1,void 0),o.schedule()})),this._register(Ks(async(a,l)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(a),this._options.hideUnchangedRegionsContextLineCount.read(a),o.cancel(),i.read(a);const c=this._diffProvider.read(a);c.onChangeSignal.read(a),co(tK,a),co(lA,a),this._isDiffUpToDate.set(!1,void 0);let d=[];l.add(e.original.onDidChangeContent(f=>{const g=Gc.fromModelContentChanges(f.changes);d=IL(d,g)}));let h=[];l.add(e.modified.onDidChangeContent(f=>{const g=Gc.fromModelContentChanges(f.changes);h=IL(h,g)}));let u=await c.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(a),maxComputationTimeMs:this._options.maxComputationTimeMs.read(a),computeMoves:this._options.showMoves.read(a)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||e.original.isDisposed()||e.modified.isDisposed()||(u=s0e(u,e.original,e.modified),u=(e.original,e.modified,void 0)??u,u=(e.original,e.modified,void 0)??u,rn(f=>{r(u,f),this._lastDiff=u;const g=JW.fromDiffResult(u);this._diff.set(g,f),this._isDiffUpToDate.set(!0,f);const p=this.movedTextToCompare.get();this.movedTextToCompare.set(p?this._lastDiff.moves.find(_=>_.lineRangeMapping.modified.intersect(p.lineRangeMapping.modified)):void 0,f)}))}))}ensureModifiedLineIsVisible(e,t,n){var o,r;if(((o=this.diff.get())==null?void 0:o.mappings.length)===0)return;const i=((r=this._unchangedRegions.get())==null?void 0:r.regions)||[];for(const a of i)if(a.getHiddenModifiedRange(void 0).contains(e)){a.showModifiedLine(e,t,n);return}}ensureOriginalLineIsVisible(e,t,n){var o,r;if(((o=this.diff.get())==null?void 0:o.mappings.length)===0)return;const i=((r=this._unchangedRegions.get())==null?void 0:r.regions)||[];for(const a of i)if(a.getHiddenOriginalRange(void 0).contains(e)){a.showOriginalLine(e,t,n);return}}async waitForDiff(){await vG(this.isDiffUpToDate,e=>e)}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:e==null?void 0:e.regions.map(t=>({range:t.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(e){var i;const t=(i=e.collapsedRegions)==null?void 0:i.map(o=>ze.deserialize(o.range)),n=this._unchangedRegions.get();!n||!t||rn(o=>{for(const r of n.regions)for(const a of t)if(r.modifiedUnchangedRange.intersect(a)){r.setHiddenModifiedRange(a,o);break}})}};GO=n0e([i0e(2,H0)],GO);function s0e(s,e,t){return{changes:s.changes.map(n=>new Go(n.original,n.modified,n.innerChanges?n.innerChanges.map(i=>o0e(i,e,t)):void 0)),moves:s.moves,identical:s.identical,quitEarly:s.quitEarly}}function o0e(s,e,t){let n=s.originalRange,i=s.modifiedRange;return n.startColumn===1&&i.startColumn===1&&(n.endColumn!==1||i.endColumn!==1)&&n.endColumn===e.getLineMaxColumn(n.endLineNumber)&&i.endColumn===t.getLineMaxColumn(i.endLineNumber)&&n.endLineNumber<e.getLineCount()&&i.endLineNumber<t.getLineCount()&&(n=n.setEndPosition(n.endLineNumber+1,1),i=i.setEndPosition(i.endLineNumber+1,1)),new Oo(n,i)}class JW{static fromDiffResult(e){return new JW(e.changes.map(t=>new RY(t)),e.moves||[],e.identical,e.quitEarly)}constructor(e,t,n,i){this.mappings=e,this.movedTexts=t,this.identical=n,this.quitEarly=i}}class RY{constructor(e){this.lineRangeMapping=e}}class Lh{static fromDiffs(e,t,n,i,o){const r=Go.inverse(e,t,n),a=[];for(const l of r){let c=l.original.startLineNumber,d=l.modified.startLineNumber,h=l.original.length;const u=c===1&&d===1,f=c+h===t+1&&d+h===n+1;(u||f)&&h>=o+i?(u&&!f&&(h-=o),f&&!u&&(c+=o,d+=o,h-=o),a.push(new Lh(c,d,h,0,0))):h>=o*2+i&&(c+=o,d+=o,h-=o*2,a.push(new Lh(c,d,h,0,0)))}return a}get originalUnchangedRange(){return ze.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return ze.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,t,n,i,o){this.originalLineNumber=e,this.modifiedLineNumber=t,this.lineCount=n,this._visibleLineCountTop=Ge(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=Ge(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=_e(this,l=>this.visibleLineCountTop.read(l)+this.visibleLineCountBottom.read(l)===this.lineCount&&!this.isDragged.read(l)),this.isDragged=Ge(this,void 0);const r=Math.max(Math.min(i,this.lineCount),0),a=Math.max(Math.min(o,this.lineCount-i),0);S8(i===r),S8(o===a),this._visibleLineCountTop.set(r,void 0),this._visibleLineCountBottom.set(a,void 0)}setVisibleRanges(e,t){const n=[],i=new pr(e.map(l=>l.modified)).subtractFrom(this.modifiedUnchangedRange);let o=this.originalLineNumber,r=this.modifiedLineNumber;const a=this.modifiedLineNumber+this.lineCount;if(i.ranges.length===0)this.showAll(t),n.push(this);else{let l=0;for(const c of i.ranges){const d=l===i.ranges.length-1;l++;const h=(d?a:c.endLineNumberExclusive)-r,u=new Lh(o,r,h,0,0);u.setHiddenModifiedRange(c,t),n.push(u),o=u.originalUnchangedRange.endLineNumberExclusive,r=u.modifiedUnchangedRange.endLineNumberExclusive}}return n}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return ze.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return ze.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,t){const n=e.startLineNumber-this.modifiedLineNumber,i=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(n,i,t)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,t){const n=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,n),t)}showMoreBelow(e=10,t){const n=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,n),t)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,t,n){const i=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),o=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t===0&&i<o||t===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+i,n):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+o,n)}showOriginalLine(e,t,n){const i=e-this.originalLineNumber,o=this.originalLineNumber+this.lineCount-e;t===0&&i<o||t===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+o-i,this.getMaxVisibleLineCountTop()),n):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+i-o,this.getMaxVisibleLineCountBottom()),n)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,t,n){e=Math.max(Math.min(e,this.lineCount),0),t=Math.max(Math.min(t,this.lineCount-e),0),this._visibleLineCountTop.set(e,n),this._visibleLineCountBottom.set(t,n)}}class r0e extends F{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,t,n,i,o,r,a,l,c){super(),this._getViewZoneId=e,this._marginDomNode=t,this._modifiedEditor=n,this._diff=i,this._editor=o,this._viewLineCounts=r,this._originalTextModel=a,this._contextMenuService=l,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=De.asClassName(J.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const d=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${d}px`,this._diffActions.style.lineHeight=`${d}px`,this._marginDomNode.appendChild(this._diffActions);let h=0;const u=n.getOption(128)&&!Ua,f=(g,p)=>{this._contextMenuService.showContextMenu({domForShadowRoot:u?n.getDomNode()??void 0:void 0,getAnchor:()=>({x:g,y:p}),getActions:()=>{const _=[],b=i.modified.isEmpty;return _.push(new _o("diff.clipboard.copyDeletedContent",b?i.original.length>1?m("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):m("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):i.original.length>1?m("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):m("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,async()=>{const C=this._originalTextModel.getValueInRange(i.original.toExclusiveRange());await this._clipboardService.writeText(C)})),i.original.length>1&&_.push(new _o("diff.clipboard.copyDeletedLineContent",b?m("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",i.original.startLineNumber+h):m("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",i.original.startLineNumber+h),void 0,!0,async()=>{let C=this._originalTextModel.getLineContent(i.original.startLineNumber+h);C===""&&(C=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(C)})),n.getOption(92)||_.push(new _o("diff.inline.revertChange",m("diff.inline.revertChange.label","Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),_},autoSelectFirstItem:!0})};this._register(hn(this._diffActions,"mousedown",g=>{if(!g.leftButton)return;const{top:p,height:_}=Sn(this._diffActions),b=Math.floor(d/3);g.preventDefault(),f(g.posx,p+_+b)})),this._register(n.onMouseMove(g=>{(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()?(h=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,d),this.visibility=!0):this.visibility=!1})),this._register(n.onMouseDown(g=>{g.event.leftButton&&(g.target.type===8||g.target.type===5)&&g.target.detail.viewZoneId===this._getViewZoneId()&&(g.event.preventDefault(),h=this._updateLightBulbPosition(this._marginDomNode,g.event.browserEvent.y,d),f(g.event.posx,g.event.posy+d))}))}_updateLightBulbPosition(e,t,n){const{top:i}=Sn(e),o=t-i,r=Math.floor(o/n),a=r*n;if(this._diffActions.style.top=`${a}px`,this._viewLineCounts){let l=0;for(let c=0;c<this._viewLineCounts.length;c++)if(l+=this._viewLineCounts[c],r<l)return c}return r}}const cz=Nd("diffEditorWidget",{createHTML:s=>s});function a0e(s,e,t,n){Ii(n,e.fontInfo);const i=t.length>0,o=new Qb(1e4);let r=0,a=0;const l=[];for(let u=0;u<s.lineTokens.length;u++){const f=u+1,g=s.lineTokens[u],p=s.lineBreakData[u],_=ws.filter(t,f,1,Number.MAX_SAFE_INTEGER);if(p){let b=0;for(const v of p.breakOffsets){const C=g.sliceAndInflate(b,v,0);r=Math.max(r,dz(a,C,ws.extractWrapped(_,b,v),i,s.mightContainNonBasicASCII,s.mightContainRTL,e,o)),a++,b=v}l.push(p.breakOffsets.length)}else l.push(1),r=Math.max(r,dz(a,g,_,i,s.mightContainNonBasicASCII,s.mightContainRTL,e,o)),a++}r+=e.scrollBeyondLastColumn;const c=o.build(),d=cz?cz.createHTML(c):c;n.innerHTML=d;const h=r*e.typicalHalfwidthCharacterWidth;return{heightInLines:a,minWidthInPx:h,viewLineCounts:l}}class l0e{constructor(e,t,n,i){this.lineTokens=e,this.lineBreakData=t,this.mightContainNonBasicASCII=n,this.mightContainRTL=i}}class eB{static fromEditor(e){var o;const t=e.getOptions(),n=t.get(50),i=t.get(146);return new eB(((o=e.getModel())==null?void 0:o.getOptions().tabSize)||0,n,t.get(33),n.typicalHalfwidthCharacterWidth,t.get(105),t.get(67),i.decorationsWidth,t.get(118),t.get(100),t.get(95),t.get(51))}constructor(e,t,n,i,o,r,a,l,c,d,h){this.tabSize=e,this.fontInfo=t,this.disableMonospaceOptimizations=n,this.typicalHalfwidthCharacterWidth=i,this.scrollBeyondLastColumn=o,this.lineHeight=r,this.lineDecorationsWidth=a,this.stopRenderingLineAfter=l,this.renderWhitespace=c,this.renderControlCharacters=d,this.fontLigatures=h}}function dz(s,e,t,n,i,o,r,a){a.appendString('<div class="view-line'),n||a.appendString(" char-delete"),a.appendString('" style="top:'),a.appendString(String(s*r.lineHeight)),a.appendString('px;width:1000000px;">');const l=e.getLineContent(),c=er.isBasicASCII(l,i),d=er.containsRTL(l,c,o),h=W0(new Tu(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,l,!1,c,d,0,e,t,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==nu.OFF,null),a);return a.appendString("</div>"),h.characterMapping.getHorizontalOffset(h.characterMapping.length)}var c0e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},hz=function(s,e){return function(t,n){e(t,n,s)}};let ZO=class extends F{constructor(e,t,n,i,o,r,a,l,c,d){super(),this._targetWindow=e,this._editors=t,this._diffModel=n,this._options=i,this._diffEditorWidget=o,this._canIgnoreViewZoneUpdateEvent=r,this._origViewZonesToIgnore=a,this._modViewZonesToIgnore=l,this._clipboardService=c,this._contextMenuService=d,this._originalTopPadding=Ge(this,0),this._originalScrollOffset=Ge(this,0),this._originalScrollOffsetAnimated=sz(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=Ge(this,0),this._modifiedScrollOffset=Ge(this,0),this._modifiedScrollOffsetAnimated=sz(this._targetWindow,this._modifiedScrollOffset,this._store);const h=Ge("invalidateAlignmentsState",0),u=this._register(new It(()=>{h.set(h.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(C=>{this._canIgnoreViewZoneUpdateEvent()||u.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(C=>{this._canIgnoreViewZoneUpdateEvent()||u.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(C=>{(C.hasChanged(147)||C.hasChanged(67))&&u.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(C=>{(C.hasChanged(147)||C.hasChanged(67))&&u.schedule()}));const f=this._diffModel.map(C=>C?kt(this,C.model.original.onDidChangeTokens,()=>C.model.original.tokenization.backgroundTokenizationState===2):void 0).map((C,w)=>C==null?void 0:C.read(w)),g=_e(C=>{const w=this._diffModel.read(C),y=w==null?void 0:w.diff.read(C);if(!w||!y)return null;h.read(C);const x=this._options.renderSideBySide.read(C);return uz(this._editors.original,this._editors.modified,y.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,x)}),p=_e(C=>{var k;const w=(k=this._diffModel.read(C))==null?void 0:k.movedTextToCompare.read(C);if(!w)return null;h.read(C);const y=w.changes.map(x=>new RY(x));return uz(this._editors.original,this._editors.modified,y,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function _(){const C=document.createElement("div");return C.className="diagonal-fill",C}const b=this._register(new q);this.viewZones=xu(this,(C,w)=>{var ce,Oe,Fe,un;b.clear();const y=g.read(C)||[],k=[],x=[],D=this._modifiedTopPadding.read(C);D>0&&x.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:D,showInHiddenAreas:!0,suppressMouseDown:!0});const N=this._originalTopPadding.read(C);N>0&&k.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:N,showInHiddenAreas:!0,suppressMouseDown:!0});const W=this._options.renderSideBySide.read(C),B=W||(ce=this._editors.modified._getViewModel())==null?void 0:ce.createLineBreaksComputer();if(B){const Be=this._editors.original.getModel();for(const yt of y)if(yt.diff)for(let $n=yt.originalRange.startLineNumber;$n<yt.originalRange.endLineNumberExclusive;$n++){if($n>Be.getLineCount())return{orig:k,mod:x};B==null||B.addRequest(Be.getLineContent($n),null,null)}}const z=(B==null?void 0:B.finalize())??[];let U=0;const H=this._editors.modified.getOption(67),X=(Oe=this._diffModel.read(C))==null?void 0:Oe.movedTextToCompare.read(C),re=((Fe=this._editors.original.getModel())==null?void 0:Fe.mightContainNonBasicASCII())??!1,fe=((un=this._editors.original.getModel())==null?void 0:un.mightContainRTL())??!1,pe=eB.fromEditor(this._editors.modified);for(const Be of y)if(Be.diff&&!W&&(!this._options.useTrueInlineDiffRendering.read(C)||!tB(Be.diff))){if(!Be.originalRange.isEmpty){f.read(C);const $n=document.createElement("div");$n.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const qn=this._editors.original.getModel();if(Be.originalRange.endLineNumberExclusive-1>qn.getLineCount())return{orig:k,mod:x};const us=new l0e(Be.originalRange.mapToLineArray(bi=>qn.tokenization.getLineTokens(bi)),Be.originalRange.mapToLineArray(bi=>z[U++]),re,fe),Fs=[];for(const bi of Be.diff.innerChanges||[])Fs.push(new VC(bi.originalRange.delta(-(Be.diff.original.startLineNumber-1)),Db.className,0));const ha=a0e(us,pe,Fs,$n),Qi=document.createElement("div");if(Qi.className="inline-deleted-margin-view-zone",Ii(Qi,pe.fontInfo),this._options.renderIndicators.read(C))for(let bi=0;bi<ha.heightInLines;bi++){const Ar=document.createElement("div");Ar.className=`delete-sign ${De.asClassName(TY)}`,Ar.setAttribute("style",`position:absolute;top:${bi*H}px;width:${pe.lineDecorationsWidth}px;height:${H}px;right:0;`),Qi.appendChild(Ar)}let Mr;b.add(new r0e(()=>mh(Mr),Qi,this._editors.modified,Be.diff,this._diffEditorWidget,ha.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let bi=0;bi<ha.viewLineCounts.length;bi++){const Ar=ha.viewLineCounts[bi];Ar>1&&k.push({afterLineNumber:Be.originalRange.startLineNumber+bi,domNode:_(),heightInPx:(Ar-1)*H,showInHiddenAreas:!0,suppressMouseDown:!0})}x.push({afterLineNumber:Be.modifiedRange.startLineNumber-1,domNode:$n,heightInPx:ha.heightInLines*H,minWidthInPx:ha.minWidthInPx,marginDomNode:Qi,setZoneId(bi){Mr=bi},showInHiddenAreas:!0,suppressMouseDown:!0})}const yt=document.createElement("div");yt.className="gutter-delete",k.push({afterLineNumber:Be.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:Be.modifiedHeightInPx,marginDomNode:yt,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const yt=Be.modifiedHeightInPx-Be.originalHeightInPx;if(yt>0){if(X!=null&&X.lineRangeMapping.original.delta(-1).deltaLength(2).contains(Be.originalRange.endLineNumberExclusive-1))continue;k.push({afterLineNumber:Be.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:yt,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let $n=function(){const us=document.createElement("div");return us.className="arrow-revert-change "+De.asClassName(J.arrowRight),w.add($(us,"mousedown",Fs=>Fs.stopPropagation())),w.add($(us,"click",Fs=>{Fs.stopPropagation(),o.revert(Be.diff)})),te("div",{},us)};if(X!=null&&X.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(Be.modifiedRange.endLineNumberExclusive-1))continue;let qn;Be.diff&&Be.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(C)&&(qn=$n()),x.push({afterLineNumber:Be.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-yt,marginDomNode:qn,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const Be of p.read(C)??[]){if(!(X!=null&&X.lineRangeMapping.original.intersect(Be.originalRange))||!(X!=null&&X.lineRangeMapping.modified.intersect(Be.modifiedRange)))continue;const yt=Be.modifiedHeightInPx-Be.originalHeightInPx;yt>0?k.push({afterLineNumber:Be.originalRange.endLineNumberExclusive-1,domNode:_(),heightInPx:yt,showInHiddenAreas:!0,suppressMouseDown:!0}):x.push({afterLineNumber:Be.modifiedRange.endLineNumberExclusive-1,domNode:_(),heightInPx:-yt,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:k,mod:x}});let v=!1;this._register(this._editors.original.onDidScrollChange(C=>{C.scrollLeftChanged&&!v&&(v=!0,this._editors.modified.setScrollLeft(C.scrollLeft),v=!1)})),this._register(this._editors.modified.onDidScrollChange(C=>{C.scrollLeftChanged&&!v&&(v=!0,this._editors.original.setScrollLeft(C.scrollLeft),v=!1)})),this._originalScrollTop=kt(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=kt(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register(Ae(C=>{const w=this._originalScrollTop.read(C)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(C))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(C));w!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(w,1)})),this._register(Ae(C=>{const w=this._modifiedScrollTop.read(C)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(C))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(C));w!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(w,1)})),this._register(Ae(C=>{var k;const w=(k=this._diffModel.read(C))==null?void 0:k.movedTextToCompare.read(C);let y=0;if(w){const x=this._editors.original.getTopForLineNumber(w.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();y=this._editors.modified.getTopForLineNumber(w.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-x}y>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(y,void 0)):y<0?(this._modifiedTopPadding.set(-y,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-y,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+y,void 0,!0)}))}};ZO=c0e([hz(8,Pd),hz(9,Lo)],ZO);function uz(s,e,t,n,i,o){const r=new gd(fz(s,n)),a=new gd(fz(e,i)),l=s.getOption(67),c=e.getOption(67),d=[];let h=0,u=0;function f(g,p){for(;;){let _=r.peek(),b=a.peek();if(_&&_.lineNumber>=g&&(_=void 0),b&&b.lineNumber>=p&&(b=void 0),!_&&!b)break;const v=_?_.lineNumber-h:Number.MAX_VALUE,C=b?b.lineNumber-u:Number.MAX_VALUE;v<C?(r.dequeue(),b={lineNumber:_.lineNumber-h+u,heightInPx:0}):v>C?(a.dequeue(),_={lineNumber:b.lineNumber-u+h,heightInPx:0}):(r.dequeue(),a.dequeue()),d.push({originalRange:ze.ofLength(_.lineNumber,1),modifiedRange:ze.ofLength(b.lineNumber,1),originalHeightInPx:l+_.heightInPx,modifiedHeightInPx:c+b.heightInPx,diff:void 0})}}for(const g of t){let C=function(w,y,k=!1){var B,z;if(w<v||y<b)return;if(_)_=!1;else if(!k&&(w===v||y===b))return;const x=new ze(v,w),D=new ze(b,y);if(x.isEmpty&&D.isEmpty)return;const N=((B=r.takeWhile(U=>U.lineNumber<w))==null?void 0:B.reduce((U,H)=>U+H.heightInPx,0))??0,W=((z=a.takeWhile(U=>U.lineNumber<y))==null?void 0:z.reduce((U,H)=>U+H.heightInPx,0))??0;d.push({originalRange:x,modifiedRange:D,originalHeightInPx:x.length*l+N,modifiedHeightInPx:D.length*c+W,diff:g.lineRangeMapping}),v=w,b=y};const p=g.lineRangeMapping;f(p.original.startLineNumber,p.modified.startLineNumber);let _=!0,b=p.modified.startLineNumber,v=p.original.startLineNumber;if(o)for(const w of p.innerChanges||[]){w.originalRange.startColumn>1&&w.modifiedRange.startColumn>1&&C(w.originalRange.startLineNumber,w.modifiedRange.startLineNumber);const y=s.getModel(),k=w.originalRange.endLineNumber<=y.getLineCount()?y.getLineMaxColumn(w.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;w.originalRange.endColumn<k&&C(w.originalRange.endLineNumber,w.modifiedRange.endLineNumber)}C(p.original.endLineNumberExclusive,p.modified.endLineNumberExclusive,!0),h=p.original.endLineNumberExclusive,u=p.modified.endLineNumberExclusive}return f(Number.MAX_VALUE,Number.MAX_VALUE),d}function fz(s,e){const t=[],n=[],i=s.getOption(147).wrappingColumn!==-1,o=s._getViewModel().coordinatesConverter,r=s.getOption(67);if(i)for(let l=1;l<=s.getModel().getLineCount();l++){const c=o.getModelLineViewLineCount(l);c>1&&n.push({lineNumber:l,heightInPx:r*(c-1)})}for(const l of s.getWhitespaces()){if(e.has(l.id))continue;const c=l.afterLineNumber===0?0:o.convertViewPositionToModelPosition(new A(l.afterLineNumber,1)).lineNumber;t.push({lineNumber:c,heightInPx:l.height})}return O1e(t,n,l=>l.lineNumber,(l,c)=>({lineNumber:l.lineNumber,heightInPx:l.heightInPx+c.heightInPx}))}function tB(s){return s.innerChanges?s.innerChanges.every(e=>gz(e.modifiedRange)&&gz(e.originalRange)||e.originalRange.equalsRange(new L(1,1,1,1))):!1}function gz(s){return s.startLineNumber===s.endLineNumber}const ww=class ww extends F{constructor(e,t,n,i,o){super(),this._rootElement=e,this._diffModel=t,this._originalEditorLayoutInfo=n,this._modifiedEditorLayoutInfo=i,this._editors=o,this._originalScrollTop=kt(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=kt(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=Pi("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=Ge(this,0),this._modifiedViewZonesChangedSignal=Pi("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=Pi("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=xu(this,(d,h)=>{var x;this._element.replaceChildren();const u=this._diffModel.read(d),f=(x=u==null?void 0:u.diff.read(d))==null?void 0:x.movedTexts;if(!f||f.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(d);const g=this._originalEditorLayoutInfo.read(d),p=this._modifiedEditorLayoutInfo.read(d);if(!g||!p){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(d),this._originalViewZonesChangedSignal.read(d);const _=f.map(D=>{function N(pe,ce){const Oe=ce.getTopForLineNumber(pe.startLineNumber,!0),Fe=ce.getTopForLineNumber(pe.endLineNumberExclusive,!0);return(Oe+Fe)/2}const W=N(D.lineRangeMapping.original,this._editors.original),B=this._originalScrollTop.read(d),z=N(D.lineRangeMapping.modified,this._editors.modified),U=this._modifiedScrollTop.read(d),H=W-B,X=z-U,re=Math.min(W,z),fe=Math.max(W,z);return{range:new Ye(re,fe),from:H,to:X,fromWithoutScroll:W,toWithoutScroll:z,move:D}});_.sort(ate(ks(D=>D.fromWithoutScroll>D.toWithoutScroll,lte),ks(D=>D.fromWithoutScroll>D.toWithoutScroll?D.fromWithoutScroll:-D.toWithoutScroll,Qr)));const b=nB.compute(_.map(D=>D.range)),v=10,C=g.verticalScrollbarWidth,w=(b.getTrackCount()-1)*10+v*2,y=C+w+(p.contentLeft-ww.movedCodeBlockPadding);let k=0;for(const D of _){const N=b.getTrack(k),W=C+v+N*10,B=15,z=15,U=y,H=p.glyphMarginWidth+p.lineNumbersWidth,X=18,re=document.createElementNS("http://www.w3.org/2000/svg","rect");re.classList.add("arrow-rectangle"),re.setAttribute("x",`${U-H}`),re.setAttribute("y",`${D.to-X/2}`),re.setAttribute("width",`${H}`),re.setAttribute("height",`${X}`),this._element.appendChild(re);const fe=document.createElementNS("http://www.w3.org/2000/svg","g"),pe=document.createElementNS("http://www.w3.org/2000/svg","path");pe.setAttribute("d",`M 0 ${D.from} L ${W} ${D.from} L ${W} ${D.to} L ${U-z} ${D.to}`),pe.setAttribute("fill","none"),fe.appendChild(pe);const ce=document.createElementNS("http://www.w3.org/2000/svg","polygon");ce.classList.add("arrow"),h.add(Ae(Oe=>{pe.classList.toggle("currentMove",D.move===u.activeMovedText.read(Oe)),ce.classList.toggle("currentMove",D.move===u.activeMovedText.read(Oe))})),ce.setAttribute("points",`${U-z},${D.to-B/2} ${U},${D.to} ${U-z},${D.to+B/2}`),fe.appendChild(ce),this._element.appendChild(fe),k++}this.width.set(w,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register(ve(()=>this._element.remove())),this._register(Ae(d=>{const h=this._originalEditorLayoutInfo.read(d),u=this._modifiedEditorLayoutInfo.read(d);!h||!u||(this._element.style.left=`${h.width-h.verticalScrollbarWidth}px`,this._element.style.height=`${h.height}px`,this._element.style.width=`${h.verticalScrollbarWidth+h.contentLeft-ww.movedCodeBlockPadding+this.width.read(d)}px`)})),this._register(rv(this._state));const r=_e(d=>{const h=this._diffModel.read(d),u=h==null?void 0:h.diff.read(d);return u?u.movedTexts.map(f=>({move:f,original:new jp(br(f.lineRangeMapping.original.startLineNumber-1),18),modified:new jp(br(f.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register(fx(this._editors.original,r.map(d=>d.map(h=>h.original)))),this._register(fx(this._editors.modified,r.map(d=>d.map(h=>h.modified)))),this._register(Ks((d,h)=>{const u=r.read(d);for(const f of u)h.add(new mz(this._editors.original,f.original,f.move,"original",this._diffModel.get())),h.add(new mz(this._editors.modified,f.modified,f.move,"modified",this._diffModel.get()))}));const a=Pi("original.onDidFocusEditorWidget",d=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>d(void 0),0))),l=Pi("modified.onDidFocusEditorWidget",d=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>d(void 0),0)));let c="modified";this._register(E0({createEmptyChangeSummary:()=>{},handleChange:(d,h)=>(d.didChange(a)&&(c="original"),d.didChange(l)&&(c="modified"),!0)},d=>{a.read(d),l.read(d);const h=this._diffModel.read(d);if(!h)return;const u=h.diff.read(d);let f;if(u&&c==="original"){const g=this._editors.originalCursor.read(d);g&&(f=u.movedTexts.find(p=>p.lineRangeMapping.original.contains(g.lineNumber)))}if(u&&c==="modified"){const g=this._editors.modifiedCursor.read(d);g&&(f=u.movedTexts.find(p=>p.lineRangeMapping.modified.contains(g.lineNumber)))}f!==h.movedTextToCompare.get()&&h.movedTextToCompare.set(void 0,void 0),h.setActiveMovedText(f)}))}};ww.movedCodeBlockPadding=4;let W_=ww;class nB{static compute(e){const t=[],n=[];for(const i of e){let o=t.findIndex(r=>!r.intersectsStrict(i));o===-1&&(t.length>=6?o=qre(t,ks(a=>a.intersectWithRangeLength(i),Qr)):(o=t.length,t.push(new n9))),t[o].addRange(i),n.push(o)}return new nB(t.length,n)}constructor(e,t){this._trackCount=e,this.trackPerLineIdx=t}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class mz extends qW{constructor(e,t,n,i,o){const r=Qe("div.diff-hidden-lines-widget");super(e,t,r.root),this._editor=e,this._move=n,this._kind=i,this._diffModel=o,this._nodes=Qe("div.diff-moved-code-block",{style:{marginRight:"4px"}},[Qe("div.text-content@textContent"),Qe("div.action-bar@actionBar")]),r.root.appendChild(this._nodes.root);const a=kt(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register(wd(this._nodes.root,{paddingRight:a.map(u=>u.verticalScrollbarWidth)}));let l;n.changes.length>0?l=this._kind==="original"?m("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):m("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):l=this._kind==="original"?m("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):m("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const c=this._register(new Zo(this._nodes.actionBar,{highlightToggledItems:!0})),d=new _o("",l,"",!1);c.push(d,{icon:!1,label:!0});const h=new _o("","Compare",De.asClassName(J.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===n?void 0:this._move,void 0)});this._register(Ae(u=>{const f=this._diffModel.movedTextToCompare.read(u)===n;h.checked=f})),c.push(h,{icon:!1,label:!0})}}class d0e extends F{constructor(e,t,n,i){super(),this._editors=e,this._diffModel=t,this._options=n,this._decorations=_e(this,o=>{const r=this._diffModel.read(o),a=r==null?void 0:r.diff.read(o);if(!a)return null;const l=this._diffModel.read(o).movedTextToCompare.read(o),c=this._options.renderIndicators.read(o),d=this._options.showEmptyDecorations.read(o),h=[],u=[];if(!l)for(const g of a.mappings)if(g.lineRangeMapping.original.isEmpty||h.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:c?E1:lz}),g.lineRangeMapping.modified.isEmpty||u.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:c?mx:az}),g.lineRangeMapping.modified.isEmpty||g.lineRangeMapping.original.isEmpty)g.lineRangeMapping.original.isEmpty||h.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:XW}),g.lineRangeMapping.modified.isEmpty||u.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:ZW});else{const p=this._options.useTrueInlineDiffRendering.read(o)&&tB(g.lineRangeMapping);for(const _ of g.lineRangeMapping.innerChanges||[])if(g.lineRangeMapping.original.contains(_.originalRange.startLineNumber)&&h.push({range:_.originalRange,options:_.originalRange.isEmpty()&&d?QW:Db}),g.lineRangeMapping.modified.contains(_.modifiedRange.startLineNumber)&&u.push({range:_.modifiedRange,options:_.modifiedRange.isEmpty()&&d&&!p?YW:px}),p){const b=r.model.original.getValueInRange(_.originalRange);u.push({range:_.modifiedRange,options:{description:"deleted-text",before:{content:b,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(l)for(const g of l.changes){const p=g.original.toInclusiveRange();p&&h.push({range:p,options:c?E1:lz});const _=g.modified.toInclusiveRange();_&&u.push({range:_,options:c?mx:az});for(const b of g.innerChanges||[])h.push({range:b.originalRange,options:Db}),u.push({range:b.modifiedRange,options:px})}const f=this._diffModel.read(o).activeMovedText.read(o);for(const g of a.movedTexts)h.push({range:g.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(g===f?" currentMove":""),blockPadding:[W_.movedCodeBlockPadding,0,W_.movedCodeBlockPadding,W_.movedCodeBlockPadding]}}),u.push({range:g.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(g===f?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:h,modifiedDecorations:u}}),this._register(ux(this._editors.original,this._decorations.map(o=>(o==null?void 0:o.originalDecorations)||[]))),this._register(ux(this._editors.modified,this._decorations.map(o=>(o==null?void 0:o.modifiedDecorations)||[])))}}class h0e{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,t){this._options=e,this.dimensions=t,this.sashLeft=I0(this,n=>{const i=this._sashRatio.read(n)??this._options.splitViewDefaultRatio.read(n);return this._computeSashLeft(i,n)},(n,i)=>{const o=this.dimensions.width.get();this._sashRatio.set(n/o,i)}),this._sashRatio=Ge(this,void 0)}_computeSashLeft(e,t){const n=this.dimensions.width.read(t),i=Math.floor(this._options.splitViewDefaultRatio.read(t)*n),o=this._options.enableSplitViewResizing.read(t)?Math.floor(e*n):i,r=100;return n<=r*2?i:o<r?r:o>n-r?n-r:o}}class MY extends F{constructor(e,t,n,i,o,r){super(),this._domNode=e,this._dimensions=t,this._enabled=n,this._boundarySashes=i,this.sashLeft=o,this._resetSash=r,this._sash=this._register(new $i(this._domNode,{getVerticalSashTop:a=>0,getVerticalSashLeft:a=>this.sashLeft.get(),getVerticalSashHeight:a=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(a=>{this.sashLeft.set(this._startSashPosition+(a.currentX-a.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register(Ae(a=>{const l=this._boundarySashes.read(a);l&&(this._sash.orthogonalEndSash=l.bottom)})),this._register(Ae(a=>{const l=this._enabled.read(a);this._sash.state=l?3:0,this.sashLeft.read(a),this._dimensions.height.read(a),this._sash.layout()}))}}class u0e extends F{constructor(e,t,n){super(),this._editor=e,this._domNode=t,this.itemProvider=n,this.scrollTop=kt(this,this._editor.onDidScrollChange,r=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(r=>r===0),this.modelAttached=kt(this,this._editor.onDidChangeModel,r=>this._editor.hasModel()),this.editorOnDidChangeViewZones=Pi("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=Pi("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=ov("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const i=this._domNode.appendChild(Qe("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),o=new ResizeObserver(()=>{rn(r=>{this.domNodeSizeChanged.trigger(r)})});o.observe(this._domNode),this._register(ve(()=>o.disconnect())),this._register(Ae(r=>{i.className=this.isScrollTopZero.read(r)?"":"scroll-decoration"})),this._register(Ae(r=>this.render(r)))}dispose(){super.dispose(),Di(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const t=this.scrollTop.read(e),n=this._editor.getVisibleRanges(),i=new Set(this.views.keys()),o=Ye.ofStartAndLength(0,this._domNode.clientHeight);if(!o.isEmpty)for(const r of n){const a=new ze(r.startLineNumber,r.endLineNumber+1),l=this.itemProvider.getIntersectingGutterItems(a,e);rn(c=>{for(const d of l){if(!d.range.intersect(a))continue;i.delete(d.id);let h=this.views.get(d.id);if(h)h.item.set(d,c);else{const p=document.createElement("div");this._domNode.appendChild(p);const _=Ge("item",d),b=this.itemProvider.createView(_,p);h=new f0e(_,b,p),this.views.set(d.id,h)}const u=d.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(d.range.startLineNumber,!0)-t:this._editor.getBottomForLineNumber(d.range.startLineNumber-1,!1)-t,g=(d.range.endLineNumberExclusive===1?Math.max(u,this._editor.getTopForLineNumber(d.range.startLineNumber,!1)-t):Math.max(u,this._editor.getBottomForLineNumber(d.range.endLineNumberExclusive-1,!0)-t))-u;h.domNode.style.top=`${u}px`,h.domNode.style.height=`${g}px`,h.gutterItemView.layout(Ye.ofStartAndLength(u,g),o)}})}for(const r of i){const a=this.views.get(r);a.gutterItemView.dispose(),a.domNode.remove(),this.views.delete(r)}}}class f0e{constructor(e,t,n){this.item=e,this.gutterItemView=t,this.domNode=n}}class AY extends Qg{constructor(e){super(),this._getContext=e}runAction(e,t){const n=this._getContext();return super.runAction(e,n)}}class pz extends Qq{constructor(e){super(),this._textModel=e}getValueOfRange(e){return this._textModel.getValueInRange(e)}get length(){const e=this._textModel.getLineCount(),t=this._textModel.getLineLength(e);return new sa(e-1,t)}}class g0e extends F{constructor(e,t,n={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new Rne),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new q),n.hoverDelegate=n.hoverDelegate??this._register(vb()),this.options=n,this.toggleMenuAction=this._register(new N1(()=>{var i;return(i=this.toggleMenuActionViewItem)==null?void 0:i.show()},n.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new Zo(this.element,{orientation:n.orientation,ariaLabel:n.ariaLabel,actionRunner:n.actionRunner,allowContextMenu:n.allowContextMenu,highlightToggledItems:n.highlightToggledItems,hoverDelegate:n.hoverDelegate,actionViewItemProvider:(i,o)=>{if(i.id===N1.ID)return this.toggleMenuActionViewItem=new bL(i,i.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:De.asClassNameArray(n.moreIcon??J.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(n.actionViewItemProvider){const r=n.actionViewItemProvider(i,o);if(r)return r}if(i instanceof rb){const r=new bL(i,i.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:i.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return r.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(r),this.disposables.add(this._onDidChangeDropdownVisibility.add(r.onDidChangeVisibility)),r}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(e){return this.actionBar.getAction(e)}setActions(e,t){this.clear();const n=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),n.push(this.toggleMenuAction)),n.forEach(i=>{this.actionBar.push(i,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(i)})})}getKeybindingLabel(e){var n,i;const t=(i=(n=this.options).getKeyBinding)==null?void 0:i.call(n,e);return(t==null?void 0:t.getLabel())??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}const mI=class mI extends _o{constructor(e,t){t=t||m("moreActions","More Actions..."),super(mI.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};mI.ID="toolbar.toggle.more";let N1=mI;var PY=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},jr=function(s,e){return function(t,n){e(t,n,s)}};let R1=class extends g0e{constructor(e,t,n,i,o,r,a,l){super(e,o,{getKeyBinding:d=>r.lookupKeybinding(d.id)??void 0,...t,allowContextMenu:!0,skipTelemetry:typeof(t==null?void 0:t.telemetrySource)=="string"}),this._options=t,this._menuService=n,this._contextKeyService=i,this._contextMenuService=o,this._keybindingService=r,this._commandService=a,this._sessionDisposables=this._store.add(new q);const c=t==null?void 0:t.telemetrySource;c&&this._store.add(this.actionBar.onDidRun(d=>l.publicLog2("workbenchActionExecuted",{id:d.action.id,from:c})))}setActions(e,t=[],n){var d,h,u;this._sessionDisposables.clear();const i=e.slice(),o=t.slice(),r=[];let a=0;const l=[];let c=!1;if(((d=this._options)==null?void 0:d.hiddenItemStrategy)!==-1)for(let f=0;f<i.length;f++){const g=i[f];!(g instanceof bo)&&!(g instanceof C_)||g.hideActions&&(r.push(g.hideActions.toggle),g.hideActions.toggle.checked&&a++,g.hideActions.isHidden&&(c=!0,i[f]=void 0,((h=this._options)==null?void 0:h.hiddenItemStrategy)!==0&&(l[f]=g)))}if(((u=this._options)==null?void 0:u.overflowBehavior)!==void 0){const f=Tge(new Set(this._options.overflowBehavior.exempted),ot.map(i,_=>_==null?void 0:_.id)),g=this._options.overflowBehavior.maxItems-f.size;let p=0;for(let _=0;_<i.length;_++){const b=i[_];b&&(p++,!f.has(b.id)&&p>=g&&(i[_]=void 0,l[_]=b))}}K7(i),K7(l),super.setActions(i,ri.join(l,o)),(r.length>0||i.length>0)&&this._sessionDisposables.add($(this.getElement(),"contextmenu",f=>{var v,C,w,y,k;const g=new Gr(Le(this.getElement()),f),p=this.getItemAction(g.target);if(!p)return;g.preventDefault(),g.stopPropagation();const _=[];if(p instanceof bo&&p.menuKeybinding)_.push(p.menuKeybinding);else if(!(p instanceof C_||p instanceof N1)){const x=!!this._keybindingService.lookupKeybinding(p.id);_.push(QZ(this._commandService,this._keybindingService,p.id,void 0,x))}if(r.length>0){let x=!1;if(a===1&&((v=this._options)==null?void 0:v.hiddenItemStrategy)===0){x=!0;for(let D=0;D<r.length;D++)if(r[D].checked){r[D]=Hf({id:p.id,label:p.label,checked:!0,enabled:!1,run(){}});break}}if(!x&&(p instanceof bo||p instanceof C_)){if(!p.hideActions)return;_.push(p.hideActions.hide)}else _.push(Hf({id:"label",label:m("hide","Hide"),enabled:!1,run(){}}))}const b=ri.join(_,r);(C=this._options)!=null&&C.resetMenu&&!n&&(n=[this._options.resetMenu]),c&&n&&(b.push(new ri),b.push(Hf({id:"resetThisMenu",label:m("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(n)}))),b.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>g,getActions:()=>b,menuId:(w=this._options)==null?void 0:w.contextMenu,menuActionOptions:{renderShortTitle:!0,...(y=this._options)==null?void 0:y.menuOptions},skipTelemetry:typeof((k=this._options)==null?void 0:k.telemetrySource)=="string",contextKeyService:this._contextKeyService})}))}};R1=PY([jr(2,nr),jr(3,Ie),jr(4,Lo),jr(5,wt),jr(6,Wt),jr(7,Zi)],R1);let _x=class extends R1{constructor(e,t,n,i,o,r,a,l,c){super(e,{resetMenu:t,...n},i,o,r,a,l,c),this._onDidChangeMenuItems=this._store.add(new O),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const d=this._store.add(i.createMenu(t,o,{emitEventsForSubmenuChanges:!0})),h=()=>{var g,p,_;const u=[],f=[];iE(d,n==null?void 0:n.menuOptions,{primary:u,secondary:f},(g=n==null?void 0:n.toolbarOptions)==null?void 0:g.primaryGroup,(p=n==null?void 0:n.toolbarOptions)==null?void 0:p.shouldInlineSubmenu,(_=n==null?void 0:n.toolbarOptions)==null?void 0:_.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",u.length===0&&f.length===0),super.setActions(u,f)};this._store.add(d.onDidChange(()=>{h(),this._onDidChangeMenuItems.fire(this)})),h()}setActions(){throw new _t("This toolbar is populated from a menu.")}};_x=PY([jr(3,nr),jr(4,Ie),jr(5,Lo),jr(6,wt),jr(7,Wt),jr(8,Zi)],_x);var OY=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},tk=function(s,e){return function(t,n){e(t,n,s)}};const PR=[],tS=35;let YO=class extends F{constructor(e,t,n,i,o,r,a,l,c){super(),this._diffModel=t,this._editors=n,this._options=i,this._sashLayout=o,this._boundarySashes=r,this._instantiationService=a,this._contextKeyService=l,this._menuService=c,this._menu=this._register(this._menuService.createMenu(ge.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=kt(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(d=>d.length>0),this._showSash=_e(this,d=>this._options.renderSideBySide.read(d)&&this._hasActions.read(d)),this.width=_e(this,d=>this._hasActions.read(d)?tS:0),this.elements=Qe("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:tS+"px"}},[]),this._currentDiff=_e(this,d=>{var g;const h=this._diffModel.read(d);if(!h)return;const u=(g=h.diff.read(d))==null?void 0:g.mappings,f=this._editors.modifiedCursor.read(d);if(f)return u==null?void 0:u.find(p=>p.lineRangeMapping.modified.contains(f.lineNumber))}),this._selectedDiffs=_e(this,d=>{const h=this._diffModel.read(d),u=h==null?void 0:h.diff.read(d);if(!u)return PR;const f=this._editors.modifiedSelections.read(d);if(f.every(b=>b.isEmpty()))return PR;const g=new pr(f.map(b=>ze.fromRangeInclusive(b))),_=u.mappings.filter(b=>b.lineRangeMapping.innerChanges&&g.intersects(b.lineRangeMapping.modified)).map(b=>({mapping:b,rangeMappings:b.lineRangeMapping.innerChanges.filter(v=>f.some(C=>L.areIntersecting(v.modifiedRange,C)))}));return _.length===0||_.every(b=>b.rangeMappings.length===0)?PR:_}),this._register(F1e(e,this.elements.root)),this._register($(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register(wd(this.elements.root,{display:this._hasActions.map(d=>d?"block":"none")})),os(this,d=>this._showSash.read(d)?new MY(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,I0(this,u=>this._sashLayout.sashLeft.read(u)-tS,(u,f)=>this._sashLayout.sashLeft.set(u+tS,f)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new u0e(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(d,h)=>{const u=this._diffModel.read(h);if(!u)return[];const f=u.diff.read(h);if(!f)return[];const g=this._selectedDiffs.read(h);if(g.length>0){const _=Go.fromRangeMappings(g.flatMap(b=>b.rangeMappings));return[new _z(_,!0,ge.DiffEditorSelectionToolbar,void 0,u.model.original.uri,u.model.modified.uri)]}const p=this._currentDiff.read(h);return f.mappings.map(_=>new _z(_.lineRangeMapping.withInnerChangesFromLineRanges(),_.lineRangeMapping===(p==null?void 0:p.lineRangeMapping),ge.DiffEditorHunkToolbar,void 0,u.model.original.uri,u.model.modified.uri))},createView:(d,h)=>this._instantiationService.createInstance(XO,d,h,this)})),this._register($(this.elements.gutter,ee.MOUSE_WHEEL,d=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(d)},{passive:!1}))}computeStagedValue(e){const t=e.innerChanges??[],n=new pz(this._editors.modifiedModel.get()),i=new pz(this._editors.original.getModel());return new s9(t.map(a=>a.toTextEdit(n))).apply(i)}layout(e){this.elements.gutter.style.left=e+"px"}};YO=OY([tk(6,Ce),tk(7,Ie),tk(8,nr)],YO);class _z{constructor(e,t,n,i,o,r){this.mapping=e,this.showAlways=t,this.menuId=n,this.rangeOverride=i,this.originalUri=o,this.modifiedUri=r}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let XO=class extends F{constructor(e,t,n,i){super(),this._item=e,this._elements=Qe("div.gutterItem",{style:{height:"20px",width:"34px"}},[Qe("div.background@background",{},[]),Qe("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,r=>r.showAlways),this._menuId=this._item.map(this,r=>r.menuId),this._isSmall=Ge(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const o=this._register(i.createInstance(ub,"element",!0,{position:{hoverPosition:1}}));this._register(Up(t,this._elements.root)),this._register(Ae(r=>{const a=this._showAlways.read(r);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",a),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register(Ks((r,a)=>{this._elements.buttons.replaceChildren();const l=a.add(i.createInstance(_x,this._elements.buttons,this._menuId.read(r),{orientation:1,hoverDelegate:o,toolbarOptions:{primaryGroup:c=>c.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(r)?1:3},hiddenItemStrategy:0,actionRunner:new AY(()=>{const c=this._item.get(),d=c.mapping;return{mapping:d,originalWithModifiedChanges:n.computeStagedValue(d),originalUri:c.originalUri,modifiedUri:c.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));a.add(l.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(e,t){this._lastItemRange=e,this._lastViewRange=t;let n=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&e.length<30,void 0),n=this._elements.buttons.clientHeight;const i=e.length/2-n/2,o=n;let r=e.start+i;const a=Ye.tryCreate(o,t.endExclusive-o-n),l=Ye.tryCreate(e.start+o,e.endExclusive-n-o);l&&a&&l.start<l.endExclusive&&(r=a.clip(r),r=l.clip(r)),this._elements.buttons.style.top=`${r-e.start}px`}};XO=OY([tk(3,Ce)],XO);function go(s){return QO.get(s)}const nh=class nh extends F{static get(e){let t=nh._map.get(e);if(!t){t=new nh(e),nh._map.set(e,t);const n=e.onDidDispose(()=>{const i=nh._map.get(e);i&&(nh._map.delete(e),i.dispose(),n.dispose())})}return t}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new sv(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const e=this._currentTransaction;this._currentTransaction=void 0,e.finish()}}constructor(e){var t;super(),this.editor=e,this._updateCounter=0,this._currentTransaction=void 0,this._model=Ge(this,this.editor.getModel()),this.model=this._model,this.isReadonly=kt(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=iP({owner:this,lazy:!0},((t=this.editor.getModel())==null?void 0:t.getVersionId())??null),this.versionId=this._versionId,this._selections=iP({owner:this,equalsFn:eP(mL(me.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=kt(this,n=>{const i=this.editor.onDidFocusEditorWidget(n),o=this.editor.onDidBlurEditorWidget(n);return{dispose(){i.dispose(),o.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=I0(this,n=>{var i;return this.versionId.read(n),((i=this.model.read(n))==null?void 0:i.getValue())??""},(n,i)=>{const o=this.model.get();o!==null&&n!==o.getValue()&&o.setValue(n)}),this.valueIsEmpty=_e(this,n=>{var i;return this.versionId.read(n),((i=this.editor.getModel())==null?void 0:i.getValueLength())===0}),this.cursorSelection=Ho({owner:this,equalsFn:eP(me.selectionsEqual)},n=>{var i;return((i=this.selections.read(n))==null?void 0:i[0])??null}),this.onDidType=ov(this),this.scrollTop=kt(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=kt(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=kt(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(n=>n.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(n=>n.decorationsLeft),this.contentWidth=kt(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(n=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,n)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(n=>{var i;this._beginUpdate();try{this._versionId.set(((i=this.editor.getModel())==null?void 0:i.getVersionId())??null,this._currentTransaction,n),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(n=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,n),this._forceUpdate()}finally{this._endUpdate()}}))}forceUpdate(e){this._beginUpdate();try{return this._forceUpdate(),e?e(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){var e;this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(((e=this.editor.getModel())==null?void 0:e.getVersionId())??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(e){return kt(this,t=>this.editor.onDidChangeConfiguration(n=>{n.hasChanged(e)&&t(void 0)}),()=>this.editor.getOption(e))}setDecorations(e){const t=new q,n=this.editor.createDecorationsCollection();return t.add(T0({owner:this,debugName:()=>`Apply decorations from ${e.debugName}`},i=>{const o=e.read(i);n.set(o)})),t.add({dispose:()=>{n.clear()}}),t}createOverlayWidget(e){const t="observableOverlayWidget"+this._overlayWidgetCounter++,n={getDomNode:()=>e.domNode,getPosition:()=>e.position.get(),getId:()=>t,allowEditorOverflow:e.allowEditorOverflow,getMinContentWidthInPx:()=>e.minContentWidthInPx.get()};this.editor.addOverlayWidget(n);const i=Ae(o=>{e.position.read(o),e.minContentWidthInPx.read(o),this.editor.layoutOverlayWidget(n)});return ve(()=>{i.dispose(),this.editor.removeOverlayWidget(n)})}};nh._map=new Map;let QO=nh;function JO(s,e){return Bue({createEmptyChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(t,n)=>{if(t.didChange(s)){const i=t.change;i!==void 0&&n.deltas.push(i),n.didChange=!0}return!0}},(t,n)=>{const i=s.read(t);n.didChange&&e(i,n.deltas)})}function m0e(s,e){const t=new q,n=JO(s,(i,o)=>{t.clear(),e(i,o,t)});return{dispose(){n.dispose(),t.dispose()}}}var p0e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_0e=function(s,e){return function(t,n){e(t,n,s)}},nk,og;let bx=(og=class extends F{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,t,n,i){super(),this._editors=e,this._diffModel=t,this._options=n,this._instantiationService=i,this._modifiedOutlineSource=os(this,l=>{const c=this._editors.modifiedModel.read(l),d=nk._breadcrumbsSourceFactory.read(l);return!c||!d?void 0:d(c,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();rn(d=>{for(const h of this._editors.original.getSelections()||[])c==null||c.ensureOriginalLineIsVisible(h.getStartPosition().lineNumber,0,d),c==null||c.ensureOriginalLineIsVisible(h.getEndPosition().lineNumber,0,d)})})),this._register(this._editors.modified.onDidChangeCursorPosition(l=>{if(l.reason===1)return;const c=this._diffModel.get();rn(d=>{for(const h of this._editors.modified.getSelections()||[])c==null||c.ensureModifiedLineIsVisible(h.getStartPosition().lineNumber,0,d),c==null||c.ensureModifiedLineIsVisible(h.getEndPosition().lineNumber,0,d)})}));const o=this._diffModel.map((l,c)=>{var h;const d=(l==null?void 0:l.unchangedRegions.read(c))??[];return d.length===1&&d[0].modifiedLineNumber===1&&d[0].lineCount===((h=this._editors.modifiedModel.read(c))==null?void 0:h.getLineCount())?[]:d});this.viewZones=xu(this,(l,c)=>{const d=this._modifiedOutlineSource.read(l);if(!d)return{origViewZones:[],modViewZones:[]};const h=[],u=[],f=this._options.renderSideBySide.read(l),g=this._options.compactMode.read(l),p=o.read(l);for(let _=0;_<p.length;_++){const b=p[_];if(!b.shouldHideControls(l)&&!(g&&(_===0||_===p.length-1)))if(g){{const v=_e(this,w=>b.getHiddenOriginalRange(w).startLineNumber-1),C=new jp(v,12);h.push(C),c.add(new bz(this._editors.original,C,b,!f))}{const v=_e(this,w=>b.getHiddenModifiedRange(w).startLineNumber-1),C=new jp(v,12);u.push(C),c.add(new bz(this._editors.modified,C,b))}}else{{const v=_e(this,w=>b.getHiddenOriginalRange(w).startLineNumber-1),C=new jp(v,24);h.push(C),c.add(new vz(this._editors.original,C,b,b.originalUnchangedRange,!f,d,w=>this._diffModel.get().ensureModifiedLineIsVisible(w,2,void 0),this._options))}{const v=_e(this,w=>b.getHiddenModifiedRange(w).startLineNumber-1),C=new jp(v,24);u.push(C),c.add(new vz(this._editors.modified,C,b,b.modifiedUnchangedRange,!1,d,w=>this._diffModel.get().ensureModifiedLineIsVisible(w,2,void 0),this._options))}}}return{origViewZones:h,modViewZones:u}});const r={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},a={description:"Fold Unchanged",glyphMarginHoverMessage:new ji(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown(m("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+De.asClassName(J.fold),zIndex:10001};this._register(ux(this._editors.original,_e(this,l=>{const c=o.read(l),d=c.map(h=>({range:h.originalUnchangedRange.toInclusiveRange(),options:r}));for(const h of c)h.shouldHideControls(l)&&d.push({range:L.fromPositions(new A(h.originalLineNumber,1)),options:a});return d}))),this._register(ux(this._editors.modified,_e(this,l=>{const c=o.read(l),d=c.map(h=>({range:h.modifiedUnchangedRange.toInclusiveRange(),options:r}));for(const h of c)h.shouldHideControls(l)&&d.push({range:ze.ofLength(h.modifiedLineNumber,1).toInclusiveRange(),options:a});return d}))),this._register(Ae(l=>{const c=o.read(l);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(c.map(d=>d.getHiddenOriginalRange(l).toInclusiveRange()).filter(Vl)),this._editors.modified.setHiddenAreas(c.map(d=>d.getHiddenModifiedRange(l).toInclusiveRange()).filter(Vl))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const d=l.target.position.lineNumber,h=this._diffModel.get();if(!h)return;const u=h.unchangedRegions.get().find(f=>f.modifiedUnchangedRange.includes(d));if(!u)return;u.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(l=>{var c;if(!l.event.rightButton&&l.target.position&&((c=l.target.element)!=null&&c.className.includes("fold-unchanged"))){const d=l.target.position.lineNumber,h=this._diffModel.get();if(!h)return;const u=h.unchangedRegions.get().find(f=>f.originalUnchangedRange.includes(d));if(!u)return;u.collapseAll(void 0),l.event.stopPropagation(),l.event.preventDefault()}}))}},nk=og,og._breadcrumbsSourceFactory=Ge(nk,()=>({dispose(){},getBreadcrumbItems(e,t){return[]}})),og);bx=nk=p0e([_0e(3,Ce)],bx);class bz extends qW{constructor(e,t,n,i=!1){const o=Qe("div.diff-hidden-lines-widget");super(e,t,o.root),this._unchangedRegion=n,this._hide=i,this._nodes=Qe("div.diff-hidden-lines-compact",[Qe("div.line-left",[]),Qe("div.text@text",[]),Qe("div.line-right",[])]),o.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register(Ae(r=>{if(!this._hide){const a=this._unchangedRegion.getHiddenModifiedRange(r).length,l=m("hiddenLines","{0} hidden lines",a);this._nodes.text.innerText=l}}))}}class vz extends qW{constructor(e,t,n,i,o,r,a,l){const c=Qe("div.diff-hidden-lines-widget");super(e,t,c.root),this._editor=e,this._unchangedRegion=n,this._unchangedRegionRange=i,this._hide=o,this._modifiedOutlineSource=r,this._revealModifiedHiddenLine=a,this._options=l,this._nodes=Qe("div.diff-hidden-lines",[Qe("div.top@top",{title:m("diff.hiddenLines.top","Click or drag to show more above")}),Qe("div.center@content",{style:{display:"flex"}},[Qe("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[te("a",{title:m("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...Rh("$(unfold)"))]),Qe("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),Qe("div.bottom@bottom",{title:m("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root),this._hide?Di(this._nodes.first):this._register(wd(this._nodes.first,{width:go(this._editor).layoutInfoContentLeft})),this._register(Ae(h=>{const u=this._unchangedRegion.visibleLineCountTop.read(h)+this._unchangedRegion.visibleLineCountBottom.read(h)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!u),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(h)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(h)>0),this._nodes.top.classList.toggle("canMoveBottom",!u);const f=this._unchangedRegion.isDragged.read(h),g=this._editor.getDomNode();g&&(g.classList.toggle("draggingUnchangedRegion",!!f),f==="top"?(g.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(h)>0),g.classList.toggle("canMoveBottom",!u)):f==="bottom"?(g.classList.toggle("canMoveTop",!u),g.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(h)>0)):(g.classList.toggle("canMoveTop",!1),g.classList.toggle("canMoveBottom",!1)))}));const d=this._editor;this._register($(this._nodes.top,"mousedown",h=>{if(h.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),h.preventDefault();const u=h.clientY;let f=!1;const g=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const p=Le(this._nodes.top),_=$(p,"mousemove",v=>{const w=v.clientY-u;f=f||Math.abs(w)>2;const y=Math.round(w/d.getOption(67)),k=Math.max(0,Math.min(g+y,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(k,void 0)}),b=$(p,"mouseup",v=>{f||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),_.dispose(),b.dispose()})})),this._register($(this._nodes.bottom,"mousedown",h=>{if(h.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),h.preventDefault();const u=h.clientY;let f=!1;const g=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const p=Le(this._nodes.bottom),_=$(p,"mousemove",v=>{const w=v.clientY-u;f=f||Math.abs(w)>2;const y=Math.round(w/d.getOption(67)),k=Math.max(0,Math.min(g-y,this._unchangedRegion.getMaxVisibleLineCountBottom())),x=this._unchangedRegionRange.endLineNumberExclusive>d.getModel().getLineCount()?d.getContentHeight():d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(k,void 0);const D=this._unchangedRegionRange.endLineNumberExclusive>d.getModel().getLineCount()?d.getContentHeight():d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);d.setScrollTop(d.getScrollTop()+(D-x))}),b=$(p,"mouseup",v=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!f){const C=d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const w=d.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);d.setScrollTop(d.getScrollTop()+(w-C))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),_.dispose(),b.dispose()})})),this._register(Ae(h=>{const u=[];if(!this._hide){const f=n.getHiddenModifiedRange(h).length,g=m("hiddenLines","{0} hidden lines",f),p=te("span",{title:m("diff.hiddenLines.expandAll","Double click to unfold")},g);p.addEventListener("dblclick",v=>{v.button===0&&(v.preventDefault(),this._unchangedRegion.showAll(void 0))}),u.push(p);const _=this._unchangedRegion.getHiddenModifiedRange(h),b=this._modifiedOutlineSource.getBreadcrumbItems(_,h);if(b.length>0){u.push(te("span",void 0,"  |  "));for(let v=0;v<b.length;v++){const C=b[v],w=Nk.toIcon(C.kind),y=Qe("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[tm(w)," ",C.name,...v===b.length-1?[]:[tm(J.chevronRight)]]).root;u.push(y),y.onclick=()=>{this._revealModifiedHiddenLine(C.startLineNumber)}}}}Di(this._nodes.others,...u)}))}}var b0e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},v0e=function(s,e){return function(t,n){e(t,n,s)}},_a,ed;let M1=(ed=class extends F{constructor(e,t,n,i,o,r,a){super(),this._editors=e,this._rootElement=t,this._diffModel=n,this._rootWidth=i,this._rootHeight=o,this._modifiedEditorLayoutInfo=r,this._themeService=a,this.width=_a.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=kt(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),c=_e(u=>{const f=l.read(u),g=f.getColor(Ble)||(f.getColor(Fle)||yA).transparent(2),p=f.getColor(Hle)||(f.getColor(Wle)||SA).transparent(2);return{insertColor:g,removeColor:p}}),d=Ct(document.createElement("div"));d.setClassName("diffViewport"),d.setPosition("absolute");const h=Qe("div.diffOverview",{style:{position:"absolute",top:"0px",width:_a.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register(Up(h,d.domNode)),this._register(hn(h,ee.POINTER_DOWN,u=>{this._editors.modified.delegateVerticalScrollbarPointerDown(u)})),this._register($(h,ee.MOUSE_WHEEL,u=>{this._editors.modified.delegateScrollFromMouseWheelEvent(u)},{passive:!1})),this._register(Up(this._rootElement,h)),this._register(Ks((u,f)=>{const g=this._diffModel.read(u),p=this._editors.original.createOverviewRuler("original diffOverviewRuler");p&&(f.add(p),f.add(Up(h,p.getDomNode())));const _=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(_&&(f.add(_),f.add(Up(h,_.getDomNode()))),!p||!_)return;const b=Pi("viewZoneChanged",this._editors.original.onDidChangeViewZones),v=Pi("viewZoneChanged",this._editors.modified.onDidChangeViewZones),C=Pi("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),w=Pi("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);f.add(Ae(y=>{var B;b.read(y),v.read(y),C.read(y),w.read(y);const k=c.read(y),x=(B=g==null?void 0:g.diff.read(y))==null?void 0:B.mappings;function D(z,U,H){const X=H._getViewModel();return X?z.filter(re=>re.length>0).map(re=>{const fe=X.coordinatesConverter.convertModelPositionToViewPosition(new A(re.startLineNumber,1)),pe=X.coordinatesConverter.convertModelPositionToViewPosition(new A(re.endLineNumberExclusive,1)),ce=pe.lineNumber-fe.lineNumber;return new SY(fe.lineNumber,pe.lineNumber,ce,U.toString())}):[]}const N=D((x||[]).map(z=>z.lineRangeMapping.original),k.removeColor,this._editors.original),W=D((x||[]).map(z=>z.lineRangeMapping.modified),k.insertColor,this._editors.modified);p==null||p.setZones(N),_==null||_.setZones(W)})),f.add(Ae(y=>{const k=this._rootHeight.read(y),x=this._rootWidth.read(y),D=this._modifiedEditorLayoutInfo.read(y);if(D){const N=_a.ENTIRE_DIFF_OVERVIEW_WIDTH-2*_a.ONE_OVERVIEW_WIDTH;p.setLayout({top:0,height:k,right:N+_a.ONE_OVERVIEW_WIDTH,width:_a.ONE_OVERVIEW_WIDTH}),_.setLayout({top:0,height:k,right:0,width:_a.ONE_OVERVIEW_WIDTH});const W=this._editors.modifiedScrollTop.read(y),B=this._editors.modifiedScrollHeight.read(y),z=this._editors.modified.getOption(104),U=new gb(z.verticalHasArrows?z.arrowSize:0,z.verticalScrollbarSize,0,D.height,B,W);d.setTop(U.getSliderPosition()),d.setHeight(U.getSliderSize())}else d.setTop(0),d.setHeight(0);h.style.height=k+"px",h.style.left=x-_a.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",d.setWidth(_a.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}},_a=ed,ed.ONE_OVERVIEW_WIDTH=15,ed.ENTIRE_DIFF_OVERVIEW_WIDTH=ed.ONE_OVERVIEW_WIDTH*2,ed);M1=_a=b0e([v0e(6,Yn)],M1);const OR=[];class C0e extends F{constructor(e,t,n,i){super(),this._editors=e,this._diffModel=t,this._options=n,this._widget=i,this._selectedDiffs=_e(this,o=>{const r=this._diffModel.read(o),a=r==null?void 0:r.diff.read(o);if(!a)return OR;const l=this._editors.modifiedSelections.read(o);if(l.every(u=>u.isEmpty()))return OR;const c=new pr(l.map(u=>ze.fromRangeInclusive(u))),h=a.mappings.filter(u=>u.lineRangeMapping.innerChanges&&c.intersects(u.lineRangeMapping.modified)).map(u=>({mapping:u,rangeMappings:u.lineRangeMapping.innerChanges.filter(f=>l.some(g=>L.areIntersecting(f.modifiedRange,g)))}));return h.length===0||h.every(u=>u.rangeMappings.length===0)?OR:h}),this._register(Ks((o,r)=>{if(!this._options.shouldRenderOldRevertArrows.read(o))return;const a=this._diffModel.read(o),l=a==null?void 0:a.diff.read(o);if(!a||!l||a.movedTextToCompare.read(o))return;const c=[],d=this._selectedDiffs.read(o),h=new Set(d.map(u=>u.mapping));if(d.length>0){const u=this._editors.modifiedSelections.read(o),f=r.add(new vx(u[u.length-1].positionLineNumber,this._widget,d.flatMap(g=>g.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}for(const u of l.mappings)if(!h.has(u)&&!u.lineRangeMapping.modified.isEmpty&&u.lineRangeMapping.innerChanges){const f=r.add(new vx(u.lineRangeMapping.modified.startLineNumber,this._widget,u.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(f),c.push(f)}r.add(ve(()=>{for(const u of c)this._editors.modified.removeGlyphMarginWidget(u)}))}))}}const pI=class pI extends F{getId(){return this._id}constructor(e,t,n,i){super(),this._lineNumber=e,this._widget=t,this._diffs=n,this._revertSelection=i,this._id=`revertButton${pI.counter++}`,this._domNode=Qe("div.revertButton",{title:this._revertSelection?m("revertSelectedChanges","Revert Selected Changes"):m("revertChange","Revert Change")},[tm(J.arrowRight)]).root,this._register($(this._domNode,ee.MOUSE_DOWN,o=>{o.button!==2&&(o.stopPropagation(),o.preventDefault())})),this._register($(this._domNode,ee.MOUSE_UP,o=>{o.stopPropagation(),o.preventDefault()})),this._register($(this._domNode,ee.CLICK,o=>{this._diffs instanceof as?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),o.stopPropagation(),o.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:ia.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}};pI.counter=0;let vx=pI;function w0e(s,e,t){return Vue({debugName:()=>`Configuration Key "${s}"`},n=>t.onDidChangeConfiguration(i=>{i.affectsConfiguration(s)&&n(i)}),()=>t.getValue(s)??e)}function va(s,e,t){const n=s.bindTo(e);return T0({debugName:()=>`Set Context Key "${s.key}"`},i=>{n.set(t(i))})}var y0e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Cz=function(s,e){return function(t,n){e(t,n,s)}};let eF=class extends F{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,t,n,i,o,r,a){super(),this.originalEditorElement=e,this.modifiedEditorElement=t,this._options=n,this._argCodeEditorWidgetOptions=i,this._createInnerEditor=o,this._instantiationService=r,this._keybindingService=a,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new O),this.modifiedScrollTop=kt(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=kt(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=go(this.modified),this.originalObs=go(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=kt(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=Ho({owner:this,equalsFn:A.equals},l=>{var c;return((c=this.modifiedSelections.read(l)[0])==null?void 0:c.getPosition())??new A(1,1)}),this.originalCursor=kt(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new A(1,1)),this._argCodeEditorWidgetOptions=null,this._register(E0({createEmptyChangeSummary:()=>({}),handleChange:(l,c)=>(l.didChange(n.editorOptions)&&Object.assign(c,l.change.changedOptions),!0)},(l,c)=>{n.editorOptions.read(l),this._options.renderSideBySide.read(l),this.modified.updateOptions(this._adjustOptionsForRightHandSide(l,c)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(l,c))}))}_createLeftHandSideEditor(e,t){const n=this._adjustOptionsForLeftHandSide(void 0,e),i=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,n,t);return i.setContextValue("isInDiffLeftEditor",!0),i}_createRightHandSideEditor(e,t){const n=this._adjustOptionsForRightHandSide(void 0,e),i=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,n,t);return i.setContextValue("isInDiffRightEditor",!0),i}_constructInnerEditor(e,t,n,i){const o=this._createInnerEditor(e,t,n,i);return this._register(o.onDidContentSizeChange(r=>{const a=this.original.getContentWidth()+this.modified.getContentWidth()+M1.ENTIRE_DIFF_OVERVIEW_WIDTH,l=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:l,contentWidth:a,contentHeightChanged:r.contentHeightChanged,contentWidthChanged:r.contentWidthChanged})})),o}_adjustOptionsForLeftHandSide(e,t){const n=this._adjustOptionsForSubEditor(t);return this._options.renderSideBySide.get()?(n.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},n.wordWrapOverride1=this._options.diffWordWrap.get()):(n.wordWrapOverride1="off",n.wordWrapOverride2="off",n.stickyScroll={enabled:!1},n.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),n.glyphMargin=this._options.renderSideBySide.get(),t.originalAriaLabel&&(n.ariaLabel=t.originalAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.readOnly=!this._options.originalEditable.get(),n.dropIntoEditor={enabled:!n.readOnly},n.extraEditorClassName="original-in-monaco-diff-editor",n}_adjustOptionsForRightHandSide(e,t){const n=this._adjustOptionsForSubEditor(t);return t.modifiedAriaLabel&&(n.ariaLabel=t.modifiedAriaLabel),n.ariaLabel=this._updateAriaLabel(n.ariaLabel),n.wordWrapOverride1=this._options.diffWordWrap.get(),n.revealHorizontalRightPadding=Ja.revealHorizontalRightPadding.defaultValue+M1.ENTIRE_DIFF_OVERVIEW_WIDTH,n.scrollbar.verticalHasArrows=!1,n.extraEditorClassName="modified-in-monaco-diff-editor",n}_adjustOptionsForSubEditor(e){const t={...e,dimension:{height:0,width:0}};return t.inDiffEditor=!0,t.automaticLayout=!1,t.scrollbar={...t.scrollbar||{}},t.folding=!1,t.codeLens=this._options.diffCodeLens.get(),t.fixedOverflowWidgets=!0,t.minimap={...t.minimap||{}},t.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?t.stickyScroll={enabled:!1}:t.stickyScroll=this._options.editorOptions.get().stickyScroll,t}_updateAriaLabel(e){var n;e||(e="");const t=m("diff-aria-navigation-tip"," use {0} to open the accessibility help.",(n=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))==null?void 0:n.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};eF=y0e([Cz(5,Ce),Cz(6,wt)],eF);const _I=class _I extends F{constructor(){super(...arguments),this._id=++_I.idCounter,this._onDidDispose=this._register(new O),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,t="api"){this._targetEditor.setPosition(e,t)}revealLine(e,t=0){this._targetEditor.revealLine(e,t)}revealLineInCenter(e,t=0){this._targetEditor.revealLineInCenter(e,t)}revealLineInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,t)}revealLineNearTop(e,t=0){this._targetEditor.revealLineNearTop(e,t)}revealPosition(e,t=0){this._targetEditor.revealPosition(e,t)}revealPositionInCenter(e,t=0){this._targetEditor.revealPositionInCenter(e,t)}revealPositionInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,t)}revealPositionNearTop(e,t=0){this._targetEditor.revealPositionNearTop(e,t)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,t="api"){this._targetEditor.setSelection(e,t)}setSelections(e,t="api"){this._targetEditor.setSelections(e,t)}revealLines(e,t,n=0){this._targetEditor.revealLines(e,t,n)}revealLinesInCenter(e,t,n=0){this._targetEditor.revealLinesInCenter(e,t,n)}revealLinesInCenterIfOutsideViewport(e,t,n=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,t,n)}revealLinesNearTop(e,t,n=0){this._targetEditor.revealLinesNearTop(e,t,n)}revealRange(e,t=0,n=!1,i=!0){this._targetEditor.revealRange(e,t,n,i)}revealRangeInCenter(e,t=0){this._targetEditor.revealRangeInCenter(e,t)}revealRangeInCenterIfOutsideViewport(e,t=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,t)}revealRangeNearTop(e,t=0){this._targetEditor.revealRangeNearTop(e,t)}revealRangeNearTopIfOutsideViewport(e,t=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,t)}revealRangeAtTop(e,t=0){this._targetEditor.revealRangeAtTop(e,t)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,t,n){this._targetEditor.trigger(e,t,n)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}};_I.idCounter=0;let tF=_I;var S0e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},k0e=function(s,e){return function(t,n){e(t,n,s)}};let nF=class{get editorOptions(){return this._options}constructor(e,t){this._accessibilityService=t,this._diffEditorWidth=Ge(this,0),this._screenReaderMode=kt(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=_e(this,i=>this._options.read(i).renderSideBySide&&this._diffEditorWidth.read(i)<=this._options.read(i).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=_e(this,i=>this._options.read(i).renderOverviewRuler),this.renderSideBySide=_e(this,i=>this.compactMode.read(i)&&this.shouldRenderInlineViewInSmartMode.read(i)?!1:this._options.read(i).renderSideBySide&&!(this._options.read(i).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(i)&&!this._screenReaderMode.read(i))),this.readOnly=_e(this,i=>this._options.read(i).readOnly),this.shouldRenderOldRevertArrows=_e(this,i=>!(!this._options.read(i).renderMarginRevertIcon||!this.renderSideBySide.read(i)||this.readOnly.read(i)||this.shouldRenderGutterMenu.read(i))),this.shouldRenderGutterMenu=_e(this,i=>this._options.read(i).renderGutterMenu),this.renderIndicators=_e(this,i=>this._options.read(i).renderIndicators),this.enableSplitViewResizing=_e(this,i=>this._options.read(i).enableSplitViewResizing),this.splitViewDefaultRatio=_e(this,i=>this._options.read(i).splitViewDefaultRatio),this.ignoreTrimWhitespace=_e(this,i=>this._options.read(i).ignoreTrimWhitespace),this.maxComputationTimeMs=_e(this,i=>this._options.read(i).maxComputationTime),this.showMoves=_e(this,i=>this._options.read(i).experimental.showMoves&&this.renderSideBySide.read(i)),this.isInEmbeddedEditor=_e(this,i=>this._options.read(i).isInEmbeddedEditor),this.diffWordWrap=_e(this,i=>this._options.read(i).diffWordWrap),this.originalEditable=_e(this,i=>this._options.read(i).originalEditable),this.diffCodeLens=_e(this,i=>this._options.read(i).diffCodeLens),this.accessibilityVerbose=_e(this,i=>this._options.read(i).accessibilityVerbose),this.diffAlgorithm=_e(this,i=>this._options.read(i).diffAlgorithm),this.showEmptyDecorations=_e(this,i=>this._options.read(i).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=_e(this,i=>this._options.read(i).onlyShowAccessibleDiffViewer),this.compactMode=_e(this,i=>this._options.read(i).compactMode),this.trueInlineDiffRenderingEnabled=_e(this,i=>this._options.read(i).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=_e(this,i=>!this.renderSideBySide.read(i)&&this.trueInlineDiffRenderingEnabled.read(i)),this.hideUnchangedRegions=_e(this,i=>this._options.read(i).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=_e(this,i=>this._options.read(i).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=_e(this,i=>this._options.read(i).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=_e(this,i=>this._options.read(i).hideUnchangedRegions.minimumLineCount),this._model=Ge(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,i=>jue(this,o=>{const r=i==null?void 0:i.diff.read(o);return r?L0e(r,this.trueInlineDiffRenderingEnabled.read(o)):void 0})).flatten().map(this,i=>!!i),this.inlineViewHideOriginalLineNumbers=this.compactMode;const n={...e,...wz(e,Ei)};this._options=Ge(this,n)}updateOptions(e){const t=wz(e,this._options.get()),n={...this._options.get(),...e,...t};this._options.set(n,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}setModel(e){this._model.set(e,void 0)}};nF=S0e([k0e(1,xo)],nF);function L0e(s,e){return s.mappings.every(t=>x0e(t.lineRangeMapping)||D0e(t.lineRangeMapping)||e&&tB(t.lineRangeMapping))}function x0e(s){return s.original.length===0}function D0e(s){return s.modified.length===0}function wz(s,e){var t,n,i,o,r,a,l,c;return{enableSplitViewResizing:be(s.enableSplitViewResizing,e.enableSplitViewResizing),splitViewDefaultRatio:Tte(s.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:be(s.renderSideBySide,e.renderSideBySide),renderMarginRevertIcon:be(s.renderMarginRevertIcon,e.renderMarginRevertIcon),maxComputationTime:Zu(s.maxComputationTime,e.maxComputationTime,0,1073741824),maxFileSize:Zu(s.maxFileSize,e.maxFileSize,0,1073741824),ignoreTrimWhitespace:be(s.ignoreTrimWhitespace,e.ignoreTrimWhitespace),renderIndicators:be(s.renderIndicators,e.renderIndicators),originalEditable:be(s.originalEditable,e.originalEditable),diffCodeLens:be(s.diffCodeLens,e.diffCodeLens),renderOverviewRuler:be(s.renderOverviewRuler,e.renderOverviewRuler),diffWordWrap:gn(s.diffWordWrap,e.diffWordWrap,["off","on","inherit"]),diffAlgorithm:gn(s.diffAlgorithm,e.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:be(s.accessibilityVerbose,e.accessibilityVerbose),experimental:{showMoves:be((t=s.experimental)==null?void 0:t.showMoves,e.experimental.showMoves),showEmptyDecorations:be((n=s.experimental)==null?void 0:n.showEmptyDecorations,e.experimental.showEmptyDecorations),useTrueInlineView:be((i=s.experimental)==null?void 0:i.useTrueInlineView,e.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:be(((o=s.hideUnchangedRegions)==null?void 0:o.enabled)??((r=s.experimental)==null?void 0:r.collapseUnchangedRegions),e.hideUnchangedRegions.enabled),contextLineCount:Zu((a=s.hideUnchangedRegions)==null?void 0:a.contextLineCount,e.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:Zu((l=s.hideUnchangedRegions)==null?void 0:l.minimumLineCount,e.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:Zu((c=s.hideUnchangedRegions)==null?void 0:c.revealLineCount,e.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:be(s.isInEmbeddedEditor,e.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:be(s.onlyShowAccessibleDiffViewer,e.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:Zu(s.renderSideBySideInlineBreakpoint,e.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:be(s.useInlineViewWhenSpaceIsLimited,e.useInlineViewWhenSpaceIsLimited),renderGutterMenu:be(s.renderGutterMenu,e.renderGutterMenu),compactMode:be(s.compactMode,e.compactMode)}}var I0e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},jv=function(s,e){return function(t,n){e(t,n,s)}};let yd=class extends tF{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,t,n,i,o,r,a,l){super(),this._domElement=e,this._parentContextKeyService=i,this._parentInstantiationService=o,this._accessibilitySignalService=a,this._editorProgressService=l,this.elements=Qe("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[Qe("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),Qe("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),Qe("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register(a1(this,void 0)),this._diffModel=_e(this,w=>{var y;return(y=this._diffModelSrc.read(w))==null?void 0:y.object}),this.onDidChangeModel=se.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new dv([Ie,this._contextKeyService]))),this._boundarySashes=Ge(this,void 0),this._accessibleDiffViewerShouldBeVisible=Ge(this,!1),this._accessibleDiffViewerVisible=_e(this,w=>this._options.onlyShowAccessibleDiffViewer.read(w)?!0:this._accessibleDiffViewerShouldBeVisible.read(w)),this._movedBlocksLinesPart=Ge(this,void 0),this._layoutInfo=_e(this,w=>{var fe,pe;const y=this._rootSizeObserver.width.read(w),k=this._rootSizeObserver.height.read(w);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=k+"px";const x=this._sash.read(w),D=this._gutter.read(w),N=(D==null?void 0:D.width.read(w))??0,W=((fe=this._overviewRulerPart.read(w))==null?void 0:fe.width)??0;let B,z,U,H,X;if(!!x){const ce=x.sashLeft.read(w),Oe=((pe=this._movedBlocksLinesPart.read(w))==null?void 0:pe.width.read(w))??0;B=0,z=ce-N-Oe,X=ce-N,U=ce,H=y-U-W}else{X=0;const ce=this._options.inlineViewHideOriginalLineNumbers.read(w);B=N,ce?z=0:z=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(w)),U=N+z,H=y-U-W}return this.elements.original.style.left=B+"px",this.elements.original.style.width=z+"px",this._editors.original.layout({width:z,height:k},!0),D==null||D.layout(X),this.elements.modified.style.left=U+"px",this.elements.modified.style.width=H+"px",this._editors.modified.layout({width:H,height:k},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((w,y)=>w==null?void 0:w.diff.read(y)),this.onDidUpdateDiff=se.fromObservableLight(this._diffValue),r.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register(ve(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new IY(this.elements.root,t.dimension)),this._rootSizeObserver.setAutomaticLayout(t.automaticLayout??!1),this._options=this._instantiationService.createInstance(nF,t),this._register(Ae(w=>{this._options.setWidth(this._rootSizeObserver.width.read(w))})),this._contextKeyService.createKey(I.isEmbeddedDiffEditor.key,!1),this._register(va(I.isEmbeddedDiffEditor,this._contextKeyService,w=>this._options.isInEmbeddedEditor.read(w))),this._register(va(I.comparingMovedCode,this._contextKeyService,w=>{var y;return!!((y=this._diffModel.read(w))!=null&&y.movedTextToCompare.read(w))})),this._register(va(I.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,w=>this._options.couldShowInlineViewBecauseOfSize.read(w))),this._register(va(I.diffEditorInlineMode,this._contextKeyService,w=>!this._options.renderSideBySide.read(w))),this._register(va(I.hasChanges,this._contextKeyService,w=>{var y,k;return(((k=(y=this._diffModel.read(w))==null?void 0:y.diff.read(w))==null?void 0:k.mappings.length)??0)>0})),this._editors=this._register(this._instantiationService.createInstance(eF,this.elements.original,this.elements.modified,this._options,n,(w,y,k,x)=>this._createInnerEditor(w,y,k,x))),this._register(va(I.diffEditorOriginalWritable,this._contextKeyService,w=>this._options.originalEditable.read(w))),this._register(va(I.diffEditorModifiedWritable,this._contextKeyService,w=>!this._options.readOnly.read(w))),this._register(va(I.diffEditorOriginalUri,this._contextKeyService,w=>{var y;return((y=this._diffModel.read(w))==null?void 0:y.model.original.uri.toString())??""})),this._register(va(I.diffEditorModifiedUri,this._contextKeyService,w=>{var y;return((y=this._diffModel.read(w))==null?void 0:y.model.modified.uri.toString())??""})),this._overviewRulerPart=os(this,w=>this._options.renderOverviewRuler.read(w)?this._instantiationService.createInstance(co(M1,w),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map(y=>y.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const c={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((w,y)=>{var k;return w-(((k=this._overviewRulerPart.read(y))==null?void 0:k.width)??0)})};this._sashLayout=new h0e(this._options,c),this._sash=os(this,w=>{const y=this._options.renderSideBySide.read(w);return this.elements.root.classList.toggle("side-by-side",y),y?new MY(this.elements.root,c,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const d=os(this,w=>this._instantiationService.createInstance(co(bx,w),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);os(this,w=>this._instantiationService.createInstance(co(d0e,w),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const h=new Set,u=new Set;let f=!1;const g=os(this,w=>this._instantiationService.createInstance(co(ZO,w),Le(this._domElement),this._editors,this._diffModel,this._options,this,()=>f||d.get().isUpdatingHiddenAreas,h,u)).recomputeInitiallyAndOnChange(this._store),p=_e(this,w=>{const y=g.read(w).viewZones.read(w).orig,k=d.read(w).viewZones.read(w).origViewZones;return y.concat(k)}),_=_e(this,w=>{const y=g.read(w).viewZones.read(w).mod,k=d.read(w).viewZones.read(w).modViewZones;return y.concat(k)});this._register(fx(this._editors.original,p,w=>{f=w},h));let b;this._register(fx(this._editors.modified,_,w=>{f=w,f?b=Qa.capture(this._editors.modified):(b==null||b.restore(this._editors.modified),b=void 0)},u)),this._accessibleDiffViewer=os(this,w=>this._instantiationService.createInstance(co(Mf,w),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,(y,k)=>this._accessibleDiffViewerShouldBeVisible.set(y,k),this._options.onlyShowAccessibleDiffViewer.map(y=>!y),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map((y,k)=>{var x;return(x=y==null?void 0:y.diff.read(k))==null?void 0:x.mappings.map(D=>D.lineRangeMapping)}),new Q1e(this._editors))).recomputeInitiallyAndOnChange(this._store);const v=this._accessibleDiffViewerVisible.map(w=>w?"hidden":"visible");this._register(wd(this.elements.modified,{visibility:v})),this._register(wd(this.elements.original,{visibility:v})),this._createDiffEditorContributions(),r.addDiffEditor(this),this._gutter=os(this,w=>this._options.shouldRenderGutterMenu.read(w)?this._instantiationService.createInstance(co(YO,w),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register(rv(this._layoutInfo)),os(this,w=>new(co(W_,w))(this.elements.root,this._diffModel,this._layoutInfo.map(y=>y.originalEditor),this._layoutInfo.map(y=>y.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,w=>{this._movedBlocksLinesPart.set(w,void 0)}),this._register(se.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,w=>this._handleCursorPositionChange(w,!0))),this._register(se.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,w=>this._handleCursorPositionChange(w,!1)));const C=this._diffModel.map(this,(w,y)=>{if(w)return w.diff.read(y)===void 0&&!w.isDiffUpToDate.read(y)});this._register(Ks((w,y)=>{if(C.read(w)===!0){const k=this._editorProgressService.show(!0,1e3);y.add(ve(()=>k.done()))}})),this._register(Ks((w,y)=>{y.add(new(co(C0e,w))(this._editors,this._diffModel,this._options,this))})),this._register(Ks((w,y)=>{const k=this._diffModel.read(w);if(k)for(const x of[k.model.original,k.model.modified])y.add(x.onWillDispose(D=>{Pe(new _t("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register(Ae(w=>{this._options.setModel(this._diffModel.read(w))}))}_createInnerEditor(e,t,n,i){return e.createInstance(T1,t,n,i)}_createDiffEditorContributions(){const e=Vf.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(n){Pe(n)}}get _targetEditor(){return this._editors.modified}getEditorType(){return F0.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var n;const e=this._editors.original.saveViewState(),t=this._editors.modified.saveViewState();return{original:e,modified:t,modelState:(n=this._diffModel.get())==null?void 0:n.serializeState()}}restoreViewState(e){var t;if(e&&e.original&&e.modified){const n=e;this._editors.original.restoreViewState(n.original),this._editors.modified.restoreViewState(n.modified),n.modelState&&((t=this._diffModel.get())==null||t.restoreSerializedState(n.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(GO,e,this._options)}getModel(){var e;return((e=this._diffModel.get())==null?void 0:e.model)??null}setModel(e){const t=e?"model"in e?gx.create(e).createNewRef(this):gx.create(this.createViewModel(e),this):null;this.setDiffModel(t)}setDiffModel(e,t){const n=this._diffModel.get();!e&&n&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==(e==null?void 0:e.object)&&sm(t,i=>{var a;const o=e==null?void 0:e.object;kt.batchEventsGlobally(i,()=>{this._editors.original.setModel(o?o.model.original:null),this._editors.modified.setModel(o?o.model.modified:null)});const r=(a=this._diffModelSrc.get())==null?void 0:a.createNewRef(this);this._diffModelSrc.set(e==null?void 0:e.createNewRef(this),i),setTimeout(()=>{r==null||r.dispose()},0)})}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var t;const e=(t=this._diffModel.get())==null?void 0:t.diff.get();return e?T0e(e):null}revert(e){const t=this._diffModel.get();!t||!t.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:t.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const t=this._diffModel.get();if(!t||!t.isDiffUpToDate.get())return;const n=e.map(i=>({range:i.modifiedRange,text:t.model.original.getValueInRange(i.originalRange)}));this._editors.modified.executeEdits("diffEditor",n)}_goTo(e){this._editors.modified.setPosition(new A(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var o,r;const t=(r=(o=this._diffModel.get())==null?void 0:o.diff.get())==null?void 0:r.mappings;if(!t||t.length===0)return;const n=this._editors.modified.getPosition().lineNumber;let i;e==="next"?i=t.find(a=>a.lineRangeMapping.modified.startLineNumber>n)??t[0]:i=Uw(t,a=>a.lineRangeMapping.modified.startLineNumber<n)??t[t.length-1],this._goTo(i),i.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Fo.diffLineDeleted,{source:"diffEditor.goToDiff"}):i.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Fo.diffLineInserted,{source:"diffEditor.goToDiff"}):i&&this._accessibilitySignalService.playSignal(Fo.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then(()=>{var n;const t=(n=e.diff.get())==null?void 0:n.mappings;!t||t.length===0||this._goTo(t[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var r,a;const e=this._editors.modified.hasWidgetFocus(),t=e?this._editors.modified:this._editors.original,n=e?this._editors.original:this._editors.modified;let i;const o=t.getSelection();if(o){const l=(a=(r=this._diffModel.get())==null?void 0:r.diff.get())==null?void 0:a.mappings.map(c=>e?c.lineRangeMapping.flip():c.lineRangeMapping);if(l){const c=oz(o.getStartPosition(),l),d=oz(o.getEndPosition(),l);i=L.plusRange(c,d)}}return{destination:n,destinationSelection:i}}switchSide(){const{destination:e,destinationSelection:t}=this.mapToOtherSide();e.focus(),t&&e.setSelection(t)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&rn(n=>{for(const i of e)i.collapseAll(n)})}showAllUnchangedRegions(){var t;const e=(t=this._diffModel.get())==null?void 0:t.unchangedRegions.get();e&&rn(n=>{for(const i of e)i.showAll(n)})}_handleCursorPositionChange(e,t){var n,i;if((e==null?void 0:e.reason)===3){const o=(i=(n=this._diffModel.get())==null?void 0:n.diff.get())==null?void 0:i.mappings.find(r=>t?r.lineRangeMapping.modified.contains(e.position.lineNumber):r.lineRangeMapping.original.contains(e.position.lineNumber));o!=null&&o.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(Fo.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):o!=null&&o.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(Fo.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):o&&this._accessibilitySignalService.playSignal(Fo.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};yd=I0e([jv(3,Ie),jv(4,Ce),jv(5,mt),jv(6,Iu),jv(7,Lu)],yd);function T0e(s){return s.mappings.map(e=>{const t=e.lineRangeMapping;let n,i,o,r,a=t.innerChanges;return t.original.isEmpty?(n=t.original.startLineNumber-1,i=0,a=void 0):(n=t.original.startLineNumber,i=t.original.endLineNumberExclusive-1),t.modified.isEmpty?(o=t.modified.startLineNumber-1,r=0,a=void 0):(o=t.modified.startLineNumber,r=t.modified.endLineNumberExclusive-1),{originalStartLineNumber:n,originalEndLineNumber:i,modifiedStartLineNumber:o,modifiedEndLineNumber:r,charChanges:a==null?void 0:a.map(l=>({originalStartLineNumber:l.originalRange.startLineNumber,originalStartColumn:l.originalRange.startColumn,originalEndLineNumber:l.originalRange.endLineNumber,originalEndColumn:l.originalRange.endColumn,modifiedStartLineNumber:l.modifiedRange.startLineNumber,modifiedStartColumn:l.modifiedRange.startColumn,modifiedEndLineNumber:l.modifiedRange.endLineNumber,modifiedEndColumn:l.modifiedRange.endColumn}))}})}var iB=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Bt=function(s,e){return function(t,n){e(t,n,s)}};let E0e=0,yz=!1;function N0e(s){if(!s){if(yz)return;yz=!0}Ohe(s||Et.document.body)}let Cx=class extends T1{constructor(e,t,n,i,o,r,a,l,c,d,h,u,f){const g={...t};g.ariaLabel=g.ariaLabel||YA.editorViewAccessibleLabel,super(e,g,{},n,i,o,r,c,d,h,u,f),l instanceof kb?this._standaloneKeybindingService=l:this._standaloneKeybindingService=null,N0e(g.ariaContainerElement),Yue((p,_)=>n.createInstance(ub,p,_,{})),Xue(a)}addCommand(e,t,n){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const i="DYNAMIC_"+ ++E0e,o=K.deserialize(n);return this._standaloneKeybindingService.addDynamicKeybinding(i,e,t,o),i}createContextKey(e,t){return this._contextKeyService.createKey(e,t)}addAction(e){if(typeof e.id!="string"||typeof e.label!="string"||typeof e.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),F.None;const t=e.id,n=e.label,i=K.and(K.equals("editorId",this.getId()),K.deserialize(e.precondition)),o=e.keybindings,r=K.and(i,K.deserialize(e.keybindingContext)),a=e.contextMenuGroupId||null,l=e.contextMenuOrder||0,c=(f,...g)=>Promise.resolve(e.run(this,...g)),d=new q,h=this.getId()+":"+t;if(d.add(rt.registerCommand(h,c)),a){const f={command:{id:h,title:n},when:i,group:a,order:l};d.add(gi.appendMenuItem(ge.EditorContext,f))}if(Array.isArray(o))for(const f of o)d.add(this._standaloneKeybindingService.addDynamicKeybinding(h,f,c,r));const u=new kY(h,n,n,void 0,i,(...f)=>Promise.resolve(e.run(this,...f)),this._contextKeyService);return this._actions.set(t,u),d.add(ve(()=>{this._actions.delete(t)})),d}_triggerCommand(e,t){if(this._codeEditorService instanceof Jk)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(e,t)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(e,t)}};Cx=iB([Bt(2,Ce),Bt(3,mt),Bt(4,Wt),Bt(5,Ie),Bt(6,oc),Bt(7,wt),Bt(8,Yn),Bt(9,En),Bt(10,xo),Bt(11,cn),Bt(12,ue)],Cx);let iF=class extends Cx{constructor(e,t,n,i,o,r,a,l,c,d,h,u,f,g,p,_){const b={...t};ZL(h,b,!1);const v=c.registerEditorContainer(e);typeof b.theme=="string"&&c.setTheme(b.theme),typeof b.autoDetectHighContrast<"u"&&c.setAutoDetectHighContrast(!!b.autoDetectHighContrast);const C=b.model;delete b.model,super(e,b,n,i,o,r,a,l,c,d,u,p,_),this._configurationService=h,this._standaloneThemeService=c,this._register(v);let w;if(typeof C>"u"){const y=g.getLanguageIdByMimeType(b.language)||b.language||xs;w=FY(f,g,b.value||"",y,void 0),this._ownsModel=!0}else w=C,this._ownsModel=!1;if(this._attachModel(w),w){const y={oldModelUrl:null,newModelUrl:w.uri};this._onDidChangeModel.fire(y)}}dispose(){super.dispose()}updateOptions(e){ZL(this._configurationService,e,!1),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_postDetachModelCleanup(e){super._postDetachModelCleanup(e),e&&this._ownsModel&&(e.dispose(),this._ownsModel=!1)}};iF=iB([Bt(2,Ce),Bt(3,mt),Bt(4,Wt),Bt(5,Ie),Bt(6,oc),Bt(7,wt),Bt(8,rr),Bt(9,En),Bt(10,Ze),Bt(11,xo),Bt(12,Ut),Bt(13,tn),Bt(14,cn),Bt(15,ue)],iF);let sF=class extends yd{constructor(e,t,n,i,o,r,a,l,c,d,h,u){const f={...t};ZL(l,f,!0);const g=r.registerEditorContainer(e);typeof f.theme=="string"&&r.setTheme(f.theme),typeof f.autoDetectHighContrast<"u"&&r.setAutoDetectHighContrast(!!f.autoDetectHighContrast),super(e,f,{},i,n,o,u,d),this._configurationService=l,this._standaloneThemeService=r,this._register(g)}dispose(){super.dispose()}updateOptions(e){ZL(this._configurationService,e,!0),typeof e.theme=="string"&&this._standaloneThemeService.setTheme(e.theme),typeof e.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!e.autoDetectHighContrast),super.updateOptions(e)}_createInnerEditor(e,t,n){return e.createInstance(Cx,t,n)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(e,t,n){return this.getModifiedEditor().addCommand(e,t,n)}createContextKey(e,t){return this.getModifiedEditor().createContextKey(e,t)}addAction(e){return this.getModifiedEditor().addAction(e)}};sF=iB([Bt(2,Ce),Bt(3,Ie),Bt(4,mt),Bt(5,rr),Bt(6,En),Bt(7,Ze),Bt(8,Lo),Bt(9,Lu),Bt(10,Pd),Bt(11,Iu)],sF);function FY(s,e,t,n,i){if(t=t||"",!n){const o=t.indexOf(`
`);let r=t;return o!==-1&&(r=t.substring(0,o)),Sz(s,t,e.createByFilepathOrFirstLine(i||null,r),i)}return Sz(s,t,e.createById(n),i)}function Sz(s,e,t,n){return s.createModel(e,t,n)}var R0e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},kz=function(s,e){return function(t,n){e(t,n,s)}};class M0e{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let wx=class extends F{constructor(e,t,n,i,o){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=n,this._instantiationService=i,this._viewModel=Ge(this,void 0),this._collapsed=_e(this,l=>{var c;return(c=this._viewModel.read(l))==null?void 0:c.collapsed.read(l)}),this._editorContentHeight=Ge(this,500),this.contentHeight=_e(this,l=>(this._collapsed.read(l)?0:this._editorContentHeight.read(l))+this._outerEditorHeight),this._modifiedContentWidth=Ge(this,0),this._modifiedWidth=Ge(this,0),this._originalContentWidth=Ge(this,0),this._originalWidth=Ge(this,0),this.maxScroll=_e(this,l=>{const c=this._modifiedContentWidth.read(l)-this._modifiedWidth.read(l),d=this._originalContentWidth.read(l)-this._originalWidth.read(l);return c>d?{maxScroll:c,width:this._modifiedWidth.read(l)}:{maxScroll:d,width:this._originalWidth.read(l)}}),this._elements=Qe("div.multiDiffEntry",[Qe("div.header@header",[Qe("div.header-content",[Qe("div.collapse-button@collapseButton"),Qe("div.file-path",[Qe("div.title.modified.show-file-icons@primaryPath",[]),Qe("div.status.deleted@status",["R"]),Qe("div.title.original.show-file-icons@secondaryPath",[])]),Qe("div.actions@actions")])]),Qe("div.editorParent",[Qe("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(yd,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=go(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=go(this.editor.getOriginalEditor()).isFocused,this.isFocused=_e(this,l=>this.isModifedFocused.read(l)||this.isOriginalFocused.read(l)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=this._register(new q),this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const r=new RL(this._elements.collapseButton,{});this._register(Ae(l=>{r.element.className="",r.icon=this._collapsed.read(l)?J.chevronRight:J.chevronDown})),this._register(r.onDidClick(()=>{var l;(l=this._viewModel.get())==null||l.collapsed.set(!this._collapsed.get(),void 0)})),this._register(Ae(l=>{this._elements.editor.style.display=this._collapsed.read(l)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(l=>{const c=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(c,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(l=>{const c=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(c,void 0)})),this._register(this.editor.onDidContentSizeChange(l=>{sC(c=>{this._editorContentHeight.set(l.contentHeight,c),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),c),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),c)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(l=>{if(this._isSettingScrollTop||!l.scrollTopChanged||!this._data)return;const c=l.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(c)})),this._register(Ae(l=>{var d;const c=(d=this._viewModel.read(l))==null?void 0:d.isActive.read(l);this._elements.root.classList.toggle("active",c)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._contextKeyService=this._register(o.createScoped(this._elements.actions));const a=this._register(this._instantiationService.createChild(new dv([Ie,this._contextKeyService])));this._register(a.createInstance(_x,this._elements.actions,ge.MultiDiffEditorFileToolbar,{actionRunner:this._register(new AY(()=>{var l;return(l=this._viewModel.get())==null?void 0:l.modifiedUri})),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:l=>l.startsWith("navigation")},actionViewItemProvider:(l,c)=>EG(a,l,c)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){this._data=e;function t(i){return{...i,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!e){sC(i=>{this._viewModel.set(void 0,i),this.editor.setDiffModel(null,i),this._dataStore.clear()});return}const n=e.viewModel.documentDiffItem;if(sC(i=>{var c,d;(c=this._resourceLabel)==null||c.setUri(e.viewModel.modifiedUri??e.viewModel.originalUri,{strikethrough:e.viewModel.modifiedUri===void 0});let o=!1,r=!1,a=!1,l="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(l="R",o=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(l="A",a=!0):(l="D",r=!0),this._elements.status.classList.toggle("renamed",o),this._elements.status.classList.toggle("deleted",r),this._elements.status.classList.toggle("added",a),this._elements.status.innerText=l,(d=this._resourceLabel2)==null||d.setUri(o?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,i),this.editor.setDiffModel(e.viewModel.diffEditorViewModelRef,i),this.editor.updateOptions(t(n.options??{}))}),n.onOptionsDidChange&&this._dataStore.add(n.onOptionsDidChange(()=>{this.editor.updateOptions(t(n.options??{}))})),e.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,i=>{i||this.setData(void 0)}),e.viewModel.documentDiffItem.contextKeys)for(const[i,o]of Object.entries(e.viewModel.documentDiffItem.contextKeys))this._contextKeyService.createKey(i,o)}render(e,t,n,i){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const o=e.length-this._headerHeight,r=Math.max(0,Math.min(i.start-e.start,o));this._elements.header.style.transform=`translateY(${r}px)`,sC(a=>{this.editor.layout({width:t-2*8-2*1,height:e.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=n,this.editor.getOriginalEditor().setScrollTop(n)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",r>0||n>0),this._elements.header.classList.toggle("collapsed",r===o)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};wx=R0e([kz(3,Ce),kz(4,Ie)],wx);class A0e{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){let t;if(this._unused.size===0)t=this._create(e),this._itemData.set(t,e);else{const n=[...this._unused.values()];t=n.find(i=>this._itemData.get(i).getId()===e.getId())??n[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var P0e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Lz=function(s,e){return function(t,n){e(t,n,s)}};let oF=class extends F{constructor(e,t,n,i,o,r){super(),this._element=e,this._dimension=t,this._viewModel=n,this._workbenchUIElementFactory=i,this._parentContextKeyService=o,this._parentInstantiationService=r,this._scrollableElements=Qe("div.scrollContent",[Qe("div@content",{style:{overflow:"hidden"}}),Qe("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new nv({forceIntegerValues:!1,scheduleAtNextAnimationFrame:l=>So(Le(this._element),l),smoothScrollDuration:100})),this._scrollableElement=this._register(new UT(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=Qe("div.monaco-component.multiDiffEditor",{},[Qe("div",{},[this._scrollableElement.getDomNode()]),Qe("div.placeholder@placeholder",{},[Qe("div",[m("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new IY(this._element,void 0)),this._objectPool=this._register(new A0e(l=>{const c=this._instantiationService.createInstance(wx,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return c.setData(l),c})),this.scrollTop=kt(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=kt(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=xu(this,(l,c)=>{const d=this._viewModel.read(l);if(!d)return{items:[],getItem:g=>{throw new _t}};const h=d.items.read(l),u=new Map;return{items:h.map(g=>{var b;const p=c.add(new O0e(g,this._objectPool,this.scrollLeft,v=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+v})})),_=(b=this._lastDocStates)==null?void 0:b[p.getKey()];return _&&rn(v=>{p.setViewState(_,v)}),u.set(g,p),p}),getItem:g=>u.get(g)}}),this._viewItems=this._viewItemsInfo.map(this,l=>l.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(l,c)=>l.reduce((d,h)=>d+h.contentHeight.read(c)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new dv([Ie,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(I.inMultiDiffEditor.key,!0),this._register(Ks((l,c)=>{const d=this._viewModel.read(l);if(d&&d.contextKeys)for(const[h,u]of Object.entries(d.contextKeys)){const f=this._contextKeyService.createKey(h,void 0);f.set(u),c.add(ve(()=>f.reset()))}}));const a=this._parentContextKeyService.createKey(I.multiDiffEditorAllCollapsed.key,!1);this._register(Ae(l=>{const c=this._viewModel.read(l);if(c){const d=c.items.read(l).every(h=>h.collapsed.read(l));a.set(d)}})),this._register(Ae(l=>{const c=this._dimension.read(l);this._sizeObserver.observe(c)})),this._register(Ae(l=>{const c=this._viewItems.read(l);this._elements.placeholder.classList.toggle("visible",c.length===0)})),this._scrollableElements.content.style.position="relative",this._register(Ae(l=>{const c=this._sizeObserver.height.read(l);this._scrollableElements.root.style.height=`${c}px`;const d=this._totalHeight.read(l);this._scrollableElements.content.style.height=`${d}px`;const h=this._sizeObserver.width.read(l);let u=h;const f=this._viewItems.read(l),g=i9(f,ks(p=>p.maxScroll.read(l).maxScroll,Qr));if(g){const p=g.maxScroll.read(l);u=h+p.maxScroll}this._scrollableElement.setScrollDimensions({width:h,height:c,scrollHeight:d,scrollWidth:u})})),e.replaceChildren(this._elements.root),this._register(ve(()=>{e.replaceChildren()})),this._register(this._register(Ae(l=>{sC(c=>{this.render(l)})})))}render(e){const t=this.scrollTop.read(e);let n=0,i=0,o=0;const r=this._sizeObserver.height.read(e),a=Ye.ofStartAndLength(t,r),l=this._sizeObserver.width.read(e);for(const c of this._viewItems.read(e)){const d=c.contentHeight.read(e),h=Math.min(d,r),u=Ye.ofStartAndLength(i,h),f=Ye.ofStartAndLength(o,d);if(f.isBefore(a))n-=d-h,c.hide();else if(f.isAfter(a))c.hide();else{const g=Math.max(0,Math.min(a.start-f.start,d-h));n-=g;const p=Ye.ofStartAndLength(t+n,r);c.render(u,g,l,p)}i+=h+this._spaceBetweenPx,o+=d+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+n)}px)`}};oF=P0e([Lz(4,Ie),Lz(5,Ce)],oF);class O0e extends F{constructor(e,t,n,i){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=n,this._deltaScrollVertical=i,this._templateRef=this._register(a1(this,void 0)),this.contentHeight=_e(this,o=>{var r,a;return((a=(r=this._templateRef.read(o))==null?void 0:r.object.contentHeight)==null?void 0:a.read(o))??this.viewModel.lastTemplateData.read(o).contentHeight}),this.maxScroll=_e(this,o=>{var r;return((r=this._templateRef.read(o))==null?void 0:r.object.maxScroll.read(o))??{maxScroll:0,scrollWidth:0}}),this.template=_e(this,o=>{var r;return(r=this._templateRef.read(o))==null?void 0:r.object}),this._isHidden=Ge(this,!1),this._isFocused=_e(this,o=>{var r;return((r=this.template.read(o))==null?void 0:r.isFocused.read(o))??!1}),this.viewModel.setIsFocused(this._isFocused,void 0),this._register(Ae(o=>{var a;const r=this._scrollLeft.read(o);(a=this._templateRef.read(o))==null||a.object.setScrollLeft(r)})),this._register(Ae(o=>{const r=this._templateRef.read(o);!r||!this._isHidden.read(o)||r.object.isFocused.read(o)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${(e=this.viewModel.documentDiffItem.modified)==null?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var r;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const n=this.viewModel.lastTemplateData.get(),i=(r=e.selections)==null?void 0:r.map(me.liftSelection);this.viewModel.lastTemplateData.set({...n,selections:i},t);const o=this._templateRef.get();o&&i&&o.object.editor.setSelections(i)}_updateTemplateData(e){const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:t.object.editor.getSelections()??void 0},e)}_clear(){const e=this._templateRef.get();e&&rn(t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)})}hide(){this._isHidden.set(!0,void 0)}render(e,t,n,i){this._isHidden.set(!1,void 0);let o=this._templateRef.get();if(!o){o=this._objectPool.getUnusedObj(new M0e(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(o,void 0);const r=this.viewModel.lastTemplateData.get().selections;r&&o.object.editor.setSelections(r)}o.object.render(e,n,t,i)}}T("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},m("multiDiffEditor.headerBackground","The background color of the diff editor's header"));T("multiDiffEditor.background",oa,m("multiDiffEditor.background","The background color of the multi file diff editor"));T("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},m("multiDiffEditor.border","The border color of the multi file diff editor"));var F0e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},W0e=function(s,e){return function(t,n){e(t,n,s)}};let rF=class extends F{constructor(e,t,n){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=n,this._dimension=Ge(this,void 0),this._viewModel=Ge(this,void 0),this._widgetImpl=xu(this,(i,o)=>(co(wx,i),o.add(this._instantiationService.createInstance(co(oF,i),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register(rv(this._widgetImpl))}};rF=F0e([W0e(2,Ce)],rF);function B0e(s,e,t){return Ne.initialize(t||{}).createInstance(iF,s,e)}function H0e(s){return Ne.get(mt).onCodeEditorAdd(t=>{s(t)})}function V0e(s){return Ne.get(mt).onDiffEditorAdd(t=>{s(t)})}function z0e(){return Ne.get(mt).listCodeEditors()}function $0e(){return Ne.get(mt).listDiffEditors()}function U0e(s,e,t){return Ne.initialize(t||{}).createInstance(sF,s,e)}function j0e(s,e){const t=Ne.initialize(e||{});return new rF(s,{},t)}function q0e(s){if(typeof s.id!="string"||typeof s.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return rt.registerCommand(s.id,s.run)}function K0e(s){if(typeof s.id!="string"||typeof s.label!="string"||typeof s.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=K.deserialize(s.precondition),t=(i,...o)=>Zn.runEditorCommand(i,o,e,(r,a,l)=>Promise.resolve(s.run(a,...l))),n=new q;if(n.add(rt.registerCommand(s.id,t)),s.contextMenuGroupId){const i={command:{id:s.id,title:s.label},when:e,group:s.contextMenuGroupId,order:s.contextMenuOrder||0};n.add(gi.appendMenuItem(ge.EditorContext,i))}if(Array.isArray(s.keybindings)){const i=Ne.get(wt);if(!(i instanceof kb))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const o=K.and(e,K.deserialize(s.keybindingContext));n.add(i.addDynamicKeybindings(s.keybindings.map(r=>({keybinding:r,command:s.id,when:o}))))}}return n}function G0e(s){return WY([s])}function WY(s){const e=Ne.get(wt);return e instanceof kb?e.addDynamicKeybindings(s.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:K.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),F.None)}function Z0e(s,e,t){const n=Ne.get(tn),i=n.getLanguageIdByMimeType(e)||e;return FY(Ne.get(Ut),n,s,i,t)}function Y0e(s,e){const t=Ne.get(tn),n=t.getLanguageIdByMimeType(e)||e||xs;s.setLanguage(t.createById(n))}function X0e(s,e,t){s&&Ne.get(rc).changeOne(e,s.uri,t)}function Q0e(s){Ne.get(rc).changeAll(s,[])}function J0e(s){return Ne.get(rc).read(s)}function eye(s){return Ne.get(rc).onMarkerChanged(s)}function tye(s){return Ne.get(Ut).getModel(s)}function nye(){return Ne.get(Ut).getModels()}function iye(s){return Ne.get(Ut).onModelAdded(s)}function sye(s){return Ne.get(Ut).onModelRemoved(s)}function oye(s){return Ne.get(Ut).onModelLanguageChanged(t=>{s({model:t.model,oldLanguage:t.oldLanguageId})})}function rye(s){return jbe(Ne.get(Ut),s)}function aye(s,e){const t=Ne.get(tn),n=Ne.get(rr);return kW.colorizeElement(n,t,s,e).then(()=>{n.registerEditorContainer(s)})}function lye(s,e,t){const n=Ne.get(tn);return Ne.get(rr).registerEditorContainer(Et.document.body),kW.colorize(n,s,e,t)}function cye(s,e,t=4){return Ne.get(rr).registerEditorContainer(Et.document.body),kW.colorizeModelLine(s,e,t)}function dye(s){const e=mn.get(s);return e||{getInitialState:()=>pb,tokenize:(t,n,i)=>M9(s,i)}}function hye(s,e){mn.getOrCreate(e);const t=dye(e),n=tc(s),i=[];let o=t.getInitialState();for(let r=0,a=n.length;r<a;r++){const l=n[r],c=t.tokenize(l,!0,o);i[r]=c.tokens,o=c.endState}return i}function uye(s,e){Ne.get(rr).defineTheme(s,e)}function fye(s){Ne.get(rr).setTheme(s)}function gye(){KM.clearAllFontInfos()}function mye(s,e){return rt.registerCommand({id:s,handler:e})}function pye(s){return Ne.get(eo).registerOpener({async open(t){return typeof t=="string"&&(t=Se.parse(t)),s.open(t)}})}function _ye(s){return Ne.get(mt).registerCodeEditorOpenHandler(async(t,n,i)=>{var a;if(!n)return null;const o=(a=t.options)==null?void 0:a.selection;let r;return o&&typeof o.endLineNumber=="number"&&typeof o.endColumn=="number"?r=o:o&&(r={lineNumber:o.startLineNumber,column:o.startColumn}),await s.openCodeEditor(n,t.resource,r)?n:null})}function bye(){return{create:B0e,getEditors:z0e,getDiffEditors:$0e,onDidCreateEditor:H0e,onDidCreateDiffEditor:V0e,createDiffEditor:U0e,addCommand:q0e,addEditorAction:K0e,addKeybindingRule:G0e,addKeybindingRules:WY,createModel:Z0e,setModelLanguage:Y0e,setModelMarkers:X0e,getModelMarkers:J0e,removeAllMarkers:Q0e,onDidChangeMarkers:eye,getModels:nye,getModel:tye,onDidCreateModel:iye,onWillDisposeModel:sye,onDidChangeModelLanguage:oye,createWebWorker:rye,colorizeElement:aye,colorize:lye,colorizeModelLine:cye,tokenize:hye,defineTheme:uye,setTheme:fye,remeasureFonts:gye,registerCommand:mye,registerLinkOpener:pye,registerEditorOpener:_ye,AccessibilitySupport:z2,ContentWidgetPositionPreference:G2,CursorChangeReason:Z2,DefaultEndOfLine:Y2,EditorAutoIndentStrategy:Q2,EditorOption:J2,EndOfLinePreference:eM,EndOfLineSequence:tM,MinimapPosition:uM,MinimapSectionHeaderStyle:fM,MouseTargetType:gM,OverlayWidgetPositionPreference:_M,OverviewRulerLane:bM,GlyphMarginLane:nM,RenderLineNumbersType:wM,RenderMinimap:yM,ScrollbarVisibility:kM,ScrollType:SM,TextEditorCursorBlinkingStyle:EM,TextEditorCursorStyle:NM,TrackedRangeStickiness:RM,WrappingIndent:MM,InjectedTextCursorStops:oM,PositionAffinity:CM,ShowLightbulbIconMode:xM,ConfigurationChangedEvent:Ij,BareFontInfo:Bf,FontInfo:qM,TextModelResolvedOptions:PS,FindMatch:$w,ApplyUpdateResult:yC,EditorZoom:gr,createMultiFileDiffEditor:j0e,EditorType:F0,EditorOptions:Ja}}function vye(s,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!s(t))return!1;return!0}function nS(s,e){return typeof s=="boolean"?s:e}function xz(s,e){return typeof s=="string"?s:e}function Cye(s){const e={};for(const t of s)e[t]=!0;return e}function Dz(s,e=!1){e&&(s=s.map(function(n){return n.toLowerCase()}));const t=Cye(s);return e?function(n){return t[n.toLowerCase()]!==void 0&&t.hasOwnProperty(n.toLowerCase())}:function(n){return t[n]!==void 0&&t.hasOwnProperty(n)}}function aF(s,e,t){e=e.replace(/@@/g,"");let n=0,i;do i=!1,e=e.replace(/@(\w+)/g,function(r,a){i=!0;let l="";if(typeof s[a]=="string")l=s[a];else if(s[a]&&s[a]instanceof RegExp)l=s[a].source;else throw s[a]===void 0?Kt(s,"language definition does not contain attribute '"+a+"', used at: "+e):Kt(s,"attribute reference '"+a+"' must be a string, used at: "+e);return _f(l)?"":"(?:"+l+")"}),n++;while(i&&n<5);e=e.replace(/\x01/g,"@");const o=(s.ignoreCase?"i":"")+(s.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let a=null,l=null;return c=>(l&&a===c||(a=c,l=new RegExp(dve(s,e,c),o)),l)}return new RegExp(e,o)}function wye(s,e,t,n){if(n<0)return s;if(n<e.length)return e[n];if(n>=100){n=n-100;const i=t.split(".");if(i.unshift(t),n<i.length)return i[n]}return null}function yye(s,e,t,n){let i=-1,o=t,r=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(i=parseInt(r[3]),r[2]&&(i=i+100)),o=r[4]);let a="~",l=o;!o||o.length===0?(a="!=",l=""):/^\w*$/.test(l)?a="==":(r=o.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(a=r[1],l=r[2]));let c;if((a==="~"||a==="!~")&&/^(\w|\|)*$/.test(l)){const d=Dz(l.split("|"),s.ignoreCase);c=function(h){return a==="~"?d(h):!d(h)}}else if(a==="@"||a==="!@"){const d=s[l];if(!d)throw Kt(s,"the @ match target '"+l+"' is not defined, in rule: "+e);if(!vye(function(u){return typeof u=="string"},d))throw Kt(s,"the @ match target '"+l+"' must be an array of strings, in rule: "+e);const h=Dz(d,s.ignoreCase);c=function(u){return a==="@"?h(u):!h(u)}}else if(a==="~"||a==="!~")if(l.indexOf("$")<0){const d=aF(s,"^"+l+"$",!1);c=function(h){return a==="~"?d.test(h):!d.test(h)}}else c=function(d,h,u,f){return aF(s,"^"+lh(s,l,h,u,f)+"$",!1).test(d)};else if(l.indexOf("$")<0){const d=ad(s,l);c=function(h){return a==="=="?h===d:h!==d}}else{const d=ad(s,l);c=function(h,u,f,g,p){const _=lh(s,d,u,f,g);return a==="=="?h===_:h!==_}}return i===-1?{name:t,value:n,test:function(d,h,u,f){return c(d,d,h,u,f)}}:{name:t,value:n,test:function(d,h,u,f){const g=wye(d,h,u,i);return c(g||"",d,h,u,f)}}}function lF(s,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw Kt(s,"a 'token' attribute must be of type string, in rule: "+e);{const n={token:t.token};if(t.token.indexOf("$")>=0&&(n.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")n.bracket=1;else if(t.bracket==="@close")n.bracket=-1;else throw Kt(s,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw Kt(s,"the next state must be a string value in rule: "+e);{let i=t.next;if(!/^(@pop|@push|@popall)$/.test(i)&&(i[0]==="@"&&(i=i.substr(1)),i.indexOf("$")<0&&!hve(s,lh(s,i,"",[],""))))throw Kt(s,"the next state '"+t.next+"' is not defined in rule: "+e);n.next=i}}return typeof t.goBack=="number"&&(n.goBack=t.goBack),typeof t.switchTo=="string"&&(n.switchTo=t.switchTo),typeof t.log=="string"&&(n.log=t.log),typeof t.nextEmbedded=="string"&&(n.nextEmbedded=t.nextEmbedded,s.usesEmbedded=!0),n}}else if(Array.isArray(t)){const n=[];for(let i=0,o=t.length;i<o;i++)n[i]=lF(s,e,t[i]);return{group:n}}else if(t.cases){const n=[];for(const o in t.cases)if(t.cases.hasOwnProperty(o)){const r=lF(s,e,t.cases[o]);o==="@default"||o==="@"||o===""?n.push({test:void 0,value:r,name:o}):o==="@eos"?n.push({test:function(a,l,c,d){return d},value:r,name:o}):n.push(yye(s,e,o,r))}const i=s.defaultToken;return{test:function(o,r,a,l){for(const c of n)if(!c.test||c.test(o,r,a,l))return c.value;return i}}}else throw Kt(s,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class Sye{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let n;if(typeof t=="string")n=t;else if(t instanceof RegExp)n=t.source;else throw Kt(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=n.length>0&&n[0]==="^",this.name=this.name+": "+n,this.regex=aF(e,"^(?:"+(this.matchOnlyAtLineStart?n.substr(1):n)+")",!0)}setAction(e,t){this.action=lF(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function BY(s,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={languageId:s,includeLF:nS(e.includeLF,!1),noThrow:!1,maxStack:100,start:typeof e.start=="string"?e.start:null,ignoreCase:nS(e.ignoreCase,!1),unicode:nS(e.unicode,!1),tokenPostfix:xz(e.tokenPostfix,"."+s),defaultToken:xz(e.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},n=e;n.languageId=s,n.includeLF=t.includeLF,n.ignoreCase=t.ignoreCase,n.unicode=t.unicode,n.noThrow=t.noThrow,n.usesEmbedded=t.usesEmbedded,n.stateNames=e.tokenizer,n.defaultToken=t.defaultToken;function i(r,a,l){for(const c of l){let d=c.include;if(d){if(typeof d!="string")throw Kt(t,"an 'include' attribute must be a string at: "+r);if(d[0]==="@"&&(d=d.substr(1)),!e.tokenizer[d])throw Kt(t,"include target '"+d+"' is not defined at: "+r);i(r+"."+d,a,e.tokenizer[d])}else{const h=new Sye(r);if(Array.isArray(c)&&c.length>=1&&c.length<=3)if(h.setRegex(n,c[0]),c.length>=3)if(typeof c[1]=="string")h.setAction(n,{token:c[1],next:c[2]});else if(typeof c[1]=="object"){const u=c[1];u.next=c[2],h.setAction(n,u)}else throw Kt(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else h.setAction(n,c[1]);else{if(!c.regex)throw Kt(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r);c.name&&typeof c.name=="string"&&(h.name=c.name),c.matchOnlyAtStart&&(h.matchOnlyAtLineStart=nS(c.matchOnlyAtLineStart,!1)),h.setRegex(n,c.regex),h.setAction(n,c.action)}a.push(h)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw Kt(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const r in e.tokenizer)if(e.tokenizer.hasOwnProperty(r)){t.start||(t.start=r);const a=e.tokenizer[r];t.tokenizer[r]=new Array,i("tokenizer."+r,t.tokenizer[r],a)}if(t.usesEmbedded=n.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw Kt(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const o=[];for(const r of e.brackets){let a=r;if(a&&Array.isArray(a)&&a.length===3&&(a={token:a[2],open:a[0],close:a[1]}),a.open===a.close)throw Kt(t,"open and close brackets in a 'brackets' attribute must be different: "+a.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof a.open=="string"&&typeof a.token=="string"&&typeof a.close=="string")o.push({token:a.token+t.tokenPostfix,open:ad(t,a.open),close:ad(t,a.close)});else throw Kt(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=o,t.noThrow=!0,t}function kye(s){ab.registerLanguage(s)}function Lye(){let s=[];return s=s.concat(ab.getLanguages()),s}function xye(s){return Ne.get(tn).languageIdCodec.encodeLanguageId(s)}function Dye(s,e){return Ne.withServices(()=>{const n=Ne.get(tn).onDidRequestRichLanguageFeatures(i=>{i===s&&(n.dispose(),e())});return n})}function Iye(s,e){return Ne.withServices(()=>{const n=Ne.get(tn).onDidRequestBasicLanguageFeatures(i=>{i===s&&(n.dispose(),e())});return n})}function Tye(s,e){if(!Ne.get(tn).isRegisteredLanguageId(s))throw new Error(`Cannot set configuration for unknown language ${s}`);return Ne.get(cn).register(s,e,100)}class Eye{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,n){if(typeof this._actual.tokenize=="function")return A1.adaptTokenize(this._languageId,this._actual,e,n);throw new Error("Not supported!")}tokenizeEncoded(e,t,n){const i=this._actual.tokenizeEncoded(e,n);return new fT(i.tokens,i.endState)}}class A1{constructor(e,t,n,i){this._languageId=e,this._actual=t,this._languageService=n,this._standaloneThemeService=i}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const n=[];let i=0;for(let o=0,r=e.length;o<r;o++){const a=e[o];let l=a.startIndex;o===0?l=0:l<i&&(l=i),n[o]=new Aw(l,a.scopes,t),i=l}return n}static adaptTokenize(e,t,n,i){const o=t.tokenize(n,i),r=A1._toClassicTokens(o.tokens,e);let a;return o.endState.equals(i)?a=i:a=o.endState,new R3(r,a)}tokenize(e,t,n){return A1.adaptTokenize(this._languageId,this._actual,e,n)}_toBinaryTokens(e,t){const n=e.encodeLanguageId(this._languageId),i=this._standaloneThemeService.getColorTheme().tokenTheme,o=[];let r=0,a=0;for(let c=0,d=t.length;c<d;c++){const h=t[c],u=i.match(n,h.scopes)|1024;if(r>0&&o[r-1]===u)continue;let f=h.startIndex;c===0?f=0:f<a&&(f=a),o[r++]=f,o[r++]=u,a=f}const l=new Uint32Array(r);for(let c=0;c<r;c++)l[c]=o[c];return l}tokenizeEncoded(e,t,n){const i=this._actual.tokenize(e,n),o=this._toBinaryTokens(this._languageService.languageIdCodec,i.tokens);let r;return i.endState.equals(n)?r=n:r=i.endState,new fT(o,r)}}function Nye(s){return typeof s.getInitialState=="function"}function Rye(s){return"tokenizeEncoded"in s}function HY(s){return s&&typeof s.then=="function"}function Mye(s){const e=Ne.get(rr);if(s){const t=[null];for(let n=1,i=s.length;n<i;n++)t[n]=Z.fromHex(s[n]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function VY(s,e){return Rye(e)?new Eye(s,e):new A1(s,e,Ne.get(tn),Ne.get(rr))}function sB(s,e){const t=new lie(async()=>{const n=await Promise.resolve(e.create());return n?Nye(n)?VY(s,n):new y1(Ne.get(tn),Ne.get(rr),s,BY(s,n),Ne.get(Ze)):null});return mn.registerFactory(s,t)}function Aye(s,e){if(!Ne.get(tn).isRegisteredLanguageId(s))throw new Error(`Cannot set tokens provider for unknown language ${s}`);return HY(e)?sB(s,{create:()=>e}):mn.register(s,VY(s,e))}function Pye(s,e){const t=n=>new y1(Ne.get(tn),Ne.get(rr),s,BY(s,n),Ne.get(Ze));return HY(e)?sB(s,{create:()=>e}):mn.register(s,t(e))}function Oye(s,e){return Ne.get(ue).referenceProvider.register(s,e)}function Fye(s,e){return Ne.get(ue).renameProvider.register(s,e)}function Wye(s,e){return Ne.get(ue).newSymbolNamesProvider.register(s,e)}function Bye(s,e){return Ne.get(ue).signatureHelpProvider.register(s,e)}function Hye(s,e){return Ne.get(ue).hoverProvider.register(s,{provideHover:async(n,i,o,r)=>{const a=n.getWordAtPosition(i);return Promise.resolve(e.provideHover(n,i,o,r)).then(l=>{if(l)return!l.range&&a&&(l.range=new L(i.lineNumber,a.startColumn,i.lineNumber,a.endColumn)),l.range||(l.range=new L(i.lineNumber,i.column,i.lineNumber,i.column)),l})}})}function Vye(s,e){return Ne.get(ue).documentSymbolProvider.register(s,e)}function zye(s,e){return Ne.get(ue).documentHighlightProvider.register(s,e)}function $ye(s,e){return Ne.get(ue).linkedEditingRangeProvider.register(s,e)}function Uye(s,e){return Ne.get(ue).definitionProvider.register(s,e)}function jye(s,e){return Ne.get(ue).implementationProvider.register(s,e)}function qye(s,e){return Ne.get(ue).typeDefinitionProvider.register(s,e)}function Kye(s,e){return Ne.get(ue).codeLensProvider.register(s,e)}function Gye(s,e,t){return Ne.get(ue).codeActionProvider.register(s,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(i,o,r,a)=>{const c=Ne.get(rc).read({resource:i.uri}).filter(d=>L.areIntersectingOrTouching(d,o));return e.provideCodeActions(i,o,{markers:c,only:r.only,trigger:r.trigger},a)},resolveCodeAction:e.resolveCodeAction})}function Zye(s,e){return Ne.get(ue).documentFormattingEditProvider.register(s,e)}function Yye(s,e){return Ne.get(ue).documentRangeFormattingEditProvider.register(s,e)}function Xye(s,e){return Ne.get(ue).onTypeFormattingEditProvider.register(s,e)}function Qye(s,e){return Ne.get(ue).linkProvider.register(s,e)}function Jye(s,e){return Ne.get(ue).completionProvider.register(s,e)}function eSe(s,e){return Ne.get(ue).colorProvider.register(s,e)}function tSe(s,e){return Ne.get(ue).foldingRangeProvider.register(s,e)}function nSe(s,e){return Ne.get(ue).declarationProvider.register(s,e)}function iSe(s,e){return Ne.get(ue).selectionRangeProvider.register(s,e)}function sSe(s,e){return Ne.get(ue).documentSemanticTokensProvider.register(s,e)}function oSe(s,e){return Ne.get(ue).documentRangeSemanticTokensProvider.register(s,e)}function rSe(s,e){return Ne.get(ue).inlineCompletionsProvider.register(s,e)}function aSe(s,e){return Ne.get(ue).inlineEditProvider.register(s,e)}function lSe(s,e){return Ne.get(ue).inlayHintsProvider.register(s,e)}function cSe(){return{register:kye,getLanguages:Lye,onLanguage:Dye,onLanguageEncountered:Iye,getEncodedLanguageId:xye,setLanguageConfiguration:Tye,setColorMap:Mye,registerTokensProviderFactory:sB,setTokensProvider:Aye,setMonarchTokensProvider:Pye,registerReferenceProvider:Oye,registerRenameProvider:Fye,registerNewSymbolNameProvider:Wye,registerCompletionItemProvider:Jye,registerSignatureHelpProvider:Bye,registerHoverProvider:Hye,registerDocumentSymbolProvider:Vye,registerDocumentHighlightProvider:zye,registerLinkedEditingRangeProvider:$ye,registerDefinitionProvider:Uye,registerImplementationProvider:jye,registerTypeDefinitionProvider:qye,registerCodeLensProvider:Kye,registerCodeActionProvider:Gye,registerDocumentFormattingEditProvider:Zye,registerDocumentRangeFormattingEditProvider:Yye,registerOnTypeFormattingEditProvider:Xye,registerLinkProvider:Qye,registerColorProvider:eSe,registerFoldingRangeProvider:tSe,registerDeclarationProvider:nSe,registerSelectionRangeProvider:iSe,registerDocumentSemanticTokensProvider:sSe,registerDocumentRangeSemanticTokensProvider:oSe,registerInlineCompletionsProvider:rSe,registerInlineEditProvider:aSe,registerInlayHintsProvider:lSe,DocumentHighlightKind:X2,CompletionItemKind:j2,CompletionItemTag:q2,CompletionItemInsertTextRule:U2,SymbolKind:IM,SymbolTag:TM,IndentAction:sM,CompletionTriggerKind:K2,SignatureHelpTriggerKind:DM,InlayHintKind:rM,InlineCompletionTriggerKind:aM,InlineEditTriggerKind:lM,CodeActionTriggerType:$2,NewSymbolNameTag:mM,NewSymbolNameTriggerKind:pM,PartialAcceptTriggerKind:vM,HoverVerbosityAction:iM,FoldingRangeKind:su,SelectedSuggestionInfo:Uj}}const oB=tt("IEditorCancelService"),zY=new le("cancellableOperation",!1,m("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));st(oB,class{constructor(){this._tokens=new WeakMap}add(s,e){let t=this._tokens.get(s);t||(t=s.invokeWithinContext(i=>{const o=zY.bindTo(i.get(Ie)),r=new vs;return{key:o,tokens:r}}),this._tokens.set(s,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(s){const e=this._tokens.get(s);if(!e)return;const t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);class dSe extends an{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext(n=>n.get(oB).add(e,this))}dispose(){this._unregister(),super.dispose()}}oe(new class extends Zn{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:zY})}runEditorCommand(s,e){s.get(oB).cancel(e)}});let $Y=class cF{constructor(e,t){if(this.flags=t,this.flags&1){const n=e.getModel();this.modelVersionId=n?Gg("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof cF))return!1;const t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new cF(e,this.flags))}};class _u extends dSe{constructor(e,t,n,i){super(e,i),this._listener=new q,t&4&&this._listener.add(e.onDidChangeCursorPosition(o=>{(!n||!L.containsPosition(n,o.position))&&this.cancel()})),t&2&&this._listener.add(e.onDidChangeCursorSelection(o=>{(!n||!L.containsRange(n,o.selection))&&this.cancel()})),t&8&&this._listener.add(e.onDidScrollChange(o=>this.cancel())),t&1&&(this._listener.add(e.onDidChangeModel(o=>this.cancel())),this._listener.add(e.onDidChangeModelContent(o=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}class rB extends an{constructor(e,t){super(t),this._listener=e.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}function ec(s){return s&&typeof s.getEditorType=="function"?s.getEditorType()===F0.ICodeEditor:!1}function aB(s){return s&&typeof s.getEditorType=="function"?s.getEditorType()===F0.IDiffEditor:!1}function hSe(s){return!!s&&typeof s=="object"&&typeof s.onDidChangeActiveEditor=="function"}function UY(s){return ec(s)?s:aB(s)?s.getModifiedEditor():hSe(s)&&ec(s.activeCodeEditor)?s.activeCodeEditor:null}class Ib{static _handleEolEdits(e,t){let n;const i=[];for(const o of t)typeof o.eol=="number"&&(n=o.eol),o.range&&typeof o.text=="string"&&i.push(o);return typeof n=="number"&&e.hasModel()&&e.getModel().pushEOL(n),i}static _isFullModelReplaceEdit(e,t){if(!e.hasModel())return!1;const n=e.getModel(),i=n.validateRange(t.range);return n.getFullModelRange().equalsRange(i)}static execute(e,t,n){n&&e.pushUndoStop();const i=Qa.capture(e),o=Ib._handleEolEdits(e,t);o.length===1&&Ib._isFullModelReplaceEdit(e,o[0])?e.executeEdits("formatEditsCommand",o.map(r=>on.replace(L.lift(r.range),r.text))):e.executeEdits("formatEditsCommand",o.map(r=>on.replaceMove(L.lift(r.range),r.text))),n&&e.pushUndoStop(),i.restoreRelativeVerticalPositionOfCursor(e)}}class Iz{constructor(e){this.value=e,this._lower=e.toLowerCase()}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class uSe{constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(Iz.toKey(e))}has(e){return this._set.has(Iz.toKey(e))}}function jY(s,e,t){const n=[],i=new uSe,o=s.ordered(t);for(const a of o)n.push(a),a.extensionId&&i.add(a.extensionId);const r=e.ordered(t);for(const a of r){if(a.extensionId){if(i.has(a.extensionId))continue;i.add(a.extensionId)}n.push({displayName:a.displayName,extensionId:a.extensionId,provideDocumentFormattingEdits(l,c,d){return a.provideDocumentRangeFormattingEdits(l,l.getFullModelRange(),c,d)}})}return n}const yw=class yw{static setFormatterSelector(e){return{dispose:yw._selectors.unshift(e)}}static async select(e,t,n,i){if(e.length===0)return;const o=ot.first(yw._selectors);if(o)return await o(e,t,n,i)}};yw._selectors=new vs;let P1=yw;async function qY(s,e,t,n,i,o,r){const a=s.get(Ce),{documentRangeFormattingEditProvider:l}=s.get(ue),c=ec(e)?e.getModel():e,d=l.ordered(c),h=await P1.select(d,c,n,2);h&&(i.report(h),await a.invokeFunction(fSe,h,e,t,o,r))}async function fSe(s,e,t,n,i,o){var b,v;const r=s.get(to),a=s.get(Hi),l=s.get(Iu);let c,d;ec(t)?(c=t.getModel(),d=new _u(t,5,void 0,i)):(c=t,d=new rB(t,i));const h=[];let u=0;for(const C of w3(n).sort(L.compareRangesUsingStarts))u>0&&L.areIntersectingOrTouching(h[u-1],C)?h[u-1]=L.fromPositions(h[u-1].getStartPosition(),C.getEndPosition()):u=h.push(C);const f=async C=>{var y,k;a.trace("[format][provideDocumentRangeFormattingEdits] (request)",(y=e.extensionId)==null?void 0:y.value,C);const w=await e.provideDocumentRangeFormattingEdits(c,C,c.getFormattingOptions(),d.token)||[];return a.trace("[format][provideDocumentRangeFormattingEdits] (response)",(k=e.extensionId)==null?void 0:k.value,w),w},g=(C,w)=>{if(!C.length||!w.length)return!1;const y=C.reduce((k,x)=>L.plusRange(k,x.range),C[0].range);if(!w.some(k=>L.intersectRanges(y,k.range)))return!1;for(const k of C)for(const x of w)if(L.intersectRanges(k.range,x.range))return!0;return!1},p=[],_=[];try{if(typeof e.provideDocumentRangesFormattingEdits=="function"){a.trace("[format][provideDocumentRangeFormattingEdits] (request)",(b=e.extensionId)==null?void 0:b.value,h);const C=await e.provideDocumentRangesFormattingEdits(c,h,c.getFormattingOptions(),d.token)||[];a.trace("[format][provideDocumentRangeFormattingEdits] (response)",(v=e.extensionId)==null?void 0:v.value,C),_.push(C)}else{for(const C of h){if(d.token.isCancellationRequested)return!0;_.push(await f(C))}for(let C=0;C<h.length;++C)for(let w=C+1;w<h.length;++w){if(d.token.isCancellationRequested)return!0;if(g(_[C],_[w])){const y=L.plusRange(h[C],h[w]),k=await f(y);h.splice(w,1),h.splice(C,1),h.push(y),_.splice(w,1),_.splice(C,1),_.push(k),C=0,w=0}}}for(const C of _){if(d.token.isCancellationRequested)return!0;const w=await r.computeMoreMinimalEdits(c.uri,C);w&&p.push(...w)}}finally{d.dispose()}if(p.length===0)return!1;if(ec(t))Ib.execute(t,p,!0),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:C}]=p,w=new me(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn);c.pushEditOperations([w],p.map(y=>({text:y.text,range:L.lift(y.range),forceMoveMarkers:!0})),y=>{for(const{range:k}of y)if(L.areIntersectingOrTouching(k,w))return[new me(k.startLineNumber,k.startColumn,k.endLineNumber,k.endColumn)];return null})}return l.playSignal(Fo.format,{userGesture:o}),!0}async function gSe(s,e,t,n,i,o){const r=s.get(Ce),a=s.get(ue),l=ec(e)?e.getModel():e,c=jY(a.documentFormattingEditProvider,a.documentRangeFormattingEditProvider,l),d=await P1.select(c,l,t,1);d&&(n.report(d),await r.invokeFunction(mSe,d,e,t,i,o))}async function mSe(s,e,t,n,i,o){const r=s.get(to),a=s.get(Iu);let l,c;ec(t)?(l=t.getModel(),c=new _u(t,5,void 0,i)):(l=t,c=new rB(t,i));let d;try{const h=await e.provideDocumentFormattingEdits(l,l.getFormattingOptions(),c.token);if(d=await r.computeMoreMinimalEdits(l.uri,h),c.token.isCancellationRequested)return!0}finally{c.dispose()}if(!d||d.length===0)return!1;if(ec(t))Ib.execute(t,d,n!==2),n!==2&&t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1);else{const[{range:h}]=d,u=new me(h.startLineNumber,h.startColumn,h.endLineNumber,h.endColumn);l.pushEditOperations([u],d.map(f=>({text:f.text,range:L.lift(f.range),forceMoveMarkers:!0})),f=>{for(const{range:g}of f)if(L.areIntersectingOrTouching(g,u))return[new me(g.startLineNumber,g.startColumn,g.endLineNumber,g.endColumn)];return null})}return a.playSignal(Fo.format,{userGesture:o}),!0}async function pSe(s,e,t,n,i,o){const r=e.documentRangeFormattingEditProvider.ordered(t);for(const a of r){const l=await Promise.resolve(a.provideDocumentRangeFormattingEdits(t,n,i,o)).catch(kn);if(cs(l))return await s.computeMoreMinimalEdits(t.uri,l)}}async function _Se(s,e,t,n,i){const o=jY(e.documentFormattingEditProvider,e.documentRangeFormattingEditProvider,t);for(const r of o){const a=await Promise.resolve(r.provideDocumentFormattingEdits(t,n,i)).catch(kn);if(cs(a))return await s.computeMoreMinimalEdits(t.uri,a)}}function KY(s,e,t,n,i,o,r){const a=e.onTypeFormattingEditProvider.ordered(t);return a.length===0||a[0].autoFormatTriggerCharacters.indexOf(i)<0?Promise.resolve(void 0):Promise.resolve(a[0].provideOnTypeFormattingEdits(t,n,i,o,r)).catch(kn).then(l=>s.computeMoreMinimalEdits(t.uri,l))}rt.registerCommand("_executeFormatRangeProvider",async function(s,...e){const[t,n,i]=e;gt(Se.isUri(t)),gt(L.isIRange(n));const o=s.get(Qs),r=s.get(to),a=s.get(ue),l=await o.createModelReference(t);try{return pSe(r,a,l.object.textEditorModel,L.lift(n),i,Ue.None)}finally{l.dispose()}});rt.registerCommand("_executeFormatDocumentProvider",async function(s,...e){const[t,n]=e;gt(Se.isUri(t));const i=s.get(Qs),o=s.get(to),r=s.get(ue),a=await i.createModelReference(t);try{return _Se(o,r,a.object.textEditorModel,n,Ue.None)}finally{a.dispose()}});rt.registerCommand("_executeFormatOnTypeProvider",async function(s,...e){const[t,n,i,o]=e;gt(Se.isUri(t)),gt(A.isIPosition(n)),gt(typeof i=="string");const r=s.get(Qs),a=s.get(to),l=s.get(ue),c=await r.createModelReference(t);try{return KY(a,l,c.object.textEditorModel,A.lift(n),i,o,Ue.None)}finally{c.dispose()}});Ja.wrappingIndent.defaultValue=0;Ja.glyphMargin.defaultValue=!1;Ja.autoIndent.defaultValue=3;Ja.overviewRulerLanes.defaultValue=2;P1.setFormatterSelector((s,e,t)=>Promise.resolve(s[0]));const As=jj();As.editor=bye();As.languages=cSe();const bSe=As.CancellationTokenSource,vSe=As.Emitter,CSe=As.KeyCode,wSe=As.KeyMod,ySe=As.Position,SSe=As.Range,kSe=As.Selection,LSe=As.SelectionDirection,xSe=As.MarkerSeverity,DSe=As.MarkerTag,ISe=As.Uri,TSe=As.Token,GY=As.editor,yE=As.languages,FR=globalThis.MonacoEnvironment;(FR!=null&&FR.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=As);typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]});const V0=Object.freeze(Object.defineProperty({__proto__:null,CancellationTokenSource:bSe,Emitter:vSe,KeyCode:CSe,KeyMod:wSe,MarkerSeverity:xSe,MarkerTag:DSe,Position:ySe,Range:SSe,Selection:kSe,SelectionDirection:LSe,Token:TSe,Uri:ISe,editor:GY,languages:yE},Symbol.toStringTag,{value:"Module"}));/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.0(f6dc0eb8fce67e57f6036f4769d92c1666cdf546)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var ESe=Object.defineProperty,NSe=Object.getOwnPropertyDescriptor,RSe=Object.getOwnPropertyNames,MSe=Object.prototype.hasOwnProperty,ASe=(s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of RSe(e))!MSe.call(s,i)&&i!==t&&ESe(s,i,{get:()=>e[i],enumerable:!(n=NSe(e,i))||n.enumerable});return s},PSe=(s,e,t)=>(ASe(s,e,"default"),t),dC={};PSe(dC,V0);var ZY={},WR={},OSe=class YY{static getOrCreate(e){return WR[e]||(WR[e]=new YY(e)),WR[e]}constructor(e){this._languageId=e,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((t,n)=>{this._lazyLoadPromiseResolve=t,this._lazyLoadPromiseReject=n})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,ZY[this._languageId].loader().then(e=>this._lazyLoadPromiseResolve(e),e=>this._lazyLoadPromiseReject(e))),this._lazyLoadPromise}};function xe(s){const e=s.id;ZY[e]=s,dC.languages.register(s);const t=OSe.getOrCreate(e);dC.languages.registerTokensProviderFactory(e,{create:async()=>(await t.load()).language}),dC.languages.onLanguageEncountered(e,async()=>{const n=await t.load();dC.languages.setLanguageConfiguration(e,n.conf)})}xe({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>ye(()=>import("./abap.chunk.js"),[],import.meta.url)});xe({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>ye(()=>import("./apex.chunk.js"),[],import.meta.url)});xe({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>ye(()=>import("./azcli.chunk.js"),[],import.meta.url)});xe({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>ye(()=>import("./bat.chunk.js"),[],import.meta.url)});xe({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>ye(()=>import("./bicep.chunk.js"),[],import.meta.url)});xe({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>ye(()=>import("./cameligo.chunk.js"),[],import.meta.url)});xe({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>ye(()=>import("./clojure.chunk.js"),[],import.meta.url)});xe({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>ye(()=>import("./coffee.chunk.js"),[],import.meta.url)});xe({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>ye(()=>import("./cpp.chunk.js"),[],import.meta.url)});xe({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>ye(()=>import("./cpp.chunk.js"),[],import.meta.url)});xe({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>ye(()=>import("./csharp.chunk.js"),[],import.meta.url)});xe({id:"csp",extensions:[".csp"],aliases:["CSP","csp"],loader:()=>ye(()=>import("./csp.chunk.js"),[],import.meta.url)});xe({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>ye(()=>import("./css.chunk.js"),[],import.meta.url)});xe({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>ye(()=>import("./cypher.chunk.js"),[],import.meta.url)});xe({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>ye(()=>import("./dart.chunk.js"),[],import.meta.url)});xe({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>ye(()=>import("./dockerfile.chunk.js"),[],import.meta.url)});xe({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>ye(()=>import("./ecl.chunk.js"),[],import.meta.url)});xe({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>ye(()=>import("./elixir.chunk.js"),[],import.meta.url)});xe({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>ye(()=>import("./flow9.chunk.js"),[],import.meta.url)});xe({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>ye(()=>import("./fsharp.chunk.js"),[],import.meta.url)});xe({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>ye(()=>import("./freemarker2.chunk.js"),[],import.meta.url).then(s=>s.TagAutoInterpolationDollar)});xe({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>ye(()=>import("./freemarker2.chunk.js"),[],import.meta.url).then(s=>s.TagAngleInterpolationDollar)});xe({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>ye(()=>import("./freemarker2.chunk.js"),[],import.meta.url).then(s=>s.TagBracketInterpolationDollar)});xe({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>ye(()=>import("./freemarker2.chunk.js"),[],import.meta.url).then(s=>s.TagAngleInterpolationBracket)});xe({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>ye(()=>import("./freemarker2.chunk.js"),[],import.meta.url).then(s=>s.TagBracketInterpolationBracket)});xe({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>ye(()=>import("./freemarker2.chunk.js"),[],import.meta.url).then(s=>s.TagAutoInterpolationDollar)});xe({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>ye(()=>import("./freemarker2.chunk.js"),[],import.meta.url).then(s=>s.TagAutoInterpolationBracket)});xe({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>ye(()=>import("./go.chunk.js"),[],import.meta.url)});xe({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>ye(()=>import("./graphql.chunk.js"),[],import.meta.url)});xe({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>ye(()=>import("./handlebars.chunk.js"),[],import.meta.url)});xe({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>ye(()=>import("./hcl.chunk.js"),[],import.meta.url)});xe({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>ye(()=>import("./html.chunk.js"),[],import.meta.url)});xe({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>ye(()=>import("./ini.chunk.js"),[],import.meta.url)});xe({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>ye(()=>import("./java.chunk.js"),[],import.meta.url)});xe({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>ye(()=>import("./javascript.chunk.js"),__vite__mapDeps([0,1]),import.meta.url)});xe({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>ye(()=>import("./julia.chunk.js"),[],import.meta.url)});xe({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>ye(()=>import("./kotlin.chunk.js"),[],import.meta.url)});xe({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>ye(()=>import("./less.chunk.js"),[],import.meta.url)});xe({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>ye(()=>import("./lexon.chunk.js"),[],import.meta.url)});xe({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>ye(()=>import("./lua.chunk.js"),[],import.meta.url)});xe({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>ye(()=>import("./liquid.chunk.js"),[],import.meta.url)});xe({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>ye(()=>import("./m3.chunk.js"),[],import.meta.url)});xe({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>ye(()=>import("./markdown.chunk.js"),[],import.meta.url)});xe({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>ye(()=>import("./mdx.chunk.js"),[],import.meta.url)});xe({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>ye(()=>import("./mips.chunk.js"),[],import.meta.url)});xe({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>ye(()=>import("./msdax.chunk.js"),[],import.meta.url)});xe({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>ye(()=>import("./mysql.chunk.js"),[],import.meta.url)});xe({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>ye(()=>import("./objective-c.chunk.js"),[],import.meta.url)});xe({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>ye(()=>import("./pascal.chunk.js"),[],import.meta.url)});xe({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>ye(()=>import("./pascaligo.chunk.js"),[],import.meta.url)});xe({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>ye(()=>import("./perl.chunk.js"),[],import.meta.url)});xe({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>ye(()=>import("./pgsql.chunk.js"),[],import.meta.url)});xe({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>ye(()=>import("./php.chunk.js"),[],import.meta.url)});xe({id:"pla",extensions:[".pla"],loader:()=>ye(()=>import("./pla.chunk.js"),[],import.meta.url)});xe({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>ye(()=>import("./postiats.chunk.js"),[],import.meta.url)});xe({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>ye(()=>import("./powerquery.chunk.js"),[],import.meta.url)});xe({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>ye(()=>import("./powershell.chunk.js"),[],import.meta.url)});xe({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>ye(()=>import("./protobuf.chunk.js"),[],import.meta.url)});xe({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>ye(()=>import("./pug.chunk.js"),[],import.meta.url)});xe({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>ye(()=>import("./python.chunk.js"),[],import.meta.url)});xe({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>ye(()=>import("./qsharp.chunk.js"),[],import.meta.url)});xe({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>ye(()=>import("./r.chunk.js"),[],import.meta.url)});xe({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>ye(()=>import("./razor.chunk.js"),[],import.meta.url)});xe({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>ye(()=>import("./redis.chunk.js"),[],import.meta.url)});xe({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>ye(()=>import("./redshift.chunk.js"),[],import.meta.url)});xe({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>ye(()=>import("./restructuredtext.chunk.js"),[],import.meta.url)});xe({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>ye(()=>import("./ruby.chunk.js"),[],import.meta.url)});xe({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>ye(()=>import("./rust.chunk.js"),[],import.meta.url)});xe({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>ye(()=>import("./sb.chunk.js"),[],import.meta.url)});xe({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>ye(()=>import("./scala.chunk.js"),[],import.meta.url)});xe({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>ye(()=>import("./scheme.chunk.js"),[],import.meta.url)});xe({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>ye(()=>import("./scss.chunk.js"),[],import.meta.url)});xe({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>ye(()=>import("./shell.chunk.js"),[],import.meta.url)});xe({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>ye(()=>import("./solidity.chunk.js"),[],import.meta.url)});xe({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>ye(()=>import("./sophia.chunk.js"),[],import.meta.url)});xe({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>ye(()=>import("./sparql.chunk.js"),[],import.meta.url)});xe({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>ye(()=>import("./sql.chunk.js"),[],import.meta.url)});xe({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>ye(()=>import("./st.chunk.js"),[],import.meta.url)});xe({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>ye(()=>import("./swift.chunk.js"),[],import.meta.url)});xe({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>ye(()=>import("./systemverilog.chunk.js"),[],import.meta.url)});xe({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>ye(()=>import("./systemverilog.chunk.js"),[],import.meta.url)});xe({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>ye(()=>import("./tcl.chunk.js"),[],import.meta.url)});xe({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>ye(()=>import("./twig.chunk.js"),[],import.meta.url)});xe({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>ye(()=>import("./typescript.chunk.js"),[],import.meta.url)});xe({id:"typespec",extensions:[".tsp"],aliases:["TypeSpec"],loader:()=>ye(()=>import("./typespec.chunk.js"),[],import.meta.url)});xe({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>ye(()=>import("./vb.chunk.js"),[],import.meta.url)});xe({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>ye(()=>import("./wgsl.chunk.js"),[],import.meta.url)});xe({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>ye(()=>import("./xml.chunk.js"),[],import.meta.url)});xe({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>ye(()=>import("./yaml.chunk.js"),[],import.meta.url)});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.0(f6dc0eb8fce67e57f6036f4769d92c1666cdf546)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var FSe=Object.defineProperty,WSe=Object.getOwnPropertyDescriptor,BSe=Object.getOwnPropertyNames,HSe=Object.prototype.hasOwnProperty,VSe=(s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of BSe(e))!HSe.call(s,i)&&i!==t&&FSe(s,i,{get:()=>e[i],enumerable:!(n=WSe(e,i))||n.enumerable});return s},zSe=(s,e,t)=>(VSe(s,e,"default"),t),fv={};zSe(fv,V0);var lB=class{constructor(e,t,n){this._onDidChange=new fv.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(e){this.setOptions(e)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},cB={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},dB={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},XY=new lB("css",cB,dB),QY=new lB("scss",cB,dB),JY=new lB("less",cB,dB);fv.languages.css={cssDefaults:XY,lessDefaults:JY,scssDefaults:QY};function hB(){return ye(()=>import("./cssMode.chunk.js"),[],import.meta.url)}fv.languages.onLanguage("less",()=>{hB().then(s=>s.setupMode(JY))});fv.languages.onLanguage("scss",()=>{hB().then(s=>s.setupMode(QY))});fv.languages.onLanguage("css",()=>{hB().then(s=>s.setupMode(XY))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.0(f6dc0eb8fce67e57f6036f4769d92c1666cdf546)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var $Se=Object.defineProperty,USe=Object.getOwnPropertyDescriptor,jSe=Object.getOwnPropertyNames,qSe=Object.prototype.hasOwnProperty,KSe=(s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of jSe(e))!qSe.call(s,i)&&i!==t&&$Se(s,i,{get:()=>e[i],enumerable:!(n=USe(e,i))||n.enumerable});return s},GSe=(s,e,t)=>(KSe(s,e,"default"),t),SE={};GSe(SE,V0);var ZSe=class{constructor(e,t,n){this._onDidChange=new SE.Emitter,this._languageId=e,this.setOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(e){this._options=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},YSe={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},kE={format:YSe,suggest:{},data:{useDefaultDataProvider:!0}};function LE(s){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:s===XC,documentFormattingEdits:s===XC,documentRangeFormattingEdits:s===XC}}var XC="html",Tz="handlebars",Ez="razor",eX=xE(XC,kE,LE(XC)),XSe=eX.defaults,tX=xE(Tz,kE,LE(Tz)),QSe=tX.defaults,nX=xE(Ez,kE,LE(Ez)),JSe=nX.defaults;SE.languages.html={htmlDefaults:XSe,razorDefaults:JSe,handlebarDefaults:QSe,htmlLanguageService:eX,handlebarLanguageService:tX,razorLanguageService:nX,registerHTMLLanguageService:xE};function eke(){return ye(()=>import("./htmlMode.chunk.js"),[],import.meta.url)}function xE(s,e=kE,t=LE(s)){const n=new ZSe(s,e,t);let i;const o=SE.languages.onLanguage(s,async()=>{i=(await eke()).setupMode(n)});return{defaults:n,dispose(){o.dispose(),i==null||i.dispose(),i=void 0}}}/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.0(f6dc0eb8fce67e57f6036f4769d92c1666cdf546)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var tke=Object.defineProperty,nke=Object.getOwnPropertyDescriptor,ike=Object.getOwnPropertyNames,ske=Object.prototype.hasOwnProperty,oke=(s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of ike(e))!ske.call(s,i)&&i!==t&&tke(s,i,{get:()=>e[i],enumerable:!(n=nke(e,i))||n.enumerable});return s},rke=(s,e,t)=>(oke(s,e,"default"),t),z0={};rke(z0,V0);var ake=class{constructor(e,t,n){this._onDidChange=new z0.Emitter,this._languageId=e,this.setDiagnosticsOptions(t),this.setModeConfiguration(n)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(this)}},lke={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},cke={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},iX=new ake("json",lke,cke),dke=()=>sX().then(s=>s.getWorker());z0.languages.json={jsonDefaults:iX,getWorker:dke};function sX(){return ye(()=>import("./jsonMode.chunk.js"),[],import.meta.url)}z0.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});z0.languages.onLanguage("json",()=>{sX().then(s=>s.setupMode(iX))});/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.52.0(f6dc0eb8fce67e57f6036f4769d92c1666cdf546)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/var hke=Object.defineProperty,uke=Object.getOwnPropertyDescriptor,fke=Object.getOwnPropertyNames,gke=Object.prototype.hasOwnProperty,mke=(s,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of fke(e))!gke.call(s,i)&&i!==t&&hke(s,i,{get:()=>e[i],enumerable:!(n=uke(e,i))||n.enumerable});return s},pke=(s,e,t)=>(mke(s,e,"default"),t),_ke="5.4.5",Tb={};pke(Tb,V0);var oX=(s=>(s[s.None=0]="None",s[s.CommonJS=1]="CommonJS",s[s.AMD=2]="AMD",s[s.UMD=3]="UMD",s[s.System=4]="System",s[s.ES2015=5]="ES2015",s[s.ESNext=99]="ESNext",s))(oX||{}),rX=(s=>(s[s.None=0]="None",s[s.Preserve=1]="Preserve",s[s.React=2]="React",s[s.ReactNative=3]="ReactNative",s[s.ReactJSX=4]="ReactJSX",s[s.ReactJSXDev=5]="ReactJSXDev",s))(rX||{}),aX=(s=>(s[s.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",s[s.LineFeed=1]="LineFeed",s))(aX||{}),lX=(s=>(s[s.ES3=0]="ES3",s[s.ES5=1]="ES5",s[s.ES2015=2]="ES2015",s[s.ES2016=3]="ES2016",s[s.ES2017=4]="ES2017",s[s.ES2018=5]="ES2018",s[s.ES2019=6]="ES2019",s[s.ES2020=7]="ES2020",s[s.ESNext=99]="ESNext",s[s.JSON=100]="JSON",s[s.Latest=99]="Latest",s))(lX||{}),cX=(s=>(s[s.Classic=1]="Classic",s[s.NodeJs=2]="NodeJs",s))(cX||{}),dX=class{constructor(s,e,t,n,i){this._onDidChange=new Tb.Emitter,this._onDidExtraLibsChange=new Tb.Emitter,this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(s),this.setDiagnosticsOptions(e),this.setWorkerOptions(t),this.setInlayHintsOptions(n),this.setModeConfiguration(i),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(s,e){let t;if(typeof e>"u"?t=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:t=e,this._extraLibs[t]&&this._extraLibs[t].content===s)return{dispose:()=>{}};let n=1;return this._removedExtraLibs[t]&&(n=this._removedExtraLibs[t]+1),this._extraLibs[t]&&(n=this._extraLibs[t].version+1),this._extraLibs[t]={content:s,version:n},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let i=this._extraLibs[t];i&&i.version===n&&(delete this._extraLibs[t],this._removedExtraLibs[t]=n,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(s){for(const e in this._extraLibs)this._removedExtraLibs[e]=this._extraLibs[e].version;if(this._extraLibs=Object.create(null),s&&s.length>0)for(const e of s){const t=e.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,n=e.content;let i=1;this._removedExtraLibs[t]&&(i=this._removedExtraLibs[t]+1),this._extraLibs[t]={content:n,version:i}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(s){this._compilerOptions=s||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(s){this._diagnosticsOptions=s||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(s){this._workerOptions=s||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(s){this._inlayHintsOptions=s||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(s){}setEagerModelSync(s){this._eagerModelSync=s}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration(s){this._modeConfiguration=s||Object.create(null),this._onDidChange.fire(void 0)}},bke=_ke,hX={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},uX=new dX({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},hX),fX=new dX({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},hX),vke=()=>DE().then(s=>s.getTypeScriptWorker()),Cke=()=>DE().then(s=>s.getJavaScriptWorker());Tb.languages.typescript={ModuleKind:oX,JsxEmit:rX,NewLineKind:aX,ScriptTarget:lX,ModuleResolutionKind:cX,typescriptVersion:bke,typescriptDefaults:uX,javascriptDefaults:fX,getTypeScriptWorker:vke,getJavaScriptWorker:Cke};function DE(){return ye(()=>import("./tsMode.chunk.js"),[],import.meta.url)}Tb.languages.onLanguage("typescript",()=>DE().then(s=>s.setupTypeScript(uX)));Tb.languages.onLanguage("javascript",()=>DE().then(s=>s.setupJavaScript(fX)));class wke extends Rs{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:Ee("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:J.map,toggled:K.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:K.has("isInDiffEditor"),menu:{when:K.has("isInDiffEditor"),id:ge.EditorTitle,order:22,group:"navigation"}})}run(e,...t){const n=e.get(Ze),i=!n.getValue("diffEditor.hideUnchangedRegions.enabled");n.updateValue("diffEditor.hideUnchangedRegions.enabled",i)}}class gX extends Rs{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:Ee("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:K.has("isInDiffEditor")})}run(e,...t){const n=e.get(Ze),i=!n.getValue("diffEditor.experimental.showMoves");n.updateValue("diffEditor.experimental.showMoves",i)}}class mX extends Rs{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:Ee("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:K.has("isInDiffEditor")})}run(e,...t){const n=e.get(Ze),i=!n.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");n.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",i)}}const $0=Ee("diffEditor","Diff Editor");class yke extends el{constructor(){super({id:"diffEditor.switchSide",title:Ee("switchSide","Switch Side"),icon:J.arrowSwap,precondition:K.has("isInDiffEditor"),f1:!0,category:$0})}runEditorCommand(e,t,n){const i=gv(e);if(i instanceof yd){if(n&&n.dryRun)return{destinationSelection:i.mapToOtherSide().destinationSelection};i.switchSide()}}}class Ske extends el{constructor(){super({id:"diffEditor.exitCompareMove",title:Ee("exitCompareMove","Exit Compare Move"),icon:J.close,precondition:I.comparingMovedCode,f1:!1,category:$0,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,t,...n){const i=gv(e);i instanceof yd&&i.exitCompareMove()}}class kke extends el{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:Ee("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:J.fold,precondition:K.has("isInDiffEditor"),f1:!0,category:$0})}runEditorCommand(e,t,...n){const i=gv(e);i instanceof yd&&i.collapseAllUnchangedRegions()}}class Lke extends el{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:Ee("showAllUnchangedRegions","Show All Unchanged Regions"),icon:J.unfold,precondition:K.has("isInDiffEditor"),f1:!0,category:$0})}runEditorCommand(e,t,...n){const i=gv(e);i instanceof yd&&i.showAllUnchangedRegions()}}class dF extends Rs{constructor(){super({id:"diffEditor.revert",title:Ee("revert","Revert"),f1:!1,category:$0})}run(e,t){const n=xke(e,t.originalUri,t.modifiedUri);n instanceof yd&&n.revertRangeMappings(t.mapping.innerChanges??[])}}const pX=Ee("accessibleDiffViewer","Accessible Diff Viewer"),bI=class bI extends Rs{constructor(){super({id:bI.id,title:Ee("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:pX,precondition:K.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){const t=gv(e);t==null||t.accessibleDiffViewerNext()}};bI.id="editor.action.accessibleDiffViewer.next";let O1=bI;const vI=class vI extends Rs{constructor(){super({id:vI.id,title:Ee("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:pX,precondition:K.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){const t=gv(e);t==null||t.accessibleDiffViewerPrev()}};vI.id="editor.action.accessibleDiffViewer.prev";let yx=vI;function xke(s,e,t){return s.get(mt).listDiffEditors().find(o=>{var l,c;const r=o.getModifiedEditor(),a=o.getOriginalEditor();return r&&((l=r.getModel())==null?void 0:l.uri.toString())===t.toString()&&a&&((c=a.getModel())==null?void 0:c.uri.toString())===e.toString()})||null}function gv(s){const t=s.get(mt).listDiffEditors(),n=Fi();if(n)for(const i of t){const o=i.getContainerDomNode();if(Dke(o,n))return i}return null}function Dke(s,e){let t=e;for(;t;){if(t===s)return!0;t=t.parentElement}return!1}Ot(wke);Ot(gX);Ot(mX);gi.appendMenuItem(ge.EditorTitle,{command:{id:new mX().desc.id,title:m("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:K.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:K.has("isInDiffEditor")},order:11,group:"1_diff",when:K.and(I.diffEditorRenderSideBySideInlineBreakpointReached,K.has("isInDiffEditor"))});gi.appendMenuItem(ge.EditorTitle,{command:{id:new gX().desc.id,title:m("showMoves","Show Moved Code Blocks"),icon:J.move,toggled:Yb.create("config.diffEditor.experimental.showMoves",!0),precondition:K.has("isInDiffEditor")},order:10,group:"1_diff",when:K.has("isInDiffEditor")});Ot(dF);for(const s of[{icon:J.arrowRight,key:I.diffEditorInlineMode.toNegated()},{icon:J.discard,key:I.diffEditorInlineMode}])gi.appendMenuItem(ge.DiffEditorHunkToolbar,{command:{id:new dF().desc.id,title:m("revertHunk","Revert Block"),icon:s.icon},when:K.and(I.diffEditorModifiedWritable,s.key),order:5,group:"primary"}),gi.appendMenuItem(ge.DiffEditorSelectionToolbar,{command:{id:new dF().desc.id,title:m("revertSelection","Revert Selection"),icon:s.icon},when:K.and(I.diffEditorModifiedWritable,s.key),order:5,group:"primary"});Ot(yke);Ot(Ske);Ot(kke);Ot(Lke);gi.appendMenuItem(ge.EditorTitle,{command:{id:O1.id,title:m("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:K.has("isInDiffEditor")},order:10,group:"2_diff",when:K.and(I.accessibleDiffViewerVisible.negate(),K.has("isInDiffEditor"))});rt.registerCommandAlias("editor.action.diffReview.next",O1.id);Ot(O1);rt.registerCommandAlias("editor.action.diffReview.prev",yx.id);Ot(yx);var Ike=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Tke=function(s,e){return function(t,n){e(t,n,s)}},hF;const IE=new le("selectionAnchorSet",!1);var rg;let bu=(rg=class{static get(e){return e.getContribution(hF.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=IE.bindTo(t),this.modelChangeListener=e.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations(t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(me.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:new ji().appendText(m("selectionAnchor","Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),Es(m("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(me.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations(t=>{t.removeDecoration(e),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}},hF=rg,rg.ID="editor.contrib.selectionAnchorController",rg);bu=hF=Ike([Tke(1,Ie)],bu);class Eke extends he{constructor(){super({id:"editor.action.setSelectionAnchor",label:m("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2080),weight:100}})}async run(e,t){var n;(n=bu.get(t))==null||n.setSelectionAnchor()}}class Nke extends he{constructor(){super({id:"editor.action.goToSelectionAnchor",label:m("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:IE})}async run(e,t){var n;(n=bu.get(t))==null||n.goToSelectionAnchor()}}class Rke extends he{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:m("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:IE,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2089),weight:100}})}async run(e,t){var n;(n=bu.get(t))==null||n.selectFromAnchorToCursor()}}class Mke extends he{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:m("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:IE,kbOpts:{kbExpr:I.editorTextFocus,primary:9,weight:100}})}async run(e,t){var n;(n=bu.get(t))==null||n.cancelSelectionAnchor()}}dt(bu.ID,bu,4);Q(Eke);Q(Nke);Q(Rke);Q(Mke);const Ake=T("editorOverviewRuler.bracketMatchForeground","#A0A0A0",m("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class Pke extends he{constructor(){super({id:"editor.action.jumpToBracket",label:m("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:3165,weight:100}})}run(e,t){var n;(n=cm.get(t))==null||n.jumpToBracket()}}class Oke extends he{constructor(){super({id:"editor.action.selectToBracket",label:m("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:Ee("smartSelect.selectToBracketDescription","Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,n){var o;let i=!0;n&&n.selectBrackets===!1&&(i=!1),(o=cm.get(t))==null||o.selectToBracket(i)}}class Fke extends he{constructor(){super({id:"editor.action.removeBrackets",label:m("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:2561,weight:100}})}run(e,t){var n;(n=cm.get(t))==null||n.removeBrackets(this.id)}}class Wke{constructor(e,t,n){this.position=e,this.brackets=t,this.options=n}}const ih=class ih extends F{static get(e){return e.getContribution(ih.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new It(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition(t=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelContent(t=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModel(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeModelLanguageConfiguration(t=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(e.onDidChangeConfiguration(t=>{t.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(e.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(e.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map(n=>{const i=n.getStartPosition(),o=e.bracketPairs.matchBracket(i);let r=null;if(o)o[0].containsPosition(i)&&!o[1].containsPosition(i)?r=o[1].getStartPosition():o[1].containsPosition(i)&&(r=o[0].getStartPosition());else{const a=e.bracketPairs.findEnclosingBrackets(i);if(a)r=a[1].getStartPosition();else{const l=e.bracketPairs.findNextBracket(i);l&&l.range&&(r=l.range.getStartPosition())}}return r?new me(r.lineNumber,r.column,r.lineNumber,r.column):new me(i.lineNumber,i.column,i.lineNumber,i.column)});this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=[];this._editor.getSelections().forEach(i=>{const o=i.getStartPosition();let r=t.bracketPairs.matchBracket(o);if(!r&&(r=t.bracketPairs.findEnclosingBrackets(o),!r)){const c=t.bracketPairs.findNextBracket(o);c&&c.range&&(r=t.bracketPairs.matchBracket(c.range.getStartPosition()))}let a=null,l=null;if(r){r.sort(L.compareRangesUsingStarts);const[c,d]=r;if(a=e?c.getStartPosition():c.getEndPosition(),l=e?d.getEndPosition():d.getStartPosition(),d.containsPosition(o)){const h=a;a=l,l=h}}a&&l&&n.push(new me(a.lineNumber,a.column,l.lineNumber,l.column))}),n.length>0&&(this._editor.setSelections(n),this._editor.revealRange(n[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach(n=>{const i=n.getPosition();let o=t.bracketPairs.matchBracket(i);o||(o=t.bracketPairs.findEnclosingBrackets(i)),o&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:o[0],text:""},{range:o[1],text:""}]),this._editor.pushUndoStop())})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const e=[];let t=0;for(const n of this._lastBracketsData){const i=n.brackets;i&&(e[t++]={range:i[0],options:n.options},e[t++]={range:i[1],options:n.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const e=this._editor.getSelections();if(e.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const t=this._editor.getModel(),n=t.getVersionId();let i=[];this._lastVersionId===n&&(i=this._lastBracketsData);const o=[];let r=0;for(let h=0,u=e.length;h<u;h++){const f=e[h];f.isEmpty()&&(o[r++]=f.getStartPosition())}o.length>1&&o.sort(A.compare);const a=[];let l=0,c=0;const d=i.length;for(let h=0,u=o.length;h<u;h++){const f=o[h];for(;c<d&&i[c].position.isBefore(f);)c++;if(c<d&&i[c].position.equals(f))a[l++]=i[c];else{let g=t.bracketPairs.matchBracket(f,20),p=ih._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!g&&this._matchBrackets==="always"&&(g=t.bracketPairs.findEnclosingBrackets(f,20),p=ih._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[l++]=new Wke(f,g,p)}}this._lastBracketsData=a,this._lastVersionId=n}};ih.ID="editor.contrib.bracketMatchingController",ih._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=Ve.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:pn(Ake),position:Ko.Center}}),ih._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=Ve.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"});let cm=ih;dt(cm.ID,cm,1);Q(Oke);Q(Pke);Q(Fke);gi.appendMenuItem(ge.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:m({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2});class Bke{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const n=this._selection.startLineNumber,i=this._selection.startColumn,o=this._selection.endColumn;if(!(this._isMovingLeft&&i===1)&&!(!this._isMovingLeft&&o===e.getLineMaxColumn(n)))if(this._isMovingLeft){const r=new L(n,i-1,n,i),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new L(n,o,n,o),a)}else{const r=new L(n,o,n,o+1),a=e.getValueInRange(r);t.addEditOperation(r,null),t.addEditOperation(new L(n,i,n,i),a)}}computeCursorState(e,t){return this._isMovingLeft?new me(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new me(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}class _X extends he{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const n=[],i=t.getSelections();for(const o of i)n.push(new Bke(o,this.left));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class Hke extends _X{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:m("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:I.writable})}}class Vke extends _X{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:m("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:I.writable})}}Q(Hke);Q(Vke);class zke extends he{constructor(){super({id:"editor.action.transposeLetters",label:m("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=[],o=t.getSelections();for(const r of o){if(!r.isEmpty())continue;const a=r.startLineNumber,l=r.startColumn,c=n.getLineMaxColumn(a);if(a===1&&(l===1||l===2&&c===2))continue;const d=l===c?r.getPosition():St.rightPosition(n,r.getPosition().lineNumber,r.getPosition().column),h=St.leftPosition(n,d),u=St.leftPosition(n,h),f=n.getValueInRange(L.fromPositions(u,h)),g=n.getValueInRange(L.fromPositions(h,d)),p=L.fromPositions(u,d);i.push(new Oi(p,g+f))}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}Q(zke);const TE=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let s;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?s=crypto.getRandomValues.bind(crypto):s=function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n};const e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return function(){s(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,o="";return o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o}}();function uB(s){return{asString:async()=>s,asFile:()=>{},value:typeof s=="string"?s:void 0}}function $ke(s,e,t){const n={id:TE(),name:s,uri:e,data:t};return{asString:async()=>"",asFile:()=>n,value:void 0}}class bX{constructor(){this._entries=new Map}get size(){let e=0;for(const t of this._entries)e++;return e}has(e){return this._entries.has(this.toKey(e))}matches(e){const t=[...this._entries.keys()];return ot.some(this,([n,i])=>i.asFile())&&t.push("files"),CX(Sx(e),t)}get(e){var t;return(t=this._entries.get(this.toKey(e)))==null?void 0:t[0]}append(e,t){const n=this._entries.get(e);n?n.push(t):this._entries.set(this.toKey(e),[t])}replace(e,t){this._entries.set(this.toKey(e),[t])}delete(e){this._entries.delete(this.toKey(e))}*[Symbol.iterator](){for(const[e,t]of this._entries)for(const n of t)yield[e,n]}toKey(e){return Sx(e)}}function Sx(s){return s.toLowerCase()}function vX(s,e){return CX(Sx(s),e.map(Sx))}function CX(s,e){if(s==="*/*")return e.length>0;if(e.includes(s))return!0;const t=s.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;const[n,i,o]=t;return o==="*"?e.some(r=>r.startsWith(i+"/")):!1}const EE=Object.freeze({create:s=>fd(s.map(e=>e.toString())).join(`\r
`),split:s=>s.split(`\r
`),parse:s=>EE.split(s).filter(e=>!e.startsWith("#"))}),yl=class yl{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+yl.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new yl((this.value?[this.value,...e]:e).join(yl.sep))}};yl.sep=".",yl.None=new yl("@@none@@"),yl.Empty=new yl("");let Jt=yl;const Nz={EDITORS:"CodeEditors",FILES:"CodeFiles"};class Uke{}const jke={DragAndDropContribution:"workbench.contributions.dragAndDrop"};ln.add(jke.DragAndDropContribution,new Uke);const Sw=class Sw{constructor(){}static getInstance(){return Sw.INSTANCE}hasData(e){return e&&e===this.proto}getData(e){if(this.hasData(e))return this.data}};Sw.INSTANCE=new Sw;let uF=Sw;function wX(s){const e=new bX;for(const t of s.items){const n=t.type;if(t.kind==="string"){const i=new Promise(o=>t.getAsString(o));e.append(n,uB(i))}else if(t.kind==="file"){const i=t.getAsFile();i&&e.append(n,qke(i))}}return e}function qke(s){const e=s.path?Se.parse(s.path):void 0;return $ke(s.name,e,async()=>new Uint8Array(await s.arrayBuffer()))}const Kke=Object.freeze([Nz.EDITORS,Nz.FILES,l1.RESOURCES,l1.INTERNAL_URI_LIST]);function yX(s,e=!1){const t=wX(s),n=t.get(l1.INTERNAL_URI_LIST);if(n)t.replace(yn.uriList,n);else if(e||!t.has(yn.uriList)){const i=[];for(const o of s.items){const r=o.getAsFile();if(r){const a=r.path;try{a?i.push(Se.file(a).toString()):i.push(Se.parse(r.name,!0).toString())}catch{}}}i.length&&t.replace(yn.uriList,uB(EE.create(i)))}for(const i of Kke)t.delete(i);return t}var fB=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},F1=function(s,e){return function(t,n){e(t,n,s)}};class gB{async provideDocumentPasteEdits(e,t,n,i,o){const r=await this.getEdit(n,o);if(r)return{edits:[{insertText:r.insertText,title:r.title,kind:r.kind,handledMimeType:r.handledMimeType,yieldTo:r.yieldTo}],dispose(){}}}async provideDocumentDropEdits(e,t,n,i){const o=await this.getEdit(n,i);if(o)return{edits:[{insertText:o.insertText,title:o.title,kind:o.kind,handledMimeType:o.handledMimeType,yieldTo:o.yieldTo}],dispose(){}}}}const kw=class kw extends gB{constructor(){super(...arguments),this.kind=kw.kind,this.dropMimeTypes=[yn.text],this.pasteMimeTypes=[yn.text]}async getEdit(e,t){const n=e.get(yn.text);if(!n||e.has(yn.uriList))return;const i=await n.asString();return{handledMimeType:yn.text,title:m("text.label","Insert Plain Text"),insertText:i,kind:this.kind}}};kw.id="text",kw.kind=new Jt("text.plain");let dm=kw;class SX extends gB{constructor(){super(...arguments),this.kind=new Jt("uri.absolute"),this.dropMimeTypes=[yn.uriList],this.pasteMimeTypes=[yn.uriList]}async getEdit(e,t){const n=await kX(e);if(!n.length||t.isCancellationRequested)return;let i=0;const o=n.map(({uri:a,originalText:l})=>a.scheme===We.file?a.fsPath:(i++,l)).join(" ");let r;return i>0?r=n.length>1?m("defaultDropProvider.uriList.uris","Insert Uris"):m("defaultDropProvider.uriList.uri","Insert Uri"):r=n.length>1?m("defaultDropProvider.uriList.paths","Insert Paths"):m("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:yn.uriList,insertText:o,title:r,kind:this.kind}}}let kx=class extends gB{constructor(e){super(),this._workspaceContextService=e,this.kind=new Jt("uri.relative"),this.dropMimeTypes=[yn.uriList],this.pasteMimeTypes=[yn.uriList]}async getEdit(e,t){const n=await kX(e);if(!n.length||t.isCancellationRequested)return;const i=ea(n.map(({uri:o})=>{const r=this._workspaceContextService.getWorkspaceFolder(o);return r?Jde(r.uri,o):void 0}));if(i.length)return{handledMimeType:yn.uriList,insertText:i.join(" "),title:n.length>1?m("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):m("defaultDropProvider.uriList.relativePath","Insert Relative Path"),kind:this.kind}}};kx=fB([F1(0,im)],kx);class Gke{constructor(){this.kind=new Jt("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:yn.text}]}async provideDocumentPasteEdits(e,t,n,i,o){var l;if(i.triggerKind!==Ow.PasteAs&&!((l=i.only)!=null&&l.contains(this.kind)))return;const r=n.get("text/html"),a=await(r==null?void 0:r.asString());if(!(!a||o.isCancellationRequested))return{dispose(){},edits:[{insertText:a,yieldTo:this._yieldTo,title:m("pasteHtmlLabel","Insert HTML"),kind:this.kind}]}}}async function kX(s){const e=s.get(yn.uriList);if(!e)return[];const t=await e.asString(),n=[];for(const i of EE.parse(t))try{n.push({uri:Se.parse(i),originalText:i})}catch{}return n}let fF=class extends F{constructor(e,t){super(),this._register(e.documentDropEditProvider.register("*",new dm)),this._register(e.documentDropEditProvider.register("*",new SX)),this._register(e.documentDropEditProvider.register("*",new kx(t)))}};fF=fB([F1(0,ue),F1(1,im)],fF);let gF=class extends F{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new dm)),this._register(e.documentPasteEditProvider.register("*",new SX)),this._register(e.documentPasteEditProvider.register("*",new kx(t))),this._register(e.documentPasteEditProvider.register("*",new Gke))}};gF=fB([F1(0,ue),F1(1,im)],gF);const Hr=class Hr{constructor(){this.value="",this.pos=0}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const e=this.pos;let t=0,n=this.value.charCodeAt(e),i;if(i=Hr._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(Hr.isDigitCharacter(n)){i=8;do t+=1,n=this.value.charCodeAt(e+t);while(Hr.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}if(Hr.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++t);while(Hr.isVariableCharacter(n)||Hr.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}i=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof Hr._table[n]>"u"&&!Hr.isDigitCharacter(n)&&!Hr.isVariableCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}};Hr._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};let mF=Hr;class mv{constructor(){this._children=[]}appendChild(e){return e instanceof bs&&this._children[this._children.length-1]instanceof bs?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){const{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...t),n._children=o,function r(a,l){for(const c of a)c.parent=l,r(c.children,c)}(t,n)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof U0)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}}class bs extends mv{constructor(e){super(),this.value=e}toString(){return this.value}len(){return this.value.length}clone(){return new bs(this.value)}}class LX extends mv{}class fr extends LX{static compareByIndex(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}constructor(e){super(),this.index=e}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof pv?this._children[0]:void 0}clone(){const e=new fr(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}class pv extends mv{constructor(){super(...arguments),this.options=[]}appendChild(e){return e instanceof bs&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const e=new pv;return this.options.forEach(e.appendChild,e),e}}class mB extends mv{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(e){const t=this;let n=!1,i=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(o=>o instanceof La&&!!o.elseValue)&&(i=this._replace([])),i}_replace(e){let t="";for(const n of this._children)if(n instanceof La){let i=e[n.index]||"";i=n.resolve(i),t+=i}else t+=n.toString();return t}toString(){return""}clone(){const e=new mB;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}}class La extends mv{constructor(e,t,n,i){super(),this.index=e,this.shorthandName=t,this.ifValue=n,this.elseValue=i}resolve(e){return this.shorthandName==="upcase"?e?e.toLocaleUpperCase():"":this.shorthandName==="downcase"?e?e.toLocaleLowerCase():"":this.shorthandName==="capitalize"?e?e[0].toLocaleUpperCase()+e.substr(1):"":this.shorthandName==="pascalcase"?e?this._toPascalCase(e):"":this.shorthandName==="camelcase"?e?this._toCamelCase(e):"":e&&typeof this.ifValue=="string"?this.ifValue:!e&&typeof this.elseValue=="string"?this.elseValue:e||""}_toPascalCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map(n=>n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}_toCamelCase(e){const t=e.match(/[a-z0-9]+/gi);return t?t.map((n,i)=>i===0?n.charAt(0).toLowerCase()+n.substr(1):n.charAt(0).toUpperCase()+n.substr(1)).join(""):e}clone(){return new La(this.index,this.shorthandName,this.ifValue,this.elseValue)}}class W1 extends LX{constructor(e){super(),this.name=e}resolve(e){let t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),t!==void 0?(this._children=[new bs(t)],!0):!1}clone(){const e=new W1(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(t=>t.clone()),e}}function Rz(s,e){const t=[...s];for(;t.length>0;){const n=t.shift();if(!e(n))break;t.unshift(...n.children)}}class U0 extends mv{get placeholderInfo(){if(!this._placeholders){const e=[];let t;this.walk(function(n){return n instanceof fr&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){const{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(t+=i.len(),!0)),n?t:-1}fullLen(e){let t=0;return Rz([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){const t=[];let{parent:n}=e;for(;n;)n instanceof fr&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof W1&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}clone(){const e=new U0;return this._children=this.children.map(t=>t.clone()),e}walk(e){Rz(this.children,e)}}class hm{constructor(){this._scanner=new mF,this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}parse(e,t,n){const i=new U0;return this.parseFragment(e,i),this.ensureFinalTabstop(i,n??!1,t??!1),i}parseFragment(e,t){const n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););const i=new Map,o=[];t.walk(l=>(l instanceof fr&&(l.isFinalTabstop?i.set(0,void 0):!i.has(l.index)&&l.children.length>0?i.set(l.index,l.children):o.push(l)),!0));const r=(l,c)=>{const d=i.get(l.index);if(!d)return;const h=new fr(l.index);h.transform=l.transform;for(const u of d){const f=u.clone();h.appendChild(f),f instanceof fr&&i.has(f.index)&&!c.has(f.index)&&(c.add(f.index),r(f,c),c.delete(f.index))}t.replace(l,[h])},a=new Set;for(const l of o)r(l,a);return t.children.slice(n)}ensureFinalTabstop(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find(o=>o.index===0)||e.appendChild(new fr(0)))}_accept(e,t){if(e===void 0||this._token.type===e){const n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){const t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){const i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}const n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new bs(t)),!0):!1}_parseTabstopOrVariableName(e){let t;const n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new fr(Number(t)):new W1(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);const o=new fr(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new bs("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){const r=new pv;for(;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(r),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){const t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(t),!1;n.push(i)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new bs(n.join(""))),!0)}_parseComplexVariable(e){let t;const n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);const o=new W1(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new bs("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){const t=new mB;let n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new bs(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,i)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){const t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);const i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new La(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new La(Number(i))),!0;else return this._backTo(t),!1;if(this._accept(6)){const o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new La(Number(i),o)),!0)}else if(this._accept(11)){const o=this._until(4);if(o)return e.appendChild(new La(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){const o=this._until(4);if(o)return e.appendChild(new La(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){const o=this._until(1);if(o){const r=this._until(4);if(r)return e.appendChild(new La(Number(i),void 0,o,r)),!0}}else{const o=this._until(4);if(o)return e.appendChild(new La(Number(i),void 0,void 0,o)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new bs(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}function xX(s,e,t){var n,i;return(typeof t.insertText=="string"?t.insertText==="":t.insertText.snippet==="")?{edits:((n=t.additionalEdit)==null?void 0:n.edits)??[]}:{edits:[...e.map(o=>new Mh(s,{range:o,text:typeof t.insertText=="string"?hm.escape(t.insertText)+"$0":t.insertText.snippet,insertAsSnippet:!0})),...((i=t.additionalEdit)==null?void 0:i.edits)??[]]}}function DX(s){function e(r,a){return"mimeType"in r?r.mimeType===a.handledMimeType:!!a.kind&&r.kind.contains(a.kind)}const t=new Map;for(const r of s)for(const a of r.yieldTo??[])for(const l of s)if(l!==r&&e(a,l)){let c=t.get(r);c||(c=[],t.set(r,c)),c.push(l)}if(!t.size)return Array.from(s);const n=new Set,i=[];function o(r){if(!r.length)return[];const a=r[0];if(i.includes(a))return console.warn("Yield to cycle detected",a),r;if(n.has(a))return o(r.slice(1));let l=[];const c=t.get(a);return c&&(i.push(a),l=o(c),i.pop()),n.add(a),[...l,a,...o(r.slice(1))]}return o(Array.from(s))}var Zke=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Yke=function(s,e){return function(t,n){e(t,n,s)}};const Xke=Ve.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:eq,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}}),CI=class CI extends F{constructor(e,t,n,i,o){super(),this.typeId=e,this.editor=t,this.range=n,this.delegate=o,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(i),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=te(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=te("span.icon");this.domNode.append(t),t.classList.add(...De.asClassNameArray(J.loading),"codicon-modifier-spin");const n=()=>{const i=this.editor.getOption(67);this.domNode.style.height=`${i}px`,this.domNode.style.width=`${Math.ceil(.8*i)}px`};n(),this._register(this.editor.onDidChangeConfiguration(i=>{(i.hasChanged(52)||i.hasChanged(67))&&n()})),this._register($(this.domNode,ee.CLICK,i=>{this.delegate.cancel()}))}getId(){return CI.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}};CI.baseId="editor.widget.inlineProgressWidget";let pF=CI,Lx=class extends F{constructor(e,t,n){super(),this.id=e,this._editor=t,this._instantiationService=n,this._showDelay=500,this._showPromise=this._register(new ai),this._currentWidget=this._register(new ai),this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}dispose(){super.dispose(),this._currentDecorations.clear()}async showWhile(e,t,n,i,o){const r=this._operationIdPool++;this._currentOperation=r,this.clear(),this._showPromise.value=au(()=>{const a=L.fromPositions(e);this._currentDecorations.set([{range:a,options:Xke}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(pF,this.id,this._editor,a,t,i))},o??this._showDelay);try{return await n}finally{this._currentOperation===r&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};Lx=Zke([Yke(2,Ce)],Lx);var Qke=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Mz=function(s,e){return function(t,n){e(t,n,s)}},ik,Bh;let vo=(Bh=class{static get(e){return e.getContribution(ik.ID)}constructor(e,t,n){this._openerService=n,this._messageWidget=new ai,this._messageListeners=new q,this._mouseOverMessage=!1,this._editor=e,this._visible=ik.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;(e=this._message)==null||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){Es($a(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=$a(e)?ZT(e,{actionHandler:{callback:i=>{this.closeMessage(),A9(this._openerService,i,$a(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new Az(this._editor,t,typeof e=="string"?e:this._message.element),this._messageListeners.add(se.debounce(this._editor.onDidBlurEditorText,(i,o)=>o,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&ii(Fi(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add($(this._messageWidget.value.getDomNode(),ee.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add($(this._messageWidget.value.getDomNode(),ee.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let n;this._messageListeners.add(this._editor.onMouseMove(i=>{i.target.position&&(n?n.containsPosition(i.target.position)||this.closeMessage():n=new L(t.lineNumber-3,1,i.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(Az.fadeOut(this._messageWidget.value))}},ik=Bh,Bh.ID="editor.contrib.messageController",Bh.MESSAGE_VISIBLE=new le("messageVisible",!1,m("messageVisible","Whether the editor is currently showing an inline message")),Bh);vo=ik=Qke([Mz(1,Ie),Mz(2,eo)],vo);const Jke=Zn.bindToContribution(vo.get);oe(new Jke({id:"leaveEditorMessage",precondition:vo.MESSAGE_VISIBLE,handler:s=>s.closeMessage(),kbOpts:{weight:130,primary:9}}));let Az=class{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(n),e.getDomNode().removeEventListener("animationend",t)},n=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:n},i){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:n},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const r=document.createElement("div");typeof i=="string"?(r.classList.add("message"),r.textContent=i):(i.classList.add("message"),r.appendChild(i)),this._domNode.appendChild(r);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",e===2)}};dt(vo.ID,vo,4);function BR(s,e){return e&&(s.stack||s.stacktrace)?m("stackTrace.format","{0}: {1}",Oz(s),Pz(s.stack)||Pz(s.stacktrace)):Oz(s)}function Pz(s){return Array.isArray(s)?s.join(`
`):s}function Oz(s){return s.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${s.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof s.code=="string"&&typeof s.errno=="number"&&typeof s.syscall=="string"?m("nodeExceptionMessage","A system error occurred ({0})",s.message):s.message||m("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function xx(s=null,e=!1){if(!s)return m("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(s)){const t=ea(s),n=xx(t[0],e);return t.length>1?m("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(qs(s))return s;if(s.detail){const t=s.detail;if(t.error)return BR(t.error,e);if(t.exception)return BR(t.exception,e)}return s.stack?BR(s,e):s.message?s.message:m("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}var IX=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},B_=function(s,e){return function(t,n){e(t,n,s)}},_F,ag;let bF=(ag=class extends F{constructor(e,t,n,i,o,r,a,l,c,d){super(),this.typeId=e,this.editor=t,this.showCommand=i,this.range=o,this.edits=r,this.onSelectNewEdit=a,this._contextMenuService=l,this._keybindingService=d,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=n.bindTo(c),this.visibleContext.set(!0),this._register(ve(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register(ve(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(h=>{o.containsPosition(h.position)||this.dispose()})),this._register(se.runAndSubscribe(d.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){var t;const e=(t=this._keybindingService.lookupKeybinding(this.showCommand.id))==null?void 0:t.getLabel();this.button.element.title=this.showCommand.label+(e?` (${e})`:"")}create(){this.domNode=te(".post-edit-widget"),this.button=this._register(new RL(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register($(this.domNode,ee.CLICK,()=>this.showSelector()))}getId(){return _F.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const e=Sn(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map((e,t)=>Hf({id:"",label:e.title,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}}))})}},_F=ag,ag.baseId="editor.widget.postEditWidget",ag);bF=_F=IX([B_(7,Lo),B_(8,Ie),B_(9,wt)],bF);let Dx=class extends F{constructor(e,t,n,i,o,r,a){super(),this._id=e,this._editor=t,this._visibleContext=n,this._showCommand=i,this._instantiationService=o,this._bulkEditService=r,this._notificationService=a,this._currentWidget=this._register(new ai),this._register(se.any(t.onDidChangeModel,t.onDidChangeModelContent)(()=>this.clear()))}async applyEditAndShowIfNeeded(e,t,n,i,o){const r=this._editor.getModel();if(!r||!e.length)return;const a=t.allEdits.at(t.activeEditIndex);if(!a)return;const l=async _=>{const b=this._editor.getModel();b&&(await b.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:_,allEdits:t.allEdits},n,i,o))},c=(_,b)=>{Tr(_)||(this._notificationService.error(b),n&&this.show(e[0],t,l))};let d;try{d=await i(a,o)}catch(_){return c(_,m("resolveError",`Error resolving edit '{0}':
{1}`,a.title,xx(_)))}if(o.isCancellationRequested)return;const h=xX(r.uri,e,d),u=e[0],f=r.deltaDecorations([],[{range:u,options:{description:"paste-line-suffix",stickiness:0}}]);this._editor.focus();let g,p;try{g=await this._bulkEditService.apply(h,{editor:this._editor,token:o}),p=r.getDecorationRange(f[0])}catch(_){return c(_,m("applyError",`Error applying edit '{0}':
{1}`,a.title,xx(_)))}finally{r.deltaDecorations(f,[])}o.isCancellationRequested||n&&g.isApplied&&t.allEdits.length>1&&this.show(p??u,t,l)}show(e,t,n){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(bF,this._id,this._editor,this._visibleContext,this._showCommand,e,t,n))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;(e=this._currentWidget.value)==null||e.showSelector()}};Dx=IX([B_(4,Ce),B_(5,x0),B_(6,En)],Dx);var eLe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},lp=function(s,e){return function(t,n){e(t,n,s)}},sf;const TX="editor.changePasteType",pB=new le("pasteWidgetVisible",!1,m("pasteWidgetVisible","Whether the paste widget is showing")),HR="application/vnd.code.copyMetadata";var lg;let Sd=(lg=class extends F{static get(e){return e.getContribution(sf.ID)}constructor(e,t,n,i,o,r,a){super(),this._bulkEditService=n,this._clipboardService=i,this._languageFeaturesService=o,this._quickInputService=r,this._progressService=a,this._editor=e;const l=e.getContainerDomNode();this._register($(l,"copy",c=>this.handleCopy(c))),this._register($(l,"cut",c=>this.handleCopy(c))),this._register($(l,"paste",c=>this.handlePaste(c),!0)),this._pasteProgressManager=this._register(new Lx("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(Dx,"pasteIntoEditor",e,pB,{id:TX,label:m("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferred:e},Zb().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(85).enabled}async finishedPaste(){await this._currentPasteOperation}handleCopy(e){var p,_,b,v;if(!this._editor.hasTextFocus()||((_=(p=this._clipboardService).clearInternalState)==null||_.call(p),!e.clipboardData||!this.isPasteAsEnabled()))return;const t=this._editor.getModel(),n=this._editor.getSelections();if(!t||!(n!=null&&n.length))return;const i=this._editor.getOption(37);let o=n;const r=n.length===1&&n[0].isEmpty();if(r){if(!i)return;o=[new L(o[0].startLineNumber,1,o[0].startLineNumber,1+t.getLineLength(o[0].startLineNumber))]}const a=(b=this._editor._getViewModel())==null?void 0:b.getPlainTextToCopy(n,i,Bi),c={multicursorText:Array.isArray(a)?a:null,pasteOnNewLine:r,mode:null},d=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(C=>!!C.prepareDocumentPaste);if(!d.length){this.setCopyMetadata(e.clipboardData,{defaultPastePayload:c});return}const h=wX(e.clipboardData),u=d.flatMap(C=>C.copyMimeTypes??[]),f=TE();this.setCopyMetadata(e.clipboardData,{id:f,providerCopyMimeTypes:u,defaultPastePayload:c});const g=si(async C=>{const w=ea(await Promise.all(d.map(async y=>{try{return await y.prepareDocumentPaste(t,o,h,C)}catch(k){console.error(k);return}})));w.reverse();for(const y of w)for(const[k,x]of y)h.replace(k,x);return h});(v=sf._currentCopyOperation)==null||v.dataTransferPromise.cancel(),sf._currentCopyOperation={handle:f,dataTransferPromise:g}}async handlePaste(e){var l,c,d;if(!e.clipboardData||!this._editor.hasTextFocus())return;(l=vo.get(this._editor))==null||l.closeMessage(),(c=this._currentPasteOperation)==null||c.cancel(),this._currentPasteOperation=void 0;const t=this._editor.getModel(),n=this._editor.getSelections();if(!(n!=null&&n.length)||!t||this._editor.getOption(92)||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;const i=this.fetchCopyMetadata(e),o=yX(e.clipboardData);o.delete(HR);const r=[...e.clipboardData.types,...(i==null?void 0:i.providerCopyMimeTypes)??[],yn.uriList],a=this._languageFeaturesService.documentPasteEditProvider.ordered(t).filter(h=>{var f,g;const u=(f=this._pasteAsActionContext)==null?void 0:f.preferred;return u&&h.providedPasteEditKinds&&!this.providerMatchesPreference(h,u)?!1:(g=h.pasteMimeTypes)==null?void 0:g.some(p=>vX(p,r))});if(!a.length){(d=this._pasteAsActionContext)!=null&&d.preferred&&this.showPasteAsNoEditMessage(n,this._pasteAsActionContext.preferred);return}e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,a,n,o,i):this.doPasteInline(a,n,o,i,e)}showPasteAsNoEditMessage(e,t){var n;(n=vo.get(this._editor))==null||n.showMessage(m("pasteAsError","No paste edits for '{0}' found",t instanceof Jt?t.value:t.providerId),e[0].getStartPosition())}doPasteInline(e,t,n,i,o){const r=this._editor;if(!r.hasModel())return;const a=new _u(r,3,void 0),l=si(async c=>{const d=this._editor;if(!d.hasModel())return;const h=d.getModel(),u=new q,f=u.add(new an(c));u.add(a.token.onCancellationRequested(()=>f.cancel()));const g=f.token;try{if(await this.mergeInDataFromCopy(n,i,g),g.isCancellationRequested)return;const p=e.filter(v=>this.isSupportedPasteProvider(v,n));if(!p.length||p.length===1&&p[0]instanceof dm)return this.applyDefaultPasteHandler(n,i,g,o);const _={triggerKind:Ow.Automatic},b=await this.getPasteEdits(p,n,h,t,_,g);if(u.add(b),g.isCancellationRequested)return;if(b.edits.length===1&&b.edits[0].provider instanceof dm)return this.applyDefaultPasteHandler(n,i,g,o);if(b.edits.length){const v=d.getOption(85).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:b.edits},v,(C,w)=>new Promise((y,k)=>{(async()=>{var x,D;try{const N=(D=(x=C.provider).resolveDocumentPasteEdit)==null?void 0:D.call(x,C,w),W=new Gb,B=N&&await this._pasteProgressManager.showWhile(t[0].getEndPosition(),m("resolveProcess","Resolving paste edit. Click to cancel"),Promise.race([W.p,N]),{cancel:()=>(W.cancel(),k(new ta))},0);return B&&(C.additionalEdit=B.additionalEdit),y(C)}catch(N){return k(N)}})()}),g)}await this.applyDefaultPasteHandler(n,i,g,o)}finally{u.dispose(),this._currentPasteOperation===l&&(this._currentPasteOperation=void 0)}});this._pasteProgressManager.showWhile(t[0].getEndPosition(),m("pasteIntoEditorProgress","Running paste handlers. Click to cancel and do basic paste"),l,{cancel:async()=>{try{if(l.cancel(),a.token.isCancellationRequested)return;await this.applyDefaultPasteHandler(n,i,a.token,o)}finally{a.dispose()}}}).then(()=>{a.dispose()}),this._currentPasteOperation=l}showPasteAsPick(e,t,n,i,o){const r=si(async a=>{const l=this._editor;if(!l.hasModel())return;const c=l.getModel(),d=new q,h=d.add(new _u(l,3,void 0,a));try{if(await this.mergeInDataFromCopy(i,o,h.token),h.token.isCancellationRequested)return;let u=t.filter(b=>this.isSupportedPasteProvider(b,i,e));e&&(u=u.filter(b=>this.providerMatchesPreference(b,e)));const f={triggerKind:Ow.PasteAs,only:e&&e instanceof Jt?e:void 0};let g=d.add(await this.getPasteEdits(u,i,c,n,f,h.token));if(h.token.isCancellationRequested)return;if(e&&(g={edits:g.edits.filter(b=>e instanceof Jt?e.contains(b.kind):e.providerId===b.provider.id),dispose:g.dispose}),!g.edits.length){f.only&&this.showPasteAsNoEditMessage(n,f.only);return}let p;if(e)p=g.edits.at(0);else{const b=await this._quickInputService.pick(g.edits.map(v=>{var C;return{label:v.title,description:(C=v.kind)==null?void 0:C.value,edit:v}}),{placeHolder:m("pasteAsPickerPlaceholder","Select Paste Action")});p=b==null?void 0:b.edit}if(!p)return;const _=xX(c.uri,n,p);await this._bulkEditService.apply(_,{editor:this._editor})}finally{d.dispose(),this._currentPasteOperation===r&&(this._currentPasteOperation=void 0)}});this._progressService.withProgress({location:10,title:m("pasteAsProgress","Running paste handlers")},()=>r)}setCopyMetadata(e,t){e.setData(HR,JSON.stringify(t))}fetchCopyMetadata(e){if(!e.clipboardData)return;const t=e.clipboardData.getData(HR);if(t)try{return JSON.parse(t)}catch{return}const[n,i]=LO.getTextData(e.clipboardData);if(i)return{defaultPastePayload:{mode:i.mode,multicursorText:i.multicursorText??null,pasteOnNewLine:!!i.isFromEmptySelection}}}async mergeInDataFromCopy(e,t,n){var i;if(t!=null&&t.id&&((i=sf._currentCopyOperation)==null?void 0:i.handle)===t.id){const o=await sf._currentCopyOperation.dataTransferPromise;if(n.isCancellationRequested)return;for(const[r,a]of o)e.replace(r,a)}if(!e.has(yn.uriList)){const o=await this._clipboardService.readResources();if(n.isCancellationRequested)return;o.length&&e.append(yn.uriList,uB(EE.create(o)))}}async getPasteEdits(e,t,n,i,o,r){const a=new q,l=await b0(Promise.all(e.map(async d=>{var h,u;try{const f=await((h=d.provideDocumentPasteEdits)==null?void 0:h.call(d,n,i,t,o,r));return f&&a.add(f),(u=f==null?void 0:f.edits)==null?void 0:u.map(g=>({...g,provider:d}))}catch(f){Tr(f)||console.error(f);return}})),r),c=ea(l??[]).flat().filter(d=>!o.only||o.only.contains(d.kind));return{edits:DX(c),dispose:()=>a.dispose()}}async applyDefaultPasteHandler(e,t,n,i){const o=e.get(yn.text)??e.get("text"),r=await(o==null?void 0:o.asString())??"";if(n.isCancellationRequested)return;const a={clipboardEvent:i,text:r,pasteOnNewLine:(t==null?void 0:t.defaultPastePayload.pasteOnNewLine)??!1,multicursorText:(t==null?void 0:t.defaultPastePayload.multicursorText)??null,mode:null};this._editor.trigger("keyboard","paste",a)}isSupportedPasteProvider(e,t,n){var i;return(i=e.pasteMimeTypes)!=null&&i.some(o=>t.matches(o))?!n||this.providerMatchesPreference(e,n):!1}providerMatchesPreference(e,t){return t instanceof Jt?e.providedPasteEditKinds?e.providedPasteEditKinds.some(n=>t.contains(n)):!0:e.id===t.providerId}},sf=lg,lg.ID="editor.contrib.copyPasteActionController",lg);Sd=sf=eLe([lp(1,Ce),lp(2,x0),lp(3,Pd),lp(4,ue),lp(5,Nr),lp(6,lG)],Sd);const um="9_cutcopypaste",tLe=Oa||document.queryCommandSupported("cut"),EX=Oa||document.queryCommandSupported("copy"),nLe=typeof navigator.clipboard>"u"||Sr?document.queryCommandSupported("paste"):!0;function _B(s){return s.register(),s}const iLe=tLe?_B(new Xb({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:Oa?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:ge.MenubarEditMenu,group:"2_ccp",title:m({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:ge.EditorContext,group:um,title:m("actions.clipboard.cutLabel","Cut"),when:I.writable,order:1},{menuId:ge.CommandPalette,group:"",title:m("actions.clipboard.cutLabel","Cut"),order:1},{menuId:ge.SimpleEditorContext,group:um,title:m("actions.clipboard.cutLabel","Cut"),when:I.writable,order:1}]})):void 0,sLe=EX?_B(new Xb({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:Oa?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:ge.MenubarEditMenu,group:"2_ccp",title:m({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:ge.EditorContext,group:um,title:m("actions.clipboard.copyLabel","Copy"),order:2},{menuId:ge.CommandPalette,group:"",title:m("actions.clipboard.copyLabel","Copy"),order:1},{menuId:ge.SimpleEditorContext,group:um,title:m("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;gi.appendMenuItem(ge.MenubarEditMenu,{submenu:ge.MenubarCopy,title:Ee("copy as","Copy As"),group:"2_ccp",order:3});gi.appendMenuItem(ge.EditorContext,{submenu:ge.EditorContextCopy,title:Ee("copy as","Copy As"),group:um,order:3});gi.appendMenuItem(ge.EditorContext,{submenu:ge.EditorContextShare,title:Ee("share","Share"),group:"11_share",order:-1,when:K.and(K.notEquals("resourceScheme","output"),I.editorTextFocus)});gi.appendMenuItem(ge.ExplorerContext,{submenu:ge.ExplorerContextShare,title:Ee("share","Share"),group:"11_share",order:-1});const VR=nLe?_B(new Xb({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:Oa?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:ge.MenubarEditMenu,group:"2_ccp",title:m({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:ge.EditorContext,group:um,title:m("actions.clipboard.pasteLabel","Paste"),when:I.writable,order:4},{menuId:ge.CommandPalette,group:"",title:m("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:ge.SimpleEditorContext,group:um,title:m("actions.clipboard.pasteLabel","Paste"),when:I.writable,order:4}]})):void 0;class oLe extends he{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:m("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,weight:100}})}run(e,t){!t.hasModel()||!t.getOption(37)&&t.getSelection().isEmpty()||(SO.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),SO.forceCopyWithSyntaxHighlighting=!1)}}function NX(s,e){s&&(s.addImplementation(1e4,"code-editor",(t,n)=>{const i=t.get(mt).getFocusedCodeEditor();if(i&&i.hasTextFocus()){const o=i.getOption(37),r=i.getSelection();return r&&r.isEmpty()&&!o||i.getContainerDomNode().ownerDocument.execCommand(e),!0}return!1}),s.addImplementation(0,"generic-dom",(t,n)=>(Zb().execCommand(e),!0)))}NX(iLe,"cut");NX(sLe,"copy");VR&&(VR.addImplementation(1e4,"code-editor",(s,e)=>{var o;const t=s.get(mt),n=s.get(Pd),i=t.getFocusedCodeEditor();return i&&i.hasTextFocus()?i.getContainerDomNode().ownerDocument.execCommand("paste")?((o=Sd.get(i))==null?void 0:o.finishedPaste())??Promise.resolve():Lm?(async()=>{const a=await n.readText();if(a!==""){const l=L1.INSTANCE.get(a);let c=!1,d=null,h=null;l&&(c=i.getOption(37)&&!!l.isFromEmptySelection,d=typeof l.multicursorText<"u"?l.multicursorText:null,h=l.mode),i.trigger("keyboard","paste",{text:a,pasteOnNewLine:c,multicursorText:d,mode:h})}})():!0:!1}),VR.addImplementation(0,"generic-dom",(s,e)=>(Zb().execCommand("paste"),!0)));EX&&Q(oLe);const Gt=new class{constructor(){this.QuickFix=new Jt("quickfix"),this.Refactor=new Jt("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new Jt("notebook"),this.Source=new Jt("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")}};var ko;(function(s){s.Refactor="refactor",s.RefactorPreview="refactor preview",s.Lightbulb="lightbulb",s.Default="other (default)",s.SourceAction="source action",s.QuickFix="quick fix action",s.FixAll="fix all",s.OrganizeImports="organize imports",s.AutoFix="auto fix",s.QuickFixHover="quick fix hover window",s.OnSave="save participants",s.ProblemsView="problems view"})(ko||(ko={}));function rLe(s,e){return!(s.include&&!s.include.intersects(e)||s.excludes&&s.excludes.some(t=>RX(e,t,s.include))||!s.includeSourceActions&&Gt.Source.contains(e))}function aLe(s,e){const t=e.kind?new Jt(e.kind):void 0;return!(s.include&&(!t||!s.include.contains(t))||s.excludes&&t&&s.excludes.some(n=>RX(t,n,s.include))||!s.includeSourceActions&&t&&Gt.Source.contains(t)||s.onlyIncludePreferredActions&&!e.isPreferred)}function RX(s,e,t){return!(!e.contains(s)||t&&e.contains(t))}class Pl{static fromUser(e,t){return!e||typeof e!="object"?new Pl(t.kind,t.apply,!1):new Pl(Pl.getKindFromUser(e,t.kind),Pl.getApplyFromUser(e,t.apply),Pl.getPreferredUser(e))}static getApplyFromUser(e,t){switch(typeof e.apply=="string"?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return typeof e.kind=="string"?new Jt(e.kind):t}static getPreferredUser(e){return typeof e.preferred=="boolean"?e.preferred:!1}constructor(e,t,n){this.kind=e,this.apply=t,this.preferred=n}}class lLe{constructor(e,t,n){this.action=e,this.provider=t,this.highlightRange=n}async resolve(e){var t;if((t=this.provider)!=null&&t.resolveCodeAction&&!this.action.edit){let n;try{n=await this.provider.resolveCodeAction(this.action,e)}catch(i){kn(i)}n&&(this.action.edit=n.edit)}return this}}const MX="editor.action.codeAction",bB="editor.action.quickFix",AX="editor.action.autoFix",PX="editor.action.refactor",OX="editor.action.sourceAction",vF="editor.action.organizeImports",CF="editor.action.fixAll";class QC extends F{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator({action:e},{action:t}){return e.isAI&&!t.isAI?1:!e.isAI&&t.isAI?-1:cs(e.diagnostics)?cs(t.diagnostics)?QC.codeActionsPreferredComparator(e,t):-1:cs(t.diagnostics)?1:QC.codeActionsPreferredComparator(e,t)}constructor(e,t,n){super(),this.documentation=t,this._register(n),this.allActions=[...e].sort(QC.codeActionsComparator),this.validActions=this.allActions.filter(({action:i})=>!i.disabled)}get hasAutoFix(){return this.validActions.some(({action:e})=>!!e.kind&&Gt.QuickFix.contains(new Jt(e.kind))&&!!e.isPreferred)}get hasAIFix(){return this.validActions.some(({action:e})=>!!e.isAI)}get allAIFixes(){return this.validActions.every(({action:e})=>!!e.isAI)}}const Fz={actions:[],documentation:void 0};async function qp(s,e,t,n,i,o){var p;const r=n.filter||{},a={...r,excludes:[...r.excludes||[],Gt.Notebook]},l={only:(p=r.include)==null?void 0:p.value,trigger:n.type},c=new rB(e,o),d=n.type===2,h=cLe(s,e,d?a:r),u=new q,f=h.map(async _=>{try{i.report(_);const b=await _.provideCodeActions(e,t,l,c.token);if(b&&u.add(b),c.token.isCancellationRequested)return Fz;const v=((b==null?void 0:b.actions)||[]).filter(w=>w&&aLe(r,w)),C=hLe(_,v,r.include);return{actions:v.map(w=>new lLe(w,_)),documentation:C}}catch(b){if(Tr(b))throw b;return kn(b),Fz}}),g=s.onDidChange(()=>{const _=s.all(e);en(_,h)||c.cancel()});try{const _=await Promise.all(f),b=_.map(C=>C.actions).flat(),v=[...ea(_.map(C=>C.documentation)),...dLe(s,e,n,b)];return new QC(b,v,u)}finally{g.dispose(),c.dispose()}}function cLe(s,e,t){return s.all(e).filter(n=>n.providedCodeActionKinds?n.providedCodeActionKinds.some(i=>rLe(t,new Jt(i))):!0)}function*dLe(s,e,t,n){var i,o,r;if(e&&n.length)for(const a of s.all(e))a._getAdditionalMenuItems&&(yield*(r=a._getAdditionalMenuItems)==null?void 0:r.call(a,{trigger:t.type,only:(o=(i=t.filter)==null?void 0:i.include)==null?void 0:o.value},n.map(l=>l.action)))}function hLe(s,e,t){if(!s.documentation)return;const n=s.documentation.map(i=>({kind:new Jt(i.kind),command:i.command}));if(t){let i;for(const o of n)o.kind.contains(t)&&(i?i.kind.contains(o.kind)&&(i=o):i=o);if(i)return i==null?void 0:i.command}for(const i of e)if(i.kind){for(const o of n)if(o.kind.contains(new Jt(i.kind)))return o.command}}var Af;(function(s){s.OnSave="onSave",s.FromProblemsView="fromProblemsView",s.FromCodeActions="fromCodeActions",s.FromAILightbulb="fromAILightbulb"})(Af||(Af={}));async function uLe(s,e,t,n,i=Ue.None){var c;const o=s.get(x0),r=s.get(Wt),a=s.get(Zi),l=s.get(En);if(a.publicLog2("codeAction.applyCodeAction",{codeActionTitle:e.action.title,codeActionKind:e.action.kind,codeActionIsPreferred:!!e.action.isPreferred,reason:t}),await e.resolve(i),!i.isCancellationRequested&&!((c=e.action.edit)!=null&&c.edits.length&&!(await o.apply(e.action.edit,{editor:n==null?void 0:n.editor,label:e.action.title,quotableLabel:e.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:t!==Af.OnSave,showPreview:n==null?void 0:n.preview})).isApplied)&&e.action.command)try{await r.executeCommand(e.action.command.id,...e.action.command.arguments||[])}catch(d){const h=fLe(d);l.error(typeof h=="string"?h:m("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}function fLe(s){return typeof s=="string"?s:s instanceof Error&&typeof s.message=="string"?s.message:void 0}rt.registerCommand("_executeCodeActionProvider",async function(s,e,t,n,i){if(!(e instanceof Se))throw Cr();const{codeActionProvider:o}=s.get(ue),r=s.get(Ut).getModel(e);if(!r)throw Cr();const a=me.isISelection(t)?me.liftSelection(t):L.isIRange(t)?r.validateRange(t):void 0;if(!a)throw Cr();const l=typeof n=="string"?new Jt(n):void 0,c=await qp(o,r,a,{type:1,triggerAction:ko.Default,filter:{includeSourceActions:!0,include:l}},Aa.None,Ue.None),d=[],h=Math.min(c.validActions.length,typeof i=="number"?i:0);for(let u=0;u<h;u++)d.push(c.validActions[u].resolve(Ue.None));try{return await Promise.all(d),c.validActions.map(u=>u.action)}finally{setTimeout(()=>c.dispose(),100)}});var gLe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mLe=function(s,e){return function(t,n){e(t,n,s)}},wF,cg;let yF=(cg=class{constructor(e){this.keybindingService=e}getResolver(){const e=new ja(()=>this.keybindingService.getKeybindings().filter(t=>wF.codeActionCommands.indexOf(t.command)>=0).filter(t=>t.resolvedKeybinding).map(t=>{let n=t.commandArgs;return t.command===vF?n={kind:Gt.SourceOrganizeImports.value}:t.command===CF&&(n={kind:Gt.SourceFixAll.value}),{resolvedKeybinding:t.resolvedKeybinding,...Pl.fromUser(n,{kind:Jt.None,apply:"never"})}}));return t=>{if(t.kind){const n=this.bestKeybindingForCodeAction(t,e.value);return n==null?void 0:n.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const n=new Jt(e.kind);return t.filter(i=>i.kind.contains(n)).filter(i=>i.preferred?e.isPreferred:!0).reduceRight((i,o)=>i?i.kind.contains(o.kind)?o:i:o,void 0)}},wF=cg,cg.codeActionCommands=[PX,MX,OX,vF,CF],cg);yF=wF=gLe([mLe(0,wt)],yF);T("symbolIcon.arrayForeground",Xe,m("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.booleanForeground",Xe,m("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},m("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.colorForeground",Xe,m("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.constantForeground",Xe,m("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},m("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},m("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.fileForeground",Xe,m("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.folderForeground",Xe,m("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.keyForeground",Xe,m("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.keywordForeground",Xe,m("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},m("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.moduleForeground",Xe,m("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.namespaceForeground",Xe,m("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.nullForeground",Xe,m("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.numberForeground",Xe,m("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.objectForeground",Xe,m("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.operatorForeground",Xe,m("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.packageForeground",Xe,m("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.propertyForeground",Xe,m("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.referenceForeground",Xe,m("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.snippetForeground",Xe,m("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.stringForeground",Xe,m("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.structForeground",Xe,m("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.textForeground",Xe,m("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.typeParameterForeground",Xe,m("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.unitForeground",Xe,m("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));T("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},m("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));const FX=Object.freeze({kind:Jt.Empty,title:m("codeAction.widget.id.more","More Actions...")}),pLe=Object.freeze([{kind:Gt.QuickFix,title:m("codeAction.widget.id.quickfix","Quick Fix")},{kind:Gt.RefactorExtract,title:m("codeAction.widget.id.extract","Extract"),icon:J.wrench},{kind:Gt.RefactorInline,title:m("codeAction.widget.id.inline","Inline"),icon:J.wrench},{kind:Gt.RefactorRewrite,title:m("codeAction.widget.id.convert","Rewrite"),icon:J.wrench},{kind:Gt.RefactorMove,title:m("codeAction.widget.id.move","Move"),icon:J.wrench},{kind:Gt.SurroundWith,title:m("codeAction.widget.id.surround","Surround With"),icon:J.surroundWith},{kind:Gt.Source,title:m("codeAction.widget.id.source","Source Action"),icon:J.symbolFile},FX]);function _Le(s,e,t){if(!e)return s.map(o=>{var r;return{kind:"action",item:o,group:FX,disabled:!!o.action.disabled,label:o.action.disabled||o.action.title,canPreview:!!((r=o.action.edit)!=null&&r.edits.length)}});const n=pLe.map(o=>({group:o,actions:[]}));for(const o of s){const r=o.action.kind?new Jt(o.action.kind):Jt.None;for(const a of n)if(a.group.kind.contains(r)){a.actions.push(o);break}}const i=[];for(const o of n)if(o.actions.length){i.push({kind:"header",group:o.group});for(const r of o.actions){const a=o.group;i.push({kind:"action",item:r,group:r.action.isAI?{title:a.title,kind:a.kind,icon:J.sparkle}:a,label:r.action.title,disabled:!!r.action.disabled,keybinding:t(r.action)})}}return i}var bLe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vLe=function(s,e){return function(t,n){e(t,n,s)}},yp;const Wz=jt("gutter-lightbulb",J.lightBulb,m("gutterLightbulbWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor.")),Bz=jt("gutter-lightbulb-auto-fix",J.lightbulbAutofix,m("gutterLightbulbAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.")),Hz=jt("gutter-lightbulb-sparkle",J.lightbulbSparkle,m("gutterLightbulbAIFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.")),Vz=jt("gutter-lightbulb-aifix-auto-fix",J.lightbulbSparkleAutofix,m("gutterLightbulbAIFixAutoFixWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.")),zz=jt("gutter-lightbulb-sparkle-filled",J.sparkleFilled,m("gutterLightbulbSparkleFilledWidget","Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available."));var Ca;(function(s){s.Hidden={type:0};class e{constructor(n,i,o,r){this.actions=n,this.trigger=i,this.editorPosition=o,this.widgetPosition=r,this.type=1}}s.Showing=e})(Ca||(Ca={}));var td;let B1=(td=class extends F{constructor(e,t){super(),this._editor=e,this._keybindingService=t,this._onClick=this._register(new O),this.onClick=this._onClick.event,this._state=Ca.Hidden,this._gutterState=Ca.Hidden,this._iconClasses=[],this.lightbulbClasses=["codicon-"+Wz.id,"codicon-"+Vz.id,"codicon-"+Bz.id,"codicon-"+Hz.id,"codicon-"+zz.id],this.gutterDecoration=yp.GUTTER_DECORATION,this._domNode=te("div.lightBulbWidget"),this._domNode.role="listbox",this._register(Ki.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(n=>{const i=this._editor.getModel();(this.state.type!==1||!i||this.state.editorPosition.lineNumber>=i.getLineCount())&&this.hide(),(this.gutterState.type!==1||!i||this.gutterState.editorPosition.lineNumber>=i.getLineCount())&&this.gutterHide()})),this._register(kse(this._domNode,n=>{if(this.state.type!==1)return;this._editor.focus(),n.preventDefault();const{top:i,height:o}=Sn(this._domNode),r=this._editor.getOption(67);let a=Math.floor(r/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(a+=r),this._onClick.fire({x:n.posx,y:i+o+a,actions:this.state.actions,trigger:this.state.trigger})})),this._register($(this._domNode,"mouseenter",n=>{(n.buttons&1)===1&&this.hide()})),this._register(se.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,()=>{var n,i;this._preferredKbLabel=((n=this._keybindingService.lookupKeybinding(AX))==null?void 0:n.getLabel())??void 0,this._quickFixKbLabel=((i=this._keybindingService.lookupKeybinding(bB))==null?void 0:i.getLabel())??void 0,this._updateLightBulbTitleAndIcon()})),this._register(this._editor.onMouseDown(async n=>{if(!n.target.element||!this.lightbulbClasses.some(l=>n.target.element&&n.target.element.classList.contains(l))||this.gutterState.type!==1)return;this._editor.focus();const{top:i,height:o}=Sn(n.target.element),r=this._editor.getOption(67);let a=Math.floor(r/3);this.gutterState.widgetPosition.position!==null&&this.gutterState.widgetPosition.position.lineNumber<this.gutterState.editorPosition.lineNumber&&(a+=r),this._onClick.fire({x:n.event.posx,y:i+o+a,actions:this.gutterState.actions,trigger:this.gutterState.trigger})}))}dispose(){super.dispose(),this._editor.removeContentWidget(this),this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(e,t,n){if(e.validActions.length<=0)return this.gutterHide(),this.hide();if(!this._editor.hasTextFocus())return this.gutterHide(),this.hide();if(!this._editor.getOptions().get(65).enabled)return this.gutterHide(),this.hide();const r=this._editor.getModel();if(!r)return this.gutterHide(),this.hide();const{lineNumber:a,column:l}=r.validatePosition(n),c=r.getOptions().tabSize,d=this._editor.getOptions().get(50),h=r.getLineContent(a),u=oE(h,c),f=d.spaceWidth*u>22,g=y=>y>2&&this._editor.getTopForLineNumber(y)===this._editor.getTopForLineNumber(y-1),p=this._editor.getLineDecorations(a);let _=!1;if(p)for(const y of p){const k=y.options.glyphMarginClassName;if(k&&!this.lightbulbClasses.some(x=>k.includes(x))){_=!0;break}}let b=a,v=1;if(!f){const y=k=>{const x=r.getLineContent(k);return/^\s*$|^\s+/.test(x)||x.length<=v};if(a>1&&!g(a-1)){const k=r.getLineCount(),x=a===k,D=a>1&&y(a-1),N=!x&&y(a+1),W=y(a),B=!N&&!D;if(!N&&!D&&!_)return this.gutterState=new Ca.Showing(e,t,n,{position:{lineNumber:b,column:v},preference:yp._posPref}),this.renderGutterLightbub(),this.hide();D||x||D&&!W?b-=1:(N||B&&W)&&(b+=1)}else if(a===1&&(a===r.getLineCount()||!y(a+1)&&!y(a)))if(this.gutterState=new Ca.Showing(e,t,n,{position:{lineNumber:b,column:v},preference:yp._posPref}),_)this.gutterHide();else return this.renderGutterLightbub(),this.hide();else if(a<r.getLineCount()&&!g(a+1))b+=1;else if(l*d.spaceWidth<22)return this.hide();v=/^\S\s*$/.test(r.getLineContent(b))?2:1}this.state=new Ca.Showing(e,t,n,{position:{lineNumber:b,column:v},preference:yp._posPref}),this._gutterDecorationID&&(this._removeGutterDecoration(this._gutterDecorationID),this.gutterHide());const C=e.validActions,w=e.validActions[0].action.kind;if(C.length!==1||!w){this._editor.layoutContentWidget(this);return}this._editor.layoutContentWidget(this)}hide(){this.state!==Ca.Hidden&&(this.state=Ca.Hidden,this._editor.layoutContentWidget(this))}gutterHide(){this.gutterState!==Ca.Hidden&&(this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID),this.gutterState=Ca.Hidden)}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}get gutterState(){return this._gutterState}set gutterState(e){this._gutterState=e,this._updateGutterLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],this.state.type!==1)return;let e,t=!1;this.state.actions.allAIFixes?(e=J.sparkleFilled,this.state.actions.validActions.length===1&&(t=!0)):this.state.actions.hasAutoFix?this.state.actions.hasAIFix?e=J.lightbulbSparkleAutofix:e=J.lightbulbAutofix:this.state.actions.hasAIFix?e=J.lightbulbSparkle:e=J.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,t),this._iconClasses=De.asClassNameArray(e),this._domNode.classList.add(...this._iconClasses)}_updateGutterLightBulbTitleAndIcon(){if(this.gutterState.type!==1)return;let e,t=!1;this.gutterState.actions.allAIFixes?(e=zz,this.gutterState.actions.validActions.length===1&&(t=!0)):this.gutterState.actions.hasAutoFix?this.gutterState.actions.hasAIFix?e=Vz:e=Bz:this.gutterState.actions.hasAIFix?e=Hz:e=Wz,this._updateLightbulbTitle(this.gutterState.actions.hasAutoFix,t);const n=Ve.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:De.asClassName(e),glyphMargin:{position:ia.Left},stickiness:1});this.gutterDecoration=n}renderGutterLightbub(){const e=this._editor.getSelection();e&&(this._gutterDecorationID===void 0?this._addGutterDecoration(e.startLineNumber):this._updateGutterDecoration(this._gutterDecorationID,e.startLineNumber))}_addGutterDecoration(e){this._editor.changeDecorations(t=>{this._gutterDecorationID=t.addDecoration(new L(e,0,e,0),this.gutterDecoration)})}_removeGutterDecoration(e){this._editor.changeDecorations(t=>{t.removeDecoration(e),this._gutterDecorationID=void 0})}_updateGutterDecoration(e,t){this._editor.changeDecorations(n=>{n.changeDecoration(e,new L(t,0,t,0)),n.changeDecorationOptions(e,this.gutterDecoration)})}_updateLightbulbTitle(e,t){this.state.type===1&&(t?this.title=m("codeActionAutoRun","Run: {0}",this.state.actions.validActions[0].action.title):e&&this._preferredKbLabel?this.title=m("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!e&&this._quickFixKbLabel?this.title=m("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):e||(this.title=m("codeAction","Show Code Actions")))}set title(e){this._domNode.title=e}},yp=td,td.GUTTER_DECORATION=Ve.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:De.asClassName(J.lightBulb),glyphMargin:{position:ia.Left},stickiness:1}),td.ID="editor.contrib.lightbulbWidget",td._posPref=[0],td);B1=yp=bLe([vLe(1,wt)],B1);var WX=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},SF=function(s,e){return function(t,n){e(t,n,s)}};const BX="acceptSelectedCodeAction",HX="previewSelectedCodeAction";class CLe{get templateId(){return"header"}renderTemplate(e){e.classList.add("group-header");const t=document.createElement("span");return e.append(t),{container:e,text:t}}renderElement(e,t,n){var i;n.text.textContent=((i=e.group)==null?void 0:i.title)??""}disposeTemplate(e){}}let kF=class{get templateId(){return"action"}constructor(e,t){this._supportsPreview=e,this._keybindingService=t}renderTemplate(e){e.classList.add(this.templateId);const t=document.createElement("div");t.className="icon",e.append(t);const n=document.createElement("span");n.className="title",e.append(n);const i=new cv(e,mo);return{container:e,icon:t,text:n,keybinding:i}}renderElement(e,t,n){var r,a,l;if((r=e.group)!=null&&r.icon?(n.icon.className=De.asClassName(e.group.icon),e.group.icon.color&&(n.icon.style.color=de(e.group.icon.color.id))):(n.icon.className=De.asClassName(J.lightBulb),n.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!e.item||!e.label)return;n.text.textContent=VX(e.label),n.keybinding.set(e.keybinding),Bse(!!e.keybinding,n.keybinding.element);const i=(a=this._keybindingService.lookupKeybinding(BX))==null?void 0:a.getLabel(),o=(l=this._keybindingService.lookupKeybinding(HX))==null?void 0:l.getLabel();n.container.classList.toggle("option-disabled",e.disabled),e.disabled?n.container.title=e.label:i&&o?this._supportsPreview&&e.canPreview?n.container.title=m({key:"label-preview",comment:['placeholders are keybindings, e.g "F2 to Apply, Shift+F2 to Preview"']},"{0} to Apply, {1} to Preview",i,o):n.container.title=m({key:"label",comment:['placeholder is a keybinding, e.g "F2 to Apply"']},"{0} to Apply",i):n.container.title=""}disposeTemplate(e){e.keybinding.dispose()}};kF=WX([SF(1,wt)],kF);class wLe extends UIEvent{constructor(){super("acceptSelectedAction")}}class $z extends UIEvent{constructor(){super("previewSelectedAction")}}function yLe(s){if(s.kind==="action")return s.label}let LF=class extends F{constructor(e,t,n,i,o,r){super(),this._delegate=i,this._contextViewService=o,this._keybindingService=r,this._actionLineHeight=24,this._headerLineHeight=26,this.cts=this._register(new an),this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");const a={getHeight:l=>l.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:l=>l.kind};this._list=this._register(new or(e,this.domNode,a,[new kF(t,this._keybindingService),new CLe],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:yLe},accessibilityProvider:{getAriaLabel:l=>{if(l.kind==="action"){let c=l.label?VX(l==null?void 0:l.label):"";return l.disabled&&(c=m({key:"customQuickFixWidget.labels",comment:["Action widget labels for accessibility."]},"{0}, Disabled Reason: {1}",c,l.disabled)),c}return null},getWidgetAriaLabel:()=>m({key:"customQuickFixWidget",comment:["An action widget option"]},"Action Widget"),getRole:l=>l.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(Em),this._register(this._list.onMouseClick(l=>this.onListClick(l))),this._register(this._list.onMouseOver(l=>this.onListHover(l))),this._register(this._list.onDidChangeFocus(()=>this.onFocus())),this._register(this._list.onDidChangeSelection(l=>this.onListSelection(l))),this._allMenuItems=n,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(e){return!e.disabled&&e.kind==="action"}hide(e){this._delegate.onHide(e),this.cts.cancel(),this._contextViewService.hideContextView()}layout(e){const t=this._allMenuItems.filter(l=>l.kind==="header").length,i=this._allMenuItems.length*this._actionLineHeight+t*this._headerLineHeight-t*this._actionLineHeight;this._list.layout(i);let o=e;if(this._allMenuItems.length>=50)o=380;else{const l=this._allMenuItems.map((c,d)=>{const h=this.domNode.ownerDocument.getElementById(this._list.getElementID(d));if(h){h.style.width="auto";const u=h.getBoundingClientRect().width;return h.style.width="",u}return 0});o=Math.max(...l,e)}const a=Math.min(i,this.domNode.ownerDocument.body.clientHeight*.7);return this._list.layout(a,o),this.domNode.style.height=`${a}px`,this._list.domFocus(),o}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(e){const t=this._list.getFocus();if(t.length===0)return;const n=t[0],i=this._list.element(n);if(!this.focusCondition(i))return;const o=e?new $z:new wLe;this._list.setSelection([n],o)}onListSelection(e){if(!e.elements.length)return;const t=e.elements[0];t.item&&this.focusCondition(t)?this._delegate.onSelect(t.item,e.browserEvent instanceof $z):this._list.setSelection([])}onFocus(){var i,o;const e=this._list.getFocus();if(e.length===0)return;const t=e[0],n=this._list.element(t);(o=(i=this._delegate).onFocus)==null||o.call(i,n.item)}async onListHover(e){const t=e.element;if(t&&t.item&&this.focusCondition(t)){if(this._delegate.onHover&&!t.disabled&&t.kind==="action"){const n=await this._delegate.onHover(t.item,this.cts.token);t.canPreview=n?n.canPreview:void 0}e.index&&this._list.splice(e.index,1,[t])}this._list.setFocus(typeof e.index=="number"?[e.index]:[])}onListClick(e){e.element&&this.focusCondition(e.element)&&this._list.setFocus([])}};LF=WX([SF(4,Rd),SF(5,wt)],LF);function VX(s){return s.replace(/\r\n|\r|\n/g," ")}var SLe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},zR=function(s,e){return function(t,n){e(t,n,s)}};T("actionBar.toggledBackground",y0,m("actionBar.toggledBackground","Background color for toggled action items in action bar."));const fm={Visible:new le("codeActionMenuVisible",!1,m("codeActionMenuVisible","Whether the action widget list is visible"))},Fm=tt("actionWidgetService");let gm=class extends F{get isVisible(){return fm.Visible.getValue(this._contextKeyService)||!1}constructor(e,t,n){super(),this._contextViewService=e,this._contextKeyService=t,this._instantiationService=n,this._list=this._register(new ai)}show(e,t,n,i,o,r,a){const l=fm.Visible.bindTo(this._contextKeyService),c=this._instantiationService.createInstance(LF,e,t,n,i);this._contextViewService.showContextView({getAnchor:()=>o,render:d=>(l.set(!0),this._renderWidget(d,c,a??[])),onHide:d=>{l.reset(),this._onWidgetClosed(d)}},r,!1)}acceptSelected(e){var t;(t=this._list.value)==null||t.acceptSelected(e)}focusPrevious(){var e,t;(t=(e=this._list)==null?void 0:e.value)==null||t.focusPrevious()}focusNext(){var e,t;(t=(e=this._list)==null?void 0:e.value)==null||t.focusNext()}hide(e){var t;(t=this._list.value)==null||t.hide(e),this._list.clear()}_renderWidget(e,t,n){var f;const i=document.createElement("div");if(i.classList.add("action-widget"),e.appendChild(i),this._list.value=t,this._list.value)i.appendChild(this._list.value.domNode);else throw new Error("List has no value");const o=new q,r=document.createElement("div"),a=e.appendChild(r);a.classList.add("context-view-block"),o.add($(a,ee.MOUSE_DOWN,g=>g.stopPropagation()));const l=document.createElement("div"),c=e.appendChild(l);c.classList.add("context-view-pointerBlock"),o.add($(c,ee.POINTER_MOVE,()=>c.remove())),o.add($(c,ee.MOUSE_DOWN,()=>c.remove()));let d=0;if(n.length){const g=this._createActionBar(".action-widget-action-bar",n);g&&(i.appendChild(g.getContainer().parentElement),o.add(g),d=g.getContainer().offsetWidth)}const h=(f=this._list.value)==null?void 0:f.layout(d);i.style.width=`${h}px`;const u=o.add(Ka(e));return o.add(u.onDidBlur(()=>this.hide(!0))),o}_createActionBar(e,t){if(!t.length)return;const n=te(e),i=new Zo(n);return i.push(t,{icon:!1,label:!0}),i}_onWidgetClosed(e){var t;(t=this._list.value)==null||t.hide(e)}};gm=SLe([zR(0,Rd),zR(1,Ie),zR(2,Ce)],gm);st(Fm,gm,1);const j0=1100;Ot(class extends Rs{constructor(){super({id:"hideCodeActionWidget",title:Ee("hideCodeActionWidget.title","Hide action widget"),precondition:fm.Visible,keybinding:{weight:j0,primary:9,secondary:[1033]}})}run(s){s.get(Fm).hide(!0)}});Ot(class extends Rs{constructor(){super({id:"selectPrevCodeAction",title:Ee("selectPrevCodeAction.title","Select previous action"),precondition:fm.Visible,keybinding:{weight:j0,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(s){const e=s.get(Fm);e instanceof gm&&e.focusPrevious()}});Ot(class extends Rs{constructor(){super({id:"selectNextCodeAction",title:Ee("selectNextCodeAction.title","Select next action"),precondition:fm.Visible,keybinding:{weight:j0,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(s){const e=s.get(Fm);e instanceof gm&&e.focusNext()}});Ot(class extends Rs{constructor(){super({id:BX,title:Ee("acceptSelected.title","Accept selected action"),precondition:fm.Visible,keybinding:{weight:j0,primary:3,secondary:[2137]}})}run(s){const e=s.get(Fm);e instanceof gm&&e.acceptSelected()}});Ot(class extends Rs{constructor(){super({id:HX,title:Ee("previewSelected.title","Preview selected action"),precondition:fm.Visible,keybinding:{weight:j0,primary:2051}})}run(s){const e=s.get(Fm);e instanceof gm&&e.acceptSelected(!0)}});const zX=new le("supportedCodeAction",""),Uz="_typescript.applyFixAllCodeAction";class kLe extends F{constructor(e,t,n,i=250){super(),this._editor=e,this._markerService=t,this._signalChange=n,this._delay=i,this._autoTriggerTimer=this._register(new la),this._register(this._markerService.onMarkerChanged(o=>this._onMarkerChanges(o))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some(n=>s1(n,t.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:ko.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getSelection();if(e.type===1)return t;const n=this._editor.getOption(65).enabled;if(n!==$r.Off){{if(n===$r.On)return t;if(n===$r.OnCode){if(!t.isEmpty())return t;const o=this._editor.getModel(),{lineNumber:r,column:a}=t.getPosition(),l=o.getLineContent(r);if(l.length===0)return;if(a===1){if(/\s/.test(l[0]))return}else if(a===o.getLineMaxColumn(r)){if(/\s/.test(l[l.length-1]))return}else if(/\s/.test(l[a-2])&&/\s/.test(l[a-1]))return}}return t}}}var Cf;(function(s){s.Empty={type:0};class e{constructor(n,i,o){this.trigger=n,this.position=i,this._cancellablePromise=o,this.type=1,this.actions=o.catch(r=>{if(Tr(r))return $X;throw r})}cancel(){this._cancellablePromise.cancel()}}s.Triggered=e})(Cf||(Cf={}));const $X=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1});class LLe extends F{constructor(e,t,n,i,o,r,a){super(),this._editor=e,this._registry=t,this._markerService=n,this._progressService=o,this._configurationService=r,this._telemetryService=a,this._codeActionOracle=this._register(new ai),this._state=Cf.Empty,this._onDidChangeState=this._register(new O),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=zX.bindTo(i),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._register(this._editor.onDidChangeConfiguration(l=>{l.hasChanged(65)&&this._update()})),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(Cf.Empty,!0))}_settingEnabledNearbyQuickfixes(){var t;const e=(t=this._editor)==null?void 0:t.getModel();return this._configurationService?this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:e==null?void 0:e.uri}):!1}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(Cf.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(92)){const t=this._registry.all(e).flatMap(n=>n.providedCodeActionKinds??[]);this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new kLe(this._editor,this._markerService,n=>{var l;if(!n){this.setState(Cf.Empty);return}const i=n.selection.getStartPosition(),o=si(async c=>{var d,h,u,f,g,p,_,b,v,C;if(this._settingEnabledNearbyQuickfixes()&&n.trigger.type===1&&(n.trigger.triggerAction===ko.QuickFix||(h=(d=n.trigger.filter)==null?void 0:d.include)!=null&&h.contains(Gt.QuickFix))){const w=await qp(this._registry,e,n.selection,n.trigger,Aa.None,c),y=[...w.allActions];if(c.isCancellationRequested)return $X;const k=(u=w.validActions)==null?void 0:u.some(D=>D.action.kind?Gt.QuickFix.contains(new Jt(D.action.kind)):!1),x=this._markerService.read({resource:e.uri});if(k){for(const D of w.validActions)(g=(f=D.action.command)==null?void 0:f.arguments)!=null&&g.some(N=>typeof N=="string"&&N.includes(Uz))&&(D.action.diagnostics=[...x.filter(N=>N.relatedInformation)]);return{validActions:w.validActions,allActions:y,documentation:w.documentation,hasAutoFix:w.hasAutoFix,hasAIFix:w.hasAIFix,allAIFixes:w.allAIFixes,dispose:()=>{w.dispose()}}}else if(!k&&x.length>0){const D=n.selection.getPosition();let N=D,W=Number.MAX_VALUE;const B=[...w.validActions];for(const U of x){const H=U.endColumn,X=U.endLineNumber,re=U.startLineNumber;if(X===D.lineNumber||re===D.lineNumber){N=new A(X,H);const fe={type:n.trigger.type,triggerAction:n.trigger.triggerAction,filter:{include:(p=n.trigger.filter)!=null&&p.include?(_=n.trigger.filter)==null?void 0:_.include:Gt.QuickFix},autoApply:n.trigger.autoApply,context:{notAvailableMessage:((b=n.trigger.context)==null?void 0:b.notAvailableMessage)||"",position:N}},pe=new me(N.lineNumber,N.column,N.lineNumber,N.column),ce=await qp(this._registry,e,pe,fe,Aa.None,c);if(ce.validActions.length!==0){for(const Oe of ce.validActions)(C=(v=Oe.action.command)==null?void 0:v.arguments)!=null&&C.some(Fe=>typeof Fe=="string"&&Fe.includes(Uz))&&(Oe.action.diagnostics=[...x.filter(Fe=>Fe.relatedInformation)]);w.allActions.length===0&&y.push(...ce.allActions),Math.abs(D.column-H)<W?B.unshift(...ce.validActions):B.push(...ce.validActions)}W=Math.abs(D.column-H)}}const z=B.filter((U,H,X)=>X.findIndex(re=>re.action.title===U.action.title)===H);return z.sort((U,H)=>U.action.isPreferred&&!H.action.isPreferred?-1:!U.action.isPreferred&&H.action.isPreferred||U.action.isAI&&!H.action.isAI?1:!U.action.isAI&&H.action.isAI?-1:0),{validActions:z,allActions:y,documentation:w.documentation,hasAutoFix:w.hasAutoFix,hasAIFix:w.hasAIFix,allAIFixes:w.allAIFixes,dispose:()=>{w.dispose()}}}}if(n.trigger.type===1){const w=new pi,y=await qp(this._registry,e,n.selection,n.trigger,Aa.None,c);return this._telemetryService&&this._telemetryService.publicLog2("codeAction.invokedDurations",{codeActions:y.validActions.length,duration:w.elapsed()}),y}return qp(this._registry,e,n.selection,n.trigger,Aa.None,c)});n.trigger.type===1&&((l=this._progressService)==null||l.showWhile(o,250));const r=new Cf.Triggered(n.trigger,i,o);let a=!1;this._state.type===1&&(a=this._state.trigger.type===1&&r.type===1&&r.trigger.type===2&&this._state.position!==r.position),a?setTimeout(()=>{this.setState(r)},500):this.setState(r)},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:ko.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;(t=this._codeActionOracle.value)==null||t.trigger(e)}setState(e,t){e!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=e,!t&&!this._disposed&&this._onDidChangeState.fire(e))}}var xLe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},hl=function(s,e){return function(t,n){e(t,n,s)}},Sp;const DLe="quickfix-edit-highlight";var Hh;let Eb=(Hh=class extends F{static get(e){return e.getContribution(Sp.ID)}constructor(e,t,n,i,o,r,a,l,c,d,h){super(),this._commandService=a,this._configurationService=l,this._actionWidgetService=c,this._instantiationService=d,this._telemetryService=h,this._activeCodeActions=this._register(new ai),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new LLe(this._editor,o.codeActionProvider,t,n,r,l,this._telemetryService)),this._register(this._model.onDidChangeState(u=>this.update(u))),this._lightBulbWidget=new ja(()=>{const u=this._editor.getContribution(B1.ID);return u&&this._register(u.onClick(f=>this.showCodeActionsFromLightbulb(f.actions,f))),u}),this._resolver=i.createInstance(yF),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(e,t){if(e.allAIFixes&&e.validActions.length===1){const n=e.validActions[0],i=n.action.command;i&&i.id==="inlineChat.start"&&i.arguments&&i.arguments.length>=1&&(i.arguments[0]={...i.arguments[0],autoSend:!1}),await this._applyCodeAction(n,!1,!1,Af.FromAILightbulb);return}await this.showCodeActionList(e,t,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(e,t,n){return this.showCodeActionList(t,n,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,n,i){var r;if(!this._editor.hasModel())return;(r=vo.get(this._editor))==null||r.closeMessage();const o=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:n,autoApply:i,context:{notAvailableMessage:e,position:o}})}_trigger(e){return this._model.trigger(e)}async _applyCodeAction(e,t,n,i){try{await this._instantiationService.invokeFunction(uLe,e,i,{preview:n,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:ko.QuickFix,filter:{}})}}hideLightBulbWidget(){var e,t;(e=this._lightBulbWidget.rawValue)==null||e.hide(),(t=this._lightBulbWidget.rawValue)==null||t.gutterHide()}async update(e){var i,o,r,a,l;if(e.type!==1){this.hideLightBulbWidget();return}let t;try{t=await e.actions}catch(c){Pe(c);return}if(this._disposed)return;const n=this._editor.getSelection();if((n==null?void 0:n.startLineNumber)===e.position.lineNumber)if((i=this._lightBulbWidget.value)==null||i.update(t,e.trigger,e.position),e.trigger.type===1){if((o=e.trigger.filter)!=null&&o.include){const d=this.tryGetValidActionToApply(e.trigger,t);if(d){try{this.hideLightBulbWidget(),await this._applyCodeAction(d,!1,!1,Af.FromCodeActions)}finally{t.dispose()}return}if(e.trigger.context){const h=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,t);if(h&&h.action.disabled){(r=vo.get(this._editor))==null||r.showMessage(h.action.disabled,e.trigger.context.position),t.dispose();return}}}const c=!!((a=e.trigger.filter)!=null&&a.include);if(e.trigger.context&&(!t.allActions.length||!c&&!t.validActions.length)){(l=vo.get(this._editor))==null||l.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=t,t.dispose();return}this._activeCodeActions.value=t,this.showCodeActionList(t,this.toCoords(e.position),{includeDisabledActions:c,fromLightbulb:!1})}else this._actionWidgetService.isVisible?t.dispose():this._activeCodeActions.value=t}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length&&(e.autoApply==="first"&&t.validActions.length===0||e.autoApply==="ifSingle"&&t.allActions.length===1))return t.allActions.find(({action:n})=>n.disabled)}tryGetValidActionToApply(e,t){if(t.validActions.length&&(e.autoApply==="first"&&t.validActions.length>0||e.autoApply==="ifSingle"&&t.validActions.length===1))return t.validActions[0]}async showCodeActionList(e,t,n){const i=this._editor.createDecorationsCollection(),o=this._editor.getDomNode();if(!o)return;const r=n.includeDisabledActions&&(this._showDisabled||e.validActions.length===0)?e.allActions:e.validActions;if(!r.length)return;const a=A.isIPosition(t)?this.toCoords(t):t,l={onSelect:async(c,d)=>{this._applyCodeAction(c,!0,!!d,n.fromLightbulb?Af.FromAILightbulb:Af.FromCodeActions),this._actionWidgetService.hide(!1),i.clear()},onHide:c=>{var d;(d=this._editor)==null||d.focus(),i.clear()},onHover:async(c,d)=>{var f;if(d.isCancellationRequested)return;let h=!1;const u=c.action.kind;if(u){const g=new Jt(u);h=[Gt.RefactorExtract,Gt.RefactorInline,Gt.RefactorRewrite,Gt.RefactorMove,Gt.Source].some(_=>_.contains(g))}return{canPreview:h||!!((f=c.action.edit)!=null&&f.edits.length)}},onFocus:c=>{var d,h;if(c&&c.action){const u=c.action.ranges,f=c.action.diagnostics;if(i.clear(),u&&u.length>0){const g=f&&(f==null?void 0:f.length)>1?f.map(p=>({range:p,options:Sp.DECORATION})):u.map(p=>({range:p,options:Sp.DECORATION}));i.set(g)}else if(f&&f.length>0){const g=f.map(_=>({range:_,options:Sp.DECORATION}));i.set(g);const p=f[0];if(p.startLineNumber&&p.startColumn){const _=(h=(d=this._editor.getModel())==null?void 0:d.getWordAtPosition({lineNumber:p.startLineNumber,column:p.startColumn}))==null?void 0:h.word;Zl(m("editingNewSelection","Context: {0} at line {1} and column {2}.",_,p.startLineNumber,p.startColumn))}}}else i.clear()}};this._actionWidgetService.show("codeActionWidget",!0,_Le(r,this._shouldShowHeaders(),this._resolver.getResolver()),l,a,o,this._getActionBarActions(e,t,n))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),n=Sn(this._editor.getDomNode()),i=n.left+t.left,o=n.top+t.top+t.height;return{x:i,y:o}}_shouldShowHeaders(){var t;const e=(t=this._editor)==null?void 0:t.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:e==null?void 0:e.uri})}_getActionBarActions(e,t,n){if(n.fromLightbulb)return[];const i=e.documentation.map(o=>({id:o.id,label:o.title,tooltip:o.tooltip??"",class:void 0,enabled:!0,run:()=>this._commandService.executeCommand(o.id,...o.arguments??[])}));return n.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&i.push(this._showDisabled?{id:"hideMoreActions",label:m("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,n))}:{id:"showMoreActions",label:m("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,n))}),i}},Sp=Hh,Hh.ID="editor.contrib.codeActionController",Hh.DECORATION=Ve.register({description:"quickfix-highlight",className:DLe}),Hh);Eb=Sp=xLe([hl(1,rc),hl(2,Ie),hl(3,Ce),hl(4,ue),hl(5,Lu),hl(6,Wt),hl(7,Ze),hl(8,Fm),hl(9,Ce),hl(10,Zi)],Eb);Er((s,e)=>{((i,o)=>{o&&e.addRule(`.monaco-editor ${i} { background-color: ${o}; }`)})(".quickfix-edit-highlight",s.getColor(Kc));const n=s.getColor(bh);n&&e.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${Ha(s.type)?"dotted":"solid"} ${n}; box-sizing: border-box; }`)});function q0(s){return K.regex(zX.keys()[0],new RegExp("(\\s|^)"+Xo(s.value)+"\\b"))}const vB={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:m("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:m("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[m("args.schema.apply.first","Always apply the first returned code action."),m("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),m("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:m("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function Wm(s,e,t,n,i=ko.Default){if(s.hasModel()){const o=Eb.get(s);o==null||o.manualTriggerAtCurrentPosition(e,i,t,n)}}class ILe extends he{constructor(){super({id:bB,label:m("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:K.and(I.writable,I.hasCodeActionsProvider),kbOpts:{kbExpr:I.textInputFocus,primary:2137,weight:100}})}run(e,t){return Wm(t,m("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,ko.QuickFix)}}class TLe extends Zn{constructor(){super({id:MX,precondition:K.and(I.writable,I.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:vB}]}})}runEditorCommand(e,t,n){const i=Pl.fromUser(n,{kind:Jt.Empty,apply:"ifSingle"});return Wm(t,typeof(n==null?void 0:n.kind)=="string"?i.preferred?m("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",n.kind):m("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",n.kind):i.preferred?m("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):m("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}class ELe extends he{constructor(){super({id:PX,label:m("refactor.label","Refactor..."),alias:"Refactor...",precondition:K.and(I.writable,I.hasCodeActionsProvider),kbOpts:{kbExpr:I.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:K.and(I.writable,q0(Gt.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:vB}]}})}run(e,t,n){const i=Pl.fromUser(n,{kind:Gt.Refactor,apply:"never"});return Wm(t,typeof(n==null?void 0:n.kind)=="string"?i.preferred?m("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",n.kind):m("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",n.kind):i.preferred?m("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):m("editor.action.refactor.noneMessage","No refactorings available"),{include:Gt.Refactor.contains(i.kind)?i.kind:Jt.None,onlyIncludePreferredActions:i.preferred},i.apply,ko.Refactor)}}class NLe extends he{constructor(){super({id:OX,label:m("source.label","Source Action..."),alias:"Source Action...",precondition:K.and(I.writable,I.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:K.and(I.writable,q0(Gt.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:vB}]}})}run(e,t,n){const i=Pl.fromUser(n,{kind:Gt.Source,apply:"never"});return Wm(t,typeof(n==null?void 0:n.kind)=="string"?i.preferred?m("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",n.kind):m("editor.action.source.noneMessage.kind","No source actions for '{0}' available",n.kind):i.preferred?m("editor.action.source.noneMessage.preferred","No preferred source actions available"):m("editor.action.source.noneMessage","No source actions available"),{include:Gt.Source.contains(i.kind)?i.kind:Jt.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply,ko.SourceAction)}}class RLe extends he{constructor(){super({id:vF,label:m("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:K.and(I.writable,q0(Gt.SourceOrganizeImports)),kbOpts:{kbExpr:I.textInputFocus,primary:1581,weight:100}})}run(e,t){return Wm(t,m("editor.action.organize.noneMessage","No organize imports action available"),{include:Gt.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",ko.OrganizeImports)}}class MLe extends he{constructor(){super({id:CF,label:m("fixAll.label","Fix All"),alias:"Fix All",precondition:K.and(I.writable,q0(Gt.SourceFixAll))})}run(e,t){return Wm(t,m("fixAll.noneMessage","No fix all action available"),{include:Gt.SourceFixAll,includeSourceActions:!0},"ifSingle",ko.FixAll)}}class ALe extends he{constructor(){super({id:AX,label:m("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:K.and(I.writable,q0(Gt.QuickFix)),kbOpts:{kbExpr:I.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return Wm(t,m("editor.action.autoFix.noneMessage","No auto fixes available"),{include:Gt.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",ko.AutoFix)}}dt(Eb.ID,Eb,3);dt(B1.ID,B1,4);Q(ILe);Q(ELe);Q(NLe);Q(RLe);Q(ALe);Q(MLe);oe(new TLe);ln.as(ca.Configuration).registerConfiguration({...D0,properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:m("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}});ln.as(ca.Configuration).registerConfiguration({...D0,properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:m("includeNearbyQuickFixes","Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}});ln.as(ca.Configuration).registerConfiguration({...D0,properties:{"editor.codeActions.triggerOnFocusChange":{type:"boolean",scope:5,markdownDescription:m("triggerOnFocusChange","Enable triggering {0} when {1} is set to {2}. Code Actions must be set to {3} to be triggered for window and focus changes.","`#editor.codeActionsOnSave#`","`#files.autoSave#`","`afterDelay`","`always`"),default:!1}}});class xF{constructor(){this.lenses=[],this._disposables=new q}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const n of e.lenses)this.lenses.push({symbol:n,provider:t})}}async function UX(s,e,t){const n=s.ordered(e),i=new Map,o=new xF,r=n.map(async(a,l)=>{i.set(a,l);try{const c=await Promise.resolve(a.provideCodeLenses(e,t));c&&o.add(c,a)}catch(c){kn(c)}});return await Promise.all(r),o.lenses=o.lenses.sort((a,l)=>a.symbol.range.startLineNumber<l.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>l.symbol.range.startLineNumber?1:i.get(a.provider)<i.get(l.provider)?-1:i.get(a.provider)>i.get(l.provider)?1:a.symbol.range.startColumn<l.symbol.range.startColumn?-1:a.symbol.range.startColumn>l.symbol.range.startColumn?1:0),o}rt.registerCommand("_executeCodeLensProvider",function(s,...e){let[t,n]=e;gt(Se.isUri(t)),gt(typeof n=="number"||!n);const{codeLensProvider:i}=s.get(ue),o=s.get(Ut).getModel(t);if(!o)throw Cr();const r=[],a=new q;return UX(i,o,Ue.None).then(l=>{a.add(l);const c=[];for(const d of l.lenses)n==null||d.symbol.command?r.push(d.symbol):n-- >0&&d.provider.resolveCodeLens&&c.push(Promise.resolve(d.provider.resolveCodeLens(o,d.symbol,Ue.None)).then(h=>r.push(h||d.symbol)));return Promise.all(c)}).then(()=>r).finally(()=>{setTimeout(()=>a.dispose(),100)})});var PLe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},OLe=function(s,e){return function(t,n){e(t,n,s)}};const jX=tt("ICodeLensCache");class jz{constructor(e,t){this.lineCount=e,this.data=t}}let DF=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new ic(20,.75);const t="codelens/cache";Qv(Et,()=>e.remove(t,1));const n="codelens/cache2",i=e.get(n,1,"{}");this._deserialize(i);const o=se.filter(e.onWillSaveState,r=>r.reason===d1.SHUTDOWN);se.once(o)(r=>{e.store(n,this._serialize(),1,1)})}put(e,t){const n=t.lenses.map(r=>{var a;return{range:r.symbol.range,command:r.symbol.command&&{id:"",title:(a=r.symbol.command)==null?void 0:a.title}}}),i=new xF;i.add({lenses:n,dispose:()=>{}},this._fakeProvider);const o=new jz(e.getLineCount(),i);this._cache.set(e.uri.toString(),o)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,n]of this._cache){const i=new Set;for(const o of n.data.lenses)i.add(o.symbol.range.startLineNumber);e[t]={lineCount:n.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const n in t){const i=t[n],o=[];for(const a of i.lines)o.push({range:new L(a,1,a,11)});const r=new xF;r.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(n,new jz(i.lineCount,r))}}catch{}}};DF=PLe([OLe(0,da)],DF);st(jX,DF,1);class FLe{constructor(e,t,n){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=n,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){this._lastHeight===void 0?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}const Lw=class Lw{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id=`codelens.widget-${Lw._idPool++}`,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const n=[];let i=!1;for(let o=0;o<e.length;o++){const r=e[o];if(r&&(i=!0,r.command)){const a=Rh(r.command.title.trim());if(r.command.id){const l=`c${Lw._idPool++}`;n.push(te("a",{id:l,title:r.command.tooltip,role:"button"},...a)),this._commands.set(l,r.command)}else n.push(te("span",{title:r.command.tooltip},...a));o+1<e.length&&n.push(te("span",void 0," | "))}}i?(Di(this._domNode,...n),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):Di(this._domNode,te("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}};Lw._idPool=0;let IF=Lw;class $R{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let n=0,i=t.length;n<i;n++)this._addDecorationsCallbacks[n](t[n])}}const qz=Ve.register({collapseOnReplaceEdit:!0,description:"codelens"});class Kz{constructor(e,t,n,i,o,r){this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];let a;const l=[];this._data.forEach((c,d)=>{c.symbol.command&&l.push(c.symbol),n.addDecoration({range:c.symbol.range,options:qz},h=>this._decorationIds[d]=h),a?a=L.plusRange(a,c.symbol.range):a=L.lift(c.symbol.range)}),this._viewZone=new FLe(a.startLineNumber-1,o,r),this._viewZoneId=i.addZone(this._viewZone),l.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(l,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new IF(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],t==null||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((e,t)=>{const n=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!!(n&&L.isEmpty(i.range)===n.isEmpty())})}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach((n,i)=>{t.addDecoration({range:n.symbol.range,options:qz},o=>this._decorationIds[i]=o)})}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const n=e.getDecorationRange(this._decorationIds[t]);n&&(this._data[t].symbol.range=n)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const n=e[t];if(n){const{symbol:i}=this._data[t];i.command=n.command||i.command}}}getCommand(e){var t;return(t=this._contentWidget)==null?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var WLe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qv=function(s,e){return function(t,n){e(t,n,s)}},U_;let H1=(U_=class{constructor(e,t,n,i,o,r){this._editor=e,this._languageFeaturesService=t,this._commandService=i,this._notificationService=o,this._codeLensCache=r,this._disposables=new q,this._localToDispose=new q,this._lenses=[],this._oldCodeLensModels=new q,this._provideCodeLensDebounce=n.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=n.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new It(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{(a.hasChanged(50)||a.hasChanged(19)||a.hasChanged(18))&&this._updateLensStyle(),a.hasChanged(17)&&this._onModelChange()})),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),(e=this._currentCodeLensModel)==null||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52));let t=this._editor.getOption(19);return(!t||t<5)&&(t=this._editor.getOption(52)*.9|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),n=this._editor.getOption(18),i=this._editor.getOption(50),{style:o}=this._editor.getContainerDomNode();o.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),o.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),o.setProperty("--vscode-editorCodeLens-fontFeatureSettings",i.fontFeatureSettings),n&&(o.setProperty("--vscode-editorCodeLens-fontFamily",n),o.setProperty("--vscode-editorCodeLens-fontFamilyDefault",Ls.fontFamily)),this._editor.changeViewZones(r=>{for(const a of this._lenses)a.updateHeight(e,r)})}_localDispose(){var e,t,n;(e=this._getCodeLensModelPromise)==null||e.cancel(),this._getCodeLensModelPromise=void 0,(t=this._resolveCodeLensesPromise)==null||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),(n=this._currentCodeLensModel)==null||n.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e||!this._editor.getOption(17)||e.isTooLargeForTokenization())return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e)){t&&au(()=>{const i=this._codeLensCache.get(e);t===i&&(this._codeLensCache.delete(e),this._onModelChange())},30*1e3,this._localToDispose);return}for(const i of this._languageFeaturesService.codeLensProvider.all(e))if(typeof i.onDidChange=="function"){const o=i.onDidChange(()=>n.schedule());this._localToDispose.add(o)}const n=new It(()=>{var o;const i=Date.now();(o=this._getCodeLensModelPromise)==null||o.cancel(),this._getCodeLensModelPromise=si(r=>UX(this._languageFeaturesService.codeLensProvider,e,r)),this._getCodeLensModelPromise.then(r=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=r,this._codeLensCache.put(e,r);const a=this._provideCodeLensDebounce.update(e,Date.now()-i);n.delay=a,this._renderCodeLensSymbols(r),this._resolveCodeLensesInViewportSoon()},Pe)},this._provideCodeLensDebounce.get(e));this._localToDispose.add(n),this._localToDispose.add(ve(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{var i;this._editor.changeDecorations(o=>{this._editor.changeViewZones(r=>{const a=[];let l=-1;this._lenses.forEach(d=>{!d.isValid()||l===d.getLineNumber()?a.push(d):(d.update(r),l=d.getLineNumber())});const c=new $R;a.forEach(d=>{d.dispose(c,r),this._lenses.splice(this._lenses.indexOf(d),1)}),c.commit(o)})}),n.schedule(),this._resolveCodeLensesScheduler.cancel(),(i=this._resolveCodeLensesPromise)==null||i.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorText(()=>{n.schedule()})),this._localToDispose.add(this._editor.onDidBlurEditorText(()=>{n.cancel()})),this._localToDispose.add(this._editor.onDidScrollChange(i=>{i.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(ve(()=>{if(this._editor.getModel()){const i=Qa.capture(this._editor);this._editor.changeDecorations(o=>{this._editor.changeViewZones(r=>{this._disposeAllLenses(o,r)})}),i.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(i=>{if(i.target.type!==9)return;let o=i.target.element;if((o==null?void 0:o.tagName)==="SPAN"&&(o=o.parentElement),(o==null?void 0:o.tagName)==="A")for(const r of this._lenses){const a=r.getCommand(o);if(a){this._commandService.executeCommand(a.id,...a.arguments||[]).catch(l=>this._notificationService.error(l));break}}})),n.schedule()}_disposeAllLenses(e,t){const n=new $R;for(const i of this._lenses)i.dispose(n,t);e&&n.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),n=[];let i;for(const a of e.lenses){const l=a.symbol.range.startLineNumber;l<1||l>t||(i&&i[i.length-1].symbol.range.startLineNumber===l?i.push(a):(i=[a],n.push(i)))}if(!n.length&&!this._lenses.length)return;const o=Qa.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations(a=>{this._editor.changeViewZones(l=>{const c=new $R;let d=0,h=0;for(;h<n.length&&d<this._lenses.length;){const u=n[h][0].symbol.range.startLineNumber,f=this._lenses[d].getLineNumber();f<u?(this._lenses[d].dispose(c,l),this._lenses.splice(d,1)):f===u?(this._lenses[d].updateCodeLensSymbols(n[h],c),h++,d++):(this._lenses.splice(d,0,new Kz(n[h],this._editor,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),d++,h++)}for(;d<this._lenses.length;)this._lenses[d].dispose(c,l),this._lenses.splice(d,1);for(;h<n.length;)this._lenses.push(new Kz(n[h],this._editor,c,l,r.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),h++;c.commit(a)})}),o.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var r;(r=this._resolveCodeLensesPromise)==null||r.cancel(),this._resolveCodeLensesPromise=void 0;const e=this._editor.getModel();if(!e)return;const t=[],n=[];if(this._lenses.forEach(a=>{const l=a.computeIfNecessary(e);l&&(t.push(l),n.push(a))}),t.length===0)return;const i=Date.now(),o=si(a=>{const l=t.map((c,d)=>{const h=new Array(c.length),u=c.map((f,g)=>!f.symbol.command&&typeof f.provider.resolveCodeLens=="function"?Promise.resolve(f.provider.resolveCodeLens(e,f.symbol,a)).then(p=>{h[g]=p},kn):(h[g]=f.symbol,Promise.resolve(void 0)));return Promise.all(u).then(()=>{!a.isCancellationRequested&&!n[d].isDisposed()&&n[d].updateCommands(h)})});return Promise.all(l)});this._resolveCodeLensesPromise=o,this._resolveCodeLensesPromise.then(()=>{const a=this._resolveCodeLensesDebounce.update(e,Date.now()-i);this._resolveCodeLensesScheduler.delay=a,this._currentCodeLensModel&&this._codeLensCache.put(e,this._currentCodeLensModel),this._oldCodeLensModels.clear(),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},a=>{Pe(a),o===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}async getModel(){var e;return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,(e=this._currentCodeLensModel)!=null&&e.isDisposed?void 0:this._currentCodeLensModel}},U_.ID="css.editor.codeLens",U_);H1=WLe([qv(1,ue),qv(2,ir),qv(3,Wt),qv(4,En),qv(5,jX)],H1);dt(H1.ID,H1,1);Q(class extends he{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:I.hasCodeLensProvider,label:m("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(e,t){if(!t.hasModel())return;const n=e.get(Nr),i=e.get(Wt),o=e.get(En),r=t.getSelection().positionLineNumber,a=t.getContribution(H1.ID);if(!a)return;const l=await a.getModel();if(!l)return;const c=[];for(const u of l.lenses)u.symbol.command&&u.symbol.range.startLineNumber===r&&c.push({label:u.symbol.command.title,command:u.symbol.command});if(c.length===0)return;const d=await n.pick(c,{canPickMany:!1,placeHolder:m("placeHolder","Select a command")});if(!d)return;let h=d.command;if(l.isDisposed){const u=await a.getModel(),f=u==null?void 0:u.lenses.find(g=>{var p;return g.symbol.range.startLineNumber===r&&((p=g.symbol.command)==null?void 0:p.title)===h.title});if(!f||!f.symbol.command)return;h=f.symbol.command}try{await i.executeCommand(h.id,...h.arguments||[])}catch(u){o.error(u)}}});var qX=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},TF=function(s,e){return function(t,n){e(t,n,s)}};let V1=class{constructor(e){this._editorWorkerService=e}async provideDocumentColors(e,t){return this._editorWorkerService.computeDefaultDocumentColors(e.uri)}provideColorPresentations(e,t,n){const i=t.range,o=t.color,r=o.alpha,a=new Z(new ht(Math.round(255*o.red),Math.round(255*o.green),Math.round(255*o.blue),r)),l=r?Z.Format.CSS.formatRGB(a):Z.Format.CSS.formatRGBA(a),c=r?Z.Format.CSS.formatHSL(a):Z.Format.CSS.formatHSLA(a),d=r?Z.Format.CSS.formatHex(a):Z.Format.CSS.formatHexA(a),h=[];return h.push({label:l,textEdit:{range:i,text:l}}),h.push({label:c,textEdit:{range:i,text:c}}),h.push({label:d,textEdit:{range:i,text:d}}),h}};V1=qX([TF(0,to)],V1);let EF=class extends F{constructor(e,t){super(),this._register(e.colorProvider.register("*",new V1(t)))}};EF=qX([TF(0,ue),TF(1,to)],EF);hv(EF);async function KX(s,e,t,n=!0){return CB(new BLe,s,e,t,n)}function GX(s,e,t,n){return Promise.resolve(t.provideColorPresentations(s,e,n))}class BLe{constructor(){}async compute(e,t,n,i){const o=await e.provideDocumentColors(t,n);if(Array.isArray(o))for(const r of o)i.push({colorInfo:r,provider:e});return Array.isArray(o)}}class HLe{constructor(){}async compute(e,t,n,i){const o=await e.provideDocumentColors(t,n);if(Array.isArray(o))for(const r of o)i.push({range:r.range,color:[r.color.red,r.color.green,r.color.blue,r.color.alpha]});return Array.isArray(o)}}class VLe{constructor(e){this.colorInfo=e}async compute(e,t,n,i){const o=await e.provideColorPresentations(t,this.colorInfo,Ue.None);return Array.isArray(o)&&i.push(...o),Array.isArray(o)}}async function CB(s,e,t,n,i){let o=!1,r;const a=[],l=e.ordered(t);for(let c=l.length-1;c>=0;c--){const d=l[c];if(d instanceof V1)r=d;else try{await s.compute(d,t,n,a)&&(o=!0)}catch(h){kn(h)}}return o?a:r&&i?(await s.compute(r,t,n,a),a):[]}function ZX(s,e){const{colorProvider:t}=s.get(ue),n=s.get(Ut).getModel(e);if(!n)throw Cr();const i=s.get(Ze).getValue("editor.defaultColorDecorators",{resource:e});return{model:n,colorProviderRegistry:t,isDefaultColorDecoratorsEnabled:i}}rt.registerCommand("_executeDocumentColorProvider",function(s,...e){const[t]=e;if(!(t instanceof Se))throw Cr();const{model:n,colorProviderRegistry:i,isDefaultColorDecoratorsEnabled:o}=ZX(s,t);return CB(new HLe,i,n,Ue.None,o)});rt.registerCommand("_executeColorPresentationProvider",function(s,...e){const[t,n]=e,{uri:i,range:o}=n;if(!(i instanceof Se)||!Array.isArray(t)||t.length!==4||!L.isIRange(o))throw Cr();const{model:r,colorProviderRegistry:a,isDefaultColorDecoratorsEnabled:l}=ZX(s,i),[c,d,h,u]=t;return CB(new VLe({range:o,color:{red:c,green:d,blue:h,alpha:u}}),a,r,Ue.None,l)});var zLe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},UR=function(s,e){return function(t,n){e(t,n,s)}},NF;const YX=Object.create({});var Vh;let Nb=(Vh=class extends F{constructor(e,t,n,i){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=n,this._localToDispose=this._register(new q),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new JL(this._editor),this._decoratorLimitReporter=new $Le,this._colorDecorationClassRefs=this._register(new q),this._debounceInformation=i.for(n.colorProvider,"Document Colors",{min:NF.RECOMPUTE_TIME}),this._register(e.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(e.onDidChangeModelLanguage(()=>this.updateColors())),this._register(n.colorProvider.onDidChange(()=>this.updateColors())),this._register(e.onDidChangeConfiguration(o=>{const r=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148);const a=r!==this._isColorDecoratorsEnabled||o.hasChanged(21),l=o.hasChanged(148);(a||l)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),n=this._configurationService.getValue(t);if(n&&typeof n=="object"){const i=n.colorDecorators;if(i&&i.enable!==void 0&&!i.enable)return i.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();!e||!this._languageFeaturesService.colorProvider.has(e)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new la,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(e)))})),this.beginCompute())}async beginCompute(){this._computePromise=si(async e=>{const t=this._editor.getModel();if(!t)return[];const n=new pi(!1),i=await KX(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,n.elapsed()),i});try{const e=await this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){Pe(e)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map(n=>({range:{startLineNumber:n.colorInfo.range.startLineNumber,startColumn:n.colorInfo.range.startColumn,endLineNumber:n.colorInfo.range.endLineNumber,endColumn:n.colorInfo.range.endColumn},options:Ve.EMPTY}));this._editor.changeDecorations(n=>{this._decorationsIds=n.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach((i,o)=>this._colorDatas.set(i,e[o]))})}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],n=this._editor.getOption(21);for(let o=0;o<e.length&&t.length<n;o++){const{red:r,green:a,blue:l,alpha:c}=e[o].colorInfo.color,d=new ht(Math.round(r*255),Math.round(a*255),Math.round(l*255),c),h=`rgba(${d.r}, ${d.g}, ${d.b}, ${d.a})`,u=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:h}));t.push({range:{startLineNumber:e[o].colorInfo.range.startLineNumber,startColumn:e[o].colorInfo.range.startColumn,endLineNumber:e[o].colorInfo.range.endLineNumber,endColumn:e[o].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:eq,inlineClassName:`${u.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:YX}}})}const i=n<e.length?n:!1;this._decoratorLimitReporter.update(e.length,i),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const n=t.getDecorationsInRange(L.fromPositions(e,e)).filter(i=>this._colorDatas.has(i.id));return n.length===0?null:this._colorDatas.get(n[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}},NF=Vh,Vh.ID="editor.contrib.colorDetector",Vh.RECOMPUTE_TIME=1e3,Vh);Nb=NF=zLe([UR(1,Ze),UR(2,ue),UR(3,ir)],Nb);class $Le{constructor(){this._onDidChange=new O,this._computed=0,this._limited=!1}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}dt(Nb.ID,Nb,1);class ULe{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,n){this.presentationIndex=n,this._onColorFlushed=new O,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new O,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new O,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let n=-1;for(let i=0;i<this.colorPresentations.length;i++)if(t.toLowerCase()===this.colorPresentations[i].label){n=i;break}if(n===-1){const i=t.split("(")[0].toLowerCase();for(let o=0;o<this.colorPresentations.length;o++)if(this.colorPresentations[o].label.toLowerCase().startsWith(i)){n=o;break}}n!==-1&&n!==this.presentationIndex&&(this.presentationIndex=n,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}const zo=te;class jLe extends F{constructor(e,t,n,i=!1){super(),this.model=t,this.showingStandaloneColorPicker=i,this._closeButton=null,this._domNode=zo(".colorpicker-header"),Y(e,this._domNode),this._pickedColorNode=Y(this._domNode,zo(".picked-color")),Y(this._pickedColorNode,zo("span.codicon.codicon-color-mode")),this._pickedColorPresentation=Y(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const o=m("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",o),this._originalColorNode=Y(this._domNode,zo(".original-color")),this._originalColorNode.style.backgroundColor=Z.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=n.getColorTheme().getColor(sL)||Z.white,this._register(n.onDidColorThemeChange(r=>{this.backgroundColor=r.getColor(sL)||Z.white})),this._register($(this._pickedColorNode,ee.CLICK,()=>this.model.selectNextColorPresentation())),this._register($(this._originalColorNode,ee.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=Z.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new qLe(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=Z.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class qLe extends F{constructor(e){super(),this._onClicked=this._register(new O),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),Y(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),Y(this._button,t),Y(t,zo(".button"+De.asCSSSelector(jt("color-picker-close",J.close,m("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._register($(this._button,ee.CLICK,()=>{this._onClicked.fire()}))}}class KLe extends F{constructor(e,t,n,i=!1){super(),this.model=t,this.pixelRatio=n,this._insertButton=null,this._domNode=zo(".colorpicker-body"),Y(e,this._domNode),this._saturationBox=new GLe(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new ZLe(this._domNode,this.model,i),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new YLe(this._domNode,this.model,i),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),i&&(this._insertButton=this._register(new XLe(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const n=this.model.color.hsva;this.model.color=new Z(new Bl(n.h,e,t,n.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new Z(new Bl(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,n=(1-e)*360;this.model.color=new Z(new Bl(n===360?0:n,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class GLe extends F{constructor(e,t,n){super(),this.model=t,this.pixelRatio=n,this._onDidChange=new O,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new O,this.onColorFlushed=this._onColorFlushed.event,this._domNode=zo(".saturation-wrap"),Y(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",Y(this._domNode,this._canvas),this.selection=zo(".saturation-selection"),Y(this._domNode,this.selection),this.layout(),this._register($(this._domNode,ee.POINTER_DOWN,i=>this.onPointerDown(i))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new tv);const t=Sn(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,i=>this.onDidChangePosition(i.pageX-t.left,i.pageY-t.top),()=>null);const n=$(e.target.ownerDocument,ee.POINTER_UP,()=>{this._onColorFlushed.fire(),n.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(e,t){const n=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(n,i),this._onDidChange.fire({s:n,v:i})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new Z(new Bl(e.h,1,1,1)),n=this._canvas.getContext("2d"),i=n.createLinearGradient(0,0,this._canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const o=n.createLinearGradient(0,0,0,this._canvas.height);o.addColorStop(0,"rgba(0, 0, 0, 0)"),o.addColorStop(1,"rgba(0, 0, 0, 1)"),n.rect(0,0,this._canvas.width,this._canvas.height),n.fillStyle=Z.Format.CSS.format(t),n.fill(),n.fillStyle=i,n.fill(),n.fillStyle=o,n.fill()}paintSelection(e,t){this.selection.style.left=`${e*this.width}px`,this.selection.style.top=`${this.height-t*this.height}px`}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}}class XX extends F{constructor(e,t,n=!1){super(),this.model=t,this._onDidChange=new O,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new O,this.onColorFlushed=this._onColorFlushed.event,n?(this.domNode=Y(e,zo(".standalone-strip")),this.overlay=Y(this.domNode,zo(".standalone-overlay"))):(this.domNode=Y(e,zo(".strip")),this.overlay=Y(this.domNode,zo(".overlay"))),this.slider=Y(this.domNode,zo(".slider")),this.slider.style.top="0px",this._register($(this.domNode,ee.POINTER_DOWN,i=>this.onPointerDown(i))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new tv),n=Sn(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,o=>this.onDidChangeTop(o.pageY-n.top),()=>null);const i=$(e.target.ownerDocument,ee.POINTER_UP,()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=`${(1-e)*this.height}px`}}class ZLe extends XX{constructor(e,t,n=!1){super(e,t,n),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:n,b:i}=e.rgba,o=new Z(new ht(t,n,i,1)),r=new Z(new ht(t,n,i,0));this.overlay.style.background=`linear-gradient(to bottom, ${o} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}}class YLe extends XX{constructor(e,t,n=!1){super(e,t,n),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class XLe extends F{constructor(e){super(),this._onClicked=this._register(new O),this.onClicked=this._onClicked.event,this._button=Y(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register($(this._button,ee.CLICK,()=>{this._onClicked.fire()}))}get button(){return this._button}}class QLe extends sr{constructor(e,t,n,i,o=!1){super(),this.model=t,this.pixelRatio=n,this._register(Vw.getInstance(Le(e)).onDidChange(()=>this.layout())),this._domNode=zo(".colorpicker-widget"),e.appendChild(this._domNode),this.header=this._register(new jLe(this._domNode,this.model,i,o)),this.body=this._register(new KLe(this._domNode,this.model,this.pixelRatio,o))}layout(){this.body.layout()}get domNode(){return this._domNode}}class jR{constructor(e,t,n,i){this.priority=e,this.range=t,this.initialMousePosX=n,this.initialMousePosY=i,this.type=1}equals(e){return e.type===1&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return e.type===1&&t.lineNumber===this.range.startLineNumber}}class sk{constructor(e,t,n,i,o,r){this.priority=e,this.owner=t,this.range=n,this.initialMousePosX=i,this.initialMousePosY=o,this.supportsMarkerHover=r,this.type=2}equals(e){return e.type===2&&this.owner===e.owner}canAdoptVisibleHover(e,t){return e.type===2&&this.owner===e.owner}}class mm{constructor(e){this.renderedHoverParts=e}dispose(){for(const e of this.renderedHoverParts)e.dispose()}}const Bm=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}};var QX=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},JX=function(s,e){return function(t,n){e(t,n,s)}};class JLe{constructor(e,t,n,i){this.owner=e,this.range=t,this.model=n,this.provider=i,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let z1=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,n){return Uo.fromPromise(this._computeAsync(e,t,n))}async _computeAsync(e,t,n){if(!this._editor.hasModel())return[];const i=Nb.get(this._editor);if(!i)return[];for(const o of t){if(!i.isColorDecoration(o))continue;const r=i.getColorData(o.range.getStartPosition());if(r)return[await eQ(this,this._editor.getModel(),r.colorInfo,r.provider)]}return[]}renderHoverParts(e,t){const n=tQ(this,this._editor,this._themeService,t,e);if(!n)return new mm([]);this._colorPicker=n.colorPicker;const i={hoverPart:n.hoverPart,hoverElement:this._colorPicker.domNode,dispose(){n.disposables.dispose()}};return new mm([i])}handleResize(){var e;(e=this._colorPicker)==null||e.layout()}isColorPickerVisible(){return!!this._colorPicker}};z1=QX([JX(1,Yn)],z1);class exe{constructor(e,t,n,i){this.owner=e,this.range=t,this.model=n,this.provider=i}}let $1=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}async createColorHover(e,t,n){if(!this._editor.hasModel()||!Nb.get(this._editor))return null;const o=await KX(n,this._editor.getModel(),Ue.None);let r=null,a=null;for(const h of o){const u=h.colorInfo;L.containsRange(u.range,e.range)&&(r=u,a=h.provider)}const l=r??e,c=a??t,d=!!r;return{colorHover:await eQ(this,this._editor.getModel(),l,c),foundInEditor:d}}async updateEditorModel(e){if(!this._editor.hasModel())return;const t=e.model;let n=new L(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(await ok(this._editor.getModel(),t,this._color,n,e),n=nQ(this._editor,n,t))}renderHoverParts(e,t){return tQ(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};$1=QX([JX(1,Yn)],$1);async function eQ(s,e,t,n){const i=e.getValueInRange(t.range),{red:o,green:r,blue:a,alpha:l}=t.color,c=new ht(Math.round(o*255),Math.round(r*255),Math.round(a*255),l),d=new Z(c),h=await GX(e,t,n,Ue.None),u=new ULe(d,[],0);return u.colorPresentations=h||[],u.guessColorPresentation(d,i),s instanceof z1?new JLe(s,L.lift(t.range),u,n):new exe(s,L.lift(t.range),u,n)}function tQ(s,e,t,n,i){if(n.length===0||!e.hasModel())return;if(i.setMinimumDimensions){const u=e.getOption(67)+8;i.setMinimumDimensions(new Lt(302,u))}const o=new q,r=n[0],a=e.getModel(),l=r.model,c=o.add(new QLe(i.fragment,l,e.getOption(144),t,s instanceof $1));let d=!1,h=new L(r.range.startLineNumber,r.range.startColumn,r.range.endLineNumber,r.range.endColumn);if(s instanceof $1){const u=r.model.color;s.color=u,ok(a,l,u,h,r),o.add(l.onColorFlushed(f=>{s.color=f}))}else o.add(l.onColorFlushed(async u=>{await ok(a,l,u,h,r),d=!0,h=nQ(e,h,l)}));return o.add(l.onDidChangeColor(u=>{ok(a,l,u,h,r)})),o.add(e.onDidChangeModelContent(u=>{d?d=!1:(i.hide(),e.focus())})),{hoverPart:r,colorPicker:c,disposables:o}}function nQ(s,e,t){const n=[],i=t.presentation.textEdit??{range:e,text:t.presentation.label,forceMoveMarkers:!1};n.push(i),t.presentation.additionalTextEdits&&n.push(...t.presentation.additionalTextEdits);const o=L.lift(i.range),r=s.getModel()._setTrackedRange(null,o,3);return s.executeEdits("colorpicker",n),s.pushUndoStop(),s.getModel()._getTrackedRange(r)??o}async function ok(s,e,t,n,i){const o=await GX(s,{range:n,color:{red:t.rgba.r/255,green:t.rgba.g/255,blue:t.rgba.b/255,alpha:t.rgba.a}},i.provider,Ue.None);e.colorPresentations=o||[]}const iQ="editor.action.showHover",txe="editor.action.showDefinitionPreviewHover",nxe="editor.action.scrollUpHover",ixe="editor.action.scrollDownHover",sxe="editor.action.scrollLeftHover",oxe="editor.action.scrollRightHover",rxe="editor.action.pageUpHover",axe="editor.action.pageDownHover",lxe="editor.action.goToTopHover",cxe="editor.action.goToBottomHover",NE="editor.action.increaseHoverVerbosityLevel",dxe=m({key:"increaseHoverVerbosityLevel",comment:["Label for action that will increase the hover verbosity level."]},"Increase Hover Verbosity Level"),RE="editor.action.decreaseHoverVerbosityLevel",hxe=m({key:"decreaseHoverVerbosityLevel",comment:["Label for action that will decrease the hover verbosity level."]},"Decrease Hover Verbosity Level"),sQ="editor.action.inlineSuggest.commit",oQ="editor.action.inlineSuggest.showPrevious",rQ="editor.action.inlineSuggest.showNext";var wB=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qr=function(s,e){return function(t,n){e(t,n,s)}},rk;let RF=class extends F{constructor(e,t,n){super(),this.editor=e,this.model=t,this.instantiationService=n,this.alwaysShowToolbar=kt(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).showToolbar==="always"),this.sessionPosition=void 0,this.position=_e(this,i=>{var l,c;const o=(l=this.model.read(i))==null?void 0:l.primaryGhostText.read(i);if(!this.alwaysShowToolbar.read(i)||!o||o.parts.length===0)return this.sessionPosition=void 0,null;const r=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);const a=new A(o.lineNumber,Math.min(r,((c=this.sessionPosition)==null?void 0:c.column)??Number.MAX_SAFE_INTEGER));return this.sessionPosition=a,a}),this._register(Ks((i,o)=>{const r=this.model.read(i);if(!r||!this.alwaysShowToolbar.read(i))return;const a=xu((c,d)=>{const h=d.add(this.instantiationService.createInstance(Rb,this.editor,!0,this.position,r.selectedInlineCompletionIndex,r.inlineCompletionsCount,r.activeCommands));return e.addContentWidget(h),d.add(ve(()=>e.removeContentWidget(h))),d.add(Ae(u=>{this.position.read(u)&&r.lastTriggerKind.read(u)!==Wa.Explicit&&r.triggerExplicitly()})),h}),l=N0(this,(c,d)=>!!this.position.read(c)||!!d);o.add(Ae(c=>{l.read(c)&&a.read(c)}))}))}};RF=wB([qr(2,Ce)],RF);const uxe=jt("inline-suggestion-hints-next",J.chevronRight,m("parameterHintsNextIcon","Icon for show next parameter hint.")),fxe=jt("inline-suggestion-hints-previous",J.chevronLeft,m("parameterHintsPreviousIcon","Icon for show previous parameter hint."));var zh;let Rb=(zh=class extends F{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,n){const i=new _o(e,t,n,!0,()=>this._commandService.executeCommand(e)),o=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let r=t;return o&&(r=m({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,o.getLabel())),i.tooltip=r,i}constructor(e,t,n,i,o,r,a,l,c,d,h){super(),this.editor=e,this.withBorder=t,this._position=n,this._currentSuggestionIdx=i,this._suggestionCount=o,this._extraCommands=r,this._commandService=a,this.keybindingService=c,this._contextKeyService=d,this._menuService=h,this.id=`InlineSuggestionHintsContentWidget${rk.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=Qe("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[Qe("div@toolBar")]),this.previousAction=this.createCommandAction(oQ,m("previous","Previous"),De.asClassName(fxe)),this.availableSuggestionCountAction=new _o("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(rQ,m("next","Next"),De.asClassName(uxe)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(ge.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new It(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new It(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.toolBar=this._register(l.createInstance(MF,this.nodes.toolBar,ge.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:u=>u.startsWith("primary")},actionViewItemProvider:(u,f)=>{if(u instanceof bo)return l.createInstance(mxe,u,void 0);if(u===this.availableSuggestionCountAction){const g=new gxe(void 0,u,{label:!0,icon:!1});return g.setClass("availableSuggestionCount"),g}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(u=>{rk._dropDownVisible=u})),this._register(Ae(u=>{this._position.read(u),this.editor.layoutContentWidget(this)})),this._register(Ae(u=>{const f=this._suggestionCount.read(u),g=this._currentSuggestionIdx.read(u);f!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${g+1}/${f}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),f!==void 0&&f>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register(Ae(u=>{const g=this._extraCommands.read(u).map(p=>({class:void 0,id:p.id,enabled:!0,tooltip:p.tooltip||"",label:p.title,run:_=>this._commandService.executeCommand(p.id)}));for(const[p,_]of this.inlineCompletionsActionsMenus.getActions())for(const b of _)b instanceof bo&&g.push(b);g.length>0&&g.unshift(new ri),this.toolBar.setAdditionalSecondaryActions(g)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}},rk=zh,zh._dropDownVisible=!1,zh.id=0,zh);Rb=rk=wB([qr(6,Wt),qr(7,Ce),qr(8,wt),qr(9,Ie),qr(10,nr)],Rb);class gxe extends Cb{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}updateTooltip(){}}let mxe=class extends uu{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=Qe("div.keybinding").root;this._register(new cv(t,mo,{disableTitle:!0,...BZ})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}updateTooltip(){}},MF=class extends R1{constructor(e,t,n,i,o,r,a,l,c){super(e,{resetMenu:t,...n},i,o,r,a,l,c),this.menuId=t,this.options2=n,this.menuService=i,this.contextKeyService=o,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var n,i,o,r,a,l,c;const e=[],t=[];iE(this.menu,(n=this.options2)==null?void 0:n.menuOptions,{primary:e,secondary:t},(o=(i=this.options2)==null?void 0:i.toolbarOptions)==null?void 0:o.primaryGroup,(a=(r=this.options2)==null?void 0:r.toolbarOptions)==null?void 0:a.shouldInlineSubmenu,(c=(l=this.options2)==null?void 0:l.toolbarOptions)==null?void 0:c.useSeparatorsInPrimaryActions),t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),this.setActions(e,t)}setPrependedPrimaryActions(e){en(this.prependedPrimaryActions,e,(t,n)=>t===n)||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){en(this.additionalActions,e,(t,n)=>t===n)||(this.additionalActions=e,this.updateToolbar())}};MF=wB([qr(3,nr),qr(4,Ie),qr(5,Lo),qr(6,wt),qr(7,Wt),qr(8,Zi)],MF);function ME(s,e,t){const n=Sn(s);return!(e<n.left||e>n.left+n.width||t<n.top||t>n.top+n.height)}let pxe=class{constructor(e,t,n){this.value=e,this.isComplete=t,this.hasLoadingMessage=n}};class aQ extends F{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new O),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new It(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new It(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new It(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=jie(e=>this._computer.computeAsync(e)),(async()=>{try{for await(const e of this._asyncIterable)e&&(this._result.push(e),this._fireResult());this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(e){Pe(e)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const e=this._state===0,t=this._state===4;this._onResult.fire(new pxe(this._result.slice(0),e,t))}start(e){if(e===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}class yB{constructor(){this._onDidWillResize=new O,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new O,this.onDidResize=this._onDidResize.event,this._sashListener=new q,this._size=new Lt(0,0),this._minSize=new Lt(0,0),this._maxSize=new Lt(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new $i(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new $i(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new $i(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:ML.North}),this._southSash=new $i(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:ML.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(se.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(se.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(i=>{e&&(n=i.currentX-i.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(i=>{e&&(n=-(i.currentX-i.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(i=>{e&&(t=-(i.currentY-i.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(i=>{e&&(t=i.currentY-i.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(se.any(this._eastSash.onDidReset,this._westSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(se.any(this._northSash.onDidReset,this._southSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,i){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=i?3:0}layout(e=this.size.height,t=this.size.width){const{height:n,width:i}=this._minSize,{height:o,width:r}=this._maxSize;e=Math.max(n,Math.min(o,e)),t=Math.max(i,Math.min(r,t));const a=new Lt(t,e);Lt.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}}const _xe=30,bxe=24;class vxe extends F{constructor(e,t=new Lt(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new yB),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=Lt.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(n=>{this._resize(new Lt(n.dimension.width,n.dimension.height)),n.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var e;return(e=this._contentPosition)!=null&&e.position?A.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){const t=this._editor.getDomNode(),n=this._editor.getScrolledVisiblePosition(e);return!t||!n?void 0:Sn(t).top+n.top-_xe}_availableVerticalSpaceBelow(e){const t=this._editor.getDomNode(),n=this._editor.getScrolledVisiblePosition(e);if(!t||!n)return;const i=Sn(t),o=lu(t.ownerDocument.body),r=i.top+n.top+n.height;return o.height-r-bxe}_findPositionPreference(e,t){const n=Math.min(this._availableVerticalSpaceBelow(t)??1/0,e),i=Math.min(this._availableVerticalSpaceAbove(t)??1/0,e),o=Math.min(Math.max(i,n),e),r=Math.min(e,o);let a;return this._editor.getOption(60).above?a=r<=i?1:2:a=r<=n?2:1,a===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),a}_resize(e){this._resizableNode.layout(e.height,e.width)}}var Cxe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},iS=function(s,e){return function(t,n){e(t,n,s)}},_l;const Gz=30,wxe=6;var $h;let AF=($h=class extends vxe{get isVisibleFromKeyboard(){var e;return((e=this._renderedHover)==null?void 0:e.source)===1}get isVisible(){return this._hoverVisibleKey.get()??!1}get isFocused(){return this._hoverFocusedKey.get()??!1}constructor(e,t,n,i,o){const r=e.getOption(67)+8,a=150,l=new Lt(a,r);super(e,l),this._configurationService=n,this._accessibilityService=i,this._keybindingService=o,this._hover=this._register(new y9),this._onDidResize=this._register(new O),this.onDidResize=this._onDidResize.event,this._minimumSize=l,this._hoverVisibleKey=I.hoverVisible.bindTo(t),this._hoverFocusedKey=I.hoverFocused.bindTo(t),Y(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange(()=>{this.isVisible&&this._updateMaxDimensions()})),this._register(this._editor.onDidChangeConfiguration(d=>{d.hasChanged(50)&&this._updateFont()}));const c=this._register(Ka(this._resizableNode.domNode));this._register(c.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(c.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._setRenderedHover(void 0),this._editor.addContentWidget(this)}dispose(){var e;super.dispose(),(e=this._renderedHover)==null||e.dispose(),this._editor.removeContentWidget(this)}getId(){return _l.ID}static _applyDimensions(e,t,n){const i=typeof t=="number"?`${t}px`:t,o=typeof n=="number"?`${n}px`:n;e.style.width=i,e.style.height=o}_setContentsDomNodeDimensions(e,t){const n=this._hover.contentsDomNode;return _l._applyDimensions(n,e,t)}_setContainerDomNodeDimensions(e,t){const n=this._hover.containerDomNode;return _l._applyDimensions(n,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,n){const i=typeof t=="number"?`${t}px`:t,o=typeof n=="number"?`${n}px`:n;e.style.maxWidth=i,e.style.maxHeight=o}_setHoverWidgetMaxDimensions(e,t){_l._applyMaxDimensions(this._hover.contentsDomNode,e,t),_l._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof e=="number"?`${e}px`:e),this._layoutContentWidget()}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");const t=e.width,n=e.height;this._setHoverWidgetDimensions(t,n)}_updateResizableNodeMaxDimensions(){const e=this._findMaximumRenderingWidth()??1/0,t=this._findMaximumRenderingHeight()??1/0;this._resizableNode.maxSize=new Lt(e,t),this._setHoverWidgetMaxDimensions(e,t)}_resize(e){_l._lastDimensions=new Lt(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),this._onDidResize.fire()}_findAvailableSpaceVertically(){var t;const e=(t=this._renderedHover)==null?void 0:t.showAtPosition;if(e)return this._positionPreference===1?this._availableVerticalSpaceAbove(e):this._availableVerticalSpaceBelow(e)}_findMaximumRenderingHeight(){const e=this._findAvailableSpaceVertically();if(!e)return;let t=wxe;return Array.from(this._hover.contentsDomNode.children).forEach(n=>{t+=n.clientHeight}),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const e=Array.from(this._hover.contentsDomNode.children).some(t=>t.scrollWidth>t.clientWidth);return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const e=this._isHoverTextOverflowing(),t=typeof this._contentWidth>"u"?0:this._contentWidth-2;return e||this._hover.containerDomNode.clientWidth<t?lu(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(e,t){if(!this._renderedHover)return!1;if(this._renderedHover.initialMousePosX===void 0||this._renderedHover.initialMousePosY===void 0)return this._renderedHover.initialMousePosX=e,this._renderedHover.initialMousePosY=t,!1;const n=Sn(this.getDomNode());this._renderedHover.closestMouseDistance===void 0&&(this._renderedHover.closestMouseDistance=Zz(this._renderedHover.initialMousePosX,this._renderedHover.initialMousePosY,n.left,n.top,n.width,n.height));const i=Zz(e,t,n.left,n.top,n.width,n.height);return i>this._renderedHover.closestMouseDistance+4?!1:(this._renderedHover.closestMouseDistance=Math.min(this._renderedHover.closestMouseDistance,i),!0)}_setRenderedHover(e){var t;(t=this._renderedHover)==null||t.dispose(),this._renderedHover=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_updateFont(){const{fontSize:e,lineHeight:t}=this._editor.getOption(50),n=this._hover.contentsDomNode;n.style.fontSize=`${e}px`,n.style.lineHeight=`${t/e}`,Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(o=>this._editor.applyFontInfo(o))}_updateContent(e){const t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const e=Math.max(this._editor.getLayoutInfo().height/4,250,_l._lastDimensions.height),t=Math.max(this._editor.getLayoutInfo().width*.66,500,_l._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e){this._setRenderedHover(e),this._updateFont(),this._updateContent(e.domNode),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){return this._renderedHover?{position:this._renderedHover.showAtPosition,secondaryPosition:this._renderedHover.showAtSecondaryPosition,positionAffinity:this._renderedHover.shouldAppearBeforeContent?3:void 0,preference:[this._positionPreference??1]}:null}show(e){var r;if(!this._editor||!this._editor.hasModel())return;this._render(e);const t=Uc(this._hover.containerDomNode),n=e.showAtPosition;this._positionPreference=this._findPositionPreference(t,n)??1,this.onContentsChanged(),e.shouldFocus&&this._hover.containerDomNode.focus(),this._onDidResize.fire();const o=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&$K(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),((r=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))==null?void 0:r.getAriaLabel())??"");o&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+o)}hide(){if(!this._renderedHover)return;const e=this._renderedHover.shouldFocus||this._hoverFocusedKey.get();this._setRenderedHover(void 0),this._resizableNode.maxSize=new Lt(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){const e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}setMinimumDimensions(e){this._minimumSize=new Lt(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const e=typeof this._contentWidth>"u"?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new Lt(e,this._minimumSize.height)}onContentsChanged(){var i;this._removeConstraintsRenderNormally();const e=this._hover.containerDomNode;let t=Uc(e),n=ao(e);if(this._resizableNode.layout(t,n),this._setHoverWidgetDimensions(n,t),t=Uc(e),n=ao(e),this._contentWidth=n,this._updateMinimumWidth(),this._resizableNode.layout(t,n),(i=this._renderedHover)!=null&&i.showAtPosition){const o=Uc(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(o,this._renderedHover.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-Gz})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+Gz})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}},_l=$h,$h.ID="editor.contrib.resizableContentHoverWidget",$h._lastDimensions=new Lt(0,0),$h);AF=_l=Cxe([iS(1,Ie),iS(2,Ze),iS(3,xo),iS(4,wt)],AF);function Zz(s,e,t,n,i,o){const r=t+i/2,a=n+o/2,l=Math.max(Math.abs(s-r)-i/2,0),c=Math.max(Math.abs(e-a)-o/2,0);return Math.sqrt(l*l+c*c)}class Ix{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(t.type!==1&&!t.supportsMarkerHover)return[];const n=e.getModel(),i=t.range.startLineNumber;if(i>n.getLineCount())return[];const o=n.getLineMaxColumn(i);return e.getLineDecorations(i).filter(r=>{if(r.options.isWholeLine)return!0;const a=r.range.startLineNumber===i?r.range.startColumn:1,l=r.range.endLineNumber===i?r.range.endColumn:o;if(r.options.showIfCollapsed){if(a>t.range.startColumn+1||t.range.endColumn-1>l)return!1}else if(a>t.range.startColumn||t.range.endColumn>l)return!1;return!0})}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return Uo.EMPTY;const n=Ix._getLineDecorations(this._editor,t);return Uo.merge(this._participants.map(i=>i.computeAsync?i.computeAsync(t,n,e):Uo.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=Ix._getLineDecorations(this._editor,this._anchor);let t=[];for(const n of this._participants)t=t.concat(n.computeSync(this._anchor,e));return ea(t)}}class lQ{constructor(e,t,n){this.anchor=e,this.hoverParts=t,this.isComplete=n}filter(e){const t=this.hoverParts.filter(n=>n.isValidForHoverAnchor(e));return t.length===this.hoverParts.length?this:new yxe(this,this.anchor,t,this.isComplete)}}class yxe extends lQ{constructor(e,t,n,i){super(t,n,i),this.original=e}filter(e){return this.original.filter(e)}}var Sxe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},kxe=function(s,e){return function(t,n){e(t,n,s)}};const Yz=te;let Tx=class extends F{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this.actions=[],this._hasContent=!1,this.hoverElement=Yz("div.hover-row.status-bar"),this.hoverElement.tabIndex=0,this.actionsElement=Y(this.hoverElement,Yz("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),n=t?t.getLabel():null;this._hasContent=!0;const i=this._register(jT.render(this.actionsElement,e,n));return this.actions.push(i),i}append(e){const t=Y(this.actionsElement,e);return this._hasContent=!0,t}};Tx=Sxe([kxe(0,wt)],Tx);class Lxe{constructor(e,t,n){this.provider=e,this.hover=t,this.ordinal=n}}async function xxe(s,e,t,n,i){const o=await Promise.resolve(s.provideHover(t,n,i)).catch(kn);if(!(!o||!Dxe(o)))return new Lxe(s,o,e)}function SB(s,e,t,n,i=!1){const r=s.ordered(e,i).map((a,l)=>xxe(a,l,e,t,n));return Uo.fromPromises(r).coalesce()}function cQ(s,e,t,n,i=!1){return SB(s,e,t,n,i).map(o=>o.hover).toPromise()}Js("_executeHoverProvider",(s,e,t)=>{const n=s.get(ue);return cQ(n.hoverProvider,e,t,Ue.None)});Js("_executeHoverProvider_recursive",(s,e,t)=>{const n=s.get(ue);return cQ(n.hoverProvider,e,t,Ue.None,!0)});function Dxe(s){const e=typeof s.range<"u",t=typeof s.contents<"u"&&s.contents&&s.contents.length>0;return e&&t}var Ixe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ju=function(s,e){return function(t,n){e(t,n,s)}};const Kp=te,Txe=jt("hover-increase-verbosity",J.add,m("increaseHoverVerbosity","Icon for increaseing hover verbosity.")),Exe=jt("hover-decrease-verbosity",J.remove,m("decreaseHoverVerbosity","Icon for decreasing hover verbosity."));class Kr{constructor(e,t,n,i,o,r=void 0){this.owner=e,this.range=t,this.contents=n,this.isBeforeContent=i,this.ordinal=o,this.source=r}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}class dQ{constructor(e,t,n){this.hover=e,this.hoverProvider=t,this.hoverPosition=n}supportsVerbosityAction(e){switch(e){case ho.Increase:return this.hover.canIncreaseVerbosity??!1;case ho.Decrease:return this.hover.canDecreaseVerbosity??!1}}}let U1=class{constructor(e,t,n,i,o,r,a,l){this._editor=e,this._languageService=t,this._openerService=n,this._configurationService=i,this._languageFeaturesService=o,this._keybindingService=r,this._hoverService=a,this._commandService=l,this.hoverOrdinal=3}createLoadingMessage(e){return new Kr(this,e.range,[new ji().appendText(m("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,o=n.getLineMaxColumn(i),r=[];let a=1e3;const l=n.getLineLength(i),c=n.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),d=this._editor.getOption(118),h=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:c});let u=!1;d>=0&&l>d&&e.range.startColumn>=d&&(u=!0,r.push(new Kr(this,e.range,[{value:m("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,a++))),!u&&typeof h=="number"&&l>=h&&r.push(new Kr(this,e.range,[{value:m("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,a++));let f=!1;for(const g of t){const p=g.range.startLineNumber===i?g.range.startColumn:1,_=g.range.endLineNumber===i?g.range.endColumn:o,b=g.options.hoverMessage;if(!b||mb(b))continue;g.options.beforeContentClassName&&(f=!0);const v=new L(e.range.startLineNumber,p,e.range.startLineNumber,_);r.push(new Kr(this,v,w3(b),f,a++))}return r}computeAsync(e,t,n){if(!this._editor.hasModel()||e.type!==1)return Uo.EMPTY;const i=this._editor.getModel(),o=this._languageFeaturesService.hoverProvider;return o.has(i)?this._getMarkdownHovers(o,i,e,n):Uo.EMPTY}_getMarkdownHovers(e,t,n,i){const o=n.range.getStartPosition();return SB(e,t,o,i).filter(l=>!mb(l.hover.contents)).map(l=>{const c=l.hover.range?L.lift(l.hover.range):n.range,d=new dQ(l.hover,l.provider,o);return new Kr(this,c,l.hover.contents,!1,l.ordinal,d)})}renderHoverParts(e,t){return this._renderedHoverParts=new Nxe(t,e.fragment,this,this._editor,this._languageService,this._openerService,this._commandService,this._keybindingService,this._hoverService,this._configurationService,e.onContentsChanged),this._renderedHoverParts}updateMarkdownHoverVerbosityLevel(e,t,n){var i;return Promise.resolve((i=this._renderedHoverParts)==null?void 0:i.updateMarkdownHoverPartVerbosityLevel(e,t,n))}};U1=Ixe([ju(1,tn),ju(2,eo),ju(3,Ze),ju(4,ue),ju(5,wt),ju(6,oc),ju(7,Wt)],U1);class sS{constructor(e,t,n){this.hoverPart=e,this.hoverElement=t,this.disposables=n}dispose(){this.disposables.dispose()}}class Nxe{constructor(e,t,n,i,o,r,a,l,c,d,h){this._hoverParticipant=n,this._editor=i,this._languageService=o,this._openerService=r,this._commandService=a,this._keybindingService=l,this._hoverService=c,this._configurationService=d,this._onFinishedRendering=h,this._ongoingHoverOperations=new Map,this._disposables=new q,this.renderedHoverParts=this._renderHoverParts(e,t,this._onFinishedRendering),this._disposables.add(ve(()=>{this.renderedHoverParts.forEach(u=>{u.dispose()}),this._ongoingHoverOperations.forEach(u=>{u.tokenSource.dispose(!0)})}))}_renderHoverParts(e,t,n){return e.sort(ks(i=>i.ordinal,Qr)),e.map(i=>{const o=this._renderHoverPart(i,n);return t.appendChild(o.hoverElement),o})}_renderHoverPart(e,t){const n=this._renderMarkdownHover(e,t),i=n.hoverElement,o=e.source,r=new q;if(r.add(n),!o)return new sS(e,i,r);const a=o.supportsVerbosityAction(ho.Increase),l=o.supportsVerbosityAction(ho.Decrease);if(!a&&!l)return new sS(e,i,r);const c=Kp("div.verbosity-actions");return i.prepend(c),r.add(this._renderHoverExpansionAction(c,ho.Increase,a)),r.add(this._renderHoverExpansionAction(c,ho.Decrease,l)),new sS(e,i,r)}_renderMarkdownHover(e,t){return hQ(this._editor,e,this._languageService,this._openerService,t)}_renderHoverExpansionAction(e,t,n){const i=new q,o=t===ho.Increase,r=Y(e,Kp(De.asCSSSelector(o?Txe:Exe)));r.tabIndex=0;const a=new ub("mouse",!1,{target:e,position:{hoverPosition:0}},this._configurationService,this._hoverService);if(i.add(this._hoverService.setupManagedHover(a,r,Mxe(this._keybindingService,t))),!n)return r.classList.add("disabled"),i;r.classList.add("enabled");const l=()=>this._commandService.executeCommand(t===ho.Increase?NE:RE);return i.add(new UK(r,l)),i.add(new jK(r,l,[3,10])),i}async updateMarkdownHoverPartVerbosityLevel(e,t,n=!0){const i=this._editor.getModel();if(!i)return;const o=this._getRenderedHoverPartAtIndex(t),r=o==null?void 0:o.hoverPart.source;if(!o||!(r!=null&&r.supportsVerbosityAction(e)))return;const a=await this._fetchHover(r,i,e);if(!a)return;const l=new dQ(a,r.hoverProvider,r.hoverPosition),c=o.hoverPart,d=new Kr(this._hoverParticipant,c.range,a.contents,c.isBeforeContent,c.ordinal,l),h=this._renderHoverPart(d,this._onFinishedRendering);return this._replaceRenderedHoverPartAtIndex(t,h,d),n&&this._focusOnHoverPartWithIndex(t),{hoverPart:d,hoverElement:h.hoverElement}}async _fetchHover(e,t,n){let i=n===ho.Increase?1:-1;const o=e.hoverProvider,r=this._ongoingHoverOperations.get(o);r&&(r.tokenSource.cancel(),i+=r.verbosityDelta);const a=new an;this._ongoingHoverOperations.set(o,{verbosityDelta:i,tokenSource:a});const l={verbosityRequest:{verbosityDelta:i,previousHover:e.hover}};let c;try{c=await Promise.resolve(o.provideHover(t,e.hoverPosition,a.token,l))}catch(d){kn(d)}return a.dispose(),this._ongoingHoverOperations.delete(o),c}_replaceRenderedHoverPartAtIndex(e,t,n){if(e>=this.renderedHoverParts.length||e<0)return;const i=this.renderedHoverParts[e],o=i.hoverElement,r=t.hoverElement,a=Array.from(r.children);o.replaceChildren(...a);const l=new sS(n,o,t.disposables);o.focus(),i.dispose(),this.renderedHoverParts[e]=l}_focusOnHoverPartWithIndex(e){this.renderedHoverParts[e].hoverElement.focus()}_getRenderedHoverPartAtIndex(e){return this.renderedHoverParts[e]}dispose(){this._disposables.dispose()}}function Rxe(s,e,t,n,i){e.sort(ks(r=>r.ordinal,Qr));const o=[];for(const r of e)o.push(hQ(t,r,n,i,s.onContentsChanged));return new mm(o)}function hQ(s,e,t,n,i){const o=new q,r=Kp("div.hover-row"),a=Kp("div.hover-row-contents");r.appendChild(a);const l=e.contents;for(const d of l){if(mb(d))continue;const h=Kp("div.markdown-hover"),u=Y(h,Kp("div.hover-contents")),f=o.add(new Cd({editor:s},t,n));o.add(f.onDidRenderAsync(()=>{u.className="hover-contents code-hover-contents",i()}));const g=o.add(f.render(d));u.appendChild(g.element),a.appendChild(h)}return{hoverPart:e,hoverElement:r,dispose(){o.dispose()}}}function Mxe(s,e){switch(e){case ho.Increase:{const t=s.lookupKeybinding(NE);return t?m("increaseVerbosityWithKb","Increase Hover Verbosity ({0})",t.getLabel()):m("increaseVerbosity","Increase Hover Verbosity")}case ho.Decrease:{const t=s.lookupKeybinding(RE);return t?m("decreaseVerbosityWithKb","Decrease Hover Verbosity ({0})",t.getLabel()):m("decreaseVerbosity","Decrease Hover Verbosity")}}}function PF(s,e){return!!s[e]}class qR{constructor(e,t){this.target=e.target,this.isLeftClick=e.event.leftButton,this.isMiddleClick=e.event.middleButton,this.isRightClick=e.event.rightButton,this.hasTriggerModifier=PF(e.event,t.triggerModifier),this.hasSideBySideModifier=PF(e.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=e.event.detail<=1}}class Xz{constructor(e,t){this.keyCodeIsTriggerKey=e.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=e.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=PF(e,t.triggerModifier)}}class oS{constructor(e,t,n,i){this.triggerKey=e,this.triggerModifier=t,this.triggerSideBySideKey=n,this.triggerSideBySideModifier=i}equals(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}function Qz(s){return s==="altKey"?et?new oS(57,"metaKey",6,"altKey"):new oS(5,"ctrlKey",6,"altKey"):et?new oS(6,"altKey",57,"metaKey"):new oS(6,"altKey",5,"ctrlKey")}class AE extends F{constructor(e,t){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new O),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new O),this.onExecute=this._onExecute.event,this._onCancel=this._register(new O),this.onCancel=this._onCancel.event,this._editor=e,this._extractLineNumberFromMouseEvent=(t==null?void 0:t.extractLineNumberFromMouseEvent)??(n=>n.target.position?n.target.position.lineNumber:0),this._opts=Qz(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(n=>{if(n.hasChanged(78)){const i=Qz(this._editor.getOption(78));if(this._opts.equals(i))return;this._opts=i,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(n=>this._onEditorMouseMove(new qR(n,this._opts)))),this._register(this._editor.onMouseDown(n=>this._onEditorMouseDown(new qR(n,this._opts)))),this._register(this._editor.onMouseUp(n=>this._onEditorMouseUp(new qR(n,this._opts)))),this._register(this._editor.onKeyDown(n=>this._onEditorKeyDown(new Xz(n,this._opts)))),this._register(this._editor.onKeyUp(n=>this._onEditorKeyUp(new Xz(n,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(n=>this._onDidChangeCursorSelection(n))),this._register(this._editor.onDidChangeModel(n=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(n=>{(n.scrollTopChanged||n.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}_onEditorMouseDown(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(e)}_onEditorMouseUp(e){const t=this._extractLineNumberFromMouseEvent(e);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(e)}_onEditorKeyDown(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}class uQ{constructor(e,t){this.range=e,this.direction=t}}class kB{constructor(e,t,n){this.hint=e,this.anchor=t,this.provider=n,this._isResolved=!1}with(e){const t=new kB(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}async resolve(e){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return await this._currentResolve,e.isCancellationRequested?void 0:this.resolve(e);this._isResolved||(this._currentResolve=this._doResolve(e).finally(()=>this._currentResolve=void 0)),await this._currentResolve}}async _doResolve(e){try{const t=await Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=(t==null?void 0:t.tooltip)??this.hint.tooltip,this.hint.label=(t==null?void 0:t.label)??this.hint.label,this.hint.textEdits=(t==null?void 0:t.textEdits)??this.hint.textEdits,this._isResolved=!0}catch(t){kn(t),this._isResolved=!1}}}const d_=class d_{static async create(e,t,n,i){const o=[],r=e.ordered(t).reverse().map(a=>n.map(async l=>{try{const c=await a.provideInlayHints(t,l,i);(c!=null&&c.hints.length||a.onDidChangeInlayHints)&&o.push([c??d_._emptyInlayHintList,a])}catch(c){kn(c)}}));if(await Promise.all(r.flat()),i.isCancellationRequested||t.isDisposed())throw new ta;return new d_(n,o,t)}constructor(e,t,n){this._disposables=new q,this.ranges=e,this.provider=new Set;const i=[];for(const[o,r]of t){this._disposables.add(o),this.provider.add(r);for(const a of o.hints){const l=n.validatePosition(a.position);let c="before";const d=d_._getRangeAtPosition(n,l);let h;d.getStartPosition().isBefore(l)?(h=L.fromPositions(d.getStartPosition(),l),c="after"):(h=L.fromPositions(l,d.getEndPosition()),c="before"),i.push(new kB(a,new uQ(h,c),r))}}this.items=i.sort((o,r)=>A.compare(o.hint.position,r.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const n=t.lineNumber,i=e.getWordAtPosition(t);if(i)return new L(n,i.startColumn,n,i.endColumn);e.tokenization.tokenizeIfCheap(n);const o=e.tokenization.getLineTokens(n),r=t.column-1,a=o.findTokenIndexAtOffset(r);let l=o.getStartOffset(a),c=o.getEndOffset(a);return c-l===1&&(l===r&&a>1?(l=o.getStartOffset(a-1),c=o.getEndOffset(a-1)):c===r&&a<o.getCount()-1&&(l=o.getStartOffset(a+1),c=o.getEndOffset(a+1))),new L(n,l+1,n,c+1)}};d_._emptyInlayHintList=Object.freeze({dispose(){},hints:[]});let Ex=d_;function Axe(s){return Se.from({scheme:We.command,path:s.id,query:s.arguments&&encodeURIComponent(JSON.stringify(s.arguments))}).toString()}var Pxe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pc=function(s,e){return function(t,n){e(t,n,s)}};let aa=class extends T1{constructor(e,t,n,i,o,r,a,l,c,d,h,u,f){super(e,{...i.getRawOptions(),overflowWidgetsDomNode:i.getOverflowWidgetsDomNode()},n,o,r,a,l,c,d,h,u,f),this._parentEditor=i,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(i.onDidChangeConfiguration(g=>this._onParentConfigurationChanged(g)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){dT(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};aa=Pxe([pc(4,Ce),pc(5,mt),pc(6,Wt),pc(7,Ie),pc(8,Yn),pc(9,En),pc(10,xo),pc(11,cn),pc(12,ue)],aa);const Jz=new Z(new ht(0,122,204)),Oxe={showArrow:!0,showFrame:!0,className:"",frameColor:Jz,arrowColor:Jz,keepEditorSelection:!1},Fxe="vs.editor.contrib.zoneWidget";class Wxe{constructor(e,t,n,i,o,r,a,l){this.id="",this.domNode=e,this.afterLineNumber=t,this.afterColumn=n,this.heightInLines=i,this.showInHiddenAreas=a,this.ordinal=l,this._onDomNodeTop=o,this._onComputedHeight=r}onDomNodeTop(e){this._onDomNodeTop(e)}onComputedHeight(e){this._onComputedHeight(e)}}class Bxe{constructor(e,t){this._id=e,this._domNode=t}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}const wI=class wI{constructor(e){this._editor=e,this._ruleName=wI._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),jM(this._ruleName)}set color(e){this._color!==e&&(this._color=e,this._updateStyle())}set height(e){this._height!==e&&(this._height=e,this._updateStyle())}_updateStyle(){jM(this._ruleName),Vk(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `)}show(e){e.column===1&&(e={lineNumber:e.lineNumber,column:2}),this._decorations.set([{range:L.fromPositions(e),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}};wI._IdGenerator=new N9(".arrow-decoration-");let OF=wI;class Hxe{constructor(e,t={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new q,this.container=null,this._isShowing=!1,this.editor=e,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=Rc(t),dT(this.options,Oxe,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(n=>{const i=this._getWidth(n);this.domNode.style.width=i+"px",this.domNode.style.left=this._getLeft(n)+"px",this._onWidth(i)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(e=>{this._viewZone&&e.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new OF(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(e){e.frameColor&&(this.options.frameColor=e.frameColor),e.arrowColor&&(this.options.arrowColor=e.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const e=this.options.frameColor.toString();this.container.style.borderTopColor=e,this.container.style.borderBottomColor=e}if(this._arrow&&this.options.arrowColor){const e=this.options.arrowColor.toString();this._arrow.color=e}}_getWidth(e){return e.width-e.minimap.minimapWidth-e.verticalScrollbarWidth}_getLeft(e){return e.minimap.minimapWidth>0&&e.minimap.minimapLeft===0?e.minimap.minimapWidth:0}_onViewZoneTop(e){this.domNode.style.top=e+"px"}_onViewZoneHeight(e){var t;if(this.domNode.style.height=`${e}px`,this.container){const n=e-this._decoratingElementsHeight();this.container.style.height=`${n}px`;const i=this.editor.getLayoutInfo();this._doLayout(n,this._getWidth(i))}(t=this._resizeSash)==null||t.layout()}get position(){const e=this._positionMarkerId.getRange(0);if(e)return e.getStartPosition()}show(e,t){const n=L.isIRange(e)?L.lift(e):L.fromPositions(e);this._isShowing=!0,this._showImpl(n,t),this._isShowing=!1,this._positionMarkerId.set([{range:n,options:Ve.EMPTY}])}hide(){var e;this._viewZone&&(this.editor.changeViewZones(t=>{this._viewZone&&t.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),(e=this._arrow)==null||e.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){const e=this.editor.getOption(67);let t=0;if(this.options.showArrow){const n=Math.round(e/3);t+=2*n}if(this.options.showFrame){const n=Math.round(e/9);t+=2*n}return t}_showImpl(e,t){const n=e.getStartPosition(),i=this.editor.getLayoutInfo(),o=this._getWidth(i);this.domNode.style.width=`${o}px`,this.domNode.style.left=this._getLeft(i)+"px";const r=document.createElement("div");r.style.overflow="hidden";const a=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){const u=Math.max(12,this.editor.getLayoutInfo().height/a*.8);t=Math.min(t,u)}let l=0,c=0;if(this._arrow&&this.options.showArrow&&(l=Math.round(a/3),this._arrow.height=l,this._arrow.show(n)),this.options.showFrame&&(c=Math.round(a/9)),this.editor.changeViewZones(u=>{this._viewZone&&u.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new Wxe(r,n.lineNumber,n.column,t,f=>this._onViewZoneTop(f),f=>this._onViewZoneHeight(f),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=u.addZone(this._viewZone),this._overlayWidget=new Bxe(Fxe+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const u=this.options.frameWidth?this.options.frameWidth:c;this.container.style.borderTopWidth=u+"px",this.container.style.borderBottomWidth=u+"px"}const d=t*a-this._decoratingElementsHeight();this.container&&(this.container.style.top=l+"px",this.container.style.height=d+"px",this.container.style.overflow="hidden"),this._doLayout(d,o),this.options.keepEditorSelection||this.editor.setSelection(e);const h=this.editor.getModel();if(h){const u=h.validateRange(new L(e.startLineNumber,1,e.endLineNumber+1,1));this.revealRange(u,u.startLineNumber===h.getLineCount())}}revealRange(e,t){t?this.editor.revealLineNearTop(e.endLineNumber,0):this.editor.revealRange(e,0)}setCssClass(e,t){this.container&&(t&&this.container.classList.remove(t),this.container.classList.add(e))}_onWidth(e){}_doLayout(e,t){}_relayout(e){this._viewZone&&this._viewZone.heightInLines!==e&&this.editor.changeViewZones(t=>{this._viewZone&&(this._viewZone.heightInLines=e,t.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new $i(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let e;this._disposables.add(this._resizeSash.onDidStart(t=>{this._viewZone&&(e={startY:t.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{e=void 0})),this._disposables.add(this._resizeSash.onDidChange(t=>{if(e){const n=(t.currentY-e.startY)/this.editor.getOption(67),i=n<0?Math.ceil(n):Math.floor(n),o=e.heightInLines+i;o>5&&o<35&&this._relayout(o)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const e=this.editor.getLayoutInfo();return e.width-e.minimap.minimapWidth}}var fQ=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},gQ=function(s,e){return function(t,n){e(t,n,s)}};const mQ=tt("IPeekViewService");st(mQ,class{constructor(){this._widgets=new Map}addExclusiveWidget(s,e){const t=this._widgets.get(s);t&&(t.listener.dispose(),t.widget.dispose());const n=()=>{const i=this._widgets.get(s);i&&i.widget===e&&(i.listener.dispose(),this._widgets.delete(s))};this._widgets.set(s,{widget:e,listener:e.onDidClose(n)})}},1);var Ys;(function(s){s.inPeekEditor=new le("inReferenceSearchEditor",!0,m("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),s.notInPeekEditor=s.inPeekEditor.toNegated()})(Ys||(Ys={}));var j_;let Nx=(j_=class{constructor(e,t){e instanceof aa&&Ys.inPeekEditor.bindTo(t)}dispose(){}},j_.ID="editor.contrib.referenceController",j_);Nx=fQ([gQ(1,Ie)],Nx);dt(Nx.ID,Nx,0);function Vxe(s){const e=s.get(mt).getFocusedCodeEditor();return e instanceof aa?e.getParentEditor():e}const zxe={headerBackgroundColor:Z.white,primaryHeadingColor:Z.fromHex("#333333"),secondaryHeadingColor:Z.fromHex("#6c6c6cb3")};let Rx=class extends Hxe{constructor(e,t,n){super(e,t),this.instantiationService=n,this._onDidClose=new O,this.onDidClose=this._onDidClose.event,dT(this.options,zxe,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=te(".head"),this._bodyElement=te(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=te(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),hn(this._titleElement,"click",o=>this._onTitleClick(o))),Y(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=te("span.filename"),this._secondaryHeading=te("span.dirname"),this._metaHeading=te("span.meta"),Y(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const n=te(".peekview-actions");Y(this._headElement,n);const i=this._getActionBarOptions();this._actionbarWidget=new Zo(n,i),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new _o("peekview.close",m("label.close","Close"),De.asClassName(J.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:EG.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:xi(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,uo(this._metaHeading)):ps(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0){this.dispose();return}const n=Math.ceil(this.editor.getOption(67)*1.2),i=Math.round(e-(n+2));this._doLayoutHead(n,t),this._doLayoutBody(i,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height=`${e}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height=`${e}px`)}};Rx=fQ([gQ(2,Ce)],Rx);const $xe=T("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:Z.black,hcLight:Z.white},m("peekViewTitleBackground","Background color of the peek view title area.")),pQ=T("peekViewTitleLabel.foreground",{dark:Z.white,light:Z.black,hcDark:Z.white,hcLight:sc},m("peekViewTitleForeground","Color of the peek view title.")),_Q=T("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},m("peekViewTitleInfoForeground","Color of the peek view title info.")),Uxe=T("peekView.border",{dark:Gl,light:Gl,hcDark:ct,hcLight:ct},m("peekViewBorder","Color of the peek view borders and arrow.")),jxe=T("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:Z.black,hcLight:Z.white},m("peekViewResultsBackground","Background color of the peek view result list."));T("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:Z.white,hcLight:sc},m("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list."));T("peekViewResult.fileForeground",{dark:Z.white,light:"#1E1E1E",hcDark:Z.white,hcLight:sc},m("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list."));T("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},m("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list."));T("peekViewResult.selectionForeground",{dark:Z.white,light:"#6C6C6C",hcDark:Z.white,hcLight:sc},m("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list."));const bQ=T("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:Z.black,hcLight:Z.white},m("peekViewEditorBackground","Background color of the peek view editor."));T("peekViewEditorGutter.background",bQ,m("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor."));T("peekViewEditorStickyScroll.background",bQ,m("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor."));T("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},m("peekViewResultsMatchHighlight","Match highlight color in the peek view result list."));T("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},m("peekViewEditorMatchHighlight","Match highlight color in the peek view editor."));T("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:Zt,hcLight:Zt},m("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."));class vu{constructor(e,t,n,i){this.isProviderFirst=e,this.parent=t,this.link=n,this._rangeCallback=i,this.id=PA.nextId()}get uri(){return this.link.uri}get range(){return this._range??this.link.targetSelectionRange??this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var t;const e=(t=this.parent.getPreview(this))==null?void 0:t.preview(this.range);return e?m({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"{0} in {1} on line {2} at column {3}",e.value,xr(this.uri),this.range.startLineNumber,this.range.startColumn):m("aria.oneReference","in {0} on line {1} at column {2}",xr(this.uri),this.range.startLineNumber,this.range.startColumn)}}class qxe{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const n=this._modelReference.object.textEditorModel;if(!n)return;const{startLineNumber:i,startColumn:o,endLineNumber:r,endColumn:a}=e,l=n.getWordUntilPosition({lineNumber:i,column:o-t}),c=new L(i,l.startColumn,i,o),d=new L(r,a,r,1073741824),h=n.getValueInRange(c).replace(/^\s+/,""),u=n.getValueInRange(e),f=n.getValueInRange(d).replace(/\s+$/,"");return{value:h+u+f,highlight:{start:h.length,end:h.length+u.length}}}}class j1{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new mi}dispose(){Mt(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return e===1?m("aria.fileReferences.1","1 symbol in {0}, full path {1}",xr(this.uri),this.uri.fsPath):m("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,xr(this.uri),this.uri.fsPath)}async resolve(e){if(this._previews.size!==0)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const n=await e.createModelReference(t.uri);this._previews.set(t.uri,new qxe(n))}catch(n){Pe(n)}return this}}class Co{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new O,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[n]=e;e.sort(Co._compareReferences);let i;for(const o of e)if((!i||!Yt.isEqual(i.uri,o.uri,!0))&&(i=new j1(this,o.uri),this.groups.push(i)),i.children.length===0||Co._compareReferences(o,i.children[i.children.length-1])!==0){const r=new vu(n===o,i,o,a=>this._onDidChangeReferenceRange.fire(a));this.references.push(r),i.children.push(r)}}dispose(){Mt(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new Co(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?m("aria.result.0","No results found"):this.references.length===1?m("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?m("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):m("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:n}=e;let i=n.children.indexOf(e);const o=n.children.length,r=n.parent.groups.length;return r===1||t&&i+1<o||!t&&i>0?(t?i=(i+1)%o:i=(i+o-1)%o,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%r,n.parent.groups[i].children[0]):(i=(i+r-1)%r,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}nearestReference(e,t){const n=this.references.map((i,o)=>({idx:o,prefixLen:ou(i.uri.toString(),e.toString()),offsetDist:Math.abs(i.range.startLineNumber-t.lineNumber)*100+Math.abs(i.range.startColumn-t.column)})).sort((i,o)=>i.prefixLen>o.prefixLen?-1:i.prefixLen<o.prefixLen?1:i.offsetDist<o.offsetDist?-1:i.offsetDist>o.offsetDist?1:0)[0];if(n)return this.references[n.idx]}referenceAt(e,t){for(const n of this.references)if(n.uri.toString()===e.toString()&&L.containsPosition(n.range,t))return n}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return Yt.compare(e.uri,t.uri)||L.compareRangesUsingStarts(e.range,t.range)}}var PE=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},OE=function(s,e){return function(t,n){e(t,n,s)}},FF;let WF=class{constructor(e){this._resolverService=e}hasChildren(e){return e instanceof Co||e instanceof j1}getChildren(e){if(e instanceof Co)return e.groups;if(e instanceof j1)return e.resolve(this._resolverService).then(t=>t.children);throw new Error("bad tree")}};WF=PE([OE(0,Qs)],WF);class Kxe{getHeight(){return 23}getTemplateId(e){return e instanceof j1?Mx.id:Ax.id}}let BF=class{constructor(e){this._keybindingService=e}getKeyboardNavigationLabel(e){var t;if(e instanceof vu){const n=(t=e.parent.getPreview(e))==null?void 0:t.preview(e.range);if(n)return n.value}return xr(e.uri)}};BF=PE([OE(0,wt)],BF);class Gxe{getId(e){return e instanceof vu?e.id:e.uri}}let HF=class extends F{constructor(e,t){super(),this._labelService=t;const n=document.createElement("div");n.classList.add("reference-file"),this.file=this._register(new zL(n,{supportHighlights:!0})),this.badge=new AP(Y(n,te(".count")),{},IG),e.appendChild(n)}set(e,t){const n=KT(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(n,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});const i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat(m("referencesCount","{0} references",i)):this.badge.setTitleFormat(m("referenceCount","{0} reference",i))}};HF=PE([OE(1,_b)],HF);var dg;let Mx=(dg=class{constructor(e){this._instantiationService=e,this.templateId=FF.id}renderTemplate(e){return this._instantiationService.createInstance(HF,e)}renderElement(e,t,n){n.set(e.element,k0(e.filterData))}disposeTemplate(e){e.dispose()}},FF=dg,dg.id="FileReferencesRenderer",dg);Mx=FF=PE([OE(0,Ce)],Mx);class Zxe extends F{constructor(e){super(),this.label=this._register(new Ph(e))}set(e,t){var i;const n=(i=e.parent.getPreview(e))==null?void 0:i.preview(e.range);if(!n||!n.value)this.label.set(`${xr(e.uri)}:${e.range.startLineNumber+1}:${e.range.startColumn+1}`);else{const{value:o,highlight:r}=n;t&&!za.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(o,k0(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(o,[r]))}}}const yI=class yI{constructor(){this.templateId=yI.id}renderTemplate(e){return new Zxe(e)}renderElement(e,t,n){n.set(e.element,e.filterData)}disposeTemplate(e){e.dispose()}};yI.id="OneReferenceRenderer";let Ax=yI;class Yxe{getWidgetAriaLabel(){return m("treeAriaLabel","References")}getAriaLabel(e){return e.ariaMessage}}var Xxe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cp=function(s,e){return function(t,n){e(t,n,s)}};const SI=class SI{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new q,this._callOnModelChange=new q,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e){for(const t of this._model.references)if(t.uri.toString()===e.uri.toString()){this._addDecorations(t.parent);return}}}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const t=[],n=[];for(let i=0,o=e.children.length;i<o;i++){const r=e.children[i];this._decorationIgnoreSet.has(r.id)||r.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:r.range,options:SI.DecorationOptions}),n.push(i))}this._editor.changeDecorations(i=>{const o=i.deltaDecorations([],t);for(let r=0;r<o.length;r++)this._decorations.set(o[r],e.children[n[r]])})}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[n,i]of this._decorations){const o=t.getDecorationRange(n);if(!o)continue;let r=!1;if(!L.equalsRange(o,i.range)){if(L.spansMultipleLines(o))r=!0;else{const a=i.range.endColumn-i.range.startColumn,l=o.endColumn-o.startColumn;a!==l&&(r=!0)}r?(this._decorationIgnoreSet.add(i.id),e.push(n)):i.range=o}}for(let n=0,i=e.length;n<i;n++)this._decorations.delete(e[n]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}};SI.DecorationOptions=Ve.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});let VF=SI;class Qxe{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,n;try{const i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch{}return{ratio:t||.7,heightInLines:n||18}}}class Jxe extends zP{}let zF=class extends Rx{constructor(e,t,n,i,o,r,a,l,c){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},r),this._defaultTreeKeyboardSupport=t,this.layoutData=n,this._textModelResolverService=o,this._instantiationService=r,this._peekViewService=a,this._uriLabel=l,this._keybindingService=c,this._disposeOnNewModel=new q,this._callOnDispose=new q,this._onDidSelectReference=new O,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new Lt(0,0),this._isClosing=!1,this._applyTheme(i.getColorTheme()),this._callOnDispose.add(i.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}get isClosing(){return this._isClosing}dispose(){this._isClosing=!0,this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),Mt(this._preview),Mt(this._previewNotAvailableMessage),Mt(this._tree),Mt(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(Uxe)||Z.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor($xe)||Z.transparent,primaryHeadingColor:e.getColor(pQ),secondaryHeadingColor:e.getColor(_Q)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=Y(e,te("div.messages")),ps(this._messageContainer),this._splitView=new CZ(e,{orientation:1}),this._previewContainer=Y(e,te("div.preview.inline"));const t={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(aa,this._previewContainer,t,{},this.editor),ps(this._previewContainer),this._previewNotAvailableMessage=this._instantiationService.createInstance(Pa,m("missingPreviewMessage","no preview available"),xs,Pa.DEFAULT_CREATION_OPTIONS,null),this._treeContainer=Y(e,te("div.ref-tree.inline"));const n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new Yxe,keyboardNavigationLabelProvider:this._instantiationService.createInstance(BF),identityProvider:new Gxe,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:jxe}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(hn(this._treeContainer,"keydown",o=>{o.equals(9)&&(this._keybindingService.dispatchEvent(o,o.target),o.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(Jxe,"ReferencesWidget",this._treeContainer,new Kxe,[this._instantiationService.createInstance(Mx),this._instantiationService.createInstance(Ax)],this._instantiationService.createInstance(WF),n),this._splitView.addView({onDidChange:se.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:o=>{this._preview.layout({height:this._dim.height,width:o})}},PL.Distribute),this._splitView.addView({onDidChange:se.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:o=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${o}px`,this._tree.layout(this._dim.height,o)}},PL.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const i=(o,r)=>{o instanceof vu&&(r==="show"&&this._revealReference(o,!1),this._onDidSelectReference.fire({element:o,kind:r,source:"tree"}))};this._disposables.add(this._tree.onDidOpen(o=>{o.sideBySide?i(o.element,"side"):o.editorOptions.pinned?i(o.element,"goto"):i(o.element,"show")})),ps(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new Lt(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then(()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))})}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=m("noResults","No results"),uo(this._messageContainer),Promise.resolve(void 0)):(ps(this._messageContainer),this._decorationsManager=new VF(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(e=>this._tree.rerender(e))),this._disposeOnNewModel.add(this._preview.onMouseDown(e=>{const{event:t,target:n}=e;if(t.detail!==2)return;const i=this._getFocusedReference();i&&this._onDidSelectReference.fire({element:{uri:i.uri,range:n.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),uo(this._treeContainer),uo(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();if(e instanceof vu)return e;if(e instanceof j1&&e.children.length>0)return e.children[0]}async revealReference(e){await this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}async _revealReference(e,t){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==We.inMemory?this.setTitle(Zde(e.uri),this._uriLabel.getUriLabel(KT(e.uri))):this.setTitle(m("peekView.alternateTitle","References"));const n=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent?this._tree.reveal(e):(t&&this._tree.reveal(e.parent),await this._tree.expand(e.parent),this._tree.reveal(e));const i=await n;if(!this._model){i.dispose();return}Mt(this._previewModelReference);const o=i.object;if(o){const r=this._preview.getModel()===o.textEditorModel?0:1,a=L.lift(e.range).collapseToStart();this._previewModelReference=i,this._preview.setModel(o.textEditorModel),this._preview.setSelection(a),this._preview.revealRangeInCenter(a,r)}else this._preview.setModel(this._previewNotAvailableMessage),i.dispose()}};zF=Xxe([cp(3,Yn),cp(4,Qs),cp(5,Ce),cp(6,mQ),cp(7,_b),cp(8,wt)],zF);var eDe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},dp=function(s,e){return function(t,n){e(t,n,s)}},ak;const Hm=new le("referenceSearchVisible",!1,m("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));var hg;let pm=(hg=class{static get(e){return e.getContribution(ak.ID)}constructor(e,t,n,i,o,r,a,l){this._defaultTreeKeyboardSupport=e,this._editor=t,this._editorService=i,this._notificationService=o,this._instantiationService=r,this._storageService=a,this._configurationService=l,this._disposables=new q,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=Hm.bindTo(n)}dispose(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),(e=this._widget)==null||e.dispose(),(t=this._model)==null||t.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(e,t,n){let i;if(this._widget&&(i=this._widget.position),this.closeWidget(),i&&e.containsPosition(i))return;this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const o="peekViewLayout",r=Qxe.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(zF,this._editor,this._defaultTreeKeyboardSupport,r),this._widget.setTitle(m("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose(()=>{t.cancel(),this._widget?(this._storageService.store(o,JSON.stringify(this._widget.layoutData),0,1),this._widget.isClosing||this.closeWidget(),this._widget=void 0):this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(l=>{const{element:c,kind:d}=l;if(c)switch(d){case"open":(l.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(c,!1,!1);break;case"side":this.openReference(c,!0,!1);break;case"goto":n?this._gotoReference(c,!0):this.openReference(c,!1,!0);break}}));const a=++this._requestIdPool;t.then(l=>{var c;if(a!==this._requestIdPool||!this._widget){l.dispose();return}return(c=this._model)==null||c.dispose(),this._model=l,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(m("metaTitle.N","{0} ({1})",this._model.title,this._model.references.length));const d=this._editor.getModel().uri,h=new A(e.startLineNumber,e.startColumn),u=this._model.nearestReference(d,h);if(u)return this._widget.setSelection(u).then(()=>{this._widget&&this._editor.getOption(87)==="editor"&&this._widget.focusOnPreviewEditor()})}})},l=>{this._notificationService.error(l)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(e){if(!this._editor.hasModel()||!this._model||!this._widget)return;const t=this._widget.position;if(!t)return;const n=this._model.nearestReference(this._editor.getModel().uri,t);if(!n)return;const i=this._model.nextOrPreviousReference(n,e),o=this._editor.hasTextFocus(),r=this._widget.isPreviewEditorFocused();await this._widget.setSelection(i),await this._gotoReference(i,!1),o?this._editor.focus():this._widget&&r&&this._widget.focusOnPreviewEditor()}async revealReference(e){!this._editor.hasModel()||!this._model||!this._widget||await this._widget.revealReference(e)}closeWidget(e=!0){var t,n;(t=this._widget)==null||t.dispose(),(n=this._model)==null||n.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,e&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(e,t){var i;(i=this._widget)==null||i.hide(),this._ignoreModelChangeEvent=!0;const n=L.lift(e.range).collapseToStart();return this._editorService.openCodeEditor({resource:e.uri,options:{selection:n,selectionSource:"code.jump",pinned:t}},this._editor).then(o=>{if(this._ignoreModelChangeEvent=!1,!o||!this._widget){this.closeWidget();return}if(this._editor===o)this._widget.show(n),this._widget.focusOnReferenceTree();else{const r=ak.get(o),a=this._model.clone();this.closeWidget(),o.focus(),r==null||r.toggleWidget(n,si(l=>Promise.resolve(a)),this._peekMode??!1)}},o=>{this._ignoreModelChangeEvent=!1,Pe(o)})}openReference(e,t,n){t||this.closeWidget();const{uri:i,range:o}=e;this._editorService.openCodeEditor({resource:i,options:{selection:o,selectionSource:"code.jump",pinned:n}},this._editor,t)}},ak=hg,hg.ID="editor.contrib.referencesController",hg);pm=ak=eDe([dp(2,Ie),dp(3,mt),dp(4,En),dp(5,Ce),dp(6,da),dp(7,Ze)],pm);function Vm(s,e){const t=Vxe(s);if(!t)return;const n=pm.get(t);n&&e(n)}Ts.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:zn(2089,60),when:K.or(Hm,Ys.inPeekEditor),handler(s){Vm(s,e=>{e.changeFocusBetweenPreviewAndReferences()})}});Ts.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:K.or(Hm,Ys.inPeekEditor),handler(s){Vm(s,e=>{e.goToNextOrPreviousReference(!0)})}});Ts.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:K.or(Hm,Ys.inPeekEditor),handler(s){Vm(s,e=>{e.goToNextOrPreviousReference(!1)})}});rt.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference");rt.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference");rt.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch");rt.registerCommand("closeReferenceSearch",s=>Vm(s,e=>e.closeWidget()));Ts.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:K.and(Ys.inPeekEditor,K.not("config.editor.stablePeek"))});Ts.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:K.and(Hm,K.not("config.editor.stablePeek"),K.or(I.editorTextFocus,EZ.negate()))});Ts.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:K.and(Hm,MZ,gW.negate(),mW.negate()),handler(s){var n;const t=(n=s.get(Rr).lastFocusedList)==null?void 0:n.getFocus();Array.isArray(t)&&t[0]instanceof vu&&Vm(s,i=>i.revealReference(t[0]))}});Ts.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:K.and(Hm,MZ,gW.negate(),mW.negate()),handler(s){var n;const t=(n=s.get(Rr).lastFocusedList)==null?void 0:n.getFocus();Array.isArray(t)&&t[0]instanceof vu&&Vm(s,i=>i.openReference(t[0],!0,!0))}});rt.registerCommand("openReference",s=>{var n;const t=(n=s.get(Rr).lastFocusedList)==null?void 0:n.getFocus();Array.isArray(t)&&t[0]instanceof vu&&Vm(s,i=>i.openReference(t[0],!1,!0))});var vQ=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},hC=function(s,e){return function(t,n){e(t,n,s)}};const LB=new le("hasSymbols",!1,m("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),FE=tt("ISymbolNavigationService");let $F=class{constructor(e,t,n,i){this._editorService=t,this._notificationService=n,this._keybindingService=i,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=LB.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),(e=this._currentState)==null||e.dispose(),(t=this._currentMessage)==null||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1){this.reset();return}this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const n=new UF(this._editorService),i=n.onDidChange(o=>{if(this._ignoreEditorChange)return;const r=this._editorService.getActiveCodeEditor();if(!r)return;const a=r.getModel(),l=r.getPosition();if(!a||!l)return;let c=!1,d=!1;for(const h of t.references)if(s1(h.uri,a.uri))c=!0,d=d||L.containsPosition(h.range,l);else if(c)break;(!c||!d)&&this.reset()});this._currentState=Jr(n,i)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:L.collapseToStart(t.range),selectionRevealType:3}},e).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){var n;(n=this._currentMessage)==null||n.dispose();const e=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),t=e?m("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,e.getLabel()):m("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(t)}};$F=vQ([hC(0,Ie),hC(1,mt),hC(2,En),hC(3,wt)],$F);st(FE,$F,1);oe(new class extends Zn{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:LB,kbOpts:{weight:100,primary:70}})}runEditorCommand(s,e){return s.get(FE).revealNext(e)}});Ts.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:LB,primary:9,handler(s){s.get(FE).reset()}});let UF=class{constructor(e){this._listener=new Map,this._disposables=new q,this._onDidChange=new O,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),Mt(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,Jr(e.onDidChangeCursorPosition(t=>this._onDidChange.fire({editor:e})),e.onDidChangeModelContent(t=>this._onDidChange.fire({editor:e}))))}_onDidRemoveEditor(e){var t;(t=this._listener.get(e))==null||t.dispose(),this._listener.delete(e)}};UF=vQ([hC(0,mt)],UF);function jF(s,e){return e.uri.scheme===s.uri.scheme?!0:!VM(e.uri,We.walkThroughSnippet,We.vscodeChatCodeBlock,We.vscodeChatCodeCompareBlock)}async function K0(s,e,t,n,i){const r=t.ordered(s,n).map(l=>Promise.resolve(i(l,s,e)).then(void 0,c=>{kn(c)})),a=await Promise.all(r);return ea(a.flat()).filter(l=>jF(s,l))}function G0(s,e,t,n,i){return K0(e,t,s,n,(o,r,a)=>o.provideDefinition(r,a,i))}function xB(s,e,t,n,i){return K0(e,t,s,n,(o,r,a)=>o.provideDeclaration(r,a,i))}function DB(s,e,t,n,i){return K0(e,t,s,n,(o,r,a)=>o.provideImplementation(r,a,i))}function IB(s,e,t,n,i){return K0(e,t,s,n,(o,r,a)=>o.provideTypeDefinition(r,a,i))}function Z0(s,e,t,n,i,o){return K0(e,t,s,i,async(r,a,l)=>{var h,u;const c=(h=await r.provideReferences(a,l,{includeDeclaration:!0},o))==null?void 0:h.filter(f=>jF(a,f));if(!n||!c||c.length!==2)return c;const d=(u=await r.provideReferences(a,l,{includeDeclaration:!1},o))==null?void 0:u.filter(f=>jF(a,f));return d&&d.length===1?d:c})}async function lc(s){const e=await s(),t=new Co(e,""),n=t.references.map(i=>i.link);return t.dispose(),n}Js("_executeDefinitionProvider",(s,e,t)=>{const n=s.get(ue),i=G0(n.definitionProvider,e,t,!1,Ue.None);return lc(()=>i)});Js("_executeDefinitionProvider_recursive",(s,e,t)=>{const n=s.get(ue),i=G0(n.definitionProvider,e,t,!0,Ue.None);return lc(()=>i)});Js("_executeTypeDefinitionProvider",(s,e,t)=>{const n=s.get(ue),i=IB(n.typeDefinitionProvider,e,t,!1,Ue.None);return lc(()=>i)});Js("_executeTypeDefinitionProvider_recursive",(s,e,t)=>{const n=s.get(ue),i=IB(n.typeDefinitionProvider,e,t,!0,Ue.None);return lc(()=>i)});Js("_executeDeclarationProvider",(s,e,t)=>{const n=s.get(ue),i=xB(n.declarationProvider,e,t,!1,Ue.None);return lc(()=>i)});Js("_executeDeclarationProvider_recursive",(s,e,t)=>{const n=s.get(ue),i=xB(n.declarationProvider,e,t,!0,Ue.None);return lc(()=>i)});Js("_executeReferenceProvider",(s,e,t)=>{const n=s.get(ue),i=Z0(n.referenceProvider,e,t,!1,!1,Ue.None);return lc(()=>i)});Js("_executeReferenceProvider_recursive",(s,e,t)=>{const n=s.get(ue),i=Z0(n.referenceProvider,e,t,!1,!0,Ue.None);return lc(()=>i)});Js("_executeImplementationProvider",(s,e,t)=>{const n=s.get(ue),i=DB(n.implementationProvider,e,t,!1,Ue.None);return lc(()=>i)});Js("_executeImplementationProvider_recursive",(s,e,t)=>{const n=s.get(ue),i=DB(n.implementationProvider,e,t,!0,Ue.None);return lc(()=>i)});gi.appendMenuItem(ge.EditorContext,{submenu:ge.EditorContextPeek,title:m("peek.submenu","Peek"),group:"navigation",order:100});class Mb{static is(e){return!e||typeof e!="object"?!1:!!(e instanceof Mb||A.isIPosition(e.position)&&e.model)}constructor(e,t){this.model=e,this.position=t}}const Vr=class Vr extends el{static all(){return Vr._allSymbolNavigationCommands.values()}static _patchConfig(e){const t={...e,f1:!0};if(t.menu)for(const n of ot.wrap(t.menu))(n.id===ge.EditorContext||n.id===ge.EditorContextPeek)&&(n.when=K.and(e.precondition,n.when));return t}constructor(e,t){super(Vr._patchConfig(t)),this.configuration=e,Vr._allSymbolNavigationCommands.set(t.id,this)}runEditorCommand(e,t,n,i){if(!t.hasModel())return Promise.resolve(void 0);const o=e.get(En),r=e.get(mt),a=e.get(Lu),l=e.get(FE),c=e.get(ue),d=e.get(Ce),h=t.getModel(),u=t.getPosition(),f=Mb.is(n)?n:new Mb(h,u),g=new _u(t,5),p=b0(this._getLocationModel(c,f.model,f.position,g.token),g.token).then(async _=>{var C;if(!_||g.token.isCancellationRequested)return;Es(_.ariaMessage);let b;if(_.referenceAt(h.uri,u)){const w=this._getAlternativeCommand(t);!Vr._activeAlternativeCommands.has(w)&&Vr._allSymbolNavigationCommands.has(w)&&(b=Vr._allSymbolNavigationCommands.get(w))}const v=_.references.length;if(v===0){if(!this.configuration.muteMessage){const w=h.getWordAtPosition(u);(C=vo.get(t))==null||C.showMessage(this._getNoResultFoundMessage(w),u)}}else if(v===1&&b)Vr._activeAlternativeCommands.add(this.desc.id),d.invokeFunction(w=>b.runEditorCommand(w,t,n,i).finally(()=>{Vr._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(r,l,t,_,i)},_=>{o.error(_)}).finally(()=>{g.dispose()});return a.showWhile(p,250),p}async _onResult(e,t,n,i,o){const r=this._getGoToPreference(n);if(!(n instanceof aa)&&(this.configuration.openInPeek||r==="peek"&&i.references.length>1))this._openInPeek(n,i,o);else{const a=i.firstReference(),l=i.references.length>1&&r==="gotoAndPeek",c=await this._openReference(n,e,a,this.configuration.openToSide,!l);l&&c?this._openInPeek(c,i,o):i.dispose(),r==="goto"&&t.put(a)}}async _openReference(e,t,n,i,o){let r;if(oie(n)&&(r=n.targetSelectionRange),r||(r=n.range),!r)return;const a=await t.openCodeEditor({resource:n.uri,options:{selection:L.collapseToStart(r),selectionRevealType:3,selectionSource:"code.jump"}},e,i);if(a){if(o){const l=a.getModel(),c=a.createDecorationsCollection([{range:r,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{a.getModel()===l&&c.clear()},350)}return a}}_openInPeek(e,t,n){const i=pm.get(e);i&&e.hasModel()?i.toggleWidget(n??e.getSelection(),si(o=>Promise.resolve(t)),this.configuration.openInPeek):t.dispose()}};Vr._allSymbolNavigationCommands=new Map,Vr._activeAlternativeCommands=new Set;let kd=Vr;class Y0 extends kd{async _getLocationModel(e,t,n,i){return new Co(await G0(e.definitionProvider,t,n,!1,i),m("def.title","Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?m("noResultWord","No definition found for '{0}'",e.word):m("generic.noResults","No definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleDefinitions}}var Uh;Ot((Uh=class extends Y0{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Uh.id,title:{...Ee("actions.goToDecl.label","Go to Definition"),mnemonicTitle:m({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:I.hasDefinitionProvider,keybinding:[{when:I.editorTextFocus,primary:70,weight:100},{when:K.and(I.editorTextFocus,IZ),primary:2118,weight:100}],menu:[{id:ge.EditorContext,group:"navigation",order:1.1},{id:ge.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),rt.registerCommandAlias("editor.action.goToDeclaration",Uh.id)}},Uh.id="editor.action.revealDefinition",Uh));var jh;Ot((jh=class extends Y0{constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:jh.id,title:Ee("actions.goToDeclToSide.label","Open Definition to the Side"),precondition:K.and(I.hasDefinitionProvider,I.isInEmbeddedEditor.toNegated()),keybinding:[{when:I.editorTextFocus,primary:zn(2089,70),weight:100},{when:K.and(I.editorTextFocus,IZ),primary:zn(2089,2118),weight:100}]}),rt.registerCommandAlias("editor.action.openDeclarationToTheSide",jh.id)}},jh.id="editor.action.revealDefinitionAside",jh));var qh;Ot((qh=class extends Y0{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:qh.id,title:Ee("actions.previewDecl.label","Peek Definition"),precondition:K.and(I.hasDefinitionProvider,Ys.notInPeekEditor,I.isInEmbeddedEditor.toNegated()),keybinding:{when:I.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:ge.EditorContextPeek,group:"peek",order:2}}),rt.registerCommandAlias("editor.action.previewDeclaration",qh.id)}},qh.id="editor.action.peekDefinition",qh));class CQ extends kd{async _getLocationModel(e,t,n,i){return new Co(await xB(e.declarationProvider,t,n,!1,i),m("decl.title","Declarations"))}_getNoResultFoundMessage(e){return e&&e.word?m("decl.noResultWord","No declaration found for '{0}'",e.word):m("decl.generic.noResults","No declaration found")}_getAlternativeCommand(e){return e.getOption(58).alternativeDeclarationCommand}_getGoToPreference(e){return e.getOption(58).multipleDeclarations}}var ug;Ot((ug=class extends CQ{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:ug.id,title:{...Ee("actions.goToDeclaration.label","Go to Declaration"),mnemonicTitle:m({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:K.and(I.hasDeclarationProvider,I.isInEmbeddedEditor.toNegated()),menu:[{id:ge.EditorContext,group:"navigation",order:1.3},{id:ge.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(e){return e&&e.word?m("decl.noResultWord","No declaration found for '{0}'",e.word):m("decl.generic.noResults","No declaration found")}},ug.id="editor.action.revealDeclaration",ug));Ot(class extends CQ{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:Ee("actions.peekDecl.label","Peek Declaration"),precondition:K.and(I.hasDeclarationProvider,Ys.notInPeekEditor,I.isInEmbeddedEditor.toNegated()),menu:{id:ge.EditorContextPeek,group:"peek",order:3}})}});class wQ extends kd{async _getLocationModel(e,t,n,i){return new Co(await IB(e.typeDefinitionProvider,t,n,!1,i),m("typedef.title","Type Definitions"))}_getNoResultFoundMessage(e){return e&&e.word?m("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):m("goToTypeDefinition.generic.noResults","No type definition found")}_getAlternativeCommand(e){return e.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(e){return e.getOption(58).multipleTypeDefinitions}}var fg;Ot((fg=class extends wQ{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:fg.ID,title:{...Ee("actions.goToTypeDefinition.label","Go to Type Definition"),mnemonicTitle:m({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:I.hasTypeDefinitionProvider,keybinding:{when:I.editorTextFocus,primary:0,weight:100},menu:[{id:ge.EditorContext,group:"navigation",order:1.4},{id:ge.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}},fg.ID="editor.action.goToTypeDefinition",fg));var gg;Ot((gg=class extends wQ{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:gg.ID,title:Ee("actions.peekTypeDefinition.label","Peek Type Definition"),precondition:K.and(I.hasTypeDefinitionProvider,Ys.notInPeekEditor,I.isInEmbeddedEditor.toNegated()),menu:{id:ge.EditorContextPeek,group:"peek",order:4}})}},gg.ID="editor.action.peekTypeDefinition",gg));class yQ extends kd{async _getLocationModel(e,t,n,i){return new Co(await DB(e.implementationProvider,t,n,!1,i),m("impl.title","Implementations"))}_getNoResultFoundMessage(e){return e&&e.word?m("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):m("goToImplementation.generic.noResults","No implementation found")}_getAlternativeCommand(e){return e.getOption(58).alternativeImplementationCommand}_getGoToPreference(e){return e.getOption(58).multipleImplementations}}var mg;Ot((mg=class extends yQ{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:mg.ID,title:{...Ee("actions.goToImplementation.label","Go to Implementations"),mnemonicTitle:m({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:I.hasImplementationProvider,keybinding:{when:I.editorTextFocus,primary:2118,weight:100},menu:[{id:ge.EditorContext,group:"navigation",order:1.45},{id:ge.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}},mg.ID="editor.action.goToImplementation",mg));var pg;Ot((pg=class extends yQ{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:pg.ID,title:Ee("actions.peekImplementation.label","Peek Implementations"),precondition:K.and(I.hasImplementationProvider,Ys.notInPeekEditor,I.isInEmbeddedEditor.toNegated()),keybinding:{when:I.editorTextFocus,primary:3142,weight:100},menu:{id:ge.EditorContextPeek,group:"peek",order:5}})}},pg.ID="editor.action.peekImplementation",pg));class SQ extends kd{_getNoResultFoundMessage(e){return e?m("references.no","No references found for '{0}'",e.word):m("references.noGeneric","No references found")}_getAlternativeCommand(e){return e.getOption(58).alternativeReferenceCommand}_getGoToPreference(e){return e.getOption(58).multipleReferences}}Ot(class extends SQ{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{...Ee("goToReferences.label","Go to References"),mnemonicTitle:m({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:K.and(I.hasReferenceProvider,Ys.notInPeekEditor,I.isInEmbeddedEditor.toNegated()),keybinding:{when:I.editorTextFocus,primary:1094,weight:100},menu:[{id:ge.EditorContext,group:"navigation",order:1.45},{id:ge.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}async _getLocationModel(e,t,n,i){return new Co(await Z0(e.referenceProvider,t,n,!0,!1,i),m("ref.title","References"))}});Ot(class extends SQ{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:Ee("references.action.label","Peek References"),precondition:K.and(I.hasReferenceProvider,Ys.notInPeekEditor,I.isInEmbeddedEditor.toNegated()),menu:{id:ge.EditorContextPeek,group:"peek",order:6}})}async _getLocationModel(e,t,n,i){return new Co(await Z0(e.referenceProvider,t,n,!1,!1,i),m("ref.title","References"))}});class tDe extends kd{constructor(e,t,n){super(e,{id:"editor.action.goToLocation",title:Ee("label.generic","Go to Any Symbol"),precondition:K.and(Ys.notInPeekEditor,I.isInEmbeddedEditor.toNegated())}),this._references=t,this._gotoMultipleBehaviour=n}async _getLocationModel(e,t,n,i){return new Co(this._references,m("generic.title","Locations"))}_getNoResultFoundMessage(e){return e&&m("generic.noResult","No results for '{0}'",e.word)||""}_getGoToPreference(e){return this._gotoMultipleBehaviour??e.getOption(58).multipleReferences}_getAlternativeCommand(){return""}}rt.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Se},{name:"position",description:"The position at which to start",constraint:A.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:async(s,e,t,n,i,o,r)=>{gt(Se.isUri(e)),gt(A.isIPosition(t)),gt(Array.isArray(n)),gt(typeof i>"u"||typeof i=="string"),gt(typeof r>"u"||typeof r=="boolean");const a=s.get(mt),l=await a.openCodeEditor({resource:e},a.getFocusedCodeEditor());if(ec(l))return l.setPosition(t),l.revealPositionInCenterIfOutsideViewport(t,0),l.invokeWithinContext(c=>{const d=new class extends tDe{_getNoResultFoundMessage(h){return o||super._getNoResultFoundMessage(h)}}({muteMessage:!o,openInPeek:!!r,openToSide:!1},n,i);c.get(Ce).invokeFunction(d.run.bind(d),l)})}});rt.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:Se},{name:"position",description:"The position at which to start",constraint:A.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(s,e,t,n,i)=>{s.get(Wt).executeCommand("editor.action.goToLocations",e,t,n,i,void 0,!0)}});rt.registerCommand({id:"editor.action.findReferences",handler:(s,e,t)=>{gt(Se.isUri(e)),gt(A.isIPosition(t));const n=s.get(ue),i=s.get(mt);return i.openCodeEditor({resource:e},i.getFocusedCodeEditor()).then(o=>{if(!ec(o)||!o.hasModel())return;const r=pm.get(o);if(!r)return;const a=si(c=>Z0(n.referenceProvider,o.getModel(),A.lift(t),!1,!1,c).then(d=>new Co(d,m("ref.title","References")))),l=new L(t.lineNumber,t.column,t.lineNumber,t.column);return Promise.resolve(r.toggleWidget(l,a,!1))})}});rt.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations");async function nDe(s,e,t,n){const i=s.get(Qs),o=s.get(Lo),r=s.get(Wt),a=s.get(Ce),l=s.get(En);if(await n.item.resolve(Ue.None),!n.part.location)return;const c=n.part.location,d=[],h=new Set(gi.getMenuItems(ge.EditorContext).map(f=>v_(f)?f.command.id:TE()));for(const f of kd.all())h.has(f.desc.id)&&d.push(new _o(f.desc.id,bo.label(f.desc,{renderShortTitle:!0}),void 0,!0,async()=>{const g=await i.createModelReference(c.uri);try{const p=new Mb(g.object.textEditorModel,L.getStartPosition(c.range)),_=n.item.anchor.range;await a.invokeFunction(f.runEditorCommand.bind(f),e,p,_)}finally{g.dispose()}}));if(n.part.command){const{command:f}=n.part;d.push(new ri),d.push(new _o(f.id,f.title,void 0,!0,async()=>{try{await r.executeCommand(f.id,...f.arguments??[])}catch(g){l.notify({severity:PT.Error,source:n.item.provider.displayName,message:g})}}))}const u=e.getOption(128);o.showContextMenu({domForShadowRoot:u?e.getDomNode()??void 0:void 0,getAnchor:()=>{const f=Sn(t);return{x:f.left,y:f.top+f.height+8}},getActions:()=>d,onHide:()=>{e.focus()},autoSelectFirstItem:!0})}async function kQ(s,e,t,n){const o=await s.get(Qs).createModelReference(n.uri);await t.invokeWithinContext(async r=>{const a=e.hasSideBySideModifier,l=r.get(Ie),c=Ys.inPeekEditor.getValue(l),d=!a&&t.getOption(89)&&!c;return new Y0({openToSide:a,openInPeek:d,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(r,new Mb(o.object.textEditorModel,L.getStartPosition(n.range)),L.lift(n.range))}),o.dispose()}var iDe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},hp=function(s,e){return function(t,n){e(t,n,s)}},kp;class Px{constructor(){this._entries=new ic(50)}get(e){const t=Px._key(e);return this._entries.get(t)}set(e,t){const n=Px._key(e);this._entries.set(n,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const LQ=tt("IInlayHintsCache");st(LQ,Px,1);class qF{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return typeof e=="string"?{label:e}:e[this.index]}}class sDe{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}var nd;let q1=(nd=class{static get(e){return e.getContribution(kp.ID)??void 0}constructor(e,t,n,i,o,r,a){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=i,this._commandService=o,this._notificationService=r,this._instaService=a,this._disposables=new q,this._sessionDisposables=new q,this._decorationsMetadata=new Map,this._ruleFactory=new JL(this._editor),this._activeRenderMode=0,this._debounceInfo=n.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(l=>{l.hasChanged(142)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(142);if(e.enabled==="off")return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;if(e.enabled==="on")this._activeRenderMode=0;else{let a,l;e.enabled==="onUnlessPressed"?(a=0,l=1):(a=1,l=0),this._activeRenderMode=a,this._sessionDisposables.add(jc.getInstance().event(c=>{if(!this._editor.hasModel())return;const d=c.altKey&&c.ctrlKey&&!(c.shiftKey||c.metaKey)?l:a;if(d!==this._activeRenderMode){this._activeRenderMode=d;const h=this._editor.getModel(),u=this._copyInlayHintsWithCurrentAnchor(h);this._updateHintsDecorators([h.getFullModelRange()],u),r.schedule(0)}}))}const n=this._inlayHintsCache.get(t);n&&this._updateHintsDecorators([t.getFullModelRange()],n),this._sessionDisposables.add(ve(()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)}));let i;const o=new Set,r=new It(async()=>{const a=Date.now();i==null||i.dispose(!0),i=new an;const l=t.onWillDispose(()=>i==null?void 0:i.cancel());try{const c=i.token,d=await Ex.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),c);if(r.delay=this._debounceInfo.update(t,Date.now()-a),c.isCancellationRequested){d.dispose();return}for(const h of d.provider)typeof h.onDidChangeInlayHints=="function"&&!o.has(h)&&(o.add(h),this._sessionDisposables.add(h.onDidChangeInlayHints(()=>{r.isScheduled()||r.schedule()})));this._sessionDisposables.add(d),this._updateHintsDecorators(d.ranges,d.items),this._cacheHintsForFastRestore(t)}catch(c){Pe(c)}finally{i.dispose(),l.dispose()}},this._debounceInfo.get(t));this._sessionDisposables.add(r),this._sessionDisposables.add(ve(()=>i==null?void 0:i.dispose(!0))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(a=>{(a.scrollTopChanged||!r.isScheduled())&&r.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(a=>{i==null||i.cancel();const l=Math.max(r.delay,1250);r.schedule(l)})),this._sessionDisposables.add(this._installDblClickGesture(()=>r.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new q,t=e.add(new AE(this._editor)),n=new q;return e.add(n),e.add(t.onMouseMoveOrRelevantKeyDown(i=>{const[o]=i,r=this._getInlayHintLabelPart(o),a=this._editor.getModel();if(!r||!a){n.clear();return}const l=new an;n.add(ve(()=>l.dispose(!0))),r.item.resolve(l.token),this._activeInlayHintPart=r.part.command||r.part.location?new sDe(r,o.hasTriggerModifier):void 0;const c=a.validatePosition(r.item.hint.position).lineNumber,d=new L(c,1,c,a.getLineMaxColumn(c)),h=this._getInlineHintsForRange(d);this._updateHintsDecorators([d],h),n.add(ve(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([d],h)}))})),e.add(t.onCancel(()=>n.clear())),e.add(t.onExecute(async i=>{const o=this._getInlayHintLabelPart(i);if(o){const r=o.part;r.location?this._instaService.invokeFunction(kQ,i,this._editor,r.location):H2.is(r.command)&&await this._invokeCommand(r.command,o.item)}})),e}_getInlineHintsForRange(e){const t=new Set;for(const n of this._decorationsMetadata.values())e.containsRange(n.item.anchor.range)&&t.add(n.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp(async t=>{if(t.event.detail!==2)return;const n=this._getInlayHintLabelPart(t);if(n&&(t.event.preventDefault(),await n.item.resolve(Ue.None),cs(n.item.hint.textEdits))){const i=n.item.hint.textEdits.map(o=>on.replace(L.lift(o.range),o.text));this._editor.executeEdits("inlayHint.default",i),e()}})}_installContextMenu(){return this._editor.onContextMenu(async e=>{if(!oi(e.event.target))return;const t=this._getInlayHintLabelPart(e);t&&await this._instaService.invokeFunction(nDe,this._editor,e.event.target,t)})}_getInlayHintLabelPart(e){var n;if(e.target.type!==6)return;const t=(n=e.target.detail.injectedText)==null?void 0:n.options;if(t instanceof gu&&(t==null?void 0:t.attachedData)instanceof qF)return t.attachedData}async _invokeCommand(e,t){try{await this._commandService.executeCommand(e.id,...e.arguments??[])}catch(n){this._notificationService.notify({severity:PT.Error,source:t.provider.displayName,message:n})}}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[n,i]of this._decorationsMetadata){if(t.has(i.item))continue;const o=e.getDecorationRange(n);if(o){const r=new uQ(o,i.item.anchor.direction),a=i.item.with({anchor:r});t.set(i.item,a)}}return Array.from(t.values())}_getHintsRanges(){const t=this._editor.getModel(),n=this._editor.getVisibleRangesPlusViewportAboveBelow(),i=[];for(const o of n.sort(L.compareRangesUsingStarts)){const r=t.validateRange(new L(o.startLineNumber-30,o.startColumn,o.endLineNumber+30,o.endColumn));i.length===0||!L.areIntersectingOrTouching(i[i.length-1],r)?i.push(r):i[i.length-1]=L.plusRange(i[i.length-1],r)}return i}_updateHintsDecorators(e,t){var g,p;const n=[],i=(_,b,v,C,w)=>{const y={content:v,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:b.className,cursorStops:C,attachedData:w};n.push({item:_,classNameRef:b,decoration:{range:_.anchor.range,options:{description:"InlayHint",showIfCollapsed:_.anchor.range.isEmpty(),collapseOnReplaceEdit:!_.anchor.range.isEmpty(),stickiness:0,[_.anchor.direction]:this._activeRenderMode===0?y:void 0}}})},o=(_,b)=>{const v=this._ruleFactory.createClassNameRef({width:`${r/3|0}px`,display:"inline-block"});i(_,v," ",b?Zr.Right:Zr.None)},{fontSize:r,fontFamily:a,padding:l,isUniform:c}=this._getLayoutInfo(),d="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(d,a);let h={line:0,totalLen:0};for(const _ of t){if(h.line!==_.anchor.range.startLineNumber&&(h={line:_.anchor.range.startLineNumber,totalLen:0}),h.totalLen>kp._MAX_LABEL_LEN)continue;_.hint.paddingLeft&&o(_,!1);const b=typeof _.hint.label=="string"?[{label:_.hint.label}]:_.hint.label;for(let v=0;v<b.length;v++){const C=b[v],w=v===0,y=v===b.length-1,k={fontSize:`${r}px`,fontFamily:`var(${d}), ${Ls.fontFamily}`,verticalAlign:c?"baseline":"middle",unicodeBidi:"isolate"};cs(_.hint.textEdits)&&(k.cursor="default"),this._fillInColors(k,_.hint),(C.command||C.location)&&((g=this._activeInlayHintPart)==null?void 0:g.part.item)===_&&this._activeInlayHintPart.part.index===v&&(k.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(k.color=pn(Dle),k.cursor="pointer")),l&&(w&&y?(k.padding=`1px ${Math.max(1,r/4)|0}px`,k.borderRadius=`${r/4|0}px`):w?(k.padding=`1px 0 1px ${Math.max(1,r/4)|0}px`,k.borderRadius=`${r/4|0}px 0 0 ${r/4|0}px`):y?(k.padding=`1px ${Math.max(1,r/4)|0}px 1px 0`,k.borderRadius=`0 ${r/4|0}px ${r/4|0}px 0`):k.padding="1px 0 1px 0");let x=C.label;h.totalLen+=x.length;let D=!1;const N=h.totalLen-kp._MAX_LABEL_LEN;if(N>0&&(x=x.slice(0,-N)+"…",D=!0),i(_,this._ruleFactory.createClassNameRef(k),oDe(x),y&&!_.hint.paddingRight?Zr.Right:Zr.None,new qF(_,v)),D)break}if(_.hint.paddingRight&&o(_,!0),n.length>kp._MAX_DECORATORS)break}const u=[];for(const[_,b]of this._decorationsMetadata){const v=(p=this._editor.getModel())==null?void 0:p.getDecorationRange(_);v&&e.some(C=>C.containsRange(v))&&(u.push(_),b.classNameRef.dispose(),this._decorationsMetadata.delete(_))}const f=Qa.capture(this._editor);this._editor.changeDecorations(_=>{const b=_.deltaDecorations(u,n.map(v=>v.decoration));for(let v=0;v<b.length;v++){const C=n[v];this._decorationsMetadata.set(b[v],C)}}),f.restore(this._editor)}_fillInColors(e,t){t.kind===Rk.Parameter?(e.backgroundColor=pn(Ple),e.color=pn(Ale)):t.kind===Rk.Type?(e.backgroundColor=pn(Mle),e.color=pn(Rle)):(e.backgroundColor=pn(p9),e.color=pn(m9))}_getLayoutInfo(){const e=this._editor.getOption(142),t=e.padding,n=this._editor.getOption(52),i=this._editor.getOption(49);let o=e.fontSize;(!o||o<5||o>n)&&(o=n);const r=e.fontFamily||i;return{fontSize:o,fontFamily:r,padding:t,isUniform:!t&&r===i&&o===n}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}},kp=nd,nd.ID="editor.contrib.InlayHints",nd._MAX_DECORATORS=1500,nd._MAX_LABEL_LEN=43,nd);q1=kp=iDe([hp(1,ue),hp(2,ir),hp(3,LQ),hp(4,Wt),hp(5,En),hp(6,Ce)],q1);function oDe(s){return s.replace(/[ \t]/g," ")}rt.registerCommand("_executeInlayHintProvider",async(s,...e)=>{const[t,n]=e;gt(Se.isUri(t)),gt(L.isIRange(n));const{inlayHintsProvider:i}=s.get(ue),o=await s.get(Qs).createModelReference(t);try{const r=await Ex.create(i,o.object.textEditorModel,[L.lift(n)],Ue.None),a=r.items.map(l=>l.hint);return setTimeout(()=>r.dispose(),0),a}finally{o.dispose()}});var rDe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},jd=function(s,e){return function(t,n){e(t,n,s)}};class e$ extends sk{constructor(e,t,n,i){super(10,t,e.item.anchor.range,n,i,!0),this.part=e}}let Ox=class extends U1{constructor(e,t,n,i,o,r,a,l,c){super(e,t,n,r,l,i,o,c),this._resolverService=a,this.hoverOrdinal=6}suggestHoverAnchor(e){var i;if(!q1.get(this._editor)||e.target.type!==6)return null;const n=(i=e.target.detail.injectedText)==null?void 0:i.options;return n instanceof gu&&n.attachedData instanceof qF?new e$(n.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,n){return e instanceof e$?new Uo(async i=>{const{part:o}=e;if(await o.item.resolve(n),n.isCancellationRequested)return;let r;typeof o.item.hint.tooltip=="string"?r=new ji().appendText(o.item.hint.tooltip):o.item.hint.tooltip&&(r=o.item.hint.tooltip),r&&i.emitOne(new Kr(this,e.range,[r],!1,0)),cs(o.item.hint.textEdits)&&i.emitOne(new Kr(this,e.range,[new ji().appendText(m("hint.dbl","Double-click to insert"))],!1,10001));let a;if(typeof o.part.tooltip=="string"?a=new ji().appendText(o.part.tooltip):o.part.tooltip&&(a=o.part.tooltip),a&&i.emitOne(new Kr(this,e.range,[a],!1,1)),o.part.location||o.part.command){let c;const h=this._editor.getOption(78)==="altKey"?et?m("links.navigate.kb.meta.mac","cmd + click"):m("links.navigate.kb.meta","ctrl + click"):et?m("links.navigate.kb.alt.mac","option + click"):m("links.navigate.kb.alt","alt + click");o.part.location&&o.part.command?c=new ji().appendText(m("hint.defAndCommand","Go to Definition ({0}), right click for more",h)):o.part.location?c=new ji().appendText(m("hint.def","Go to Definition ({0})",h)):o.part.command&&(c=new ji(`[${m("hint.cmd","Execute Command")}](${Axe(o.part.command)} "${o.part.command.title}") (${h})`,{isTrusted:!0})),c&&i.emitOne(new Kr(this,e.range,[c],!1,1e4))}const l=await this._resolveInlayHintLabelPartHover(o,n);for await(const c of l)i.emitOne(c)}):Uo.EMPTY}async _resolveInlayHintLabelPartHover(e,t){if(!e.part.location)return Uo.EMPTY;const{uri:n,range:i}=e.part.location,o=await this._resolverService.createModelReference(n);try{const r=o.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(r)?SB(this._languageFeaturesService.hoverProvider,r,new A(i.startLineNumber,i.startColumn),t).filter(a=>!mb(a.hover.contents)).map(a=>new Kr(this,e.item.anchor.range,a.hover.contents,!1,2+a.ordinal)):Uo.EMPTY}finally{o.dispose()}}};Ox=rDe([jd(1,tn),jd(2,eo),jd(3,wt),jd(4,oc),jd(5,Ze),jd(6,Qs),jd(7,ue),jd(8,Wt)],Ox);class TB extends F{constructor(e,t,n,i,o,r){super();const a=t.anchor,l=t.hoverParts;this._renderedHoverParts=this._register(new KF(e,n,l,r,o));const{showAtPosition:c,showAtSecondaryPosition:d}=TB.computeHoverPositions(e,a.range,l);this.shouldAppearBeforeContent=l.some(h=>h.isBeforeContent),this.showAtPosition=c,this.showAtSecondaryPosition=d,this.initialMousePosX=a.initialMousePosX,this.initialMousePosY=a.initialMousePosY,this.shouldFocus=i.shouldFocus,this.source=i.source}get domNode(){return this._renderedHoverParts.domNode}get domNodeHasChildren(){return this._renderedHoverParts.domNodeHasChildren}get focusedHoverPartIndex(){return this._renderedHoverParts.focusedHoverPartIndex}async updateHoverVerbosityLevel(e,t,n){this._renderedHoverParts.updateHoverVerbosityLevel(e,t,n)}isColorPickerVisible(){return this._renderedHoverParts.isColorPickerVisible()}static computeHoverPositions(e,t,n){let i=1;if(e.hasModel()){const d=e._getViewModel(),h=d.coordinatesConverter,u=h.convertModelRangeToViewRange(t),f=d.getLineMinColumn(u.startLineNumber),g=new A(u.startLineNumber,f);i=h.convertViewPositionToModelPosition(g).column}const o=t.startLineNumber;let r=t.startColumn,a;for(const d of n){const h=d.range,u=h.startLineNumber===o,f=h.endLineNumber===o;if(u&&f){const p=h.startColumn,_=Math.min(r,p);r=Math.max(_,i)}d.forceShowAtRange&&(a=h)}let l,c;if(a){const d=a.getStartPosition();l=d,c=d}else l=t.getStartPosition(),c=new A(o,r);return{showAtPosition:l,showAtSecondaryPosition:c}}}class aDe{constructor(e,t){this._statusBar=t,e.appendChild(this._statusBar.hoverElement)}get hoverElement(){return this._statusBar.hoverElement}get actions(){return this._statusBar.actions}dispose(){this._statusBar.dispose()}}const kI=class kI extends F{constructor(e,t,n,i,o){super(),this._renderedParts=[],this._focusedHoverPartIndex=-1,this._context=o,this._fragment=document.createDocumentFragment(),this._register(this._renderParts(t,n,o,i)),this._register(this._registerListenersOnRenderedParts()),this._register(this._createEditorDecorations(e,n)),this._updateMarkdownAndColorParticipantInfo(t)}_createEditorDecorations(e,t){if(t.length===0)return F.None;let n=t[0].range;for(const o of t){const r=o.range;n=L.plusRange(n,r)}const i=e.createDecorationsCollection();return i.set([{range:n,options:kI._DECORATION_OPTIONS}]),ve(()=>{i.clear()})}_renderParts(e,t,n,i){const o=new Tx(i),r={fragment:this._fragment,statusBar:o,...n},a=new q;for(const c of e){const d=this._renderHoverPartsForParticipant(t,c,r);a.add(d);for(const h of d.renderedHoverParts)this._renderedParts.push({type:"hoverPart",participant:c,hoverPart:h.hoverPart,hoverElement:h.hoverElement})}const l=this._renderStatusBar(this._fragment,o);return l&&(a.add(l),this._renderedParts.push({type:"statusBar",hoverElement:l.hoverElement,actions:l.actions})),ve(()=>{a.dispose()})}_renderHoverPartsForParticipant(e,t,n){const i=e.filter(r=>r.owner===t);return i.length>0?t.renderHoverParts(n,i):new mm([])}_renderStatusBar(e,t){if(t.hasContent)return new aDe(e,t)}_registerListenersOnRenderedParts(){const e=new q;return this._renderedParts.forEach((t,n)=>{const i=t.hoverElement;i.tabIndex=0,e.add($(i,ee.FOCUS_IN,o=>{o.stopPropagation(),this._focusedHoverPartIndex=n})),e.add($(i,ee.FOCUS_OUT,o=>{o.stopPropagation(),this._focusedHoverPartIndex=-1}))}),e}_updateMarkdownAndColorParticipantInfo(e){const t=e.find(n=>n instanceof U1&&!(n instanceof Ox));t&&(this._markdownHoverParticipant=t),this._colorHoverParticipant=e.find(n=>n instanceof z1)}async updateHoverVerbosityLevel(e,t,n){if(!this._markdownHoverParticipant)return;const i=this._normalizedIndexToMarkdownHoverIndexRange(this._markdownHoverParticipant,t);if(i===void 0)return;const o=await this._markdownHoverParticipant.updateMarkdownHoverVerbosityLevel(e,i,n);o&&(this._renderedParts[t]={type:"hoverPart",participant:this._markdownHoverParticipant,hoverPart:o.hoverPart,hoverElement:o.hoverElement},this._context.onContentsChanged())}isColorPickerVisible(){var e;return((e=this._colorHoverParticipant)==null?void 0:e.isColorPickerVisible())??!1}_normalizedIndexToMarkdownHoverIndexRange(e,t){const n=this._renderedParts[t];if(!n||n.type!=="hoverPart"||!(n.participant===e))return;const o=this._renderedParts.findIndex(r=>r.type==="hoverPart"&&r.participant===e);if(o===-1)throw new _t;return t-o}get domNode(){return this._fragment}get domNodeHasChildren(){return this._fragment.hasChildNodes()}get focusedHoverPartIndex(){return this._focusedHoverPartIndex}};kI._DECORATION_OPTIONS=Ve.register({description:"content-hover-highlight",className:"hoverHighlight"});let KF=kI;var lDe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},t$=function(s,e){return function(t,n){e(t,n,s)}};let GF=class extends F{constructor(e,t,n){super(),this._editor=e,this._instantiationService=t,this._keybindingService=n,this._currentResult=null,this._onContentsChanged=this._register(new O),this.onContentsChanged=this._onContentsChanged.event,this._contentHoverWidget=this._register(this._instantiationService.createInstance(AF,this._editor)),this._participants=this._initializeHoverParticipants(),this._computer=new Ix(this._editor,this._participants),this._hoverOperation=this._register(new aQ(this._editor,this._computer)),this._registerListeners()}_initializeHoverParticipants(){const e=[];for(const t of Bm.getAll()){const n=this._instantiationService.createInstance(t,this._editor);e.push(n)}return e.sort((t,n)=>t.hoverOrdinal-n.hoverOrdinal),this._register(this._contentHoverWidget.onDidResize(()=>{this._participants.forEach(t=>{var n;return(n=t.handleResize)==null?void 0:n.call(t)})})),e}_registerListeners(){this._register(this._hoverOperation.onResult(t=>{if(!this._computer.anchor)return;const n=t.hasLoadingMessage?this._addLoadingMessage(t.value):t.value;this._withResult(new lQ(this._computer.anchor,n,t.isComplete))}));const e=this._contentHoverWidget.getDomNode();this._register(hn(e,"keydown",t=>{t.equals(9)&&this.hide()})),this._register(hn(e,"mouseleave",t=>{this._onMouseLeave(t)})),this._register(mn.onDidChange(()=>{this._contentHoverWidget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)}))}_startShowingOrUpdateHover(e,t,n,i,o){if(!(this._contentHoverWidget.position&&this._currentResult))return e?(this._startHoverOperationIfNecessary(e,t,n,i,!1),!0):!1;const a=this._editor.getOption(60).sticky,l=o&&this._contentHoverWidget.isMouseGettingCloser(o.event.posx,o.event.posy);return a&&l?(e&&this._startHoverOperationIfNecessary(e,t,n,i,!0),!0):e?this._currentResult.anchor.equals(e)?!0:e.canAdoptVisibleHover(this._currentResult.anchor,this._contentHoverWidget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,n,i,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,n,i,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,n,i,o){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=i,this._computer.source=n,this._computer.insistOnKeepingHoverVisible=o,this._hoverOperation.start(t))}_setCurrentResult(e){let t=e;if(this._currentResult===t)return;t&&t.hoverParts.length===0&&(t=null),this._currentResult=t,this._currentResult?this._showHover(this._currentResult):this._hideHover()}_addLoadingMessage(e){if(!this._computer.anchor)return e;for(const t of this._participants){if(!t.createLoadingMessage)continue;const n=t.createLoadingMessage(this._computer.anchor);if(n)return e.slice(0).concat([n])}return e}_withResult(e){if(this._contentHoverWidget.position&&this._currentResult&&this._currentResult.isComplete||this._setCurrentResult(e),!e.isComplete)return;const i=e.hoverParts.length===0,o=this._computer.insistOnKeepingHoverVisible;i&&o||this._setCurrentResult(e)}_showHover(e){const t=this._getHoverContext();this._renderedContentHover=new TB(this._editor,e,this._participants,this._computer,t,this._keybindingService),this._renderedContentHover.domNodeHasChildren?this._contentHoverWidget.show(this._renderedContentHover):this._renderedContentHover.dispose()}_hideHover(){this._contentHoverWidget.hide()}_getHoverContext(){return{hide:()=>{this.hide()},onContentsChanged:()=>{this._onContentsChanged.fire(),this._contentHoverWidget.onContentsChanged()},setMinimumDimensions:i=>{this._contentHoverWidget.setMinimumDimensions(i)}}}showsOrWillShow(e){if(this._contentHoverWidget.isResizing)return!0;const n=this._findHoverAnchorCandidates(e);if(!(n.length>0))return this._startShowingOrUpdateHover(null,0,0,!1,e);const o=n[0];return this._startShowingOrUpdateHover(o,0,0,!1,e)}_findHoverAnchorCandidates(e){const t=[];for(const i of this._participants){if(!i.suggestHoverAnchor)continue;const o=i.suggestHoverAnchor(e);o&&t.push(o)}const n=e.target;switch(n.type){case 6:{t.push(new jR(0,n.range,e.event.posx,e.event.posy));break}case 7:{const i=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;if(!(!n.detail.isAfterLines&&typeof n.detail.horizontalDistanceToText=="number"&&n.detail.horizontalDistanceToText<i))break;t.push(new jR(0,n.range,e.event.posx,e.event.posy));break}}return t.sort((i,o)=>o.priority-i.priority),t}_onMouseLeave(e){const t=this._editor.getDomNode();(!t||!ME(t,e.x,e.y))&&this.hide()}startShowingAtRange(e,t,n,i){this._startShowingOrUpdateHover(new jR(0,e,void 0,void 0),t,n,i,null)}async updateHoverVerbosityLevel(e,t,n){var i;(i=this._renderedContentHover)==null||i.updateHoverVerbosityLevel(e,t,n)}focusedHoverPartIndex(){var e;return((e=this._renderedContentHover)==null?void 0:e.focusedHoverPartIndex)??-1}containsNode(e){return e?this._contentHoverWidget.getDomNode().contains(e):!1}focus(){this._contentHoverWidget.focus()}scrollUp(){this._contentHoverWidget.scrollUp()}scrollDown(){this._contentHoverWidget.scrollDown()}scrollLeft(){this._contentHoverWidget.scrollLeft()}scrollRight(){this._contentHoverWidget.scrollRight()}pageUp(){this._contentHoverWidget.pageUp()}pageDown(){this._contentHoverWidget.pageDown()}goToTop(){this._contentHoverWidget.goToTop()}goToBottom(){this._contentHoverWidget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}getDomNode(){return this._contentHoverWidget.getDomNode()}get isColorPickerVisible(){var e;return((e=this._renderedContentHover)==null?void 0:e.isColorPickerVisible())??!1}get isVisibleFromKeyboard(){return this._contentHoverWidget.isVisibleFromKeyboard}get isVisible(){return this._contentHoverWidget.isVisible}get isFocused(){return this._contentHoverWidget.isFocused}get isResizing(){return this._contentHoverWidget.isResizing}get widget(){return this._contentHoverWidget}};GF=lDe([t$(1,Ce),t$(2,wt)],GF);var cDe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},n$=function(s,e){return function(t,n){e(t,n,s)}},ZF;const dDe=!1;var _g;let hs=(_g=class extends F{constructor(e,t,n){super(),this._editor=e,this._instantiationService=t,this._keybindingService=n,this._onHoverContentsChanged=this._register(new O),this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new q,this._hoverState={mouseDown:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new It(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}static get(e){return e.getContribution(ZF.ID)}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._shouldNotHideCurrentHoverWidget(e)&&this._hideWidgets()}_shouldNotHideCurrentHoverWidget(e){return this._isMouseOnContentHoverWidget(e)||this._isContentWidgetResizing()}_isMouseOnContentHoverWidget(e){var n;const t=(n=this._contentWidget)==null?void 0:n.getDomNode();return t?ME(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._shouldNotHideCurrentHoverWidget(e))||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky,n=(r,a)=>{const l=this._isMouseOnContentHoverWidget(r);return a&&l},i=r=>{var c;const a=this._isMouseOnContentHoverWidget(r),l=((c=this._contentWidget)==null?void 0:c.isColorPickerVisible)??!1;return a&&l},o=(r,a)=>{var l,c,d,h;return(a&&((c=this._contentWidget)==null?void 0:c.containsNode((l=r.event.browserEvent.view)==null?void 0:l.document.activeElement))&&!((h=(d=r.event.browserEvent.view)==null?void 0:d.getSelection())!=null&&h.isCollapsed))??!1};return n(e,t)||i(e)||o(e,t)}_onEditorMouseMove(e){var a,l,c,d;if(this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._mouseMoveEvent=e,(a=this._contentWidget)!=null&&a.isFocused||(l=this._contentWidget)!=null&&l.isResizing))return;const t=this._hoverSettings.sticky;if(t&&((c=this._contentWidget)!=null&&c.isVisibleFromKeyboard))return;if(this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}const i=this._hoverSettings.hidingDelay;if(((d=this._contentWidget)==null?void 0:d.isVisible)&&t&&i>0){this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(i);return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){var l;if(!e)return;const n=(l=e.target.element)==null?void 0:l.classList.contains("colorpicker-color-decoration"),i=this._editor.getOption(149),o=this._hoverSettings.enabled,r=this._hoverState.activatedByDecoratorClick;if(n&&(i==="click"&&!r||i==="hover"&&!o&&!dDe||i==="clickAndHover"&&!o&&!r)||!n&&!o&&!r){this._hideWidgets();return}this._tryShowHoverWidget(e)||this._hideWidgets()}_tryShowHoverWidget(e){return this._getOrCreateContentWidget().showsOrWillShow(e)}_onKeyDown(e){var i;if(!this._editor.hasModel())return;const t=this._keybindingService.softDispatch(e,this._editor.getDomNode()),n=t.kind===1||t.kind===2&&(t.commandId===iQ||t.commandId===NE||t.commandId===RE)&&((i=this._contentWidget)==null?void 0:i.isVisible);e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||n||this._hideWidgets()}_hideWidgets(){var e,t;this._hoverState.mouseDown&&((e=this._contentWidget)!=null&&e.isColorPickerVisible)||Rb.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,(t=this._contentWidget)==null||t.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(GF,this._editor),this._listenersStore.add(this._contentWidget.onContentsChanged(()=>this._onHoverContentsChanged.fire()))),this._contentWidget}showContentHover(e,t,n,i,o=!1){this._hoverState.activatedByDecoratorClick=o,this._getOrCreateContentWidget().startShowingAtRange(e,t,n,i)}_isContentWidgetResizing(){var e;return((e=this._contentWidget)==null?void 0:e.widget.isResizing)||!1}focusedHoverPartIndex(){return this._getOrCreateContentWidget().focusedHoverPartIndex()}updateHoverVerbosityLevel(e,t,n){this._getOrCreateContentWidget().updateHoverVerbosityLevel(e,t,n)}focus(){var e;(e=this._contentWidget)==null||e.focus()}scrollUp(){var e;(e=this._contentWidget)==null||e.scrollUp()}scrollDown(){var e;(e=this._contentWidget)==null||e.scrollDown()}scrollLeft(){var e;(e=this._contentWidget)==null||e.scrollLeft()}scrollRight(){var e;(e=this._contentWidget)==null||e.scrollRight()}pageUp(){var e;(e=this._contentWidget)==null||e.pageUp()}pageDown(){var e;(e=this._contentWidget)==null||e.pageDown()}goToTop(){var e;(e=this._contentWidget)==null||e.goToTop()}goToBottom(){var e;(e=this._contentWidget)==null||e.goToBottom()}get isColorPickerVisible(){var e;return(e=this._contentWidget)==null?void 0:e.isColorPickerVisible}get isHoverVisible(){var e;return(e=this._contentWidget)==null?void 0:e.isVisible}dispose(){var e;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(e=this._contentWidget)==null||e.dispose()}},ZF=_g,_g.ID="editor.contrib.contentHover",_g);hs=ZF=cDe([n$(1,Ce),n$(2,wt)],hs);const d7=class d7 extends F{constructor(e){super(),this._editor=e,this._register(e.onMouseDown(t=>this.onMouseDown(t)))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(149);if(t!=="click"&&t!=="clickAndHover")return;const n=e.target;if(n.type!==6||!n.detail.injectedText||n.detail.injectedText.options.attachedData!==YX||!n.range)return;const i=this._editor.getContribution(hs.ID);if(i&&!i.isColorPickerVisible){const o=new L(n.range.startLineNumber,n.range.startColumn+1,n.range.endLineNumber,n.range.endColumn+1);i.showContentHover(o,1,0,!1,!0)}}};d7.ID="editor.contrib.colorContribution";let Fx=d7;dt(Fx.ID,Fx,2);Bm.register(z1);var xQ=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Gp=function(s,e){return function(t,n){e(t,n,s)}},YF,XF,bg;let _m=(bg=class extends F{constructor(e,t,n){super(),this._editor=e,this._instantiationService=n,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=I.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=I.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||(e=this._standaloneColorPickerWidget)==null||e.focus():this._standaloneColorPickerWidget=this._instantiationService.createInstance(QF,this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),(e=this._standaloneColorPickerWidget)==null||e.hide(),this._editor.focus()}insertColor(){var e;(e=this._standaloneColorPickerWidget)==null||e.updateEditor(),this.hide()}static get(e){return e.getContribution(YF.ID)}},YF=bg,bg.ID="editor.contrib.standaloneColorPickerController",bg);_m=YF=xQ([Gp(1,Ie),Gp(2,Ce)],_m);dt(_m.ID,_m,1);const i$=8,hDe=22;var vg;let QF=(vg=class extends F{constructor(e,t,n,i,o,r,a){var h;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=n,this._keybindingService=o,this._languageFeaturesService=r,this._editorWorkerService=a,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new O),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=i.createInstance($1,this._editor),this._position=(h=this._editor._getViewModel())==null?void 0:h.getPrimaryCursorState().modelState.position;const l=this._editor.getSelection(),c=l?{startLineNumber:l.startLineNumber,startColumn:l.startColumn,endLineNumber:l.endLineNumber,endColumn:l.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},d=this._register(Ka(this._body));this._register(d.onDidBlur(u=>{this.hide()})),this._register(d.onDidFocus(u=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(u=>{var g;const f=(g=u.target.element)==null?void 0:g.classList;f&&f.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(u=>{this._render(u.value,u.foundInEditor)})),this._start(c),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return XF.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(e){const t=await this._computeAsync(e);t&&this._onResult.fire(new uDe(t.result,t.foundInEditor))}async _computeAsync(e){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},n=await this._standaloneColorPickerParticipant.createColorHover(t,new V1(this._editorWorkerService),this._languageFeaturesService.colorProvider);return n?{result:n.colorHover,foundInEditor:n.foundInEditor}:null}_render(e,t){const n=document.createDocumentFragment(),i=this._register(new Tx(this._keybindingService)),o={fragment:n,statusBar:i,onContentsChanged:()=>{},hide:()=>this.hide()};this._colorHover=e;const r=this._standaloneColorPickerParticipant.renderHoverParts(o,[e]);if(!r)return;this._register(r.disposables);const a=r.colorPicker;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+"px",this._body.tabIndex=0,this._body.appendChild(n),a.layout();const l=a.body,c=l.saturationBox.domNode.clientWidth,d=l.domNode.clientWidth-c-hDe-i$,h=a.body.enterButton;h==null||h.onClicked(()=>{this.updateEditor(),this.hide()});const u=a.header,f=u.pickedColorNode;f.style.width=c+i$+"px";const g=u.originalColorNode;g.style.width=d+"px";const p=a.header.closeButton;p==null||p.onClicked(()=>{this.hide()}),t&&(h&&(h.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}},XF=vg,vg.ID="editor.contrib.standaloneColorPickerWidget",vg);QF=XF=xQ([Gp(3,Ce),Gp(4,wt),Gp(5,ue),Gp(6,to)],QF);class uDe{constructor(e,t){this.value=e,this.foundInEditor=t}}class fDe extends el{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{...Ee("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:m({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker")},precondition:void 0,menu:[{id:ge.CommandPalette}],metadata:{description:Ee("showOrFocusStandaloneColorPickerDescription","Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.")}})}runEditorCommand(e,t){var n;(n=_m.get(t))==null||n.showOrFocus()}}class gDe extends he{constructor(){super({id:"editor.action.hideColorPicker",label:m({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:I.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100},metadata:{description:Ee("hideColorPickerDescription","Hide the standalone color picker.")}})}run(e,t){var n;(n=_m.get(t))==null||n.hide()}}class mDe extends he{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:m({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:I.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100},metadata:{description:Ee("insertColorWithStandaloneColorPickerDescription","Insert hex/rgb/hsl colors with the focused standalone color picker.")}})}run(e,t){var n;(n=_m.get(t))==null||n.insertColor()}}Q(gDe);Q(mDe);Ot(fDe);class xh{constructor(e,t,n){this.languageConfigurationService=n,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,n){if(n<0)return!1;const i=t.length,o=e.length;if(n+i>o)return!1;for(let r=0;r<i;r++){const a=e.charCodeAt(n+r),l=t.charCodeAt(r);if(a!==l&&!(a>=65&&a<=90&&a+32===l)&&!(l>=65&&l<=90&&l+32===a))return!1}return!0}_createOperationsForBlockComment(e,t,n,i,o,r){const a=e.startLineNumber,l=e.startColumn,c=e.endLineNumber,d=e.endColumn,h=o.getLineContent(a),u=o.getLineContent(c);let f=h.lastIndexOf(t,l-1+t.length),g=u.indexOf(n,d-1-n.length);if(f!==-1&&g!==-1)if(a===c)h.substring(f+t.length,g).indexOf(n)>=0&&(f=-1,g=-1);else{const _=h.substring(f+t.length),b=u.substring(0,g);(_.indexOf(n)>=0||b.indexOf(n)>=0)&&(f=-1,g=-1)}let p;f!==-1&&g!==-1?(i&&f+t.length<h.length&&h.charCodeAt(f+t.length)===32&&(t=t+" "),i&&g>0&&u.charCodeAt(g-1)===32&&(n=" "+n,g-=1),p=xh._createRemoveBlockCommentOperations(new L(a,f+t.length+1,c,g+1),t,n)):(p=xh._createAddBlockCommentOperations(e,t,n,this._insertSpace),this._usedEndToken=p.length===1?n:null);for(const _ of p)r.addTrackedEditOperation(_.range,_.text)}static _createRemoveBlockCommentOperations(e,t,n){const i=[];return L.isEmpty(e)?i.push(on.delete(new L(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+n.length))):(i.push(on.delete(new L(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(on.delete(new L(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+n.length)))),i}static _createAddBlockCommentOperations(e,t,n,i){const o=[];return L.isEmpty(e)?o.push(on.replace(new L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+n)):(o.push(on.insert(new A(e.startLineNumber,e.startColumn),t+(i?" ":""))),o.push(on.insert(new A(e.endLineNumber,e.endColumn),(i?" ":"")+n))),o}getEditOperations(e,t){const n=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenization.tokenizeIfCheap(n);const o=e.getLanguageIdAtPosition(n,i),r=this.languageConfigurationService.getLanguageConfiguration(o).comments;!r||!r.blockCommentStartToken||!r.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const n=t.getInverseEditOperations();if(n.length===2){const i=n[0],o=n[1];return new me(i.range.endLineNumber,i.range.endColumn,o.range.startLineNumber,o.range.startColumn)}else{const i=n[0].range,o=this._usedEndToken?-this._usedEndToken.length-1:0;return new me(i.endLineNumber,i.endColumn+o,i.endLineNumber,i.endColumn+o)}}}class Lc{constructor(e,t,n,i,o,r,a){this.languageConfigurationService=e,this._selection=t,this._indentSize=n,this._type=i,this._insertSpace=o,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=a||!1}static _gatherPreflightCommentStrings(e,t,n,i){e.tokenization.tokenizeIfCheap(t);const o=e.getLanguageIdAtPosition(t,1),r=i.getLanguageConfiguration(o).comments,a=r?r.lineCommentToken:null;if(!a)return null;const l=[];for(let c=0,d=n-t+1;c<d;c++)l[c]={ignore:!1,commentStr:a,commentStrOffset:0,commentStrLength:a.length};return l}static _analyzeLines(e,t,n,i,o,r,a,l){let c=!0,d;e===0?d=!0:e===1?d=!1:d=!0;for(let h=0,u=i.length;h<u;h++){const f=i[h],g=o+h;if(g===o&&a){f.ignore=!0;continue}const p=n.getLineContent(g),_=ds(p);if(_===-1){f.ignore=r,f.commentStrOffset=p.length;continue}if(c=!1,f.ignore=!1,f.commentStrOffset=_,d&&!xh._haystackHasNeedleAtOffset(p,f.commentStr,_)&&(e===0?d=!1:e===1||(f.ignore=!0)),d&&t){const b=_+f.commentStrLength;b<p.length&&p.charCodeAt(b)===32&&(f.commentStrLength+=1)}}if(e===0&&c){d=!1;for(let h=0,u=i.length;h<u;h++)i[h].ignore=!1}return{supported:!0,shouldRemoveComments:d,lines:i}}static _gatherPreflightData(e,t,n,i,o,r,a,l){const c=Lc._gatherPreflightCommentStrings(n,i,o,l);return c===null?{supported:!1}:Lc._analyzeLines(e,t,n,c,i,r,a,l)}_executeLineComments(e,t,n,i){let o;n.shouldRemoveComments?o=Lc._createRemoveLineCommentsOperations(n.lines,i.startLineNumber):(Lc._normalizeInsertionPoint(e,n.lines,i.startLineNumber,this._indentSize),o=this._createAddLineCommentsOperations(n.lines,i.startLineNumber));const r=new A(i.positionLineNumber,i.positionColumn);for(let a=0,l=o.length;a<l;a++)t.addEditOperation(o[a].range,o[a].text),L.isEmpty(o[a].range)&&L.getStartPosition(o[a].range).equals(r)&&e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(o[a].text||"").length);this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,n,i){let o=t.startLineNumber,r=t.endLineNumber;const a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(o).lastIndexOf(n,a-1),c=e.getLineContent(r).indexOf(i,t.endColumn-1-n.length);return l!==-1&&c===-1&&(c=e.getLineContent(o).indexOf(i,l+n.length),r=o),l===-1&&c!==-1&&(l=e.getLineContent(r).lastIndexOf(n,c),o=r),t.isEmpty()&&(l===-1||c===-1)&&(l=e.getLineContent(o).indexOf(n),l!==-1&&(c=e.getLineContent(o).indexOf(i,l+n.length))),l!==-1&&e.getLineContent(o).charCodeAt(l+n.length)===32&&(n+=" "),c!==-1&&e.getLineContent(r).charCodeAt(c-1)===32&&(i=" "+i,c-=1),l!==-1&&c!==-1?xh._createRemoveBlockCommentOperations(new L(o,l+n.length+1,r,c+1),n,i):null}_executeBlockComment(e,t,n){e.tokenization.tokenizeIfCheap(n.startLineNumber);const i=e.getLanguageIdAtPosition(n.startLineNumber,1),o=this.languageConfigurationService.getLanguageConfiguration(i).comments;if(!o||!o.blockCommentStartToken||!o.blockCommentEndToken)return;const r=o.blockCommentStartToken,a=o.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,n,r,a);if(!l){if(n.isEmpty()){const c=e.getLineContent(n.startLineNumber);let d=ds(c);d===-1&&(d=c.length),l=xh._createAddBlockCommentOperations(new L(n.startLineNumber,d+1,n.startLineNumber,c.length+1),r,a,this._insertSpace)}else l=xh._createAddBlockCommentOperations(new L(n.startLineNumber,e.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),r,a,this._insertSpace);l.length===1&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(n);for(const c of l)t.addEditOperation(c.range,c.text)}getEditOperations(e,t){let n=this._selection;if(this._moveEndPositionDown=!1,n.startLineNumber===n.endLineNumber&&this._ignoreFirstLine){t.addEditOperation(new L(n.startLineNumber,e.getLineMaxColumn(n.startLineNumber),n.startLineNumber+1,1),n.startLineNumber===e.getLineCount()?"":`
`),this._selectionId=t.trackSelection(n);return}n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=Lc._gatherPreflightData(this._type,this._insertSpace,e,n.startLineNumber,n.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return i.supported?this._executeLineComments(e,t,i,n):this._executeBlockComment(e,t,n)}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),new me(n.selectionStartLineNumber,n.selectionStartColumn+this._deltaColumn,n.positionLineNumber,n.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const n=[];for(let i=0,o=e.length;i<o;i++){const r=e[i];r.ignore||n.push(on.delete(new L(t+i,r.commentStrOffset+1,t+i,r.commentStrOffset+r.commentStrLength+1)))}return n}_createAddLineCommentsOperations(e,t){const n=[],i=this._insertSpace?" ":"";for(let o=0,r=e.length;o<r;o++){const a=e[o];a.ignore||n.push(on.insert(new A(t+o,a.commentStrOffset+1),a.commentStr+i))}return n}static nextVisibleColumn(e,t,n,i){return n?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,n,i){let o=1073741824,r,a;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let h=0;for(let u=0,f=t[l].commentStrOffset;h<o&&u<f;u++)h=Lc.nextVisibleColumn(h,i,d.charCodeAt(u)===9,1);h<o&&(o=h)}o=Math.floor(o/i)*i;for(let l=0,c=t.length;l<c;l++){if(t[l].ignore)continue;const d=e.getLineContent(n+l);let h=0;for(r=0,a=t[l].commentStrOffset;h<o&&r<a;r++)h=Lc.nextVisibleColumn(h,i,d.charCodeAt(r)===9,1);h>o?t[l].commentStrOffset=r-1:t[l].commentStrOffset=r}}}class EB extends he{constructor(e,t){super(t),this._type=e}run(e,t){const n=e.get(cn);if(!t.hasModel())return;const i=t.getModel(),o=[],r=i.getOptions(),a=t.getOption(23),l=t.getSelections().map((d,h)=>({selection:d,index:h,ignoreFirstLine:!1}));l.sort((d,h)=>L.compareRangesUsingStarts(d.selection,h.selection));let c=l[0];for(let d=1;d<l.length;d++){const h=l[d];c.selection.endLineNumber===h.selection.startLineNumber&&(c.index<h.index?h.ignoreFirstLine=!0:(c.ignoreFirstLine=!0,c=h))}for(const d of l)o.push(new Lc(n,d.selection,r.indentSize,this._type,a.insertSpace,a.ignoreEmptyLines,d.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class pDe extends EB{constructor(){super(0,{id:"editor.action.commentLine",label:m("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:ge.MenubarEditMenu,group:"5_insert",title:m({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}class _De extends EB{constructor(){super(1,{id:"editor.action.addCommentLine",label:m("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2081),weight:100}})}}class bDe extends EB{constructor(){super(2,{id:"editor.action.removeCommentLine",label:m("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2099),weight:100}})}}class vDe extends he{constructor(){super({id:"editor.action.blockComment",label:m("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:ge.MenubarEditMenu,group:"5_insert",title:m({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const n=e.get(cn);if(!t.hasModel())return;const i=t.getOption(23),o=[],r=t.getSelections();for(const a of r)o.push(new xh(a,i.insertSpace,n));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}Q(pDe);Q(_De);Q(bDe);Q(vDe);var CDe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qu=function(s,e){return function(t,n){e(t,n,s)}},JF,Cg;let Ab=(Cg=class{static get(e){return e.getContribution(JF.ID)}constructor(e,t,n,i,o,r,a,l){this._contextMenuService=t,this._contextViewService=n,this._contextKeyService=i,this._keybindingService=o,this._menuService=r,this._configurationService=a,this._workspaceContextService=l,this._toDispose=new q,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu(c=>this._onContextMenu(c))),this._toDispose.add(this._editor.onMouseWheel(c=>{if(this._contextMenuIsBeingShownCount>0){const d=this._contextViewService.getContextViewElement(),h=c.srcElement;h.shadowRoot&&Xg(d)===h.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(c=>{this._editor.getOption(24)&&c.keyCode===58&&(c.preventDefault(),c.stopPropagation(),this.showContextMenu())}))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu(e.event);if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let n=!1;for(const i of this._editor.getSelections())if(i.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24)||!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const n=[],i=this._menuService.getMenuActions(t,this._contextKeyService,{arg:e.uri});for(const o of i){const[,r]=o;let a=0;for(const l of r)if(l instanceof C_){const c=this._getMenuActions(e,l.item.submenu);c.length>0&&(n.push(new rb(l.id,l.label,c)),a++)}else n.push(l),a++;a&&n.push(new ri)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const n=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let i=t;if(!i){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const r=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),a=Sn(this._editor.getDomNode()),l=a.left+r.left,c=a.top+r.top+r.height;i={x:l,y:c}}const o=this._editor.getOption(128)&&!Ua;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:o?this._editor.getOverflowWidgetsDomNode()??this._editor.getDomNode():void 0,getAnchor:()=>i,getActions:()=>e,getActionViewItem:r=>{const a=this._keybindingFor(r);if(a)return new Cb(r,r,{label:!0,keybinding:a.getLabel(),isMenu:!0});const l=r;return typeof l.getActionViewItem=="function"?l.getActionViewItem():new Cb(r,r,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:r=>this._keybindingFor(r),onHide:r=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:n})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||vue(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(73);let n=0;const i=c=>({id:`menu-action-${++n}`,label:c.label,tooltip:"",class:void 0,enabled:typeof c.enabled>"u"?!0:c.enabled,checked:c.checked,run:c.run}),o=(c,d)=>new rb(`menu-action-${++n}`,c,d,void 0),r=(c,d,h,u,f)=>{if(!d)return i({label:c,enabled:d,run:()=>{}});const g=_=>()=>{this._configurationService.updateValue(h,_)},p=[];for(const _ of f)p.push(i({label:_.label,checked:u===_.value,run:g(_.value)}));return o(c,p)},a=[];a.push(i({label:m("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new ri),a.push(i({label:m("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(r(m("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:m("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:m("context.minimap.size.fill","Fill"),value:"fill"},{label:m("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(r(m("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:m("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:m("context.minimap.slider.always","Always"),value:"always"}]));const l=this._editor.getOption(128)&&!Ua;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:c=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}},JF=Cg,Cg.ID="editor.contrib.contextmenu",Cg);Ab=JF=CDe([qu(1,Lo),qu(2,Rd),qu(3,Ie),qu(4,wt),qu(5,nr),qu(6,Ze),qu(7,im)],Ab);class wDe extends he{constructor(){super({id:"editor.action.showContextMenu",label:m("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:1092,weight:100}})}run(e,t){var n;(n=Ab.get(t))==null||n.showContextMenu()}}dt(Ab.ID,Ab,2);Q(wDe);class KR{constructor(e){this.selections=e}equals(e){const t=this.selections.length,n=e.selections.length;if(t!==n)return!1;for(let i=0;i<t;i++)if(!this.selections[i].equalsSelection(e.selections[i]))return!1;return!0}}class GR{constructor(e,t,n){this.cursorState=e,this.scrollTop=t,this.scrollLeft=n}}const LI=class LI extends F{static get(e){return e.getContribution(LI.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(e.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const n=new KR(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(n)||(this._undoStack.push(new GR(n,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new GR(new KR(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new GR(new KR(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}};LI.ID="editor.contrib.cursorUndoRedoController";let Pb=LI;class yDe extends he{constructor(){super({id:"cursorUndo",label:m("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:2099,weight:100}})}run(e,t,n){var i;(i=Pb.get(t))==null||i.cursorUndo()}}class SDe extends he{constructor(){super({id:"cursorRedo",label:m("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,n){var i;(i=Pb.get(t))==null||i.cursorRedo()}}dt(Pb.ID,Pb,0);Q(yDe);Q(SDe);class kDe{constructor(e,t,n){this.selection=e,this.targetPosition=t,this.copy=n,this.targetSelection=null}getEditOperations(e,t){const n=e.getValueInRange(this.selection);if(this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new L(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new me(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new me(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new me(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new me(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new me(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(e,t){return this.targetSelection}}function up(s){return et?s.altKey:s.ctrlKey}const sh=class sh extends F{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._register(this._editor.onMouseUp(t=>this._onEditorMouseUp(t))),this._register(this._editor.onMouseDrag(t=>this._onEditorMouseDrag(t))),this._register(this._editor.onMouseDrop(t=>this._onEditorMouseDrop(t))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(t=>this.onEditorKeyDown(t))),this._register(this._editor.onKeyUp(t=>this.onEditorKeyUp(t))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){!this._editor.getOption(35)||this._editor.getOption(22)||(up(e)&&(this._modifierPressed=!0),this._mouseDown&&up(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){!this._editor.getOption(35)||this._editor.getOption(22)||(up(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===sh.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(this._dragSelection===null){const i=(this._editor.getSelections()||[]).filter(o=>t.position&&o.containsPosition(t.position));if(i.length===1)this._dragSelection=i[0];else return}up(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new A(e.target.position.lineNumber,e.target.position.column);if(this._dragSelection===null){let n=null;if(e.event.shiftKey){const i=this._editor.getSelection();if(i){const{selectionStartLineNumber:o,selectionStartColumn:r}=i;n=[new me(o,r,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map(i=>i.containsPosition(t)?new me(t.lineNumber,t.column,t.lineNumber,t.column):i);this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(up(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(sh.ID,new kDe(this._dragSelection,t,up(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new L(e.lineNumber,e.column,e.lineNumber,e.column),options:sh._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return e.type===6||e.type===7}_hitMargin(e){return e.type===2||e.type===3||e.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}};sh.ID="editor.contrib.dragAndDrop",sh.TRIGGER_KEY_VALUE=et?6:5,sh._DECORATION_OPTIONS=Ve.register({description:"dnd-target",className:"dnd-target"});let Wx=sh;dt(Wx.ID,Wx,2);dt(Sd.ID,Sd,0);hv(gF);oe(new class extends Zn{constructor(){super({id:TX,precondition:pB,kbOpts:{weight:100,primary:2137}})}runEditorCommand(s,e){var t;return(t=Sd.get(e))==null?void 0:t.changePasteType()}});oe(new class extends Zn{constructor(){super({id:"editor.hidePasteWidget",precondition:pB,kbOpts:{weight:100,primary:9}})}runEditorCommand(s,e){var t;(t=Sd.get(e))==null||t.clearWidgets()}});var wg;Q((wg=class extends he{constructor(){super({id:"editor.action.pasteAs",label:m("pasteAs","Paste As..."),alias:"Paste As...",precondition:I.writable,metadata:{description:"Paste as",args:[{name:"args",schema:wg.argsSchema}]}})}run(e,t,n){var o;let i=typeof(n==null?void 0:n.kind)=="string"?n.kind:void 0;return!i&&n&&(i=typeof n.id=="string"?n.id:void 0),(o=Sd.get(t))==null?void 0:o.pasteAs(i?new Jt(i):void 0)}},wg.argsSchema={type:"object",properties:{kind:{type:"string",description:m("pasteAs.kind","The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}},wg));Q(class extends he{constructor(){super({id:"editor.action.pasteAsText",label:m("pasteAsText","Paste as Text"),alias:"Paste as Text",precondition:I.writable})}run(s,e){var t;return(t=Sd.get(e))==null?void 0:t.pasteAs({providerId:dm.id})}});class LDe{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}}class s${constructor(e){this.identifier=e}}const DQ=tt("treeViewsDndService");st(DQ,LDe,1);var xDe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},rS=function(s,e){return function(t,n){e(t,n,s)}},e4;const IQ="editor.experimental.dropIntoEditor.defaultProvider",TQ="editor.changeDropType",NB=new le("dropWidgetVisible",!1,m("dropWidgetVisible","Whether the drop widget is showing"));var yg;let Ob=(yg=class extends F{static get(e){return e.getContribution(e4.ID)}constructor(e,t,n,i,o){super(),this._configService=n,this._languageFeaturesService=i,this._treeViewsDragAndDropService=o,this.treeItemsTransfer=uF.getInstance(),this._dropProgressManager=this._register(t.createInstance(Lx,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(Dx,"dropIntoEditor",e,NB,{id:TQ,label:m("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor(r=>this.onDropIntoEditor(e,r.position,r.event)))}clearWidgets(){this._postDropWidgetManager.clear()}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(e,t,n){var o;if(!n.dataTransfer||!e.hasModel())return;(o=this._currentOperation)==null||o.cancel(),e.focus(),e.setPosition(t);const i=si(async r=>{const a=new q,l=a.add(new _u(e,1,void 0,r));try{const c=await this.extractDataTransferData(n);if(c.size===0||l.token.isCancellationRequested)return;const d=e.getModel();if(!d)return;const h=this._languageFeaturesService.documentDropEditProvider.ordered(d).filter(f=>f.dropMimeTypes?f.dropMimeTypes.some(g=>c.matches(g)):!0),u=a.add(await this.getDropEdits(h,d,t,c,l));if(l.token.isCancellationRequested)return;if(u.edits.length){const f=this.getInitialActiveEditIndex(d,u.edits),g=e.getOption(36).showDropSelector==="afterDrop";await this._postDropWidgetManager.applyEditAndShowIfNeeded([L.fromPositions(t)],{activeEditIndex:f,allEdits:u.edits},g,async p=>p,r)}}finally{a.dispose(),this._currentOperation===i&&(this._currentOperation=void 0)}});this._dropProgressManager.showWhile(t,m("dropIntoEditorProgress","Running drop handlers. Click to cancel"),i,{cancel:()=>i.cancel()}),this._currentOperation=i}async getDropEdits(e,t,n,i,o){const r=new q,a=await b0(Promise.all(e.map(async c=>{try{const d=await c.provideDocumentDropEdits(t,n,i,o.token);return d&&r.add(d),d==null?void 0:d.edits.map(h=>({...h,providerId:c.id}))}catch(d){console.error(d)}})),o.token),l=ea(a??[]).flat();return{edits:DX(l),dispose:()=>r.dispose()}}getInitialActiveEditIndex(e,t){const n=this._configService.getValue(IQ,{resource:e.uri});for(const[i,o]of Object.entries(n)){const r=new Jt(o),a=t.findIndex(l=>r.value===l.providerId&&l.handledMimeType&&vX(i,[l.handledMimeType]));if(a>=0)return a}return 0}async extractDataTransferData(e){if(!e.dataTransfer)return new bX;const t=yX(e.dataTransfer);if(this.treeItemsTransfer.hasData(s$.prototype)){const n=this.treeItemsTransfer.getData(s$.prototype);if(Array.isArray(n))for(const i of n){const o=await this._treeViewsDragAndDropService.removeDragOperationTransfer(i.identifier);if(o)for(const[r,a]of o)t.replace(r,a)}}return t}},e4=yg,yg.ID="editor.contrib.dropIntoEditorController",yg);Ob=e4=xDe([rS(1,Ce),rS(2,Ze),rS(3,ue),rS(4,DQ)],Ob);dt(Ob.ID,Ob,2);hv(fF);oe(new class extends Zn{constructor(){super({id:TQ,precondition:NB,kbOpts:{weight:100,primary:2137}})}runEditorCommand(s,e,t){var n;(n=Ob.get(e))==null||n.changeDropType()}});oe(new class extends Zn{constructor(){super({id:"editor.hideDropWidget",precondition:NB,kbOpts:{weight:100,primary:9}})}runEditorCommand(s,e,t){var n;(n=Ob.get(e))==null||n.clearWidgets()}});ln.as(ca.Configuration).registerConfiguration({...D0,properties:{[IQ]:{type:"object",scope:5,description:m("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}});const es=class es{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map(t=>this._editor.getModel().getDecorationRange(t)).filter(t=>!!t);if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){const t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const n of t){const i=n.options;if(i===es._FIND_MATCH_DECORATION||i===es._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(e){let t=null,n=0;if(e)for(let i=0,o=this._decorations.length;i<o;i++){const r=this._editor.getModel().getDecorationRange(this._decorations[i]);if(e.equalsRange(r)){t=this._decorations[i],n=i+1;break}}return(this._highlightedDecorationId!==null||t!==null)&&this._editor.changeDecorations(i=>{if(this._highlightedDecorationId!==null&&(i.changeDecorationOptions(this._highlightedDecorationId,es._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),t!==null&&(this._highlightedDecorationId=t,i.changeDecorationOptions(this._highlightedDecorationId,es._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),t!==null){let o=this._editor.getModel().getDecorationRange(t);if(o.startLineNumber!==o.endLineNumber&&o.endColumn===1){const r=o.endLineNumber-1,a=this._editor.getModel().getLineMaxColumn(r);o=new L(o.startLineNumber,o.startColumn,r,a)}this._rangeHighlightDecorationId=i.addDecoration(o,es._RANGE_HIGHLIGHT_DECORATION)}}),n}set(e,t){this._editor.changeDecorations(n=>{let i=es._FIND_MATCH_DECORATION;const o=[];if(e.length>1e3){i=es._FIND_MATCH_NO_OVERVIEW_DECORATION;const a=this._editor.getModel().getLineCount(),c=this._editor.getLayoutInfo().height/a,d=Math.max(2,Math.ceil(3/c));let h=e[0].range.startLineNumber,u=e[0].range.endLineNumber;for(let f=1,g=e.length;f<g;f++){const p=e[f].range;u+d>=p.startLineNumber?p.endLineNumber>u&&(u=p.endLineNumber):(o.push({range:new L(h,1,u,1),options:es._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),h=p.startLineNumber,u=p.endLineNumber)}o.push({range:new L(h,1,u,1),options:es._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const r=new Array(e.length);for(let a=0,l=e.length;a<l;a++)r[a]={range:e[a].range,options:i};this._decorations=n.deltaDecorations(this._decorations,r),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(a=>n.removeDecoration(a)),this._findScopeDecorationIds=[]),t!=null&&t.length&&(this._findScopeDecorationIds=t.map(a=>n.addDecoration(a,es._FIND_SCOPE_DECORATION)))})}matchBeforePosition(e){if(this._decorations.length===0)return null;for(let t=this._decorations.length-1;t>=0;t--){const n=this._decorations[t],i=this._editor.getModel().getDecorationRange(n);if(!(!i||i.endLineNumber>e.lineNumber)){if(i.endLineNumber<e.lineNumber)return i;if(!(i.endColumn>e.column))return i}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(this._decorations.length===0)return null;for(let t=0,n=this._decorations.length;t<n;t++){const i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(!(!o||o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}};es._CURRENT_FIND_MATCH_DECORATION=Ve.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",inlineClassName:"currentFindMatchInline",showIfCollapsed:!0,overviewRuler:{color:pn(UN),position:Ko.Center},minimap:{color:pn(DA),position:1}}),es._FIND_MATCH_DECORATION=Ve.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",inlineClassName:"findMatchInline",showIfCollapsed:!0,overviewRuler:{color:pn(UN),position:Ko.Center},minimap:{color:pn(DA),position:1}}),es._FIND_MATCH_NO_OVERVIEW_DECORATION=Ve.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),es._FIND_MATCH_ONLY_OVERVIEW_DECORATION=Ve.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:pn(UN),position:Ko.Center}}),es._RANGE_HIGHLIGHT_DECORATION=Ve.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),es._FIND_SCOPE_DECORATION=Ve.register({description:"find-scope",className:"findScope",isWholeLine:!0});let t4=es;class DDe{constructor(e,t,n){this._editorSelection=e,this._ranges=t,this._replaceStrings=n,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const n=[];for(let r=0;r<this._ranges.length;r++)n.push({range:this._ranges[r],text:this._replaceStrings[r]});n.sort((r,a)=>L.compareRangesUsingStarts(r.range,a.range));const i=[];let o=n[0];for(let r=1;r<n.length;r++)o.range.endLineNumber===n[r].range.startLineNumber&&o.range.endColumn===n[r].range.startColumn?(o.range=o.range.plusRange(n[r].range),o.text=o.text+n[r].text):(i.push(o),o=n[r]);i.push(o);for(const r of i)t.addEditOperation(r.range,r.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}function EQ(s,e){if(s&&s[0]!==""){const t=o$(s,e,"-"),n=o$(s,e,"_");return t&&!n?r$(s,e,"-"):!t&&n?r$(s,e,"_"):s[0].toUpperCase()===s[0]?e.toUpperCase():s[0].toLowerCase()===s[0]?e.toLowerCase():kie(s[0][0])&&e.length>0?e[0].toUpperCase()+e.substr(1):s[0][0].toUpperCase()!==s[0][0]&&e.length>0?e[0].toLowerCase()+e.substr(1):e}else return e}function o$(s,e,t){return s[0].indexOf(t)!==-1&&e.indexOf(t)!==-1&&s[0].split(t).length===e.split(t).length}function r$(s,e,t){const n=e.split(t),i=s[0].split(t);let o="";return n.forEach((r,a)=>{o+=EQ([i[a]],r)+t}),o.slice(0,-1)}class a${constructor(e){this.staticValue=e,this.kind=0}}class IDe{constructor(e){this.pieces=e,this.kind=1}}class Fb{static fromStaticValue(e){return new Fb([Gf.staticValue(e)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(e){!e||e.length===0?this._state=new a$(""):e.length===1&&e[0].staticValue!==null?this._state=new a$(e[0].staticValue):this._state=new IDe(e)}buildReplaceString(e,t){if(this._state.kind===0)return t?EQ(e,this._state.staticValue):this._state.staticValue;let n="";for(let i=0,o=this._state.pieces.length;i<o;i++){const r=this._state.pieces[i];if(r.staticValue!==null){n+=r.staticValue;continue}let a=Fb._substitute(r.matchIndex,e);if(r.caseOps!==null&&r.caseOps.length>0){const l=[],c=r.caseOps.length;let d=0;for(let h=0,u=a.length;h<u;h++){if(d>=c){l.push(a.slice(h));break}switch(r.caseOps[d]){case"U":l.push(a[h].toUpperCase());break;case"u":l.push(a[h].toUpperCase()),d++;break;case"L":l.push(a[h].toLowerCase());break;case"l":l.push(a[h].toLowerCase()),d++;break;default:l.push(a[h])}}a=l.join("")}n+=a}return n}static _substitute(e,t){if(t===null)return"";if(e===0)return t[0];let n="";for(;e>0;){if(e<t.length)return(t[e]||"")+n;n=String(e%10)+n,e=Math.floor(e/10)}return"$"+n}}class Gf{static staticValue(e){return new Gf(e,-1,null)}static caseOps(e,t){return new Gf(null,e,t)}constructor(e,t,n){this.staticValue=e,this.matchIndex=t,!n||n.length===0?this.caseOps=null:this.caseOps=n.slice(0)}}class TDe{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){e.length!==0&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,n){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Gf.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=Gf.caseOps(e,n),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=Gf.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new Fb(this._result)}}function EDe(s){if(!s||s.length===0)return new Fb(null);const e=[],t=new TDe(s);for(let n=0,i=s.length;n<i;n++){const o=s.charCodeAt(n);if(o===92){if(n++,n>=i)break;const r=s.charCodeAt(n);switch(r){case 92:t.emitUnchanged(n-1),t.emitStatic("\\",n+1);break;case 110:t.emitUnchanged(n-1),t.emitStatic(`
`,n+1);break;case 116:t.emitUnchanged(n-1),t.emitStatic("	",n+1);break;case 117:case 85:case 108:case 76:t.emitUnchanged(n-1),t.emitStatic("",n+1),e.push(String.fromCharCode(r));break}continue}if(o===36){if(n++,n>=i)break;const r=s.charCodeAt(n);if(r===36){t.emitUnchanged(n-1),t.emitStatic("$",n+1);continue}if(r===48||r===38){t.emitUnchanged(n-1),t.emitMatchIndex(0,n+1,e),e.length=0;continue}if(49<=r&&r<=57){let a=r-48;if(n+1<i){const l=s.charCodeAt(n+1);if(48<=l&&l<=57){n++,a=a*10+(l-48),t.emitUnchanged(n-2),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}t.emitUnchanged(n-1),t.emitMatchIndex(a,n+1,e),e.length=0;continue}}}return t.finalize()}const Od=new le("findWidgetVisible",!1);Od.toNegated();const WE=new le("findInputFocussed",!1),RB=new le("replaceInputFocussed",!1),aS={primary:545,mac:{primary:2593}},lS={primary:565,mac:{primary:2613}},cS={primary:560,mac:{primary:2608}},dS={primary:554,mac:{primary:2602}},hS={primary:558,mac:{primary:2606}},Vt={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},Dh=19999,NDe=240;class JC{constructor(e,t){this._toDispose=new q,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new la,this._decorations=new t4(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new It(()=>{if(this._editor.hasModel())return this.research(!1)},100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(n=>{(n.reason===3||n.reason===5||n.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(n=>{this._ignoreModelContentChanged||(n.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(n=>this._onStateChanged(n))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,Mt(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)},NDe)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let n=null;typeof t<"u"?t!==null&&(Array.isArray(t)?n=t:n=[t]):n=this._decorations.getFindScopes(),n!==null&&(n=n.map(a=>{if(a.startLineNumber!==a.endLineNumber){let l=a.endLineNumber;return a.endColumn===1&&(l=l-1),new L(a.startLineNumber,1,l,this._editor.getModel().getLineMaxColumn(l))}return a}));const i=this._findMatches(n,!1,Dh);this._decorations.set(i,n);const o=this._editor.getSelection();let r=this._decorations.getCurrentMatchesPosition(o);if(r===0&&i.length>0){const a=qw(i.map(l=>l.range),l=>L.compareRangesUsingStarts(l,o)>=0);r=a>0?a-1+1:r}this._state.changeMatchInfo(r,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:n,column:i}=e;const o=this._editor.getModel();return t||i===1?(n===1?n=o.getLineCount():n--,i=o.getLineMaxColumn(n)):i--,new A(n,i)}_moveToPrevMatch(e,t=!1){if(!this._state.canNavigateBack()){const d=this._decorations.matchAfterPosition(e);d&&this._setCurrentFindMatch(d);return}if(this._decorations.getCount()<Dh){let d=this._decorations.matchBeforePosition(e);d&&d.isEmpty()&&d.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),d=this._decorations.matchBeforePosition(e)),d&&this._setCurrentFindMatch(d);return}if(this._cannotFind())return;const n=this._decorations.getFindScope(),i=JC._getSearchRange(this._editor.getModel(),n);i.getEndPosition().isBefore(e)&&(e=i.getEndPosition()),e.isBefore(i.getStartPosition())&&(e=i.getEndPosition());const{lineNumber:o,column:r}=e,a=this._editor.getModel();let l=new A(o,r),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1);if(c&&c.range.isEmpty()&&c.range.getStartPosition().equals(l)&&(l=this._prevSearchPosition(l),c=a.findPreviousMatch(this._state.searchString,l,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1)),!!c){if(!t&&!i.containsRange(c.range))return this._moveToPrevMatch(c.range.getStartPosition(),!0);this._setCurrentFindMatch(c.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:n,column:i}=e;const o=this._editor.getModel();return t||i===o.getLineMaxColumn(n)?(n===o.getLineCount()?n=1:n++,i=1):i++,new A(n,i)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n);return}if(this._decorations.getCount()<Dh){let n=this._decorations.matchAfterPosition(e);n&&n.isEmpty()&&n.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),n=this._decorations.matchAfterPosition(e)),n&&this._setCurrentFindMatch(n);return}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,n,i=!1){if(this._cannotFind())return null;const o=this._decorations.getFindScope(),r=JC._getSearchRange(this._editor.getModel(),o);r.getEndPosition().isBefore(e)&&(e=r.getStartPosition()),e.isBefore(r.getStartPosition())&&(e=r.getStartPosition());const{lineNumber:a,column:l}=e,c=this._editor.getModel();let d=new A(a,l),h=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t);return n&&h&&h.range.isEmpty()&&h.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),h=c.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t)),h?!i&&!r.containsRange(h.range)?this._getNextMatch(h.range.getEndPosition(),t,n,!0):h:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){const t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?EDe(this._state.replaceString):Fb.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),n=this._getNextMatch(t.getStartPosition(),!0,!1);if(n)if(t.equalsRange(n.range)){const i=e.buildReplaceString(n.matches,this._state.preserveCase),o=new Oi(t,i);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new A(t.startLineNumber,t.startColumn+i.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(n.range)}_findMatches(e,t,n){const i=(e||[null]).map(o=>JC._getSearchRange(this._editor.getModel(),o));return this._editor.getModel().findMatches(this._state.searchString,i,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,t,n)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();e===null&&this._state.matchesCount>=Dh?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const t=new Xu(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null).parseSearchRequest();if(!t)return;let n=t.regex;if(!n.multiline){let h="mu";n.ignoreCase&&(h+="i"),n.global&&(h+="g"),n=new RegExp(n.source,h)}const i=this._editor.getModel(),o=i.getValue(1),r=i.getFullModelRange(),a=this._getReplacePattern();let l;const c=this._state.preserveCase;a.hasReplacementPatterns||c?l=o.replace(n,function(){return a.buildReplaceString(arguments,c)}):l=o.replace(n,a.buildReplaceString(null,c));const d=new TW(r,l,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern(),n=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),i=[];for(let r=0,a=n.length;r<a;r++)i[r]=t.buildReplaceString(n[r].matches,this._state.preserveCase);const o=new DDe(this._editor.getSelection(),n.map(r=>r.range),i);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let n=this._findMatches(e,!1,1073741824).map(o=>new me(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn));const i=this._editor.getSelection();for(let o=0,r=n.length;o<r;o++)if(n[o].equalsRange(i)){n=[i].concat(n.slice(0,o)).concat(n.slice(o+1));break}this._editor.setSelections(n)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}const xI=class xI extends sr{constructor(e,t,n){super(),this._hideSoon=this._register(new It(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=n,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const i={inputActiveOptionBorder:de(VT),inputActiveOptionForeground:de(zT),inputActiveOptionBackground:de(y0)},o=this._register(vb());this.caseSensitive=this._register(new gZ({appendTitle:this._keybindingLabelFor(Vt.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,hoverDelegate:o,...i})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new mZ({appendTitle:this._keybindingLabelFor(Vt.ToggleWholeWordCommand),isChecked:this._state.wholeWord,hoverDelegate:o,...i})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new pZ({appendTitle:this._keybindingLabelFor(Vt.ToggleRegexCommand),isChecked:this._state.isRegex,hoverDelegate:o,...i})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(r=>{let a=!1;r.isRegex&&(this.regex.checked=this._state.isRegex,a=!0),r.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,a=!0),r.matchCase&&(this.caseSensitive.checked=this._state.matchCase,a=!0),!this._state.isRevealed&&a&&this._revealTemporarily()})),this._register($(this._domNode,ee.MOUSE_LEAVE,r=>this._onMouseLeave())),this._register($(this._domNode,"mouseover",r=>this._onMouseOver()))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return xI.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}};xI.ID="editor.contrib.findOptionsWidget";let n4=xI;function uS(s,e){return s===1?!0:s===2?!1:e}class RDe extends F{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return uS(this._isRegexOverride,this._isRegex)}get wholeWord(){return uS(this._wholeWordOverride,this._wholeWord)}get matchCase(){return uS(this._matchCaseOverride,this._matchCase)}get preserveCase(){return uS(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new O),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,n){const i={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;t===0&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,i.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,i.matchesCount=!0,o=!0),typeof n<"u"&&(L.equalsRange(this._currentMatch,n)||(this._currentMatch=n,i.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(i)}change(e,t,n=!0){var d;const i={moveCursor:t,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;const r=this.isRegex,a=this.wholeWord,l=this.matchCase,c=this.preserveCase;typeof e.searchString<"u"&&this._searchString!==e.searchString&&(this._searchString=e.searchString,i.searchString=!0,o=!0),typeof e.replaceString<"u"&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,i.replaceString=!0,o=!0),typeof e.isRevealed<"u"&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,i.isRevealed=!0,o=!0),typeof e.isReplaceRevealed<"u"&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,i.isReplaceRevealed=!0,o=!0),typeof e.isRegex<"u"&&(this._isRegex=e.isRegex),typeof e.wholeWord<"u"&&(this._wholeWord=e.wholeWord),typeof e.matchCase<"u"&&(this._matchCase=e.matchCase),typeof e.preserveCase<"u"&&(this._preserveCase=e.preserveCase),typeof e.searchScope<"u"&&((d=e.searchScope)!=null&&d.every(h=>{var u;return(u=this._searchScope)==null?void 0:u.some(f=>!L.equalsRange(f,h))})||(this._searchScope=e.searchScope,i.searchScope=!0,o=!0)),typeof e.loop<"u"&&this._loop!==e.loop&&(this._loop=e.loop,i.loop=!0,o=!0),typeof e.isSearching<"u"&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,i.isSearching=!0,o=!0),typeof e.filters<"u"&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,i.filters=!0,o=!0),this._isRegexOverride=typeof e.isRegexOverride<"u"?e.isRegexOverride:0,this._wholeWordOverride=typeof e.wholeWordOverride<"u"?e.wholeWordOverride:0,this._matchCaseOverride=typeof e.matchCaseOverride<"u"?e.matchCaseOverride:0,this._preserveCaseOverride=typeof e.preserveCaseOverride<"u"?e.preserveCaseOverride:0,r!==this.isRegex&&(o=!0,i.isRegex=!0),a!==this.wholeWord&&(o=!0,i.wholeWord=!0),l!==this.matchCase&&(o=!0,i.matchCase=!0),c!==this.preserveCase&&(o=!0,i.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(i)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=Dh}}const MDe=m("defaultLabel","input"),ADe=m("label.preserveCaseToggle","Preserve Case");class PDe extends av{constructor(e){super({icon:J.preserveCase,title:ADe+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Ms("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class ODe extends sr{constructor(e,t,n,i){super(),this._showOptionButtons=n,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new O),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new O),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new O),this._onInput=this._register(new O),this._onKeyUp=this._register(new O),this._onPreserveCaseKeyDown=this._register(new O),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=t,this.placeholder=i.placeholder||"",this.validation=i.validation,this.label=i.label||MDe;const o=i.appendPreserveCaseLabel||"",r=i.history||[],a=!!i.flexibleHeight,l=!!i.flexibleWidth,c=i.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new _Z(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:r,showHistoryHint:i.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:i.inputBoxStyles})),this.preserveCase=this._register(new PDe({appendTitle:o,isChecked:!1,...i.toggleStyles})),this._register(this.preserveCase.onChange(u=>{this._onDidOptionChange.fire(u),!u&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(u=>{this._onPreserveCaseKeyDown.fire(u)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const d=[this.preserveCase.domNode];this.onkeydown(this.domNode,u=>{if(u.equals(15)||u.equals(17)||u.equals(9)){const f=d.indexOf(this.domNode.ownerDocument.activeElement);if(f>=0){let g=-1;u.equals(17)?g=(f+1)%d.length:u.equals(15)&&(f===0?g=d.length-1:g=f-1),u.equals(9)?(d[f].blur(),this.inputBox.focus()):g>=0&&d[g].focus(),it.stop(u,!0)}}});const h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.preserveCase.domNode),this.domNode.appendChild(h),e==null||e.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,u=>this._onKeyDown.fire(u)),this.onkeyup(this.inputBox.inputElement,u=>this._onKeyUp.fire(u)),this.oninput(this.inputBox.inputElement,u=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,u=>this._onMouseDown.fire(u))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(e){e?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(e){this.preserveCase.checked=e}focusOnPreserve(){this.preserveCase.focus()}validate(){var e;(e=this.inputBox)==null||e.validate()}set width(e){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=e+"px"}dispose(){super.dispose()}}var NQ=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},RQ=function(s,e){return function(t,n){e(t,n,s)}};const MB=new le("suggestWidgetVisible",!1,m("suggestWidgetVisible","Whether suggestion are visible")),AB="historyNavigationWidgetFocus",MQ="historyNavigationForwardsEnabled",AQ="historyNavigationBackwardsEnabled";let cd;const fS=[];function PQ(s,e){if(fS.includes(e))throw new Error("Cannot register the same widget multiple times");fS.push(e);const t=new q,n=new le(AB,!1).bindTo(s),i=new le(MQ,!0).bindTo(s),o=new le(AQ,!0).bindTo(s),r=()=>{n.set(!0),cd=e},a=()=>{n.set(!1),cd===e&&(cd=void 0)};return CT(e.element)&&r(),t.add(e.onDidFocus(()=>r())),t.add(e.onDidBlur(()=>a())),t.add(ve(()=>{fS.splice(fS.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:i,historyNavigationBackwardsEnablement:o,dispose(){t.dispose()}}}let i4=class extends bZ{constructor(e,t,n,i){super(e,t,n);const o=this._register(i.createScoped(this.inputBox.element));this._register(PQ(o,this.inputBox))}};i4=NQ([RQ(3,Ie)],i4);let s4=class extends ODe{constructor(e,t,n,i,o=!1){super(e,t,o,n);const r=this._register(i.createScoped(this.inputBox.element));this._register(PQ(r,this.inputBox))}};s4=NQ([RQ(3,Ie)],s4);Ts.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:K.and(K.has(AB),K.equals(AQ,!0),K.not("isComposing"),MB.isEqualTo(!1)),primary:16,secondary:[528],handler:s=>{cd==null||cd.showPreviousValue()}});Ts.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:K.and(K.has(AB),K.equals(MQ,!0),K.not("isComposing"),MB.isEqualTo(!1)),primary:18,secondary:[530],handler:s=>{cd==null||cd.showNextValue()}});function l$(s){var e,t;return((e=s.lookupKeybinding("history.showPrevious"))==null?void 0:e.getElectronAccelerator())==="Up"&&((t=s.lookupKeybinding("history.showNext"))==null?void 0:t.getElectronAccelerator())==="Down"}const c$=jt("find-collapsed",J.chevronRight,m("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),d$=jt("find-expanded",J.chevronDown,m("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),FDe=jt("find-selection",J.selection,m("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),WDe=jt("find-replace",J.replace,m("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),BDe=jt("find-replace-all",J.replaceAll,m("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),HDe=jt("find-previous-match",J.arrowUp,m("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),VDe=jt("find-next-match",J.arrowDown,m("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),zDe=m("label.findDialog","Find / Replace"),$De=m("label.find","Find"),UDe=m("placeholder.find","Find"),jDe=m("label.previousMatchButton","Previous Match"),qDe=m("label.nextMatchButton","Next Match"),KDe=m("label.toggleSelectionFind","Find in Selection"),GDe=m("label.closeButton","Close"),ZDe=m("label.replace","Replace"),YDe=m("placeholder.replace","Replace"),XDe=m("label.replaceButton","Replace"),QDe=m("label.replaceAllButton","Replace All"),JDe=m("label.toggleReplaceButton","Toggle Replace"),eIe=m("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",Dh),tIe=m("label.matchesLocation","{0} of {1}"),h$=m("label.noResults","No results"),ul=419,nIe=275,iIe=nIe-54;let Kv=69;const sIe=33,u$="ctrlEnterReplaceAll.windows.donotask",f$=et?256:2048;class ZR{constructor(e){this.afterLineNumber=e,this.heightInPx=sIe,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function g$(s,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionStart>0){s.stopPropagation();return}}function m$(s,e,t){const n=!!e.match(/\n/);if(t&&n&&t.selectionEnd<t.value.length){s.stopPropagation();return}}const DI=class DI extends sr{constructor(e,t,n,i,o,r,a,l,c,d){super(),this._hoverService=d,this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=n,this._contextViewProvider=i,this._keybindingService=o,this._contextKeyService=r,this._storageService=l,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!l.getBoolean(u$,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new kr(500),this._register(ve(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(h=>this._onStateChanged(h))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(h=>{if(h.hasChanged(92)&&(this._codeEditor.getOption(92)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),h.hasChanged(146)&&this._tryUpdateWidgetWidth(),h.hasChanged(2)&&this.updateAccessibilitySupport(),h.hasChanged(41)){const u=this._codeEditor.getOption(41).loop;this._state.change({loop:u},!1);const f=this._codeEditor.getOption(41).addExtraSpaceOnTop;f&&!this._viewZone&&(this._viewZone=new ZR(0),this._showViewZone()),!f&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(async()=>{if(this._isVisible){const h=await this._controller.getGlobalBufferTerm();h&&h!==this._state.searchString&&(this._state.change({searchString:h},!1),this._findInput.select())}})),this._findInputFocused=WE.bindTo(r),this._findFocusTracker=this._register(Ka(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=RB.bindTo(r),this._replaceFocusTracker=this._register(Ka(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new ZR(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(h=>{if(h.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return DI.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(92)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=ao(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const t=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Pe)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){var t;this._matchesCount.style.minWidth=Kv+"px",this._state.matchesCount>=Dh?this._matchesCount.title=eIe:this._matchesCount.title="",(t=this._matchesCount.firstChild)==null||t.remove();let e;if(this._state.matchesCount>0){let n=String(this._state.matchesCount);this._state.matchesCount>=Dh&&(n+="+");let i=String(this._state.matchesPosition);i==="0"&&(i="?"),e=Gg(tIe,i,n)}else e=h$;this._matchesCount.appendChild(document.createTextNode(e)),Es(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),Kv=Math.max(Kv,this._matchesCount.clientWidth)}_getAriaLabel(e,t,n){if(e===h$)return n===""?m("ariaSearchNoResultEmpty","{0} found",e):m("ariaSearchNoResult","{0} found for '{1}'",e,n);if(t){const i=m("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,n,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();return o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1?`${o.getLineContent(t.startLineNumber)}, ${i}`:i}return m("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,n)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=e?e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn:!1,n=this._toggleSelectionFind.checked;this._isVisible&&(n||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const n=!this._codeEditor.getOption(92);this._toggleReplaceBtn.setEnabled(this._isVisible&&n)}_reveal(){if(this._revealTimeouts.forEach(e=>{clearTimeout(e)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const n=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=n;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&e){const n=this._codeEditor.getDomNode();if(n){const i=Sn(n),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),r=i.left+(o?o.left:0),a=o?o.top:0;if(this._viewZone&&a<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const l=_q(this._domNode).left;r>l&&(t=!1);const c=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());i.left+(c?c.left:0)>l&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach(t=>{clearTimeout(t)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const n=this._viewZone;this._viewZoneId!==void 0||!n||this._codeEditor.changeViewZones(i=>{n.heightInPx=this._getHeight(),this._viewZoneId=i.addZone(n),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+n.heightInPx)})}_showViewZone(e=!0){if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new ZR(0));const n=this._viewZone;this._codeEditor.changeViewZones(i=>{if(this._viewZoneId!==void 0){const o=this._getHeight();if(o===n.heightInPx)return;const r=o-n.heightInPx;n.heightInPx=o,i.layoutZone(this._viewZoneId),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+r);return}else{let o=this._getHeight();if(o-=this._codeEditor.getOption(84).top,o<=0)return;n.heightInPx=o,this._viewZoneId=i.addZone(n),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o)}})}_removeViewZone(){this._codeEditor.changeViewZones(e=>{this._viewZoneId!==void 0&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const n=e.width,i=e.minimap.minimapWidth;let o=!1,r=!1,a=!1;if(this._resized&&ao(this._domNode)>ul){this._domNode.style.maxWidth=`${n-28-i-15}px`,this._replaceInput.width=ao(this._findInput.domNode);return}if(ul+28+i>=n&&(r=!0),ul+28+i-Kv>=n&&(a=!0),ul+28+i-Kv>=n+50&&(o=!0),this._domNode.classList.toggle("collapsed-find-widget",o),this._domNode.classList.toggle("narrow-find-widget",a),this._domNode.classList.toggle("reduced-find-widget",r),!a&&!o&&(this._domNode.style.maxWidth=`${n-28-i-15}px`),this._findInput.layout({collapsedFindWidget:o,narrowFindWidget:a,reducedFindWidget:r}),this._resized){const l=this._findInput.inputBox.element.clientWidth;l>0&&(this._replaceInput.width=l)}else this._isReplaceVisible&&(this._replaceInput.width=ao(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===e?!1:(this._cachedHeight=e,this._domNode.style.height=`${e}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map(t=>{t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));const n=this._state.currentMatch;return t.startLineNumber!==t.endLineNumber&&!L.equalsRange(t,n)?t:null}).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){if(e.equals(f$|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return g$(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(e.equals(18))return m$(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(e){if(e.equals(f$|3))if(this._keybindingService.dispatchEvent(e,e.target)){e.preventDefault();return}else{Bi&&Oa&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(m("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(u$,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),e.preventDefault();return}if(e.equals(2)){this._findInput.focusOnCaseSensitive(),e.preventDefault();return}if(e.equals(1026)){this._findInput.focus(),e.preventDefault();return}if(e.equals(2066)){this._codeEditor.focus(),e.preventDefault();return}if(e.equals(16))return g$(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(e.equals(18))return m$(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?` (${t.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new i4(null,this._contextViewProvider,{width:iIe,label:$De,placeholder:UDe,appendCaseSensitiveLabel:this._keybindingLabelFor(Vt.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(Vt.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(Vt.ToggleRegexCommand),validation:d=>{if(d.length===0||!this._findInput.getRegex())return null;try{return new RegExp(d,"gu"),null}catch(h){return{content:h.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>l$(this._keybindingService),inputBoxStyles:CL,toggleStyles:vL},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(d=>this._onFindInputKeyDown(d))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(d=>{d.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),d.preventDefault())})),this._register(this._findInput.onRegexKeyDown(d=>{d.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),d.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(d=>{this._tryUpdateHeight()&&this._showViewZone()})),Ds&&this._register(this._findInput.onMouseDown(d=>this._onFindInputMouseDown(d))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();const n=this._register(vb());this._prevBtn=this._register(new fp({label:jDe+this._keybindingLabelFor(Vt.PreviousMatchFindAction),icon:HDe,hoverDelegate:n,onTrigger:()=>{mh(this._codeEditor.getAction(Vt.PreviousMatchFindAction)).run().then(void 0,Pe)}},this._hoverService)),this._nextBtn=this._register(new fp({label:qDe+this._keybindingLabelFor(Vt.NextMatchFindAction),icon:VDe,hoverDelegate:n,onTrigger:()=>{mh(this._codeEditor.getAction(Vt.NextMatchFindAction)).run().then(void 0,Pe)}},this._hoverService));const i=document.createElement("div");i.className="find-part",i.appendChild(this._findInput.domNode);const o=document.createElement("div");o.className="find-actions",i.appendChild(o),o.appendChild(this._matchesCount),o.appendChild(this._prevBtn.domNode),o.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new av({icon:FDe,title:KDe+this._keybindingLabelFor(Vt.ToggleSearchScopeCommand),isChecked:!1,hoverDelegate:n,inputActiveOptionBackground:de(y0),inputActiveOptionBorder:de(VT),inputActiveOptionForeground:de(zT)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let d=this._codeEditor.getSelections();d=d.map(h=>(h.endColumn===1&&h.endLineNumber>h.startLineNumber&&(h=h.setEndPosition(h.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(h.endLineNumber-1))),h.isEmpty()?null:h)).filter(h=>!!h),d.length&&this._state.change({searchScope:d},!0)}}else this._state.change({searchScope:null},!0)})),o.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new fp({label:GDe+this._keybindingLabelFor(Vt.CloseFindWidgetCommand),icon:GZ,hoverDelegate:n,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:d=>{d.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),d.preventDefault())}},this._hoverService)),this._replaceInput=this._register(new s4(null,void 0,{label:ZDe,placeholder:YDe,appendPreserveCaseLabel:this._keybindingLabelFor(Vt.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>l$(this._keybindingService),inputBoxStyles:CL,toggleStyles:vL},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(d=>this._onReplaceInputKeyDown(d))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(d=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(d=>{d.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),d.preventDefault())}));const r=this._register(vb());this._replaceBtn=this._register(new fp({label:XDe+this._keybindingLabelFor(Vt.ReplaceOneAction),icon:WDe,hoverDelegate:r,onTrigger:()=>{this._controller.replace()},onKeyDown:d=>{d.equals(1026)&&(this._closeBtn.focus(),d.preventDefault())}},this._hoverService)),this._replaceAllBtn=this._register(new fp({label:QDe+this._keybindingLabelFor(Vt.ReplaceAllAction),icon:BDe,hoverDelegate:r,onTrigger:()=>{this._controller.replaceAll()}},this._hoverService));const a=document.createElement("div");a.className="replace-part",a.appendChild(this._replaceInput.domNode);const l=document.createElement("div");l.className="replace-actions",a.appendChild(l),l.appendChild(this._replaceBtn.domNode),l.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new fp({label:JDe,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=ao(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}},this._hoverService)),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=zDe,this._domNode.role="dialog",this._domNode.style.width=`${ul}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(i),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(a),this._resizeSash=this._register(new $i(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let c=ul;this._register(this._resizeSash.onDidStart(()=>{c=ao(this._domNode)})),this._register(this._resizeSash.onDidChange(d=>{this._resized=!0;const h=c+d.startX-d.currentX;if(h<ul)return;const u=parseFloat(vT(this._domNode).maxWidth)||0;h>u||(this._domNode.style.width=`${h}px`,this._isReplaceVisible&&(this._replaceInput.width=ao(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const d=ao(this._domNode);if(d<ul)return;let h=ul;if(!this._resized||d===ul){const u=this._codeEditor.getLayoutInfo();h=u.width-28-u.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${h}px`,this._isReplaceVisible&&(this._replaceInput.width=ao(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(e!==2)}};DI.ID="editor.contrib.findWidget";let o4=DI;class fp extends sr{constructor(e,t){super(),this._opts=e;let n="button";this._opts.className&&(n=n+" "+this._opts.className),this._opts.icon&&(n=n+" "+De.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.tabIndex=0,this._domNode.className=n,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this._register(t.setupManagedHover(e.hoverDelegate??Ms("element"),this._domNode,this._opts.label)),this.onclick(this._domNode,i=>{this._opts.onTrigger(),i.preventDefault()}),this.onkeydown(this._domNode,i=>{var o,r;if(i.equals(10)||i.equals(3)){this._opts.onTrigger(),i.preventDefault();return}(r=(o=this._opts).onKeyDown)==null||r.call(o,i)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...De.asClassNameArray(c$)),this._domNode.classList.add(...De.asClassNameArray(d$))):(this._domNode.classList.remove(...De.asClassNameArray(d$)),this._domNode.classList.add(...De.asClassNameArray(c$)))}}Er((s,e)=>{const t=s.getColor(bh);t&&e.addRule(`.monaco-editor .findMatch { border: 1px ${Ha(s.type)?"dotted":"solid"} ${t}; box-sizing: border-box; }`);const n=s.getColor(Nle);n&&e.addRule(`.monaco-editor .findScope { border: 1px ${Ha(s.type)?"dashed":"solid"} ${n}; }`);const i=s.getColor(ct);i&&e.addRule(`.monaco-editor .find-widget { border: 1px solid ${i}; }`);const o=s.getColor(Tle);o&&e.addRule(`.monaco-editor .findMatchInline { color: ${o}; }`);const r=s.getColor(Ele);r&&e.addRule(`.monaco-editor .currentFindMatchInline { color: ${r}; }`)});var OQ=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},hr=function(s,e){return function(t,n){e(t,n,s)}},r4;const oIe=524288;function a4(s,e="single",t=!1){if(!s.hasModel())return null;const n=s.getSelection();if(e==="single"&&n.startLineNumber===n.endLineNumber||e==="multiple"){if(n.isEmpty()){const i=s.getConfiguredWordAtPosition(n.getStartPosition());if(i&&t===!1)return i.word}else if(s.getModel().getValueLengthInRange(n)<oIe)return s.getModel().getValueInRange(n)}return null}var Sg;let Xs=(Sg=class extends F{get editor(){return this._editor}static get(e){return e.getContribution(r4.ID)}constructor(e,t,n,i,o,r){super(),this._editor=e,this._findWidgetVisible=Od.bindTo(t),this._contextKeyService=t,this._storageService=n,this._clipboardService=i,this._notificationService=o,this._hoverService=r,this._updateHistoryDelayer=new kr(500),this._state=this._register(new RDe),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(a=>this._onStateChanged(a))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const a=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),a&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!WE.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let e=this._editor.getSelections();e=e.map(t=>(t.endColumn===1&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,this._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t)).filter(t=>!!t),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=Xo(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}async _start(e,t){if(this.disposeModel(),!this._editor.hasModel())return;const n={...t,isRevealed:!0};if(e.seedSearchStringFromSelection==="single"){const i=a4(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);i&&(this._state.isRegex?n.searchString=Xo(i):n.searchString=i)}else if(e.seedSearchStringFromSelection==="multiple"&&!e.updateSearchScope){const i=a4(this._editor,e.seedSearchStringFromSelection);i&&(n.searchString=i)}if(!n.searchString&&e.seedSearchStringFromGlobalClipboard){const i=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;i&&(n.searchString=i)}if(e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope){const i=this._editor.getSelections();i.some(o=>!o.isEmpty())&&(n.searchScope=i)}n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new JC(this._editor,this._state))}start(e,t){return this._start(e,t)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(e){return this._model?(this._model.moveToMatch(e),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){var e;return this._model?(e=this._editor.getModel())!=null&&e.isTooLargeForHeapOperation()?(this._notificationService.warn(m("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}async getGlobalBufferTerm(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}setGlobalBufferTerm(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}},r4=Sg,Sg.ID="editor.contrib.findController",Sg);Xs=r4=OQ([hr(1,Ie),hr(2,da),hr(3,Pd),hr(4,En),hr(5,oc)],Xs);let l4=class extends Xs{constructor(e,t,n,i,o,r,a,l,c){super(e,n,a,l,r,c),this._contextViewService=t,this._keybindingService=i,this._themeService=o,this._widget=null,this._findOptionsWidget=null}async _start(e,t){this._widget||this._createFindWidget();const n=this._editor.getSelection();let i=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":i=!0;break;case"never":i=!1;break;case"multiline":{i=!!n&&n.startLineNumber!==n.endLineNumber;break}}e.updateSearchScope=e.updateSearchScope||i,await super._start(e,t),this._widget&&(e.shouldFocus===2?this._widget.focusReplaceInput():e.shouldFocus===1&&this._widget.focusFindInput())}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new o4(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService,this._hoverService)),this._findOptionsWidget=this._register(new n4(this._editor,this._state,this._keybindingService))}};l4=OQ([hr(1,Rd),hr(2,Ie),hr(3,wt),hr(4,Yn),hr(5,En),hr(6,da),hr(7,Pd),hr(8,oc)],l4);const rIe=Aq(new Mq({id:Vt.StartFindAction,label:m("startFindAction","Find"),alias:"Find",precondition:K.or(I.focus,K.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:ge.MenubarEditMenu,group:"3_find",title:m({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));rIe.addImplementation(0,(s,e,t)=>{const n=Xs.get(e);return n?n.start({forceRevealReplace:!1,seedSearchStringFromSelection:e.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop}):!1});const aIe={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]};class lIe extends he{constructor(){super({id:Vt.StartFindWithArgs,label:m("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:aIe})}async run(e,t,n){const i=Xs.get(t);if(i){const o=n?{searchString:n.searchString,replaceString:n.replaceString,isReplaceRevealed:n.replaceString!==void 0,isRegex:n.isRegex,wholeWord:n.matchWholeWord,matchCase:n.isCaseSensitive,preserveCase:n.preserveCase}:{};await i.start({forceRevealReplace:!1,seedSearchStringFromSelection:i.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(n==null?void 0:n.findInSelection)||!1,loop:t.getOption(41).loop},o),i.setGlobalBufferTerm(i.getState().searchString)}}}class cIe extends he{constructor(){super({id:Vt.StartFindWithSelection,label:m("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(e,t){const n=Xs.get(t);n&&(await n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),n.setGlobalBufferTerm(n.getState().searchString))}}class FQ extends he{async run(e,t){const n=Xs.get(t);n&&!this._run(n)&&(await n.start({forceRevealReplace:!1,seedSearchStringFromSelection:n.getState().searchString.length===0&&t.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:t.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(n))}}class dIe extends FQ{constructor(){super({id:Vt.NextMatchFindAction,label:m("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:I.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:K.and(I.focus,WE),primary:3,weight:100}]})}_run(e){return e.moveToNextMatch()?(e.editor.pushUndoStop(),!0):!1}}class hIe extends FQ{constructor(){super({id:Vt.PreviousMatchFindAction,label:m("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:I.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:K.and(I.focus,WE),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class uIe extends he{constructor(){super({id:Vt.GoToMatchFindAction,label:m("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:Od}),this._highlightDecorations=[]}run(e,t,n){const i=Xs.get(t);if(!i)return;const o=i.getState().matchesCount;if(o<1){e.get(En).notify({severity:PT.Warning,message:m("findMatchAction.noResults","No matches. Try searching for something else.")});return}const r=e.get(Nr),a=new q,l=a.add(r.createInputBox());l.placeholder=m("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",o);const c=h=>{const u=parseInt(h);if(isNaN(u))return;const f=i.getState().matchesCount;if(u>0&&u<=f)return u-1;if(u<0&&u>=-f)return f+u},d=h=>{const u=c(h);if(typeof u=="number"){l.validationMessage=void 0,i.goToMatch(u);const f=i.getState().currentMatch;f&&this.addDecorations(t,f)}else l.validationMessage=m("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",i.getState().matchesCount),this.clearDecorations(t)};a.add(l.onDidChangeValue(h=>{d(h)})),a.add(l.onDidAccept(()=>{const h=c(l.value);typeof h=="number"?(i.goToMatch(h),l.hide()):l.validationMessage=m("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",i.getState().matchesCount)})),a.add(l.onDidHide(()=>{this.clearDecorations(t),a.dispose()})),l.show()}clearDecorations(e){e.changeDecorations(t=>{this._highlightDecorations=t.deltaDecorations(this._highlightDecorations,[])})}addDecorations(e,t){e.changeDecorations(n=>{this._highlightDecorations=n.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:pn(PG),position:Ko.Full}}}])})}}class WQ extends he{async run(e,t){const n=Xs.get(t);if(!n)return;const i=a4(t,"single",!1);i&&n.setSearchString(i),this._run(n)||(await n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(n))}}class fIe extends WQ{constructor(){super({id:Vt.NextSelectionMatchFindAction,label:m("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class gIe extends WQ{constructor(){super({id:Vt.PreviousSelectionMatchFindAction,label:m("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const mIe=Aq(new Mq({id:Vt.StartFindReplaceAction,label:m("startReplace","Replace"),alias:"Replace",precondition:K.or(I.focus,K.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:ge.MenubarEditMenu,group:"3_find",title:m({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));mIe.addImplementation(0,(s,e,t)=>{if(!e.hasModel()||e.getOption(92))return!1;const n=Xs.get(e);if(!n)return!1;const i=e.getSelection(),o=n.isFindInputFocused(),r=!i.isEmpty()&&i.startLineNumber===i.endLineNumber&&e.getOption(41).seedSearchStringFromSelection!=="never"&&!o,a=o||r?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:e.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:e.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:e.getOption(41).loop})});dt(Xs.ID,l4,0);Q(lIe);Q(cIe);Q(dIe);Q(hIe);Q(uIe);Q(fIe);Q(gIe);const il=Zn.bindToContribution(Xs.get);oe(new il({id:Vt.CloseFindWidgetCommand,precondition:Od,handler:s=>s.closeFindWidget(),kbOpts:{weight:105,kbExpr:K.and(I.focus,K.not("isComposing")),primary:9,secondary:[1033]}}));oe(new il({id:Vt.ToggleCaseSensitiveCommand,precondition:void 0,handler:s=>s.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:I.focus,primary:aS.primary,mac:aS.mac,win:aS.win,linux:aS.linux}}));oe(new il({id:Vt.ToggleWholeWordCommand,precondition:void 0,handler:s=>s.toggleWholeWords(),kbOpts:{weight:105,kbExpr:I.focus,primary:lS.primary,mac:lS.mac,win:lS.win,linux:lS.linux}}));oe(new il({id:Vt.ToggleRegexCommand,precondition:void 0,handler:s=>s.toggleRegex(),kbOpts:{weight:105,kbExpr:I.focus,primary:cS.primary,mac:cS.mac,win:cS.win,linux:cS.linux}}));oe(new il({id:Vt.ToggleSearchScopeCommand,precondition:void 0,handler:s=>s.toggleSearchScope(),kbOpts:{weight:105,kbExpr:I.focus,primary:dS.primary,mac:dS.mac,win:dS.win,linux:dS.linux}}));oe(new il({id:Vt.TogglePreserveCaseCommand,precondition:void 0,handler:s=>s.togglePreserveCase(),kbOpts:{weight:105,kbExpr:I.focus,primary:hS.primary,mac:hS.mac,win:hS.win,linux:hS.linux}}));oe(new il({id:Vt.ReplaceOneAction,precondition:Od,handler:s=>s.replace(),kbOpts:{weight:105,kbExpr:I.focus,primary:3094}}));oe(new il({id:Vt.ReplaceOneAction,precondition:Od,handler:s=>s.replace(),kbOpts:{weight:105,kbExpr:K.and(I.focus,RB),primary:3}}));oe(new il({id:Vt.ReplaceAllAction,precondition:Od,handler:s=>s.replaceAll(),kbOpts:{weight:105,kbExpr:I.focus,primary:2563}}));oe(new il({id:Vt.ReplaceAllAction,precondition:Od,handler:s=>s.replaceAll(),kbOpts:{weight:105,kbExpr:K.and(I.focus,RB),primary:void 0,mac:{primary:2051}}}));oe(new il({id:Vt.SelectAllMatchesAction,precondition:Od,handler:s=>s.selectAllMatches(),kbOpts:{weight:105,kbExpr:I.focus,primary:515}}));const pIe={0:" ",1:"u",2:"r"},p$=65535,xa=16777215,_$=4278190080;class YR{constructor(e){const t=Math.ceil(e/32);this._states=new Uint32Array(t)}get(e){const t=e/32|0,n=e%32;return(this._states[t]&1<<n)!==0}set(e,t){const n=e/32|0,i=e%32,o=this._states[n];t?this._states[n]=o|1<<i:this._states[n]=o&~(1<<i)}}class Wo{constructor(e,t,n){if(e.length!==t.length||e.length>p$)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=e,this._endIndexes=t,this._collapseStates=new YR(e.length),this._userDefinedStates=new YR(e.length),this._recoveredStates=new YR(e.length),this._types=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const e=[],t=(n,i)=>{const o=e[e.length-1];return this.getStartLineNumber(o)<=n&&this.getEndLineNumber(o)>=i};for(let n=0,i=this._startIndexes.length;n<i;n++){const o=this._startIndexes[n],r=this._endIndexes[n];if(o>xa||r>xa)throw new Error("startLineNumber or endLineNumber must not exceed "+xa);for(;e.length>0&&!t(o,r);)e.pop();const a=e.length>0?e[e.length-1]:-1;e.push(n),this._startIndexes[n]=o+((a&255)<<24),this._endIndexes[n]=r+((a&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&xa}getEndLineNumber(e){return this._endIndexes[e]&xa}getType(e){return this._types?this._types[e]:void 0}hasTypes(){return!!this._types}isCollapsed(e){return this._collapseStates.get(e)}setCollapsed(e,t){this._collapseStates.set(e,t)}isUserDefined(e){return this._userDefinedStates.get(e)}setUserDefined(e,t){return this._userDefinedStates.set(e,t)}isRecovered(e){return this._recoveredStates.get(e)}setRecovered(e,t){return this._recoveredStates.set(e,t)}getSource(e){return this.isUserDefined(e)?1:this.isRecovered(e)?2:0}setSource(e,t){t===1?(this.setUserDefined(e,!0),this.setRecovered(e,!1)):t===2?(this.setUserDefined(e,!1),this.setRecovered(e,!0)):(this.setUserDefined(e,!1),this.setRecovered(e,!1))}setCollapsedAllOfType(e,t){let n=!1;if(this._types)for(let i=0;i<this._types.length;i++)this._types[i]===e&&(this.setCollapsed(i,t),n=!0);return n}toRegion(e){return new _Ie(this,e)}getParentIndex(e){this.ensureParentIndices();const t=((this._startIndexes[e]&_$)>>>24)+((this._endIndexes[e]&_$)>>>16);return t===p$?-1:t}contains(e,t){return this.getStartLineNumber(e)<=t&&this.getEndLineNumber(e)>=t}findIndex(e){let t=0,n=this._startIndexes.length;if(n===0)return-1;for(;t<n;){const i=Math.floor((t+n)/2);e<this.getStartLineNumber(i)?n=i:t=i+1}return t-1}findRange(e){let t=this.findIndex(e);if(t>=0){if(this.getEndLineNumber(t)>=e)return t;for(t=this.getParentIndex(t);t!==-1;){if(this.contains(t,e))return t;t=this.getParentIndex(t)}}return-1}toString(){const e=[];for(let t=0;t<this.length;t++)e[t]=`[${pIe[this.getSource(t)]}${this.isCollapsed(t)?"+":"-"}] ${this.getStartLineNumber(t)}/${this.getEndLineNumber(t)}`;return e.join(", ")}toFoldRange(e){return{startLineNumber:this._startIndexes[e]&xa,endLineNumber:this._endIndexes[e]&xa,type:this._types?this._types[e]:void 0,isCollapsed:this.isCollapsed(e),source:this.getSource(e)}}static fromFoldRanges(e){const t=e.length,n=new Uint32Array(t),i=new Uint32Array(t);let o=[],r=!1;for(let l=0;l<t;l++){const c=e[l];n[l]=c.startLineNumber,i[l]=c.endLineNumber,o.push(c.type),c.type&&(r=!0)}r||(o=void 0);const a=new Wo(n,i,o);for(let l=0;l<t;l++)e[l].isCollapsed&&a.setCollapsed(l,!0),a.setSource(l,e[l].source);return a}static sanitizeAndMerge(e,t,n,i){n=n??Number.MAX_VALUE;const o=(_,b)=>Array.isArray(_)?v=>v<b?_[v]:void 0:v=>v<b?_.toFoldRange(v):void 0,r=o(e,e.length),a=o(t,t.length);let l=0,c=0,d=r(0),h=a(0);const u=[];let f,g=0;const p=[];for(;d||h;){let _;if(h&&(!d||d.startLineNumber>=h.startLineNumber))d&&d.startLineNumber===h.startLineNumber?(h.source===1?_=h:(_=d,_.isCollapsed=h.isCollapsed&&(d.endLineNumber===h.endLineNumber||!(i!=null&&i.startsInside(d.startLineNumber+1,d.endLineNumber+1))),_.source=0),d=r(++l)):(_=h,h.isCollapsed&&h.source===0&&(_.source=2)),h=a(++c);else{let b=c,v=h;for(;;){if(!v||v.startLineNumber>d.endLineNumber){_=d;break}if(v.source===1&&v.endLineNumber>d.endLineNumber)break;v=a(++b)}d=r(++l)}if(_){for(;f&&f.endLineNumber<_.startLineNumber;)f=u.pop();_.endLineNumber>_.startLineNumber&&_.startLineNumber>g&&_.endLineNumber<=n&&(!f||f.endLineNumber>=_.endLineNumber)&&(p.push(_),g=_.startLineNumber,f&&u.push(f),f=_)}}return p}}class _Ie{constructor(e,t){this.ranges=e,this.index=t}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(e){return e.startLineNumber<=this.startLineNumber&&e.endLineNumber>=this.endLineNumber}containsLine(e){return this.startLineNumber<=e&&e<=this.endLineNumber}}class bIe{get regions(){return this._regions}get textModel(){return this._textModel}constructor(e,t){this._updateEventEmitter=new O,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=t,this._regions=new Wo(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(e){if(!e.length)return;e=e.sort((n,i)=>n.regionIndex-i.regionIndex);const t={};this._decorationProvider.changeDecorations(n=>{let i=0,o=-1,r=-1;const a=l=>{for(;i<l;){const c=this._regions.getEndLineNumber(i),d=this._regions.isCollapsed(i);if(c<=o){const h=this.regions.getSource(i)!==0;n.changeDecorationOptions(this._editorDecorationIds[i],this._decorationProvider.getDecorationOption(d,c<=r,h))}d&&c>r&&(r=c),i++}};for(const l of e){const c=l.regionIndex,d=this._editorDecorationIds[c];if(d&&!t[d]){t[d]=!0,a(c);const h=!this._regions.isCollapsed(c);this._regions.setCollapsed(c,h),o=Math.max(o,this._regions.getEndLineNumber(c))}}a(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const t=new Array,n=i=>{for(const o of e)if(!(o.startLineNumber>i.endLineNumber||i.startLineNumber>o.endLineNumber))return!0;return!1};for(let i=0;i<this._regions.length;i++){const o=this._regions.toFoldRange(i);(o.source===0||!n(o))&&t.push(o)}this.updatePost(Wo.fromFoldRanges(t))}update(e,t){const n=this._currentFoldedOrManualRanges(t),i=Wo.sanitizeAndMerge(e,n,this._textModel.getLineCount(),t);this.updatePost(Wo.fromFoldRanges(i))}updatePost(e){const t=[];let n=-1;for(let i=0,o=e.length;i<o;i++){const r=e.getStartLineNumber(i),a=e.getEndLineNumber(i),l=e.isCollapsed(i),c=e.getSource(i)!==0,d={startLineNumber:r,startColumn:this._textModel.getLineMaxColumn(r),endLineNumber:a,endColumn:this._textModel.getLineMaxColumn(a)+1};t.push({range:d,options:this._decorationProvider.getDecorationOption(l,a<=n,c)}),l&&a>n&&(n=a)}this._decorationProvider.changeDecorations(i=>this._editorDecorationIds=i.deltaDecorations(this._editorDecorationIds,t)),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e){const t=[];for(let n=0,i=this._regions.length;n<i;n++){let o=this.regions.isCollapsed(n);const r=this.regions.getSource(n);if(o||r!==0){const a=this._regions.toFoldRange(n),l=this._textModel.getDecorationRange(this._editorDecorationIds[n]);l&&(o&&(e!=null&&e.startsInside(l.startLineNumber+1,l.endLineNumber))&&(o=!1),t.push({startLineNumber:l.startLineNumber,endLineNumber:l.endLineNumber,type:a.type,isCollapsed:o,source:r}))}}return t}getMemento(){const e=this._currentFoldedOrManualRanges(),t=[],n=this._textModel.getLineCount();for(let i=0,o=e.length;i<o;i++){const r=e[i];if(r.startLineNumber>=r.endLineNumber||r.startLineNumber<1||r.endLineNumber>n)continue;const a=this._getLinesChecksum(r.startLineNumber+1,r.endLineNumber);t.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,isCollapsed:r.isCollapsed,source:r.source,checksum:a})}return t.length>0?t:void 0}applyMemento(e){if(!Array.isArray(e))return;const t=[],n=this._textModel.getLineCount();for(const o of e){if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>n)continue;const r=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);(!o.checksum||r===o.checksum)&&t.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,type:void 0,isCollapsed:o.isCollapsed??!0,source:o.source??0})}const i=Wo.sanitizeAndMerge(this._regions,t,n);this.updatePost(Wo.fromFoldRanges(i))}_getLinesChecksum(e,t){return pT(this._textModel.getLineContent(e)+this._textModel.getLineContent(t))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,t){const n=[];if(this._regions){let i=this._regions.findRange(e),o=1;for(;i>=0;){const r=this._regions.toRegion(i);(!t||t(r,o))&&n.push(r),o++,i=r.parentIndex}}return n}getRegionAtLine(e){if(this._regions){const t=this._regions.findRange(e);if(t>=0)return this._regions.toRegion(t)}return null}getRegionsInside(e,t){const n=[],i=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(t&&t.length===2){const r=[];for(let a=i,l=this._regions.length;a<l;a++){const c=this._regions.toRegion(a);if(this._regions.getStartLineNumber(a)<o){for(;r.length>0&&!c.containedBy(r[r.length-1]);)r.pop();r.push(c),t(c,r.length)&&n.push(c)}else break}}else for(let r=i,a=this._regions.length;r<a;r++){const l=this._regions.toRegion(r);if(this._regions.getStartLineNumber(r)<o)(!t||t(l))&&n.push(l);else break}return n}}function PB(s,e,t){const n=[];for(const i of t){const o=s.getRegionAtLine(i);if(o){const r=!o.isCollapsed;if(n.push(o),e>1){const a=s.getRegionsInside(o,(l,c)=>l.isCollapsed!==r&&c<e);n.push(...a)}}}s.toggleCollapseState(n)}function _v(s,e,t=Number.MAX_VALUE,n){const i=[];if(n&&n.length>0)for(const o of n){const r=s.getRegionAtLine(o);if(r&&(r.isCollapsed!==e&&i.push(r),t>1)){const a=s.getRegionsInside(r,(l,c)=>l.isCollapsed!==e&&c<t);i.push(...a)}}else{const o=s.getRegionsInside(null,(r,a)=>r.isCollapsed!==e&&a<t);i.push(...o)}s.toggleCollapseState(i)}function BQ(s,e,t,n){const i=[];for(const o of n){const r=s.getAllRegionsAtLine(o,(a,l)=>a.isCollapsed!==e&&l<=t);i.push(...r)}s.toggleCollapseState(i)}function vIe(s,e,t){const n=[];for(const i of t){const o=s.getAllRegionsAtLine(i,r=>r.isCollapsed!==e);o.length>0&&n.push(o[0])}s.toggleCollapseState(n)}function CIe(s,e,t,n){const i=(r,a)=>a===e&&r.isCollapsed!==t&&!n.some(l=>r.containsLine(l)),o=s.getRegionsInside(null,i);s.toggleCollapseState(o)}function HQ(s,e,t){const n=[];for(const r of t){const a=s.getAllRegionsAtLine(r,void 0);a.length>0&&n.push(a[0])}const i=r=>n.every(a=>!a.containedBy(r)&&!r.containedBy(a))&&r.isCollapsed!==e,o=s.getRegionsInside(null,i);s.toggleCollapseState(o)}function OB(s,e,t){const n=s.textModel,i=s.regions,o=[];for(let r=i.length-1;r>=0;r--)if(t!==i.isCollapsed(r)){const a=i.getStartLineNumber(r);e.test(n.getLineContent(a))&&o.push(i.toRegion(r))}s.toggleCollapseState(o)}function FB(s,e,t){const n=s.regions,i=[];for(let o=n.length-1;o>=0;o--)t!==n.isCollapsed(o)&&e===n.getType(o)&&i.push(n.toRegion(o));s.toggleCollapseState(i)}function wIe(s,e){let t=null;const n=e.getRegionAtLine(s);if(n!==null&&(t=n.startLineNumber,s===t)){const i=n.parentIndex;i!==-1?t=e.regions.getStartLineNumber(i):t=null}return t}function yIe(s,e){let t=e.getRegionAtLine(s);if(t!==null&&t.startLineNumber===s){if(s!==t.startLineNumber)return t.startLineNumber;{const n=t.parentIndex;let i=0;for(n!==-1&&(i=e.regions.getStartLineNumber(t.parentIndex));t!==null;)if(t.regionIndex>0){if(t=e.regions.toRegion(t.regionIndex-1),t.startLineNumber<=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}}else if(e.regions.length>0)for(t=e.regions.toRegion(e.regions.length-1);t!==null;){if(t.startLineNumber<s)return t.startLineNumber;t.regionIndex>0?t=e.regions.toRegion(t.regionIndex-1):t=null}return null}function SIe(s,e){let t=e.getRegionAtLine(s);if(t!==null&&t.startLineNumber===s){const n=t.parentIndex;let i=0;if(n!==-1)i=e.regions.getEndLineNumber(t.parentIndex);else{if(e.regions.length===0)return null;i=e.regions.getEndLineNumber(e.regions.length-1)}for(;t!==null;)if(t.regionIndex<e.regions.length){if(t=e.regions.toRegion(t.regionIndex+1),t.startLineNumber>=i)return null;if(t.parentIndex===n)return t.startLineNumber}else return null}else if(e.regions.length>0)for(t=e.regions.toRegion(0);t!==null;){if(t.startLineNumber>s)return t.startLineNumber;t.regionIndex<e.regions.length?t=e.regions.toRegion(t.regionIndex+1):t=null}return null}class kIe{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(e){this._updateEventEmitter=new O,this._hasLineChanges=!1,this._foldingModel=e,this._foldingModelListener=e.onDidChange(t=>this.updateHiddenRanges()),this._hiddenRanges=[],e.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(e){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=e.changes.some(t=>t.range.endLineNumber!==t.range.startLineNumber||du(t.text)[0]!==0))}updateHiddenRanges(){let e=!1;const t=[];let n=0,i=0,o=Number.MAX_VALUE,r=-1;const a=this._foldingModel.regions;for(;n<a.length;n++){if(!a.isCollapsed(n))continue;const l=a.getStartLineNumber(n)+1,c=a.getEndLineNumber(n);o<=l&&c<=r||(!e&&i<this._hiddenRanges.length&&this._hiddenRanges[i].startLineNumber===l&&this._hiddenRanges[i].endLineNumber===c?(t.push(this._hiddenRanges[i]),i++):(e=!0,t.push(new L(l,1,c,1))),o=l,r=c)}(this._hasLineChanges||e||i<this._hiddenRanges.length)&&this.applyHiddenRanges(t)}applyHiddenRanges(e){this._hiddenRanges=e,this._hasLineChanges=!1,this._updateEventEmitter.fire(e)}hasRanges(){return this._hiddenRanges.length>0}isHidden(e){return b$(this._hiddenRanges,e)!==null}adjustSelections(e){let t=!1;const n=this._foldingModel.textModel;let i=null;const o=r=>((!i||!LIe(r,i))&&(i=b$(this._hiddenRanges,r)),i?i.startLineNumber-1:null);for(let r=0,a=e.length;r<a;r++){let l=e[r];const c=o(l.startLineNumber);c&&(l=l.setStartPosition(c,n.getLineMaxColumn(c)),t=!0);const d=o(l.endLineNumber);d&&(l=l.setEndPosition(d,n.getLineMaxColumn(d)),t=!0),e[r]=l}return t}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}function LIe(s,e){return s>=e.startLineNumber&&s<=e.endLineNumber}function b$(s,e){const t=qw(s,n=>e<n.startLineNumber)-1;return t>=0&&s[t].endLineNumber>=e?s[t]:null}const xIe=5e3,DIe="indent";class WB{constructor(e,t,n){this.editorModel=e,this.languageConfigurationService=t,this.foldingRangesLimit=n,this.id=DIe}dispose(){}compute(e){const t=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,n=t&&!!t.offSide,i=t&&t.markers;return Promise.resolve(EIe(this.editorModel,n,i,this.foldingRangesLimit))}}let IIe=class{constructor(e){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=e}insertFirst(e,t,n){if(e>xa||t>xa)return;const i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=t,this._length++,n<1e3&&(this._indentOccurrences[n]=(this._indentOccurrences[n]||0)+1)}toIndentRanges(e){const t=this._foldingRangesLimit.limit;if(this._length<=t){this._foldingRangesLimit.update(this._length,!1);const n=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let o=this._length-1,r=0;o>=0;o--,r++)n[r]=this._startIndexes[o],i[r]=this._endIndexes[o];return new Wo(n,i)}else{this._foldingRangesLimit.update(this._length,t);let n=0,i=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const c=this._indentOccurrences[l];if(c){if(c+n>t){i=l;break}n+=c}}const o=e.getOptions().tabSize,r=new Uint32Array(t),a=new Uint32Array(t);for(let l=this._length-1,c=0;l>=0;l--){const d=this._startIndexes[l],h=e.getLineContent(d),u=oE(h,o);(u<i||u===i&&n++<t)&&(r[c]=d,a[c]=this._endIndexes[l],c++)}return new Wo(r,a)}}};const TIe={limit:xIe,update:()=>{}};function EIe(s,e,t,n=TIe){const i=s.getOptions().tabSize,o=new IIe(n);let r;t&&(r=new RegExp(`(${t.start.source})|(?:${t.end.source})`));const a=[],l=s.getLineCount()+1;a.push({indent:-1,endAbove:l,line:l});for(let c=s.getLineCount();c>0;c--){const d=s.getLineContent(c),h=oE(d,i);let u=a[a.length-1];if(h===-1){e&&(u.endAbove=c);continue}let f;if(r&&(f=d.match(r)))if(f[1]){let g=a.length-1;for(;g>0&&a[g].indent!==-2;)g--;if(g>0){a.length=g+1,u=a[g],o.insertFirst(c,u.line,h),u.line=c,u.indent=h,u.endAbove=c;continue}}else{a.push({indent:-2,endAbove:c,line:c});continue}if(u.indent>h){do a.pop(),u=a[a.length-1];while(u.indent>h);const g=u.endAbove-1;g-c>=1&&o.insertFirst(c,g,h)}u.indent===h?u.endAbove=c:a.push({indent:h,endAbove:c,line:c})}return o.toIndentRanges(s)}const NIe=T("editor.foldBackground",{light:qe(_h,.3),dark:qe(_h,.3),hcDark:null,hcLight:null},m("foldBackgroundBackground","Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.foldPlaceholderForeground",{light:"#808080",dark:"#808080",hcDark:null,hcLight:null},m("collapsedTextColor","Color of the collapsed text after the first line of a folded range."));T("editorGutter.foldingControlForeground",iL,m("editorGutter.foldingControlForeground","Color of the folding control in the editor gutter."));const Bx=jt("folding-expanded",J.chevronDown,m("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),Hx=jt("folding-collapsed",J.chevronRight,m("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),v$=jt("folding-manual-collapsed",Hx,m("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),C$=jt("folding-manual-expanded",Bx,m("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin.")),XR={color:pn(NIe),position:1},gp=m("linesCollapsed","Click to expand the range."),gS=m("linesExpanded","Click to collapse the range."),Hn=class Hn{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,t,n){return t?Hn.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?e?this.showFoldingHighlights?Hn.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:Hn.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:Hn.NO_CONTROLS_EXPANDED_RANGE_DECORATION:e?n?this.showFoldingHighlights?Hn.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:Hn.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?Hn.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:Hn.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?n?Hn.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:Hn.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:n?Hn.MANUALLY_EXPANDED_VISUAL_DECORATION:Hn.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}};Hn.COLLAPSED_VISUAL_DECORATION=Ve.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:gp,firstLineDecorationClassName:De.asClassName(Hx)}),Hn.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Ve.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:XR,isWholeLine:!0,linesDecorationsTooltip:gp,firstLineDecorationClassName:De.asClassName(Hx)}),Hn.MANUALLY_COLLAPSED_VISUAL_DECORATION=Ve.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:gp,firstLineDecorationClassName:De.asClassName(v$)}),Hn.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=Ve.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:XR,isWholeLine:!0,linesDecorationsTooltip:gp,firstLineDecorationClassName:De.asClassName(v$)}),Hn.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=Ve.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:gp}),Hn.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=Ve.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:XR,isWholeLine:!0,linesDecorationsTooltip:gp}),Hn.EXPANDED_VISUAL_DECORATION=Ve.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+De.asClassName(Bx),linesDecorationsTooltip:gS}),Hn.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Ve.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:De.asClassName(Bx),linesDecorationsTooltip:gS}),Hn.MANUALLY_EXPANDED_VISUAL_DECORATION=Ve.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+De.asClassName(C$),linesDecorationsTooltip:gS}),Hn.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=Ve.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:De.asClassName(C$),linesDecorationsTooltip:gS}),Hn.NO_CONTROLS_EXPANDED_RANGE_DECORATION=Ve.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0}),Hn.HIDDEN_RANGE_DECORATION=Ve.register({description:"folding-hidden-range-decoration",stickiness:1});let c4=Hn;const RIe={},MIe="syntax";class BB{constructor(e,t,n,i,o){this.editorModel=e,this.providers=t,this.handleFoldingRangesChange=n,this.foldingRangesLimit=i,this.fallbackRangeProvider=o,this.id=MIe,this.disposables=new q,o&&this.disposables.add(o);for(const r of t)typeof r.onDidChange=="function"&&this.disposables.add(r.onDidChange(n))}compute(e){return AIe(this.providers,this.editorModel,e).then(t=>{var n;return t?OIe(t,this.foldingRangesLimit):((n=this.fallbackRangeProvider)==null?void 0:n.compute(e))??null})}dispose(){this.disposables.dispose()}}function AIe(s,e,t){let n=null;const i=s.map((o,r)=>Promise.resolve(o.provideFoldingRanges(e,RIe,t)).then(a=>{if(!t.isCancellationRequested&&Array.isArray(a)){Array.isArray(n)||(n=[]);const l=e.getLineCount();for(const c of a)c.start>0&&c.end>c.start&&c.end<=l&&n.push({start:c.start,end:c.end,rank:r,kind:c.kind})}},kn));return Promise.all(i).then(o=>n)}class PIe{constructor(e){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=e}add(e,t,n,i){if(e>xa||t>xa)return;const o=this._length;this._startIndexes[o]=e,this._endIndexes[o]=t,this._nestingLevels[o]=i,this._types[o]=n,this._length++,i<30&&(this._nestingLevelCounts[i]=(this._nestingLevelCounts[i]||0)+1)}toIndentRanges(){const e=this._foldingRangesLimit.limit;if(this._length<=e){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let i=0;i<this._length;i++)t[i]=this._startIndexes[i],n[i]=this._endIndexes[i];return new Wo(t,n,this._types)}else{this._foldingRangesLimit.update(this._length,e);let t=0,n=this._nestingLevelCounts.length;for(let a=0;a<this._nestingLevelCounts.length;a++){const l=this._nestingLevelCounts[a];if(l){if(l+t>e){n=a;break}t+=l}}const i=new Uint32Array(e),o=new Uint32Array(e),r=[];for(let a=0,l=0;a<this._length;a++){const c=this._nestingLevels[a];(c<n||c===n&&t++<e)&&(i[l]=this._startIndexes[a],o[l]=this._endIndexes[a],r[l]=this._types[a],l++)}return new Wo(i,o,r)}}}function OIe(s,e){const t=s.sort((r,a)=>{let l=r.start-a.start;return l===0&&(l=r.rank-a.rank),l}),n=new PIe(e);let i;const o=[];for(const r of t)if(!i)i=r,n.add(r.start,r.end,r.kind&&r.kind.value,o.length);else if(r.start>i.start)if(r.end<=i.end)o.push(i),i=r,n.add(r.start,r.end,r.kind&&r.kind.value,o.length);else{if(r.start>i.end){do i=o.pop();while(i&&r.start>i.end);i&&o.push(i),i=r}n.add(r.start,r.end,r.kind&&r.kind.value,o.length)}return n.toIndentRanges()}var FIe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Gv=function(s,e){return function(t,n){e(t,n,s)}},of;const Vi=new le("foldingEnabled",!1);var kg;let Cu=(kg=class extends F{static get(e){return e.getContribution(of.ID)}static getFoldingRangeProviders(e,t){var i;const n=e.foldingRangeProvider.ordered(t);return((i=of._foldingRangeSelector)==null?void 0:i.call(of,n,t))??n}constructor(e,t,n,i,o,r){super(),this.contextKeyService=t,this.languageConfigurationService=n,this.languageFeaturesService=r,this.localToDispose=this._register(new q),this.editor=e,this._foldingLimitReporter=new VQ(e);const a=this.editor.getOptions();this._isEnabled=a.get(43),this._useFoldingProviders=a.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=a.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=a.get(46),this.updateDebounceInfo=o.for(r.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new c4(e),this.foldingDecorationProvider.showFoldingControls=a.get(111),this.foldingDecorationProvider.showFoldingHighlights=a.get(45),this.foldingEnabled=Vi.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(l=>{if(l.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),l.hasChanged(47)&&this.onModelChanged(),l.hasChanged(111)||l.hasChanged(45)){const c=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=c.get(111),this.foldingDecorationProvider.showFoldingHighlights=c.get(45),this.triggerFoldingModelChanged()}l.hasChanged(44)&&(this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged()),l.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),l.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))})),this.onModelChanged()}saveViewState(){const e=this.editor.getModel();if(!e||!this._isEnabled||e.isTooLargeForTokenization())return{};if(this.foldingModel){const t=this.foldingModel.getMemento(),n=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:t,lineCount:e.getLineCount(),provider:n,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(e){const t=this.editor.getModel();if(!(!t||!this._isEnabled||t.isTooLargeForTokenization()||!this.hiddenRangeModel)&&e&&(this._currentModelHasFoldedImports=!!e.foldedImports,e.collapsedRegions&&e.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(e.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const e=this.editor.getModel();!this._isEnabled||!e||e.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new bIe(e,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new kIe(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(t=>this.onHiddenRangesChanges(t))),this.updateScheduler=new kr(this.updateDebounceInfo.get(e)),this.cursorChangedScheduler=new It(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(t=>this.onDidChangeModelContent(t))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(t=>this.onEditorMouseDown(t))),this.localToDispose.add(this.editor.onMouseUp(t=>this.onEditorMouseUp(t))),this.localToDispose.add({dispose:()=>{var t,n;this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),(t=this.updateScheduler)==null||t.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,(n=this.rangeProvider)==null||n.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){var e;(e=this.rangeProvider)==null||e.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(e){if(this.rangeProvider)return this.rangeProvider;const t=new WB(e,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=t,this._useFoldingProviders&&this.foldingModel){const n=of.getFoldingRangeProviders(this.languageFeaturesService,e);n.length>0&&(this.rangeProvider=new BB(e,n,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,t))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(e){var t;(t=this.hiddenRangeModel)==null||t.notifyChangeModelContent(e),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const e=this.foldingModel;if(!e)return null;const t=new pi,n=this.getRangeProvider(e.textModel),i=this.foldingRegionPromise=si(o=>n.compute(o));return i.then(o=>{if(o&&i===this.foldingRegionPromise){let r;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const c=o.setCollapsedAllOfType(su.Imports.value,!0);c&&(r=Qa.capture(this.editor),this._currentModelHasFoldedImports=c)}const a=this.editor.getSelections();e.update(o,WIe(a)),r==null||r.restore(this.editor);const l=this.updateDebounceInfo.update(e.textModel,t.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=l)}return e})}).then(void 0,e=>(Pe(e),null)))}onHiddenRangesChanges(e){if(this.hiddenRangeModel&&e.length&&!this._restoringViewState){const t=this.editor.getSelections();t&&this.hiddenRangeModel.adjustSelections(t)&&this.editor.setSelections(t)}this.editor.setHiddenAreas(e,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const e=this.getFoldingModel();e&&e.then(t=>{if(t){const n=this.editor.getSelections();if(n&&n.length>0){const i=[];for(const o of n){const r=o.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(r)&&i.push(...t.getAllRegionsAtLine(r,a=>a.isCollapsed&&r>a.startLineNumber))}i.length&&(t.toggleCollapseState(i),this.reveal(n[0].getPosition()))}}}).then(void 0,Pe)}onEditorMouseDown(e){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!e.target||!e.target.range||!e.event.leftButton&&!e.event.middleButton)return;const t=e.target.range;let n=!1;switch(e.target.type){case 4:{const i=e.target.detail,o=e.target.element.offsetLeft;if(i.offsetX-o<4)return;n=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!e.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const i=this.editor.getModel();if(i&&t.startColumn===i.getLineMaxColumn(t.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:t.startLineNumber,iconClicked:n}}onEditorMouseUp(e){const t=this.foldingModel;if(!t||!this.mouseDownInfo||!e.target)return;const n=this.mouseDownInfo.lineNumber,i=this.mouseDownInfo.iconClicked,o=e.target.range;if(!o||o.startLineNumber!==n)return;if(i){if(e.target.type!==4)return}else{const a=this.editor.getModel();if(!a||o.startColumn!==a.getLineMaxColumn(n))return}const r=t.getRegionAtLine(n);if(r&&r.startLineNumber===n){const a=r.isCollapsed;if(i||a){const l=e.event.altKey;let c=[];if(l){const d=u=>!u.containedBy(r)&&!r.containedBy(u),h=t.getRegionsInside(null,d);for(const u of h)u.isCollapsed&&c.push(u);c.length===0&&(c=h)}else{const d=e.event.middleButton||e.event.shiftKey;if(d)for(const h of t.getRegionsInside(r))h.isCollapsed===a&&c.push(h);(a||!d||c.length===0)&&c.push(r)}t.toggleCollapseState(c),this.reveal({lineNumber:n,column:1})}}}reveal(e){this.editor.revealPositionInCenterIfOutsideViewport(e,0)}},of=kg,kg.ID="editor.contrib.folding",kg);Cu=of=FIe([Gv(1,Ie),Gv(2,cn),Gv(3,En),Gv(4,ir),Gv(5,ue)],Cu);class VQ{constructor(e){this.editor=e,this._onDidChange=new O,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(e,t){(e!==this._computed||t!==this._limited)&&(this._computed=e,this._limited=t,this._onDidChange.fire())}}class Xi extends he{runEditorCommand(e,t,n){const i=e.get(cn),o=Cu.get(t);if(!o)return;const r=o.getFoldingModel();if(r)return this.reportTelemetry(e,t),r.then(a=>{if(a){this.invoke(o,a,t,n,i);const l=t.getSelection();l&&o.reveal(l.getStartPosition())}})}getSelectedLines(e){const t=e.getSelections();return t?t.map(n=>n.startLineNumber):[]}getLineNumbers(e,t){return e&&e.selectionLines?e.selectionLines.map(n=>n+1):this.getSelectedLines(t)}run(e,t){}}function WIe(s){return!s||s.length===0?{startsInside:()=>!1}:{startsInside(e,t){for(const n of s){const i=n.startLineNumber;if(i>=e&&i<=t)return!0}return!1}}}function zQ(s){if(!ls(s)){if(!fi(s))return!1;const e=s;if(!ls(e.levels)&&!tu(e.levels)||!ls(e.direction)&&!qs(e.direction)||!ls(e.selectionLines)&&(!Array.isArray(e.selectionLines)||!e.selectionLines.every(tu)))return!1}return!0}class BIe extends Xi{constructor(){super({id:"editor.unfold",label:m("unfoldAction.label","Unfold"),alias:"Unfold",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:zQ,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){const o=i&&i.levels||1,r=this.getLineNumbers(i,n);i&&i.direction==="up"?BQ(t,!1,o,r):_v(t,!1,o,r)}}class HIe extends Xi{constructor(){super({id:"editor.unfoldRecursively",label:m("unFoldRecursivelyAction.label","Unfold Recursively"),alias:"Unfold Recursively",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2142),weight:100}})}invoke(e,t,n,i){_v(t,!1,Number.MAX_VALUE,this.getSelectedLines(n))}}class VIe extends Xi{constructor(){super({id:"editor.fold",label:m("foldAction.label","Fold"),alias:"Fold",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:zQ,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(e,t,n,i){const o=this.getLineNumbers(i,n),r=i&&i.levels,a=i&&i.direction;typeof r!="number"&&typeof a!="string"?vIe(t,!0,o):a==="up"?BQ(t,!0,r||1,o):_v(t,!0,r||1,o)}}class zIe extends Xi{constructor(){super({id:"editor.toggleFold",label:m("toggleFoldAction.label","Toggle Fold"),alias:"Toggle Fold",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2090),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);PB(t,1,i)}}class $Ie extends Xi{constructor(){super({id:"editor.foldRecursively",label:m("foldRecursivelyAction.label","Fold Recursively"),alias:"Fold Recursively",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2140),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);_v(t,!0,Number.MAX_VALUE,i)}}class UIe extends Xi{constructor(){super({id:"editor.toggleFoldRecursively",label:m("toggleFoldRecursivelyAction.label","Toggle Fold Recursively"),alias:"Toggle Fold Recursively",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,3114),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);PB(t,Number.MAX_VALUE,i)}}class jIe extends Xi{constructor(){super({id:"editor.foldAllBlockComments",label:m("foldAllBlockComments.label","Fold All Block Comments"),alias:"Fold All Block Comments",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2138),weight:100}})}invoke(e,t,n,i,o){if(t.regions.hasTypes())FB(t,su.Comment.value,!0);else{const r=n.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).comments;if(a&&a.blockCommentStartToken){const l=new RegExp("^\\s*"+Xo(a.blockCommentStartToken));OB(t,l,!0)}}}}class qIe extends Xi{constructor(){super({id:"editor.foldAllMarkerRegions",label:m("foldAllMarkerRegions.label","Fold All Regions"),alias:"Fold All Regions",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2077),weight:100}})}invoke(e,t,n,i,o){if(t.regions.hasTypes())FB(t,su.Region.value,!0);else{const r=n.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);OB(t,l,!0)}}}}class KIe extends Xi{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:m("unfoldAllMarkerRegions.label","Unfold All Regions"),alias:"Unfold All Regions",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2078),weight:100}})}invoke(e,t,n,i,o){if(t.regions.hasTypes())FB(t,su.Region.value,!1);else{const r=n.getModel();if(!r)return;const a=o.getLanguageConfiguration(r.getLanguageId()).foldingRules;if(a&&a.markers&&a.markers.start){const l=new RegExp(a.markers.start);OB(t,l,!1)}}}}class GIe extends Xi{constructor(){super({id:"editor.foldAllExcept",label:m("foldAllExcept.label","Fold All Except Selected"),alias:"Fold All Except Selected",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2136),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);HQ(t,!0,i)}}class ZIe extends Xi{constructor(){super({id:"editor.unfoldAllExcept",label:m("unfoldAllExcept.label","Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2134),weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);HQ(t,!1,i)}}class YIe extends Xi{constructor(){super({id:"editor.foldAll",label:m("foldAllAction.label","Fold All"),alias:"Fold All",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2069),weight:100}})}invoke(e,t,n){_v(t,!0)}}class XIe extends Xi{constructor(){super({id:"editor.unfoldAll",label:m("unfoldAllAction.label","Unfold All"),alias:"Unfold All",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2088),weight:100}})}invoke(e,t,n){_v(t,!1)}}const h_=class h_ extends Xi{getFoldingLevel(){return parseInt(this.id.substr(h_.ID_PREFIX.length))}invoke(e,t,n){CIe(t,this.getFoldingLevel(),!0,this.getSelectedLines(n))}};h_.ID_PREFIX="editor.foldLevel",h_.ID=e=>h_.ID_PREFIX+e;let Vx=h_;class QIe extends Xi{constructor(){super({id:"editor.gotoParentFold",label:m("gotoParentFold.label","Go to Parent Fold"),alias:"Go to Parent Fold",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const o=wIe(i[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class JIe extends Xi{constructor(){super({id:"editor.gotoPreviousFold",label:m("gotoPreviousFold.label","Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const o=yIe(i[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class eTe extends Xi{constructor(){super({id:"editor.gotoNextFold",label:m("gotoNextFold.label","Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,weight:100}})}invoke(e,t,n){const i=this.getSelectedLines(n);if(i.length>0){const o=SIe(i[0],t);o!==null&&n.setSelection({startLineNumber:o,startColumn:1,endLineNumber:o,endColumn:1})}}}class tTe extends Xi{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:m("createManualFoldRange.label","Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2135),weight:100}})}invoke(e,t,n){var r;const i=[],o=n.getSelections();if(o){for(const a of o){let l=a.endLineNumber;a.endColumn===1&&--l,l>a.startLineNumber&&(i.push({startLineNumber:a.startLineNumber,endLineNumber:l,type:void 0,isCollapsed:!0,source:1}),n.setSelection({startLineNumber:a.startLineNumber,startColumn:1,endLineNumber:a.startLineNumber,endColumn:1}))}if(i.length>0){i.sort((l,c)=>l.startLineNumber-c.startLineNumber);const a=Wo.sanitizeAndMerge(t.regions,i,(r=n.getModel())==null?void 0:r.getLineCount());t.updatePost(Wo.fromFoldRanges(a))}}}}class nTe extends Xi{constructor(){super({id:"editor.removeManualFoldingRanges",label:m("removeManualFoldingRanges.label","Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2137),weight:100}})}invoke(e,t,n){const i=n.getSelections();if(i){const o=[];for(const r of i){const{startLineNumber:a,endLineNumber:l}=r;o.push(l>=a?{startLineNumber:a,endLineNumber:l}:{endLineNumber:l,startLineNumber:a})}t.removeManualRanges(o),e.triggerFoldingModelChanged()}}}dt(Cu.ID,Cu,0);Q(BIe);Q(HIe);Q(VIe);Q($Ie);Q(UIe);Q(YIe);Q(XIe);Q(jIe);Q(qIe);Q(KIe);Q(GIe);Q(ZIe);Q(zIe);Q(QIe);Q(JIe);Q(eTe);Q(tTe);Q(nTe);for(let s=1;s<=7;s++)woe(new Vx({id:Vx.ID(s),label:m("foldLevelAction.label","Fold Level {0}",s),alias:`Fold Level ${s}`,precondition:Vi,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2048|21+s),weight:100}}));rt.registerCommand("_executeFoldingRangeProvider",async function(s,...e){const[t]=e;if(!(t instanceof Se))throw Cr();const n=s.get(ue),i=s.get(Ut).getModel(t);if(!i)throw Cr();const o=s.get(Ze);if(!o.getValue("editor.folding",{resource:t}))return[];const r=s.get(cn),a=o.getValue("editor.foldingStrategy",{resource:t}),l={get limit(){return o.getValue("editor.foldingMaximumRegions",{resource:t})},update:(f,g)=>{}},c=new WB(i,r,l);let d=c;if(a!=="indentation"){const f=Cu.getFoldingRangeProviders(n,i);f.length&&(d=new BB(i,f,()=>{},l,c))}const h=await d.compute(Ue.None),u=[];try{if(h)for(let f=0;f<h.length;f++){const g=h.getType(f);u.push({start:h.getStartLineNumber(f),end:h.getEndLineNumber(f),kind:g?su.fromValue(g):void 0})}return u}finally{d.dispose()}});class iTe extends he{constructor(){super({id:"editor.action.fontZoomIn",label:m("EditorFontZoomIn.label","Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})}run(e,t){gr.setZoomLevel(gr.getZoomLevel()+1)}}class sTe extends he{constructor(){super({id:"editor.action.fontZoomOut",label:m("EditorFontZoomOut.label","Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})}run(e,t){gr.setZoomLevel(gr.getZoomLevel()-1)}}class oTe extends he{constructor(){super({id:"editor.action.fontZoomReset",label:m("EditorFontZoomReset.label","Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})}run(e,t){gr.setZoomLevel(0)}}Q(iTe);Q(sTe);Q(oTe);var $Q=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},ew=function(s,e){return function(t,n){e(t,n,s)}},q_;let zx=(q_=class{constructor(e,t,n,i){this._editor=e,this._languageFeaturesService=t,this._workerService=n,this._accessibilitySignalService=i,this._disposables=new q,this._sessionDisposables=new q,this._disposables.add(t.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(e.onDidChangeModel(()=>this._update())),this._disposables.add(e.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(e.onDidChangeConfiguration(o=>{o.hasChanged(56)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;const e=this._editor.getModel(),[t]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(e);if(!t||!t.autoFormatTriggerCharacters)return;const n=new Kk;for(const i of t.autoFormatTriggerCharacters)n.add(i.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(i=>{const o=i.charCodeAt(i.length-1);n.has(o)&&this._trigger(String.fromCharCode(o))}))}_trigger(e){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const t=this._editor.getModel(),n=this._editor.getPosition(),i=new an,o=this._editor.onDidChangeModelContent(r=>{if(r.isFlush){i.cancel(),o.dispose();return}for(let a=0,l=r.changes.length;a<l;a++)if(r.changes[a].range.endLineNumber<=n.lineNumber){i.cancel(),o.dispose();return}});KY(this._workerService,this._languageFeaturesService,t,n,e,t.getFormattingOptions(),i.token).then(r=>{i.token.isCancellationRequested||cs(r)&&(this._accessibilitySignalService.playSignal(Fo.format,{userGesture:!1}),Ib.execute(this._editor,r,!0))}).finally(()=>{o.dispose()})}},q_.ID="editor.contrib.autoFormat",q_);zx=$Q([ew(1,ue),ew(2,to),ew(3,Iu)],zx);var K_;let $x=(K_=class{constructor(e,t,n){this.editor=e,this._languageFeaturesService=t,this._instantiationService=n,this._callOnDispose=new q,this._callOnModel=new q,this._callOnDispose.add(e.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(e.onDidChangeModel(()=>this._update())),this._callOnDispose.add(e.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(t.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:e})=>this._trigger(e)))}_trigger(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(qY,this.editor,e,2,Aa.None,Ue.None,!1).catch(Pe))}},K_.ID="editor.contrib.formatOnPaste",K_);$x=$Q([ew(1,ue),ew(2,Ce)],$x);class rTe extends he{constructor(){super({id:"editor.action.formatDocument",label:m("formatDocument.label","Format Document"),alias:"Format Document",precondition:K.and(I.notInCompositeEditor,I.writable,I.hasDocumentFormattingProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(e,t){if(t.hasModel()){const n=e.get(Ce);await e.get(Lu).showWhile(n.invokeFunction(gSe,t,1,Aa.None,Ue.None,!0),250)}}}class aTe extends he{constructor(){super({id:"editor.action.formatSelection",label:m("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:K.and(I.writable,I.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2084),weight:100},contextMenuOpts:{when:I.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(e,t){if(!t.hasModel())return;const n=e.get(Ce),i=t.getModel(),o=t.getSelections().map(a=>a.isEmpty()?new L(a.startLineNumber,1,a.startLineNumber,i.getLineMaxColumn(a.startLineNumber)):a);await e.get(Lu).showWhile(n.invokeFunction(qY,t,o,1,Aa.None,Ue.None,!0),250)}}dt(zx.ID,zx,2);dt($x.ID,$x,2);Q(rTe);Q(aTe);rt.registerCommand("editor.action.format",async s=>{const e=s.get(mt).getFocusedCodeEditor();if(!e||!e.hasModel())return;const t=s.get(Wt);e.getSelection().isEmpty()?await t.executeCommand("editor.action.formatDocument"):await t.executeCommand("editor.action.formatSelection")});var lTe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},QR=function(s,e){return function(t,n){e(t,n,s)}};class Zp{remove(){var e;(e=this.parent)==null||e.children.delete(this.id)}static findId(e,t){let n;typeof e=="string"?n=`${t.id}/${e}`:(n=`${t.id}/${e.name}`,t.children.get(n)!==void 0&&(n=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let i=n;for(let o=0;t.children.get(i)!==void 0;o++)i=`${n}_${o}`;return i}static empty(e){return e.children.size===0}}class d4 extends Zp{constructor(e,t,n){super(),this.id=e,this.parent=t,this.symbol=n,this.children=new Map}}class UQ extends Zp{constructor(e,t,n,i){super(),this.id=e,this.parent=t,this.label=n,this.order=i,this.children=new Map}}class Oc extends Zp{static create(e,t,n){const i=new an(n),o=new Oc(t.uri),r=e.ordered(t),a=r.map((c,d)=>{const h=Zp.findId(`provider_${d}`,o),u=new UQ(h,o,c.displayName??"Unknown Outline Provider",d);return Promise.resolve(c.provideDocumentSymbols(t,i.token)).then(f=>{for(const g of f||[])Oc._makeOutlineElement(g,u);return u},f=>(kn(f),u)).then(f=>{Zp.empty(f)?f.remove():o._groups.set(h,f)})}),l=e.onDidChange(()=>{const c=e.ordered(t);en(c,r)||i.cancel()});return Promise.all(a).then(()=>i.token.isCancellationRequested&&!n.isCancellationRequested?Oc.create(e,t,n):o._compact()).finally(()=>{i.dispose(),l.dispose(),i.dispose()})}static _makeOutlineElement(e,t){const n=Zp.findId(e,t),i=new d4(n,t,e);if(e.children)for(const o of e.children)Oc._makeOutlineElement(o,i);t.children.set(i.id,i)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,n]of this._groups)n.children.size===0?this._groups.delete(t):e+=1;if(e!==1)this.children=this._groups;else{const t=ot.first(this._groups.values());for(const[,n]of t.children)n.parent=this,this.children.set(n.id,n)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof d4?e.push(t.symbol):e.push(...ot.map(t.children.values(),n=>n.symbol));return e.sort((t,n)=>L.compareRangesUsingStarts(t.range,n.range))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return Oc._flattenDocumentSymbols(t,e,""),t.sort((n,i)=>A.compare(L.getStartPosition(n.range),L.getStartPosition(i.range))||A.compare(L.getEndPosition(i.range),L.getEndPosition(n.range)))}static _flattenDocumentSymbols(e,t,n){for(const i of t)e.push({kind:i.kind,tags:i.tags,name:i.name,detail:i.detail,containerName:i.containerName||n,range:i.range,selectionRange:i.selectionRange,children:void 0}),i.children&&Oc._flattenDocumentSymbols(e,i.children,i.name)}}const X0=tt("IOutlineModelService");let h4=class{constructor(e,t,n){this._languageFeaturesService=e,this._disposables=new q,this._cache=new ic(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(n.onModelRemoved(i=>{this._cache.delete(i.id)}))}dispose(){this._disposables.dispose()}async getOrCreate(e,t){const n=this._languageFeaturesService.documentSymbolProvider,i=n.ordered(e);let o=this._cache.get(e.id);if(!o||o.versionId!==e.getVersionId()||!en(o.provider,i)){const a=new an;o={versionId:e.getVersionId(),provider:i,promiseCnt:0,source:a,promise:Oc.create(n,e,a.token),model:void 0},this._cache.set(e.id,o);const l=Date.now();o.promise.then(c=>{o.model=c,this._debounceInformation.update(e,Date.now()-l)}).catch(c=>{this._cache.delete(e.id)})}if(o.model)return o.model;o.promiseCnt+=1;const r=t.onCancellationRequested(()=>{--o.promiseCnt===0&&(o.source.cancel(),this._cache.delete(e.id))});try{return await o.promise}finally{r.dispose()}}};h4=lTe([QR(0,ue),QR(1,ir),QR(2,Ut)],h4);st(X0,h4,1);rt.registerCommand("_executeDocumentSymbolProvider",async function(s,...e){const[t]=e;gt(Se.isUri(t));const n=s.get(X0),o=await s.get(Qs).createModelReference(t);try{return(await n.getOrCreate(o.object.textEditorModel,Ue.None)).getTopLevelSymbols()}finally{o.dispose()}});const Sl=class Sl extends F{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=Sl.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=Sl.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=Sl.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=Sl.suppressSuggestions.bindTo(this.contextKeyService),this._register(Ae(n=>{const i=this.model.read(n),o=i==null?void 0:i.state.read(n),r=!!(o!=null&&o.inlineCompletion)&&(o==null?void 0:o.primaryGhostText)!==void 0&&!(o!=null&&o.primaryGhostText.isEmpty());this.inlineCompletionVisible.set(r),o!=null&&o.primaryGhostText&&(o!=null&&o.inlineCompletion)&&this.suppressSuggestions.set(o.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register(Ae(n=>{const i=this.model.read(n);let o=!1,r=!0;const a=i==null?void 0:i.primaryGhostText.read(n);if(i!=null&&i.selectedSuggestItem&&a&&a.parts.length>0){const{column:l,lines:c}=a.parts[0],d=c[0],h=i.textModel.getLineIndentColumn(a.lineNumber);if(l<=h){let f=ds(d);f===-1&&(f=d.length-1),o=f>0;const g=i.textModel.getOptions().tabSize;r=Gn.visibleColumnFromColumn(d,f+1,g)<g}}this.inlineCompletionSuggestsIndentation.set(o),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(r)}))}};Sl.inlineSuggestionVisible=new le("inlineSuggestionVisible",!1,m("inlineSuggestionVisible","Whether an inline suggestion is visible")),Sl.inlineSuggestionHasIndentation=new le("inlineSuggestionHasIndentation",!1,m("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),Sl.inlineSuggestionHasIndentationLessThanTabSize=new le("inlineSuggestionHasIndentationLessThanTabSize",!0,m("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),Sl.suppressSuggestions=new le("inlineSuggestionSuppressSuggestions",void 0,m("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));let wo=Sl;function cTe(s){const e=new q,t=e.add(wq());return e.add(Ae(n=>{t.setStyle(s.read(n))})),e}class K1{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,n)=>t.equals(e.parts[n]))}renderForScreenReader(e){if(this.parts.length===0)return"";const t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return new s9([...this.parts.map(o=>new ql(L.fromPositions(new A(1,o.column)),o.lines.join(`
`)))]).applyToString(n).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}}class Ux{constructor(e,t,n){this.column=e,this.text=t,this.preview=n,this.lines=tc(this.text)}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,n)=>t===e.lines[n])}}class u4{constructor(e,t,n,i=0){this.lineNumber=e,this.columnRange=t,this.text=n,this.additionalReservedLineCount=i,this.parts=[new Ux(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=tc(this.text)}renderForScreenReader(e){return this.newLines.join(`
`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>e.lines.length===0)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,n)=>t===e.newLines[n])&&this.additionalReservedLineCount===e.additionalReservedLineCount}}function w$(s,e){return en(s,e,jQ)}function jQ(s,e){return s===e?!0:!s||!e?!1:s instanceof K1&&e instanceof K1||s instanceof u4&&e instanceof u4?s.equals(e):!1}const dTe=[];function hTe(){return dTe}class qQ{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new _t(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new L(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}}function KQ(s,e){const t=new q,n=s.createDecorationsCollection();return t.add(T0({debugName:()=>`Apply decorations from ${e.debugName}`},i=>{const o=e.read(i);n.set(o)})),t.add({dispose:()=>{n.clear()}}),t}function uTe(s,e){return new A(s.lineNumber+e.lineNumber-1,e.lineNumber===1?s.column+e.column-1:e.column)}function y$(s,e){return new A(s.lineNumber-e.lineNumber+1,s.lineNumber-e.lineNumber===0?s.column-e.column+1:s.column)}var fTe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},gTe=function(s,e){return function(t,n){e(t,n,s)}};const S$="ghost-text";let f4=class extends F{constructor(e,t,n){super(),this.editor=e,this.model=t,this.languageService=n,this.isDisposed=Ge(this,!1),this.currentTextModel=kt(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=_e(this,i=>{if(this.isDisposed.read(i))return;const o=this.currentTextModel.read(i);if(o!==this.model.targetTextModel.read(i))return;const r=this.model.ghostText.read(i);if(!r)return;const a=r instanceof u4?r.columnRange:void 0,l=[],c=[];function d(p,_){if(c.length>0){const b=c[c.length-1];_&&b.decorations.push(new ws(b.content.length+1,b.content.length+1+p[0].length,_,0)),b.content+=p[0],p=p.slice(1)}for(const b of p)c.push({content:b,decorations:_?[new ws(1,b.length+1,_,0)]:[]})}const h=o.getLineContent(r.lineNumber);let u,f=0;for(const p of r.parts){let _=p.lines;u===void 0?(l.push({column:p.column,text:_[0],preview:p.preview}),_=_.slice(1)):d([h.substring(f,p.column-1)],void 0),_.length>0&&(d(_,S$),u===void 0&&p.column<=h.length&&(u=p.column)),f=p.column-1}u!==void 0&&d([h.substring(f)],void 0);const g=u!==void 0?new qQ(u,h.length+1):void 0;return{replacedRange:a,inlineTexts:l,additionalLines:c,hiddenRange:g,lineNumber:r.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(i),targetTextModel:o}}),this.decorations=_e(this,i=>{const o=this.uiState.read(i);if(!o)return[];const r=[];o.replacedRange&&r.push({range:o.replacedRange.toRange(o.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),o.hiddenRange&&r.push({range:o.hiddenRange.toRange(o.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const a of o.inlineTexts)r.push({range:L.fromPositions(new A(o.lineNumber,a.column)),options:{description:S$,after:{content:a.text,inlineClassName:a.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:Zr.Left},showIfCollapsed:!0}});return r}),this.additionalLinesWidget=this._register(new mTe(this.editor,this.languageService.languageIdCodec,_e(i=>{const o=this.uiState.read(i);return o?{lineNumber:o.lineNumber,additionalLines:o.additionalLines,minReservedLineCount:o.additionalReservedLineCount,targetTextModel:o.targetTextModel}:void 0}))),this._register(ve(()=>{this.isDisposed.set(!0,void 0)})),this._register(KQ(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};f4=fTe([gTe(2,tn)],f4);class mTe extends F{get viewZoneId(){return this._viewZoneId}constructor(e,t,n){super(),this.editor=e,this.languageIdCodec=t,this.lines=n,this._viewZoneId=void 0,this.editorOptionsChanged=Pi("editorOptionChanged",se.filter(this.editor.onDidChangeConfiguration,i=>i.hasChanged(33)||i.hasChanged(118)||i.hasChanged(100)||i.hasChanged(95)||i.hasChanged(51)||i.hasChanged(50)||i.hasChanged(67))),this._register(Ae(i=>{const o=this.lines.read(i);this.editorOptionsChanged.read(i),o?this.updateLines(o.lineNumber,o.additionalLines,o.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(e,t,n){const i=this.editor.getModel();if(!i)return;const{tabSize:o}=i.getOptions();this.editor.changeViewZones(r=>{this._viewZoneId&&(r.removeZone(this._viewZoneId),this._viewZoneId=void 0);const a=Math.max(t.length,n);if(a>0){const l=document.createElement("div");pTe(l,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=r.addZone({afterLineNumber:e,heightInLines:a,domNode:l,afterColumnAffinity:1})}})}}function pTe(s,e,t,n,i){const o=n.get(33),r=n.get(118),a="none",l=n.get(95),c=n.get(51),d=n.get(50),h=n.get(67),u=new Qb(1e4);u.appendString('<div class="suggest-preview-text">');for(let p=0,_=t.length;p<_;p++){const b=t[p],v=b.content;u.appendString('<div class="view-line'),u.appendString('" style="top:'),u.appendString(String(p*h)),u.appendString('px;width:1000000px;">');const C=p0(v),w=ob(v),y=_i.createEmpty(v,i);W0(new Tu(d.isMonospace&&!o,d.canUseHalfwidthRightwardsArrow,v,!1,C,w,0,y,b.decorations,e,0,d.spaceWidth,d.middotWidth,d.wsmiddotWidth,r,a,l,c!==nu.OFF,null),u),u.appendString("</div>")}u.appendString("</div>"),Ii(s,d);const f=u.build(),g=k$?k$.createHTML(f):f;s.innerHTML=g}const k$=Nd("editorGhostText",{createHTML:s=>s});function _Te(s,e){const t=new $G,n=new jG(t,c=>e.getLanguageConfiguration(c)),i=new UG(new bTe([s]),n),o=CP(i,[],void 0,!0);let r="";const a=s.getLineContent();function l(c,d){if(c.kind===2)if(l(c.openingBracket,d),d=bn(d,c.openingBracket.length),c.child&&(l(c.child,d),d=bn(d,c.child.length)),c.closingBracket)l(c.closingBracket,d),d=bn(d,c.closingBracket.length);else{const u=n.getSingleLanguageBracketTokens(c.openingBracket.languageId).findClosingTokenText(c.openingBracket.bracketIds);r+=u}else if(c.kind!==3){if(c.kind===0||c.kind===1)r+=a.substring(d,bn(d,c.length));else if(c.kind===4)for(const h of c.children)l(h,d),d=bn(d,h.length)}}return l(o,Cs),r}class bTe{constructor(e){this.lines=e,this.tokenization={getLineTokens:t=>this.lines[t-1]}}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}}async function GQ(s,e,t,n,i=Ue.None,o){const r=e instanceof A?wTe(e,t):e,a=s.all(t),l=new J3;for(const b of a)b.groupId&&l.add(b.groupId,b);function c(b){if(!b.yieldsToGroupIds)return[];const v=[];for(const C of b.yieldsToGroupIds||[]){const w=l.get(C);for(const y of w)v.push(y)}return v}const d=new Map,h=new Set;function u(b,v){if(v=[...v,b],h.has(b))return v;h.add(b);try{const C=c(b);for(const w of C){const y=u(w,v);if(y)return y}}finally{h.delete(b)}}function f(b){const v=d.get(b);if(v)return v;const C=u(b,[]);C&&kn(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${C.map(y=>y.toString?y.toString():""+y).join(" -> ")}`));const w=new Gb;return d.set(b,w.p),(async()=>{var y;if(!C){const k=c(b);for(const x of k){const D=await f(x);if(D&&D.items.length>0)return}}try{return e instanceof A?await b.provideInlineCompletions(t,e,n,i):await((y=b.provideInlineEdits)==null?void 0:y.call(b,t,e,n,i))}catch(k){kn(k);return}})().then(y=>w.complete(y),y=>w.error(y)),w.p}const g=await Promise.all(a.map(async b=>({provider:b,completions:await f(b)}))),p=new Map,_=[];for(const b of g){const v=b.completions;if(!v)continue;const C=new CTe(v,b.provider);_.push(C);for(const w of v.items){const y=jx.from(w,C,r,t,o);p.set(y.hash(),y)}}return new vTe(Array.from(p.values()),new Set(p.keys()),_)}class vTe{constructor(e,t,n){this.completions=e,this.hashs=t,this.providerResults=n}has(e){return this.hashs.has(e.hash())}dispose(){for(const e of this.providerResults)e.removeRef()}}class CTe{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class jx{static from(e,t,n,i,o){let r,a,l=e.range?L.lift(e.range):n;if(typeof e.insertText=="string"){if(r=e.insertText,o&&e.completeBracketPairs){r=L$(r,l.getStartPosition(),i,o);const c=r.length-e.insertText.length;c!==0&&(l=new L(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+c))}a=void 0}else if("snippet"in e.insertText){const c=e.insertText.snippet.length;if(o&&e.completeBracketPairs){e.insertText.snippet=L$(e.insertText.snippet,l.getStartPosition(),i,o);const h=e.insertText.snippet.length-c;h!==0&&(l=new L(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+h))}const d=new hm().parse(e.insertText.snippet);d.children.length===1&&d.children[0]instanceof bs?(r=d.children[0].value,a=void 0):(r=d.toString(),a={snippet:e.insertText.snippet,range:l})}else TT(e.insertText);return new jx(r,e.command,l,r,a,e.additionalTextEdits||hTe(),e,t)}constructor(e,t,n,i,o,r,a,l){this.filterText=e,this.command=t,this.range=n,this.insertText=i,this.snippetInfo=o,this.additionalTextEdits=r,this.sourceInlineCompletion=a,this.source=l,e=e.replace(/\r\n|\r/g,`
`),i=e.replace(/\r\n|\r/g,`
`)}withRange(e){return new jx(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}toSingleTextEdit(){return new ql(this.range,this.insertText)}}function wTe(s,e){const t=e.getWordAtPosition(s),n=e.getLineMaxColumn(s.lineNumber);return t?new L(s.lineNumber,t.startColumn,s.lineNumber,n):L.fromPositions(s,s.with(void 0,n))}function L$(s,e,t,n){const o=t.getLineContent(e.lineNumber).substring(0,e.column-1)+s,r=t.tokenization.tokenizeLineWithEdit(e,o.length-(e.column-1),s),a=r==null?void 0:r.sliceAndInflate(e.column-1,o.length,0);return a?_Te(a,n):s}function Zf(s,e,t){const n=t?s.range.intersectRanges(t):s.range;if(!n)return s;const i=e.getValueInRange(n,1),o=ou(i,s.text),r=sa.ofText(i.substring(0,o)).addToPosition(s.range.getStartPosition()),a=s.text.substring(o),l=L.fromPositions(r,s.range.getEndPosition());return new ql(l,a)}function ZQ(s,e){return s.text.startsWith(e.text)&&yTe(s.range,e.range)}function x$(s,e,t,n,i=0){let o=Zf(s,e);if(o.range.endLineNumber!==o.range.startLineNumber)return;const r=e.getLineContent(o.range.startLineNumber),a=Rt(r).length;if(o.range.startColumn-1<=a){const g=Rt(o.text).length,p=r.substring(o.range.startColumn-1,a),[_,b]=[o.range.getStartPosition(),o.range.getEndPosition()],v=_.column+p.length<=b.column?_.delta(0,p.length):b,C=L.fromPositions(v,b),w=o.text.startsWith(p)?o.text.substring(p.length):o.text.substring(g);o=new ql(C,w)}const c=e.getValueInRange(o.range),d=STe(c,o.text);if(!d)return;const h=o.range.startLineNumber,u=new Array;if(t==="prefix"){const g=d.filter(p=>p.originalLength===0);if(g.length>1||g.length===1&&g[0].originalStart!==c.length)return}const f=o.text.length-i;for(const g of d){const p=o.range.startColumn+g.originalStart+g.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===o.range.startLineNumber&&p<n.column||g.originalLength>0)return;if(g.modifiedLength===0)continue;const _=g.modifiedStart+g.modifiedLength,b=Math.max(g.modifiedStart,Math.min(_,f)),v=o.text.substring(g.modifiedStart,b),C=o.text.substring(b,Math.max(g.modifiedStart,_));v.length>0&&u.push(new Ux(p,v,!1)),C.length>0&&u.push(new Ux(p,C,!0))}return new K1(h,u)}function yTe(s,e){return e.getStartPosition().equals(s.getStartPosition())&&e.getEndPosition().isBeforeOrEqual(s.getEndPosition())}let fl;function STe(s,e){if((fl==null?void 0:fl.originalValue)===s&&(fl==null?void 0:fl.newValue)===e)return fl==null?void 0:fl.changes;{let t=I$(s,e,!0);if(t){const n=D$(t);if(n>0){const i=I$(s,e,!1);i&&D$(i)<n&&(t=i)}}return fl={originalValue:s,newValue:e,changes:t},t}}function D$(s){let e=0;for(const t of s)e+=t.originalLength;return e}function I$(s,e,t){if(s.length>5e3||e.length>5e3)return;function n(c){let d=0;for(let h=0,u=c.length;h<u;h++){const f=c.charCodeAt(h);f>d&&(d=f)}return d}const i=Math.max(n(s),n(e));function o(c){if(c<0)throw new Error("unexpected");return i+c+1}function r(c){let d=0,h=0;const u=new Int32Array(c.length);for(let f=0,g=c.length;f<g;f++)if(t&&c[f]==="("){const p=h*100+d;u[f]=o(2*p),d++}else if(t&&c[f]===")"){d=Math.max(d-1,0);const p=h*100+d;u[f]=o(2*p+1),d===0&&h++}else u[f]=c.charCodeAt(f);return u}const a=r(s),l=r(e);return new Ml({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}var kTe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},T$=function(s,e){return function(t,n){e(t,n,s)}};let g4=class extends F{constructor(e,t,n,i,o){super(),this.textModel=e,this.versionId=t,this._debounceValue=n,this.languageFeaturesService=i,this.languageConfigurationService=o,this._updateOperation=this._register(new ai),this.inlineCompletions=a1("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=a1("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}fetch(e,t,n){var d,h;const i=new xTe(e,t,this.textModel.getVersionId()),o=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if((d=this._updateOperation.value)!=null&&d.request.satisfies(i))return this._updateOperation.value.promise;if((h=o.get())!=null&&h.request.satisfies(i))return Promise.resolve(!0);const r=!!this._updateOperation.value;this._updateOperation.clear();const a=new an,l=(async()=>{if((r||t.triggerKind===Wa.Automatic)&&await LTe(this._debounceValue.get(this.textModel),a.token),a.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==i.versionId)return!1;const f=new Date,g=await GQ(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,a.token,this.languageConfigurationService);if(a.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==i.versionId)return!1;const p=new Date;this._debounceValue.update(this.textModel,p.getTime()-f.getTime());const _=new ITe(g,i,this.textModel,this.versionId);if(n){const b=n.toInlineCompletion(void 0);n.canBeReused(this.textModel,e)&&!g.has(b)&&_.prepend(n.inlineCompletion,b.range,!0)}return this._updateOperation.clear(),rn(b=>{o.set(_,b)}),!0})(),c=new DTe(i,a,l);return this._updateOperation.value=c,l}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;(t=this._updateOperation.value)!=null&&t.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};g4=kTe([T$(3,ue),T$(4,cn)],g4);function LTe(s,e){return new Promise(t=>{let n;const i=setTimeout(()=>{n&&n.dispose(),t()},s);e&&(n=e.onCancellationRequested(()=>{clearTimeout(i),n&&n.dispose(),t()}))})}class xTe{constructor(e,t,n){this.position=e,this.context=t,this.versionId=n}satisfies(e){return this.position.equals(e.position)&&eP(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,Due())&&(e.context.triggerKind===Wa.Automatic||this.context.triggerKind===Wa.Explicit)&&this.versionId===e.versionId}}class DTe{constructor(e,t,n){this.request=e,this.cancellationTokenSource=t,this.promise=n}dispose(){this.cancellationTokenSource.cancel()}}class ITe{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,n,i){this.inlineCompletionProviderResult=e,this.request=t,this._textModel=n,this._versionId=i,this._refCount=1,this._prependedInlineCompletionItems=[];const o=n.deltaDecorations([],e.completions.map(r=>({range:r.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=e.completions.map((r,a)=>new E$(r,o[a],this._textModel,this._versionId))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout(()=>{this._textModel.isDisposed()||this._textModel.deltaDecorations(this._inlineCompletions.map(e=>e.decorationId),[])},0),this.inlineCompletionProviderResult.dispose();for(const e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,n){n&&e.source.addRef();const i=this._textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new E$(e,i,this._textModel,this._versionId)),this._prependedInlineCompletionItems.push(e)}}class E${get forwardStable(){return this.inlineCompletion.source.inlineCompletions.enableForwardStability??!1}constructor(e,t,n,i){this.inlineCompletion=e,this.decorationId=t,this._textModel=n,this._modelVersion=i,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._updatedRange=Ho({owner:this,equalsFn:L.equalsRange},o=>(this._modelVersion.read(o),this._textModel.getDecorationRange(this.decorationId)))}toInlineCompletion(e){return this.inlineCompletion.withRange(this._updatedRange.read(e)??JR)}toSingleTextEdit(e){return new ql(this._updatedRange.read(e)??JR,this.inlineCompletion.insertText)}isVisible(e,t,n){const i=Zf(this._toFilterTextReplacement(n),e),o=this._updatedRange.read(n);if(!o||!this.inlineCompletion.range.getStartPosition().equals(o.getStartPosition())||t.lineNumber!==i.range.startLineNumber)return!1;const r=e.getValueInRange(i.range,1),a=i.text,l=Math.max(0,t.column-i.range.startColumn);let c=a.substring(0,l),d=a.substring(l),h=r.substring(0,l),u=r.substring(l);const f=e.getLineIndentColumn(i.range.startLineNumber);return i.range.startColumn<=f&&(h=h.trimStart(),h.length===0&&(u=u.trimStart()),c=c.trimStart(),c.length===0&&(d=d.trimStart())),c.startsWith(h)&&!!ZK(u,d)}canBeReused(e,t){const n=this._updatedRange.read(void 0);return!!n&&n.containsPosition(t)&&this.isVisible(e,t,void 0)&&sa.ofRange(n).isGreaterThanOrEqualTo(sa.ofRange(this.inlineCompletion.range))}_toFilterTextReplacement(e){return new ql(this._updatedRange.read(e)??JR,this.inlineCompletion.filterText)}}const JR=new L(1,1,1,1),je={Visible:MB,HasFocusedSuggestion:new le("suggestWidgetHasFocusedSuggestion",!1,m("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new le("suggestWidgetDetailsVisible",!1,m("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new le("suggestWidgetMultipleSuggestions",!1,m("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new le("suggestionMakesTextEdit",!0,m("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new le("acceptSuggestionOnEnter",!0,m("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new le("suggestionHasInsertAndReplaceRange",!1,m("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new le("suggestionInsertMode",void 0,{type:"string",description:m("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new le("suggestionCanResolve",!1,m("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},Oh=new ge("suggestWidgetStatusBar");class TTe{constructor(e,t,n,i){var o;this.position=e,this.completion=t,this.container=n,this.provider=i,this.isInvalid=!1,this.score=za.Default,this.distance=0,this.textLabel=typeof t.label=="string"?t.label:(o=t.label)==null?void 0:o.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,L.isIRange(t.range)?(this.editStart=new A(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new A(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new A(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||L.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new A(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new A(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new A(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||L.spansMultipleLines(t.range.insert)||L.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof i.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}async resolve(e){if(!this._resolveCache){const t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),n=new pi(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(i=>{Object.assign(this.completion,i),this._resolveDuration=n.elapsed()},i=>{Tr(i)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{t.dispose()})}return this._resolveCache}}const II=class II{constructor(e=2,t=new Set,n=new Set,i=new Map,o=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=n,this.providerItemsToReuse=i,this.showDeprecated=o}};II.default=new II;let G1=II;class ETe{constructor(e,t,n,i){this.items=e,this.needsClipboard=t,this.durations=n,this.disposable=i}}async function HB(s,e,t,n=G1.default,i={triggerKind:0},o=Ue.None){const r=new pi;t=t.clone();const a=e.getWordAtPosition(t),l=a?new L(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):L.fromPositions(t),c={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},d=[],h=new q,u=[];let f=!1;const g=(_,b,v)=>{var w;let C=!1;if(!b)return C;for(const y of b.suggestions)if(!n.kindFilter.has(y.kind)){if(!n.showDeprecated&&((w=y==null?void 0:y.tags)!=null&&w.includes(1)))continue;y.range||(y.range=c),y.sortText||(y.sortText=typeof y.label=="string"?y.label:y.label.label),!f&&y.insertTextRules&&y.insertTextRules&4&&(f=hm.guessNeedsClipboard(y.insertText)),d.push(new TTe(t,y,b,_)),C=!0}return uT(b)&&h.add(b),u.push({providerName:_._debugDisplayName??"unknown_provider",elapsedProvider:b.duration??-1,elapsedOverall:v.elapsed()}),C},p=(async()=>{})();for(const _ of s.orderedGroups(e)){let b=!1;if(await Promise.all(_.map(async v=>{if(n.providerItemsToReuse.has(v)){const C=n.providerItemsToReuse.get(v);C.forEach(w=>d.push(w)),b=b||C.length>0;return}if(!(n.providerFilter.size>0&&!n.providerFilter.has(v)))try{const C=new pi,w=await v.provideCompletionItems(e,t,i,o);b=g(v,w,C)||b}catch(C){kn(C)}})),b||o.isCancellationRequested)break}return await p,o.isCancellationRequested?(h.dispose(),Promise.reject(new ta)):new ETe(d.sort(MTe(n.snippetSortOrder)),f,{entries:u,elapsed:r.elapsed()},h)}function VB(s,e){if(s.sortTextLow&&e.sortTextLow){if(s.sortTextLow<e.sortTextLow)return-1;if(s.sortTextLow>e.sortTextLow)return 1}return s.textLabel<e.textLabel?-1:s.textLabel>e.textLabel?1:s.completion.kind-e.completion.kind}function NTe(s,e){if(s.completion.kind!==e.completion.kind){if(s.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return VB(s,e)}function RTe(s,e){if(s.completion.kind!==e.completion.kind){if(s.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return VB(s,e)}const BE=new Map;BE.set(0,NTe);BE.set(2,RTe);BE.set(1,VB);function MTe(s){return BE.get(s)}rt.registerCommand("_executeCompletionItemProvider",async(s,...e)=>{const[t,n,i,o]=e;gt(Se.isUri(t)),gt(A.isIPosition(n)),gt(typeof i=="string"||!i),gt(typeof o=="number"||!o);const{completionProvider:r}=s.get(ue),a=await s.get(Qs).createModelReference(t);try{const l={incomplete:!1,suggestions:[]},c=[],d=a.object.textEditorModel.validatePosition(n),h=await HB(r,a.object.textEditorModel,d,void 0,{triggerCharacter:i??void 0,triggerKind:i?1:0});for(const u of h.items)c.length<(o??0)&&c.push(u.resolve(Ue.None)),l.incomplete=l.incomplete||u.container.incomplete,l.suggestions.push(u.completion);try{return await Promise.all(c),l}finally{setTimeout(()=>h.disposable.dispose(),100)}}finally{a.dispose()}});function ATe(s,e){var t;(t=s.getContribution("editor.contrib.suggestController"))==null||t.triggerSuggest(new Set().add(e),void 0,!0)}class Yp{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}function N$(s,e=Bi){return Qae(s,e)?s.charAt(0).toUpperCase()+s.slice(1):s}var PTe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},OTe=function(s,e){return function(t,n){e(t,n,s)}};class R${constructor(e){this._delegates=e}resolve(e){for(const t of this._delegates){const n=t.resolve(e);if(n!==void 0)return n}}}class M${constructor(e,t,n,i){this._model=e,this._selection=t,this._selectionIdx=n,this._overtypingCapturer=i}resolve(e){const{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){const o=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);o&&(n=o.value,i=o.multiline)}if(n&&i&&e.snippet){const o=this._model.getLineContent(this._selection.startLineNumber),r=Rt(o,0,this._selection.startColumn-1);let a=r;e.snippet.walk(c=>c===e?!1:(c instanceof bs&&(a=Rt(tc(c.value).pop())),!0));const l=ou(a,r);n=n.replace(/(\r\n|\r|\n)(.*)/g,(c,d,h)=>`${d}${a.substr(l)}${h}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){const n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}class A${constructor(e,t){this._labelService=e,this._model=t}resolve(e){const{name:t}=e;if(t==="TM_FILENAME")return Eh(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){const n=Eh(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}else{if(t==="TM_DIRECTORY")return Wj(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(KT(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}class P${constructor(e,t,n,i){this._readClipboardText=e,this._selectionIdx=t,this._selectionCount=n,this._spread=i}resolve(e){if(e.name!=="CLIPBOARD")return;const t=this._readClipboardText();if(t){if(this._spread){const n=t.split(/\r\n|\n|\r/).filter(i=>!Kj(i));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}}let qx=class{constructor(e,t,n){this._model=e,this._selection=t,this._languageConfigurationService=n}resolve(e){const{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),i=this._languageConfigurationService.getLanguageConfiguration(n).comments;if(i){if(t==="LINE_COMMENT")return i.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return i.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return i.blockCommentEndToken||void 0}}};qx=PTe([OTe(2,cn)],qx);const kl=class kl{constructor(){this._date=new Date}resolve(e){const{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return kl.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return kl.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return kl.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return kl.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(t==="CURRENT_TIMEZONE_OFFSET"){const n=this._date.getTimezoneOffset(),i=n>0?"-":"+",o=Math.trunc(Math.abs(n/60)),r=o<10?"0"+o:o,a=Math.abs(n)-o*60,l=a<10?"0"+a:a;return i+r+":"+l}}};kl.dayNames=[m("Sunday","Sunday"),m("Monday","Monday"),m("Tuesday","Tuesday"),m("Wednesday","Wednesday"),m("Thursday","Thursday"),m("Friday","Friday"),m("Saturday","Saturday")],kl.dayNamesShort=[m("SundayShort","Sun"),m("MondayShort","Mon"),m("TuesdayShort","Tue"),m("WednesdayShort","Wed"),m("ThursdayShort","Thu"),m("FridayShort","Fri"),m("SaturdayShort","Sat")],kl.monthNames=[m("January","January"),m("February","February"),m("March","March"),m("April","April"),m("May","May"),m("June","June"),m("July","July"),m("August","August"),m("September","September"),m("October","October"),m("November","November"),m("December","December")],kl.monthNamesShort=[m("JanuaryShort","Jan"),m("FebruaryShort","Feb"),m("MarchShort","Mar"),m("AprilShort","Apr"),m("MayShort","May"),m("JuneShort","Jun"),m("JulyShort","Jul"),m("AugustShort","Aug"),m("SeptemberShort","Sep"),m("OctoberShort","Oct"),m("NovemberShort","Nov"),m("DecemberShort","Dec")];let Kx=kl;class O${constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;const t=pue(this._workspaceService.getWorkspace());if(!gue(t)){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(qA(e))return Eh(e.uri.path);let t=Eh(e.configPath.path);return t.endsWith(KA)&&(t=t.substr(0,t.length-KA.length-1)),t}_resoveWorkspacePath(e){if(qA(e))return N$(e.uri.fsPath);const t=Eh(e.configPath.path);let n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?N$(n):"/"}}class F${resolve(e){const{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return TE()}}var FTe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},WTe=function(s,e){return function(t,n){e(t,n,s)}},ba;const zr=class zr{constructor(e,t,n){this._editor=e,this._snippet=t,this._snippetLineLeadingWhitespace=n,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=q7(t.placeholders,fr.compareByIndex),this._placeholderGroupsIdx=-1}initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const e=this._editor.getModel();this._editor.changeDecorations(t=>{for(const n of this._snippet.placeholders){const i=this._snippet.offset(n),o=this._snippet.fullLen(n),r=L.fromPositions(e.getPositionAt(this._offset+i),e.getPositionAt(this._offset+i+o)),a=n.isFinalTabstop?zr._decor.inactiveFinal:zr._decor.inactive,l=t.addDecoration(r,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const i=[];for(const o of this._placeholderGroups[this._placeholderGroupsIdx])if(o.transform){const r=this._placeholderDecorations.get(o),a=this._editor.getModel().getDecorationRange(r),l=this._editor.getModel().getValueInRange(a),c=o.transform.resolve(l).split(/\r\n|\r|\n/);for(let d=1;d<c.length;d++)c[d]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+c[d]);i.push(on.replace(a,c.join(this._editor.getModel().getEOL())))}i.length>0&&this._editor.executeEdits("snippet.placeholderTransform",i)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);const n=this._editor.getModel().changeDecorations(i=>{const o=new Set,r=[];for(const a of this._placeholderGroups[this._placeholderGroupsIdx]){const l=this._placeholderDecorations.get(a),c=this._editor.getModel().getDecorationRange(l);r.push(new me(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),i.changeDecorationOptions(l,a.isFinalTabstop?zr._decor.activeFinal:zr._decor.active),o.add(a);for(const d of this._snippet.enclosingPlaceholders(a)){const h=this._placeholderDecorations.get(d);i.changeDecorationOptions(h,d.isFinalTabstop?zr._decor.activeFinal:zr._decor.active),o.add(d)}}for(const[a,l]of this._placeholderDecorations)o.has(a)||i.changeDecorationOptions(l,a.isFinalTabstop?zr._decor.inactiveFinal:zr._decor.inactive);return r});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof fr){const n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){const[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){const e=new Map;for(const t of this._placeholderGroups){let n;for(const i of t){if(i.isFinalTabstop)break;n||(n=[],e.set(i.index,n));const o=this._placeholderDecorations.get(i),r=this._editor.getModel().getDecorationRange(o);if(!r){e.delete(i.index);break}n.push(r)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;const e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!(e!=null&&e.choice))return;const t=this._placeholderDecorations.get(e);if(!t)return;const n=this._editor.getModel().getDecorationRange(t);if(n)return{range:n,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof pv,!e)),e}merge(e){const t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(const i of this._placeholderGroups[this._placeholderGroupsIdx]){const o=e.shift();console.assert(o._offset!==-1),console.assert(!o._placeholderDecorations);const r=o._snippet.placeholderInfo.last.index;for(const l of o._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=i.index+(r+1)/this._nestingLevel:l.index=i.index+l.index/this._nestingLevel;this._snippet.replace(i,o._snippet.children);const a=this._placeholderDecorations.get(i);n.removeDecoration(a),this._placeholderDecorations.delete(i);for(const l of o._snippet.placeholders){const c=o._snippet.offset(l),d=o._snippet.fullLen(l),h=L.fromPositions(t.getPositionAt(o._offset+c),t.getPositionAt(o._offset+c+d)),u=n.addDecoration(h,zr._decor.inactive);this._placeholderDecorations.set(l,u)}}this._placeholderGroups=q7(this._snippet.placeholders,fr.compareByIndex)})}};zr._decor={active:Ve.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Ve.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Ve.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Ve.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};let Gx=zr;const W$={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let Zx=ba=class{static adjustWhitespace(e,t,n,i,o){const r=e.getLineContent(t.lineNumber),a=Rt(r,0,t.column-1);let l;return i.walk(c=>{if(!(c instanceof bs)||c.parent instanceof pv||o&&!o.has(c))return!0;const d=c.value.split(/\r\n|\r|\n/);if(n){const u=i.offset(c);if(u===0)d[0]=e.normalizeIndentation(d[0]);else{l=l??i.toString();const f=l.charCodeAt(u-1);(f===10||f===13)&&(d[0]=e.normalizeIndentation(a+d[0]))}for(let f=1;f<d.length;f++)d[f]=e.normalizeIndentation(a+d[f])}const h=d.join(e.getEOL());return h!==c.value&&(c.parent.replace(c,[new bs(h)]),l=void 0),!0}),a}static adjustSelection(e,t,n,i){if(n!==0||i!==0){const{positionLineNumber:o,positionColumn:r}=t,a=r-n,l=r+i,c=e.validateRange({startLineNumber:o,startColumn:a,endLineNumber:o,endColumn:l});t=me.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,n,i,o,r,a,l,c){const d=[],h=[];if(!e.hasModel())return{edits:d,snippets:h};const u=e.getModel(),f=e.invokeWithinContext(w=>w.get(im)),g=e.invokeWithinContext(w=>new A$(w.get(_b),u)),p=()=>a,_=u.getValueInRange(ba.adjustSelection(u,e.getSelection(),n,0)),b=u.getValueInRange(ba.adjustSelection(u,e.getSelection(),0,i)),v=u.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),C=e.getSelections().map((w,y)=>({selection:w,idx:y})).sort((w,y)=>L.compareRangesUsingStarts(w.selection,y.selection));for(const{selection:w,idx:y}of C){let k=ba.adjustSelection(u,w,n,0),x=ba.adjustSelection(u,w,0,i);_!==u.getValueInRange(k)&&(k=w),b!==u.getValueInRange(x)&&(x=w);const D=w.setStartPosition(k.startLineNumber,k.startColumn).setEndPosition(x.endLineNumber,x.endColumn),N=new hm().parse(t,!0,o),W=D.getStartPosition(),B=ba.adjustWhitespace(u,W,r||y>0&&v!==u.getLineFirstNonWhitespaceColumn(w.positionLineNumber),N);N.resolveVariables(new R$([g,new P$(p,y,C.length,e.getOption(79)==="spread"),new M$(u,w,y,l),new qx(u,w,c),new Kx,new O$(f),new F$])),d[y]=on.replace(D,N.toString()),d[y].identifier={major:y,minor:0},d[y]._isTracked=!0,h[y]=new Gx(e,N,B)}return{edits:d,snippets:h}}static createEditsAndSnippetsFromEdits(e,t,n,i,o,r,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};const l=[],c=e.getModel(),d=new hm,h=new U0,u=new R$([e.invokeWithinContext(g=>new A$(g.get(_b),c)),new P$(()=>o,0,e.getSelections().length,e.getOption(79)==="spread"),new M$(c,e.getSelection(),0,r),new qx(c,e.getSelection(),a),new Kx,new O$(e.invokeWithinContext(g=>g.get(im))),new F$]);t=t.sort((g,p)=>L.compareRangesUsingStarts(g.range,p.range));let f=0;for(let g=0;g<t.length;g++){const{range:p,template:_}=t[g];if(g>0){const y=t[g-1].range,k=L.fromPositions(y.getEndPosition(),p.getStartPosition()),x=new bs(c.getValueInRange(k));h.appendChild(x),f+=x.value.length}const b=d.parseFragment(_,h);ba.adjustWhitespace(c,p.getStartPosition(),!0,h,new Set(b)),h.resolveVariables(u);const v=h.toString(),C=v.slice(f);f=v.length;const w=on.replace(p,C);w.identifier={major:g,minor:0},w._isTracked=!0,l.push(w)}return d.ensureFinalTabstop(h,n,!0),{edits:l,snippets:[new Gx(e,h,"")]}}constructor(e,t,n=W$,i){this._editor=e,this._template=t,this._options=n,this._languageConfigurationService=i,this._templateMerges=[],this._snippets=[]}dispose(){Mt(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:e,snippets:t}=typeof this._template=="string"?ba.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):ba.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,n=>{const i=n.filter(o=>!!o.identifier);for(let o=0;o<t.length;o++)t[o].initialize(i[o].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):i.map(o=>me.fromPositions(o.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=W$){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);const{edits:n,snippets:i}=ba.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",n,o=>{const r=o.filter(l=>!!l.identifier);for(let l=0;l<i.length;l++)i[l].initialize(r[l].textChange);const a=i[0].isTrivialSnippet;if(!a){for(const l of this._snippets)l.merge(i);console.assert(i.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):r.map(l=>me.fromPositions(l.range.getEndPosition()))})}next(){const e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){const e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){const t=[];for(const n of this._snippets){const i=n.move(e);t.push(...i)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;const t=new Map;for(const n of this._snippets){const i=n.computePossibleSelections();if(t.size===0)for(const[o,r]of i){r.sort(L.compareRangesUsingStarts);for(const a of e)if(r[0].containsRange(a)){t.set(o,[]);break}}if(t.size===0)return!1;t.forEach((o,r)=>{o.push(...i.get(r))})}e.sort(L.compareRangesUsingStarts);for(const[n,i]of t){if(i.length!==e.length){t.delete(n);continue}i.sort(L.compareRangesUsingStarts);for(let o=0;o<i.length;o++)if(!i[o].containsRange(e[o])){t.delete(n);continue}}return t.size>0}};Zx=ba=FTe([WTe(3,cn)],Zx);var BTe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mS=function(s,e){return function(t,n){e(t,n,s)}},Lp;const B$={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};var Fl;let Ns=(Fl=class{static get(e){return e.getContribution(Lp.ID)}constructor(e,t,n,i,o){this._editor=e,this._logService=t,this._languageFeaturesService=n,this._languageConfigurationService=o,this._snippetListener=new q,this._modelVersionId=-1,this._inSnippet=Lp.InSnippetMode.bindTo(i),this._hasNextTabstop=Lp.HasNextTabstop.bindTo(i),this._hasPrevTabstop=Lp.HasPrevTabstop.bindTo(i)}dispose(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),(e=this._session)==null||e.dispose(),this._snippetListener.dispose()}insert(e,t){try{this._doInsert(e,typeof t>"u"?B$:{...B$,...t})}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){var n;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(gt(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new Zx(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),(n=this._session)!=null&&n.hasChoice){const i={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(d,h)=>{if(!this._session||d!==this._editor.getModel()||!A.equals(this._editor.getPosition(),h))return;const{activeChoice:u}=this._session;if(!u||u.choice.options.length===0)return;const f=d.getValueInRange(u.range),g=!!u.choice.options.find(_=>_.value===f),p=[];for(let _=0;_<u.choice.options.length;_++){const b=u.choice.options[_];p.push({kind:13,label:b.value,insertText:b.value,sortText:"a".repeat(_+1),range:u.range,filterText:g?`${f}_${b.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:m("next","Go to next placeholder...")}})}return{suggestions:p}}},o=this._editor.getModel();let r,a=!1;const l=()=>{r==null||r.dispose(),a=!1},c=()=>{a||(r=this._languageFeaturesService.completionProvider.register({language:o.getLanguageId(),pattern:o.uri.fsPath,scheme:o.uri.scheme,exclusive:!0},i),this._snippetListener.add(r),a=!0)};this._choiceCompletions={provider:i,enable:c,disable:l}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(i=>i.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){var t;if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:e}=this._session;if(!e||!this._choiceCompletions){(t=this._choiceCompletions)==null||t.disable(),this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{ATe(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){var t;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,(t=this._session)==null||t.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){var e;(e=this._session)==null||e.prev(),this._updateState()}next(){var e;(e=this._session)==null||e.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}},Lp=Fl,Fl.ID="snippetController2",Fl.InSnippetMode=new le("inSnippetMode",!1,m("inSnippetMode","Whether the editor in current in snippet mode")),Fl.HasNextTabstop=new le("hasNextTabstop",!1,m("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),Fl.HasPrevTabstop=new le("hasPrevTabstop",!1,m("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),Fl);Ns=Lp=BTe([mS(1,Hi),mS(2,ue),mS(3,Ie),mS(4,cn)],Ns);dt(Ns.ID,Ns,4);const HE=Zn.bindToContribution(Ns.get);oe(new HE({id:"jumpToNextSnippetPlaceholder",precondition:K.and(Ns.InSnippetMode,Ns.HasNextTabstop),handler:s=>s.next(),kbOpts:{weight:130,kbExpr:I.textInputFocus,primary:2}}));oe(new HE({id:"jumpToPrevSnippetPlaceholder",precondition:K.and(Ns.InSnippetMode,Ns.HasPrevTabstop),handler:s=>s.prev(),kbOpts:{weight:130,kbExpr:I.textInputFocus,primary:1026}}));oe(new HE({id:"leaveSnippet",precondition:Ns.InSnippetMode,handler:s=>s.cancel(!0),kbOpts:{weight:130,kbExpr:I.textInputFocus,primary:9,secondary:[1033]}}));oe(new HE({id:"acceptSnippet",precondition:Ns.InSnippetMode,handler:s=>s.finish()}));var HTe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},e2=function(s,e){return function(t,n){e(t,n,s)}};let m4=class extends F{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,n,i,o,r,a,l,c,d,h,u){super(),this.textModel=e,this.selectedSuggestItem=t,this._textModelVersionId=n,this._positions=i,this._debounceValue=o,this._suggestPreviewEnabled=r,this._suggestPreviewMode=a,this._inlineSuggestMode=l,this._enabled=c,this._instantiationService=d,this._commandService=h,this._languageConfigurationService=u,this._source=this._register(this._instantiationService.createInstance(g4,this.textModel,this._textModelVersionId,this._debounceValue)),this._isActive=Ge(this,!1),this._forceUpdateExplicitlySignal=ov(this),this._selectedInlineCompletionId=Ge(this,void 0),this._primaryPosition=_e(this,g=>this._positions.read(g)[0]??new A(1,1)),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([xc.Redo,xc.Undo,xc.AcceptWord]),this._fetchInlineCompletionsPromise=_G({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:Wa.Automatic}),handleChange:(g,p)=>(g.didChange(this._textModelVersionId)&&this._preserveCurrentCompletionReasons.has(this._getReason(g.change))?p.preserveCurrentCompletion=!0:g.didChange(this._forceUpdateExplicitlySignal)&&(p.inlineCompletionTriggerKind=Wa.Explicit),!0)},(g,p)=>{if(this._forceUpdateExplicitlySignal.read(g),!(this._enabled.read(g)&&this.selectedSuggestItem.read(g)||this._isActive.read(g))){this._source.cancelUpdate();return}this._textModelVersionId.read(g);const b=this._source.suggestWidgetInlineCompletions.get(),v=this.selectedSuggestItem.read(g);if(b&&!v){const x=this._source.inlineCompletions.get();rn(D=>{(!x||b.request.versionId>x.request.versionId)&&this._source.inlineCompletions.set(b.clone(),D),this._source.clearSuggestWidgetInlineCompletions(D)})}const C=this._primaryPosition.read(g),w={triggerKind:p.inlineCompletionTriggerKind,selectedSuggestionInfo:v==null?void 0:v.toSelectedSuggestionInfo()},y=this.selectedInlineCompletion.get(),k=p.preserveCurrentCompletion||y!=null&&y.forwardStable?y:void 0;return this._source.fetch(C,w,k)}),this._filteredInlineCompletionItems=Ho({owner:this,equalsFn:mL()},g=>{const p=this._source.inlineCompletions.read(g);if(!p)return[];const _=this._primaryPosition.read(g);return p.inlineCompletions.filter(v=>v.isVisible(this.textModel,_,g))}),this.selectedInlineCompletionIndex=_e(this,g=>{const p=this._selectedInlineCompletionId.read(g),_=this._filteredInlineCompletionItems.read(g),b=this._selectedInlineCompletionId===void 0?-1:_.findIndex(v=>v.semanticId===p);return b===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):b}),this.selectedInlineCompletion=_e(this,g=>{const p=this._filteredInlineCompletionItems.read(g),_=this.selectedInlineCompletionIndex.read(g);return p[_]}),this.activeCommands=Ho({owner:this,equalsFn:mL()},g=>{var p;return((p=this.selectedInlineCompletion.read(g))==null?void 0:p.inlineCompletion.source.inlineCompletions.commands)??[]}),this.lastTriggerKind=this._source.inlineCompletions.map(this,g=>g==null?void 0:g.request.context.triggerKind),this.inlineCompletionsCount=_e(this,g=>{if(this.lastTriggerKind.read(g)===Wa.Explicit)return this._filteredInlineCompletionItems.read(g).length}),this.state=Ho({owner:this,equalsFn:(g,p)=>!g||!p?g===p:w$(g.ghostTexts,p.ghostTexts)&&g.inlineCompletion===p.inlineCompletion&&g.suggestItem===p.suggestItem},g=>{const p=this.textModel,_=this.selectedSuggestItem.read(g);if(_){const b=Zf(_.toSingleTextEdit(),p),v=this._computeAugmentation(b,g);if(!this._suggestPreviewEnabled.read(g)&&!v)return;const w=(v==null?void 0:v.edit)??b,y=v?v.edit.text.length-b.text.length:0,k=this._suggestPreviewMode.read(g),x=this._positions.read(g),D=[w,...t2(this.textModel,x,w)],N=D.map((B,z)=>x$(B,p,k,x[z],y)).filter(Vl),W=N[0]??new K1(w.range.endLineNumber,[]);return{edits:D,primaryGhostText:W,ghostTexts:N,inlineCompletion:v==null?void 0:v.completion,suggestItem:_}}else{if(!this._isActive.read(g))return;const b=this.selectedInlineCompletion.read(g);if(!b)return;const v=b.toSingleTextEdit(g),C=this._inlineSuggestMode.read(g),w=this._positions.read(g),y=[v,...t2(this.textModel,w,v)],k=y.map((x,D)=>x$(x,p,C,w[D],0)).filter(Vl);return k[0]?{edits:y,primaryGhostText:k[0],ghostTexts:k,inlineCompletion:b,suggestItem:void 0}:void 0}}),this.ghostTexts=Ho({owner:this,equalsFn:w$},g=>{const p=this.state.read(g);if(p)return p.ghostTexts}),this.primaryGhostText=Ho({owner:this,equalsFn:jQ},g=>{const p=this.state.read(g);if(p)return p==null?void 0:p.primaryGhostText}),this._register(rv(this._fetchInlineCompletionsPromise));let f;this._register(Ae(g=>{var b,v;const p=this.state.read(g),_=p==null?void 0:p.inlineCompletion;if((_==null?void 0:_.semanticId)!==(f==null?void 0:f.semanticId)&&(f=_,_)){const C=_.inlineCompletion,w=C.source;(v=(b=w.provider).handleItemDidShow)==null||v.call(b,w.inlineCompletions,C.sourceInlineCompletion,C.insertText)}}))}_getReason(e){return e!=null&&e.isUndoing?xc.Undo:e!=null&&e.isRedoing?xc.Redo:this.isAcceptingPartially?xc.AcceptWord:xc.Other}async trigger(e){this._isActive.set(!0,e),await this._fetchInlineCompletionsPromise.get()}async triggerExplicitly(e){sm(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineCompletionsPromise.get()}stop(e){sm(e,t=>{this._isActive.set(!1,t),this._source.clear(t)})}_computeAugmentation(e,t){const n=this.textModel,i=this._source.suggestWidgetInlineCompletions.read(t),o=i?i.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(Vl);return Kre(o,a=>{let l=a.toSingleTextEdit(t);return l=Zf(l,n,L.fromPositions(l.range.getStartPosition(),e.range.getEndPosition())),ZQ(l,e)?{completion:a,edit:l}:void 0})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){const n=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[n].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){var i;if(e.getModel()!==this.textModel)throw new _t;const t=this.state.get();if(!t||t.primaryGhostText.isEmpty()||!t.inlineCompletion)return;const n=t.inlineCompletion.toInlineCompletion(void 0);if(n.command&&n.source.addRef(),e.pushUndoStop(),n.snippetInfo)e.executeEdits("inlineSuggestion.accept",[on.replace(n.range,""),...n.additionalTextEdits]),e.setPosition(n.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),(i=Ns.get(e))==null||i.insert(n.snippetInfo.snippet,{undoStopBefore:!1});else{const o=t.edits,r=H$(o).map(a=>me.fromPositions(a));e.executeEdits("inlineSuggestion.accept",[...o.map(a=>on.replace(a.range,a.text)),...n.additionalTextEdits]),e.setSelections(r,"inlineCompletionAccept")}this.stop(),n.command&&(await this._commandService.executeCommand(n.command.id,...n.command.arguments||[]).then(void 0,kn),n.source.removeRef())}async acceptNextWord(e){await this._acceptNext(e,(t,n)=>{const i=this.textModel.getLanguageIdAtPosition(t.lineNumber,t.column),o=this._languageConfigurationService.getLanguageConfiguration(i),r=new RegExp(o.wordDefinition.source,o.wordDefinition.flags.replace("g","")),a=n.match(r);let l=0;a&&a.index!==void 0?a.index===0?l=a[0].length:l=a.index:l=n.length;const d=/\s+/g.exec(n);return d&&d.index!==void 0&&d.index+d[0].length<l&&(l=d.index+d[0].length),l},0)}async acceptNextLine(e){await this._acceptNext(e,(t,n)=>{const i=n.match(/\n/);return i&&i.index!==void 0?i.index+1:n.length},1)}async _acceptNext(e,t,n){if(e.getModel()!==this.textModel)throw new _t;const i=this.state.get();if(!i||i.primaryGhostText.isEmpty()||!i.inlineCompletion)return;const o=i.primaryGhostText,r=i.inlineCompletion.toInlineCompletion(void 0);if(r.snippetInfo||r.filterText!==r.insertText){await this.accept(e);return}const a=o.parts[0],l=new A(o.lineNumber,a.column),c=a.text,d=t(l,c);if(d===c.length&&o.parts.length===1){this.accept(e);return}const h=c.substring(0,d),u=this._positions.get(),f=u[0];r.source.addRef();try{this._isAcceptingPartially=!0;try{e.pushUndoStop();const g=L.fromPositions(f,l),p=e.getModel().getValueInRange(g)+h,_=new ql(g,p),b=[_,...t2(this.textModel,u,_)],v=H$(b).map(C=>me.fromPositions(C));e.executeEdits("inlineSuggestion.accept",b.map(C=>on.replace(C.range,C.text))),e.setSelections(v,"inlineCompletionPartialAccept"),e.revealPositionInCenterIfOutsideViewport(e.getPosition(),1)}finally{this._isAcceptingPartially=!1}if(r.source.provider.handlePartialAccept){const g=L.fromPositions(r.range.getStartPosition(),sa.ofText(h).addToPosition(l)),p=e.getModel().getValueInRange(g,1);r.source.provider.handlePartialAccept(r.source.inlineCompletions,r.sourceInlineCompletion,p.length,{kind:n})}}finally{r.source.removeRef()}}handleSuggestAccepted(e){var o,r;const t=Zf(e.toSingleTextEdit(),this.textModel),n=this._computeAugmentation(t,void 0);if(!n)return;const i=n.completion.inlineCompletion;(r=(o=i.source.provider).handlePartialAccept)==null||r.call(o,i.source.inlineCompletions,i.sourceInlineCompletion,t.text.length,{kind:2})}};m4=HTe([e2(9,Ce),e2(10,Wt),e2(11,cn)],m4);var xc;(function(s){s[s.Undo=0]="Undo",s[s.Redo=1]="Redo",s[s.AcceptWord=2]="AcceptWord",s[s.Other=3]="Other"})(xc||(xc={}));function t2(s,e,t){if(e.length===1)return[];const n=e[0],i=e.slice(1),o=t.range.getStartPosition(),r=t.range.getEndPosition(),a=s.getValueInRange(L.fromPositions(n,r)),l=y$(n,o);if(l.lineNumber<1)return Pe(new _t(`positionWithinTextEdit line number should be bigger than 0.
			Invalid subtraction between ${n.toString()} and ${o.toString()}`)),[];const c=VTe(t.text,l);return i.map(d=>{const h=uTe(y$(d,o),r),u=s.getValueInRange(L.fromPositions(d,h)),f=ou(a,u),g=L.fromPositions(d,d.delta(0,f));return new ql(g,c)})}function VTe(s,e){let t="";const n=bie(s);for(let i=e.lineNumber-1;i<n.length;i++)t+=n[i].substring(i===e.lineNumber-1?e.column-1:0);return t}function H$(s){const e=wk.createSortPermutation(s,ks(o=>o.range,L.compareRangesUsingStarts)),n=new s9(e.apply(s)).getNewRanges();return e.inverse().apply(n).map(o=>o.getEndPosition())}var zTe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},V$=function(s,e){return function(t,n){e(t,n,s)}},uC;class zB{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;const i=n[0].score[0];for(let o=0;o<n.length;o++){const{score:r,completion:a}=n[o];if(r[0]!==i)break;if(a.preselect)return o}return 0}}class z$ extends zB{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}}class $Te extends zB{constructor(){super("recentlyUsed"),this._cache=new ic(300,.66),this._seq=0}memorize(e,t,n){const i=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(i,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;const i=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(i))return super.select(e,t,n);const o=n[0].score[0];let r=-1,a=-1,l=-1;for(let c=0;c<n.length&&n[c].score[0]===o;c++){const d=`${e.getLanguageId()}/${n[c].textLabel}`,h=this._cache.peek(d);if(h&&h.touch>l&&h.type===n[c].completion.kind&&h.insertText===n[c].completion.insertText&&(l=h.touch,a=c),n[c].completion.preselect&&r===-1)return r=c}return a!==-1?a:r!==-1?r:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();const t=0;for(const[n,i]of e)i.touch=t,i.type=typeof i.type=="number"?i.type:Pw.fromString(i.type),this._cache.set(n,i);this._seq=this._cache.size}}class UTe extends zB{constructor(){super("recentlyUsedByPrefix"),this._trie=k_.forStrings(),this._seq=0}memorize(e,t,n){const{word:i}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${i}`;this._trie.set(o,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){const{word:i}=e.getWordUntilPosition(t);if(!i)return super.select(e,t,n);const o=`${e.getLanguageId()}/${i}`;let r=this._trie.get(o);if(r||(r=this._trie.findSubstr(o)),r)for(let a=0;a<n.length;a++){const{kind:l,insertText:c}=n[a].completion;if(l===r.type&&c===r.insertText)return a}return super.select(e,t,n)}toJSON(){const e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,n]of e)n.type=typeof n.type=="number"?n.type:Pw.fromString(n.type),this._trie.set(t,n)}}}var Kh;let p4=(Kh=class{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new q,this._persistSoon=new It(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===d1.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){var i;const n=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(((i=this._strategy)==null?void 0:i.name)!==n){this._saveState();const o=uC._strategyCtors.get(n)||z$;this._strategy=new o;try{const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,l=this._storageService.get(`${uC._storagePrefix}/${n}`,a);l&&this._strategy.fromJSON(JSON.parse(l))}catch{}}return this._strategy}_saveState(){if(this._strategy){const t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${uC._storagePrefix}/${this._strategy.name}`,n,t,1)}}},uC=Kh,Kh._strategyCtors=new Map([["recentlyUsedByPrefix",UTe],["recentlyUsed",$Te],["first",z$]]),Kh._storagePrefix="suggest/memories",Kh);p4=uC=zTe([V$(0,da),V$(1,Ze)],p4);const VE=tt("ISuggestMemories");st(VE,p4,1);var jTe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qTe=function(s,e){return function(t,n){e(t,n,s)}},_4,Lg;let Yx=(Lg=class{constructor(e,t){this._editor=e,this._enabled=!1,this._ckAtEnd=_4.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(124)&&this._update()),this._update()}dispose(){var e;this._configListener.dispose(),(e=this._selectionListener)==null||e.dispose(),this._ckAtEnd.reset()}_update(){const e=this._editor.getOption(124)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){const t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const n=this._editor.getModel(),i=this._editor.getSelection(),o=n.getWordAtPosition(i.getStartPosition());if(!o){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(o.endColumn===i.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}},_4=Lg,Lg.AtEnd=new le("atEndOfWord",!1),Lg);Yx=_4=jTe([qTe(1,Ie)],Yx);var KTe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},GTe=function(s,e){return function(t,n){e(t,n,s)}},fC,xg;let Wb=(xg=class{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=fC.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),(e=this._listener)==null||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(fC._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let i=n;for(let o=t.items.length;o>0&&(i=(i+t.items.length+(e?1:-1))%t.items.length,!(i===n||!t.items[i].completion.additionalTextEdits));o--);return i}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=fC._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}},fC=xg,xg.OtherSuggestions=new le("hasOtherSuggestions",!1),xg);Wb=fC=KTe([GTe(1,Ie)],Wb);class ZTe{constructor(e,t,n,i){this._disposables=new q,this._disposables.add(n.onDidSuggest(o=>{o.completionModel.items.length===0&&this.reset()})),this._disposables.add(n.onDidCancel(o=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(o=>{if(this._active&&!t.isFrozen()&&n.state!==0){const r=o.charCodeAt(o.length-1);this._active.acceptCharacters.has(r)&&e.getOption(0)&&i(this._active.item)}}))}_onItem(e){if(!e||!cs(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;const t=new Kk;for(const n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}const dr=class dr{async provideSelectionRanges(e,t){const n=[];for(const i of t){const o=[];n.push(o);const r=new Map;await new Promise(a=>dr._bracketsRightYield(a,0,e,i,r)),await new Promise(a=>dr._bracketsLeftYield(a,0,e,i,r,o))}return n}static _bracketsRightYield(e,t,n,i,o){const r=new Map,a=Date.now();for(;;){if(t>=dr._maxRounds){e();break}if(!i){e();break}const l=n.bracketPairs.findNextBracket(i);if(!l){e();break}if(Date.now()-a>dr._maxDuration){setTimeout(()=>dr._bracketsRightYield(e,t+1,n,i,o));break}if(l.bracketInfo.isOpeningBracket){const d=l.bracketInfo.bracketText,h=r.has(d)?r.get(d):0;r.set(d,h+1)}else{const d=l.bracketInfo.getOpeningBrackets()[0].bracketText;let h=r.has(d)?r.get(d):0;if(h-=1,r.set(d,Math.max(0,h)),h<0){let u=o.get(d);u||(u=new vs,o.set(d,u)),u.push(l.range)}}i=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,i,o,r){const a=new Map,l=Date.now();for(;;){if(t>=dr._maxRounds&&o.size===0){e();break}if(!i){e();break}const c=n.bracketPairs.findPrevBracket(i);if(!c){e();break}if(Date.now()-l>dr._maxDuration){setTimeout(()=>dr._bracketsLeftYield(e,t+1,n,i,o,r));break}if(c.bracketInfo.isOpeningBracket){const h=c.bracketInfo.bracketText;let u=a.has(h)?a.get(h):0;if(u-=1,a.set(h,Math.max(0,u)),u<0){const f=o.get(h);if(f){const g=f.shift();f.size===0&&o.delete(h);const p=L.fromPositions(c.range.getEndPosition(),g.getStartPosition()),_=L.fromPositions(c.range.getStartPosition(),g.getEndPosition());r.push({range:p}),r.push({range:_}),dr._addBracketLeading(n,_,r)}}}else{const h=c.bracketInfo.getOpeningBrackets()[0].bracketText,u=a.has(h)?a.get(h):0;a.set(h,u+1)}i=c.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;const i=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(i);o!==0&&o!==t.startColumn&&(n.push({range:L.fromPositions(new A(i,o),t.getEndPosition())}),n.push({range:L.fromPositions(new A(i,1),t.getEndPosition())}));const r=i-1;if(r>0){const a=e.getLineFirstNonWhitespaceColumn(r);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(r)&&(n.push({range:L.fromPositions(new A(r,a),t.getEndPosition())}),n.push({range:L.fromPositions(new A(r,1),t.getEndPosition())}))}}};dr._maxDuration=30,dr._maxRounds=2;let Xx=dr;const Ll=class Ll{static async create(e,t){if(!t.getOption(119).localityBonus||!t.hasModel())return Ll.None;const n=t.getModel(),i=t.getPosition();if(!e.canComputeWordRanges(n.uri))return Ll.None;const[o]=await new Xx().provideSelectionRanges(n,[i]);if(o.length===0)return Ll.None;const r=await e.computeWordRanges(n.uri,o[0].range);if(!r)return Ll.None;const a=n.getWordUntilPosition(i);return delete r[a.word],new class extends Ll{distance(l,c){if(!i.equals(t.getPosition()))return 0;if(c.kind===17)return 2<<20;const d=typeof c.label=="string"?c.label:c.label.label,h=r[d];if(fj(h))return 2<<20;const u=Tw(h,L.fromPositions(l),L.compareRangesUsingStarts),f=u>=0?h[u]:h[Math.max(0,~u-1)];let g=o.length;for(const p of o){if(!L.containsRange(p.range,f))break;g-=1}return g}}}};Ll.None=new class extends Ll{distance(){return 0}};let Qx=Ll,$$=class{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}};class uh{constructor(e,t,n,i,o,r,a=i1.default,l=void 0){this.clipboardText=l,this._snippetCompareFn=uh._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=i,this._options=o,this._refilterKind=1,this._lineContext=n,this._fuzzyScoreOptions=a,r==="top"?this._snippetCompareFn=uh._compareCompletionItemsSnippetsUp:r==="bottom"&&(this._snippetCompareFn=uh._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const e=new Set;for(const[t,n]of this.getItemsByProvider())n.length>0&&n[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext;let i="",o="";const r=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||r.length>2e3?nm:Wde;for(let c=0;c<r.length;c++){const d=r[c];if(d.isInvalid)continue;const h=this._itemsByProvider.get(d.provider);h?h.push(d):this._itemsByProvider.set(d.provider,[d]);const u=d.position.column-d.editStart.column,f=u+n-(d.position.column-this._column);if(i.length!==f&&(i=f===0?"":t.slice(-f),o=i.toLowerCase()),d.word=i,f===0)d.score=za.Default;else{let g=0;for(;g<u;){const p=i.charCodeAt(g);if(p===32||p===9)g+=1;else break}if(g>=f)d.score=za.Default;else if(typeof d.completion.filterText=="string"){const p=l(i,o,g,d.completion.filterText,d.filterTextLow,0,this._fuzzyScoreOptions);if(!p)continue;AM(d.completion.filterText,d.textLabel)===0?d.score=p:(d.score=Ade(i,o,g,d.textLabel,d.labelLow,0),d.score[0]=p[0])}else{const p=l(i,o,g,d.textLabel,d.labelLow,0,this._fuzzyScoreOptions);if(!p)continue;d.score=p}}d.idx=c,d.distance=this._wordDistance.distance(d.position,d.completion),a.push(d),e.push(d.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?L2(e.length-.85,e,(c,d)=>c-d):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return uh._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return uh._compareCompletionItems(e,t)}}var YTe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},qd=function(s,e){return function(t,n){e(t,n,s)}},b4;class Ku{static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),n=e.getPosition();t.tokenization.tokenizeIfCheap(n.lineNumber);const i=t.getWordAtPosition(n);return!(!i||i.endColumn!==n.column&&i.startColumn+1!==n.column||!isNaN(Number(i.word)))}constructor(e,t,n){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=n}}function XTe(s,e,t){if(!e.getContextKeyValue(wo.inlineSuggestionVisible.key))return!0;const n=e.getContextKeyValue(wo.suppressSuggestions.key);return n!==void 0?!n:!s.getOption(62).suppressSuggestions}function QTe(s,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;const n=e.getContextKeyValue(wo.suppressSuggestions.key);return n!==void 0?!n:!s.getOption(62).suppressSuggestions}let Jx=b4=class{constructor(e,t,n,i,o,r,a,l,c){this._editor=e,this._editorWorkerService=t,this._clipboardService=n,this._telemetryService=i,this._logService=o,this._contextKeyService=r,this._configurationService=a,this._languageFeaturesService=l,this._envService=c,this._toDispose=new q,this._triggerCharacterListener=new q,this._triggerQuickSuggest=new la,this._triggerState=void 0,this._completionDisposables=new q,this._onDidCancel=new O,this._onDidTrigger=new O,this._onDidSuggest=new O,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new me(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let d=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{d=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{d=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(h=>{d||this._onCursorChange(h)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!d&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){Mt(this._triggerCharacterListener),Mt([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(92)||!this._editor.hasModel()||!this._editor.getOption(122))return;const e=new Map;for(const n of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const i of n.triggerCharacters||[]){let o=e.get(i);o||(o=new Set,e.set(i,o)),o.add(n)}const t=n=>{var r;if(!QTe(this._editor,this._contextKeyService,this._configurationService)||Ku.shouldAutoTrigger(this._editor))return;if(!n){const a=this._editor.getPosition();n=this._editor.getModel().getLineContent(a.lineNumber).substr(0,a.column-1)}let i="";Zg(n.charCodeAt(n.length-1))?ni(n.charCodeAt(n.length-2))&&(i=n.substr(n.length-2)):i=n.charAt(n.length-1);const o=e.get(i);if(o){const a=new Map;if(this._completionModel)for(const[l,c]of this._completionModel.getItemsByProvider())o.has(l)||a.set(l,c);this.trigger({auto:!0,triggerKind:1,triggerCharacter:i,retrigger:!!this._completionModel,clipboardText:(r=this._completionModel)==null?void 0:r.clipboardText,completionOptions:{providerFilter:o,providerItemsToReuse:a}})}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){var t;this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),(t=this._requestToken)==null||t.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;Yp.isAllOff(this._editor.getOption(90))||this._editor.getOption(119).snippetsPreventQuickSuggestions&&((e=Ns.get(this._editor))!=null&&e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!Ku.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),n=this._editor.getPosition(),i=this._editor.getOption(90);if(!Yp.isAllOff(i)){if(!Yp.isAllOn(i)){t.tokenization.tokenizeIfCheap(n.lineNumber);const o=t.tokenization.getLineTokens(n.lineNumber),r=o.getStandardTokenType(o.findTokenIndexAtOffset(Math.max(n.column-1-1,0)));if(Yp.valueFor(i,r)!=="on")return}XTe(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0})}},this._editor.getOption(91)))}_refilterCompletionItems(){gt(this._editor.hasModel()),gt(this._triggerState!==void 0);const e=this._editor.getModel(),t=this._editor.getPosition(),n=new Ku(e,t,{...this._triggerState,refilter:!0});this._onNewContext(n)}trigger(e){var u,f,g;if(!this._editor.hasModel())return;const t=this._editor.getModel(),n=new Ku(t,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:e.shy??!1,position:this._editor.getPosition()}),this._context=n;let i={triggerKind:e.triggerKind??0};e.triggerCharacter&&(i={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new an;const o=this._editor.getOption(113);let r=1;switch(o){case"top":r=0;break;case"bottom":r=2;break}const{itemKind:a,showDeprecated:l}=b4.createSuggestFilter(this._editor),c=new G1(r,((u=e.completionOptions)==null?void 0:u.kindFilter)??a,(f=e.completionOptions)==null?void 0:f.providerFilter,(g=e.completionOptions)==null?void 0:g.providerItemsToReuse,l),d=Qx.create(this._editorWorkerService,this._editor),h=HB(this._languageFeaturesService.completionProvider,t,this._editor.getPosition(),c,i,this._requestToken.token);Promise.all([h,d]).then(async([p,_])=>{var y;if((y=this._requestToken)==null||y.dispose(),!this._editor.hasModel())return;let b=e==null?void 0:e.clipboardText;if(!b&&p.needsClipboard&&(b=await this._clipboardService.readText()),this._triggerState===void 0)return;const v=this._editor.getModel(),C=new Ku(v,this._editor.getPosition(),e),w={...i1.default,firstMatchCanBeWeak:!this._editor.getOption(119).matchOnWordStartOnly};if(this._completionModel=new uh(p.items,this._context.column,{leadingLineContent:C.leadingLineContent,characterCountDelta:C.column-this._context.column},_,this._editor.getOption(119),this._editor.getOption(113),w,b),this._completionDisposables.add(p.disposable),this._onNewContext(C),this._reportDurationsTelemetry(p.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(const k of p.items)k.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${k.provider._debugDisplayName}`,k.completion)}).catch(Pe)}_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static createSuggestFilter(e){const t=new Set;e.getOption(113)==="none"&&t.add(27);const i=e.getOption(119);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(Rt(e.leadingLineContent)!==Rt(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(Ku.shouldAutoTrigger(this._editor)&&this._context){const n=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:n}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){const t=new Map,n=new Set;for(const[i,o]of this._completionModel.getItemsByProvider())o.length>0&&o[0].container.incomplete?n.add(i):t.set(i,o);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:n,providerItemsToReuse:t}})}else{const t=this._completionModel.lineContext;let n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){const i=Ku.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(i&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:n})}}}}};Jx=b4=YTe([qd(1,to),qd(2,Pd),qd(3,Zi),qd(4,Hi),qd(5,Ie),qd(6,Ze),qd(7,ue),qd(8,l9)],Jx);const TI=class TI{constructor(e,t){this._disposables=new q,this._lastOvertyped=[],this._locked=!1,this._disposables.add(e.onWillType(()=>{if(this._locked||!e.hasModel())return;const n=e.getSelections(),i=n.length;let o=!1;for(let a=0;a<i;a++)if(!n[a].isEmpty()){o=!0;break}if(!o){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];const r=e.getModel();for(let a=0;a<i;a++){const l=n[a];if(r.getValueLengthInRange(l)>TI._maxSelectionLength)return;this._lastOvertyped[a]={value:r.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}})),this._disposables.add(t.onDidTrigger(n=>{this._locked=!0})),this._disposables.add(t.onDidCancel(n=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}};TI._maxSelectionLength=51200;let v4=TI;var JTe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},n2=function(s,e){return function(t,n){e(t,n,s)}};let C4=class{constructor(e,t,n,i,o){this._menuId=t,this._menuService=i,this._contextKeyService=o,this._menuDisposables=new q,this.element=Y(e,te(".suggest-status-bar"));const r=a=>a instanceof bo?n.createInstance(H9,a,{useComma:!0}):void 0;this._leftActions=new Zo(this.element,{actionViewItemProvider:r}),this._rightActions=new Zo(this.element,{actionViewItemProvider:r}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=()=>{const n=[],i=[];for(const[o,r]of e.getActions())o==="left"?n.push(...r):i.push(...r);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(i)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};C4=JTe([n2(2,Ce),n2(3,nr),n2(4,Ie)],C4);var eEe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},tEe=function(s,e){return function(t,n){e(t,n,s)}};function $B(s){return!!s&&!!(s.completion.documentation||s.completion.detail&&s.completion.detail!==s.completion.label)}let w4=class{constructor(e,t){this._editor=e,this._onDidClose=new O,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new O,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new q,this._renderDisposeable=new q,this._borderWidth=1,this._size=new Lt(330,0),this.domNode=te(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Cd,{editor:e}),this._body=te(".body"),this._scrollbar=new S0(this._body,{alwaysConsumeMouseWheel:!0}),Y(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=Y(this._body,te(".header")),this._close=Y(this._header,te("span"+De.asCSSSelector(J.close))),this._close.title=m("details.close","Close"),this._type=Y(this._header,te("p.type")),this._docs=Y(this._body,te("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(50)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(50),n=t.getMassagedFontFamily(),i=e.get(120)||t.fontSize,o=e.get(121)||t.lineHeight,r=t.fontWeight,a=`${i}px`,l=`${o}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${o/i}`,this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){const e=this._editor.getOption(121)||this._editor.getOption(50).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=m("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){var o;this._renderDisposeable.clear();let{detail:n,documentation:i}=e.completion;if(t){let r="";r+=`score: ${e.score[0]}
`,r+=`prefix: ${e.word??"(no prefix)"}
`,r+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,r+=`distance: ${e.distance} (localityBonus-setting)
`,r+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,r+=`commit_chars: ${(o=e.completion.commitCharacters)==null?void 0:o.join("")}
`,i=new ji().appendCodeblock("empty",r),n=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!$B(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),n){const r=n.length>1e5?`${n.substr(0,1e5)}…`:n;this._type.textContent=r,this._type.title=r,uo(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(r))}else xi(this._type),this._type.title="",ps(this._type),this.domNode.classList.add("no-type");if(xi(this._docs),typeof i=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=i;else if(i){this._docs.classList.add("markdown-docs"),xi(this._docs);const r=this._markdownRenderer.render(i);this._docs.appendChild(r.element),this._renderDisposeable.add(r),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=r=>{r.preventDefault(),r.stopPropagation()},this._close.onclick=r=>{r.preventDefault(),r.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(e,t){const n=new Lt(e,t);Lt.equals(n,this._size)||(this._size=n,xse(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};w4=eEe([tEe(1,Ce)],w4);class nEe{constructor(e,t){this.widget=e,this._editor=t,this.allowEditorOverflow=!0,this._disposables=new q,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new yB,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,i,o=0,r=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,i=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&i){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(r=i.width-a.dimension.width,l=!0),a.north&&(o=i.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+o,left:n.left+r})}a.done&&(n=void 0,i=void 0,o=0,r=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{this._anchorBox&&this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){const n=e.getBoundingClientRect();this._anchorBox=n,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,t)}_placeAtAnchor(e,t,n){const i=lu(this.getDomNode().ownerDocument.body),o=this.widget.getLayoutInfo(),r=new Lt(220,2*o.lineHeight),a=e.top,l=function(){const y=i.width-(e.left+e.width+o.borderWidth+o.horizontalPadding),k=-o.borderWidth+e.left+e.width,x=new Lt(y,i.height-e.top-o.borderHeight-o.verticalPadding),D=x.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:a,left:k,fit:y-t.width,maxSizeTop:x,maxSizeBottom:D,minSize:r.with(Math.min(y,r.width))}}(),c=function(){const y=e.left-o.borderWidth-o.horizontalPadding,k=Math.max(o.horizontalPadding,e.left-t.width-o.borderWidth),x=new Lt(y,i.height-e.top-o.borderHeight-o.verticalPadding),D=x.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:a,left:k,fit:y-t.width,maxSizeTop:x,maxSizeBottom:D,minSize:r.with(Math.min(y,r.width))}}(),d=function(){const y=e.left,k=-o.borderWidth+e.top+e.height,x=new Lt(e.width-o.borderHeight,i.height-e.top-e.height-o.verticalPadding);return{top:k,left:y,fit:x.height-t.height,maxSizeBottom:x,maxSizeTop:x,minSize:r.with(x.width)}}(),h=[l,c,d],u=h.find(y=>y.fit>=0)??h.sort((y,k)=>k.fit-y.fit)[0],f=e.top+e.height-o.borderHeight;let g,p=t.height;const _=Math.max(u.maxSizeTop.height,u.maxSizeBottom.height);p>_&&(p=_);let b;n?p<=u.maxSizeTop.height?(g=!0,b=u.maxSizeTop):(g=!1,b=u.maxSizeBottom):p<=u.maxSizeBottom.height?(g=!1,b=u.maxSizeBottom):(g=!0,b=u.maxSizeTop);let{top:v,left:C}=u;!g&&p>e.height&&(v=f-p);const w=this._editor.getDomNode();if(w){const y=w.getBoundingClientRect();v-=y.top,C-=y.left}this._applyTopLeft({left:C,top:v}),this._resizable.enableSashes(!g,u===l,g,u!==l),this._resizable.minSize=u.minSize,this._resizable.maxSize=b,this._resizable.layout(p,Math.min(b.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}}var Hl;(function(s){s[s.FILE=0]="FILE",s[s.FOLDER=1]="FOLDER",s[s.ROOT_FOLDER=2]="ROOT_FOLDER"})(Hl||(Hl={}));const iEe=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function pS(s,e,t,n,i){if(De.isThemeIcon(i))return[`codicon-${i.id}`,"predefined-file-icon"];if(Se.isUri(i))return[];const o=n===Hl.ROOT_FOLDER?["rootfolder-icon"]:n===Hl.FOLDER?["folder-icon"]:["file-icon"];if(t){let r;if(t.scheme===We.data)r=hu.parseMetaData(t).get(hu.META_DATA_LABEL);else{const a=t.path.match(iEe);a?(r=_S(a[2].toLowerCase()),a[1]&&o.push(`${_S(a[1].toLowerCase())}-name-dir-icon`)):r=_S(t.authority.toLowerCase())}if(n===Hl.ROOT_FOLDER)o.push(`${r}-root-name-folder-icon`);else if(n===Hl.FOLDER)o.push(`${r}-name-folder-icon`);else{if(r){if(o.push(`${r}-name-file-icon`),o.push("name-file-icon"),r.length<=255){const l=r.split(".");for(let c=1;c<l.length;c++)o.push(`${l.slice(c).join(".")}-ext-file-icon`)}o.push("ext-file-icon")}const a=sEe(s,e,t);a&&o.push(`${_S(a)}-lang-file-icon`)}}return o}function sEe(s,e,t){if(!t)return null;let n=null;if(t.scheme===We.data){const o=hu.parseMetaData(t).get(hu.META_DATA_MIME);o&&(n=e.getLanguageIdByMimeType(o))}else{const i=s.getModel(t);i&&(n=i.getLanguageId())}return n&&n!==xs?n:e.guessLanguageIdByFilepathOrFirstLine(t)}function _S(s){return s.replace(/[\s]/g,"/")}var oEe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},i2=function(s,e){return function(t,n){e(t,n,s)}};function YQ(s){return`suggest-aria-id:${s}`}const rEe=jt("suggest-more-info",J.chevronRight,m("suggestMoreInfoIcon","Icon for more information in the suggest widget."));var Ea;const aEe=new(Ea=class{extract(e,t){if(e.textLabel.match(Ea._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(Ea._regexStrict))return t[0]=e.completion.detail,!0;if(e.completion.documentation){const n=typeof e.completion.documentation=="string"?e.completion.documentation:e.completion.documentation.value,i=Ea._regexRelaxed.exec(n);if(i&&(i.index===0||i.index+i[0].length===n.length))return t[0]=i[0],!0}return!1}},Ea._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,Ea._regexStrict=new RegExp(`^${Ea._regexRelaxed.source}$`,"i"),Ea);let y4=class{constructor(e,t,n,i){this._editor=e,this._modelService=t,this._languageService=n,this._themeService=i,this._onDidToggleDetails=new O,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=new q,n=e;n.classList.add("show-file-icons");const i=Y(e,te(".icon")),o=Y(i,te("span.colorspan")),r=Y(e,te(".contents")),a=Y(r,te(".main")),l=Y(a,te(".icon-label.codicon")),c=Y(a,te("span.left")),d=Y(a,te("span.right")),h=new zL(c,{supportHighlights:!0,supportIcons:!0});t.add(h);const u=Y(c,te("span.signature-label")),f=Y(c,te("span.qualifier-label")),g=Y(d,te("span.details-label")),p=Y(d,te("span.readMore"+De.asCSSSelector(rEe)));return p.title=m("readMore","Read More"),{root:n,left:c,right:d,icon:i,colorspan:o,iconLabel:h,iconContainer:l,parametersLabel:u,qualifierLabel:f,detailsLabel:g,readMore:p,disposables:t,configureFont:()=>{const b=this._editor.getOptions(),v=b.get(50),C=v.getMassagedFontFamily(),w=v.fontFeatureSettings,y=b.get(120)||v.fontSize,k=b.get(121)||v.lineHeight,x=v.fontWeight,D=v.letterSpacing,N=`${y}px`,W=`${k}px`,B=`${D}px`;n.style.fontSize=N,n.style.fontWeight=x,n.style.letterSpacing=B,a.style.fontFamily=C,a.style.fontFeatureSettings=w,a.style.lineHeight=W,i.style.height=W,i.style.width=W,p.style.height=W,p.style.width=W}}}renderElement(e,t,n){n.configureFont();const{completion:i}=e;n.root.id=YQ(t),n.colorspan.style.backgroundColor="";const o={labelEscapeNewLines:!0,matches:k0(e.score)},r=[];if(i.kind===19&&aEe.extract(e,r))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=r[0];else if(i.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";const a=pS(this._modelService,this._languageService,Se.from({scheme:"fake",path:e.textLabel}),Hl.FILE),l=pS(this._modelService,this._languageService,Se.from({scheme:"fake",path:i.detail}),Hl.FILE);o.extraClasses=a.length>l.length?a:l}else i.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",o.extraClasses=[pS(this._modelService,this._languageService,Se.from({scheme:"fake",path:e.textLabel}),Hl.FOLDER),pS(this._modelService,this._languageService,Se.from({scheme:"fake",path:i.detail}),Hl.FOLDER)].flat()):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...De.asClassNameArray(Pw.toIcon(i.kind))));i.tags&&i.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,o),typeof i.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=s2(i.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=s2(i.label.detail||""),n.detailsLabel.textContent=s2(i.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(119).showInlineDetails?uo(n.detailsLabel):ps(n.detailsLabel),$B(e)?(n.right.classList.add("can-expand-details"),uo(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),ps(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};y4=oEe([i2(1,Ut),i2(2,tn),i2(3,Yn)],y4);function s2(s){return s.replace(/\r\n|\r|\n/g,"")}var lEe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},bS=function(s,e){return function(t,n){e(t,n,s)}},xp;T("editorSuggestWidget.background",jo,m("editorSuggestWidgetBackground","Background color of the suggest widget."));T("editorSuggestWidget.border",f9,m("editorSuggestWidgetBorder","Border color of the suggest widget."));const cEe=T("editorSuggestWidget.foreground",sc,m("editorSuggestWidgetForeground","Foreground color of the suggest widget."));T("editorSuggestWidget.selectedForeground",Jw,m("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));T("editorSuggestWidget.selectedIconForeground",C9,m("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const dEe=T("editorSuggestWidget.selectedBackground",e1,m("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));T("editorSuggestWidget.highlightForeground",Ap,m("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));T("editorSuggestWidget.focusHighlightForeground",Wce,m("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));T("editorSuggestWidgetStatus.foreground",qe(cEe,.5),m("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class hEe{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof aa}`}restore(){const e=this._service.get(this._key,0)??"";try{const t=JSON.parse(e);if(Lt.is(t))return Lt.lift(t)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}var Gh;let S4=(Gh=class{constructor(e,t,n,i,o){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new ai,this._pendingShowDetails=new ai,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new la,this._disposables=new q,this._onDidSelect=new Kg,this._onDidFocus=new Kg,this._onDidHide=new O,this._onDidShow=new O,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new O,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new yB,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new uEe(this,e),this._persistedSize=new hEe(t,e);class r{constructor(f,g,p=!1,_=!1){this.persistedSize=f,this.currentSize=g,this.persistHeight=p,this.persistWidth=_}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new r(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(u=>{var f,g;if(this._resize(u.dimension.width,u.dimension.height),a&&(a.persistHeight=a.persistHeight||!!u.north||!!u.south,a.persistWidth=a.persistWidth||!!u.east||!!u.west),!!u.done){if(a){const{itemHeight:p,defaultSize:_}=this.getLayoutInfo(),b=Math.round(p/2);let{width:v,height:C}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-C)<=b)&&(C=((f=a.persistedSize)==null?void 0:f.height)??_.height),(!a.persistWidth||Math.abs(a.currentSize.width-v)<=b)&&(v=((g=a.persistedSize)==null?void 0:g.width)??_.width),this._persistedSize.store(new Lt(v,C))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=Y(this.element.domNode,te(".message")),this._listElement=Y(this.element.domNode,te(".tree"));const l=this._disposables.add(o.createInstance(w4,this.editor));l.onDidClose(this.toggleDetails,this,this._disposables),this._details=new nEe(l,this.editor);const c=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(119).showIcons);c();const d=o.createInstance(y4,this.editor);this._disposables.add(d),this._disposables.add(d.onDidToggleDetails(()=>this.toggleDetails())),this._list=new or("SuggestWidget",this._listElement,{getHeight:u=>this.getLayoutInfo().itemHeight,getTemplateId:u=>"suggestion"},[d],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>m("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:u=>{let f=u.textLabel;if(typeof u.completion.label!="string"){const{detail:b,description:v}=u.completion.label;b&&v?f=m("label.full","{0} {1}, {2}",f,b,v):b?f=m("label.detail","{0} {1}",f,b):v&&(f=m("label.desc","{0}, {1}",f,v))}if(!u.isResolved||!this._isDetailsVisible())return f;const{documentation:g,detail:p}=u.completion,_=Gg("{0}{1}",p||"",g?typeof g=="string"?g:g.value:"");return m("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",f,_)}}}),this._list.style(Nm({listInactiveFocusBackground:dEe,listInactiveFocusOutline:Zt})),this._status=o.createInstance(C4,this.element.domNode,Oh);const h=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(119).showStatusBar);h(),this._disposables.add(i.onDidColorThemeChange(u=>this._onThemeChange(u))),this._onThemeChange(i.getColorTheme()),this._disposables.add(this._list.onMouseDown(u=>this._onListMouseDownOrTap(u))),this._disposables.add(this._list.onTap(u=>this._onListMouseDownOrTap(u))),this._disposables.add(this._list.onDidChangeSelection(u=>this._onListSelection(u))),this._disposables.add(this._list.onDidChangeFocus(u=>this._onListFocus(u))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(u=>{u.hasChanged(119)&&(h(),c()),this._completionModel&&(u.hasChanged(50)||u.hasChanged(120)||u.hasChanged(121))&&this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=je.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=je.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=je.MultipleSuggestions.bindTo(n),this._ctxSuggestWidgetHasFocusedSuggestion=je.HasFocusedSuggestion.bindTo(n),this._disposables.add(hn(this._details.widget.domNode,"keydown",u=>{this._onDetailsKeydown.fire(u)})),this._disposables.add(this.editor.onMouseDown(u=>this._onEditorMouseDown(u)))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),(e=this._loadingTimeout)==null||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=Ha(e.type)?2:1}_onListFocus(e){var i;if(this._ignoreFocusEvents)return;if(!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const t=e.elements[0],n=e.indexes[0];t!==this._focusedItem&&((i=this._currentSuggestionDetails)==null||i.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=t,this._list.reveal(n),this._currentSuggestionDetails=si(async o=>{const r=au(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),a=o.onCancellationRequested(()=>r.dispose());try{return await t.resolve(o)}finally{r.dispose(),a.dispose()}}),this._currentSuggestionDetails.then(()=>{n>=this._list.length||t!==this._list.element(n)||(this._ignoreFocusEvents=!0,this._list.splice(n,1,[t]),this._list.setFocus([n]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:YQ(n)}))}).catch(Pe)),this._onDidFocus.fire({item:t,index:n,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:ps(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=xp.LOADING_MESSAGE,ps(this._listElement,this._status.element),uo(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Zl(xp.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=xp.NO_SUGGESTIONS_MESSAGE,ps(this._listElement,this._status.element),uo(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Zl(xp.NO_SUGGESTIONS_MESSAGE);break;case 3:ps(this._messageElement),uo(this._listElement,this._status.element),this._show();break;case 4:ps(this._messageElement),uo(this._listElement,this._status.element),this._show();break;case 5:ps(this._messageElement),uo(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=au(()=>this._setState(1),t)))}showSuggestions(e,t,n,i,o){var l,c;if(this._contentWidget.setPosition(this.editor.getPosition()),(l=this._loadingTimeout)==null||l.dispose(),(c=this._currentSuggestionDetails)==null||c.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}const r=this._completionModel.items.length,a=r===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(r>1),a){this._setState(i?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus(o?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=Bk(Le(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):($B(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=Bk(Le(this.element.domNode),()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details")),this.editor.focus()})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var n;this._pendingLayout.clear(),this._pendingShowDetails.clear(),(n=this._loadingTimeout)==null||n.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const e=this._persistedSize.restore(),t=Math.ceil(this.getLayoutInfo().itemHeight*4.3);e&&e.height<t&&this._persistedSize.store(e.with(void 0,t))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails())}_layout(e){var r,a;if(!this.editor.hasModel()||!this.editor.getDomNode())return;const t=lu(this.element.domNode.ownerDocument.body),n=this.getLayoutInfo();e||(e=n.defaultSize);let i=e.height,o=e.width;if(this._status.element.style.height=`${n.itemHeight}px`,this._state===2||this._state===1)i=n.itemHeight+n.borderHeight,o=n.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Lt(o,i),this._contentWidget.setPreference(2);else{const l=t.width-n.borderHeight-2*n.horizontalPadding;o>l&&(o=l);const c=this._completionModel?this._completionModel.stats.pLabelLen*n.typicalHalfwidthCharacterWidth:o,d=n.statusBarHeight+this._list.contentHeight+n.borderHeight,h=n.itemHeight+n.statusBarHeight,u=Sn(this.editor.getDomNode()),f=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),g=u.top+f.top+f.height,p=Math.min(t.height-g-n.verticalPadding,d),_=u.top+f.top-n.verticalPadding,b=Math.min(_,d);let v=Math.min(Math.max(b,p)+n.borderHeight,d);i===((r=this._cappedHeight)==null?void 0:r.capped)&&(i=this._cappedHeight.wanted),i<h&&(i=h),i>v&&(i=v),i>p||this._forceRenderingAbove&&_>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),v=b):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),v=p),this.element.preferredSize=new Lt(c,n.defaultSize.height),this.element.maxSize=new Lt(l,v),this.element.minSize=new Lt(220,h),this._cappedHeight=i===d?{wanted:((a=this._cappedHeight)==null?void 0:a.wanted)??e.height,capped:i}:void 0}this._resize(o,i)}_resize(e,t){const{width:n,height:i}=this.element.maxSize;e=Math.min(n,e),t=Math.min(i,t);const{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=`${t-o}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,((e=this._contentWidget.getPosition())==null?void 0:e.preference[0])===2)}getLayoutInfo(){const e=this.editor.getOption(50),t=ms(this.editor.getOption(121)||e.lineHeight,8,1e3),n=!this.editor.getOption(119).showStatusBar||this._state===2||this._state===1?0:t,i=this._details.widget.borderWidth,o=2*i;return{itemHeight:t,statusBarHeight:n,borderWidth:i,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Lt(430,n+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}},xp=Gh,Gh.LOADING_MESSAGE=m("suggestWidget.loading","Loading..."),Gh.NO_SUGGESTIONS_MESSAGE=m("suggestWidget.noSuggestions","No suggestions."),Gh);S4=xp=lEe([bS(1,da),bS(2,Ie),bS(3,Yn),bS(4,Ce)],S4);class uEe{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:i}=this._widget.getLayoutInfo();return new Lt(t+2*n+i,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var fEe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mp=function(s,e){return function(t,n){e(t,n,s)}},k4;class gEe{constructor(e,t){if(this._model=e,this._position=t,this._decorationOptions=Ve.register({description:"suggest-line-suffix",stickiness:1}),e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),o=e.getPositionAt(i+1);e.changeDecorations(r=>{this._marker&&r.removeDecoration(this._marker),this._marker=r.addDecoration(L.fromPositions(t,o),this._decorationOptions)})}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations(e=>{e.removeDecoration(this._marker),this._marker=void 0})}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}}var Dg;let Yr=(Dg=class{static get(e){return e.getContribution(k4.ID)}constructor(e,t,n,i,o,r,a){this._memoryService=t,this._commandService=n,this._contextKeyService=i,this._instantiationService=o,this._logService=r,this._telemetryService=a,this._lineSuffix=new ai,this._toDispose=new q,this._selectors=new mEe(h=>h.priority),this._onWillInsertSuggestItem=new O,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=e,this.model=o.createInstance(Jx,this.editor),this._selectors.register({priority:0,select:(h,u,f)=>this._memoryService.select(h,u,f)});const l=je.InsertMode.bindTo(i);l.set(e.getOption(119).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>l.set(e.getOption(119).insertMode))),this.widget=this._toDispose.add(new wN(Le(e.getDomNode()),()=>{const h=this._instantiationService.createInstance(S4,this.editor);this._toDispose.add(h),this._toDispose.add(h.onDidSelect(_=>this._insertSuggestion(_,0),this));const u=new ZTe(this.editor,h,this.model,_=>this._insertSuggestion(_,2));this._toDispose.add(u);const f=je.MakesTextEdit.bindTo(this._contextKeyService),g=je.HasInsertAndReplaceRange.bindTo(this._contextKeyService),p=je.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(ve(()=>{f.reset(),g.reset(),p.reset()})),this._toDispose.add(h.onDidFocus(({item:_})=>{const b=this.editor.getPosition(),v=_.editStart.column,C=b.column;let w=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!_.completion.additionalTextEdits&&!(_.completion.insertTextRules&4)&&C-v===_.completion.insertText.length&&(w=this.editor.getModel().getValueInRange({startLineNumber:b.lineNumber,startColumn:v,endLineNumber:b.lineNumber,endColumn:C})!==_.completion.insertText),f.set(w),g.set(!A.equals(_.editInsertEnd,_.editReplaceEnd)),p.set(!!_.provider.resolveCompletionItem||!!_.completion.documentation||_.completion.detail!==_.completion.label)})),this._toDispose.add(h.onDetailsKeyDown(_=>{if(_.toKeyCodeChord().equals(new pd(!0,!1,!1,!1,33))||et&&_.toKeyCodeChord().equals(new pd(!1,!1,!1,!0,33))){_.stopPropagation();return}_.toKeyCodeChord().isModifierKey()||this.editor.focus()})),h})),this._overtypingCapturer=this._toDispose.add(new wN(Le(e.getDomNode()),()=>this._toDispose.add(new v4(this.editor,this.model)))),this._alternatives=this._toDispose.add(new wN(Le(e.getDomNode()),()=>this._toDispose.add(new Wb(this.editor,this._contextKeyService)))),this._toDispose.add(o.createInstance(Yx,e)),this._toDispose.add(this.model.onDidTrigger(h=>{this.widget.value.showTriggered(h.auto,h.shy?250:50),this._lineSuffix.value=new gEe(this.editor.getModel(),h.position)})),this._toDispose.add(this.model.onDidSuggest(h=>{if(h.triggerOptions.shy)return;let u=-1;for(const g of this._selectors.itemsOrderedByPriorityDesc)if(u=g.select(this.editor.getModel(),this.editor.getPosition(),h.completionModel.items),u!==-1)break;if(u===-1&&(u=0),this.model.state===0)return;let f=!1;if(h.triggerOptions.auto){const g=this.editor.getOption(119);g.selectionMode==="never"||g.selectionMode==="always"?f=g.selectionMode==="never":g.selectionMode==="whenTriggerCharacter"?f=h.triggerOptions.triggerKind!==1:g.selectionMode==="whenQuickSuggestion"&&(f=h.triggerOptions.triggerKind===1&&!h.triggerOptions.refilter)}this.widget.value.showSuggestions(h.completionModel,u,h.isFrozen,h.triggerOptions.auto,f)})),this._toDispose.add(this.model.onDidCancel(h=>{h.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{this.model.cancel(),this.model.clear()}));const c=je.AcceptSuggestionsOnEnter.bindTo(i),d=()=>{const h=this.editor.getOption(1);c.set(h==="on"||h==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>d())),d()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const n=Ns.get(this.editor);if(!n)return;this._onWillInsertSuggestItem.fire({item:e.item});const i=this.editor.getModel(),o=i.getAlternativeVersionId(),{item:r}=e,a=[],l=new an;t&1||this.editor.pushUndoStop();const c=this.getOverwriteInfo(r,!!(t&8));this._memoryService.memorize(i,this.editor.getPosition(),r);const d=r.isResolved;let h=-1,u=-1;if(Array.isArray(r.completion.additionalTextEdits)){this.model.cancel();const g=Qa.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",r.completion.additionalTextEdits.map(p=>{let _=L.lift(p.range);if(_.startLineNumber===r.position.lineNumber&&_.startColumn>r.position.column){const b=this.editor.getPosition().column-r.position.column,v=b,C=L.spansMultipleLines(_)?0:b;_=new L(_.startLineNumber,_.startColumn+v,_.endLineNumber,_.endColumn+C)}return on.replaceMove(_,p.text)})),g.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!d){const g=new pi;let p;const _=i.onDidChangeContent(w=>{if(w.isFlush){l.cancel(),_.dispose();return}for(const y of w.changes){const k=L.getEndPosition(y.range);(!p||A.isBefore(k,p))&&(p=k)}}),b=t;t|=2;let v=!1;const C=this.editor.onWillType(()=>{C.dispose(),v=!0,b&2||this.editor.pushUndoStop()});a.push(r.resolve(l.token).then(()=>{if(!r.completion.additionalTextEdits||l.token.isCancellationRequested)return;if(p&&r.completion.additionalTextEdits.some(y=>A.isBefore(p,L.getStartPosition(y.range))))return!1;v&&this.editor.pushUndoStop();const w=Qa.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",r.completion.additionalTextEdits.map(y=>on.replaceMove(L.lift(y.range),y.text))),w.restoreRelativeVerticalPositionOfCursor(this.editor),(v||!(b&2))&&this.editor.pushUndoStop(),!0}).then(w=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",g.elapsed(),w),u=w===!0?1:w===!1?0:-2}).finally(()=>{_.dispose(),C.dispose()}))}let{insertText:f}=r.completion;if(r.completion.insertTextRules&4||(f=hm.escape(f)),this.model.cancel(),n.insert(f,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(r.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),r.completion.command)if(r.completion.command.id===eD.id)this.model.trigger({auto:!0,retrigger:!0});else{const g=new pi;a.push(this._commandService.executeCommand(r.completion.command.id,...r.completion.command.arguments?[...r.completion.command.arguments]:[]).catch(p=>{r.completion.extensionId?kn(p):Pe(p)}).finally(()=>{h=g.elapsed()}))}t&4&&this._alternatives.value.set(e,g=>{for(l.cancel();i.canUndo();){o!==i.getAlternativeVersionId()&&i.undo(),this._insertSuggestion(g,3|(t&8?8:0));break}}),this._alertCompletionItem(r),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(r,i,d,h,u,e.index,e.model.items),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,n,i,o,r,a){var u;if(Math.floor(Math.random()*100)===0)return;const l=new Map;for(let f=0;f<Math.min(30,a.length);f++){const g=a[f].textLabel;l.has(g)?l.get(g).push(f):l.set(g,[f])}const c=l.get(e.textLabel),h=c&&c.length>1?c[0]:-1;this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:((u=e.extensionId)==null?void 0:u.value)??"unknown",providerId:e.provider._debugDisplayName??"unknown",kind:e.completion.kind,basenameHash:pT(xr(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:Yde(t.uri),resolveInfo:e.provider.resolveCompletionItem?n?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:i,additionalEditsAsync:o,index:r,firstIndex:h})}getOverwriteInfo(e,t){gt(this.editor.hasModel());let n=this.editor.getOption(119).insertMode==="replace";t&&(n=!n);const i=e.position.column-e.editStart.column,o=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,r=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:i+r,overwriteAfter:o+a}}_alertCompletionItem(e){if(cs(e.completion.additionalTextEdits)){const t=m("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);Es(t)}}triggerSuggest(e,t,n){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:n?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},i=o=>{if(o.completion.insertTextRules&4||o.completion.additionalTextEdits)return!0;const r=this.editor.getPosition(),a=o.editStart.column,l=r.column;return l-a!==o.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:r.lineNumber,startColumn:a,endLineNumber:r.lineNumber,endColumn:l})!==o.completion.insertText};se.once(this.model.onDidTrigger)(o=>{const r=[];se.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{Mt(r),n()},void 0,r),this.model.onDidSuggest(({completionModel:a})=>{if(Mt(r),a.items.length===0){n();return}const l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),c=a.items[l];if(!i(c)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:c,model:a},7)},void 0,r)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const n=this.widget.value.getFocusedItem();let i=0;e&&(i|=4),t&&(i|=8),this._insertSuggestion(n,i)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}},k4=Dg,Dg.ID="editor.contrib.suggestController",Dg);Yr=k4=fEe([mp(1,VE),mp(2,Wt),mp(3,Ie),mp(4,Ce),mp(5,Hi),mp(6,Zi)],Yr);class mEe{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}const EI=class EI extends he{constructor(){super({id:EI.id,label:m("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:K.and(I.writable,I.hasCompletionItemProvider,je.Visible.toNegated()),kbOpts:{kbExpr:I.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){const i=Yr.get(t);if(!i)return;let o;n&&typeof n=="object"&&n.auto===!0&&(o=!0),i.triggerSuggest(void 0,o,void 0)}};EI.id="editor.action.triggerSuggest";let eD=EI;dt(Yr.ID,Yr,2);Q(eD);const tr=190,Ps=Zn.bindToContribution(Yr.get);oe(new Ps({id:"acceptSelectedSuggestion",precondition:K.and(je.Visible,je.HasFocusedSuggestion),handler(s){s.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:K.and(je.Visible,I.textInputFocus),weight:tr},{primary:3,kbExpr:K.and(je.Visible,I.textInputFocus,je.AcceptSuggestionsOnEnter,je.MakesTextEdit),weight:tr}],menuOpts:[{menuId:Oh,title:m("accept.insert","Insert"),group:"left",order:1,when:je.HasInsertAndReplaceRange.toNegated()},{menuId:Oh,title:m("accept.insert","Insert"),group:"left",order:1,when:K.and(je.HasInsertAndReplaceRange,je.InsertMode.isEqualTo("insert"))},{menuId:Oh,title:m("accept.replace","Replace"),group:"left",order:1,when:K.and(je.HasInsertAndReplaceRange,je.InsertMode.isEqualTo("replace"))}]}));oe(new Ps({id:"acceptAlternativeSelectedSuggestion",precondition:K.and(je.Visible,I.textInputFocus,je.HasFocusedSuggestion),kbOpts:{weight:tr,kbExpr:I.textInputFocus,primary:1027,secondary:[1026]},handler(s){s.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:Oh,group:"left",order:2,when:K.and(je.HasInsertAndReplaceRange,je.InsertMode.isEqualTo("insert")),title:m("accept.replace","Replace")},{menuId:Oh,group:"left",order:2,when:K.and(je.HasInsertAndReplaceRange,je.InsertMode.isEqualTo("replace")),title:m("accept.insert","Insert")}]}));rt.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");oe(new Ps({id:"hideSuggestWidget",precondition:je.Visible,handler:s=>s.cancelSuggestWidget(),kbOpts:{weight:tr,kbExpr:I.textInputFocus,primary:9,secondary:[1033]}}));oe(new Ps({id:"selectNextSuggestion",precondition:K.and(je.Visible,K.or(je.MultipleSuggestions,je.HasFocusedSuggestion.negate())),handler:s=>s.selectNextSuggestion(),kbOpts:{weight:tr,kbExpr:I.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));oe(new Ps({id:"selectNextPageSuggestion",precondition:K.and(je.Visible,K.or(je.MultipleSuggestions,je.HasFocusedSuggestion.negate())),handler:s=>s.selectNextPageSuggestion(),kbOpts:{weight:tr,kbExpr:I.textInputFocus,primary:12,secondary:[2060]}}));oe(new Ps({id:"selectLastSuggestion",precondition:K.and(je.Visible,K.or(je.MultipleSuggestions,je.HasFocusedSuggestion.negate())),handler:s=>s.selectLastSuggestion()}));oe(new Ps({id:"selectPrevSuggestion",precondition:K.and(je.Visible,K.or(je.MultipleSuggestions,je.HasFocusedSuggestion.negate())),handler:s=>s.selectPrevSuggestion(),kbOpts:{weight:tr,kbExpr:I.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));oe(new Ps({id:"selectPrevPageSuggestion",precondition:K.and(je.Visible,K.or(je.MultipleSuggestions,je.HasFocusedSuggestion.negate())),handler:s=>s.selectPrevPageSuggestion(),kbOpts:{weight:tr,kbExpr:I.textInputFocus,primary:11,secondary:[2059]}}));oe(new Ps({id:"selectFirstSuggestion",precondition:K.and(je.Visible,K.or(je.MultipleSuggestions,je.HasFocusedSuggestion.negate())),handler:s=>s.selectFirstSuggestion()}));oe(new Ps({id:"focusSuggestion",precondition:K.and(je.Visible,je.HasFocusedSuggestion.negate()),handler:s=>s.focusSuggestion(),kbOpts:{weight:tr,kbExpr:I.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}}));oe(new Ps({id:"focusAndAcceptSuggestion",precondition:K.and(je.Visible,je.HasFocusedSuggestion.negate()),handler:s=>{s.focusSuggestion(),s.acceptSelectedSuggestion(!0,!1)}}));oe(new Ps({id:"toggleSuggestionDetails",precondition:K.and(je.Visible,je.HasFocusedSuggestion),handler:s=>s.toggleSuggestionDetails(),kbOpts:{weight:tr,kbExpr:I.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:Oh,group:"right",order:1,when:K.and(je.DetailsVisible,je.CanResolve),title:m("detail.more","Show Less")},{menuId:Oh,group:"right",order:1,when:K.and(je.DetailsVisible.toNegated(),je.CanResolve),title:m("detail.less","Show More")}]}));oe(new Ps({id:"toggleExplainMode",precondition:je.Visible,handler:s=>s.toggleExplainMode(),kbOpts:{weight:100,primary:2138}}));oe(new Ps({id:"toggleSuggestionFocus",precondition:je.Visible,handler:s=>s.toggleSuggestionFocus(),kbOpts:{weight:tr,kbExpr:I.textInputFocus,primary:2570,mac:{primary:778}}}));oe(new Ps({id:"insertBestCompletion",precondition:K.and(I.textInputFocus,K.equals("config.editor.tabCompletion","on"),Yx.AtEnd,je.Visible.toNegated(),Wb.OtherSuggestions.toNegated(),Ns.InSnippetMode.toNegated()),handler:(s,e)=>{s.triggerSuggestAndAcceptBest(fi(e)?{fallback:"tab",...e}:{fallback:"tab"})},kbOpts:{weight:tr,primary:2}}));oe(new Ps({id:"insertNextSuggestion",precondition:K.and(I.textInputFocus,K.equals("config.editor.tabCompletion","on"),Wb.OtherSuggestions,je.Visible.toNegated(),Ns.InSnippetMode.toNegated()),handler:s=>s.acceptNextSuggestion(),kbOpts:{weight:tr,kbExpr:I.textInputFocus,primary:2}}));oe(new Ps({id:"insertPrevSuggestion",precondition:K.and(I.textInputFocus,K.equals("config.editor.tabCompletion","on"),Wb.OtherSuggestions,je.Visible.toNegated(),Ns.InSnippetMode.toNegated()),handler:s=>s.acceptPrevSuggestion(),kbOpts:{weight:tr,kbExpr:I.textInputFocus,primary:1026}}));Q(class extends he{constructor(){super({id:"editor.action.resetSuggestSize",label:m("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(s,e){var t;(t=Yr.get(e))==null||t.resetWidgetSize()}});class pEe extends F{get selectedItem(){return this._currentSuggestItemInfo}constructor(e,t,n){super(),this.editor=e,this.suggestControllerPreselector=t,this.onWillAccept=n,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._onDidSelectedItemChange=this._register(new O),this.onDidSelectedItemChange=this._onDidSelectedItemChange.event,this._register(e.onKeyDown(o=>{o.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(e.onKeyUp(o=>{o.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const i=Yr.get(this.editor);if(i){this._register(i.registerSelector({priority:100,select:(a,l,c)=>{const d=this.editor.getModel();if(!d)return-1;const h=this.suggestControllerPreselector(),u=h?Zf(h,d):void 0;if(!u)return-1;const f=A.lift(l),g=c.map((_,b)=>{const v=tw.fromSuggestion(i,d,f,_,this.isShiftKeyPressed),C=Zf(v.toSingleTextEdit(),d),w=ZQ(u,C);return{index:b,valid:w,prefixLength:C.text.length,suggestItem:_}}).filter(_=>_&&_.valid&&_.prefixLength>0),p=i9(g,ks(_=>_.prefixLength,Qr));return p?p.index:-1}}));let o=!1;const r=()=>{o||(o=!0,this._register(i.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(i.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(i.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(se.once(i.model.onDidTrigger)(a=>{r()})),this._register(i.onWillInsertSuggestItem(a=>{const l=this.editor.getPosition(),c=this.editor.getModel();if(!l||!c)return;const d=tw.fromSuggestion(i,c,l,a.item,this.isShiftKeyPressed);this.onWillAccept(d)}))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();(this._isActive!==e||!_Ee(this._currentSuggestItemInfo,t))&&(this._isActive=e,this._currentSuggestItemInfo=t,this._onDidSelectedItemChange.fire())}getSuggestItemInfo(){const e=Yr.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem(),n=this.editor.getPosition(),i=this.editor.getModel();if(!(!t||!n||!i))return tw.fromSuggestion(e,i,n,t.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){const e=Yr.get(this.editor);e==null||e.stopForceRenderingAbove()}forceRenderingAbove(){const e=Yr.get(this.editor);e==null||e.forceRenderingAbove()}}class tw{static fromSuggestion(e,t,n,i,o){let{insertText:r}=i.completion,a=!1;if(i.completion.insertTextRules&4){const c=new hm().parse(r);c.children.length<100&&Zx.adjustWhitespace(t,n,!0,c),r=c.toString(),a=!0}const l=e.getOverwriteInfo(i,o);return new tw(L.fromPositions(n.delta(0,-l.overwriteBefore),n.delta(0,Math.max(l.overwriteAfter,0))),r,i.completion.kind,a)}constructor(e,t,n,i){this.range=e,this.insertText=t,this.completionItemKind=n,this.isSnippetText=i}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new Uj(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new ql(this.range,this.insertText)}}function _Ee(s,e){return s===e?!0:!s||!e?!1:s.equals(e)}var bEe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_c=function(s,e){return function(t,n){e(t,n,s)}},L4,Ig;let Ir=(Ig=class extends F{static get(e){return e.getContribution(L4.ID)}constructor(e,t,n,i,o,r,a,l,c,d){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=n,this._configurationService=i,this._commandService=o,this._debounceService=r,this._languageFeaturesService=a,this._accessibilitySignalService=l,this._keybindingService=c,this._accessibilityService=d,this._editorObs=go(this.editor),this._positions=_e(this,u=>{var f;return((f=this._editorObs.selections.read(u))==null?void 0:f.map(g=>g.getEndPosition()))??[new A(1,1)]}),this._suggestWidgetAdaptor=this._register(new pEe(this.editor,()=>{var u,f;return this._editorObs.forceUpdate(),(f=(u=this.model.get())==null?void 0:u.selectedInlineCompletion.get())==null?void 0:f.toSingleTextEdit(void 0)},u=>this._editorObs.forceUpdate(f=>{var g;(g=this.model.get())==null||g.handleSuggestAccepted(u)}))),this._suggestWidgetSelectedItem=kt(this,u=>this._suggestWidgetAdaptor.onDidSelectedItemChange(()=>{this._editorObs.forceUpdate(f=>u(void 0))}),()=>this._suggestWidgetAdaptor.selectedItem),this._enabledInConfig=kt(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).enabled),this._isScreenReaderEnabled=kt(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this._editorDictationInProgress=kt(this,this._contextKeyService.onDidChangeContext,()=>this._contextKeyService.getContext(this.editor.getDomNode()).getValue("editorDictation.inProgress")===!0),this._enabled=_e(this,u=>this._enabledInConfig.read(u)&&(!this._isScreenReaderEnabled.read(u)||!this._editorDictationInProgress.read(u))),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this.model=os(this,u=>{if(this._editorObs.isReadonly.read(u))return;const f=this._editorObs.model.read(u);return f?this._instantiationService.createInstance(m4,f,this._suggestWidgetSelectedItem,this._editorObs.versionId,this._positions,this._debounceValue,kt(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).preview),kt(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).previewMode),kt(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).mode),this._enabled):void 0}).recomputeInitiallyAndOnChange(this._store),this._ghostTexts=_e(this,u=>{const f=this.model.read(u);return(f==null?void 0:f.ghostTexts.read(u))??[]}),this._stablizedGhostTexts=vEe(this._ghostTexts,this._store),this._ghostTextWidgets=Uue(this,this._stablizedGhostTexts,(u,f)=>f.add(this._instantiationService.createInstance(f4,this.editor,{ghostText:u,minReservedLineCount:br(0),targetTextModel:this.model.map(g=>g==null?void 0:g.textModel)}))).recomputeInitiallyAndOnChange(this._store),this._playAccessibilitySignal=ov(this),this._fontFamily=kt(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).fontFamily),this._register(new wo(this._contextKeyService,this.model)),this._register(JO(this._editorObs.onDidType,(u,f)=>{var g;this._enabled.get()&&((g=this.model.get())==null||g.trigger())})),this._register(this._commandService.onDidExecuteCommand(u=>{new Set([O_.Tab.id,O_.DeleteLeft.id,O_.DeleteRight.id,sQ,"acceptSelectedSuggestion"]).has(u.commandId)&&e.hasTextFocus()&&this._enabled.get()&&this._editorObs.forceUpdate(g=>{var p;(p=this.model.get())==null||p.trigger(g)})})),this._register(JO(this._editorObs.selections,(u,f)=>{var g;f.some(p=>p.reason===3||p.source==="api")&&((g=this.model.get())==null||g.stop())})),this._register(this.editor.onDidBlurEditorWidget(()=>{this._contextKeyService.getContextKeyValue("accessibleViewIsShown")||this._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||Rb.dropDownVisible||rn(u=>{var f;(f=this.model.get())==null||f.stop(u)})})),this._register(Ae(u=>{var g;const f=(g=this.model.read(u))==null?void 0:g.state.read(u);f!=null&&f.suggestItem?f.primaryGhostText.lineCount>=2&&this._suggestWidgetAdaptor.forceRenderingAbove():this._suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register(ve(()=>{this._suggestWidgetAdaptor.stopForceRenderingAbove()}));const h=N0(this,(u,f)=>{var _;const g=this.model.read(u),p=g==null?void 0:g.state.read(u);return this._suggestWidgetSelectedItem.get()?f:(_=p==null?void 0:p.inlineCompletion)==null?void 0:_.semanticId});this._register(m0e(_e(u=>(this._playAccessibilitySignal.read(u),h.read(u),{})),async(u,f,g)=>{const p=this.model.get(),_=p==null?void 0:p.state.get();if(!_||!p)return;const b=p.textModel.getLineContent(_.primaryGhostText.lineNumber);await _d(50,R2(g)),await vG(this._suggestWidgetSelectedItem,ls,()=>!1,R2(g)),await this._accessibilitySignalService.playSignal(Fo.inlineSuggestion),this.editor.getOption(8)&&this._provideScreenReaderUpdate(_.primaryGhostText.renderForScreenReader(b))})),this._register(new RF(this.editor,this.model,this._instantiationService)),this._register(cTe(_e(u=>{const f=this._fontFamily.read(u);return f===""||f==="default"?"":`
.monaco-editor .ghost-text-decoration,
.monaco-editor .ghost-text-decoration-preview,
.monaco-editor .ghost-text {
	font-family: ${f};
}`}))),this._register(this._configurationService.onDidChangeConfiguration(u=>{u.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}playAccessibilitySignal(e){this._playAccessibilitySignal.trigger(e)}_provideScreenReaderUpdate(e){const t=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),n=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let i;!t&&n&&this.editor.getOption(150)&&(i=m("showAccessibleViewHint","Inspect this in the accessible view ({0})",n.getAriaLabel())),Es(i?e+", "+i:e)}shouldShowHoverAt(e){var n;const t=(n=this.model.get())==null?void 0:n.primaryGhostText.get();return t?t.parts.some(i=>e.containsPosition(new A(t.lineNumber,i.column))):!1}shouldShowHoverAtViewZone(e){var t;return((t=this._ghostTextWidgets.get()[0])==null?void 0:t.ownsViewZone(e))??!1}},L4=Ig,Ig.ID="editor.contrib.inlineCompletionsController",Ig);Ir=L4=bEe([_c(1,Ce),_c(2,Ie),_c(3,Ze),_c(4,Wt),_c(5,ir),_c(6,ue),_c(7,Iu),_c(8,wt),_c(9,xo)],Ir);function vEe(s,e){const t=Ge("result",[]),n=[];return e.add(Ae(i=>{const o=s.read(i);rn(r=>{if(o.length!==n.length){n.length=o.length;for(let a=0;a<n.length;a++)n[a]||(n[a]=Ge("item",o[a]));t.set([...n],r)}n.forEach((a,l)=>a.set(o[l],r))})})),t}const NI=class NI extends he{constructor(){super({id:NI.ID,label:m("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:K.and(I.writable,wo.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(e,t){var i;const n=Ir.get(t);(i=n==null?void 0:n.model.get())==null||i.next()}};NI.ID=rQ;let x4=NI;const RI=class RI extends he{constructor(){super({id:RI.ID,label:m("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:K.and(I.writable,wo.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(e,t){var i;const n=Ir.get(t);(i=n==null?void 0:n.model.get())==null||i.previous()}};RI.ID=oQ;let D4=RI;class CEe extends he{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:m("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:I.writable})}async run(e,t){const n=Ir.get(t);await pG(async i=>{var o;await((o=n==null?void 0:n.model.get())==null?void 0:o.triggerExplicitly(i)),n==null||n.playAccessibilitySignal(i)})}}class wEe extends he{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:m("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:K.and(I.writable,wo.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:K.and(I.writable,wo.inlineSuggestionVisible)},menuOpts:[{menuId:ge.InlineSuggestionToolbar,title:m("acceptWord","Accept Word"),group:"primary",order:2}]})}async run(e,t){var i;const n=Ir.get(t);await((i=n==null?void 0:n.model.get())==null?void 0:i.acceptNextWord(n.editor))}}class yEe extends he{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:m("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:K.and(I.writable,wo.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:ge.InlineSuggestionToolbar,title:m("acceptLine","Accept Line"),group:"secondary",order:2}]})}async run(e,t){var i;const n=Ir.get(t);await((i=n==null?void 0:n.model.get())==null?void 0:i.acceptNextLine(n.editor))}}class SEe extends he{constructor(){super({id:sQ,label:m("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:wo.inlineSuggestionVisible,menuOpts:[{menuId:ge.InlineSuggestionToolbar,title:m("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:K.and(wo.inlineSuggestionVisible,I.tabMovesFocus.toNegated(),wo.inlineSuggestionHasIndentationLessThanTabSize,je.Visible.toNegated(),I.hoverFocused.toNegated())}})}async run(e,t){var i;const n=Ir.get(t);n&&((i=n.model.get())==null||i.accept(n.editor),n.editor.focus())}}const MI=class MI extends he{constructor(){super({id:MI.ID,label:m("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:wo.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}async run(e,t){const n=Ir.get(t);rn(i=>{var o;(o=n==null?void 0:n.model.get())==null||o.stop(i)})}};MI.ID="editor.action.inlineSuggest.hide";let I4=MI;const AI=class AI extends Rs{constructor(){super({id:AI.ID,title:m("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:ge.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:K.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(e,t){const n=e.get(Ze),o=n.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";n.updateValue("editor.inlineSuggest.showToolbar",o)}};AI.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";let T4=AI;var kEe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Zv=function(s,e){return function(t,n){e(t,n,s)}};class LEe{constructor(e,t,n){this.owner=e,this.range=t,this.controller=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let E4=class{constructor(e,t,n,i,o,r){this._editor=e,this._languageService=t,this._openerService=n,this.accessibilityService=i,this._instantiationService=o,this._telemetryService=r,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=Ir.get(this._editor);if(!t)return null;const n=e.target;if(n.type===8){const i=n.detail;if(t.shouldShowHoverAtViewZone(i.viewZoneId))return new sk(1e3,this,L.fromPositions(this._editor.getModel().validatePosition(i.positionBefore||i.position)),e.event.posx,e.event.posy,!1)}return n.type===7&&t.shouldShowHoverAt(n.range)?new sk(1e3,this,n.range,e.event.posx,e.event.posy,!1):n.type===6&&n.detail.mightBeForeignElement&&t.shouldShowHoverAt(n.range)?new sk(1e3,this,n.range,e.event.posx,e.event.posy,!1):null}computeSync(e,t){if(this._editor.getOption(62).showToolbar!=="onHover")return[];const n=Ir.get(this._editor);return n&&n.shouldShowHoverAt(e.range)?[new LEe(this,e.range,n)]:[]}renderHoverParts(e,t){const n=new q,i=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&n.add(this.renderScreenReaderText(e,i));const o=i.controller.model.get(),r=this._instantiationService.createInstance(Rb,this._editor,!1,br(null),o.selectedInlineCompletionIndex,o.inlineCompletionsCount,o.activeCommands),a=r.getDomNode();e.fragment.appendChild(a),o.triggerExplicitly(),n.add(r);const l={hoverPart:i,hoverElement:a,dispose(){n.dispose()}};return new mm([l])}renderScreenReaderText(e,t){const n=new q,i=te,o=i("div.hover-row.markdown-hover"),r=Y(o,i("div.hover-contents",{"aria-live":"assertive"})),a=n.add(new Cd({editor:this._editor},this._languageService,this._openerService)),l=c=>{n.add(a.onDidRenderAsync(()=>{r.className="hover-contents code-hover-contents",e.onContentsChanged()}));const d=m("inlineSuggestionFollows","Suggestion:"),h=n.add(a.render(new ji().appendText(d).appendCodeblock("text",c)));r.replaceChildren(h.element)};return n.add(Ae(c=>{var h;const d=(h=t.controller.model.read(c))==null?void 0:h.primaryGhostText.read(c);if(d){const u=this._editor.getModel().getLineContent(d.lineNumber);l(d.renderForScreenReader(u))}else Di(r)})),e.fragment.appendChild(o),n}};E4=kEe([Zv(1,tn),Zv(2,eo),Zv(3,xo),Zv(4,Ce),Zv(5,Zi)],E4);class xEe{}const zE=new class{constructor(){this._implementations=[]}register(e){return this._implementations.push(e),{dispose:()=>{const t=this._implementations.indexOf(e);t!==-1&&this._implementations.splice(t,1)}}}getImplementations(){return this._implementations}};dt(Ir.ID,Ir,3);Q(CEe);Q(x4);Q(D4);Q(wEe);Q(yEe);Q(SEe);Q(I4);Ot(T4);Bm.register(E4);zE.register(new xEe);var DEe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},o2=function(s,e){return function(t,n){e(t,n,s)}},gC,Zh;let Z1=(Zh=class{constructor(e,t,n,i){this.textModelResolverService=t,this.languageService=n,this.languageFeaturesService=i,this.toUnhook=new q,this.toUnhookForKeyboard=new q,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=e,this.linkDecorations=this.editor.createDecorationsCollection();const o=new AE(e);this.toUnhook.add(o),this.toUnhook.add(o.onMouseMoveOrRelevantKeyDown(([r,a])=>{this.startFindDefinitionFromMouse(r,a??void 0)})),this.toUnhook.add(o.onExecute(r=>{this.isEnabled(r)&&this.gotoDefinition(r.target.position,r.hasSideBySideModifier).catch(a=>{Pe(a)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(o.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(e){return e.getContribution(gC.ID)}async startFindDefinitionFromCursor(e){await this.startFindDefinition(e),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(t=>{t&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))}startFindDefinitionFromMouse(e,t){if(e.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(e,t)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const n=e.target.position;this.startFindDefinition(n)}async startFindDefinition(e){var r;this.toUnhookForKeyboard.clear();const t=e?(r=this.editor.getModel())==null?void 0:r.getWordAtPosition(e):null;if(!t){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===t.startColumn&&this.currentWordAtPosition.endColumn===t.endColumn&&this.currentWordAtPosition.word===t.word)return;this.currentWordAtPosition=t;const n=new $Y(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=si(a=>this.findDefinition(e,a));let i;try{i=await this.previousPromise}catch(a){Pe(a);return}if(!i||!i.length||!n.validate(this.editor)){this.removeLinkDecorations();return}const o=i[0].originSelectionRange?L.lift(i[0].originSelectionRange):new L(e.lineNumber,t.startColumn,e.lineNumber,t.endColumn);if(i.length>1){let a=o;for(const{originSelectionRange:l}of i)l&&(a=L.plusRange(a,l));this.addDecoration(a,new ji().appendText(m("multipleResults","Click to show {0} definitions.",i.length)))}else{const a=i[0];if(!a.uri)return;this.textModelResolverService.createModelReference(a.uri).then(l=>{if(!l.object||!l.object.textEditorModel){l.dispose();return}const{object:{textEditorModel:c}}=l,{startLineNumber:d}=a.range;if(d<1||d>c.getLineCount()){l.dispose();return}const h=this.getPreviewValue(c,d,a),u=this.languageService.guessLanguageIdByFilepathOrFirstLine(c.uri);this.addDecoration(o,h?new ji().appendCodeblock(u||"",h):void 0),l.dispose()})}}getPreviewValue(e,t,n){let i=n.range;return i.endLineNumber-i.startLineNumber>=gC.MAX_SOURCE_PREVIEW_LINES&&(i=this.getPreviewRangeBasedOnIndentation(e,t)),this.stripIndentationFromPreviewRange(e,t,i)}stripIndentationFromPreviewRange(e,t,n){let o=e.getLineFirstNonWhitespaceColumn(t);for(let a=t+1;a<n.endLineNumber;a++){const l=e.getLineFirstNonWhitespaceColumn(a);o=Math.min(o,l)}return e.getValueInRange(n).replace(new RegExp(`^\\s{${o-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(e,t){const n=e.getLineFirstNonWhitespaceColumn(t),i=Math.min(e.getLineCount(),t+gC.MAX_SOURCE_PREVIEW_LINES);let o=t+1;for(;o<i;o++){const r=e.getLineFirstNonWhitespaceColumn(o);if(n===r)break}return new L(t,1,o+1,1)}addDecoration(e,t){const n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([n])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(e,t){var n;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&e.target.type===6&&!(((n=e.target.detail.injectedText)==null?void 0:n.options)instanceof gu)&&(e.hasTriggerModifier||(t?t.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(e,t){const n=this.editor.getModel();return n?G0(this.languageFeaturesService.definitionProvider,n,e,!1,t):Promise.resolve(null)}gotoDefinition(e,t){return this.editor.setPosition(e),this.editor.invokeWithinContext(n=>{const i=!t&&this.editor.getOption(89)&&!this.isInPeekEditor(n);return new Y0({openToSide:t,openInPeek:i,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(n)})}isInPeekEditor(e){const t=e.get(Ie);return Ys.inPeekEditor.getValue(t)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}},gC=Zh,Zh.ID="editor.contrib.gotodefinitionatposition",Zh.MAX_SOURCE_PREVIEW_LINES=8,Zh);Z1=gC=DEe([o2(1,Qs),o2(2,tn),o2(3,ue)],Z1);dt(Z1.ID,Z1,2);var XQ=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},tD=function(s,e){return function(t,n){e(t,n,s)}};class U${constructor(e,t,n){this.marker=e,this.index=t,this.total=n}}let N4=class{constructor(e,t,n){this._markerService=t,this._configService=n,this._onDidChange=new O,this.onDidChange=this._onDidChange.event,this._dispoables=new q,this._markers=[],this._nextIdx=-1,Se.isUri(e)?this._resourceFilter=a=>a.toString()===e.toString():e&&(this._resourceFilter=e);const i=this._configService.getValue("problems.sortOrder"),o=(a,l)=>{let c=Ww(a.resource.toString(),l.resource.toString());return c===0&&(i==="position"?c=L.compareRangesUsingStarts(a,l)||_n.compare(a.severity,l.severity):c=_n.compare(a.severity,l.severity)||L.compareRangesUsingStarts(a,l)),c},r=()=>{this._markers=this._markerService.read({resource:Se.isUri(e)?e:void 0,severities:_n.Error|_n.Warning|_n.Info}),typeof e=="function"&&(this._markers=this._markers.filter(a=>this._resourceFilter(a.resource))),this._markers.sort(o)};r(),this._dispoables.add(t.onMarkerChanged(a=>{(!this._resourceFilter||a.some(l=>this._resourceFilter(l)))&&(r(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(e){return!this._resourceFilter&&!e?!0:!this._resourceFilter||!e?!1:this._resourceFilter(e)}get selected(){const e=this._markers[this._nextIdx];return e&&new U$(e,this._nextIdx+1,this._markers.length)}_initIdx(e,t,n){let i=!1,o=this._markers.findIndex(r=>r.resource.toString()===e.uri.toString());o<0&&(o=Tw(this._markers,{resource:e.uri},(r,a)=>Ww(r.resource.toString(),a.resource.toString())),o<0&&(o=~o));for(let r=o;r<this._markers.length;r++){let a=L.lift(this._markers[r]);if(a.isEmpty()){const l=e.getWordAtPosition(a.getStartPosition());l&&(a=new L(a.startLineNumber,l.startColumn,a.startLineNumber,l.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=r,i=!0;break}if(this._markers[r].resource.toString()!==e.uri.toString())break}i||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(e,t,n){if(this._markers.length===0)return!1;const i=this._nextIdx;return this._nextIdx===-1?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),i!==this._nextIdx}find(e,t){let n=this._markers.findIndex(i=>i.resource.toString()===e.toString());if(!(n<0)){for(;n<this._markers.length;n++)if(L.containsPosition(this._markers[n],t))return new U$(this._markers[n],n+1,this._markers.length)}}};N4=XQ([tD(1,rc),tD(2,Ze)],N4);const QQ=tt("IMarkerNavigationService");let R4=class{constructor(e,t){this._markerService=e,this._configService=t,this._provider=new vs}getMarkerList(e){for(const t of this._provider){const n=t.getMarkerList(e);if(n)return n}return new N4(e,this._markerService,this._configService)}};R4=XQ([tD(0,rc),tD(1,Ze)],R4);st(QQ,R4,1);var M4;(function(s){function e(t){switch(t){case Tn.Ignore:return"severity-ignore "+De.asClassName(J.info);case Tn.Info:return De.asClassName(J.info);case Tn.Warning:return De.asClassName(J.warning);case Tn.Error:return De.asClassName(J.error);default:return""}}s.className=e})(M4||(M4={}));var IEe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pp=function(s,e){return function(t,n){e(t,n,s)}},A4;class TEe{constructor(e,t,n,i,o){this._openerService=i,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new q,this._editor=t;const r=document.createElement("div");r.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),r.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),r.appendChild(this._relatedBlock),this._disposables.add(hn(this._relatedBlock,"click",a=>{a.preventDefault();const l=this._relatedDiagnostics.get(a.target);l&&n(l)})),this._scrollable=new zK(r,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),e.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(a=>{r.style.left=`-${a.scrollLeft}px`,r.style.top=`-${a.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){Mt(this._disposables)}update(e){const{source:t,message:n,relatedInformation:i,code:o}=e;let r=((t==null?void 0:t.length)||0)+2;o&&(typeof o=="string"?r+=o.length:r+=o.value.length);const a=tc(n);this._lines=a.length,this._longestLineLength=0;for(const u of a)this._longestLineLength=Math.max(u.length+r,this._longestLineLength);xi(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);let l=this._messageBlock;for(const u of a)l=document.createElement("div"),l.innerText=u,u===""&&(l.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(l);if(t||o){const u=document.createElement("span");if(u.classList.add("details"),l.appendChild(u),t){const f=document.createElement("span");f.innerText=t,f.classList.add("source"),u.appendChild(f)}if(o)if(typeof o=="string"){const f=document.createElement("span");f.innerText=`(${o})`,f.classList.add("code"),u.appendChild(f)}else{this._codeLink=te("a.code-link"),this._codeLink.setAttribute("href",`${o.target.toString()}`),this._codeLink.onclick=g=>{this._openerService.open(o.target,{allowCommands:!0}),g.preventDefault(),g.stopPropagation()};const f=Y(this._codeLink,te("span"));f.innerText=o.value,u.appendChild(this._codeLink)}}if(xi(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),cs(i)){const u=this._relatedBlock.appendChild(document.createElement("div"));u.style.paddingTop=`${Math.floor(this._editor.getOption(67)*.66)}px`,this._lines+=1;for(const f of i){const g=document.createElement("div"),p=document.createElement("a");p.classList.add("filename"),p.innerText=`${this._labelService.getUriBasenameLabel(f.resource)}(${f.startLineNumber}, ${f.startColumn}): `,p.title=this._labelService.getUriLabel(f.resource),this._relatedDiagnostics.set(p,f);const _=document.createElement("span");_.innerText=f.message,g.appendChild(p),g.appendChild(_),this._lines+=1,u.appendChild(g)}}const c=this._editor.getOption(50),d=Math.ceil(c.typicalFullwidthCharacterWidth*this._longestLineLength*.75),h=c.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:d,scrollHeight:h})}layout(e,t){this._scrollable.getDomNode().style.height=`${e}px`,this._scrollable.getDomNode().style.width=`${t}px`,this._scrollable.setScrollDimensions({width:t,height:e})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(e){let t="";switch(e.severity){case _n.Error:t=m("Error","Error");break;case _n.Warning:t=m("Warning","Warning");break;case _n.Info:t=m("Info","Info");break;case _n.Hint:t=m("Hint","Hint");break}let n=m("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn);const i=this._editor.getModel();return i&&e.startLineNumber<=i.getLineCount()&&e.startLineNumber>=1&&(n=`${i.getLineContent(e.startLineNumber)}, ${n}`),n}}var Tg;let Y1=(Tg=class extends Rx{constructor(e,t,n,i,o,r,a){super(e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},o),this._themeService=t,this._openerService=n,this._menuService=i,this._contextKeyService=r,this._labelService=a,this._callOnDispose=new q,this._onDidSelectRelatedInformation=new O,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=_n.Warning,this._backgroundColor=Z.white,this._applyTheme(t.getColorTheme()),this._callOnDispose.add(t.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(e){this._backgroundColor=e.getColor(MEe);let t=P4,n=EEe;this._severity===_n.Warning?(t=lk,n=NEe):this._severity===_n.Info&&(t=O4,n=REe);const i=e.getColor(t),o=e.getColor(n);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:o,primaryHeadingColor:e.getColor(pQ),secondaryHeadingColor:e.getColor(_Q)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(e){super._fillHead(e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(i=>this.editor.focus()));const t=[],n=this._menuService.getMenuActions(A4.TitleMenu,this._contextKeyService);iE(n,t),this._actionbarWidget.push(t,{label:!1,icon:!0,index:0})}_fillTitleIcon(e){this._icon=Y(e,te(""))}_fillBody(e){this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new TEe(this._container,this.editor,t=>this._onDidSelectRelatedInformation.fire(t),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(e,t,n){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());const i=L.lift(e),o=this.editor.getPosition(),r=o&&i.containsPosition(o)?o:i.getStartPosition();super.show(r,this.computeRequiredHeight());const a=this.editor.getModel();if(a){const l=n>1?m("problems","{0} of {1} problems",t,n):m("change","{0} of {1} problem",t,n);this.setTitle(xr(a.uri),l)}this._icon.className=`codicon ${M4.className(_n.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(r,0),this.editor.focus()}updateMarker(e){this._container.classList.remove("stale"),this._message.update(e)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height=`${e}px`}_onWidth(e){this._message.layout(this._heightInPixel,e)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}},A4=Tg,Tg.TitleMenu=new ge("gotoErrorTitleMenu"),Tg);Y1=A4=IEe([pp(1,Yn),pp(2,eo),pp(3,nr),pp(4,Ce),pp(5,Ie),pp(6,_b)],Y1);const j$=Zw(BT,kle),q$=Zw(vd,Yw),K$=Zw(Gl,Xw),P4=T("editorMarkerNavigationError.background",{dark:j$,light:j$,hcDark:ct,hcLight:ct},m("editorMarkerNavigationError","Editor marker navigation widget error color.")),EEe=T("editorMarkerNavigationError.headerBackground",{dark:qe(P4,.1),light:qe(P4,.1),hcDark:null,hcLight:null},m("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),lk=T("editorMarkerNavigationWarning.background",{dark:q$,light:q$,hcDark:ct,hcLight:ct},m("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),NEe=T("editorMarkerNavigationWarning.headerBackground",{dark:qe(lk,.1),light:qe(lk,.1),hcDark:"#0C141F",hcLight:qe(lk,.2)},m("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),O4=T("editorMarkerNavigationInfo.background",{dark:K$,light:K$,hcDark:ct,hcLight:ct},m("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),REe=T("editorMarkerNavigationInfo.headerBackground",{dark:qe(O4,.1),light:qe(O4,.1),hcDark:null,hcLight:null},m("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),MEe=T("editorMarkerNavigation.background",oa,m("editorMarkerNavigationBackground","Editor marker navigation widget background."));var AEe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vS=function(s,e){return function(t,n){e(t,n,s)}},mC,Eg;let bm=(Eg=class{static get(e){return e.getContribution(mC.ID)}constructor(e,t,n,i,o){this._markerNavigationService=t,this._contextKeyService=n,this._editorService=i,this._instantiationService=o,this._sessionDispoables=new q,this._editor=e,this._widgetVisible=JQ.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(e){if(this._model&&this._model.matches(e))return this._model;let t=!1;return this._model&&(t=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),t&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(Y1,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(n=>{var i,o,r;(!((i=this._model)!=null&&i.selected)||!L.containsPosition((o=this._model)==null?void 0:o.selected.marker,n.position))&&((r=this._model)==null||r.resetIndex())})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const n=this._model.find(this._editor.getModel().uri,this._widget.position);n?this._widget.updateMarker(n.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(n=>{this._editorService.openCodeEditor({resource:n.resource,options:{pinned:!0,revealIfOpened:!0,selection:L.lift(n).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(e=!0){this._cleanUp(),e&&this._editor.focus()}showAtMarker(e){if(this._editor.hasModel()){const t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new A(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}async nagivate(e,t){var n,i;if(this._editor.hasModel()){const o=this._getOrCreateModel(t?void 0:this._editor.getModel().uri);if(o.move(e,this._editor.getModel(),this._editor.getPosition()),!o.selected)return;if(o.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const r=await this._editorService.openCodeEditor({resource:o.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:o.selected.marker}},this._editor);r&&((n=mC.get(r))==null||n.close(),(i=mC.get(r))==null||i.nagivate(e,t))}else this._widget.showAtMarker(o.selected.marker,o.selected.index,o.selected.total)}}},mC=Eg,Eg.ID="editor.contrib.markerController",Eg);bm=mC=AEe([vS(1,QQ),vS(2,Ie),vS(3,mt),vS(4,Ce)],bm);class $E extends he{constructor(e,t,n){super(n),this._next=e,this._multiFile=t}async run(e,t){var n;t.hasModel()&&((n=bm.get(t))==null||n.nagivate(this._next,this._multiFile))}}const xf=class xf extends $E{constructor(){super(!0,!1,{id:xf.ID,label:xf.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:578,weight:100},menuOpts:{menuId:Y1.TitleMenu,title:xf.LABEL,icon:jt("marker-navigation-next",J.arrowDown,m("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}};xf.ID="editor.action.marker.next",xf.LABEL=m("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");let nD=xf;const Df=class Df extends $E{constructor(){super(!1,!1,{id:Df.ID,label:Df.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:1602,weight:100},menuOpts:{menuId:Y1.TitleMenu,title:Df.LABEL,icon:jt("marker-navigation-previous",J.arrowUp,m("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}};Df.ID="editor.action.marker.prev",Df.LABEL=m("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");let F4=Df;class PEe extends $E{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:m("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:66,weight:100},menuOpts:{menuId:ge.MenubarGoMenu,title:m({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}}class OEe extends $E{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:m("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:1090,weight:100},menuOpts:{menuId:ge.MenubarGoMenu,title:m({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}}dt(bm.ID,bm,4);Q(nD);Q(F4);Q(PEe);Q(OEe);const JQ=new le("markersNavigationVisible",!1),FEe=Zn.bindToContribution(bm.get);oe(new FEe({id:"closeMarkersNavigation",precondition:JQ,handler:s=>s.close(),kbOpts:{weight:150,kbExpr:I.focus,primary:9,secondary:[1033]}}));var wa;(function(s){s.NoAutoFocus="noAutoFocus",s.FocusIfVisible="focusIfVisible",s.AutoFocusImmediately="autoFocusImmediately"})(wa||(wa={}));class WEe extends he{constructor(){super({id:iQ,label:m({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse."]},"Show or Focus Hover"),metadata:{description:Ee("showOrFocusHoverDescription","Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position."),args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[wa.NoAutoFocus,wa.FocusIfVisible,wa.AutoFocusImmediately],enumDescriptions:[m("showOrFocusHover.focus.noAutoFocus","The hover will not automatically take focus."),m("showOrFocusHover.focus.focusIfVisible","The hover will take focus only if it is already visible."),m("showOrFocusHover.focus.autoFocusImmediately","The hover will automatically take focus when it appears.")],default:wa.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2087),weight:100}})}run(e,t,n){if(!t.hasModel())return;const i=hs.get(t);if(!i)return;const o=n==null?void 0:n.focus;let r=wa.FocusIfVisible;Object.values(wa).includes(o)?r=o:typeof o=="boolean"&&o&&(r=wa.AutoFocusImmediately);const a=c=>{const d=t.getPosition(),h=new L(d.lineNumber,d.column,d.lineNumber,d.column);i.showContentHover(h,1,1,c)},l=t.getOption(2)===2;i.isHoverVisible?r!==wa.NoAutoFocus?i.focus():a(l):a(l||r===wa.AutoFocusImmediately)}}class BEe extends he{constructor(){super({id:txe,label:m({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0,metadata:{description:Ee("showDefinitionPreviewHoverDescription","Show the definition preview hover in the editor.")}})}run(e,t){const n=hs.get(t);if(!n)return;const i=t.getPosition();if(!i)return;const o=new L(i.lineNumber,i.column,i.lineNumber,i.column),r=Z1.get(t);if(!r)return;r.startFindDefinitionFromCursor(i).then(()=>{n.showContentHover(o,1,1,!0)})}}class HEe extends he{constructor(){super({id:nxe,label:m({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:16,weight:100},metadata:{description:Ee("scrollUpHoverDescription","Scroll up the editor hover.")}})}run(e,t){const n=hs.get(t);n&&n.scrollUp()}}class VEe extends he{constructor(){super({id:ixe,label:m({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:18,weight:100},metadata:{description:Ee("scrollDownHoverDescription","Scroll down the editor hover.")}})}run(e,t){const n=hs.get(t);n&&n.scrollDown()}}class zEe extends he{constructor(){super({id:sxe,label:m({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:15,weight:100},metadata:{description:Ee("scrollLeftHoverDescription","Scroll left the editor hover.")}})}run(e,t){const n=hs.get(t);n&&n.scrollLeft()}}class $Ee extends he{constructor(){super({id:oxe,label:m({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:17,weight:100},metadata:{description:Ee("scrollRightHoverDescription","Scroll right the editor hover.")}})}run(e,t){const n=hs.get(t);n&&n.scrollRight()}}class UEe extends he{constructor(){super({id:rxe,label:m({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:11,secondary:[528],weight:100},metadata:{description:Ee("pageUpHoverDescription","Page up the editor hover.")}})}run(e,t){const n=hs.get(t);n&&n.pageUp()}}class jEe extends he{constructor(){super({id:axe,label:m({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:12,secondary:[530],weight:100},metadata:{description:Ee("pageDownHoverDescription","Page down the editor hover.")}})}run(e,t){const n=hs.get(t);n&&n.pageDown()}}class qEe extends he{constructor(){super({id:lxe,label:m({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:14,secondary:[2064],weight:100},metadata:{description:Ee("goToTopHoverDescription","Go to the top of the editor hover.")}})}run(e,t){const n=hs.get(t);n&&n.goToTop()}}class KEe extends he{constructor(){super({id:cxe,label:m({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:I.hoverFocused,kbOpts:{kbExpr:I.hoverFocused,primary:13,secondary:[2066],weight:100},metadata:{description:Ee("goToBottomHoverDescription","Go to the bottom of the editor hover.")}})}run(e,t){const n=hs.get(t);n&&n.goToBottom()}}class GEe extends he{constructor(){super({id:NE,label:dxe,alias:"Increase Hover Verbosity Level",precondition:I.hoverVisible})}run(e,t,n){const i=hs.get(t);if(!i)return;const o=(n==null?void 0:n.index)!==void 0?n.index:i.focusedHoverPartIndex();i.updateHoverVerbosityLevel(ho.Increase,o,n==null?void 0:n.focus)}}class ZEe extends he{constructor(){super({id:RE,label:hxe,alias:"Decrease Hover Verbosity Level",precondition:I.hoverVisible})}run(e,t,n){var r;const i=hs.get(t);if(!i)return;const o=(n==null?void 0:n.index)!==void 0?n.index:i.focusedHoverPartIndex();(r=hs.get(t))==null||r.updateHoverVerbosityLevel(ho.Decrease,o,n==null?void 0:n.focus)}}var YEe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},r2=function(s,e){return function(t,n){e(t,n,s)}};const Or=te;class XEe{constructor(e,t,n){this.owner=e,this.range=t,this.marker=n}isValidForHoverAnchor(e){return e.type===1&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const G$={type:1,filter:{include:Gt.QuickFix},triggerAction:ko.QuickFixHover};let W4=class{constructor(e,t,n,i){this._editor=e,this._markerDecorationsService=t,this._openerService=n,this._languageFeaturesService=i,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1&&!e.supportsMarkerHover)return[];const n=this._editor.getModel(),i=e.range.startLineNumber,o=n.getLineMaxColumn(i),r=[];for(const a of t){const l=a.range.startLineNumber===i?a.range.startColumn:1,c=a.range.endLineNumber===i?a.range.endColumn:o,d=this._markerDecorationsService.getMarker(n.uri,a);if(!d)continue;const h=new L(e.range.startLineNumber,l,e.range.startLineNumber,c);r.push(new XEe(this,h,d))}return r}renderHoverParts(e,t){if(!t.length)return new mm([]);const n=new q,i=[];t.forEach(r=>{const a=this._renderMarkerHover(r);e.fragment.appendChild(a.hoverElement),i.push(a)});const o=t.length===1?t[0]:t.sort((r,a)=>_n.compare(r.marker.severity,a.marker.severity))[0];return this.renderMarkerStatusbar(e,o,n),new mm(i)}_renderMarkerHover(e){const t=new q,n=Or("div.hover-row"),i=Y(n,Or("div.marker.hover-contents")),{source:o,message:r,code:a,relatedInformation:l}=e.marker;this._editor.applyFontInfo(i);const c=Y(i,Or("span"));if(c.style.whiteSpace="pre-wrap",c.innerText=r,o||a)if(a&&typeof a!="string"){const h=Or("span");if(o){const p=Y(h,Or("span"));p.innerText=o}const u=Y(h,Or("a.code-link"));u.setAttribute("href",a.target.toString()),t.add($(u,"click",p=>{this._openerService.open(a.target,{allowCommands:!0}),p.preventDefault(),p.stopPropagation()}));const f=Y(u,Or("span"));f.innerText=a.value;const g=Y(i,h);g.style.opacity="0.6",g.style.paddingLeft="6px"}else{const h=Y(i,Or("span"));h.style.opacity="0.6",h.style.paddingLeft="6px",h.innerText=o&&a?`${o}(${a})`:o||`(${a})`}if(cs(l))for(const{message:h,resource:u,startLineNumber:f,startColumn:g}of l){const p=Y(i,Or("div"));p.style.marginTop="8px";const _=Y(p,Or("a"));_.innerText=`${xr(u)}(${f}, ${g}): `,_.style.cursor="pointer",t.add($(_,"click",v=>{if(v.stopPropagation(),v.preventDefault(),this._openerService){const C={selection:{startLineNumber:f,startColumn:g}};this._openerService.open(u,{fromUserGesture:!0,editorOptions:C}).catch(Pe)}}));const b=Y(p,Or("span"));b.innerText=h,this._editor.applyFontInfo(b)}return{hoverPart:e,hoverElement:n,dispose:()=>t.dispose()}}renderMarkerStatusbar(e,t,n){if(t.marker.severity===_n.Error||t.marker.severity===_n.Warning||t.marker.severity===_n.Info){const i=bm.get(this._editor);i&&e.statusBar.addAction({label:m("view problem","View Problem"),commandId:nD.ID,run:()=>{e.hide(),i.showAtMarker(t.marker),this._editor.focus()}})}if(!this._editor.getOption(92)){const i=e.statusBar.append(Or("div"));this.recentMarkerCodeActionsInfo&&(kL.makeKey(this.recentMarkerCodeActionsInfo.marker)===kL.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(i.textContent=m("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const o=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?F.None:au(()=>i.textContent=m("checkingForQuickFixes","Checking for quick fixes..."),200,n);i.textContent||(i.textContent=" ");const r=this.getCodeActions(t.marker);n.add(ve(()=>r.cancel())),r.then(a=>{if(o.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:a.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){a.dispose(),i.textContent=m("noQuickFixes","No quick fixes available");return}i.style.display="none";let l=!1;n.add(ve(()=>{l||a.dispose()})),e.statusBar.addAction({label:m("quick fixes","Quick Fix..."),commandId:bB,run:c=>{l=!0;const d=Eb.get(this._editor),h=Sn(c);e.hide(),d==null||d.showCodeActions(G$,a,{x:h.left,y:h.top,width:h.width,height:h.height})}})},Pe)}}getCodeActions(e){return si(t=>qp(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new L(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),G$,Aa.None,t))}};W4=YEe([r2(1,U9),r2(2,eo),r2(3,ue)],W4);class QEe{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}get lane(){return this._laneOrLine}set lane(e){this._laneOrLine=e}constructor(e){this._editor=e,this._lineNumber=-1,this._laneOrLine=ia.Center}computeSync(){var o;const e=r=>({value:r}),t=this._editor.getLineDecorations(this._lineNumber),n=[],i=this._laneOrLine==="lineNo";if(!t)return n;for(const r of t){const a=((o=r.options.glyphMargin)==null?void 0:o.position)??ia.Center;if(!i&&a!==this._laneOrLine)continue;const l=i?r.options.lineNumberHoverMessage:r.options.glyphMarginHoverMessage;!l||mb(l)||n.push(...w3(l).map(e))}return n}}var JEe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Z$=function(s,e){return function(t,n){e(t,n,s)}},B4;const Y$=te;var Ng;let H4=(Ng=class extends F{constructor(e,t,n){super(),this._renderDisposeables=this._register(new q),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new y9),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new Cd({editor:this._editor},t,n)),this._computer=new QEe(this._editor),this._hoverOperation=this._register(new aQ(this._editor,this._computer)),this._register(this._hoverOperation.onResult(i=>{this._withResult(i.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(50)&&this._updateFont()})),this._register(hn(this._hover.containerDomNode,"mouseleave",i=>{this._onMouseLeave(i)})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return B4.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(t=>this._editor.applyFontInfo(t))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}showsOrWillShow(e){const t=e.target;return t.type===2&&t.detail.glyphMarginLane?(this._startShowingAt(t.position.lineNumber,t.detail.glyphMarginLane),!0):t.type===3?(this._startShowingAt(t.position.lineNumber,"lineNo"),!0):!1}_startShowingAt(e,t){this._computer.lineNumber===e&&this._computer.lane===t||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._computer.lane=t,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const n=document.createDocumentFragment();for(const i of t){const o=Y$("div.hover-row.markdown-hover"),r=Y(o,Y$("div.hover-contents")),a=this._renderDisposeables.add(this._markdownRenderer.render(i.value));r.appendChild(a.element),n.appendChild(o)}this._updateContents(n),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),n=this._editor.getTopForLineNumber(e),i=this._editor.getScrollTop(),o=this._editor.getOption(67),r=this._hover.containerDomNode.clientHeight,a=n-i-(r-o)/2,l=t.glyphMarginLeft+t.glyphMarginWidth+(this._computer.lane==="lineNo"?t.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${l}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(a),0)}px`}_onMouseLeave(e){const t=this._editor.getDomNode();(!t||!ME(t,e.x,e.y))&&this.hide()}},B4=Ng,Ng.ID="editor.contrib.modesGlyphHoverWidget",Ng);H4=B4=JEe([Z$(1,tn),Z$(2,eo)],H4);var eNe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},tNe=function(s,e){return function(t,n){e(t,n,s)}},G_;let iD=(G_=class extends F{constructor(e,t){super(),this._editor=e,this._instantiationService=t,this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new q,this._hoverState={mouseDown:!1},this._reactToEditorMouseMoveRunner=this._register(new It(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.hidingDelay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown(t=>this._onEditorMouseDown(t))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))):(this._listenersStore.add(this._editor.onMouseMove(t=>this._onEditorMouseMove(t))),this._listenersStore.add(this._editor.onKeyDown(t=>this._onKeyDown(t)))),this._listenersStore.add(this._editor.onMouseLeave(t=>this._onEditorMouseLeave(t))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(t=>this._onEditorScrollChanged(t)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0,!this._isMouseOnMarginHoverWidget(e)&&this._hideWidgets()}_isMouseOnMarginHoverWidget(e){var n;const t=(n=this._glyphWidget)==null?void 0:n.getDomNode();return t?ME(t,e.event.posx,e.event.posy):!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._isMouseOnMarginHoverWidget(e))||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky,n=this._isMouseOnMarginHoverWidget(e);return t&&n}_onEditorMouseMove(e){if(this.shouldKeepOpenOnEditorMouseMoveOrLeave)return;if(this._mouseMoveEvent=e,this._shouldNotRecomputeCurrentHoverWidget(e)){this._reactToEditorMouseMoveRunner.cancel();return}this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){!e||this._tryShowHoverWidget(e)||this._hideWidgets()}_tryShowHoverWidget(e){return this._getOrCreateGlyphWidget().showsOrWillShow(e)}_onKeyDown(e){this._editor.hasModel()&&(e.keyCode===5||e.keyCode===6||e.keyCode===57||e.keyCode===4||this._hideWidgets())}_hideWidgets(){var e;(e=this._glyphWidget)==null||e.hide()}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=this._instantiationService.createInstance(H4,this._editor)),this._glyphWidget}dispose(){var e;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),(e=this._glyphWidget)==null||e.dispose()}},G_.ID="editor.contrib.marginHover",G_);iD=eNe([tNe(1,Ce)],iD);class nNe{}class iNe{}class sNe{}dt(hs.ID,hs,2);dt(iD.ID,iD,2);Q(WEe);Q(BEe);Q(HEe);Q(VEe);Q(zEe);Q($Ee);Q(UEe);Q(jEe);Q(qEe);Q(KEe);Q(GEe);Q(ZEe);Bm.register(U1);Bm.register(W4);Er((s,e)=>{const t=s.getColor(TK);t&&(e.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${t.transparent(.5)}; }`))});zE.register(new nNe);zE.register(new iNe);zE.register(new sNe);function ro(s,e){let t=0;for(let n=0;n<s.length;n++)s.charAt(n)==="	"?t+=e:t++;return t}function nw(s,e,t){s=s<0?0:s;let n="";if(!t){const i=Math.floor(s/e);s=s%e;for(let o=0;o<i;o++)n+="	"}for(let i=0;i<s;i++)n+=" ";return n}function eJ(s,e,t,n){if(s.getLineCount()===1&&s.getLineMaxColumn(1)===1)return[];const i=e.getLanguageConfiguration(s.getLanguageId()).indentRulesSupport;if(!i)return[];const o=new EW(s,i,e);for(n=Math.min(n,s.getLineCount());t<=n&&o.shouldIgnore(t);)t++;if(t>n-1)return[];const{tabSize:r,indentSize:a,insertSpaces:l}=s.getOptions(),c=(p,_)=>(_=_||1,Dr.shiftIndent(p,p.length+_,r,a,l)),d=(p,_)=>(_=_||1,Dr.unshiftIndent(p,p.length+_,r,a,l)),h=[],u=s.getLineContent(t);let f=Rt(u),g=f;o.shouldIncrease(t)?(g=c(g),f=c(f)):o.shouldIndentNextLine(t)&&(g=c(g)),t++;for(let p=t;p<=n;p++){if(oNe(s,p))continue;const _=s.getLineContent(p),b=Rt(_),v=g;o.shouldDecrease(p,v)&&(g=d(g),f=d(f)),b!==g&&h.push(on.replaceMove(new me(p,1,p,b.length+1),j9(g,a,l))),!o.shouldIgnore(p)&&(o.shouldIncrease(p,v)?(f=c(f),g=f):o.shouldIndentNextLine(p,v)?g=c(g):g=f)}return h}function oNe(s,e){return s.tokenization.isCheapToTokenize(e)?s.tokenization.getLineTokens(e).getStandardTokenType(0)===2:!1}var rNe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},aNe=function(s,e){return function(t,n){e(t,n,s)}};const PI=class PI extends he{constructor(){super({id:PI.ID,label:m("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:I.writable,metadata:{description:Ee("indentationToSpacesDescription","Convert the tab indentation to spaces.")}})}run(e,t){const n=t.getModel();if(!n)return;const i=n.getOptions(),o=t.getSelection();if(!o)return;const r=new uNe(o,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),n.updateOptions({insertSpaces:!0})}};PI.ID="editor.action.indentationToSpaces";let V4=PI;const OI=class OI extends he{constructor(){super({id:OI.ID,label:m("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:I.writable,metadata:{description:Ee("indentationToTabsDescription","Convert the spaces indentation to tabs.")}})}run(e,t){const n=t.getModel();if(!n)return;const i=n.getOptions(),o=t.getSelection();if(!o)return;const r=new fNe(o,i.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[r]),t.pushUndoStop(),n.updateOptions({insertSpaces:!1})}};OI.ID="editor.action.indentationToTabs";let z4=OI;class UB extends he{constructor(e,t,n){super(n),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const n=e.get(Nr),i=e.get(Ut),o=t.getModel();if(!o)return;const r=i.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget),a=o.getOptions(),l=[1,2,3,4,5,6,7,8].map(d=>({id:d.toString(),label:d.toString(),description:d===r.tabSize&&d===a.tabSize?m("configuredTabSize","Configured Tab Size"):d===r.tabSize?m("defaultTabSize","Default Tab Size"):d===a.tabSize?m("currentTabSize","Current Tab Size"):void 0})),c=Math.min(o.getOptions().tabSize-1,7);setTimeout(()=>{n.pick(l,{placeHolder:m({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:l[c]}).then(d=>{if(d&&o&&!o.isDisposed()){const h=parseInt(d.label,10);this.displaySizeOnly?o.updateOptions({tabSize:h}):o.updateOptions({tabSize:h,indentSize:h,insertSpaces:this.insertSpaces})}})},50)}}const FI=class FI extends UB{constructor(){super(!1,!1,{id:FI.ID,label:m("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0,metadata:{description:Ee("indentUsingTabsDescription","Use indentation with tabs.")}})}};FI.ID="editor.action.indentUsingTabs";let $4=FI;const WI=class WI extends UB{constructor(){super(!0,!1,{id:WI.ID,label:m("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0,metadata:{description:Ee("indentUsingSpacesDescription","Use indentation with spaces.")}})}};WI.ID="editor.action.indentUsingSpaces";let U4=WI;const BI=class BI extends UB{constructor(){super(!0,!0,{id:BI.ID,label:m("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0,metadata:{description:Ee("changeTabDisplaySizeDescription","Change the space size equivalent of the tab.")}})}};BI.ID="editor.action.changeTabDisplaySize";let j4=BI;const HI=class HI extends he{constructor(){super({id:HI.ID,label:m("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0,metadata:{description:Ee("detectIndentationDescription","Detect the indentation from content.")}})}run(e,t){const n=e.get(Ut),i=t.getModel();if(!i)return;const o=n.getCreationOptions(i.getLanguageId(),i.uri,i.isForSimpleWidget);i.detectIndentation(o.insertSpaces,o.tabSize)}};HI.ID="editor.action.detectIndentation";let q4=HI;class lNe extends he{constructor(){super({id:"editor.action.reindentlines",label:m("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:I.writable,metadata:{description:Ee("editor.reindentlinesDescription","Reindent the lines of the editor.")}})}run(e,t){const n=e.get(cn),i=t.getModel();if(!i)return;const o=eJ(i,n,1,i.getLineCount());o.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop())}}class cNe extends he{constructor(){super({id:"editor.action.reindentselectedlines",label:m("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:I.writable,metadata:{description:Ee("editor.reindentselectedlinesDescription","Reindent the selected lines of the editor.")}})}run(e,t){const n=e.get(cn),i=t.getModel();if(!i)return;const o=t.getSelections();if(o===null)return;const r=[];for(const a of o){let l=a.startLineNumber,c=a.endLineNumber;if(l!==c&&a.endColumn===1&&c--,l===1){if(l===c)continue}else l--;const d=eJ(i,n,l,c);r.push(...d)}r.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop())}}class dNe{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const n of e)n.range&&typeof n.text=="string"&&this._edits.push(n)}getEditOperations(e,t){for(const i of this._edits)t.addEditOperation(L.lift(i.range),i.text);let n=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(n=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),n||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}var Z_;let sD=(Z_=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new q,this.callOnModel=new q,this.callOnDispose.add(e.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(e.onDidChangeModel(()=>this.update())),this.callOnDispose.add(e.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(12)<4||this.editor.getOption(55))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:e})=>{this.trigger(e)}))}trigger(e){const t=this.editor.getSelections();if(t===null||t.length>1)return;const n=this.editor.getModel();if(!n||this.rangeContainsOnlyWhitespaceCharacters(n,e)||hNe(n,e)||!n.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const o=this.editor.getOption(12),{tabSize:r,indentSize:a,insertSpaces:l}=n.getOptions(),c=[],d={shiftIndent:g=>Dr.shiftIndent(g,g.length+1,r,a,l),unshiftIndent:g=>Dr.unshiftIndent(g,g.length+1,r,a,l)};let h=e.startLineNumber;for(;h<=e.endLineNumber;){if(this.shouldIgnoreLine(n,h)){h++;continue}break}if(h>e.endLineNumber)return;let u=n.getLineContent(h);if(!/\S/.test(u.substring(0,e.startColumn-1))){const g=$C(o,n,n.getLanguageId(),h,d,this._languageConfigurationService);if(g!==null){const p=Rt(u),_=ro(g,r),b=ro(p,r);if(_!==b){const v=nw(_,r,l);c.push({range:new L(h,1,h,p.length+1),text:v}),u=v+u.substring(p.length)}else{const v=gY(n,h,this._languageConfigurationService);if(v===0||v===8)return}}}const f=h;for(;h<e.endLineNumber;){if(!/\S/.test(n.getLineContent(h+1))){h++;continue}break}if(h!==e.endLineNumber){const p=$C(o,{tokenization:{getLineTokens:_=>n.tokenization.getLineTokens(_),getLanguageId:()=>n.getLanguageId(),getLanguageIdAtPosition:(_,b)=>n.getLanguageIdAtPosition(_,b)},getLineContent:_=>_===f?u:n.getLineContent(_)},n.getLanguageId(),h+1,d,this._languageConfigurationService);if(p!==null){const _=ro(p,r),b=ro(Rt(n.getLineContent(h+1)),r);if(_!==b){const v=_-b;for(let C=h+1;C<=e.endLineNumber;C++){const w=n.getLineContent(C),y=Rt(w),x=ro(y,r)+v,D=nw(x,r,l);D!==y&&c.push({range:new L(C,1,C,y.length+1),text:D})}}}}if(c.length>0){this.editor.pushUndoStop();const g=new dNe(c,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",g),this.editor.pushUndoStop()}}rangeContainsOnlyWhitespaceCharacters(e,t){const n=o=>o.trim().length===0;let i=!0;if(t.startLineNumber===t.endLineNumber){const r=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);i=n(r)}else for(let o=t.startLineNumber;o<=t.endLineNumber;o++){const r=e.getLineContent(o);if(o===t.startLineNumber){const a=r.substring(t.startColumn-1);i=n(a)}else if(o===t.endLineNumber){const a=r.substring(0,t.endColumn-1);i=n(a)}else i=e.getLineFirstNonWhitespaceColumn(o)===0;if(!i)break}return i}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const n=e.getLineFirstNonWhitespaceColumn(t);if(n===0)return!0;const i=e.tokenization.getLineTokens(t);if(i.getCount()>0){const o=i.findTokenIndexAtOffset(n);if(o>=0&&i.getStandardTokenType(o)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}},Z_.ID="editor.contrib.autoIndentOnPaste",Z_);sD=rNe([aNe(1,cn)],sD);function hNe(s,e){const t=n=>Nhe(s,n)===2;return t(e.getStartPosition())||t(e.getEndPosition())}function tJ(s,e,t,n){if(s.getLineCount()===1&&s.getLineMaxColumn(1)===1)return;let i="";for(let r=0;r<t;r++)i+=" ";const o=new RegExp(i,"gi");for(let r=1,a=s.getLineCount();r<=a;r++){let l=s.getLineFirstNonWhitespaceColumn(r);if(l===0&&(l=s.getLineMaxColumn(r)),l===1)continue;const c=new L(r,1,r,l),d=s.getValueInRange(c),h=n?d.replace(/\t/ig,i):d.replace(o,"	");e.addEditOperation(c,h)}}class uNe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),tJ(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class fNe{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),tJ(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}dt(sD.ID,sD,2);Q(V4);Q(z4);Q($4);Q(U4);Q(j4);Q(q4);Q(lNe);Q(cNe);dt(q1.ID,q1,1);Bm.register(Ox);class gNe{constructor(e,t,n){this._editRange=e,this._originalSelection=t,this._text=n}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new me(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new me(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}}var mNe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},pNe=function(s,e){return function(t,n){e(t,n,s)}},ck,Yh;let Bb=(Yh=class{static get(e){return e.getContribution(ck.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var l;(l=this.currentRequest)==null||l.cancel();const n=this.editor.getSelection(),i=this.editor.getModel();if(!i||!n)return;let o=n;if(o.startLineNumber!==o.endLineNumber)return;const r=new $Y(this.editor,5),a=i.uri;return this.editorWorkerService.canNavigateValueSet(a)?(this.currentRequest=si(c=>this.editorWorkerService.navigateValueSet(a,o,t)),this.currentRequest.then(c=>{var g;if(!c||!c.range||!c.value||!r.validate(this.editor))return;const d=L.lift(c.range);let h=c.range;const u=c.value.length-(o.endColumn-o.startColumn);h={startLineNumber:h.startLineNumber,startColumn:h.startColumn,endLineNumber:h.endLineNumber,endColumn:h.startColumn+c.value.length},u>1&&(o=new me(o.startLineNumber,o.startColumn,o.endLineNumber,o.endColumn+u-1));const f=new gNe(d,o,c.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,f),this.editor.pushUndoStop(),this.decorations.set([{range:h,options:ck.DECORATION}]),(g=this.decorationRemover)==null||g.cancel(),this.decorationRemover=_d(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(Pe)}).catch(Pe)):Promise.resolve(void 0)}},ck=Yh,Yh.ID="editor.contrib.inPlaceReplaceController",Yh.DECORATION=Ve.register({description:"in-place-replace",className:"valueSetReplacement"}),Yh);Bb=ck=mNe([pNe(1,to)],Bb);class _Ne extends he{constructor(){super({id:"editor.action.inPlaceReplace.up",label:m("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:3159,weight:100}})}run(e,t){const n=Bb.get(t);return n?n.run(this.id,!1):Promise.resolve(void 0)}}class bNe extends he{constructor(){super({id:"editor.action.inPlaceReplace.down",label:m("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:3161,weight:100}})}run(e,t){const n=Bb.get(t);return n?n.run(this.id,!0):Promise.resolve(void 0)}}dt(Bb.ID,Bb,4);Q(_Ne);Q(bNe);class vNe extends he{constructor(){super({id:"expandLineSelection",label:m("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:I.textInputFocus,primary:2090}})}run(e,t,n){if(n=n||{},!t.hasModel())return;const i=t._getViewModel();i.model.pushStackElement(),i.setCursorStates(n.source,3,yi.expandLineSelection(i,i.getCursorStates())),i.revealAllCursors(n.source,!0)}}Q(vNe);class CNe{constructor(e,t,n){this._selection=e,this._cursors=t,this._selectionId=null,this._trimInRegexesAndStrings=n}getEditOperations(e,t){const n=wNe(e,this._cursors,this._trimInRegexesAndStrings);for(let i=0,o=n.length;i<o;i++){const r=n[i];t.addEditOperation(r.range,r.text)}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}function wNe(s,e,t){e.sort((a,l)=>a.lineNumber===l.lineNumber?a.column-l.column:a.lineNumber-l.lineNumber);for(let a=e.length-2;a>=0;a--)e[a].lineNumber===e[a+1].lineNumber&&e.splice(a,1);const n=[];let i=0,o=0;const r=e.length;for(let a=1,l=s.getLineCount();a<=l;a++){const c=s.getLineContent(a),d=c.length+1;let h=0;if(o<r&&e[o].lineNumber===a&&(h=e[o].column,o++,h===d)||c.length===0)continue;const u=Ba(c);let f=0;if(u===-1)f=1;else if(u!==c.length-1)f=u+2;else continue;if(!t){if(!s.tokenization.hasAccurateTokensForLine(a))continue;const g=s.tokenization.getLineTokens(a),p=g.getStandardTokenType(g.findTokenIndexAtOffset(f));if(p===2||p===3)continue}f=Math.max(h,f),n[i++]=on.delete(new L(a,f,a,d))}return n}class nJ{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&n.endColumn===1&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=[];for(let r=n.startLineNumber;r<=n.endLineNumber;r++)i.push(e.getLineContent(r));const o=i.join(`
`);o===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new L(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":`
`):this._isCopyingDown?t.addEditOperation(new L(n.startLineNumber,1,n.startLineNumber,1),o+`
`):t.addEditOperation(new L(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),`
`+o),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let i=n.startLineNumber,o=n.startColumn,r=n.endLineNumber,a=n.endColumn;this._startLineNumberDelta!==0&&(i=i+this._startLineNumberDelta,o=1),this._endLineNumberDelta!==0&&(r=r+this._endLineNumberDelta,a=1),n=me.createWithDirection(i,o,r,a,this._selectionDirection)}return n}}var yNe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},SNe=function(s,e){return function(t,n){e(t,n,s)}};let K4=class{constructor(e,t,n,i){this._languageConfigurationService=i,this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const n=()=>e.getLanguageId(),i=(h,u)=>e.getLanguageIdAtPosition(h,u),o=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===o){this._selectionId=t.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=t.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let r=this._selection;r.startLineNumber<r.endLineNumber&&r.endColumn===1&&(this._moveEndPositionDown=!0,r=r.setEndPosition(r.endLineNumber-1,e.getLineMaxColumn(r.endLineNumber-1)));const{tabSize:a,indentSize:l,insertSpaces:c}=e.getOptions(),d=this.buildIndentConverter(a,l,c);if(r.startLineNumber===r.endLineNumber&&e.getLineMaxColumn(r.startLineNumber)===1){const h=r.startLineNumber,u=this._isMovingDown?h+1:h-1;e.getLineMaxColumn(u)===1?t.addEditOperation(new L(1,1,1,1),null):(t.addEditOperation(new L(h,1,h,1),e.getLineContent(u)),t.addEditOperation(new L(u,1,u,e.getLineMaxColumn(u)),null)),r=new me(u,1,u,1)}else{let h,u;if(this._isMovingDown){h=r.endLineNumber+1,u=e.getLineContent(h),t.addEditOperation(new L(h-1,e.getLineMaxColumn(h-1),h,e.getLineMaxColumn(h)),null);let f=u;if(this.shouldAutoIndent(e,r)){const g=this.matchEnterRule(e,d,a,h,r.startLineNumber-1);if(g!==null){const _=Rt(e.getLineContent(h)),b=g+ro(_,a);f=nw(b,a,c)+this.trimStart(u)}else{const _={tokenization:{getLineTokens:v=>v===r.startLineNumber?e.tokenization.getLineTokens(h):e.tokenization.getLineTokens(v),getLanguageId:n,getLanguageIdAtPosition:i},getLineContent:v=>v===r.startLineNumber?e.getLineContent(h):e.getLineContent(v)},b=$C(this._autoIndent,_,e.getLanguageIdAtPosition(h,1),r.startLineNumber,d,this._languageConfigurationService);if(b!==null){const v=Rt(e.getLineContent(h)),C=ro(b,a),w=ro(v,a);C!==w&&(f=nw(C,a,c)+this.trimStart(u))}}t.addEditOperation(new L(r.startLineNumber,1,r.startLineNumber,1),f+`
`);const p=this.matchEnterRuleMovingDown(e,d,a,r.startLineNumber,h,f);if(p!==null)p!==0&&this.getIndentEditsOfMovingBlock(e,t,r,a,c,p);else{const _={tokenization:{getLineTokens:v=>v===r.startLineNumber?e.tokenization.getLineTokens(h):v>=r.startLineNumber+1&&v<=r.endLineNumber+1?e.tokenization.getLineTokens(v-1):e.tokenization.getLineTokens(v),getLanguageId:n,getLanguageIdAtPosition:i},getLineContent:v=>v===r.startLineNumber?f:v>=r.startLineNumber+1&&v<=r.endLineNumber+1?e.getLineContent(v-1):e.getLineContent(v)},b=$C(this._autoIndent,_,e.getLanguageIdAtPosition(h,1),r.startLineNumber+1,d,this._languageConfigurationService);if(b!==null){const v=Rt(e.getLineContent(r.startLineNumber)),C=ro(b,a),w=ro(v,a);if(C!==w){const y=C-w;this.getIndentEditsOfMovingBlock(e,t,r,a,c,y)}}}}else t.addEditOperation(new L(r.startLineNumber,1,r.startLineNumber,1),f+`
`)}else if(h=r.startLineNumber-1,u=e.getLineContent(h),t.addEditOperation(new L(h,1,h+1,1),null),t.addEditOperation(new L(r.endLineNumber,e.getLineMaxColumn(r.endLineNumber),r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),`
`+u),this.shouldAutoIndent(e,r)){const f={tokenization:{getLineTokens:p=>p===h?e.tokenization.getLineTokens(r.startLineNumber):e.tokenization.getLineTokens(p),getLanguageId:n,getLanguageIdAtPosition:i},getLineContent:p=>p===h?e.getLineContent(r.startLineNumber):e.getLineContent(p)},g=this.matchEnterRule(e,d,a,r.startLineNumber,r.startLineNumber-2);if(g!==null)g!==0&&this.getIndentEditsOfMovingBlock(e,t,r,a,c,g);else{const p=$C(this._autoIndent,f,e.getLanguageIdAtPosition(r.startLineNumber,1),h,d,this._languageConfigurationService);if(p!==null){const _=Rt(e.getLineContent(r.startLineNumber)),b=ro(p,a),v=ro(_,a);if(b!==v){const C=b-v;this.getIndentEditsOfMovingBlock(e,t,r,a,c,C)}}}}}this._selectionId=t.trackSelection(r)}buildIndentConverter(e,t,n){return{shiftIndent:i=>Dr.shiftIndent(i,i.length+1,e,t,n),unshiftIndent:i=>Dr.unshiftIndent(i,i.length+1,e,t,n)}}parseEnterResult(e,t,n,i,o){if(o){let r=o.indentation;o.indentAction===Vn.None||o.indentAction===Vn.Indent?r=o.indentation+o.appendText:o.indentAction===Vn.IndentOutdent?r=o.indentation:o.indentAction===Vn.Outdent&&(r=t.unshiftIndent(o.indentation)+o.appendText);const a=e.getLineContent(i);if(this.trimStart(a).indexOf(this.trimStart(r))>=0){const l=Rt(e.getLineContent(i));let c=Rt(r);const d=gY(e,i,this._languageConfigurationService);d!==null&&d&2&&(c=t.unshiftIndent(c));const h=ro(c,n),u=ro(l,n);return h-u}}return null}matchEnterRuleMovingDown(e,t,n,i,o,r){if(Ba(r)>=0){const a=e.getLineMaxColumn(o),l=P_(this._autoIndent,e,new L(o,a,o,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,l)}else{let a=i-1;for(;a>=1;){const d=e.getLineContent(a);if(Ba(d)>=0)break;a--}if(a<1||i>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=P_(this._autoIndent,e,new L(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,c)}}matchEnterRule(e,t,n,i,o,r){let a=o;for(;a>=1;){let d;if(a===o&&r!==void 0?d=r:d=e.getLineContent(a),Ba(d)>=0)break;a--}if(a<1||i>e.getLineCount())return null;const l=e.getLineMaxColumn(a),c=P_(this._autoIndent,e,new L(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,c)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4||!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const n=e.getLanguageIdAtPosition(t.startLineNumber,1),i=e.getLanguageIdAtPosition(t.endLineNumber,1);return!(n!==i||this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport===null)}getIndentEditsOfMovingBlock(e,t,n,i,o,r){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){const l=e.getLineContent(a),c=Rt(l),h=ro(c,i)+r,u=nw(h,i,o);u!==c&&(t.addEditOperation(new L(a,1,a,c.length+1),u),a===n.endLineNumber&&n.endColumn<=c.length+1&&u===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}};K4=yNe([SNe(3,cn)],K4);const u_=class u_{static getCollator(){return u_._COLLATOR||(u_._COLLATOR=new Intl.Collator),u_._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const n=kNe(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(e===null)return!1;const i=iJ(e,t,n);if(!i)return!1;for(let o=0,r=i.before.length;o<r;o++)if(i.before[o]!==i.after[o])return!0;return!1}};u_._COLLATOR=null;let X1=u_;function iJ(s,e,t){const n=e.startLineNumber;let i=e.endLineNumber;if(e.endColumn===1&&i--,n>=i)return null;const o=[];for(let a=n;a<=i;a++)o.push(s.getLineContent(a));let r=o.slice(0);return r.sort(X1.getCollator().compare),t===!0&&(r=r.reverse()),{startLineNumber:n,endLineNumber:i,before:o,after:r}}function kNe(s,e,t){const n=iJ(s,e,t);return n?on.replace(new L(n.startLineNumber,1,n.endLineNumber,s.getLineMaxColumn(n.endLineNumber)),n.after.join(`
`)):null}class sJ extends he{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map((r,a)=>({selection:r,index:a,ignore:!1}));n.sort((r,a)=>L.compareRangesUsingStarts(r.selection,a.selection));let i=n[0];for(let r=1;r<n.length;r++){const a=n[r];i.selection.endLineNumber===a.selection.startLineNumber&&(i.index<a.index?a.ignore=!0:(i.ignore=!0,i=a))}const o=[];for(const r of n)o.push(new nJ(r.selection,this.down,r.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class LNe extends sJ{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:m("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:ge.MenubarSelectionMenu,group:"2_line",title:m({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class xNe extends sJ{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:m("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:ge.MenubarSelectionMenu,group:"2_line",title:m({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class DNe extends he{constructor(){super({id:"editor.action.duplicateSelection",label:m("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:I.writable,menuOpts:{menuId:ge.MenubarSelectionMenu,group:"2_line",title:m({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const i=[],o=t.getSelections(),r=t.getModel();for(const a of o)if(a.isEmpty())i.push(new nJ(a,!0));else{const l=new me(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);i.push(new hCe(l,r.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class oJ extends he{constructor(e,t){super(t),this.down=e}run(e,t){const n=e.get(cn),i=[],o=t.getSelections()||[],r=t.getOption(12);for(const a of o)i.push(new K4(a,this.down,r,n));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class INe extends oJ{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:m("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:ge.MenubarSelectionMenu,group:"2_line",title:m({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class TNe extends oJ{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:m("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:ge.MenubarSelectionMenu,group:"2_line",title:m({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class rJ extends he{constructor(e,t){super(t),this.descending=e}run(e,t){if(!t.hasModel())return;const n=t.getModel();let i=t.getSelections();i.length===1&&i[0].isEmpty()&&(i=[new me(1,1,n.getLineCount(),n.getLineMaxColumn(n.getLineCount()))]);for(const r of i)if(!X1.canRun(t.getModel(),r,this.descending))return;const o=[];for(let r=0,a=i.length;r<a;r++)o[r]=new X1(i[r],this.descending);t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class ENe extends rJ{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:m("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:I.writable})}}class NNe extends rJ{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:m("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:I.writable})}}class RNe extends he{constructor(){super({id:"editor.action.removeDuplicateLines",label:m("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:I.writable})}run(e,t){if(!t.hasModel())return;const n=t.getModel();if(n.getLineCount()===1&&n.getLineMaxColumn(1)===1)return;const i=[],o=[];let r=0,a=!0,l=t.getSelections();l.length===1&&l[0].isEmpty()&&(l=[new me(1,1,n.getLineCount(),n.getLineMaxColumn(n.getLineCount()))],a=!1);for(const c of l){const d=new Set,h=[];for(let p=c.startLineNumber;p<=c.endLineNumber;p++){const _=n.getLineContent(p);d.has(_)||(h.push(_),d.add(_))}const u=new me(c.startLineNumber,1,c.endLineNumber,n.getLineMaxColumn(c.endLineNumber)),f=c.startLineNumber-r,g=new me(f,1,f+h.length-1,h[h.length-1].length);i.push(on.replace(u,h.join(`
`))),o.push(g),r+=c.endLineNumber-c.startLineNumber+1-h.length}t.pushUndoStop(),t.executeEdits(this.id,i,a?o:void 0),t.pushUndoStop()}}const VI=class VI extends he{constructor(){super({id:VI.ID,label:m("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:zn(2089,2102),weight:100}})}run(e,t,n){let i=[];n.reason==="auto-save"&&(i=(t.getSelections()||[]).map(d=>new A(d.positionLineNumber,d.positionColumn)));const o=t.getSelection();if(o===null)return;const r=e.get(Ze),a=t.getModel(),l=r.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:a==null?void 0:a.getLanguageId(),resource:a==null?void 0:a.uri}),c=new CNe(o,i,l);t.pushUndoStop(),t.executeCommands(this.id,[c]),t.pushUndoStop()}};VI.ID="editor.action.trimTrailingWhitespace";let G4=VI;class MNe extends he{constructor(){super({id:"editor.action.deleteLines",label:m("lines.delete","Delete Line"),alias:"Delete Line",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const n=this._getLinesToRemove(t),i=t.getModel();if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return;let o=0;const r=[],a=[];for(let l=0,c=n.length;l<c;l++){const d=n[l];let h=d.startLineNumber,u=d.endLineNumber,f=1,g=i.getLineMaxColumn(u);u<i.getLineCount()?(u+=1,g=1):h>1&&(h-=1,f=i.getLineMaxColumn(h)),r.push(on.replace(new me(h,f,u,g),"")),a.push(new me(h-o,d.positionColumn,h-o,d.positionColumn)),o+=d.endLineNumber-d.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,r,a),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map(o=>{let r=o.endLineNumber;return o.startLineNumber<o.endLineNumber&&o.endColumn===1&&(r-=1),{startLineNumber:o.startLineNumber,selectionStartColumn:o.selectionStartColumn,endLineNumber:r,positionColumn:o.positionColumn}});t.sort((o,r)=>o.startLineNumber===r.startLineNumber?o.endLineNumber-r.endLineNumber:o.startLineNumber-r.startLineNumber);const n=[];let i=t[0];for(let o=1;o<t.length;o++)i.endLineNumber+1>=t[o].startLineNumber?i.endLineNumber=t[o].endLineNumber:(n.push(i),i=t[o]);return n.push(i),n}}class ANe extends he{constructor(){super({id:"editor.action.indentLines",label:m("lines.indent","Indent Line"),alias:"Indent Line",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:2142,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,hh.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class PNe extends he{constructor(){super({id:"editor.action.outdentLines",label:m("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:2140,weight:100}})}run(e,t){O_.Outdent.runEditorCommand(e,t,null)}}class ONe extends he{constructor(){super({id:"editor.action.insertLineBefore",label:m("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,bE.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}class FNe extends he{constructor(){super({id:"editor.action.insertLineAfter",label:m("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,bE.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}class aJ extends he{run(e,t){if(!t.hasModel())return;const n=t.getSelection(),i=this._getRangesToDelete(t),o=[];for(let l=0,c=i.length-1;l<c;l++){const d=i[l],h=i[l+1];L.intersectRanges(d,h)===null?o.push(d):i[l+1]=L.plusRange(d,h)}o.push(i[i.length-1]);const r=this._getEndCursorState(n,o),a=o.map(l=>on.replace(l,""));t.pushUndoStop(),t.executeEdits(this.id,a,r),t.pushUndoStop()}}class WNe extends aJ{constructor(){super({id:"deleteAllLeft",label:m("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null;const i=[];let o=0;return t.forEach(r=>{let a;if(r.endColumn===1&&o>0){const l=r.startLineNumber-o;a=new me(l,r.startColumn,l,r.startColumn)}else a=new me(r.startLineNumber,r.startColumn,r.startLineNumber,r.startColumn);o+=r.endLineNumber-r.startLineNumber,r.intersectRanges(e)?n=a:i.push(a)}),n&&i.unshift(n),i}_getRangesToDelete(e){const t=e.getSelections();if(t===null)return[];let n=t;const i=e.getModel();return i===null?[]:(n.sort(L.compareRangesUsingStarts),n=n.map(o=>{if(o.isEmpty())if(o.startColumn===1){const r=Math.max(1,o.startLineNumber-1),a=o.startLineNumber===1?1:i.getLineLength(r)+1;return new L(r,a,o.startLineNumber,1)}else return new L(o.startLineNumber,1,o.startLineNumber,o.startColumn);else return new L(o.startLineNumber,1,o.endLineNumber,o.endColumn)}),n)}}class BNe extends aJ{constructor(){super({id:"deleteAllRight",label:m("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null;const i=[];for(let o=0,r=t.length,a=0;o<r;o++){const l=t[o],c=new me(l.startLineNumber-a,l.startColumn,l.startLineNumber-a,l.startColumn);l.intersectRanges(e)?n=c:i.push(c)}return n&&i.unshift(n),i}_getRangesToDelete(e){const t=e.getModel();if(t===null)return[];const n=e.getSelections();if(n===null)return[];const i=n.map(o=>{if(o.isEmpty()){const r=t.getLineMaxColumn(o.startLineNumber);return o.startColumn===r?new L(o.startLineNumber,o.startColumn,o.startLineNumber+1,1):new L(o.startLineNumber,o.startColumn,o.startLineNumber,r)}return o});return i.sort(L.compareRangesUsingStarts),i}}class HNe extends he{constructor(){super({id:"editor.action.joinLines",label:m("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:I.writable,kbOpts:{kbExpr:I.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const n=t.getSelections();if(n===null)return;let i=t.getSelection();if(i===null)return;n.sort(L.compareRangesUsingStarts);const o=[],r=n.reduce((u,f)=>u.isEmpty()?u.endLineNumber===f.startLineNumber?(i.equalsSelection(u)&&(i=f),f):f.startLineNumber>u.endLineNumber+1?(o.push(u),f):new me(u.startLineNumber,u.startColumn,f.endLineNumber,f.endColumn):f.startLineNumber>u.endLineNumber?(o.push(u),f):new me(u.startLineNumber,u.startColumn,f.endLineNumber,f.endColumn));o.push(r);const a=t.getModel();if(a===null)return;const l=[],c=[];let d=i,h=0;for(let u=0,f=o.length;u<f;u++){const g=o[u],p=g.startLineNumber,_=1;let b=0,v,C;const w=a.getLineLength(g.endLineNumber)-g.endColumn;if(g.isEmpty()||g.startLineNumber===g.endLineNumber){const x=g.getStartPosition();x.lineNumber<a.getLineCount()?(v=p+1,C=a.getLineMaxColumn(v)):(v=x.lineNumber,C=a.getLineMaxColumn(x.lineNumber))}else v=g.endLineNumber,C=a.getLineMaxColumn(v);let y=a.getLineContent(p);for(let x=p+1;x<=v;x++){const D=a.getLineContent(x),N=a.getLineFirstNonWhitespaceColumn(x);if(N>=1){let W=!0;y===""&&(W=!1),W&&(y.charAt(y.length-1)===" "||y.charAt(y.length-1)==="	")&&(W=!1,y=y.replace(/[\s\uFEFF\xA0]+$/g," "));const B=D.substr(N-1);y+=(W?" ":"")+B,W?b=B.length+1:b=B.length}else b=0}const k=new L(p,_,v,C);if(!k.isEmpty()){let x;g.isEmpty()?(l.push(on.replace(k,y)),x=new me(k.startLineNumber-h,y.length-b+1,p-h,y.length-b+1)):g.startLineNumber===g.endLineNumber?(l.push(on.replace(k,y)),x=new me(g.startLineNumber-h,g.startColumn,g.endLineNumber-h,g.endColumn)):(l.push(on.replace(k,y)),x=new me(g.startLineNumber-h,g.startColumn,g.startLineNumber-h,y.length-w)),L.intersectRanges(k,i)!==null?d=x:c.push(x)}h+=k.endLineNumber-k.startLineNumber}c.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,l,c),t.pushUndoStop()}}class VNe extends he{constructor(){super({id:"editor.action.transpose",label:m("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:I.writable})}run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const o=[];for(let r=0,a=n.length;r<a;r++){const l=n[r];if(!l.isEmpty())continue;const c=l.getStartPosition(),d=i.getLineMaxColumn(c.lineNumber);if(c.column>=d){if(c.lineNumber===i.getLineCount())continue;const h=new L(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),u=i.getValueInRange(h).split("").reverse().join("");o.push(new Oi(new me(c.lineNumber,Math.max(1,c.column-1),c.lineNumber+1,1),u))}else{const h=new L(c.lineNumber,Math.max(1,c.column-1),c.lineNumber,c.column+1),u=i.getValueInRange(h).split("").reverse().join("");o.push(new TW(h,u,new me(c.lineNumber,c.column+1,c.lineNumber,c.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class zm extends he{run(e,t){const n=t.getSelections();if(n===null)return;const i=t.getModel();if(i===null)return;const o=t.getOption(132),r=[];for(const a of n)if(a.isEmpty()){const l=a.getStartPosition(),c=t.getConfiguredWordAtPosition(l);if(!c)continue;const d=new L(l.lineNumber,c.startColumn,l.lineNumber,c.endColumn),h=i.getValueInRange(d);r.push(on.replace(d,this._modifyText(h,o)))}else{const l=i.getValueInRange(a);r.push(on.replace(a,this._modifyText(l,o)))}t.pushUndoStop(),t.executeEdits(this.id,r),t.pushUndoStop()}}class zNe extends zm{constructor(){super({id:"editor.action.transformToUppercase",label:m("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:I.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class $Ne extends zm{constructor(){super({id:"editor.action.transformToLowercase",label:m("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:I.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class dd{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}const zI=class zI extends zm{constructor(){super({id:"editor.action.transformToTitlecase",label:m("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:I.writable})}_modifyText(e,t){const n=zI.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,i=>i.toLocaleUpperCase()):e}};zI.titleBoundary=new dd("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");let oD=zI;const f_=class f_ extends zm{constructor(){super({id:"editor.action.transformToSnakecase",label:m("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:I.writable})}_modifyText(e,t){const n=f_.caseBoundary.get(),i=f_.singleLetters.get();return!n||!i?e:e.replace(n,"$1_$2").replace(i,"$1_$2$3").toLocaleLowerCase()}};f_.caseBoundary=new dd("(\\p{Ll})(\\p{Lu})","gmu"),f_.singleLetters=new dd("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");let iw=f_;const $I=class $I extends zm{constructor(){super({id:"editor.action.transformToCamelcase",label:m("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:I.writable})}_modifyText(e,t){const n=$I.wordBoundary.get();if(!n)return e;const i=e.split(n);return i.shift()+i.map(r=>r.substring(0,1).toLocaleUpperCase()+r.substring(1)).join("")}};$I.wordBoundary=new dd("[_\\s-]","gm");let rD=$I;const g_=class g_ extends zm{constructor(){super({id:"editor.action.transformToPascalcase",label:m("editor.transformToPascalcase","Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:I.writable})}_modifyText(e,t){const n=g_.wordBoundary.get(),i=g_.wordBoundaryToMaintain.get();return!n||!i?e:e.split(i).map(a=>a.split(n)).flat().map(a=>a.substring(0,1).toLocaleUpperCase()+a.substring(1)).join("")}};g_.wordBoundary=new dd("[_\\s-]","gm"),g_.wordBoundaryToMaintain=new dd("(?<=\\.)","gm");let aD=g_;const oh=class oh extends zm{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(t=>t.isSupported())}constructor(){super({id:"editor.action.transformToKebabcase",label:m("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:I.writable})}_modifyText(e,t){const n=oh.caseBoundary.get(),i=oh.singleLetters.get(),o=oh.underscoreBoundary.get();return!n||!i||!o?e:e.replace(o,"$1-$3").replace(n,"$1-$2").replace(i,"$1-$2").toLocaleLowerCase()}};oh.caseBoundary=new dd("(\\p{Ll})(\\p{Lu})","gmu"),oh.singleLetters=new dd("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),oh.underscoreBoundary=new dd("(\\S)(_)(\\S)","gm");let lD=oh;Q(LNe);Q(xNe);Q(DNe);Q(INe);Q(TNe);Q(ENe);Q(NNe);Q(RNe);Q(G4);Q(MNe);Q(ANe);Q(PNe);Q(ONe);Q(FNe);Q(WNe);Q(BNe);Q(HNe);Q(VNe);Q(zNe);Q($Ne);iw.caseBoundary.isSupported()&&iw.singleLetters.isSupported()&&Q(iw);rD.wordBoundary.isSupported()&&Q(rD);aD.wordBoundary.isSupported()&&Q(aD);oD.titleBoundary.isSupported()&&Q(oD);lD.isSupported()&&Q(lD);var UNe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},CS=function(s,e){return function(t,n){e(t,n,s)}},dk;const lJ=new le("LinkedEditingInputVisible",!1),jNe="linked-editing-decoration";var Xh;let Hb=(Xh=class extends F{static get(e){return e.getContribution(dk.ID)}constructor(e,t,n,i,o){super(),this.languageConfigurationService=i,this._syncRangesToken=0,this._localToDispose=this._register(new q),this._editor=e,this._providers=n.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=lJ.bindTo(t),this._debounceInformation=o.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new q),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(r=>{(r.hasChanged(70)||r.hasChanged(94))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),n=t!==null&&(this._editor.getOption(70)||this._editor.getOption(94))&&this._providers.has(t);if(n===this._enabled&&!e||(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||t===null))return;this._localToDispose.add(se.runAndSubscribe(t.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()}));const i=new kr(this._debounceInformation.get(t)),o=()=>{this._rangeUpdateTriggerPromise=i.trigger(()=>this.updateRanges(),this._debounceDuration??this._debounceInformation.get(t))},r=new kr(0),a=l=>{this._rangeSyncTriggerPromise=r.trigger(()=>this._syncRanges(l))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{o()})),this._localToDispose.add(this._editor.onDidChangeModelContent(l=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const c=this._currentDecorations.getRange(0);if(c&&l.changes.every(d=>c.intersectRanges(d.range))){a(this._syncRangesToken);return}}o()})),this._localToDispose.add({dispose:()=>{i.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||this._currentDecorations.length===0)return;const t=this._editor.getModel(),n=this._currentDecorations.getRange(0);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const i=t.getValueInRange(n);if(this._currentWordPattern){const r=i.match(this._currentWordPattern);if((r?r[0].length:0)!==i.length)return this.clearRanges()}const o=[];for(let r=1,a=this._currentDecorations.length;r<a;r++){const l=this._currentDecorations.getRange(r);if(l)if(l.startLineNumber!==l.endLineNumber)o.push({range:l,text:i});else{let c=t.getValueInRange(l),d=i,h=l.startColumn,u=l.endColumn;const f=ou(c,d);h+=f,c=c.substr(f),d=d.substr(f);const g=Ak(c,d);u-=g,c=c.substr(0,c.length-g),d=d.substr(0,d.length-g),(h!==u||d.length!==0)&&o.push({range:new L(l.startLineNumber,h,l.endLineNumber,u),text:d})}}if(o.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const r=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(r)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(e=!1){if(!this._editor.hasModel()){this.clearRanges();return}const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1){this.clearRanges();return}const n=this._editor.getModel(),i=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===i){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const r=this._currentDecorations.getRange(0);if(r&&r.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=i;const o=this._currentRequestCts=new an;try{const r=new pi(!1),a=await cJ(this._providers,n,t,o.token);if(this._debounceInformation.update(n,r.elapsed()),o!==this._currentRequestCts||(this._currentRequestCts=null,i!==n.getVersionId()))return;let l=[];a!=null&&a.ranges&&(l=a.ranges),this._currentWordPattern=(a==null?void 0:a.wordPattern)||this._languageWordPattern;let c=!1;for(let h=0,u=l.length;h<u;h++)if(L.containsPosition(l[h],t)){if(c=!0,h!==0){const f=l[h];l.splice(h,1),l.unshift(f)}break}if(!c){this.clearRanges();return}const d=l.map(h=>({range:h,options:dk.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(d),this._syncRangesToken++}catch(r){Tr(r)||Pe(r),(this._currentRequestCts===o||!this._currentRequestCts)&&this.clearRanges()}}},dk=Xh,Xh.ID="editor.contrib.linkedEditing",Xh.DECORATION=Ve.register({description:"linked-editing",stickiness:0,className:jNe}),Xh);Hb=dk=UNe([CS(1,Ie),CS(2,ue),CS(3,cn),CS(4,ir)],Hb);class qNe extends he{constructor(){super({id:"editor.action.linkedEditing",label:m("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:K.and(I.writable,I.hasRenameProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(mt),[i,o]=Array.isArray(t)&&t||[void 0,void 0];return Se.isUri(i)&&A.isIPosition(o)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(o),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},Pe):super.runCommand(e,t)}run(e,t){const n=Hb.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}const KNe=Zn.bindToContribution(Hb.get);oe(new KNe({id:"cancelLinkedEditingInput",precondition:lJ,handler:s=>s.clearRanges(),kbOpts:{kbExpr:I.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));function cJ(s,e,t,n){const i=s.ordered(e);return V3(i.map(o=>async()=>{try{return await o.provideLinkedEditingRanges(e,t,n)}catch(r){kn(r);return}}),o=>!!o&&cs(o==null?void 0:o.ranges))}T("editor.linkedEditingBackground",{dark:Z.fromHex("#f00").transparent(.3),light:Z.fromHex("#f00").transparent(.3),hcDark:Z.fromHex("#f00").transparent(.3),hcLight:Z.white},m("editorLinkedEditingBackground","Background color when the editor auto renames on type."));Js("_executeLinkedEditingProvider",(s,e,t)=>{const{linkedEditingRangeProvider:n}=s.get(ue);return cJ(n,e,t,Ue.None)});dt(Hb.ID,Hb,1);Q(qNe);let GNe=class{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(e){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,e)).then(t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))}};class cD{constructor(e){this._disposables=new q;let t=[];for(const[n,i]of e){const o=n.links.map(r=>new GNe(r,i));t=cD._union(t,o),uT(n)&&this._disposables.add(n)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const n=[];let i,o,r,a;for(i=0,r=0,o=e.length,a=t.length;i<o&&r<a;){const l=e[i],c=t[r];if(L.areIntersectingOrTouching(l.range,c.range)){i++;continue}L.compareRangesUsingStarts(l.range,c.range)<0?(n.push(l),i++):(n.push(c),r++)}for(;i<o;i++)n.push(e[i]);for(;r<a;r++)n.push(t[r]);return n}}function dJ(s,e,t){const n=[],i=s.ordered(e).reverse().map((o,r)=>Promise.resolve(o.provideLinks(e,t)).then(a=>{a&&(n[r]=[a,o])},kn));return Promise.all(i).then(()=>{const o=new cD(ea(n));return t.isCancellationRequested?(o.dispose(),new cD([])):o})}rt.registerCommand("_executeLinkProvider",async(s,...e)=>{let[t,n]=e;gt(t instanceof Se),typeof n!="number"&&(n=0);const{linkProvider:i}=s.get(ue),o=s.get(Ut).getModel(t);if(!o)return[];const r=await dJ(i,o,Ue.None);if(!r)return[];for(let l=0;l<Math.min(n,r.links.length);l++)await r.links[l].resolve(Ue.None);const a=r.links.slice(0);return r.dispose(),a});var ZNe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},wS=function(s,e){return function(t,n){e(t,n,s)}},Z4,Rg;let Q1=(Rg=class extends F{static get(e){return e.getContribution(Z4.ID)}constructor(e,t,n,i,o){super(),this.editor=e,this.openerService=t,this.notificationService=n,this.languageFeaturesService=i,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=o.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new It(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const r=this._register(new AE(e));this._register(r.onMouseMoveOrRelevantKeyDown(([a,l])=>{this._onEditorMouseMove(a,l)})),this._register(r.onExecute(a=>{this.onEditorMouseUp(a)})),this._register(r.onCancel(a=>{this.cleanUpActiveLinkDecoration()})),this._register(e.onDidChangeConfiguration(a=>{a.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(e.onDidChangeModelContent(a=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(e.onDidChangeModel(a=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(e.onDidChangeModelLanguage(a=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(a=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;const e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=si(t=>dJ(this.providers,e,t));try{const t=new pi(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(t){Pe(t)}finally{this.computePromise=null}}}updateDecorations(e){const t=this.editor.getOption(78)==="altKey",n=[],i=Object.keys(this.currentOccurrences);for(const r of i){const a=this.currentOccurrences[r];n.push(a.decorationId)}const o=[];if(e)for(const r of e)o.push(H_.decoration(r,t));this.editor.changeDecorations(r=>{const a=r.deltaDecorations(n,o);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let l=0,c=a.length;l<c;l++){const d=new H_(e[l],a[l]);this.currentOccurrences[d.decorationId]=d}})}_onEditorMouseMove(e,t){const n=this.editor.getOption(78)==="altKey";if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const i=this.getLinkOccurrence(e.target.position);i&&this.editor.changeDecorations(o=>{i.activate(o,n),this.activeLinkDecorationId=i.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e=this.editor.getOption(78)==="altKey";if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations(n=>{t.deactivate(n,e)}),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,n=!1){if(!this.openerService)return;const{link:i}=e;i.resolve(Ue.None).then(o=>{if(typeof o=="string"&&this.editor.hasModel()){const r=this.editor.getModel().uri;if(r.scheme===We.file&&o.startsWith(`${We.file}:`)){const a=Se.parse(o);if(a.scheme===We.file){const l=pl(a);let c=null;l.startsWith("/./")||l.startsWith("\\.\\")?c=`.${l.substr(1)}`:(l.startsWith("//./")||l.startsWith("\\\\.\\"))&&(c=`.${l.substr(2)}`),c&&(o=Xde(r,c))}}}return this.openerService.open(o,{openToSide:t,fromUserGesture:n,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},o=>{const r=o instanceof Error?o.message:o;r==="invalid"?this.notificationService.warn(m("invalid.url","Failed to open this link because it is not well-formed: {0}",i.url.toString())):r==="missing"?this.notificationService.warn(m("missing.url","Failed to open this link because its target is missing.")):Pe(o)})}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const n of t){const i=this.currentOccurrences[n.id];if(i)return i}return null}isEnabled(e,t){return!!(e.target.type===6&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&((e=this.activeLinksList)==null||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}},Z4=Rg,Rg.ID="editor.linkDetector",Rg);Q1=Z4=ZNe([wS(1,eo),wS(2,En),wS(3,ue),wS(4,ir)],Q1);const X$={general:Ve.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:Ve.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class H_{static decoration(e,t){return{range:e.range,options:H_._getOptions(e,t,!1)}}static _getOptions(e,t,n){const i={...n?X$.active:X$.general};return i.hoverMessage=YNe(e,t),i}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,H_._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,H_._getOptions(this.link,t,!1))}}function YNe(s,e){const t=s.url&&/^command:/i.test(s.url.toString()),n=s.tooltip?s.tooltip:t?m("links.navigate.executeCmd","Execute command"):m("links.navigate.follow","Follow link"),i=e?et?m("links.navigate.kb.meta.mac","cmd + click"):m("links.navigate.kb.meta","ctrl + click"):et?m("links.navigate.kb.alt.mac","option + click"):m("links.navigate.kb.alt","alt + click");if(s.url){let o="";if(/^command:/i.test(s.url.toString())){const a=s.url.toString().match(/^command:([^?#]+)/);if(a){const l=a[1];o=m("tooltip.explanation","Execute command {0}",l)}}return new ji("",!0).appendLink(s.url.toString(!0).replace(/ /g,"%20"),n,o).appendMarkdown(` (${i})`)}else return new ji().appendText(`${n} (${i})`)}class XNe extends he{constructor(){super({id:"editor.action.openLink",label:m("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const n=Q1.get(t);if(!n||!t.hasModel())return;const i=t.getSelections();for(const o of i){const r=n.getLinkOccurrence(o.getEndPosition());r&&n.openLinkOccurrence(r,!1)}}}dt(Q1.ID,Q1,1);Q(XNe);const h7=class h7 extends F{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown(t=>{const n=this._editor.getOption(118);n>=0&&t.target.type===6&&t.target.position.column>=n&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}};h7.ID="editor.contrib.longLinesHelper";let dD=h7;dt(dD.ID,dD,2);const QNe=T("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},m("wordHighlight","Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},m("wordHighlightStrong","Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0);T("editor.wordHighlightTextBackground",QNe,m("wordHighlightText","Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const JNe=T("editor.wordHighlightBorder",{light:null,dark:null,hcDark:Zt,hcLight:Zt},m("wordHighlightBorder","Border color of a symbol during read-access, like reading a variable."));T("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:Zt,hcLight:Zt},m("wordHighlightStrongBorder","Border color of a symbol during write-access, like writing to a variable."));T("editor.wordHighlightTextBorder",JNe,m("wordHighlightTextBorder","Border color of a textual occurrence for a symbol."));const eRe=T("editorOverviewRuler.wordHighlightForeground","#A0A0A0CC",m("overviewRulerWordHighlightForeground","Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),tRe=T("editorOverviewRuler.wordHighlightStrongForeground","#C0A0C0CC",m("overviewRulerWordHighlightStrongForeground","Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),nRe=T("editorOverviewRuler.wordHighlightTextForeground",RK,m("overviewRulerWordHighlightTextForeground","Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),iRe=Ve.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:pn(tRe),position:Ko.Center},minimap:{color:pn(HT),position:1}}),sRe=Ve.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:pn(nRe),position:Ko.Center},minimap:{color:pn(HT),position:1}}),oRe=Ve.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:pn(RK),position:Ko.Center},minimap:{color:pn(HT),position:1}}),rRe=Ve.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),aRe=Ve.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:pn(eRe),position:Ko.Center},minimap:{color:pn(HT),position:1}});function lRe(s){return s===sb.Write?iRe:s===sb.Text?sRe:aRe}function cRe(s){return s?rRe:oRe}Er((s,e)=>{const t=s.getColor(g9);t&&e.addRule(`.monaco-editor .selectionHighlight { background-color: ${t.transparent(.5)}; }`)});var dRe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},hRe=function(s,e){return function(t,n){e(t,n,s)}},Y4;function Eu(s,e){const t=e.filter(n=>!s.find(i=>i.equals(n)));if(t.length>=1){const n=t.map(o=>`line ${o.viewState.position.lineNumber} column ${o.viewState.position.column}`).join(", "),i=t.length===1?m("cursorAdded","Cursor added: {0}",n):m("cursorsAdded","Cursors added: {0}",n);Zl(i)}}class uRe extends he{constructor(){super({id:"editor.action.insertCursorAbove",label:m("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:ge.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const r=o.getCursorStates();o.setCursorStates(n.source,3,yi.addCursorUp(o,r,i)),o.revealTopMostCursor(n.source),Eu(r,o.getCursorStates())}}class fRe extends he{constructor(){super({id:"editor.action.insertCursorBelow",label:m("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:ge.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,n){if(!t.hasModel())return;let i=!0;n&&n.logicalLine===!1&&(i=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const r=o.getCursorStates();o.setCursorStates(n.source,3,yi.addCursorDown(o,r,i)),o.revealBottomMostCursor(n.source),Eu(r,o.getCursorStates())}}class gRe extends he{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:m("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:ge.MenubarSelectionMenu,group:"3_multi",title:m({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,n){if(!e.isEmpty()){for(let i=e.startLineNumber;i<e.endLineNumber;i++){const o=t.getLineMaxColumn(i);n.push(new me(i,o,i,o))}e.endColumn>1&&n.push(new me(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const n=t.getModel(),i=t.getSelections(),o=t._getViewModel(),r=o.getCursorStates(),a=[];i.forEach(l=>this.getCursorsForSelection(l,n,a)),a.length>0&&t.setSelections(a),Eu(r,o.getCursorStates())}}class mRe extends he{constructor(){super({id:"editor.action.addCursorsToBottom",label:m("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=t.getModel().getLineCount(),o=[];for(let l=n[0].startLineNumber;l<=i;l++)o.push(new me(l,n[0].startColumn,l,n[0].endColumn));const r=t._getViewModel(),a=r.getCursorStates();o.length>0&&t.setSelections(o),Eu(a,r.getCursorStates())}}class pRe extends he{constructor(){super({id:"editor.action.addCursorsToTop",label:m("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getSelections(),i=[];for(let a=n[0].startLineNumber;a>=1;a--)i.push(new me(a,n[0].startColumn,a,n[0].endColumn));const o=t._getViewModel(),r=o.getCursorStates();i.length>0&&t.setSelections(i),Eu(r,o.getCursorStates())}}class yS{constructor(e,t,n){this.selections=e,this.revealRange=t,this.revealScrollType=n}}class J1{static create(e,t){if(!e.hasModel())return null;const n=t.getState();if(!e.hasTextFocus()&&n.isRevealed&&n.searchString.length>0)return new J1(e,t,!1,n.searchString,n.wholeWord,n.matchCase,null);let i=!1,o,r;const a=e.getSelections();a.length===1&&a[0].isEmpty()?(i=!0,o=!0,r=!0):(o=n.wholeWord,r=n.matchCase);const l=e.getSelection();let c,d=null;if(l.isEmpty()){const h=e.getConfiguredWordAtPosition(l.getStartPosition());if(!h)return null;c=h.word,d=new me(l.startLineNumber,h.startColumn,l.startLineNumber,h.endColumn)}else c=e.getModel().getValueInRange(l).replace(/\r\n/g,`
`);return new J1(e,t,i,c,o,r,d)}constructor(e,t,n,i,o,r,a){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=n,this.searchText=i,this.wholeWord=o,this.matchCase=r,this.currentMatch=a}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new yS(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new yS(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return n?new me(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new yS(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new yS(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const i=this.currentMatch;return this.currentMatch=null,i}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],n=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return n?new me(n.range.startLineNumber,n.range.startColumn,n.range.endLineNumber,n.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824)}}const UI=class UI extends F{static get(e){return e.getContribution(UI.ID)}constructor(e){super(),this._sessionDispose=this._register(new q),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=J1.create(this._editor,e);if(!t)return;this._session=t;const n={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(n.wholeWordOverride=1,n.matchCaseOverride=1,n.isRegexOverride=2),e.getState().change(n,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(i=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(e.getState().onFindReplaceStateChange(i=>{(i.matchCase||i.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const n=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return n?new me(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!hJ(this._editor.getModel(),t,i)){const r=this._editor.getModel(),a=[];for(let l=0,c=t.length;l<c;l++)a[l]=this._expandEmptyToWord(r,t[l]);this._editor.setSelections(a);return}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const n=e.getState();if(n.isRevealed&&n.searchString.length>0&&n.isRegex){const i=this._editor.getModel();n.searchScope?t=i.findMatches(n.searchString,n.searchScope,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(132):null,!1,1073741824):t=i.findMatches(n.searchString,!0,n.isRegex,n.matchCase,n.wholeWord?this._editor.getOption(132):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(n.searchScope)}if(t.length>0){const i=this._editor.getSelection();for(let o=0,r=t.length;o<r;o++){const a=t[o];if(a.range.intersectRanges(i)){t[o]=t[0],t[0]=a;break}}this._setSelections(t.map(o=>new me(o.range.startLineNumber,o.range.startColumn,o.range.endLineNumber,o.range.endColumn)))}}};UI.ID="editor.contrib.multiCursorController";let Vb=UI;class bv extends he{run(e,t){const n=Vb.get(t);if(!n)return;const i=t._getViewModel();if(i){const o=i.getCursorStates(),r=Xs.get(t);if(r)this._run(n,r);else{const a=e.get(Ce).createInstance(Xs,t);this._run(n,a),a.dispose()}Eu(o,i.getCursorStates())}}}class _Re extends bv{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:m("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:2082,weight:100},menuOpts:{menuId:ge.MenubarSelectionMenu,group:"3_multi",title:m({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class bRe extends bv{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:m("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:ge.MenubarSelectionMenu,group:"3_multi",title:m({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class vRe extends bv{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:m("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:zn(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class CRe extends bv{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:m("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class wRe extends bv{constructor(){super({id:"editor.action.selectHighlights",label:m("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:3114,weight:100},menuOpts:{menuId:ge.MenubarSelectionMenu,group:"3_multi",title:m({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class yRe extends bv{constructor(){super({id:"editor.action.changeAll",label:m("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:K.and(I.writable,I.editorTextFocus),kbOpts:{kbExpr:I.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class SRe{constructor(e,t,n,i,o){this._model=e,this._searchText=t,this._matchCase=n,this._wordSeparators=i,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(e=>e.range),this._cachedFindMatches.sort(L.compareRangesUsingStarts)),this._cachedFindMatches}}var Mg;let hD=(Mg=class extends F{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(109),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new It(()=>this._update(),300)),this.state=null,this._register(e.onDidChangeConfiguration(i=>{this._isEnabled=e.getOption(109)})),this._register(e.onDidChangeCursorSelection(i=>{this._isEnabled&&(i.selection.isEmpty()?i.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(e.onDidChangeModel(i=>{this._setState(null)})),this._register(e.onDidChangeModelContent(i=>{this._isEnabled&&this.updateSoon.schedule()}));const n=Xs.get(e);n&&this._register(n.getState().onFindReplaceStateChange(i=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(Y4._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,n){if(!t||!n.hasModel())return null;const i=n.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;const o=Vb.get(n);if(!o)return null;const r=Xs.get(n);if(!r)return null;let a=o.getSession(r);if(!a){const d=n.getSelections();if(d.length>1){const u=r.getState().matchCase;if(!hJ(n.getModel(),d,u))return null}a=J1.create(n,r)}if(!a||a.currentMatch||/^[ \t]+$/.test(a.searchText)||a.searchText.length>200)return null;const l=r.getState(),c=l.matchCase;if(l.isRevealed){let d=l.searchString;c||(d=d.toLowerCase());let h=a.searchText;if(c||(h=h.toLowerCase()),d===h&&a.matchCase===l.matchCase&&a.wholeWord===l.wholeWord&&!l.isRegex)return null}return new SRe(n.getModel(),a.searchText,a.matchCase,a.wholeWord?n.getOption(132):null,e)}_setState(e){if(this.state=e,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const n=this.state.findMatches(),i=this.editor.getSelections();i.sort(L.compareRangesUsingStarts);const o=[];for(let c=0,d=0,h=n.length,u=i.length;c<h;){const f=n[c];if(d>=u)o.push(f),c++;else{const g=L.compareRangesUsingStarts(f,i[d]);g<0?((i[d].isEmpty()||!L.areIntersecting(f,i[d]))&&o.push(f),c++):(g>0||c++,d++)}}const r=this.editor.getOption(81)!=="off",a=this._languageFeaturesService.documentHighlightProvider.has(t)&&r,l=o.map(c=>({range:c,options:cRe(a)}));this._decorations.set(l)}dispose(){this._setState(null),super.dispose()}},Y4=Mg,Mg.ID="editor.contrib.selectionHighlighter",Mg);hD=Y4=dRe([hRe(1,ue)],hD);function hJ(s,e,t){const n=Q$(s,e[0],!t);for(let i=1,o=e.length;i<o;i++){const r=e[i];if(r.isEmpty())return!1;const a=Q$(s,r,!t);if(n!==a)return!1}return!0}function Q$(s,e,t){const n=s.getValueInRange(e);return t?n.toLowerCase():n}class kRe extends he{constructor(){super({id:"editor.action.focusNextCursor",label:m("mutlicursor.focusNextCursor","Focus Next Cursor"),metadata:{description:m("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;const i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();const o=Array.from(i.getCursorStates()),r=o.shift();r&&(o.push(r),i.setCursorStates(n.source,3,o),i.revealPrimaryCursor(n.source,!0),Eu(o,i.getCursorStates()))}}class LRe extends he{constructor(){super({id:"editor.action.focusPreviousCursor",label:m("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),metadata:{description:m("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,n){if(!t.hasModel())return;const i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();const o=Array.from(i.getCursorStates()),r=o.pop();r&&(o.unshift(r),i.setCursorStates(n.source,3,o),i.revealPrimaryCursor(n.source,!0),Eu(o,i.getCursorStates()))}}dt(Vb.ID,Vb,4);dt(hD.ID,hD,1);Q(uRe);Q(fRe);Q(gRe);Q(_Re);Q(bRe);Q(vRe);Q(CRe);Q(wRe);Q(yRe);Q(mRe);Q(pRe);Q(kRe);Q(LRe);const xRe="editor.action.inlineEdit.accept",DRe="editor.action.inlineEdit.reject",IRe="editor.action.inlineEdit.jumpTo",TRe="editor.action.inlineEdit.jumpBack";var ERe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},NRe=function(s,e){return function(t,n){e(t,n,s)}};const a2="inline-edit";let X4=class extends F{constructor(e,t,n){super(),this.editor=e,this.model=t,this.languageService=n,this.isDisposed=Ge(this,!1),this.currentTextModel=kt(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=_e(this,i=>{var v;if(this.isDisposed.read(i))return;const o=this.currentTextModel.read(i);if(o!==this.model.targetTextModel.read(i))return;const r=this.model.ghostText.read(i);if(!r)return;let a=(v=this.model.range)==null?void 0:v.read(i);a&&a.startLineNumber===a.endLineNumber&&a.startColumn===a.endColumn&&(a=void 0);const l=(a?a.startLineNumber===a.endLineNumber:!0)&&r.parts.length===1&&r.parts[0].lines.length===1,c=r.parts.length===1&&r.parts[0].lines.every(C=>C.length===0),d=[],h=[];function u(C,w){if(h.length>0){const y=h[h.length-1];w&&y.decorations.push(new ws(y.content.length+1,y.content.length+1+C[0].length,w,0)),y.content+=C[0],C=C.slice(1)}for(const y of C)h.push({content:y,decorations:w?[new ws(1,y.length+1,w,0)]:[]})}const f=o.getLineContent(r.lineNumber);let g,p=0;if(!c&&(l||!a)){for(const C of r.parts){let w=C.lines;a&&!l&&(u(w,a2),w=[]),g===void 0?(d.push({column:C.column,text:w[0],preview:C.preview}),w=w.slice(1)):u([f.substring(p,C.column-1)],void 0),w.length>0&&(u(w,a2),g===void 0&&C.column<=f.length&&(g=C.column)),p=C.column-1}g!==void 0&&u([f.substring(p)],void 0)}const _=g!==void 0?new qQ(g,f.length+1):void 0,b=l||!a?r.lineNumber:a.endLineNumber-1;return{inlineTexts:d,additionalLines:h,hiddenRange:_,lineNumber:b,additionalReservedLineCount:this.model.minReservedLineCount.read(i),targetTextModel:o,range:a,isSingleLine:l,isPureRemove:c}}),this.decorations=_e(this,i=>{const o=this.uiState.read(i);if(!o)return[];const r=[];if(o.hiddenRange&&r.push({range:o.hiddenRange.toRange(o.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),o.range){const a=[];if(o.isSingleLine)a.push(o.range);else if(!o.isPureRemove){const l=o.range.endLineNumber-o.range.startLineNumber;for(let c=0;c<l;c++){const d=o.range.startLineNumber+c,h=o.targetTextModel.getLineFirstNonWhitespaceColumn(d),u=o.targetTextModel.getLineLastNonWhitespaceColumn(d),f=new L(d,h,d,u);a.push(f)}}for(const l of a)r.push({range:l,options:Db})}if(o.range&&!o.isSingleLine&&o.isPureRemove){const a=new L(o.range.startLineNumber,1,o.range.endLineNumber-1,1);r.push({range:a,options:E1})}for(const a of o.inlineTexts)r.push({range:L.fromPositions(new A(o.lineNumber,a.column)),options:{description:a2,after:{content:a.text,inlineClassName:a.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:Zr.Left},showIfCollapsed:!0}});return r}),this._register(ve(()=>{this.isDisposed.set(!0,void 0)})),this._register(KQ(this.editor,this.decorations))}};X4=ERe([NRe(2,tn)],X4);var jB=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Nl=function(s,e){return function(t,n){e(t,n,s)}},hk;let Q4=class extends F{constructor(e,t,n){super(),this.editor=e,this.model=t,this.instantiationService=n,this.alwaysShowToolbar=kt(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).showToolbar==="always"),this.sessionPosition=void 0,this.position=_e(this,i=>{var l,c;const o=(l=this.model.read(i))==null?void 0:l.model.ghostText.read(i);if(!this.alwaysShowToolbar.read(i)||!o||o.parts.length===0)return this.sessionPosition=void 0,null;const r=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);const a=new A(o.lineNumber,Math.min(r,((c=this.sessionPosition)==null?void 0:c.column)??Number.MAX_SAFE_INTEGER));return this.sessionPosition=a,a}),this._register(Ks((i,o)=>{if(!this.model.read(i)||!this.alwaysShowToolbar.read(i))return;const a=o.add(this.instantiationService.createInstance(J4,this.editor,!0,this.position));e.addContentWidget(a),o.add(ve(()=>e.removeContentWidget(a)))}))}};Q4=jB([Nl(2,Ce)],Q4);var Qh;let J4=(Qh=class extends F{constructor(e,t,n,i,o,r){super(),this.editor=e,this.withBorder=t,this._position=n,this._contextKeyService=o,this._menuService=r,this.id=`InlineEditHintsContentWidget${hk.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=Qe("div.inlineEditHints",{className:this.withBorder?".withBorder":""},[Qe("div@toolBar")]),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(ge.InlineEditActions,this._contextKeyService)),this.toolBar=this._register(i.createInstance(e5,this.nodes.toolBar,this.editor,ge.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:a=>a.startsWith("primary")},actionViewItemProvider:(a,l)=>{if(a instanceof bo)return i.createInstance(RRe,a,void 0)},telemetrySource:"InlineEditToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility(a=>{hk._dropDownVisible=a})),this._register(Ae(a=>{this._position.read(a),this.editor.layoutContentWidget(this)})),this._register(Ae(a=>{const l=[];for(const[c,d]of this.inlineCompletionsActionsMenus.getActions())for(const h of d)h instanceof bo&&l.push(h);l.length>0&&l.unshift(new ri),this.toolBar.setAdditionalSecondaryActions(l)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}},hk=Qh,Qh._dropDownVisible=!1,Qh.id=0,Qh);J4=hk=jB([Nl(3,Ce),Nl(4,Ie),Nl(5,nr)],J4);class RRe extends uu{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=Qe("div.keybinding").root;this._register(new cv(t,mo,{disableTitle:!0,...BZ})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineEditStatusBarItemLabel")}}updateTooltip(){}}let e5=class extends R1{constructor(e,t,n,i,o,r,a,l,c,d){super(e,{resetMenu:n,...i},o,r,a,l,c,d),this.editor=t,this.menuId=n,this.options2=i,this.menuService=o,this.contextKeyService=r,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this._store.add(this.editor.onDidChangeCursorPosition(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){var n,i,o,r,a,l,c;const e=[],t=[];iE(this.menu,(n=this.options2)==null?void 0:n.menuOptions,{primary:e,secondary:t},(o=(i=this.options2)==null?void 0:i.toolbarOptions)==null?void 0:o.primaryGroup,(a=(r=this.options2)==null?void 0:r.toolbarOptions)==null?void 0:a.shouldInlineSubmenu,(c=(l=this.options2)==null?void 0:l.toolbarOptions)==null?void 0:c.useSeparatorsInPrimaryActions),t.push(...this.additionalActions),e.unshift(...this.prependedPrimaryActions),this.setActions(e,t)}setAdditionalSecondaryActions(e){en(this.additionalActions,e,(t,n)=>t===n)||(this.additionalActions=e,this.updateToolbar())}};e5=jB([Nl(4,nr),Nl(5,Ie),Nl(6,Lo),Nl(7,wt),Nl(8,Wt),Nl(9,Zi)],e5);var uJ=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},uk=function(s,e){return function(t,n){e(t,n,s)}},pC,t5;function*MRe(s,e,t=1){e===void 0&&([e,s]=[s,0]);for(let n=s;n<e;n+=t)yield n}function l2(s){var n;const e=((n=s[0].match(/^\s*/))==null?void 0:n[0])??"",t=e.length;return{text:s.map(i=>i.replace(new RegExp("^"+e),"")),shift:t}}var Ag;let n5=(Ag=class extends F{static _createUniqueUri(){return Se.from({scheme:"inline-edit-widget",path:new Date().toString()+String(pC._modelId++)})}constructor(e,t,n,i,o){super(),this._editor=e,this._model=t,this._instantiationService=n,this._diffProviderFactoryService=i,this._modelService=o,this._position=_e(this,r=>{const a=this._model.read(r);if(!a||a.text.length===0||a.range.startLineNumber===a.range.endLineNumber&&!(a.range.startColumn===a.range.endColumn&&a.range.startColumn===1))return null;const l=this._editor.getModel();if(!l)return null;const c=Array.from(MRe(a.range.startLineNumber,a.range.endLineNumber+1)),d=c.map(p=>l.getLineLastNonWhitespaceColumn(p)),h=Math.max(...d),u=c[d.indexOf(h)],f=new A(u,h);return{top:a.range.startLineNumber,left:f}}),this._text=_e(this,r=>{const a=this._model.read(r);if(!a)return{text:"",shift:0};const l=l2(a.text.split(`
`));return{text:l.text.join(`
`),shift:l.shift}}),this._originalModel=os(()=>this._modelService.createModel("",null,pC._createUniqueUri())).keepObserved(this._store),this._modifiedModel=os(()=>this._modelService.createModel("",null,pC._createUniqueUri())).keepObserved(this._store),this._diff=_e(this,r=>{var a,l;return(l=(a=this._diffPromise.read(r))==null?void 0:a.promiseResult.read(r))==null?void 0:l.data}),this._diffPromise=_e(this,r=>{const a=this._model.read(r);if(!a)return;const l=this._editor.getModel();if(!l)return;const c=l2(l.getValueInRange(a.range).split(`
`)).text.join(`
`),d=l2(a.text.split(`
`)).text.join(`
`);this._originalModel.get().setValue(c),this._modifiedModel.get().setValue(d);const h=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return eE.fromFn(async()=>{const u=await h.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},Ue.None);if(!u.identical)return u.changes})}),this._register(Ks((r,a)=>{if(!this._model.read(r)||this._position.get()===null)return;const c=a.add(this._instantiationService.createInstance(i5,this._editor,this._position,this._text.map(d=>d.text),this._text.map(d=>d.shift),this._diff));e.addOverlayWidget(c),a.add(ve(()=>e.removeOverlayWidget(c)))}))}},pC=Ag,Ag._modelId=0,Ag);n5=pC=uJ([uk(2,Ce),uk(3,H0),uk(4,Ut)],n5);var Pg;let i5=(Pg=class extends F{constructor(e,t,n,i,o,r){var a;super(),this._editor=e,this._position=t,this._text=n,this._shift=i,this._diff=o,this._instantiationService=r,this.id=`InlineEditSideBySideContentWidget${t5.id++}`,this.allowEditorOverflow=!1,this._nodes=te("div.inlineEditSideBySide",void 0),this._scrollChanged=Pi("editor.onDidScrollChange",this._editor.onDidScrollChange),this._previewEditor=this._register(this._instantiationService.createInstance(aa,this._nodes,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollbar:{vertical:"hidden",horizontal:"hidden",alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},readOnly:!0,wordWrap:"off",wordWrapOverride1:"off",wordWrapOverride2:"off",wrappingIndent:"none",wrappingStrategy:void 0},{contributions:[],isSimpleWidget:!0},this._editor)),this._previewEditorObs=go(this._previewEditor),this._editorObs=go(this._editor),this._previewTextModel=this._register(this._instantiationService.createInstance(Pa,"",((a=this._editor.getModel())==null?void 0:a.getLanguageId())??xs,Pa.DEFAULT_CREATION_OPTIONS,null)),this._setText=_e(l=>{const c=this._text.read(l);c&&this._previewTextModel.setValue(c)}).recomputeInitiallyAndOnChange(this._store),this._decorations=_e(this,l=>{this._setText.read(l);const c=this._position.read(l);if(!c)return{org:[],mod:[]};const d=this._diff.read(l);if(!d)return{org:[],mod:[]};const h=[],u=[];if(d.length===1&&d[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return{org:[],mod:[]};const f=this._shift.get(),g=p=>new L(p.startLineNumber+c.top-1,p.startColumn+f,p.endLineNumber+c.top-1,p.endColumn+f);for(const p of d)if(p.original.isEmpty||h.push({range:g(p.original.toInclusiveRange()),options:E1}),p.modified.isEmpty||u.push({range:p.modified.toInclusiveRange(),options:mx}),p.modified.isEmpty||p.original.isEmpty)p.original.isEmpty||h.push({range:g(p.original.toInclusiveRange()),options:XW}),p.modified.isEmpty||u.push({range:p.modified.toInclusiveRange(),options:ZW});else for(const _ of p.innerChanges||[])p.original.contains(_.originalRange.startLineNumber)&&h.push({range:g(_.originalRange),options:_.originalRange.isEmpty()?QW:Db}),p.modified.contains(_.modifiedRange.startLineNumber)&&u.push({range:_.modifiedRange,options:_.modifiedRange.isEmpty()?YW:px});return{org:h,mod:u}}),this._originalDecorations=_e(this,l=>this._decorations.read(l).org),this._modifiedDecorations=_e(this,l=>this._decorations.read(l).mod),this._previewEditor.setModel(this._previewTextModel),this._register(this._editorObs.setDecorations(this._originalDecorations)),this._register(this._previewEditorObs.setDecorations(this._modifiedDecorations)),this._register(Ae(l=>{const c=this._previewEditorObs.contentWidth.read(l),d=this._text.read(l).split(`
`).length-1,h=this._editor.getOption(67)*d;c<=0||this._previewEditor.layout({height:h,width:c})})),this._register(Ae(l=>{this._position.read(l),this._editor.layoutOverlayWidget(this)})),this._register(Ae(l=>{this._scrollChanged.read(l),this._position.read(l)&&this._editor.layoutOverlayWidget(this)}))}getId(){return this.id}getDomNode(){return this._nodes}getPosition(){const e=this._position.get();if(!e)return null;const t=this._editor.getLayoutInfo(),n=this._editor.getScrolledVisiblePosition(new A(e.top,1));if(!n)return null;const i=n.top-1,o=this._editor.getOffsetForColumn(e.left.lineNumber,e.left.column);return{preference:{left:t.contentLeft+o+10,top:i}}}},t5=Pg,Pg.id=0,Pg);i5=t5=uJ([uk(5,Ce)],i5);var ARe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Gu=function(s,e){return function(t,n){e(t,n,s)}},_C,ur;let ys=(ur=class extends F{static get(e){return e.getContribution(_C.ID)}constructor(e,t,n,i,o,r,a,l){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=n,this.languageFeaturesService=i,this._commandService=o,this._configurationService=r,this._diffProviderFactoryService=a,this._modelService=l,this._isVisibleContext=_C.inlineEditVisibleContext.bindTo(this.contextKeyService),this._isCursorAtInlineEditContext=_C.cursorAtInlineEditContext.bindTo(this.contextKeyService),this._currentEdit=Ge(this,void 0),this._currentWidget=os(this._currentEdit,g=>{const p=this._currentEdit.read(g);if(!p)return;const _=p.range.endLineNumber,b=p.range.endColumn,v=p.text.endsWith(`
`)&&!(p.range.startLineNumber===p.range.endLineNumber&&p.range.startColumn===p.range.endColumn)?p.text.slice(0,-1):p.text,C=new K1(_,[new Ux(b,v,!1)]),w=p.range.startLineNumber===p.range.endLineNumber&&C.parts.length===1&&C.parts[0].lines.length===1,y=p.text==="";return!w&&!y?void 0:this.instantiationService.createInstance(X4,this.editor,{ghostText:br(C),minReservedLineCount:br(0),targetTextModel:br(this.editor.getModel()??void 0),range:br(p.range)})}),this._isAccepting=Ge(this,!1),this._enabled=kt(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).enabled),this._fontFamily=kt(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).fontFamily);const c=Pi("InlineEditController.modelContentChangedSignal",e.onDidChangeModelContent);this._register(Ae(g=>{this._enabled.read(g)&&(c.read(g),!this._isAccepting.read(g)&&this.getInlineEdit(e,!0))}));const d=kt(this,e.onDidChangeCursorPosition,()=>e.getPosition());this._register(Ae(g=>{if(!this._enabled.read(g))return;const p=d.read(g);p&&this.checkCursorPosition(p)})),this._register(Ae(g=>{const p=this._currentEdit.read(g);if(this._isCursorAtInlineEditContext.set(!1),!p){this._isVisibleContext.set(!1);return}this._isVisibleContext.set(!0);const _=e.getPosition();_&&this.checkCursorPosition(_)}));const h=Pi("InlineEditController.editorBlurSignal",e.onDidBlurEditorWidget);this._register(Ae(async g=>{var p;this._enabled.read(g)&&(h.read(g),!(this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||e.getOption(63).keepOnBlur)&&((p=this._currentRequestCts)==null||p.dispose(!0),this._currentRequestCts=void 0,await this.clear(!1)))}));const u=Pi("InlineEditController.editorFocusSignal",e.onDidFocusEditorText);this._register(Ae(g=>{this._enabled.read(g)&&(u.read(g),this.getInlineEdit(e,!0))}));const f=this._register(wq());this._register(Ae(g=>{const p=this._fontFamily.read(g);f.setStyle(p===""||p==="default"?"":`
.monaco-editor .inline-edit-decoration,
.monaco-editor .inline-edit-decoration-preview,
.monaco-editor .inline-edit {
	font-family: ${p};
}`)})),this._register(new Q4(this.editor,this._currentWidget,this.instantiationService)),this._register(new n5(this.editor,this._currentEdit,this.instantiationService,this._diffProviderFactoryService,this._modelService))}checkCursorPosition(e){if(!this._currentEdit){this._isCursorAtInlineEditContext.set(!1);return}const t=this._currentEdit.get();if(!t){this._isCursorAtInlineEditContext.set(!1);return}this._isCursorAtInlineEditContext.set(L.containsPosition(t.range,e))}validateInlineEdit(e,t){var n;if(t.text.includes(`
`)&&t.range.startLineNumber!==t.range.endLineNumber&&t.range.startColumn!==t.range.endColumn){if(t.range.startColumn!==1)return!1;const o=t.range.endLineNumber,r=t.range.endColumn,a=((n=e.getModel())==null?void 0:n.getLineLength(o))??0;if(r!==a+1)return!1}return!0}async fetchInlineEdit(e,t){this._currentRequestCts&&this._currentRequestCts.dispose(!0);const n=e.getModel();if(!n)return;const i=n.getVersionId(),o=this.languageFeaturesService.inlineEditProvider.all(n);if(o.length===0)return;const r=o[0];this._currentRequestCts=new an;const a=this._currentRequestCts.token,l=t?Mk.Automatic:Mk.Invoke;if(t&&await PRe(50,a),a.isCancellationRequested||n.isDisposed()||n.getVersionId()!==i)return;const d=await r.provideInlineEdit(n,{triggerKind:l},a);if(d&&!(a.isCancellationRequested||n.isDisposed()||n.getVersionId()!==i)&&this.validateInlineEdit(e,d))return d}async getInlineEdit(e,t){this._isCursorAtInlineEditContext.set(!1),await this.clear();const n=await this.fetchInlineEdit(e,t);n&&this._currentEdit.set(n,void 0)}async trigger(){await this.getInlineEdit(this.editor,!1)}async jumpBack(){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition))}async accept(){this._isAccepting.set(!0,void 0);const e=this._currentEdit.get();if(!e)return;let t=e.text;e.text.startsWith(`
`)&&(t=e.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[on.replace(L.lift(e.range),t)]),e.accepted&&await this._commandService.executeCommand(e.accepted.id,...e.accepted.arguments||[]).then(void 0,kn),this.freeEdit(e),rn(n=>{this._currentEdit.set(void 0,n),this._isAccepting.set(!1,n)})}jumpToCurrent(){var n;this._jumpBackPosition=(n=this.editor.getSelection())==null?void 0:n.getStartPosition();const e=this._currentEdit.get();if(!e)return;const t=A.lift({lineNumber:e.range.startLineNumber,column:e.range.startColumn});this.editor.setPosition(t),this.editor.revealPositionInCenterIfOutsideViewport(t)}async clear(e=!0){const t=this._currentEdit.get();t&&(t!=null&&t.rejected)&&e&&await this._commandService.executeCommand(t.rejected.id,...t.rejected.arguments||[]).then(void 0,kn),t&&this.freeEdit(t),this._currentEdit.set(void 0,void 0)}freeEdit(e){const t=this.editor.getModel();if(!t)return;const n=this.languageFeaturesService.inlineEditProvider.all(t);n.length!==0&&n[0].freeInlineEdit(e)}},_C=ur,ur.ID="editor.contrib.inlineEditController",ur.inlineEditVisibleKey="inlineEditVisible",ur.inlineEditVisibleContext=new le(ur.inlineEditVisibleKey,!1),ur.cursorAtInlineEditKey="cursorAtInlineEdit",ur.cursorAtInlineEditContext=new le(ur.cursorAtInlineEditKey,!1),ur);ys=_C=ARe([Gu(1,Ce),Gu(2,Ie),Gu(3,ue),Gu(4,Wt),Gu(5,Ze),Gu(6,H0),Gu(7,Ut)],ys);function PRe(s,e){return new Promise(t=>{let n;const i=setTimeout(()=>{n&&n.dispose(),t()},s);e&&(n=e.onCancellationRequested(()=>{clearTimeout(i),n&&n.dispose(),t()}))})}let ORe=class extends he{constructor(){super({id:xRe,label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:K.and(I.writable,ys.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:K.and(I.writable,ys.inlineEditVisibleContext,ys.cursorAtInlineEditContext)}],menuOpts:[{menuId:ge.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})}async run(e,t){const n=ys.get(t);await(n==null?void 0:n.accept())}};class FRe extends he{constructor(){const e=K.and(I.writable,K.not(ys.inlineEditVisibleKey));super({id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e}})}async run(e,t){const n=ys.get(t);n==null||n.trigger()}}class WRe extends he{constructor(){const e=K.and(I.writable,ys.inlineEditVisibleContext,K.not(ys.cursorAtInlineEditKey));super({id:IRe,label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e},menuOpts:[{menuId:ge.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:e}]})}async run(e,t){const n=ys.get(t);n==null||n.jumpToCurrent()}}class BRe extends he{constructor(){const e=K.and(I.writable,ys.cursorAtInlineEditContext);super({id:TRe,label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:e,kbOpts:{weight:110,primary:2646,kbExpr:e},menuOpts:[{menuId:ge.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:e}]})}async run(e,t){const n=ys.get(t);n==null||n.jumpBack()}}class HRe extends he{constructor(){const e=K.and(I.writable,ys.inlineEditVisibleContext);super({id:DRe,label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:e,kbOpts:{weight:100,primary:9,kbExpr:e},menuOpts:[{menuId:ge.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})}async run(e,t){const n=ys.get(t);await(n==null?void 0:n.clear())}}Q(ORe);Q(HRe);Q(WRe);Q(BRe);Q(FRe);dt(ys.ID,ys,3);const VRe="editor.action.inlineEdits.accept",zRe="editor.action.inlineEdits.showPrevious",$Re="editor.action.inlineEdits.showNext",zb=new le("inlineEditsVisible",!1,m("inlineEditsVisible","Whether an inline edit is visible")),URe=new le("inlineEditsIsPinned",!1,m("isPinned","Whether an inline edit is visible")),u7=class u7 extends F{constructor(e){super(),this._editor=e,this._editorObs=go(this._editor),this._placeholderText=this._editorObs.getOption(88),this._state=Ho({owner:this,equalsFn:pL},t=>{const n=this._placeholderText.read(t);if(n&&this._editorObs.valueIsEmpty.read(t))return{placeholder:n}}),this._shouldViewBeAlive=jRe(this,t=>{var n;return((n=this._state.read(t))==null?void 0:n.placeholder)!==void 0}),this._view=xu((t,n)=>{if(!this._shouldViewBeAlive.read(t))return;const i=Qe("div.editorPlaceholder");n.add(Ae(o=>{const r=this._state.read(o),a=(r==null?void 0:r.placeholder)!==void 0;i.root.style.display=a?"block":"none",i.root.innerText=(r==null?void 0:r.placeholder)??""})),n.add(Ae(o=>{const r=this._editorObs.layoutInfo.read(o);i.root.style.left=`${r.contentLeft}px`,i.root.style.width=r.contentWidth-r.verticalScrollbarWidth+"px",i.root.style.top=`${this._editor.getTopForLineNumber(0)}px`})),n.add(Ae(o=>{i.root.style.fontFamily=this._editorObs.getOption(49).read(o),i.root.style.fontSize=this._editorObs.getOption(52).read(o)+"px",i.root.style.lineHeight=this._editorObs.getOption(67).read(o)+"px"})),n.add(this._editorObs.createOverlayWidget({allowEditorOverflow:!1,minContentWidthInPx:br(0),position:br(null),domNode:i.root}))}),this._view.recomputeInitiallyAndOnChange(this._store)}};u7.ID="editor.contrib.placeholderText";let e0=u7;function jRe(s,e){return N0(s,(t,n)=>n===!0?!0:e(t))}var qRe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},KRe=function(s,e){return function(t,n){e(t,n,s)}};class GRe{constructor(e,t,n){this.range=e,this.newLines=t,this.changes=n}}let s5=class extends F{constructor(e,t,n,i){super(),this._editor=e,this._edit=t,this._userPrompt=n,this._instantiationService=i,this._editorObs=go(this._editor),this._elements=Qe("div.inline-edits-widget",{style:{position:"absolute",overflow:"visible",top:"0px",left:"0px"}},[Qe("div@editorContainer",{style:{position:"absolute",top:"0px",left:"0px",width:"500px",height:"500px"}},[Qe("div.toolbar@toolbar",{style:{position:"absolute",top:"-25px",left:"0px"}}),Qe("div.promptEditor@promptEditor",{style:{position:"absolute",top:"-25px",left:"80px",width:"300px",height:"22px"}}),Qe("div.preview@editor",{style:{position:"absolute",top:"0px",left:"0px"}})]),Qm("svg",{style:{overflow:"visible",pointerEvents:"none"}},[Qm("defs",[Qm("linearGradient",{id:"Gradient2",x1:"0",y1:"0",x2:"1",y2:"0"},[Qm("stop",{offset:"0%",class:"gradient-stop"}),Qm("stop",{offset:"100%",class:"gradient-stop"})])]),Qm("path@path",{d:"",fill:"url(#Gradient2)"})])]),this._previewTextModel=this._register(this._instantiationService.createInstance(Pa,"",xs,Pa.DEFAULT_CREATION_OPTIONS,null)),this._setText=_e(r=>{const a=this._edit.read(r);a&&this._previewTextModel.setValue(a.newLines.join(`
`))}).recomputeInitiallyAndOnChange(this._store),this._promptTextModel=this._register(this._instantiationService.createInstance(Pa,"",xs,Pa.DEFAULT_CREATION_OPTIONS,null)),this._promptEditor=this._register(this._instantiationService.createInstance(aa,this._elements.promptEditor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,placeholder:"Describe the change you want...",fontFamily:yY},{contributions:Vf.getSomeEditorContributions([Yr.ID,e0.ID,Ab.ID]),isSimpleWidget:!0},this._editor)),this._previewEditor=this._register(this._instantiationService.createInstance(aa,this._elements.editor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0},{contributions:[]},this._editor)),this._previewEditorObs=go(this._previewEditor),this._decorations=_e(this,r=>{var d;this._setText.read(r);const a=(d=this._edit.read(r))==null?void 0:d.changes;if(!a)return[];const l=[],c=[];if(a.length===1&&a[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return[];for(const h of a)if(h.original.isEmpty||l.push({range:h.original.toInclusiveRange(),options:E1}),h.modified.isEmpty||c.push({range:h.modified.toInclusiveRange(),options:mx}),h.modified.isEmpty||h.original.isEmpty)h.original.isEmpty||l.push({range:h.original.toInclusiveRange(),options:XW}),h.modified.isEmpty||c.push({range:h.modified.toInclusiveRange(),options:ZW});else for(const u of h.innerChanges||[])h.original.contains(u.originalRange.startLineNumber)&&l.push({range:u.originalRange,options:u.originalRange.isEmpty()?QW:Db}),h.modified.contains(u.modifiedRange.startLineNumber)&&c.push({range:u.modifiedRange,options:u.modifiedRange.isEmpty()?YW:px});return c}),this._layout1=_e(this,r=>{const a=this._editor.getModel(),l=this._edit.read(r);if(!l)return null;const c=l.range;let d=0;for(let f=c.startLineNumber;f<c.endLineNumberExclusive;f++){const g=a.getLineMaxColumn(f),p=this._editor.getOffsetForColumn(f,g);d=Math.max(d,p)}return{left:this._editor.getLayoutInfo().contentLeft+d}}),this._layout=_e(this,r=>{const a=this._edit.read(r);if(!a)return null;const l=a.range,c=this._editorObs.scrollLeft.read(r),d=this._layout1.read(r).left+20-c,h=this._editor.getTopForLineNumber(l.startLineNumber)-this._editorObs.scrollTop.read(r),u=this._editor.getTopForLineNumber(l.endLineNumberExclusive)-this._editorObs.scrollTop.read(r),f=new Xp(d,h),g=new Xp(d,u),p=u-h,_=50,b=this._editor.getOption(67)*a.newLines.length,v=p-b,C=new Xp(d+_,h+v/2),w=new Xp(d+_,u-v/2);return{topCode:f,bottomCode:g,codeHeight:p,topEdit:C,bottomEdit:w,editHeight:b}});const o=_e(this,r=>this._edit.read(r)!==void 0||this._userPrompt.read(r)!==void 0);this._register(wd(this._elements.root,{display:_e(this,r=>o.read(r)?"block":"none")})),this._register(Up(this._editor.getDomNode(),this._elements.root)),this._register(go(e).createOverlayWidget({domNode:this._elements.root,position:br(null),allowEditorOverflow:!1,minContentWidthInPx:_e(r=>{var c;const a=(c=this._layout1.read(r))==null?void 0:c.left;if(a===void 0)return 0;const l=this._previewEditorObs.contentWidth.read(r);return a+l})})),this._previewEditor.setModel(this._previewTextModel),this._register(this._previewEditorObs.setDecorations(this._decorations)),this._register(Ae(r=>{const a=this._layout.read(r);if(!a)return;const{topCode:l,bottomCode:c,topEdit:d,bottomEdit:h,editHeight:u}=a,f=10,g=0,p=40,_=new YRe().moveTo(l).lineTo(l.deltaX(f)).curveTo(l.deltaX(f+p),d.deltaX(-p-g),d.deltaX(-g)).lineTo(d).lineTo(h).lineTo(h.deltaX(-g)).curveTo(h.deltaX(-p-g),c.deltaX(f+p),c.deltaX(f)).lineTo(c).build();this._elements.path.setAttribute("d",_),this._elements.editorContainer.style.top=`${d.y}px`,this._elements.editorContainer.style.left=`${d.x}px`,this._elements.editorContainer.style.height=`${u}px`;const b=this._previewEditorObs.contentWidth.read(r);this._previewEditor.layout({height:u,width:b})})),this._promptEditor.setModel(this._promptTextModel),this._promptEditor.layout(),this._register(XRe(ZRe(this._userPrompt,r=>r??"",r=>r),go(this._promptEditor).value)),this._register(Ae(r=>{const a=go(this._promptEditor).isFocused.read(r);this._elements.root.classList.toggle("focused",a)}))}};s5=qRe([KRe(3,Ce)],s5);function ZRe(s,e,t){return I0(void 0,n=>e(s.read(n)),(n,i)=>s.set(t(n),i))}class Xp{constructor(e,t){this.x=e,this.y=t}deltaX(e){return new Xp(this.x+e,this.y)}}class YRe{constructor(){this._data=""}moveTo(e){return this._data+=`M ${e.x} ${e.y} `,this}lineTo(e){return this._data+=`L ${e.x} ${e.y} `,this}curveTo(e,t,n){return this._data+=`C ${e.x} ${e.y} ${t.x} ${t.y} ${n.x} ${n.y} `,this}build(){return this._data}}function XRe(s,e){const t=new q;return t.add(Ae(n=>{const i=s.read(n);e.set(i,void 0)})),t.add(Ae(n=>{const i=e.read(n);s.set(i,void 0)})),t}var QRe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},c2=function(s,e){return function(t,n){e(t,n,s)}},bC,Og;let o5=(Og=class extends F{static _createUniqueUri(){return Se.from({scheme:"inline-edits",path:new Date().toString()+String(bC._modelId++)})}constructor(e,t,n,i,o,r,a){super(),this.textModel=e,this._textModelVersionId=t,this._selection=n,this._debounceValue=i,this.languageFeaturesService=o,this._diffProviderFactoryService=r,this._modelService=a,this._forceUpdateExplicitlySignal=ov(this),this._selectedInlineCompletionId=Ge(this,void 0),this._isActive=Ge(this,!1),this._originalModel=os(()=>this._modelService.createModel("",null,bC._createUniqueUri())).keepObserved(this._store),this._modifiedModel=os(()=>this._modelService.createModel("",null,bC._createUniqueUri())).keepObserved(this._store),this._pinnedRange=new e2e(this.textModel,this._textModelVersionId),this.isPinned=this._pinnedRange.range.map(l=>!!l),this.userPrompt=Ge(this,void 0),this.inlineEdit=_e(this,l=>{var c,d;return(d=(c=this._inlineEdit.read(l))==null?void 0:c.promiseResult.read(l))==null?void 0:d.data}),this._inlineEdit=_e(this,l=>{const c=this.selectedInlineEdit.read(l);if(!c)return;const d=c.inlineCompletion.range;if(c.inlineCompletion.insertText.trim()==="")return;let h=c.inlineCompletion.insertText.split(/\r\n|\r|\n/);function u(_){var v;const b=((v=_[0].match(/^\s*/))==null?void 0:v[0])??"";return _.map(C=>C.replace(new RegExp("^"+b),""))}h=u(h);let g=this.textModel.getValueInRange(d).split(/\r\n|\r|\n/);g=u(g),this._originalModel.get().setValue(g.join(`
`)),this._modifiedModel.get().setValue(h.join(`
`));const p=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return eE.fromFn(async()=>{const _=await p.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},Ue.None);if(!_.identical)return new GRe(ze.fromRangeInclusive(d),u(h),_.changes)})}),this._fetchStore=this._register(new q),this._inlineEditsFetchResult=a1(this,void 0),this._inlineEdits=Ho({owner:this,equalsFn:pL},l=>{var c;return((c=this._inlineEditsFetchResult.read(l))==null?void 0:c.completions.map(d=>new JRe(d)))??[]}),this._fetchInlineEditsPromise=_G({owner:this,createEmptyChangeSummary:()=>({inlineCompletionTriggerKind:Wa.Automatic}),handleChange:(l,c)=>(l.didChange(this._forceUpdateExplicitlySignal)&&(c.inlineCompletionTriggerKind=Wa.Explicit),!0)},async(l,c)=>{this._fetchStore.clear(),this._forceUpdateExplicitlySignal.read(l),this._textModelVersionId.read(l);function d(p,_){return _(p)}const h=this._pinnedRange.range.read(l)??d(this._selection.read(l),p=>p.isEmpty()?void 0:p);if(!h){this._inlineEditsFetchResult.set(void 0,void 0),this.userPrompt.set(void 0,void 0);return}const u={triggerKind:c.inlineCompletionTriggerKind,selectedSuggestionInfo:void 0,userPrompt:this.userPrompt.read(l)},f=R2(this._fetchStore);await _d(200,f);const g=await GQ(this.languageFeaturesService.inlineCompletionsProvider,h,this.textModel,u,f);f.isCancellationRequested||this._inlineEditsFetchResult.set(g,void 0)}),this._filteredInlineEditItems=Ho({owner:this,equalsFn:mL()},l=>this._inlineEdits.read(l)),this.selectedInlineCompletionIndex=_e(this,l=>{const c=this._selectedInlineCompletionId.read(l),d=this._filteredInlineEditItems.read(l),h=this._selectedInlineCompletionId===void 0?-1:d.findIndex(u=>u.semanticId===c);return h===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):h}),this.selectedInlineEdit=_e(this,l=>{const c=this._filteredInlineEditItems.read(l),d=this.selectedInlineCompletionIndex.read(l);return c[d]}),this._register(rv(this._fetchInlineEditsPromise))}async triggerExplicitly(e){sm(e,t=>{this._isActive.set(!0,t),this._forceUpdateExplicitlySignal.trigger(t)}),await this._fetchInlineEditsPromise.get()}stop(e){sm(e,t=>{this.userPrompt.set(void 0,t),this._isActive.set(!1,t),this._inlineEditsFetchResult.set(void 0,t),this._pinnedRange.setRange(void 0,t)})}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineEditItems.get()||[];if(t.length>0){const n=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[n].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){if(e.getModel()!==this.textModel)throw new _t;const t=this.selectedInlineEdit.get();t&&(e.pushUndoStop(),e.executeEdits("inlineSuggestion.accept",[t.inlineCompletion.toSingleTextEdit().toSingleEditOperation()]),this.stop())}},bC=Og,Og._modelId=0,Og);o5=bC=QRe([c2(4,ue),c2(5,H0),c2(6,Ut)],o5);class JRe{constructor(e){this.inlineCompletion=e,this.semanticId=this.inlineCompletion.hash()}}class e2e extends F{constructor(e,t){super(),this._textModel=e,this._versionId=t,this._decorations=Ge(this,[]),this.range=_e(this,n=>{this._versionId.read(n);const i=this._decorations.read(n)[0];return i?this._textModel.getDecorationRange(i)??null:null}),this._register(ve(()=>{this._textModel.deltaDecorations(this._decorations.get(),[])}))}setRange(e,t){this._decorations.set(this._textModel.deltaDecorations(this._decorations.get(),e?[{range:e,options:{description:"trackedRange"}}]:[]),t)}}var t2e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Yv=function(s,e){return function(t,n){e(t,n,s)}},r5,Fg;let Ld=(Fg=class extends F{static get(e){return e.getContribution(r5.ID)}constructor(e,t,n,i,o,r){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=n,this._debounceService=i,this._languageFeaturesService=o,this._configurationService=r,this._enabled=w0e("editor.inlineEdits.enabled",!1,this._configurationService),this._editorObs=go(this.editor),this._selection=_e(this,a=>this._editorObs.cursorSelection.read(a)??new me(1,1,1,1)),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineEditsDebounce",{min:50,max:50}),this.model=os(this,a=>{if(!this._enabled.read(a)||this._editorObs.isReadonly.read(a))return;const l=this._editorObs.model.read(a);return l?this._instantiationService.createInstance(co(o5,a),l,this._editorObs.versionId,this._selection,this._debounceValue):void 0}),this._hadInlineEdit=N0(this,(a,l)=>{var c;return l||((c=this.model.read(a))==null?void 0:c.inlineEdit.read(a))!==void 0}),this._widget=os(this,a=>{if(this._hadInlineEdit.read(a))return this._instantiationService.createInstance(co(s5,a),this.editor,this.model.map((l,c)=>l==null?void 0:l.inlineEdit.read(c)),n2e(l=>{var c;return((c=this.model.read(l))==null?void 0:c.userPrompt)??Ge("empty","")}))}),this._register(va(zb,this._contextKeyService,a=>{var l;return!!((l=this.model.read(a))!=null&&l.inlineEdit.read(a))})),this._register(va(URe,this._contextKeyService,a=>{var l;return!!((l=this.model.read(a))!=null&&l.isPinned.read(a))})),this.model.recomputeInitiallyAndOnChange(this._store),this._widget.recomputeInitiallyAndOnChange(this._store)}},r5=Fg,Fg.ID="editor.contrib.inlineEditsController",Fg);Ld=r5=t2e([Yv(1,Ce),Yv(2,Ie),Yv(3,ir),Yv(4,ue),Yv(5,Ze)],Ld);function n2e(s){return I0(void 0,e=>s(e).read(e),(e,t)=>{s(void 0).set(e,t)})}function Q0(s){return{label:s.value,alias:s.original}}const jI=class jI extends he{constructor(){super({id:jI.ID,...Q0(Ee("action.inlineEdits.showNext","Show Next Inline Edit")),precondition:K.and(I.writable,zb),kbOpts:{weight:100,primary:606}})}async run(e,t){var i;const n=Ld.get(t);(i=n==null?void 0:n.model.get())==null||i.next()}};jI.ID=$Re;let a5=jI;const qI=class qI extends he{constructor(){super({id:qI.ID,...Q0(Ee("action.inlineEdits.showPrevious","Show Previous Inline Edit")),precondition:K.and(I.writable,zb),kbOpts:{weight:100,primary:604}})}async run(e,t){var i;const n=Ld.get(t);(i=n==null?void 0:n.model.get())==null||i.previous()}};qI.ID=zRe;let l5=qI;class i2e extends he{constructor(){super({id:"editor.action.inlineEdits.trigger",...Q0(Ee("action.inlineEdits.trigger","Trigger Inline Edit")),precondition:I.writable})}async run(e,t){const n=Ld.get(t);await pG(async i=>{var o;await((o=n==null?void 0:n.model.get())==null?void 0:o.triggerExplicitly(i))})}}class s2e extends he{constructor(){super({id:VRe,...Q0(Ee("action.inlineEdits.accept","Accept Inline Edit")),precondition:zb,menuOpts:{menuId:ge.InlineEditsActions,title:m("inlineEditsActions","Accept Inline Edit"),group:"primary",order:1,icon:J.check},kbOpts:{primary:2058,weight:2e4,kbExpr:zb}})}async run(e,t){var i;t instanceof aa&&(t=t.getParentEditor());const n=Ld.get(t);n&&((i=n.model.get())==null||i.accept(n.editor),n.editor.focus())}}const KI=class KI extends he{constructor(){super({id:KI.ID,...Q0(Ee("action.inlineEdits.hide","Hide Inline Edit")),precondition:zb,kbOpts:{weight:100,primary:9}})}async run(e,t){const n=Ld.get(t);rn(i=>{var o;(o=n==null?void 0:n.model.get())==null||o.stop(i)})}};KI.ID="editor.action.inlineEdits.hide";let c5=KI;dt(Ld.ID,Ld,3);Q(i2e);Q(a5);Q(l5);Q(s2e);Q(c5);const vm={Visible:new le("parameterHintsVisible",!1),MultipleSignatures:new le("parameterHintsMultipleSignatures",!1)};async function fJ(s,e,t,n,i){const o=s.ordered(e);for(const r of o)try{const a=await r.provideSignatureHelp(e,t,i,n);if(a)return a}catch(a){kn(a)}}rt.registerCommand("_executeSignatureHelpProvider",async(s,...e)=>{const[t,n,i]=e;gt(Se.isUri(t)),gt(A.isIPosition(n)),gt(typeof i=="string"||!i);const o=s.get(ue),r=await s.get(Qs).createModelReference(t);try{const a=await fJ(o.signatureHelpProvider,r.object.textEditorModel,A.lift(n),{triggerKind:zl.Invoke,isRetrigger:!1,triggerCharacter:i},Ue.None);return a?(setTimeout(()=>a.dispose(),0),a.value):void 0}finally{r.dispose()}});var Jd;(function(s){s.Default={type:0};class e{constructor(i,o){this.request=i,this.previouslyActiveHints=o,this.type=2}}s.Pending=e;class t{constructor(i){this.hints=i,this.type=1}}s.Active=t})(Jd||(Jd={}));const GI=class GI extends F{constructor(e,t,n=GI.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new O),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=Jd.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new ai),this.triggerChars=new Kk,this.retriggerChars=new Kk,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new kr(n),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(i=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(i=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(i=>this.onCursorChange(i))),this._register(this.editor.onDidChangeModelContent(i=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(i=>this.onDidType(i))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){this._state.type===2&&this._state.request.cancel(),this._state=e}cancel(e=!1){this.state=Jd.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const n=this.editor.getModel();if(!n||!this.providers.has(n))return;const i=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger(()=>this.doTrigger(i),t).catch(Pe)}next(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t%e===e-1,i=this.editor.getOption(86).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?0:t+1)}previous(){if(this.state.type!==1)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,n=t===0,i=this.editor.getOption(86).cycle;if((e<2||n)&&!i){this.cancel();return}this.updateActiveSignature(n&&i?e-1:t-1)}updateActiveSignature(e){this.state.type===1&&(this.state=new Jd.Active({...this.state.hints,activeSignature:e}),this._onChangedHints.fire(this.state.hints))}async doTrigger(e){const t=this.state.type===1||this.state.type===2,n=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const i=this._pendingTriggers.reduce(o2e);this._pendingTriggers=[];const o={triggerKind:i.triggerKind,triggerCharacter:i.triggerCharacter,isRetrigger:t,activeSignatureHelp:n};if(!this.editor.hasModel())return!1;const r=this.editor.getModel(),a=this.editor.getPosition();this.state=new Jd.Pending(si(l=>fJ(this.providers,r,a,o,l)),n);try{const l=await this.state.request;return e!==this.triggerId?(l==null||l.dispose(),!1):!l||!l.value.signatures||l.value.signatures.length===0?(l==null||l.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new Jd.Active(l.value),this._lastSignatureHelpResult.value=l,this._onChangedHints.fire(this.state.hints),!0)}catch(l){return e===this.triggerId&&(this.state=Jd.Default),Pe(l),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const n of t.signatureHelpTriggerCharacters||[])if(n.length){const i=n.charCodeAt(0);this.triggerChars.add(i),this.retriggerChars.add(i)}for(const n of t.signatureHelpRetriggerCharacters||[])n.length&&this.retriggerChars.add(n.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,n=e.charCodeAt(t);(this.triggerChars.has(n)||this.isTriggered&&this.retriggerChars.has(n))&&this.trigger({triggerKind:zl.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){e.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:zl.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:zl.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}};GI.DEFAULT_DELAY=120;let d5=GI;function o2e(s,e){switch(e.triggerKind){case zl.Invoke:return e;case zl.ContentChange:return s;case zl.TriggerCharacter:default:return e}}var r2e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},SS=function(s,e){return function(t,n){e(t,n,s)}},h5;const To=te,a2e=jt("parameter-hints-next",J.chevronDown,m("parameterHintsNextIcon","Icon for show next parameter hint.")),l2e=jt("parameter-hints-previous",J.chevronUp,m("parameterHintsPreviousIcon","Icon for show previous parameter hint."));var Wg;let u5=(Wg=class extends F{constructor(e,t,n,i,o,r){super(),this.editor=e,this.model=t,this.telemetryService=r,this.renderDisposeables=this._register(new q),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new Cd({editor:e},o,i)),this.keyVisible=vm.Visible.bindTo(n),this.keyMultipleSignatures=vm.MultipleSignatures.bindTo(n)}createParameterHintDOMNodes(){const e=To(".editor-widget.parameter-hints-widget"),t=Y(e,To(".phwrapper"));t.tabIndex=-1;const n=Y(t,To(".controls")),i=Y(n,To(".button"+De.asCSSSelector(l2e))),o=Y(n,To(".overloads")),r=Y(n,To(".button"+De.asCSSSelector(a2e)));this._register($(i,"click",u=>{it.stop(u),this.previous()})),this._register($(r,"click",u=>{it.stop(u),this.next()}));const a=To(".body"),l=new S0(a,{alwaysConsumeMouseWheel:!0});this._register(l),t.appendChild(l.getDomNode());const c=Y(a,To(".signature")),d=Y(a,To(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:c,overloads:o,docs:d,scrollbar:l},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(u=>{this.visible&&this.editor.layoutContentWidget(this)}));const h=()=>{if(!this.domNodes)return;const u=this.editor.getOption(50),f=this.domNodes.element;f.style.fontSize=`${u.fontSize}px`,f.style.lineHeight=`${u.lineHeight/u.fontSize}`,f.style.setProperty("--vscode-parameterHintsWidget-editorFontFamily",u.fontFamily),f.style.setProperty("--vscode-parameterHintsWidget-editorFontFamilyDefault",Ls.fontFamily)};h(),this._register(se.chain(this.editor.onDidChangeConfiguration.bind(this.editor),u=>u.filter(f=>f.hasChanged(50)))(h)),this._register(this.editor.onDidLayoutChange(u=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{var e;(e=this.domNodes)==null||e.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,(e=this.domNodes)==null||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){if(this.renderDisposeables.clear(),!this.domNodes)return;const t=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",t),this.keyMultipleSignatures.set(t),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const n=e.signatures[e.activeSignature];if(!n)return;const i=Y(this.domNodes.signature,To(".code")),o=n.parameters.length>0,r=n.activeParameter??e.activeParameter;if(o)this.renderParameters(i,n,r);else{const c=Y(i,To("span"));c.textContent=n.label}const a=n.parameters[r];if(a!=null&&a.documentation){const c=To("span.documentation");if(typeof a.documentation=="string")c.textContent=a.documentation;else{const d=this.renderMarkdownDocs(a.documentation);c.appendChild(d.element)}Y(this.domNodes.docs,To("p",{},c))}if(n.documentation!==void 0)if(typeof n.documentation=="string")Y(this.domNodes.docs,To("p",{},n.documentation));else{const c=this.renderMarkdownDocs(n.documentation);Y(this.domNodes.docs,c.element)}const l=this.hasDocs(n,a);if(this.domNodes.signature.classList.toggle("has-docs",l),this.domNodes.docs.classList.toggle("empty",!l),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,a){let c="";const d=n.parameters[r];Array.isArray(d.label)?c=n.label.substring(d.label[0],d.label[1]):c=d.label,d.documentation&&(c+=typeof d.documentation=="string"?`, ${d.documentation}`:`, ${d.documentation.value}`),n.documentation&&(c+=typeof n.documentation=="string"?`, ${n.documentation}`:`, ${n.documentation.value}`),this.announcedLabel!==c&&(Es(m("hint","{0}, hint",c)),this.announcedLabel=c)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=new pi,n=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var o;(o=this.domNodes)==null||o.scrollbar.scanDomNode()}}));n.element.classList.add("markdown-docs");const i=t.elapsed();return i>300&&this.telemetryService.publicLog2("parameterHints.parseMarkdown",{renderDuration:i}),n}hasDocs(e,t){return!!(t&&typeof t.documentation=="string"&&mh(t.documentation).length>0||t&&typeof t.documentation=="object"&&mh(t.documentation).value.length>0||e.documentation&&typeof e.documentation=="string"&&mh(e.documentation).length>0||e.documentation&&typeof e.documentation=="object"&&mh(e.documentation.value).length>0)}renderParameters(e,t,n){const[i,o]=this.getParameterLabelOffsets(t,n),r=document.createElement("span");r.textContent=t.label.substring(0,i);const a=document.createElement("span");a.textContent=t.label.substring(i,o),a.className="parameter active";const l=document.createElement("span");l.textContent=t.label.substring(o),Y(e,r,a,l)}getParameterLabelOffsets(e,t){const n=e.parameters[t];if(n){if(Array.isArray(n.label))return n.label;if(n.label.length){const i=new RegExp(`(\\W|^)${Xo(n.label)}(?=\\W|$)`,"g");i.test(e.label);const o=i.lastIndex-n.label.length;return o>=0?[o,i.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return h5.ID}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const n=this.domNodes.element.getElementsByClassName("phwrapper");n.length&&(n[0].style.maxHeight=t)}},h5=Wg,Wg.ID="editor.widget.parameterHintsWidget",Wg);u5=h5=r2e([SS(2,Ie),SS(3,eo),SS(4,tn),SS(5,Zi)],u5);T("editorHoverWidget.highlightForeground",Ap,m("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var c2e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},J$=function(s,e){return function(t,n){e(t,n,s)}},f5,Bg;let $b=(Bg=class extends F{static get(e){return e.getContribution(f5.ID)}constructor(e,t,n){super(),this.editor=e,this.model=this._register(new d5(e,n.signatureHelpProvider)),this._register(this.model.onChangedHints(i=>{var o;i?(this.widget.value.show(),this.widget.value.render(i)):(o=this.widget.rawValue)==null||o.hide()})),this.widget=new ja(()=>this._register(t.createInstance(u5,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){var e;(e=this.widget.rawValue)==null||e.previous()}next(){var e;(e=this.widget.rawValue)==null||e.next()}trigger(e){this.model.trigger(e,0)}},f5=Bg,Bg.ID="editor.controller.parameterHints",Bg);$b=f5=c2e([J$(1,Ce),J$(2,ue)],$b);class d2e extends he{constructor(){super({id:"editor.action.triggerParameterHints",label:m("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:I.hasSignatureHelpProvider,kbOpts:{kbExpr:I.editorTextFocus,primary:3082,weight:100}})}run(e,t){const n=$b.get(t);n==null||n.trigger({triggerKind:zl.Invoke})}}dt($b.ID,$b,2);Q(d2e);const qB=175,KB=Zn.bindToContribution($b.get);oe(new KB({id:"closeParameterHints",precondition:vm.Visible,handler:s=>s.cancel(),kbOpts:{weight:qB,kbExpr:I.focus,primary:9,secondary:[1033]}}));oe(new KB({id:"showPrevParameterHint",precondition:K.and(vm.Visible,vm.MultipleSignatures),handler:s=>s.previous(),kbOpts:{weight:qB,kbExpr:I.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}}));oe(new KB({id:"showNextParameterHint",precondition:K.and(vm.Visible,vm.MultipleSignatures),handler:s=>s.next(),kbOpts:{weight:qB,kbExpr:I.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}));var h2e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},u2e=function(s,e){return function(t,n){e(t,n,s)}};class f2e{constructor(e){this.instantiationService=e}init(...e){}}function g2e(s,e){return class extends e{constructor(){super(...arguments),this._autorun=void 0}init(...n){this._autorun=Ks((i,o)=>{const r=co(s(),i);o.add(this.instantiationService.createInstance(r,...n))})}dispose(){var n;(n=this._autorun)==null||n.dispose()}}}function m2e(s){return wE()?g2e(s,g5):s()}let g5=class extends f2e{constructor(e,t){super(t),this.init(e)}};g5=h2e([u2e(1,Ce)],g5);dt(e0.ID,m2e(()=>e0),0);T("editor.placeholder.foreground",dge,m("placeholderForeground","Foreground color of the placeholder text in the editor."));var p2e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},kS=function(s,e){return function(t,n){e(t,n,s)}};const vv=new le("renameInputVisible",!1,m("renameInputVisible","Whether the rename input widget is visible"));new le("renameInputFocused",!1,m("renameInputFocused","Whether the rename input widget is focused"));let m5=class{constructor(e,t,n,i,o,r){this._editor=e,this._acceptKeybindings=t,this._themeService=n,this._keybindingService=i,this._logService=r,this.allowEditorOverflow=!0,this._disposables=new q,this._visibleContextKey=vv.bindTo(o),this._isEditingRenameCandidate=!1,this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,this._candidates=new Set,this._beforeFirstInputFieldEditSW=new pi,this._inputWithButton=new _2e,this._disposables.add(this._inputWithButton),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{a.hasChanged(50)&&this._updateFont()})),this._disposables.add(n.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputWithButton.domNode),this._renameCandidateListView=this._disposables.add(new GB(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:e=>{this._inputWithButton.input.value=e,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._inputWithButton.onDidInputChange(()=>{var e,t,n;((e=this._renameCandidateListView)==null?void 0:e.focusedCandidate)!==void 0&&(this._isEditingRenameCandidate=!0),this._timeBeforeFirstInputFieldEdit??(this._timeBeforeFirstInputFieldEdit=this._beforeFirstInputFieldEditSW.elapsed()),((t=this._renameCandidateProvidersCts)==null?void 0:t.token.isCancellationRequested)===!1&&this._renameCandidateProvidersCts.cancel(),(n=this._renameCandidateListView)==null||n.clearFocus()})),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){if(!this._domNode)return;const t=e.getColor(ev),n=e.getColor(EK);this._domNode.style.backgroundColor=String(e.getColor(jo)??""),this._domNode.style.boxShadow=t?` 0 0 8px 2px ${t}`:"",this._domNode.style.border=n?`1px solid ${n}`:"",this._domNode.style.color=String(e.getColor(MK)??"");const i=e.getColor(AK);this._inputWithButton.domNode.style.backgroundColor=String(e.getColor(IA)??""),this._inputWithButton.input.style.backgroundColor=String(e.getColor(IA)??""),this._inputWithButton.domNode.style.borderWidth=i?"1px":"0px",this._inputWithButton.domNode.style.borderStyle=i?"solid":"none",this._inputWithButton.domNode.style.borderColor=(i==null?void 0:i.toString())??"none"}_updateFont(){if(this._domNode===void 0)return;gt(this._label!==void 0,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._inputWithButton.input);const e=this._editor.getOption(50);this._label.style.fontSize=`${this._computeLabelFontSize(e.fontSize)}px`}_computeLabelFontSize(e){return e*.8}getPosition(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;const e=lu(this.getDomNode().ownerDocument.body),t=Sn(this._editor.getDomNode()),n=this._getTopForPosition();this._nPxAvailableAbove=n+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;const i=this._editor.getOption(67),{totalHeight:o}=t0.getLayoutInfo({lineHeight:i}),r=this._nPxAvailableBelow>o*6?[2,1]:[1,2];return{position:this._position,preference:r}}beforeRender(){var n,i;const[e,t]=this._acceptKeybindings;return this._label.innerText=m({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",(n=this._keybindingService.lookupKeybinding(e))==null?void 0:n.getLabel(),(i=this._keybindingService.lookupKeybinding(t))==null?void 0:i.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(e){if(e===null){this.cancelInput(!0,"afterRender (because position is null)");return}if(!this._editor.hasModel()||!this._editor.getDomNode())return;gt(this._renameCandidateListView),gt(this._nPxAvailableAbove!==void 0),gt(this._nPxAvailableBelow!==void 0);const t=Uc(this._inputWithButton.domNode),n=Uc(this._label);let i;e===2?i=this._nPxAvailableBelow:i=this._nPxAvailableAbove,this._renameCandidateListView.layout({height:i-n-t,width:ao(this._inputWithButton.domNode)})}acceptInput(e){var t;this._trace("invoking acceptInput"),(t=this._currentAcceptInput)==null||t.call(this,e)}cancelInput(e,t){var n;(n=this._currentCancelInput)==null||n.call(this,e)}focusNextRenameSuggestion(){var e;(e=this._renameCandidateListView)!=null&&e.focusNext()||(this._inputWithButton.input.value=this._currentName)}focusPreviousRenameSuggestion(){var e;(e=this._renameCandidateListView)!=null&&e.focusPrevious()||(this._inputWithButton.input.value=this._currentName)}getInput(e,t,n,i,o){const{start:r,end:a}=this._getSelection(e,t);this._renameCts=o;const l=new q;this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,i===void 0?this._inputWithButton.button.style.display="none":(this._inputWithButton.button.style.display="flex",this._requestRenameCandidatesOnce=i,this._requestRenameCandidates(t,!1),l.add($(this._inputWithButton.button,"click",()=>this._requestRenameCandidates(t,!0))),l.add($(this._inputWithButton.button,ee.KEY_DOWN,d=>{const h=new Pt(d);(h.equals(3)||h.equals(10))&&(h.stopPropagation(),h.preventDefault(),this._requestRenameCandidates(t,!0))}))),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",n),this._position=new A(e.startLineNumber,e.startColumn),this._currentName=t,this._inputWithButton.input.value=t,this._inputWithButton.input.setAttribute("selectionStart",r.toString()),this._inputWithButton.input.setAttribute("selectionEnd",a.toString()),this._inputWithButton.input.size=Math.max((e.endColumn-e.startColumn)*1.1,20),this._beforeFirstInputFieldEditSW.reset(),l.add(ve(()=>{this._renameCts=void 0,o.dispose(!0)})),l.add(ve(()=>{this._renameCandidateProvidersCts!==void 0&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)})),l.add(ve(()=>this._candidates.clear()));const c=new Gb;return c.p.finally(()=>{l.dispose(),this._hide()}),this._currentCancelInput=d=>{var h;return this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,(h=this._renameCandidateListView)==null||h.clearCandidates(),c.complete(d),!0},this._currentAcceptInput=d=>{this._trace("invoking _currentAcceptInput"),gt(this._renameCandidateListView!==void 0);const h=this._renameCandidateListView.nCandidates;let u,f;const g=this._renameCandidateListView.focusedCandidate;if(g!==void 0?(this._trace("using new name from renameSuggestion"),u=g,f={k:"renameSuggestion"}):(this._trace("using new name from inputField"),u=this._inputWithButton.input.value,f=this._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),u===t||u.trim().length===0){this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)");return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),c.complete({newName:u,wantsPreview:n&&d,stats:{source:f,nRenameSuggestions:h,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit,nRenameSuggestionsInvocations:this._nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:this._hadAutomaticRenameSuggestionsInvocation}})},l.add(o.token.onCancellationRequested(()=>this.cancelInput(!0,"cts.token.onCancellationRequested"))),l.add(this._editor.onDidBlurEditorWidget(()=>{var d;return this.cancelInput(!((d=this._domNode)!=null&&d.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")})),this._show(),c.p}_requestRenameCandidates(e,t){if(this._requestRenameCandidatesOnce!==void 0&&(this._renameCandidateProvidersCts!==void 0&&this._renameCandidateProvidersCts.dispose(!0),gt(this._renameCts),this._inputWithButton.buttonState!=="stop")){this._renameCandidateProvidersCts=new an;const n=t?Fw.Invoke:Fw.Automatic,i=this._requestRenameCandidatesOnce(n,this._renameCandidateProvidersCts.token);if(i.length===0){this._inputWithButton.setSparkleButton();return}t||(this._hadAutomaticRenameSuggestionsInvocation=!0),this._nRenameSuggestionsInvocations+=1,this._inputWithButton.setStopButton(),this._updateRenameCandidates(i,e,this._renameCts.token)}}_getSelection(e,t){gt(this._editor.hasModel());const n=this._editor.getSelection();let i=0,o=t.length;return!L.isEmpty(n)&&!L.spansMultipleLines(n)&&L.containsRange(e,n)&&(i=Math.max(0,n.startColumn-e.startColumn),o=Math.min(e.endColumn,n.endColumn)-e.startColumn),{start:i,end:o}}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._inputWithButton.input.focus(),this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute("selectionStart")),parseInt(this._inputWithButton.input.getAttribute("selectionEnd")))},100)}async _updateRenameCandidates(e,t,n){const i=(...c)=>this._trace("_updateRenameCandidates",...c);i("start");const o=await b0(Promise.allSettled(e),n);if(this._inputWithButton.setSparkleButton(),o===void 0){i("returning early - received updateRenameCandidates results - undefined");return}const r=o.flatMap(c=>c.status==="fulfilled"&&Vl(c.value)?c.value:[]);i(`received updateRenameCandidates results - total (unfiltered) ${r.length} candidates.`);const a=fd(r,c=>c.newSymbolName);i(`distinct candidates - ${a.length} candidates.`);const l=a.filter(({newSymbolName:c})=>c.trim().length>0&&c!==this._inputWithButton.input.value&&c!==t&&!this._candidates.has(c));if(i(`valid distinct candidates - ${r.length} candidates.`),l.forEach(c=>this._candidates.add(c.newSymbolName)),l.length<1){i("returning early - no valid distinct candidates");return}i("setting candidates"),this._renameCandidateListView.setCandidates(l),i("asking editor to re-layout"),this._editor.layoutContentWidget(this)}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){const e=this._editor.getVisibleRanges();let t;return e.length>0?t=e[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),t=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(t)}_trace(...e){this._logService.trace("RenameWidget",...e)}};m5=p2e([kS(2,Yn),kS(3,wt),kS(4,Ie),kS(5,Hi)],m5);class GB{constructor(e,t){this._disposables=new q,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=t.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=t.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),this._listContainer.className="rename-box rename-candidate-list-container",e.appendChild(this._listContainer),this._listWidget=GB._createListWidget(this._listContainer,this._candidateViewHeight,t.fontInfo),this._listWidget.onDidChangeFocus(n=>{n.elements.length===1&&t.onFocusChange(n.elements[0].newSymbolName)},this._disposables),this._listWidget.onDidChangeSelection(n=>{n.elements.length===1&&t.onSelectionChange()},this._disposables),this._disposables.add(this._listWidget.onDidBlur(n=>{this._listWidget.setFocus([])})),this._listWidget.style(Nm({listInactiveFocusForeground:Jw,listInactiveFocusBackground:e1}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout({height:e,width:t}){this._availableHeight=e,this._minimumWidth=t}setCandidates(e){this._listWidget.splice(0,0,e);const t=this._pickListHeight(this._listWidget.length),n=this._pickListWidth(e);this._listWidget.layout(t,n),this._listContainer.style.height=`${t}px`,this._listContainer.style.width=`${n}px`,Zl(m("renameSuggestionsReceivedAria","Received {0} rename suggestions",e.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(this._listWidget.length===0)return;const e=this._listWidget.getSelectedElements()[0];if(e!==void 0)return e.newSymbolName;const t=this._listWidget.getFocusedElements()[0];if(t!==void 0)return t.newSymbolName}focusNext(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();if(e.length===0)return this._listWidget.focusFirst(),this._listWidget.reveal(0),!0;if(e[0]===this._listWidget.length-1)return this._listWidget.setFocus([]),this._listWidget.reveal(0),!1;{this._listWidget.focusNext();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}focusPrevious(){if(this._listWidget.length===0)return!1;const e=this._listWidget.getFocus();if(e.length===0){this._listWidget.focusLast();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}else{if(e[0]===0)return this._listWidget.setFocus([]),!1;{this._listWidget.focusPrevious();const t=this._listWidget.getFocus()[0];return this._listWidget.reveal(t),!0}}}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){const{totalHeight:e}=t0.getLayoutInfo({lineHeight:this._lineHeight});return e}_pickListHeight(e){const t=this._candidateViewHeight*e;return Math.min(t,this._availableHeight,this._candidateViewHeight*7)}_pickListWidth(e){const t=Math.ceil(Math.max(...e.map(i=>i.newSymbolName.length))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+t+10)}static _createListWidget(e,t,n){const i=new class{getTemplateId(r){return"candidate"}getHeight(r){return t}},o=new class{constructor(){this.templateId="candidate"}renderTemplate(r){return new t0(r,n)}renderElement(r,a,l){l.populate(r)}disposeTemplate(r){r.dispose()}};return new or("NewSymbolNameCandidates",e,i,[o],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}}class _2e{constructor(){this._onDidInputChange=new O,this.onDidInputChange=this._onDidInputChange.event,this._disposables=new q}get domNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="rename-input-with-button",this._domNode.style.display="flex",this._domNode.style.flexDirection="row",this._domNode.style.alignItems="center",this._inputNode=document.createElement("input"),this._inputNode.className="rename-input",this._inputNode.type="text",this._inputNode.style.border="none",this._inputNode.setAttribute("aria-label",m("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._inputNode),this._buttonNode=document.createElement("div"),this._buttonNode.className="rename-suggestions-button",this._buttonNode.setAttribute("tabindex","0"),this._buttonGenHoverText=m("generateRenameSuggestionsButton","Generate new name suggestions"),this._buttonCancelHoverText=m("cancelRenameSuggestionsButton","Cancel"),this._buttonHover=tl().setupManagedHover(Ms("element"),this._buttonNode,this._buttonGenHoverText),this._disposables.add(this._buttonHover),this._domNode.appendChild(this._buttonNode),this._disposables.add($(this.input,ee.INPUT,()=>this._onDidInputChange.fire())),this._disposables.add($(this.input,ee.KEY_DOWN,e=>{const t=new Pt(e);(t.keyCode===15||t.keyCode===17)&&this._onDidInputChange.fire()})),this._disposables.add($(this.input,ee.CLICK,()=>this._onDidInputChange.fire())),this._disposables.add($(this.input,ee.FOCUS,()=>{this.domNode.style.outlineWidth="1px",this.domNode.style.outlineStyle="solid",this.domNode.style.outlineOffset="-1px",this.domNode.style.outlineColor="var(--vscode-focusBorder)"})),this._disposables.add($(this.input,ee.BLUR,()=>{this.domNode.style.outline="none"}))),this._domNode}get input(){return gt(this._inputNode),this._inputNode}get button(){return gt(this._buttonNode),this._buttonNode}get buttonState(){return this._buttonState}setSparkleButton(){var e;this._buttonState="sparkle",this._sparkleIcon??(this._sparkleIcon=tm(J.sparkle)),xi(this.button),this.button.appendChild(this._sparkleIcon),this.button.setAttribute("aria-label","Generating new name suggestions"),(e=this._buttonHover)==null||e.update(this._buttonGenHoverText),this.input.focus()}setStopButton(){var e;this._buttonState="stop",this._stopIcon??(this._stopIcon=tm(J.primitiveSquare)),xi(this.button),this.button.appendChild(this._stopIcon),this.button.setAttribute("aria-label","Cancel generating new name suggestions"),(e=this._buttonHover)==null||e.update(this._buttonCancelHoverText),this.input.focus()}dispose(){this._disposables.dispose()}}const xw=class xw{constructor(e,t){this._domNode=document.createElement("div"),this._domNode.className="rename-box rename-candidate",this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height=`${t.lineHeight}px`,this._domNode.style.padding=`${xw._PADDING}px`;const n=document.createElement("div");n.style.display="flex",n.style.alignItems="center",n.style.width=n.style.height=`${t.lineHeight*.8}px`,this._domNode.appendChild(n),this._icon=tm(J.sparkle),this._icon.style.display="none",n.appendChild(this._icon),this._label=document.createElement("div"),Ii(this._label,t),this._domNode.appendChild(this._label),e.appendChild(this._domNode)}populate(e){this._updateIcon(e),this._updateLabel(e)}_updateIcon(e){var n;const t=!!((n=e.tags)!=null&&n.includes(B2.AIGenerated));this._icon.style.display=t?"inherit":"none"}_updateLabel(e){this._label.innerText=e.newSymbolName}static getLayoutInfo({lineHeight:e}){return{totalHeight:e+xw._PADDING*2}}dispose(){}};xw._PADDING=2;let t0=xw;var b2e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Kd=function(s,e){return function(t,n){e(t,n,s)}},p5;class ZB{constructor(e,t,n){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=n.ordered(e)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(e){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;const o=await i.resolveRenameLocation(this.model,this.position,e);if(o){if(o.rejectReason){t.push(o.rejectReason);continue}return o}}this._providerRenameIdx=0;const n=this.model.getWordAtPosition(this.position);return n?{range:new L(this.position.lineNumber,n.startColumn,this.position.lineNumber,n.endColumn),text:n.word,rejectReason:t.length>0?t.join(`
`):void 0}:{range:L.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join(`
`):void 0}}async provideRenameEdits(e,t){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}async _provideRenameEdits(e,t,n,i){const o=this._providers[t];if(!o)return{edits:[],rejectReason:n.join(`
`)};const r=await o.provideRenameEdits(this.model,this.position,e,i);if(r){if(r.rejectReason)return this._provideRenameEdits(e,t+1,n.concat(r.rejectReason),i)}else return this._provideRenameEdits(e,t+1,n.concat(m("no result","No result.")),i);return r}}async function v2e(s,e,t,n){const i=new ZB(e,t,s),o=await i.resolveRenameLocation(Ue.None);return o!=null&&o.rejectReason?{edits:[],rejectReason:o.rejectReason}:i.provideRenameEdits(n,Ue.None)}var Hg;let wu=(Hg=class{static get(e){return e.getContribution(p5.ID)}constructor(e,t,n,i,o,r,a,l,c){this.editor=e,this._instaService=t,this._notificationService=n,this._bulkEditService=i,this._progressService=o,this._logService=r,this._configService=a,this._languageFeaturesService=l,this._telemetryService=c,this._disposableStore=new q,this._cts=new an,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(m5,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){var g,p;const e=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new an,!this.editor.hasModel()){e("editor has no model");return}const t=this.editor.getPosition(),n=new ZB(this.editor.getModel(),t,this._languageFeaturesService.renameProvider);if(!n.hasProvider()){e("skeleton has no provider");return}const i=new _u(this.editor,5,void 0,this._cts.token);let o;try{e("resolving rename location");const _=n.resolveRenameLocation(i.token);this._progressService.showWhile(_,250),o=await _,e("resolved rename location")}catch(_){_ instanceof ta?e("resolve rename location cancelled",JSON.stringify(_,null,"	")):(e("resolve rename location failed",_ instanceof Error?_:JSON.stringify(_,null,"	")),(typeof _=="string"||$a(_))&&((g=vo.get(this.editor))==null||g.showMessage(_||m("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),t)));return}finally{i.dispose()}if(!o){e("returning early - no loc");return}if(o.rejectReason){e(`returning early - rejected with reason: ${o.rejectReason}`,o.rejectReason),(p=vo.get(this.editor))==null||p.showMessage(o.rejectReason,t);return}if(i.token.isCancellationRequested){e("returning early - cts1 cancelled");return}const r=new _u(this.editor,5,o.range,this._cts.token),a=this.editor.getModel(),l=this._languageFeaturesService.newSymbolNamesProvider.all(a),c=await Promise.all(l.map(async _=>[_,await _.supportsAutomaticNewSymbolNamesTriggerKind??!1])),d=(_,b)=>{let v=c.slice();return _===Fw.Automatic&&(v=v.filter(([C,w])=>w)),v.map(([C])=>C.provideNewSymbolNames(a,o.range,_,b))};e("creating rename input field and awaiting its result");const h=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),u=await this._renameWidget.getInput(o.range,o.text,h,l.length>0?d:void 0,r);if(e("received response from rename input field"),l.length>0&&this._reportTelemetry(l.length,a.getLanguageId(),u),typeof u=="boolean"){e(`returning early - rename input field response - ${u}`),u&&this.editor.focus(),r.dispose();return}this.editor.focus(),e("requesting rename edits");const f=b0(n.provideRenameEdits(u.newName,r.token),r.token).then(async _=>{if(!_){e("returning early - no rename edits result");return}if(!this.editor.hasModel()){e("returning early - no model after rename edits are provided");return}if(_.rejectReason){e(`returning early - rejected with reason: ${_.rejectReason}`),this._notificationService.info(_.rejectReason);return}this.editor.setSelection(L.fromPositions(this.editor.getSelection().getPosition())),e("applying edits"),this._bulkEditService.apply(_,{editor:this.editor,showPreview:u.wantsPreview,label:m("label","Renaming '{0}' to '{1}'",o==null?void 0:o.text,u.newName),code:"undoredo.rename",quotableLabel:m("quotableLabel","Renaming {0} to {1}",o==null?void 0:o.text,u.newName),respectAutoSaveConfig:!0}).then(b=>{e("edits applied"),b.ariaSummary&&Es(m("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",o.text,u.newName,b.ariaSummary))}).catch(b=>{e(`error when applying edits ${JSON.stringify(b,null,"	")}`),this._notificationService.error(m("rename.failedApply","Rename failed to apply edits")),this._logService.error(b)})},_=>{e("error when providing rename edits",JSON.stringify(_,null,"	")),this._notificationService.error(m("rename.failed","Rename failed to compute edits")),this._logService.error(_)}).finally(()=>{r.dispose()});return e("returning rename operation"),this._progressService.showWhile(f,250),f}acceptRenameInput(e){this._renameWidget.acceptInput(e)}cancelRenameInput(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}_reportTelemetry(e,t,n){const i=typeof n=="boolean"?{kind:"cancelled",languageId:t,nRenameSuggestionProviders:e}:{kind:"accepted",languageId:t,nRenameSuggestionProviders:e,source:n.stats.source.k,nRenameSuggestions:n.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:n.stats.timeBeforeFirstInputFieldEdit,wantsPreview:n.wantsPreview,nRenameSuggestionsInvocations:n.stats.nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:n.stats.hadAutomaticRenameSuggestionsInvocation};this._telemetryService.publicLog2("renameInvokedEvent",i)}},p5=Hg,Hg.ID="editor.contrib.renameController",Hg);wu=p5=b2e([Kd(1,Ce),Kd(2,En),Kd(3,x0),Kd(4,Lu),Kd(5,Hi),Kd(6,AT),Kd(7,ue),Kd(8,Zi)],wu);class C2e extends he{constructor(){super({id:"editor.action.rename",label:m("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:K.and(I.writable,I.hasRenameProvider),kbOpts:{kbExpr:I.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const n=e.get(mt),[i,o]=Array.isArray(t)&&t||[void 0,void 0];return Se.isUri(i)&&A.isIPosition(o)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then(r=>{r&&(r.setPosition(o),r.invokeWithinContext(a=>(this.reportTelemetry(a,r),this.run(a,r))))},Pe):super.runCommand(e,t)}run(e,t){const n=e.get(Hi),i=wu.get(t);return i?(n.trace("[RenameAction] got controller, running..."),i.run()):(n.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}}dt(wu.ID,wu,4);Q(C2e);const YB=Zn.bindToContribution(wu.get);oe(new YB({id:"acceptRenameInput",precondition:vv,handler:s=>s.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:K.and(I.focus,K.not("isComposing")),primary:3}}));oe(new YB({id:"acceptRenameInputWithPreview",precondition:K.and(vv,K.has("config.editor.rename.enablePreview")),handler:s=>s.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:K.and(I.focus,K.not("isComposing")),primary:2051}}));oe(new YB({id:"cancelRenameInput",precondition:vv,handler:s=>s.cancelRenameInput(),kbOpts:{weight:199,kbExpr:I.focus,primary:9,secondary:[1033]}}));Ot(class extends Rs{constructor(){super({id:"focusNextRenameSuggestion",title:{...Ee("focusNextRenameSuggestion","Focus Next Rename Suggestion")},precondition:vv,keybinding:[{primary:18,weight:199}]})}run(e){const t=e.get(mt).getFocusedCodeEditor();if(!t)return;const n=wu.get(t);n&&n.focusNextRenameSuggestion()}});Ot(class extends Rs{constructor(){super({id:"focusPreviousRenameSuggestion",title:{...Ee("focusPreviousRenameSuggestion","Focus Previous Rename Suggestion")},precondition:vv,keybinding:[{primary:16,weight:199}]})}run(e){const t=e.get(mt).getFocusedCodeEditor();if(!t)return;const n=wu.get(t);n&&n.focusPreviousRenameSuggestion()}});Js("_executeDocumentRenameProvider",function(s,e,t,...n){const[i]=n;gt(typeof i=="string");const{renameProvider:o}=s.get(ue);return v2e(o,e,t,i)});Js("_executePrepareRename",async function(s,e,t){const{renameProvider:n}=s.get(ue),o=await new ZB(e,t,n).resolveRenameLocation(Ue.None);if(o!=null&&o.rejectReason)throw new Error(o.rejectReason);return o});ln.as(ca.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:m("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}});var w2e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},eU=function(s,e){return function(t,n){e(t,n,s)}},Y_;let uD=(Y_=class extends F{constructor(e,t,n){super(),this.editor=e,this.languageConfigurationService=t,this.editorWorkerService=n,this.decorations=this.editor.createDecorationsCollection(),this.options=this.createOptions(e.getOption(73)),this.computePromise=null,this.currentOccurrences={},this._register(e.onDidChangeModel(i=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(e.onDidChangeModelLanguage(i=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(t.onDidChange(i=>{var r;const o=(r=this.editor.getModel())==null?void 0:r.getLanguageId();o&&i.affects(o)&&(this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(e.onDidChangeConfiguration(i=>{this.options&&!i.hasChanged(73)||(this.options=this.createOptions(e.getOption(73)),this.updateDecorations([]),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(this.editor.onDidChangeModelContent(i=>{this.computeSectionHeaders.schedule()})),this._register(e.onDidChangeModelTokens(i=>{this.computeSectionHeaders.isScheduled()||this.computeSectionHeaders.schedule(1e3)})),this.computeSectionHeaders=this._register(new It(()=>{this.findSectionHeaders()},250)),this.computeSectionHeaders.schedule(0)}createOptions(e){if(!e||!this.editor.hasModel())return;const t=this.editor.getModel().getLanguageId();if(!t)return;const n=this.languageConfigurationService.getLanguageConfiguration(t).comments,i=this.languageConfigurationService.getLanguageConfiguration(t).foldingRules;if(!(!n&&!(i!=null&&i.markers)))return{foldingRules:i,findMarkSectionHeaders:e.showMarkSectionHeaders,findRegionSectionHeaders:e.showRegionSectionHeaders}}findSectionHeaders(){var n,i;if(!this.editor.hasModel()||!((n=this.options)!=null&&n.findMarkSectionHeaders)&&!((i=this.options)!=null&&i.findRegionSectionHeaders))return;const e=this.editor.getModel();if(e.isDisposed()||e.isTooLargeForSyncing())return;const t=e.getVersionId();this.editorWorkerService.findSectionHeaders(e.uri,this.options).then(o=>{e.isDisposed()||e.getVersionId()!==t||this.updateDecorations(o)})}updateDecorations(e){const t=this.editor.getModel();t&&(e=e.filter(o=>{if(!o.shouldBeInComments)return!0;const r=t.validateRange(o.range),a=t.tokenization.getLineTokens(r.startLineNumber),l=a.findTokenIndexAtOffset(r.startColumn-1),c=a.getStandardTokenType(l);return a.getLanguageId(l)===t.getLanguageId()&&c===1}));const n=Object.values(this.currentOccurrences).map(o=>o.decorationId),i=e.map(o=>y2e(o));this.editor.changeDecorations(o=>{const r=o.deltaDecorations(n,i);this.currentOccurrences={};for(let a=0,l=r.length;a<l;a++){const c={sectionHeader:e[a],decorationId:r[a]};this.currentOccurrences[c.decorationId]=c}})}stop(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop(),this.decorations.clear()}},Y_.ID="editor.sectionHeaderDetector",Y_);uD=w2e([eU(1,cn),eU(2,to)],uD);function y2e(s){return{range:s.range,options:Ve.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:s.hasSeparatorLine?2:1,sectionHeaderText:s.text}})}}dt(uD.ID,uD,1);function S2e(s){for(let e=0,t=s.length;e<t;e+=4){const n=s[e+0],i=s[e+1],o=s[e+2],r=s[e+3];s[e+0]=r,s[e+1]=o,s[e+2]=i,s[e+3]=n}}function k2e(s){const e=new Uint8Array(s.buffer,s.byteOffset,s.length*4);return Lj()||S2e(e),NT.wrap(e)}function gJ(s){const e=new Uint32Array(L2e(s));let t=0;if(e[t++]=s.id,s.type==="full")e[t++]=1,e[t++]=s.data.length,e.set(s.data,t),t+=s.data.length;else{e[t++]=2,e[t++]=s.deltas.length;for(const n of s.deltas)e[t++]=n.start,e[t++]=n.deleteCount,n.data?(e[t++]=n.data.length,e.set(n.data,t),t+=n.data.length):e[t++]=0}return k2e(e)}function L2e(s){let e=0;if(e+=2,s.type==="full")e+=1+s.data.length;else{e+=1,e+=3*s.deltas.length;for(const t of s.deltas)t.data&&(e+=t.data.length)}return e}function UE(s){return s&&!!s.data}function mJ(s){return s&&Array.isArray(s.edits)}class x2e{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}}function pJ(s,e){return s.has(e)}function D2e(s,e){const t=s.orderedGroups(e);return t.length>0?t[0]:[]}async function _J(s,e,t,n,i){const o=D2e(s,e),r=await Promise.all(o.map(async a=>{let l,c=null;try{l=await a.provideDocumentSemanticTokens(e,a===t?n:null,i)}catch(d){c=d,l=null}return(!l||!UE(l)&&!mJ(l))&&(l=null),new x2e(a,l,c)}));for(const a of r){if(a.error)throw a.error;if(a.tokens)return a}return r.length>0?r[0]:null}function I2e(s,e){const t=s.orderedGroups(e);return t.length>0?t[0]:null}class T2e{constructor(e,t){this.provider=e,this.tokens=t}}function E2e(s,e){return s.has(e)}function bJ(s,e){const t=s.orderedGroups(e);return t.length>0?t[0]:[]}async function XB(s,e,t,n){const i=bJ(s,e),o=await Promise.all(i.map(async r=>{let a;try{a=await r.provideDocumentRangeSemanticTokens(e,t,n)}catch(l){kn(l),a=null}return(!a||!UE(a))&&(a=null),new T2e(r,a)}));for(const r of o)if(r.tokens)return r;return o.length>0?o[0]:null}rt.registerCommand("_provideDocumentSemanticTokensLegend",async(s,...e)=>{const[t]=e;gt(t instanceof Se);const n=s.get(Ut).getModel(t);if(!n)return;const{documentSemanticTokensProvider:i}=s.get(ue),o=I2e(i,n);return o?o[0].getLegend():s.get(Wt).executeCommand("_provideDocumentRangeSemanticTokensLegend",t)});rt.registerCommand("_provideDocumentSemanticTokens",async(s,...e)=>{const[t]=e;gt(t instanceof Se);const n=s.get(Ut).getModel(t);if(!n)return;const{documentSemanticTokensProvider:i}=s.get(ue);if(!pJ(i,n))return s.get(Wt).executeCommand("_provideDocumentRangeSemanticTokens",t,n.getFullModelRange());const o=await _J(i,n,null,null,Ue.None);if(!o)return;const{provider:r,tokens:a}=o;if(!a||!UE(a))return;const l=gJ({id:0,type:"full",data:a.data});return a.resultId&&r.releaseDocumentSemanticTokens(a.resultId),l});rt.registerCommand("_provideDocumentRangeSemanticTokensLegend",async(s,...e)=>{const[t,n]=e;gt(t instanceof Se);const i=s.get(Ut).getModel(t);if(!i)return;const{documentRangeSemanticTokensProvider:o}=s.get(ue),r=bJ(o,i);if(r.length===0)return;if(r.length===1)return r[0].getLegend();if(!n||!L.isIRange(n))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),r[0].getLegend();const a=await XB(o,i,L.lift(n),Ue.None);if(a)return a.provider.getLegend()});rt.registerCommand("_provideDocumentRangeSemanticTokens",async(s,...e)=>{const[t,n]=e;gt(t instanceof Se),gt(L.isIRange(n));const i=s.get(Ut).getModel(t);if(!i)return;const{documentRangeSemanticTokensProvider:o}=s.get(ue),r=await XB(o,i,L.lift(n),Ue.None);if(!(!r||!r.tokens))return gJ({id:0,type:"full",data:r.tokens.data})});const QB="editor.semanticHighlighting";function fk(s,e,t){var i;const n=(i=t.getValue(QB,{overrideIdentifier:s.getLanguageId(),resource:s.uri}))==null?void 0:i.enabled;return typeof n=="boolean"?n:e.getColorTheme().semanticHighlighting}var vJ=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Rl=function(s,e){return function(t,n){e(t,n,s)}},Xd;let _5=class extends F{constructor(e,t,n,i,o,r){super(),this._watchers=Object.create(null);const a=d=>{this._watchers[d.uri.toString()]=new b5(d,e,n,o,r)},l=(d,h)=>{h.dispose(),delete this._watchers[d.uri.toString()]},c=()=>{for(const d of t.getModels()){const h=this._watchers[d.uri.toString()];fk(d,n,i)?h||a(d):h&&l(d,h)}};t.getModels().forEach(d=>{fk(d,n,i)&&a(d)}),this._register(t.onModelAdded(d=>{fk(d,n,i)&&a(d)})),this._register(t.onModelRemoved(d=>{const h=this._watchers[d.uri.toString()];h&&l(d,h)})),this._register(i.onDidChangeConfiguration(d=>{d.affectsConfiguration(QB)&&c()})),this._register(n.onDidColorThemeChange(c))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}};_5=vJ([Rl(0,OT),Rl(1,Ut),Rl(2,Yn),Rl(3,Ze),Rl(4,ir),Rl(5,ue)],_5);var Jh;let b5=(Jh=class extends F{constructor(e,t,n,i,o){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=o.documentSemanticTokensProvider,this._debounceInformation=i.for(this._provider,"DocumentSemanticTokens",{min:Xd.REQUEST_MIN_DELAY,max:Xd.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new It(()=>this._fetchDocumentSemanticTokensNow(),Xd.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const r=()=>{Mt(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const a of this._provider.all(e))typeof a.onDidChange=="function"&&this._documentProvidersChangeListeners.push(a.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))};r(),this._register(this._provider.onDidChange(()=>{r(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(n.onDidColorThemeChange(a=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),Mt(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!pJ(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;const e=new an,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,i=_J(this._provider,this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;const o=[],r=this._model.onDidChangeContent(l=>{o.push(l)}),a=new pi(!1);i.then(l=>{if(this._debounceInformation.update(this._model,a.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),!l)this._setDocumentSemanticTokens(null,null,null,o);else{const{provider:c,tokens:d}=l,h=this._semanticTokensStylingService.getStyling(c);this._setDocumentSemanticTokens(c,d||null,h,o)}},l=>{l&&(Tr(l)||typeof l.message=="string"&&l.message.indexOf("busy")!==-1)||Pe(l),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),(o.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(e,t,n,i,o){o=Math.min(o,n.length-i,e.length-t);for(let r=0;r<o;r++)n[i+r]=e[t+r]}_setDocumentSemanticTokens(e,t,n,i){const o=this._currentDocumentResponse,r=()=>{(i.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){e&&t&&e.releaseDocumentSemanticTokens(t.resultId);return}if(!e||!n){this._model.tokenization.setSemanticTokens(null,!1);return}if(!t){this._model.tokenization.setSemanticTokens(null,!0),r();return}if(mJ(t)){if(!o){this._model.tokenization.setSemanticTokens(null,!0);return}if(t.edits.length===0)t={resultId:t.resultId,data:o.data};else{let a=0;for(const u of t.edits)a+=(u.data?u.data.length:0)-u.deleteCount;const l=o.data,c=new Uint32Array(l.length+a);let d=l.length,h=c.length;for(let u=t.edits.length-1;u>=0;u--){const f=t.edits[u];if(f.start>l.length){n.warnInvalidEditStart(o.resultId,t.resultId,u,f.start,l.length),this._model.tokenization.setSemanticTokens(null,!0);return}const g=d-(f.start+f.deleteCount);g>0&&(Xd._copy(l,d-g,c,h-g,g),h-=g),f.data&&(Xd._copy(f.data,0,c,h-f.data.length,f.data.length),h-=f.data.length),d=f.start}d>0&&Xd._copy(l,0,c,0,d),t={resultId:t.resultId,data:c}}}if(UE(t)){this._currentDocumentResponse=new N2e(e,t.resultId,t.data);const a=mK(t,n,this._model.getLanguageId());if(i.length>0)for(const l of i)for(const c of a)for(const d of l.changes)c.applyEdit(d.range,d.text);this._model.tokenization.setSemanticTokens(a,!0)}else this._model.tokenization.setSemanticTokens(null,!0);r()}},Xd=Jh,Jh.REQUEST_MIN_DELAY=300,Jh.REQUEST_MAX_DELAY=2e3,Jh);b5=Xd=vJ([Rl(1,OT),Rl(2,Yn),Rl(3,ir),Rl(4,ue)],b5);class N2e{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}hv(_5);var R2e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},Xv=function(s,e){return function(t,n){e(t,n,s)}},X_;let fD=(X_=class extends F{constructor(e,t,n,i,o,r){super(),this._semanticTokensStylingService=t,this._themeService=n,this._configurationService=i,this._editor=e,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=o.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new It(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const a=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{a()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),a()})),this._register(this._editor.onDidChangeModelContent(l=>{this._cancelAll(),a()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),a()})),this._register(this._configurationService.onDidChangeConfiguration(l=>{l.affectsConfiguration(QB)&&(this._cancelAll(),a())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),a()})),a()}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e){this._outstandingRequests.splice(t,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!fk(e,this._themeService,this._configurationService)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}if(!E2e(this._provider,e)){e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1);return}const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map(n=>this._requestRange(e,n)))}_requestRange(e,t){const n=e.getVersionId(),i=si(r=>Promise.resolve(XB(this._provider,e,t,r))),o=new pi(!1);return i.then(r=>{if(this._debounceInformation.update(e,o.elapsed()),!r||!r.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:a,tokens:l}=r,c=this._semanticTokensStylingService.getStyling(a);e.tokenization.setPartialSemanticTokens(t,mK(l,c,e.getLanguageId()))}).then(()=>this._removeOutstandingRequest(i),()=>this._removeOutstandingRequest(i)),i}},X_.ID="editor.contrib.viewportSemanticTokens",X_);fD=R2e([Xv(1,OT),Xv(2,Yn),Xv(3,Ze),Xv(4,ir),Xv(5,ue)],fD);dt(fD.ID,fD,1);class M2e{constructor(e=!0){this.selectSubwords=e}provideSelectionRanges(e,t){const n=[];for(const i of t){const o=[];n.push(o),this.selectSubwords&&this._addInWordRanges(o,e,i),this._addWordRanges(o,e,i),this._addWhitespaceLine(o,e,i),o.push({range:e.getFullModelRange()})}return n}_addInWordRanges(e,t,n){const i=t.getWordAtPosition(n);if(!i)return;const{word:o,startColumn:r}=i,a=n.column-r;let l=a,c=a,d=0;for(;l>=0;l--){const h=o.charCodeAt(l);if(l!==a&&(h===95||h===45))break;if(ph(h)&&Il(d))break;d=h}for(l+=1;c<o.length;c++){const h=o.charCodeAt(c);if(Il(h)&&ph(d))break;if(h===95||h===45)break;d=h}l<c&&e.push({range:new L(n.lineNumber,r+l,n.lineNumber,r+c)})}_addWordRanges(e,t,n){const i=t.getWordAtPosition(n);i&&e.push({range:new L(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn)})}_addWhitespaceLine(e,t,n){t.getLineLength(n.lineNumber)>0&&t.getLineFirstNonWhitespaceColumn(n.lineNumber)===0&&t.getLineLastNonWhitespaceColumn(n.lineNumber)===0&&e.push({range:new L(n.lineNumber,1,n.lineNumber,t.getLineMaxColumn(n.lineNumber))})}}var A2e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},P2e=function(s,e){return function(t,n){e(t,n,s)}},v5;class JB{constructor(e,t){this.index=e,this.ranges=t}mov(e){const t=this.index+(e?1:-1);if(t<0||t>=this.ranges.length)return this;const n=new JB(t,this.ranges);return n.ranges[t].equalsRange(this.ranges[this.index])?n.mov(e):n}}var Vg;let n0=(Vg=class{static get(e){return e.getContribution(v5.ID)}constructor(e,t){this._editor=e,this._languageFeaturesService=t,this._ignoreSelection=!1}dispose(){var e;(e=this._selectionListener)==null||e.dispose()}async run(e){if(!this._editor.hasModel())return;const t=this._editor.getSelections(),n=this._editor.getModel();if(this._state||await wJ(this._languageFeaturesService.selectionRangeProvider,n,t.map(o=>o.getPosition()),this._editor.getOption(114),Ue.None).then(o=>{var r;if(!(!cs(o)||o.length!==t.length)&&!(!this._editor.hasModel()||!en(this._editor.getSelections(),t,(a,l)=>a.equalsSelection(l)))){for(let a=0;a<o.length;a++)o[a]=o[a].filter(l=>l.containsPosition(t[a].getStartPosition())&&l.containsPosition(t[a].getEndPosition())),o[a].unshift(t[a]);this._state=o.map(a=>new JB(0,a)),(r=this._selectionListener)==null||r.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{var a;this._ignoreSelection||((a=this._selectionListener)==null||a.dispose(),this._state=void 0)})}}),!this._state)return;this._state=this._state.map(o=>o.mov(e));const i=this._state.map(o=>me.fromPositions(o.ranges[o.index].getStartPosition(),o.ranges[o.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(i)}finally{this._ignoreSelection=!1}}},v5=Vg,Vg.ID="editor.contrib.smartSelectController",Vg);n0=v5=A2e([P2e(1,ue)],n0);class CJ extends he{constructor(e,t){super(t),this._forward=e}async run(e,t){const n=n0.get(t);n&&await n.run(this._forward)}}class O2e extends CJ{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:m("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:ge.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}}rt.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class F2e extends CJ{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:m("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:ge.MenubarSelectionMenu,group:"1_basic",title:m({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}}dt(n0.ID,n0,4);Q(O2e);Q(F2e);async function wJ(s,e,t,n,i){const o=s.all(e).concat(new M2e(n.selectSubwords));o.length===1&&o.unshift(new Xx);const r=[],a=[];for(const l of o)r.push(Promise.resolve(l.provideSelectionRanges(e,t,i)).then(c=>{if(cs(c)&&c.length===t.length)for(let d=0;d<t.length;d++){a[d]||(a[d]=[]);for(const h of c[d])L.isIRange(h.range)&&L.containsPosition(h.range,t[d])&&a[d].push(L.lift(h.range))}},kn));return await Promise.all(r),a.map(l=>{if(l.length===0)return[];l.sort((u,f)=>A.isBefore(u.getStartPosition(),f.getStartPosition())?1:A.isBefore(f.getStartPosition(),u.getStartPosition())||A.isBefore(u.getEndPosition(),f.getEndPosition())?-1:A.isBefore(f.getEndPosition(),u.getEndPosition())?1:0);const c=[];let d;for(const u of l)(!d||L.containsRange(u,d)&&!L.equalsRange(u,d))&&(c.push(u),d=u);if(!n.selectLeadingAndTrailingWhitespace)return c;const h=[c[0]];for(let u=1;u<c.length;u++){const f=c[u-1],g=c[u];if(g.startLineNumber!==f.startLineNumber||g.endLineNumber!==f.endLineNumber){const p=new L(f.startLineNumber,e.getLineFirstNonWhitespaceColumn(f.startLineNumber),f.endLineNumber,e.getLineLastNonWhitespaceColumn(f.endLineNumber));p.containsRange(f)&&!p.equalsRange(f)&&g.containsRange(p)&&!g.equalsRange(p)&&h.push(p);const _=new L(f.startLineNumber,1,f.endLineNumber,e.getLineMaxColumn(f.endLineNumber));_.containsRange(f)&&!_.equalsRange(p)&&g.containsRange(_)&&!g.equalsRange(_)&&h.push(_)}h.push(g)}return h})}rt.registerCommand("_executeSelectionRangeProvider",async function(s,...e){const[t,n]=e;gt(Se.isUri(t));const i=s.get(ue).selectionRangeProvider,o=await s.get(Qs).createModelReference(t);try{return wJ(i,o.object.textEditorModel,n,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},Ue.None)}finally{o.dispose()}});const W2e=Object.freeze({View:Ee("view","View"),Help:Ee("help","Help"),Test:Ee("test","Test"),File:Ee("file","File"),Preferences:Ee("preferences","Preferences"),Developer:Ee({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});class sw{constructor(e,t,n,i=null){this.startLineNumbers=e,this.endLineNumbers=t,this.lastLineRelativePosition=n,this.showEndForLine=i}equals(e){return!!e&&this.lastLineRelativePosition===e.lastLineRelativePosition&&this.showEndForLine===e.showEndForLine&&en(this.startLineNumbers,e.startLineNumbers)&&en(this.endLineNumbers,e.endLineNumbers)}static get Empty(){return new sw([],[],0)}}const tU=Nd("stickyScrollViewLayer",{createHTML:s=>s}),d2="data-sticky-line-index",nU="data-sticky-is-line",B2e="data-sticky-is-line-number",iU="data-sticky-is-folding-icon";class H2e extends F{constructor(e){super(),this._editor=e,this._foldingIconStore=new q,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(67),this._renderedStickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",e instanceof aa),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);const t=()=>{this._linesDomNode.style.left=this._editor.getOption(116).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"};this._register(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(116)&&t(),n.hasChanged(67)&&(this._lineHeight=this._editor.getOption(67))})),this._register(this._editor.onDidScrollChange(n=>{n.scrollLeftChanged&&t(),n.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{t(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),t(),this._register(this._editor.onDidLayoutChange(n=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getRenderedStickyLine(e){return this._renderedStickyLines.find(t=>t.lineNumber===e)}getCurrentLines(){return this._lineNumbers}setState(e,t,n){if(n===void 0&&(!this._previousState&&!e||this._previousState&&this._previousState.equals(e)))return;const i=this._isWidgetHeightZero(e),o=i?void 0:e,r=i?0:this._findLineToRebuildWidgetFrom(e,n);this._renderRootNode(o,t,r),this._previousState=e}_isWidgetHeightZero(e){if(!e)return!0;const t=e.startLineNumbers.length*this._lineHeight+e.lastLineRelativePosition;if(t>0){this._lastLineRelativePosition=e.lastLineRelativePosition;const n=[...e.startLineNumbers];e.showEndForLine!==null&&(n[e.showEndForLine]=e.endLineNumbers[e.showEndForLine]),this._lineNumbers=n}else this._lastLineRelativePosition=0,this._lineNumbers=[];return t===0}_findLineToRebuildWidgetFrom(e,t){if(!e||!this._previousState)return 0;if(t!==void 0)return t;const n=this._previousState,i=e.startLineNumbers.findIndex(o=>!n.startLineNumbers.includes(o));return i===-1?0:i}_updateWidgetWidth(){const e=this._editor.getLayoutInfo(),t=e.contentLeft;this._lineNumbersDomNode.style.width=`${t}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",`${this._editor.getScrollWidth()-e.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${e.width-e.verticalScrollbarWidth}px`}_clearStickyLinesFromLine(e){this._foldingIconStore.clear();for(let t=e;t<this._renderedStickyLines.length;t++){const n=this._renderedStickyLines[t];n.lineNumberDomNode.remove(),n.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,e),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(e){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${e?.5:0}s`)}_setFoldingIconsVisibility(e){for(const t of this._renderedStickyLines){const n=t.foldingIcon;n&&n.setVisible(e?!0:n.isCollapsed)}}async _renderRootNode(e,t,n){if(this._clearStickyLinesFromLine(n),!e)return;for(const a of this._renderedStickyLines)this._updateTopAndZIndexOfStickyLine(a);const i=this._editor.getLayoutInfo(),o=this._lineNumbers.slice(n);for(const[a,l]of o.entries()){const c=this._renderChildNode(a+n,l,t,i);c&&(this._linesDomNode.appendChild(c.lineDomNode),this._lineNumbersDomNode.appendChild(c.lineNumberDomNode),this._renderedStickyLines.push(c))}t&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));const r=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${r}px`,this._linesDomNodeScrollable.style.height=`${r}px`,this._rootDomNode.style.height=`${r}px`,this._rootDomNode.style.marginLeft="0px",this._minContentWidthInPx=Math.max(...this._renderedStickyLines.map(a=>a.scrollWidth))+i.verticalScrollbarWidth,this._editor.layoutOverlayWidget(this)}_setFoldingHoverListeners(){this._editor.getOption(111)==="mouseover"&&(this._foldingIconStore.add($(this._lineNumbersDomNode,ee.MOUSE_ENTER,()=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add($(this._lineNumbersDomNode,ee.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(e,t,n,i){const o=this._editor._getViewModel();if(!o)return;const r=o.coordinatesConverter.convertModelPositionToViewPosition(new A(t,1)).lineNumber,a=o.getViewLineRenderingData(r),l=this._editor.getOption(68);let c;try{c=ws.filter(a.inlineDecorations,r,a.minColumn,a.maxColumn)}catch{c=[]}const d=new Tu(!0,!0,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,0,a.tokens,c,a.tabSize,a.startVisibleColumn,1,1,1,500,"none",!0,!0,null),h=new Qb(2e3),u=W0(d,h);let f;tU?f=tU.createHTML(h.build()):f=h.build();const g=document.createElement("span");g.setAttribute(d2,String(e)),g.setAttribute(nU,""),g.setAttribute("role","listitem"),g.tabIndex=0,g.className="sticky-line-content",g.classList.add(`stickyLine${t}`),g.style.lineHeight=`${this._lineHeight}px`,g.innerHTML=f;const p=document.createElement("span");p.setAttribute(d2,String(e)),p.setAttribute(B2e,""),p.className="sticky-line-number",p.style.lineHeight=`${this._lineHeight}px`;const _=i.contentLeft;p.style.width=`${_}px`;const b=document.createElement("span");l.renderType===1||l.renderType===3&&t%10===0?b.innerText=t.toString():l.renderType===2&&(b.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),b.className="sticky-line-number-inner",b.style.lineHeight=`${this._lineHeight}px`,b.style.width=`${i.lineNumbersWidth}px`,b.style.paddingLeft=`${i.lineNumbersLeft}px`,p.appendChild(b);const v=this._renderFoldingIconForLine(n,t);v&&p.appendChild(v.domNode),this._editor.applyFontInfo(g),this._editor.applyFontInfo(b),p.style.lineHeight=`${this._lineHeight}px`,g.style.lineHeight=`${this._lineHeight}px`,p.style.height=`${this._lineHeight}px`,g.style.height=`${this._lineHeight}px`;const C=new V2e(e,t,g,p,v,u.characterMapping,g.scrollWidth);return this._updateTopAndZIndexOfStickyLine(C)}_updateTopAndZIndexOfStickyLine(e){var d;const t=e.index,n=e.lineDomNode,i=e.lineNumberDomNode,o=t===this._lineNumbers.length-1,r="0",a="1";n.style.zIndex=o?r:a,i.style.zIndex=o?r:a;const l=`${t*this._lineHeight+this._lastLineRelativePosition+((d=e.foldingIcon)!=null&&d.isCollapsed?1:0)}px`,c=`${t*this._lineHeight}px`;return n.style.top=o?l:c,i.style.top=o?l:c,e}_renderFoldingIconForLine(e,t){const n=this._editor.getOption(111);if(!e||n==="never")return;const i=e.regions,o=i.findRange(t),r=i.getStartLineNumber(o);if(!(t===r))return;const l=i.isCollapsed(o),c=new z2e(l,r,i.getEndLineNumber(o),this._lineHeight);return c.setVisible(this._isOnGlyphMargin?!0:l||n==="always"),c.domNode.setAttribute(iU,""),c}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:2,stackOridinal:10}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(e){0<=e&&e<this._renderedStickyLines.length&&this._renderedStickyLines[e].lineDomNode.focus()}getEditorPositionFromNode(e){if(!e||e.children.length>0)return null;const t=this._getRenderedStickyLineFromChildDomNode(e);if(!t)return null;const n=DW(t.characterMapping,e,0);return new A(t.lineNumber,n)}getLineNumberFromChildDomNode(e){var t;return((t=this._getRenderedStickyLineFromChildDomNode(e))==null?void 0:t.lineNumber)??null}_getRenderedStickyLineFromChildDomNode(e){const t=this.getLineIndexFromChildDomNode(e);return t===null||t<0||t>=this._renderedStickyLines.length?null:this._renderedStickyLines[t]}getLineIndexFromChildDomNode(e){const t=this._getAttributeValue(e,d2);return t?parseInt(t,10):null}isInStickyLine(e){return this._getAttributeValue(e,nU)!==void 0}isInFoldingIconDomNode(e){return this._getAttributeValue(e,iU)!==void 0}_getAttributeValue(e,t){for(;e&&e!==this._rootDomNode;){const n=e.getAttribute(t);if(n!==null)return n;e=e.parentElement}}}class V2e{constructor(e,t,n,i,o,r,a){this.index=e,this.lineNumber=t,this.lineDomNode=n,this.lineNumberDomNode=i,this.foldingIcon=o,this.characterMapping=r,this.scrollWidth=a}}class z2e{constructor(e,t,n,i){this.isCollapsed=e,this.foldingStartLine=t,this.foldingEndLine=n,this.dimension=i,this.domNode=document.createElement("div"),this.domNode.style.width=`${i}px`,this.domNode.style.height=`${i}px`,this.domNode.className=De.asClassName(e?Hx:Bx)}setVisible(e){this.domNode.style.cursor=e?"pointer":"default",this.domNode.style.opacity=e?"1":"0"}}class ow{constructor(e,t){this.startLineNumber=e,this.endLineNumber=t}}class gD{constructor(e,t,n){this.range=e,this.children=t,this.parent=n}}class yJ{constructor(e,t,n,i){this.uri=e,this.version=t,this.element=n,this.outlineProviderId=i}}var jE=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},i0=function(s,e){return function(t,n){e(t,n,s)}},rw;(function(s){s.OUTLINE_MODEL="outlineModel",s.FOLDING_PROVIDER_MODEL="foldingProviderModel",s.INDENTATION_MODEL="indentationModel"})(rw||(rw={}));var Ih;(function(s){s[s.VALID=0]="VALID",s[s.INVALID=1]="INVALID",s[s.CANCELED=2]="CANCELED"})(Ih||(Ih={}));let C5=class extends F{constructor(e,t,n,i){switch(super(),this._editor=e,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new kr(300)),this._updateOperation=this._register(new q),this._editor.getOption(116).defaultModel){case rw.OUTLINE_MODEL:this._modelProviders.push(new w5(this._editor,i));case rw.FOLDING_PROVIDER_MODEL:this._modelProviders.push(new S5(this._editor,t,i));case rw.INDENTATION_MODEL:this._modelProviders.push(new y5(this._editor,n));break}}dispose(){this._modelProviders.forEach(e=>e.dispose()),this._updateOperation.clear(),this._cancelModelPromise(),super.dispose()}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}async update(e){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),await this._updateScheduler.trigger(async()=>{for(const t of this._modelProviders){const{statusPromise:n,modelPromise:i}=t.computeStickyModel(e);this._modelPromise=i;const o=await n;if(this._modelPromise!==i)return null;switch(o){case Ih.CANCELED:return this._updateOperation.clear(),null;case Ih.VALID:return t.stickyModel}}return null}).catch(t=>(Pe(t),null))}};C5=jE([i0(2,Ce),i0(3,ue)],C5);class SJ extends F{constructor(e){super(),this._editor=e,this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,Ih.INVALID}computeStickyModel(e){if(e.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};const t=si(n=>this.createModelFromProvider(n));return{statusPromise:t.then(n=>this.isModelValid(n)?e.isCancellationRequested?Ih.CANCELED:(this._stickyModel=this.createStickyModel(e,n),Ih.VALID):this._invalid()).then(void 0,n=>(Pe(n),Ih.CANCELED)),modelPromise:t}}isModelValid(e){return!0}isProviderValid(){return!0}}let w5=class extends SJ{constructor(e,t){super(e),this._languageFeaturesService=t}createModelFromProvider(e){return Oc.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),e)}createStickyModel(e,t){var r;const{stickyOutlineElement:n,providerID:i}=this._stickyModelFromOutlineModel(t,(r=this._stickyModel)==null?void 0:r.outlineProviderId),o=this._editor.getModel();return new yJ(o.uri,o.getVersionId(),n,i)}isModelValid(e){return e&&e.children.size>0}_stickyModelFromOutlineModel(e,t){let n;if(ot.first(e.children.values())instanceof UQ){const a=ot.find(e.children.values(),l=>l.id===t);if(a)n=a.children;else{let l="",c=-1,d;for(const[h,u]of e.children.entries()){const f=this._findSumOfRangesOfGroup(u);f>c&&(d=u,c=f,l=u.id)}t=l,n=d.children}}else n=e.children;const i=[],o=Array.from(n.values()).sort((a,l)=>{const c=new ow(a.symbol.range.startLineNumber,a.symbol.range.endLineNumber),d=new ow(l.symbol.range.startLineNumber,l.symbol.range.endLineNumber);return this._comparator(c,d)});for(const a of o)i.push(this._stickyModelFromOutlineElement(a,a.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new gD(void 0,i,void 0),providerID:t}}_stickyModelFromOutlineElement(e,t){const n=[];for(const o of e.children.values())if(o.symbol.selectionRange.startLineNumber!==o.symbol.range.endLineNumber)if(o.symbol.selectionRange.startLineNumber!==t)n.push(this._stickyModelFromOutlineElement(o,o.symbol.selectionRange.startLineNumber));else for(const r of o.children.values())n.push(this._stickyModelFromOutlineElement(r,o.symbol.selectionRange.startLineNumber));n.sort((o,r)=>this._comparator(o.range,r.range));const i=new ow(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new gD(i,n,void 0)}_comparator(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}_findSumOfRangesOfGroup(e){let t=0;for(const n of e.children.values())t+=this._findSumOfRangesOfGroup(n);return e instanceof d4?t+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:t}};w5=jE([i0(1,ue)],w5);class kJ extends SJ{constructor(e){super(e),this._foldingLimitReporter=new VQ(e)}createStickyModel(e,t){const n=this._fromFoldingRegions(t),i=this._editor.getModel();return new yJ(i.uri,i.getVersionId(),n,void 0)}isModelValid(e){return e!==null}_fromFoldingRegions(e){const t=e.length,n=[],i=new gD(void 0,[],void 0);for(let o=0;o<t;o++){const r=e.getParentIndex(o);let a;r!==-1?a=n[r]:a=i;const l=new gD(new ow(e.getStartLineNumber(o),e.getEndLineNumber(o)+1),[],a);a.children.push(l),n.push(l)}return i}}let y5=class extends kJ{constructor(e,t){super(e),this._languageConfigurationService=t,this.provider=this._register(new WB(e.getModel(),this._languageConfigurationService,this._foldingLimitReporter))}async createModelFromProvider(e){return this.provider.compute(e)}};y5=jE([i0(1,cn)],y5);let S5=class extends kJ{constructor(e,t,n){super(e),this._languageFeaturesService=n;const i=Cu.getFoldingRangeProviders(this._languageFeaturesService,e.getModel());i.length>0&&(this.provider=this._register(new BB(e.getModel(),i,t,this._foldingLimitReporter,void 0)))}isProviderValid(){return this.provider!==void 0}async createModelFromProvider(e){var t;return((t=this.provider)==null?void 0:t.compute(e))??null}};S5=jE([i0(2,ue)],S5);var $2e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},sU=function(s,e){return function(t,n){e(t,n,s)}};class U2e{constructor(e,t,n){this.startLineNumber=e,this.endLineNumber=t,this.nestingDepth=n}}let k5=class extends F{constructor(e,t,n){super(),this._languageFeaturesService=t,this._languageConfigurationService=n,this._onDidChangeStickyScroll=this._register(new O),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=e,this._sessionStore=this._register(new q),this._updateSoon=this._register(new It(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(116)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._sessionStore.clear(),this._editor.getOption(116).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this.updateStickyModelProvider(),this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this._sessionStore.add(ve(()=>{var t;(t=this._stickyModelProvider)==null||t.dispose(),this._stickyModelProvider=null})),this.updateStickyModelProvider(),this.update())}getVersionId(){var e;return(e=this._model)==null?void 0:e.version}updateStickyModelProvider(){var t;(t=this._stickyModelProvider)==null||t.dispose(),this._stickyModelProvider=null;const e=this._editor;e.hasModel()&&(this._stickyModelProvider=new C5(e,()=>this._updateSoon.schedule(),this._languageConfigurationService,this._languageFeaturesService))}async update(){var e;(e=this._cts)==null||e.dispose(!0),this._cts=new an,await this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()}async updateStickyModel(e){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization()){this._model=null;return}const t=await this._stickyModelProvider.update(e);e.isCancellationRequested||(this._model=t)}updateIndex(e){return e===-1?e=0:e<0&&(e=-e-2),e}getCandidateStickyLinesIntersectingFromStickyModel(e,t,n,i,o){if(t.children.length===0)return;let r=o;const a=[];for(let d=0;d<t.children.length;d++){const h=t.children[d];h.range&&a.push(h.range.startLineNumber)}const l=this.updateIndex(Tw(a,e.startLineNumber,(d,h)=>d-h)),c=this.updateIndex(Tw(a,e.startLineNumber+i,(d,h)=>d-h));for(let d=l;d<=c;d++){const h=t.children[d];if(!h)return;if(h.range){const u=h.range.startLineNumber,f=h.range.endLineNumber;e.startLineNumber<=f+1&&u-1<=e.endLineNumber&&u!==r&&(r=u,n.push(new U2e(u,f-1,i+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,h,n,i+1,u))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,h,n,i,o)}}getCandidateStickyLinesIntersecting(e){var i,o;if(!((i=this._model)!=null&&i.element))return[];let t=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,t,0,-1);const n=(o=this._editor._getViewModel())==null?void 0:o.getHiddenAreas();if(n)for(const r of n)t=t.filter(a=>!(a.startLineNumber>=r.startLineNumber&&a.endLineNumber<=r.endLineNumber+1));return t}};k5=$2e([sU(1,ue),sU(2,cn)],k5);var j2e=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},_p=function(s,e){return function(t,n){e(t,n,s)}},L5,zg;let xd=(zg=class extends F{constructor(e,t,n,i,o,r,a){super(),this._editor=e,this._contextMenuService=t,this._languageFeaturesService=n,this._instaService=i,this._contextKeyService=a,this._sessionStore=new q,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._stickyScrollWidget=new H2e(this._editor),this._stickyLineCandidateProvider=new k5(this._editor,n,o),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=sw.Empty,this._onDidResize(),this._readConfiguration();const l=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration(d=>{this._readConfigurationChange(d)})),this._register($(l,ee.CONTEXT_MENU,async d=>{this._onContextMenu(Le(l),d)})),this._stickyScrollFocusedContextKey=I.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=I.stickyScrollVisible.bindTo(this._contextKeyService);const c=this._register(Ka(l));this._register(c.onDidBlur(d=>{this._positionRevealed===!1&&l.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(c.onDidFocus(d=>{this.focus()})),this._registerMouseListeners(),this._register($(l,ee.MOUSE_DOWN,d=>{this._onMouseDown=!0}))}static get(e){return e.getContribution(L5.ID)}_disposeFocusStickyScrollStore(){var e;this._stickyScrollFocusedContextKey.set(!1),(e=this._focusDisposableStore)==null||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new q,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){const e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}_revealPosition(e){this._reveaInEditor(e,()=>this._editor.revealPosition(e))}_revealLineInCenterIfOutsideViewport(e){this._reveaInEditor(e,()=>this._editor.revealLineInCenterIfOutsideViewport(e.lineNumber,0))}_reveaInEditor(e,t){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,t(),this._editor.setSelection(L.fromPositions(e)),this._editor.focus()}_registerMouseListeners(){const e=this._register(new q),t=this._register(new AE(this._editor,{extractLineNumberFromMouseEvent:o=>{const r=this._stickyScrollWidget.getEditorPositionFromNode(o.target.element);return r?r.lineNumber:0}})),n=o=>{if(!this._editor.hasModel()||o.target.type!==12||o.target.detail!==this._stickyScrollWidget.getId())return null;const r=o.target.element;if(!r||r.innerText!==r.innerHTML)return null;const a=this._stickyScrollWidget.getEditorPositionFromNode(r);return a?{range:new L(a.lineNumber,a.column,a.lineNumber,a.column+r.innerText.length),textElement:r}:null},i=this._stickyScrollWidget.getDomNode();this._register(hn(i,ee.CLICK,o=>{if(o.ctrlKey||o.altKey||o.metaKey||!o.leftButton)return;if(o.shiftKey){const c=this._stickyScrollWidget.getLineIndexFromChildDomNode(o.target);if(c===null)return;const d=new A(this._endLineNumbers[c],1);this._revealLineInCenterIfOutsideViewport(d);return}if(this._stickyScrollWidget.isInFoldingIconDomNode(o.target)){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(o.target);this._toggleFoldingRegionForLine(c);return}if(!this._stickyScrollWidget.isInStickyLine(o.target))return;let l=this._stickyScrollWidget.getEditorPositionFromNode(o.target);if(!l){const c=this._stickyScrollWidget.getLineNumberFromChildDomNode(o.target);if(c===null)return;l=new A(c,1)}this._revealPosition(l)})),this._register(hn(i,ee.MOUSE_MOVE,o=>{if(o.shiftKey){const r=this._stickyScrollWidget.getLineIndexFromChildDomNode(o.target);if(r===null||this._showEndForLine!==null&&this._showEndForLine===r)return;this._showEndForLine=r,this._renderStickyScroll();return}this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register($(i,ee.MOUSE_LEAVE,o=>{this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(t.onMouseMoveOrRelevantKeyDown(([o,r])=>{const a=n(o);if(!a||!o.hasTriggerModifier||!this._editor.hasModel()){e.clear();return}const{range:l,textElement:c}=a;if(!l.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=l,e.clear();else if(c.style.textDecoration==="underline")return;const d=new an;e.add(ve(()=>d.dispose(!0)));let h;G0(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new A(l.startLineNumber,l.startColumn+1),!1,d.token).then(u=>{if(!d.token.isCancellationRequested)if(u.length!==0){this._candidateDefinitionsLength=u.length;const f=c;h!==f?(e.clear(),h=f,h.style.textDecoration="underline",e.add(ve(()=>{h.style.textDecoration="none"}))):h||(h=f,h.style.textDecoration="underline",e.add(ve(()=>{h.style.textDecoration="none"})))}else e.clear()})})),this._register(t.onCancel(()=>{e.clear()})),this._register(t.onExecute(async o=>{if(o.target.type!==12||o.target.detail!==this._stickyScrollWidget.getId())return;const r=this._stickyScrollWidget.getEditorPositionFromNode(o.target.element);r&&(!this._editor.hasModel()||!this._stickyRangeProjectedOnEditor||(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:r.lineNumber,column:1})),this._instaService.invokeFunction(kQ,o,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})))}))}_onContextMenu(e,t){const n=new Gr(e,t);this._contextMenuService.showContextMenu({menuId:ge.StickyScrollContext,getAnchor:()=>n})}_toggleFoldingRegionForLine(e){if(!this._foldingModel||e===null)return;const t=this._stickyScrollWidget.getRenderedStickyLine(e),n=t==null?void 0:t.foldingIcon;if(!n)return;PB(this._foldingModel,Number.MAX_VALUE,[e]),n.isCollapsed=!n.isCollapsed;const i=(n.isCollapsed?this._editor.getTopForLineNumber(n.foldingEndLine):this._editor.getTopForLineNumber(n.foldingStartLine))-this._editor.getOption(67)*t.index+1;this._editor.setScrollTop(i),this._renderStickyScroll(e)}_readConfiguration(){const e=this._editor.getOption(116);if(e.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}else e.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(n=>{n.scrollTopChanged&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(n=>this._onTokensChange(n))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=void 0,this._renderStickyScroll()})),this._enabled=!0);this._editor.getOption(68).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=void 0,this._renderStickyScroll(0)}))}_readConfigurationChange(e){(e.hasChanged(116)||e.hasChanged(73)||e.hasChanged(67)||e.hasChanged(111)||e.hasChanged(68))&&this._readConfiguration(),e.hasChanged(68)&&this._renderStickyScroll(0)}_needsUpdate(e){const t=this._stickyScrollWidget.getCurrentLines();for(const n of t)for(const i of e.ranges)if(n>=i.fromLineNumber&&n<=i.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._renderStickyScroll(0)}_onDidResize(){const t=this._editor.getLayoutInfo().height/this._editor.getOption(67);this._maxStickyLines=Math.round(t*.25)}async _renderStickyScroll(e){const t=this._editor.getModel();if(!t||t.isTooLargeForTokenization()){this._resetState();return}const n=this._updateAndGetMinRebuildFromLine(e),i=this._stickyLineCandidateProvider.getVersionId();if(i===void 0||i===t.getVersionId())if(!this._focused)await this._updateState(n);else if(this._focusedStickyElementIndex===-1)await this._updateState(n),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{const r=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];await this._updateState(n),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(r)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}}_updateAndGetMinRebuildFromLine(e){if(e!==void 0){const t=this._minRebuildFromLine!==void 0?this._minRebuildFromLine:1/0;this._minRebuildFromLine=Math.min(e,t)}return this._minRebuildFromLine}async _updateState(e){var n;this._minRebuildFromLine=void 0,this._foldingModel=await((n=Cu.get(this._editor))==null?void 0:n.getFoldingModel())??void 0,this._widgetState=this.findScrollWidgetState();const t=this._widgetState.startLineNumbers.length>0;this._stickyScrollVisibleContextKey.set(t),this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,e)}async _resetState(){this._minRebuildFromLine=void 0,this._foldingModel=void 0,this._widgetState=sw.Empty,this._stickyScrollVisibleContextKey.set(!1),this._stickyScrollWidget.setState(void 0,void 0)}findScrollWidgetState(){const e=this._editor.getOption(67),t=Math.min(this._maxStickyLines,this._editor.getOption(116).maxLineCount),n=this._editor.getScrollTop();let i=0;const o=[],r=[],a=this._editor.getVisibleRanges();if(a.length!==0){const l=new ow(a[0].startLineNumber,a[a.length-1].endLineNumber),c=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(l);for(const d of c){const h=d.startLineNumber,u=d.endLineNumber,f=d.nestingDepth;if(u-h>0){const g=(f-1)*e,p=f*e,_=this._editor.getBottomForLineNumber(h)-n,b=this._editor.getTopForLineNumber(u)-n,v=this._editor.getBottomForLineNumber(u)-n;if(g>b&&g<=v){o.push(h),r.push(u+1),i=v-p;break}else p>_&&p<=v&&(o.push(h),r.push(u+1));if(o.length===t)break}}}return this._endLineNumbers=r,new sw(o,r,i,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}},L5=zg,zg.ID="store.contrib.stickyScrollController",zg);xd=L5=j2e([_p(1,Lo),_p(2,ue),_p(3,Ce),_p(4,cn),_p(5,ir),_p(6,Ie)],xd);class q2e extends Rs{constructor(){super({id:"editor.action.toggleStickyScroll",title:{...Ee("toggleEditorStickyScroll","Toggle Editor Sticky Scroll"),mnemonicTitle:m({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Editor Sticky Scroll")},metadata:{description:Ee("toggleEditorStickyScroll.description","Toggle/enable the editor sticky scroll which shows the nested scopes at the top of the viewport")},category:W2e.View,toggled:{condition:K.equals("config.editor.stickyScroll.enabled",!0),title:m("stickyScroll","Sticky Scroll"),mnemonicTitle:m({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:ge.CommandPalette},{id:ge.MenubarAppearanceMenu,group:"4_editor",order:3},{id:ge.StickyScrollContext}]})}async run(e){const t=e.get(Ze),n=!t.getValue("editor.stickyScroll.enabled");return t.updateValue("editor.stickyScroll.enabled",n)}}const qE=100;class K2e extends el{constructor(){super({id:"editor.action.focusStickyScroll",title:{...Ee("focusStickyScroll","Focus on the editor sticky scroll"),mnemonicTitle:m({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll")},precondition:K.and(K.has("config.editor.stickyScroll.enabled"),I.stickyScrollVisible),menu:[{id:ge.CommandPalette}]})}runEditorCommand(e,t){var n;(n=xd.get(t))==null||n.focus()}}class G2e extends el{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:Ee("selectNextStickyScrollLine.title","Select the next editor sticky scroll line"),precondition:I.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:qE,primary:18}})}runEditorCommand(e,t){var n;(n=xd.get(t))==null||n.focusNext()}}class Z2e extends el{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:Ee("selectPreviousStickyScrollLine.title","Select the previous sticky scroll line"),precondition:I.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:qE,primary:16}})}runEditorCommand(e,t){var n;(n=xd.get(t))==null||n.focusPrevious()}}class Y2e extends el{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:Ee("goToFocusedStickyScrollLine.title","Go to the focused sticky scroll line"),precondition:I.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:qE,primary:3}})}runEditorCommand(e,t){var n;(n=xd.get(t))==null||n.goToFocused()}}class X2e extends el{constructor(){super({id:"editor.action.selectEditor",title:Ee("selectEditor.title","Select Editor"),precondition:I.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:qE,primary:9}})}runEditorCommand(e,t){var n;(n=xd.get(t))==null||n.selectEditor()}}dt(xd.ID,xd,1);Ot(q2e);Ot(K2e);Ot(Z2e);Ot(G2e);Ot(Y2e);Ot(X2e);var LJ=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vC=function(s,e){return function(t,n){e(t,n,s)}};class Q2e{constructor(e,t,n,i,o,r){this.range=e,this.insertText=t,this.filterText=n,this.additionalTextEdits=i,this.command=o,this.completion=r}}let x5=class extends Sne{constructor(e,t,n,i,o,r){super(o.disposable),this.model=e,this.line=t,this.word=n,this.completionModel=i,this._suggestMemoryService=r}canBeReused(e,t,n){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===n.startColumn&&this.word.endColumn<n.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){const e=[],{items:t}=this.completionModel,n=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},t),i=ot.slice(t,n),o=ot.slice(t,0,n);let r=5;for(const a of ot.concat(i,o)){if(a.score===za.Default)continue;const l=new L(a.editStart.lineNumber,a.editStart.column,a.editInsertEnd.lineNumber,a.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),c=a.completion.insertTextRules&&a.completion.insertTextRules&4?{snippet:a.completion.insertText}:a.completion.insertText;e.push(new Q2e(l,c,a.filterTextLow??a.labelLow,a.completion.additionalTextEdits,a.completion.command,a)),r-->=0&&a.resolve(Ue.None)}return e}};x5=LJ([vC(5,VE)],x5);let D5=class extends F{constructor(e,t,n,i){super(),this._languageFeatureService=e,this._clipboardService=t,this._suggestMemoryService=n,this._editorService=i,this._store.add(e.inlineCompletionsProvider.register("*",this))}async provideInlineCompletions(e,t,n,i){var f;if(n.selectedSuggestionInfo)return;let o;for(const g of this._editorService.listCodeEditors())if(g.getModel()===e){o=g;break}if(!o)return;const r=o.getOption(90);if(Yp.isAllOff(r))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const a=e.tokenization.getLineTokens(t.lineNumber),l=a.getStandardTokenType(a.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(Yp.valueFor(r,l)!=="inline")return;let c=e.getWordAtPosition(t),d;if(c!=null&&c.word||(d=this._getTriggerCharacterInfo(e,t)),!(c!=null&&c.word)&&!d||(c||(c=e.getWordUntilPosition(t)),c.endColumn!==t.column))return;let h;const u=e.getValueInRange(new L(t.lineNumber,1,t.lineNumber,t.column));if(!d&&((f=this._lastResult)!=null&&f.canBeReused(e,t.lineNumber,c))){const g=new $$(u,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=g,this._lastResult.acquire(),h=this._lastResult}else{const g=await HB(this._languageFeatureService.completionProvider,e,t,new G1(void 0,Jx.createSuggestFilter(o).itemKind,d==null?void 0:d.providers),d&&{triggerKind:1,triggerCharacter:d.ch},i);let p;g.needsClipboard&&(p=await this._clipboardService.readText());const _=new uh(g.items,t.column,new $$(u,0),Qx.None,o.getOption(119),o.getOption(113),{boostFullMatch:!1,firstMatchCanBeWeak:!1},p);h=new x5(e,t.lineNumber,c,_,g,this._suggestMemoryService)}return this._lastResult=h,h}handleItemDidShow(e,t){t.completion.resolve(Ue.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var o;const n=e.getValueInRange(L.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),i=new Set;for(const r of this._languageFeatureService.completionProvider.all(e))(o=r.triggerCharacters)!=null&&o.includes(n)&&i.add(r);if(i.size!==0)return{providers:i,ch:n}}};D5=LJ([vC(0,ue),vC(1,Pd),vC(2,VE),vC(3,mt)],D5);hv(D5);class J2e extends he{constructor(){super({id:"editor.action.forceRetokenize",label:m("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(e,t){if(!t.hasModel())return;const n=t.getModel();n.tokenization.resetTokenization();const i=new pi;n.tokenization.forceTokenization(n.getLineCount()),i.stop(),console.log(`tokenization took ${i.elapsed()}`)}}Q(J2e);const ZI=class ZI extends Rs{constructor(){super({id:ZI.ID,title:Ee({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},metadata:{description:Ee("tabMovesFocusDescriptions","Determines whether the tab key moves focus around the workbench or inserts the tab character in the current editor. This is also called tab trapping, tab navigation, or tab focus mode.")},f1:!0})}run(){const t=!Lb.getTabFocusMode();Lb.setTabFocusMode(t),Es(t?m("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element"):m("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}};ZI.ID="editor.action.toggleTabFocusMode";let I5=ZI;Ot(I5);var eMe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},oU=function(s,e){return function(t,n){e(t,n,s)}};let T5=class extends F{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,n={},i,o){super(),this._link=t,this._hoverService=i,this._enabled=!0,this.el=Y(e,te("a.monaco-link",{tabIndex:t.tabIndex??0,href:t.href},t.label)),this.hoverDelegate=n.hoverDelegate??Ms("mouse"),this.setTooltip(t.title),this.el.setAttribute("role","button");const r=this._register(new nt(this.el,"click")),a=this._register(new nt(this.el,"keypress")),l=se.chain(a.event,h=>h.map(u=>new Pt(u)).filter(u=>u.keyCode===3)),c=this._register(new nt(this.el,Ft.Tap)).event;this._register(Ki.addTarget(this.el));const d=se.any(r.event,l,c);this._register(d(h=>{this.enabled&&(it.stop(h,!0),n!=null&&n.opener?n.opener(this._link.href):o.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}setTooltip(e){this.hoverDelegate.showNativeHover?this.el.title=e??"":!this.hover&&e?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,e)):this.hover&&this.hover.update(e)}};T5=eMe([oU(3,oc),oU(4,eo)],T5);var xJ=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},DJ=function(s,e){return function(t,n){e(t,n,s)}};const tMe=26;let E5=class extends F{constructor(e,t){super(),this._editor=e,this.instantiationService=t,this.banner=this._register(this.instantiationService.createInstance(N5))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(e){this.banner.show({...e,onClose:()=>{var t;this.hide(),(t=e.onClose)==null||t.call(e)}}),this._editor.setBanner(this.banner.element,tMe)}};E5=xJ([DJ(1,Ce)],E5);let N5=class extends F{constructor(e){super(),this.instantiationService=e,this.markdownRenderer=this.instantiationService.createInstance(Cd,{}),this.element=te("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(e){if(e.ariaLabel)return e.ariaLabel;if(typeof e.message=="string")return e.message}getBannerMessage(e){if(typeof e=="string"){const t=te("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}clear(){xi(this.element)}show(e){xi(this.element);const t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);const n=Y(this.element,te("div.icon-container"));n.setAttribute("aria-hidden","true"),e.icon&&n.appendChild(te(`div${De.asCSSSelector(e.icon)}`));const i=Y(this.element,te("div.message-container"));if(i.setAttribute("aria-hidden","true"),i.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=Y(this.element,te("div.message-actions-container")),e.actions)for(const r of e.actions)this._register(this.instantiationService.createInstance(T5,this.messageActionsContainer,{...r,tabIndex:-1},{}));const o=Y(this.element,te("div.action-container"));this.actionBar=this._register(new Zo(o)),this.actionBar.push(this._register(new _o("banner.close","Close Banner",De.asClassName(GZ),!0,()=>{typeof e.onClose=="function"&&e.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};N5=xJ([DJ(0,Ce)],N5);var e7=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},V_=function(s,e){return function(t,n){e(t,n,s)}};const nMe=jt("extensions-warning-message",J.warning,m("warningIcon","Icon shown with a warning message in the extensions editor."));var Q_;let s0=(Q_=class extends F{constructor(e,t,n,i){super(),this._editor=e,this._editorWorkerService=t,this._workspaceTrustService=n,this._highlighter=null,this._bannerClosed=!1,this._updateState=o=>{if(o&&o.hasMore){if(this._bannerClosed)return;const r=Math.max(o.ambiguousCharacterCount,o.nonBasicAsciiCharacterCount,o.invisibleCharacterCount);let a;if(o.nonBasicAsciiCharacterCount>=r)a={message:m("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new r0};else if(o.ambiguousCharacterCount>=r)a={message:m("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new Cm};else if(o.invisibleCharacterCount>=r)a={message:m("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new o0};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:a.message,icon:nMe,actions:[{label:a.command.shortLabel,href:`command:${a.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(i.createInstance(E5,e)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=e.getOption(126),this._register(n.onDidChangeTrust(o=>{this._updateHighlighter()})),this._register(e.onDidChangeConfiguration(o=>{o.hasChanged(126)&&(this._options=e.getOption(126),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const e=iMe(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every(n=>n===!1))return;const t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map(n=>n.codePointAt(0)),allowedLocales:Object.keys(e.allowedLocales).map(n=>n==="_os"?new Intl.NumberFormat().resolvedOptions().locale:n==="_vscode"?wte:n)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new R5(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new sMe(this._editor,t,this._updateState)}getDecorationInfo(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}},Q_.ID="editor.contrib.unicodeHighlighter",Q_);s0=e7([V_(1,to),V_(2,dG),V_(3,Ce)],s0);function iMe(s,e){return{nonBasicASCII:e.nonBasicASCII===Ro?!s:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments===Ro?!s:e.includeComments,includeStrings:e.includeStrings===Ro?!s:e.includeStrings,allowedCharacters:e.allowedCharacters,allowedLocales:e.allowedLocales}}let R5=class extends F{constructor(e,t,n,i){super(),this._editor=e,this._options=t,this._updateState=n,this._editorWorkerService=i,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new It(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(t=>{if(this._model.isDisposed()||this._model.getVersionId()!==e)return;this._updateState(t);const n=[];if(!t.hasMore)for(const i of t.ranges)n.push({range:i,options:mD.instance.getDecorationFromOptions(this._options)});this._decorations.set(n)})}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel();if(!zW(t,e))return null;const n=t.getValueInRange(e.range);return{reason:TJ(n,this._options),inComment:$W(t,e),inString:UW(t,e)}}};R5=e7([V_(3,to)],R5);class sMe extends F{constructor(e,t,n){super(),this._editor=e,this._options=t,this._updateState=n,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new It(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const e=this._editor.getVisibleRanges(),t=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const i of e){const o=t9.computeUnicodeHighlights(this._model,this._options,i);for(const r of o.ranges)n.ranges.push(r);n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||o.hasMore}if(!n.hasMore)for(const i of n.ranges)t.push({range:i,options:mD.instance.getDecorationFromOptions(this._options)});this._updateState(n),this._decorations.set(t)}getDecorationInfo(e){if(!this._decorations.has(e))return null;const t=this._editor.getModel(),n=t.getValueInRange(e.range);return zW(t,e)?{reason:TJ(n,this._options),inComment:$W(t,e),inString:UW(t,e)}:null}}const IJ=m("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options");let M5=class{constructor(e,t,n){this._editor=e,this._languageService=t,this._openerService=n,this.hoverOrdinal=5}computeSync(e,t){if(!this._editor.hasModel()||e.type!==1)return[];const n=this._editor.getModel(),i=this._editor.getContribution(s0.ID);if(!i)return[];const o=[],r=new Set;let a=300;for(const l of t){const c=i.getDecorationInfo(l);if(!c)continue;const h=n.getValueInRange(l.range).codePointAt(0),u=h2(h);let f;switch(c.reason.kind){case 0:{p0(c.reason.confusableWith)?f=m("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",u,h2(c.reason.confusableWith.codePointAt(0))):f=m("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",u,h2(c.reason.confusableWith.codePointAt(0)));break}case 1:f=m("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",u);break;case 2:f=m("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",u);break}if(r.has(f))continue;r.add(f);const g={codePoint:h,reason:c.reason,inComment:c.inComment,inString:c.inString},p=m("unicodeHighlight.adjustSettings","Adjust settings"),_=`command:${pD.ID}?${encodeURIComponent(JSON.stringify(g))}`,b=new ji("",!0).appendMarkdown(f).appendText(" ").appendLink(_,p,IJ);o.push(new Kr(this,l.range,[b],!1,a++))}return o}renderHoverParts(e,t){return Rxe(e,t,this._editor,this._languageService,this._openerService)}};M5=e7([V_(1,tn),V_(2,eo)],M5);function A5(s){return`U+${s.toString(16).padStart(4,"0")}`}function h2(s){let e=`\`${A5(s)}\``;return Ff.isInvisibleCharacter(s)||(e+=` "${`${oMe(s)}`}"`),e}function oMe(s){return s===96?"`` ` ``":"`"+String.fromCodePoint(s)+"`"}function TJ(s,e){return t9.computeUnicodeHighlightReason(s,e)}const YI=class YI{constructor(){this.map=new Map}getDecorationFromOptions(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}getDecoration(e,t){const n=`${e}${t}`;let i=this.map.get(n);return i||(i=Ve.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(n,i)),i}};YI.instance=new YI;let mD=YI;class rMe extends he{constructor(){super({id:Cm.ID,label:m("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments")}async run(e,t,n){const i=e==null?void 0:e.get(Ze);i&&this.runAction(i)}async runAction(e){await e.updateValue(Vs.includeComments,!1,2)}}class aMe extends he{constructor(){super({id:Cm.ID,label:m("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings")}async run(e,t,n){const i=e==null?void 0:e.get(Ze);i&&this.runAction(i)}async runAction(e){await e.updateValue(Vs.includeStrings,!1,2)}}const XI=class XI extends he{constructor(){super({id:XI.ID,label:m("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight")}async run(e,t,n){const i=e==null?void 0:e.get(Ze);i&&this.runAction(i)}async runAction(e){await e.updateValue(Vs.ambiguousCharacters,!1,2)}};XI.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";let Cm=XI;const QI=class QI extends he{constructor(){super({id:QI.ID,label:m("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight")}async run(e,t,n){const i=e==null?void 0:e.get(Ze);i&&this.runAction(i)}async runAction(e){await e.updateValue(Vs.invisibleCharacters,!1,2)}};QI.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";let o0=QI;const JI=class JI extends he{constructor(){super({id:JI.ID,label:m("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=m("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight")}async run(e,t,n){const i=e==null?void 0:e.get(Ze);i&&this.runAction(i)}async runAction(e){await e.updateValue(Vs.nonBasicASCII,!1,2)}};JI.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";let r0=JI;const eT=class eT extends he{constructor(){super({id:eT.ID,label:m("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}async run(e,t,n){const{codePoint:i,reason:o,inString:r,inComment:a}=n,l=String.fromCodePoint(i),c=e.get(Nr),d=e.get(Ze);function h(g){return Ff.isInvisibleCharacter(g)?m("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",A5(g)):m("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted",`${A5(g)} "${l}"`)}const u=[];if(o.kind===0)for(const g of o.notAmbiguousInLocales)u.push({label:m("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',g),run:async()=>{cMe(d,[g])}});if(u.push({label:h(i),run:()=>lMe(d,[i])}),a){const g=new rMe;u.push({label:g.label,run:async()=>g.runAction(d)})}else if(r){const g=new aMe;u.push({label:g.label,run:async()=>g.runAction(d)})}if(o.kind===0){const g=new Cm;u.push({label:g.label,run:async()=>g.runAction(d)})}else if(o.kind===1){const g=new o0;u.push({label:g.label,run:async()=>g.runAction(d)})}else if(o.kind===2){const g=new r0;u.push({label:g.label,run:async()=>g.runAction(d)})}else dMe(o);const f=await c.pick(u,{title:IJ});f&&await f.run()}};eT.ID="editor.action.unicodeHighlight.showExcludeOptions";let pD=eT;async function lMe(s,e){const t=s.getValue(Vs.allowedCharacters);let n;typeof t=="object"&&t?n=t:n={};for(const i of e)n[String.fromCodePoint(i)]=!0;await s.updateValue(Vs.allowedCharacters,n,2)}async function cMe(s,e){var i;const t=(i=s.inspect(Vs.allowedLocales).user)==null?void 0:i.value;let n;typeof t=="object"&&t?n=Object.assign({},t):n={};for(const o of e)n[o]=!0;await s.updateValue(Vs.allowedLocales,n,2)}function dMe(s){throw new Error(`Unexpected value: ${s}`)}Q(Cm);Q(o0);Q(r0);Q(pD);dt(s0.ID,s0,1);Bm.register(M5);var hMe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},rU=function(s,e){return function(t,n){e(t,n,s)}};const EJ="ignoreUnusualLineTerminators";function uMe(s,e,t){s.setModelProperty(e.uri,EJ,t)}function fMe(s,e){return s.getModelProperty(e.uri,EJ)}var J_;let _D=(J_=class extends F{constructor(e,t,n){super(),this._editor=e,this._dialogService=t,this._codeEditorService=n,this._isPresentingDialog=!1,this._config=this._editor.getOption(127),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(127)&&(this._config=this._editor.getOption(127),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(i=>{i.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}async _checkForUnusualLineTerminators(){if(this._config==="off"||!this._editor.hasModel())return;const e=this._editor.getModel();if(!e.mightContainUnusualLineTerminators()||fMe(this._codeEditorService,e)===!0||this._editor.getOption(92))return;if(this._config==="auto"){e.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let n;try{this._isPresentingDialog=!0,n=await this._dialogService.confirm({title:m("unusualLineTerminators.title","Unusual Line Terminators"),message:m("unusualLineTerminators.message","Detected unusual line terminators"),detail:m("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",xr(e.uri)),primaryButton:m({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:m("unusualLineTerminators.ignore","Ignore")})}finally{this._isPresentingDialog=!1}if(!n.confirmed){uMe(this._codeEditorService,e,!0);return}e.removeUnusualLineTerminators(this._editor.getSelections())}},J_.ID="editor.contrib.unusualLineTerminatorsDetector",J_);_D=hMe([rU(1,w0),rU(2,mt)],_D);dt(_D.ID,_D,1);var gMe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},mMe=function(s,e){return function(t,n){e(t,n,s)}};class aU{constructor(){this.selector={language:"*"}}provideDocumentHighlights(e,t,n){const i=[],o=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});return o?e.isDisposed()?void 0:e.findMatches(o.word,!0,!1,!0,Lk,!1).map(a=>({range:a.range,kind:sb.Text})):Promise.resolve(i)}provideMultiDocumentHighlights(e,t,n,i){const o=new mi,r=e.getWordAtPosition({lineNumber:t.lineNumber,column:t.column});if(!r)return Promise.resolve(o);for(const a of[e,...n]){if(a.isDisposed())continue;const c=a.findMatches(r.word,!0,!1,!0,Lk,!1).map(d=>({range:d.range,kind:sb.Text}));c&&o.set(a.uri,c)}return o}}let P5=class extends F{constructor(e){super(),this._register(e.documentHighlightProvider.register("*",new aU)),this._register(e.multiDocumentHighlightProvider.register("*",new aU))}};P5=gMe([mMe(0,ue)],P5);var NJ=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},gk=function(s,e){return function(t,n){e(t,n,s)}},xn,O5;const t7=new le("hasWordHighlights",!1);function RJ(s,e,t,n){const i=s.ordered(e);return V3(i.map(o=>()=>Promise.resolve(o.provideDocumentHighlights(e,t,n)).then(void 0,kn)),o=>o!=null).then(o=>{if(o){const r=new mi;return r.set(e.uri,o),r}return new mi})}function pMe(s,e,t,n,i,o){const r=s.ordered(e);return V3(r.map(a=>()=>{const l=o.filter(c=>Yq(c)).filter(c=>d9(a.selector,c.uri,c.getLanguageId(),!0,void 0,void 0)>0);return Promise.resolve(a.provideMultiDocumentHighlights(e,t,l,i)).then(void 0,kn)}),a=>a!=null)}class MJ{constructor(e,t,n){this._model=e,this._selection=t,this._wordSeparators=n,this._wordRange=this._getCurrentWordRange(e,t),this._result=null}get result(){return this._result||(this._result=si(e=>this._compute(this._model,this._selection,this._wordSeparators,e))),this._result}_getCurrentWordRange(e,t){const n=e.getWordAtPosition(t.getPosition());return n?new L(t.startLineNumber,n.startColumn,t.startLineNumber,n.endColumn):null}isValid(e,t,n){const i=t.startLineNumber,o=t.startColumn,r=t.endColumn,a=this._getCurrentWordRange(e,t);let l=!!(this._wordRange&&this._wordRange.equalsRange(a));for(let c=0,d=n.length;!l&&c<d;c++){const h=n.getRange(c);h&&h.startLineNumber===i&&h.startColumn<=o&&h.endColumn>=r&&(l=!0)}return l}cancel(){this.result.cancel()}}class _Me extends MJ{constructor(e,t,n,i){super(e,t,n),this._providers=i}_compute(e,t,n,i){return RJ(this._providers,e,t.getPosition(),i).then(o=>o||new mi)}}class bMe extends MJ{constructor(e,t,n,i,o){super(e,t,n),this._providers=i,this._otherModels=o}_compute(e,t,n,i){return pMe(this._providers,e,t.getPosition(),n,i,this._otherModels).then(o=>o||new mi)}}function vMe(s,e,t,n,i){return new _Me(e,t,i,s)}function CMe(s,e,t,n,i,o){return new bMe(e,t,i,s,o)}Js("_executeDocumentHighlights",async(s,e,t)=>{const n=s.get(ue),i=await RJ(n.documentHighlightProvider,e,t,Ue.None);return i==null?void 0:i.get(e.uri)});var eu;let F5=(eu=class{constructor(e,t,n,i,o){this.toUnhook=new q,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new mi,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.runDelayer=this.toUnhook.add(new kr(50)),this.editor=e,this.providers=t,this.multiDocumentProviders=n,this.codeEditorService=o,this._hasWordHighlights=t7.bindTo(i),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(e.onDidChangeCursorPosition(r=>{this._ignorePositionChangeEvent||this.occurrencesHighlight!=="off"&&this.runDelayer.trigger(()=>{this._onPositionChanged(r)})})),this.toUnhook.add(e.onDidFocusEditorText(r=>{this.occurrencesHighlight!=="off"&&(this.workerRequest||this.runDelayer.trigger(()=>{this._run()}))})),this.toUnhook.add(e.onDidChangeModelContent(r=>{gT(this.model.uri,"output")||this._stopAll()})),this.toUnhook.add(e.onDidChangeModel(r=>{!r.newModelUrl&&r.oldModelUrl?this._stopSingular():xn.query&&this._run()})),this.toUnhook.add(e.onDidChangeConfiguration(r=>{var l,c;const a=this.editor.getOption(81);if(this.occurrencesHighlight!==a)switch(this.occurrencesHighlight=a,a){case"off":this._stopAll();break;case"singleFile":this._stopAll((c=(l=xn.query)==null?void 0:l.modelInfo)==null?void 0:c.model);break;case"multiFile":xn.query&&this._run(!0);break;default:console.warn("Unknown occurrencesHighlight setting value:",a);break}})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,xn.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight!=="off"&&(this.runDelayer.cancel(),this._run())}_getSortedHighlights(){return this.decorations.getRanges().sort(L.compareRangesUsingStarts)}moveNext(){const e=this._getSortedHighlights(),n=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))+1)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const o=this._getWord();if(o){const r=this.editor.getModel().getLineContent(i.startLineNumber);Es(`${r}, ${n+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const e=this._getSortedHighlights(),n=(e.findIndex(o=>o.containsPosition(this.editor.getPosition()))-1+e.length)%e.length,i=e[n];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(i.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(i);const o=this._getWord();if(o){const r=this.editor.getModel().getLineContent(i.startLineNumber);Es(`${r}, ${n+1} of ${e.length} for '${o.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;const e=xn.storedDecorationIDs.get(this.editor.getModel().uri);e&&(this.editor.removeDecorations(e),xn.storedDecorationIDs.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(e){const t=this.codeEditorService.listCodeEditors(),n=[];for(const i of t){if(!i.hasModel()||s1(i.getModel().uri,e==null?void 0:e.uri))continue;const o=xn.storedDecorationIDs.get(i.getModel().uri);if(!o)continue;i.removeDecorations(o),n.push(i.getModel().uri);const r=yu.get(i);r!=null&&r.wordHighlighter&&r.wordHighlighter.decorations.length>0&&(r.wordHighlighter.decorations.clear(),r.wordHighlighter.workerRequest=null,r.wordHighlighter._hasWordHighlights.set(!1))}for(const i of n)xn.storedDecorationIDs.delete(i)}_stopSingular(){var e,t,n,i;this._removeSingleDecorations(),this.editor.hasTextFocus()&&(((e=this.editor.getModel())==null?void 0:e.uri.scheme)!==We.vscodeNotebookCell&&((n=(t=xn.query)==null?void 0:t.modelInfo)==null?void 0:n.model.uri.scheme)!==We.vscodeNotebookCell?(xn.query=null,this._run()):(i=xn.query)!=null&&i.modelInfo&&(xn.query.modelInfo=null)),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_stopAll(e){this._removeAllDecorations(e),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(e){var t;if(this.occurrencesHighlight==="off"){this._stopAll();return}if(e.reason!==3&&((t=this.editor.getModel())==null?void 0:t.uri.scheme)!==We.vscodeNotebookCell){this._stopAll();return}this._run()}_getWord(){const e=this.editor.getSelection(),t=e.startLineNumber,n=e.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:t,column:n})}getOtherModelsToHighlight(e){if(!e)return[];if(e.uri.scheme===We.vscodeNotebookCell){const o=[],r=this.codeEditorService.listCodeEditors();for(const a of r){const l=a.getModel();l&&l!==e&&l.uri.scheme===We.vscodeNotebookCell&&o.push(l)}return o}const n=[],i=this.codeEditorService.listCodeEditors();for(const o of i){if(!aB(o))continue;const r=o.getModel();r&&e===r.modified&&n.push(r.modified)}if(n.length)return n;if(this.occurrencesHighlight==="singleFile")return[];for(const o of i){const r=o.getModel();r&&r!==e&&n.push(r)}return n}_run(e){var i,o;let t;if(this.editor.hasTextFocus()){const r=this.editor.getSelection();if(!r||r.startLineNumber!==r.endLineNumber){xn.query=null,this._stopAll();return}const a=r.startColumn,l=r.endColumn,c=this._getWord();if(!c||c.startColumn>a||c.endColumn<l){xn.query=null,this._stopAll();return}t=this.workerRequest&&this.workerRequest.isValid(this.model,r,this.decorations),xn.query={modelInfo:{model:this.model,selection:r},word:c}}else if(!xn.query){this._stopAll();return}if(this.lastCursorPositionChangeTime=new Date().getTime(),t)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else if(s1(this.editor.getModel().uri,(i=xn.query.modelInfo)==null?void 0:i.model.uri)){if(!e){const l=this.decorations.getRanges();for(const c of l)if(c.containsPosition(this.editor.getPosition()))return}this._stopAll(e?this.model:void 0);const r=++this.workerRequestTokenId;this.workerRequestCompleted=!1;const a=this.getOtherModelsToHighlight(this.editor.getModel());if(!xn.query||!xn.query.modelInfo||xn.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(xn.query.modelInfo.model,xn.query.modelInfo.selection,xn.query.word,a),(o=this.workerRequest)==null||o.result.then(l=>{r===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=l||[],this._beginRenderDecorations())},Pe)}}computeWithModel(e,t,n,i){return i.length?CMe(this.multiDocumentProviders,e,t,n,this.editor.getOption(132),i):vMe(this.providers,e,t,n,this.editor.getOption(132))}_beginRenderDecorations(){const e=new Date().getTime(),t=this.lastCursorPositionChangeTime+250;e>=t?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},t-e)}renderDecorations(){var t,n,i;this.renderDecorationsTimer=-1;const e=this.codeEditorService.listCodeEditors();for(const o of e){const r=yu.get(o);if(!r)continue;const a=[],l=(t=o.getModel())==null?void 0:t.uri;if(l&&this.workerRequestValue.has(l)){const c=xn.storedDecorationIDs.get(l),d=this.workerRequestValue.get(l);if(d)for(const u of d)u.range&&a.push({range:u.range,options:lRe(u.kind)});let h=[];o.changeDecorations(u=>{h=u.deltaDecorations(c??[],a)}),xn.storedDecorationIDs=xn.storedDecorationIDs.set(l,h),a.length>0&&((n=r.wordHighlighter)==null||n.decorations.set(a),(i=r.wordHighlighter)==null||i._hasWordHighlights.set(!0))}}}dispose(){this._stopSingular(),this.toUnhook.dispose()}},xn=eu,eu.storedDecorationIDs=new mi,eu.query=null,eu);F5=xn=NJ([gk(4,mt)],F5);var $g;let yu=($g=class extends F{static get(e){return e.getContribution(O5.ID)}constructor(e,t,n,i){super(),this._wordHighlighter=null;const o=()=>{e.hasModel()&&!e.getModel().isTooLargeForTokenization()&&(this._wordHighlighter=new F5(e,n.documentHighlightProvider,n.multiDocumentHighlightProvider,t,i))};this._register(e.onDidChangeModel(r=>{this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),o()})),o()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!!(this._wordHighlighter&&this._wordHighlighter.hasDecorations())}moveNext(){var e;(e=this._wordHighlighter)==null||e.moveNext()}moveBack(){var e;(e=this._wordHighlighter)==null||e.moveBack()}restoreViewState(e){this._wordHighlighter&&e&&this._wordHighlighter.restore()}dispose(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),super.dispose()}},O5=$g,$g.ID="editor.contrib.wordHighlighter",$g);yu=O5=NJ([gk(1,Ie),gk(2,ue),gk(3,mt)],yu);class AJ extends he{constructor(e,t){super(t),this._isNext=e}run(e,t){const n=yu.get(t);n&&(this._isNext?n.moveNext():n.moveBack())}}class wMe extends AJ{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:m("wordHighlight.next.label","Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:t7,kbOpts:{kbExpr:I.editorTextFocus,primary:65,weight:100}})}}class yMe extends AJ{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:m("wordHighlight.previous.label","Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:t7,kbOpts:{kbExpr:I.editorTextFocus,primary:1089,weight:100}})}}class SMe extends he{constructor(){super({id:"editor.action.wordHighlight.trigger",label:m("wordHighlight.trigger.label","Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:void 0,kbOpts:{kbExpr:I.editorTextFocus,primary:0,weight:100}})}run(e,t,n){const i=yu.get(t);i&&i.restoreViewState(!0)}}dt(yu.ID,yu,0);Q(wMe);Q(yMe);Q(SMe);hv(P5);class KE extends Zn{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){if(!t.hasModel())return;const i=Lr(t.getOption(132),t.getOption(131)),o=t.getModel(),r=t.getSelections(),a=r.length>1,l=r.map(c=>{const d=new A(c.positionLineNumber,c.positionColumn),h=this._move(i,o,d,this._wordNavigationType,a);return this._moveTo(c,h,this._inSelectionMode)});if(o.pushStackElement(),t._getViewModel().setCursorStates("moveWordCommand",3,l.map(c=>ft.fromModelSelection(c))),l.length===1){const c=new A(l[0].positionLineNumber,l[0].positionColumn);t.revealPosition(c,0)}}_moveTo(e,t,n){return n?new me(e.selectionStartLineNumber,e.selectionStartColumn,t.lineNumber,t.column):new me(t.lineNumber,t.column,t.lineNumber,t.column)}}class Nu extends KE{_move(e,t,n,i,o){return vt.moveWordLeft(e,t,n,i,o)}}class Ru extends KE{_move(e,t,n,i,o){return vt.moveWordRight(e,t,n,i)}}class kMe extends Nu{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}class LMe extends Nu{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}class xMe extends Nu{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:K.and(I.textInputFocus,(e=K.and(L0,rE))==null?void 0:e.negate()),primary:2063,mac:{primary:527},weight:100}})}}class DMe extends Nu{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}class IMe extends Nu{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}class TMe extends Nu{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:K.and(I.textInputFocus,(e=K.and(L0,rE))==null?void 0:e.negate()),primary:3087,mac:{primary:1551},weight:100}})}}class EMe extends Nu{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(e,t,n,i,o){return super._move(Lr(Ja.wordSeparators.defaultValue,e.intlSegmenterLocales),t,n,i,o)}}class NMe extends Nu{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(e,t,n,i,o){return super._move(Lr(Ja.wordSeparators.defaultValue,e.intlSegmenterLocales),t,n,i,o)}}class RMe extends Ru{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}class MMe extends Ru{constructor(){var e;super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:K.and(I.textInputFocus,(e=K.and(L0,rE))==null?void 0:e.negate()),primary:2065,mac:{primary:529},weight:100}})}}class AMe extends Ru{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}class PMe extends Ru{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}class OMe extends Ru{constructor(){var e;super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:K.and(I.textInputFocus,(e=K.and(L0,rE))==null?void 0:e.negate()),primary:3089,mac:{primary:1553},weight:100}})}}class FMe extends Ru{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}class WMe extends Ru{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(e,t,n,i,o){return super._move(Lr(Ja.wordSeparators.defaultValue,e.intlSegmenterLocales),t,n,i,o)}}class BMe extends Ru{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(e,t,n,i,o){return super._move(Lr(Ja.wordSeparators.defaultValue,e.intlSegmenterLocales),t,n,i,o)}}class GE extends Zn{constructor(e){super(e),this._whitespaceHeuristics=e.whitespaceHeuristics,this._wordNavigationType=e.wordNavigationType}runEditorCommand(e,t,n){const i=e.get(cn);if(!t.hasModel())return;const o=Lr(t.getOption(132),t.getOption(131)),r=t.getModel(),a=t.getSelections(),l=t.getOption(6),c=t.getOption(11),d=i.getLanguageConfiguration(r.getLanguageId()).getAutoClosingPairs(),h=t._getViewModel(),u=a.map(f=>{const g=this._delete({wordSeparators:o,model:r,selection:f,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:t.getOption(9),autoClosingBrackets:l,autoClosingQuotes:c,autoClosingPairs:d,autoClosedCharacters:h.getCursorAutoClosedCharacters()},this._wordNavigationType);return new Oi(g,"")});t.pushUndoStop(),t.executeCommands(this.id,u),t.pushUndoStop()}}class n7 extends GE{_delete(e,t){const n=vt.deleteWordLeft(e,t);return n||new L(1,1,1,1)}}class i7 extends GE{_delete(e,t){const n=vt.deleteWordRight(e,t);if(n)return n;const i=e.model.getLineCount(),o=e.model.getLineMaxColumn(i);return new L(i,o,i,o)}}class HMe extends n7{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:I.writable})}}class VMe extends n7{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:I.writable})}}class zMe extends n7{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}class $Me extends i7{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:I.writable})}}class UMe extends i7{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:I.writable})}}class jMe extends i7{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}class qMe extends he{constructor(){super({id:"deleteInsideWord",precondition:I.writable,label:m("deleteInsideWord","Delete Word"),alias:"Delete Word"})}run(e,t,n){if(!t.hasModel())return;const i=Lr(t.getOption(132),t.getOption(131)),o=t.getModel(),a=t.getSelections().map(l=>{const c=vt.deleteInsideWord(i,o,l);return new Oi(c,"")});t.pushUndoStop(),t.executeCommands(this.id,a),t.pushUndoStop()}}oe(new kMe);oe(new LMe);oe(new xMe);oe(new DMe);oe(new IMe);oe(new TMe);oe(new RMe);oe(new MMe);oe(new AMe);oe(new PMe);oe(new OMe);oe(new FMe);oe(new EMe);oe(new NMe);oe(new WMe);oe(new BMe);oe(new HMe);oe(new VMe);oe(new zMe);oe(new $Me);oe(new UMe);oe(new jMe);Q(qMe);class KMe extends GE{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(e,t){const n=_E.deleteWordPartLeft(e);return n||new L(1,1,1,1)}}class GMe extends GE{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:I.writable,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(e,t){const n=_E.deleteWordPartRight(e);if(n)return n;const i=e.model.getLineCount(),o=e.model.getLineMaxColumn(i);return new L(i,o,i,o)}}class PJ extends KE{_move(e,t,n,i,o){return _E.moveWordPartLeft(e,t,n,o)}}class ZMe extends PJ{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}rt.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class YMe extends PJ{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}rt.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class OJ extends KE{_move(e,t,n,i,o){return _E.moveWordPartRight(e,t,n)}}class XMe extends OJ{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}class QMe extends OJ{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:I.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}oe(new KMe);oe(new GMe);oe(new ZMe);oe(new YMe);oe(new XMe);oe(new QMe);const f7=class f7 extends F{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const e=vo.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(93);t||(this.editor.isSimpleWidget?t=new ji(m("editor.simple.readonly","Cannot edit in read-only input")):t=new ji(m("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}};f7.ID="editor.contrib.readOnlyMessageController";let bD=f7;dt(bD.ID,bD,2);var JMe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},lU=function(s,e){return function(t,n){e(t,n,s)}};let W5=class extends F{constructor(e,t,n){super(),this._textModel=e,this._languageFeaturesService=t,this._outlineModelService=n,this._currentModel=Ge(this,void 0);const i=Pi("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),o=Pi("_textModel.onDidChangeContent",se.debounce(r=>this._textModel.onDidChangeContent(r),()=>{},100));this._register(Ks(async(r,a)=>{i.read(r),o.read(r);const l=a.add(new B1e),c=await this._outlineModelService.getOrCreate(this._textModel,l.token);a.isDisposed||this._currentModel.set(c,void 0)}))}getBreadcrumbItems(e,t){const n=this._currentModel.read(t);if(!n)return[];const i=n.asListOfDocumentSymbols().filter(o=>e.contains(o.range.startLineNumber)&&!e.contains(o.range.endLineNumber));return i.sort(mj(ks(o=>o.range.endLineNumber-o.range.startLineNumber,Qr))),i.map(o=>({name:o.name,kind:o.kind,startLineNumber:o.range.startLineNumber}))}};W5=JMe([lU(1,ue),lU(2,X0)],W5);bx.setBreadcrumbsSourceFactory((s,e)=>e.createInstance(W5,s));const g7=class g7 extends F{constructor(e){super(),this.editor=e,this.widget=null,Ua&&(this._register(e.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const e=!this.editor.getOption(92);!this.widget&&e?this.widget=new B5(this.editor):this.widget&&!e&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}};g7.ID="editor.contrib.iPadShowKeyboard";let vD=g7;const tT=class tT extends F{constructor(e){super(),this.editor=e,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register($(this._domNode,"touchstart",t=>{this.editor.focus()})),this._register($(this._domNode,"focus",t=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return tT.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}};tT.ID="editor.contrib.ShowKeyboardWidget";let B5=tT;dt(vD.ID,vD,3);var eAe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},cU=function(s,e){return function(t,n){e(t,n,s)}},H5,Ug;let a0=(Ug=class extends F{static get(e){return e.getContribution(H5.ID)}constructor(e,t,n){super(),this._editor=e,this._languageService=n,this._widget=null,this._register(this._editor.onDidChangeModel(i=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(i=>this.stop())),this._register(mn.onDidChange(i=>this.stop())),this._register(this._editor.onKeyUp(i=>i.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new V5(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}},H5=Ug,Ug.ID="editor.contrib.inspectTokens",Ug);a0=H5=eAe([cU(1,rr),cU(2,tn)],a0);class tAe extends he{constructor(){super({id:"editor.action.inspectTokens",label:GA.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(e,t){const n=a0.get(t);n==null||n.launch()}}function nAe(s){let e="";for(let t=0,n=s.length;t<n;t++){const i=s.charCodeAt(t);switch(i){case 9:e+="→";break;case 32:e+="·";break;default:e+=String.fromCharCode(i)}}return e}function iAe(s,e){const t=mn.get(e);if(t)return t;const n=s.encodeLanguageId(e);return{getInitialState:()=>pb,tokenize:(i,o,r)=>M9(e,r),tokenizeEncoded:(i,o,r)=>YT(n,r)}}const nT=class nT extends F{constructor(e,t){super(),this.allowEditorOverflow=!0,this._editor=e,this._languageService=t,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=iAe(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(n=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return nT._ID}_compute(e){const t=this._getTokensAtLine(e.lineNumber);let n=0;for(let l=t.tokens1.length-1;l>=0;l--){const c=t.tokens1[l];if(e.column-1>=c.offset){n=l;break}}let i=0;for(let l=t.tokens2.length>>>1;l>=0;l--)if(e.column-1>=t.tokens2[l<<1]){i=l;break}const o=this._model.getLineContent(e.lineNumber);let r="";if(n<t.tokens1.length){const l=t.tokens1[n].offset,c=n+1<t.tokens1.length?t.tokens1[n+1].offset:o.length;r=o.substring(l,c)}Di(this._domNode,te("h2.tm-token",void 0,nAe(r),te("span.tm-token-length",void 0,`${r.length} ${r.length===1?"char":"chars"}`))),Y(this._domNode,te("hr.tokens-inspect-separator",{style:"clear:both"}));const a=(i<<1)+1<t.tokens2.length?this._decodeMetadata(t.tokens2[(i<<1)+1]):null;Y(this._domNode,te("table.tm-metadata-table",void 0,te("tbody",void 0,te("tr",void 0,te("td.tm-metadata-key",void 0,"language"),te("td.tm-metadata-value",void 0,`${a?a.languageId:"-?-"}`)),te("tr",void 0,te("td.tm-metadata-key",void 0,"token type"),te("td.tm-metadata-value",void 0,`${a?this._tokenTypeToString(a.tokenType):"-?-"}`)),te("tr",void 0,te("td.tm-metadata-key",void 0,"font style"),te("td.tm-metadata-value",void 0,`${a?this._fontStyleToString(a.fontStyle):"-?-"}`)),te("tr",void 0,te("td.tm-metadata-key",void 0,"foreground"),te("td.tm-metadata-value",void 0,`${a?Z.Format.CSS.formatHex(a.foreground):"-?-"}`)),te("tr",void 0,te("td.tm-metadata-key",void 0,"background"),te("td.tm-metadata-value",void 0,`${a?Z.Format.CSS.formatHex(a.background):"-?-"}`))))),Y(this._domNode,te("hr.tokens-inspect-separator")),n<t.tokens1.length&&Y(this._domNode,te("span.tm-token-type",void 0,t.tokens1[n].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(e){const t=mn.getColorMap(),n=$s.getLanguageId(e),i=$s.getTokenType(e),o=$s.getFontStyle(e),r=$s.getForeground(e),a=$s.getBackground(e);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(n),tokenType:i,fontStyle:o,foreground:t[r],background:t[a]}}_tokenTypeToString(e){switch(e){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(e){let t="";return e&1&&(t+="italic "),e&2&&(t+="bold "),e&4&&(t+="underline "),e&8&&(t+="strikethrough "),t.length===0&&(t="---"),t}_getTokensAtLine(e){const t=this._getStateBeforeLine(e),n=this._tokenizationSupport.tokenize(this._model.getLineContent(e),!0,t),i=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(e),!0,t);return{startState:t,tokens1:n.tokens,tokens2:i.tokens,endState:n.endState}}_getStateBeforeLine(e){let t=this._tokenizationSupport.getInitialState();for(let n=1;n<e;n++)t=this._tokenizationSupport.tokenize(this._model.getLineContent(n),!0,t).endState;return t}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}};nT._ID="editor.contrib.inspectTokensWidget";let V5=nT;dt(a0.ID,a0,4);Q(tAe);var sAe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},dU=function(s,e){return function(t,n){e(t,n,s)}},CC,jg;let z5=(jg=class{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=ln.as(Rm.Quickaccess)}provide(e){const t=new q;return t.add(e.onDidAccept(()=>{const[n]=e.selectedItems;n&&this.quickInputService.quickAccess.show(n.prefix,{preserveValue:!0})})),t.add(e.onDidChangeValue(n=>{const i=this.registry.getQuickAccessProvider(n.substr(CC.PREFIX.length));i&&i.prefix&&i.prefix!==CC.PREFIX&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),e.items=this.getQuickAccessProviders().filter(n=>n.prefix!==CC.PREFIX),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((t,n)=>t.prefix.localeCompare(n.prefix)).flatMap(t=>this.createPicks(t))}createPicks(e){return e.helpEntries.map(t=>{const n=t.prefix||e.prefix,i=n||"…";return{prefix:n,label:i,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:m("helpPickAriaLabel","{0}, {1}",i,t.description),description:t.description}})}},CC=jg,jg.PREFIX="?",jg);z5=CC=sAe([dU(0,Nr),dU(1,wt)],z5);ln.as(Rm.Quickaccess).registerQuickAccessProvider({ctor:z5,prefix:"",helpEntries:[{description:ZA.helpQuickAccessActionLabel}]});class FJ{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t,n){var r;const i=new q;e.canAcceptInBackground=!!((r=this.options)!=null&&r.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const o=i.add(new ai);return o.value=this.doProvide(e,t,n),i.add(this.onDidActiveTextEditorControlChange(()=>{o.value=void 0,o.value=this.doProvide(e,t)})),i}doProvide(e,t,n){const i=new q,o=this.activeTextEditorControl;if(o&&this.canProvideWithTextEditor(o)){const r={editor:o},a=UY(o);if(a){let l=o.saveViewState()??void 0;i.add(a.onDidChangeCursorPosition(()=>{l=o.saveViewState()??void 0})),r.restoreViewState=()=>{l&&o===this.activeTextEditorControl&&o.restoreViewState(l)},i.add(iu(t.onCancellationRequested)(()=>{var c;return(c=r.restoreViewState)==null?void 0:c.call(r)}))}i.add(ve(()=>this.clearDecorations(o))),i.add(this.provideWithTextEditor(r,e,t,n))}else i.add(this.provideWithoutTextEditor(e,t));return i}canProvideWithTextEditor(e){return!0}gotoLocation({editor:e},t){e.setSelection(t.range,"code.jump"),e.revealRangeInCenter(t.range,0),t.preserveFocus||e.focus();const n=e.getModel();n&&"getLineContent"in n&&Zl(`${n.getLineContent(t.range.startLineNumber)}`)}getModel(e){var t;return aB(e)?(t=e.getModel())==null?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations(n=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const o=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:pn(PG),position:Ko.Full}}}],[r,a]=n.deltaDecorations(i,o);this.rangeHighlightDecorationId={rangeHighlightId:r,overviewRulerDecorationId:a}})}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations(n=>{n.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}const iT=class iT extends FJ{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=m("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,F.None}provideWithTextEditor(e,t,n){const i=e.editor,o=new q;o.add(t.onDidAccept(l=>{const[c]=t.selectedItems;if(c){if(!this.isValidLineNumber(i,c.lineNumber))return;this.gotoLocation(e,{range:this.toRange(c.lineNumber,c.column),keyMods:t.keyMods,preserveFocus:l.inBackground}),l.inBackground||t.hide()}}));const r=()=>{const l=this.parsePosition(i,t.value.trim().substr(iT.PREFIX.length)),c=this.getPickLabel(i,l.lineNumber,l.column);if(t.items=[{lineNumber:l.lineNumber,column:l.column,label:c}],t.ariaLabel=c,!this.isValidLineNumber(i,l.lineNumber)){this.clearDecorations(i);return}const d=this.toRange(l.lineNumber,l.column);i.revealRangeInCenter(d,0),this.addDecorations(i,d)};r(),o.add(t.onDidChangeValue(()=>r()));const a=UY(i);return a&&a.getOptions().get(68).renderType===2&&(a.updateOptions({lineNumbers:"on"}),o.add(ve(()=>a.updateOptions({lineNumbers:"relative"})))),o}toRange(e=1,t=1){return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const n=t.split(/,|:|#/).map(o=>parseInt(o,10)).filter(o=>!isNaN(o)),i=this.lineCount(e)+1;return{lineNumber:n[0]>0?n[0]:i+n[0],column:n[1]}}getPickLabel(e,t,n){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,n)?m("gotoLineColumnLabel","Go to line {0} and character {1}.",t,n):m("gotoLineLabel","Go to line {0}.",t);const i=e.getPosition()||{lineNumber:1,column:1},o=this.lineCount(e);return o>1?m("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",i.lineNumber,i.column,o):m("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",i.lineNumber,i.column)}isValidLineNumber(e,t){return!t||typeof t!="number"?!1:t>0&&t<=this.lineCount(e)}isValidColumn(e,t,n){if(!n||typeof n!="number")return!1;const i=this.getModel(e);if(!i)return!1;const o={lineNumber:t,column:n};return i.validatePosition(o).equals(o)}lineCount(e){var t;return((t=this.getModel(e))==null?void 0:t.getLineCount())??0}};iT.PREFIX=":";let $5=iT;var oAe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},rAe=function(s,e){return function(t,n){e(t,n,s)}};let l0=class extends $5{constructor(e){super(),this.editorService=e,this.onDidActiveTextEditorControlChange=se.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};l0=oAe([rAe(0,mt)],l0);var qg;let WJ=(qg=class extends he{constructor(){super({id:qg.ID,label:fL.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:2085,mac:{primary:293},weight:100}})}run(e){e.get(Nr).quickAccess.show(l0.PREFIX)}},qg.ID="editor.action.gotoLine",qg);Q(WJ);ln.as(Rm.Quickaccess).registerQuickAccessProvider({ctor:l0,prefix:l0.PREFIX,helpEntries:[{description:fL.gotoLineActionLabel,commandId:WJ.ID}]});const BJ=[void 0,[]];function u2(s,e,t=0,n=0){const i=e;return i.values&&i.values.length>1?aAe(s,i.values,t,n):HJ(s,e,t,n)}function aAe(s,e,t,n){let i=0;const o=[];for(const r of e){const[a,l]=HJ(s,r,t,n);if(typeof a!="number")return BJ;i+=a,o.push(...l)}return[i,lAe(o)]}function HJ(s,e,t,n){const i=nm(e.original,e.originalLowercase,t,s,s.toLowerCase(),n,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return i?[i[0],k0(i)]:BJ}function lAe(s){const e=s.sort((i,o)=>i.start-o.start),t=[];let n;for(const i of e)!n||!cAe(n,i)?(n=i,t.push(i)):(n.start=Math.min(n.start,i.start),n.end=Math.max(n.end,i.end));return t}function cAe(s,e){return!(s.end<e.start||e.end<s.start)}function hU(s){return s.startsWith('"')&&s.endsWith('"')}const VJ=" ";function U5(s){typeof s!="string"&&(s="");const e=s.toLowerCase(),{pathNormalized:t,normalized:n,normalizedLowercase:i}=uU(s),o=t.indexOf(Fa)>=0,r=hU(s);let a;const l=s.split(VJ);if(l.length>1)for(const c of l){const d=hU(c),{pathNormalized:h,normalized:u,normalizedLowercase:f}=uU(c);u&&(a||(a=[]),a.push({original:c,originalLowercase:c.toLowerCase(),pathNormalized:h,normalized:u,normalizedLowercase:f,expectContiguousMatch:d}))}return{original:s,originalLowercase:e,pathNormalized:t,normalized:n,normalizedLowercase:i,values:a,containsPathSeparator:o,expectContiguousMatch:r}}function uU(s){let e;Bi?e=s.replace(/\//g,Fa):e=s.replace(/\\/g,Fa);const t=pie(e).replace(/\s|"/g,"");return{pathNormalized:e,normalized:t,normalizedLowercase:t.toLowerCase()}}function fU(s){return Array.isArray(s)?U5(s.map(e=>e.original).join(VJ)):U5(s.original)}var dAe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},gU=function(s,e){return function(t,n){e(t,n,s)}},mk,Na;let Yf=(Na=class extends FJ{constructor(e,t,n=Object.create(null)){super(n),this._languageFeaturesService=e,this._outlineModelService=t,this.options=n,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,m("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),F.None}provideWithTextEditor(e,t,n,i){const o=e.editor,r=this.getModel(o);return r?this._languageFeaturesService.documentSymbolProvider.has(r)?this.doProvideWithEditorSymbols(e,r,t,n,i):this.doProvideWithoutEditorSymbols(e,r,t,n):F.None}doProvideWithoutEditorSymbols(e,t,n,i){const o=new q;return this.provideLabelPick(n,m("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(async()=>!await this.waitForLanguageSymbolRegistry(t,o)||i.isCancellationRequested||o.add(this.doProvideWithEditorSymbols(e,t,n,i)))(),o}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}async waitForLanguageSymbolRegistry(e,t){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const n=new Gb,i=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(i.dispose(),n.complete(!0))}));return t.add(ve(()=>n.complete(!1))),n.p}doProvideWithEditorSymbols(e,t,n,i,o){var h;const r=e.editor,a=new q;a.add(n.onDidAccept(u=>{var g;const[f]=n.selectedItems;f&&f.range&&(this.gotoLocation(e,{range:f.range.selection,keyMods:n.keyMods,preserveFocus:u.inBackground}),(g=o==null?void 0:o.handleAccept)==null||g.call(o,f),u.inBackground||n.hide())})),a.add(n.onDidTriggerItemButton(({item:u})=>{u&&u.range&&(this.gotoLocation(e,{range:u.range.selection,keyMods:n.keyMods,forceSideBySide:!0}),n.hide())}));const l=this.getDocumentSymbols(t,i);let c;const d=async u=>{c==null||c.dispose(!0),n.busy=!1,c=new an(i),n.busy=!0;try{const f=U5(n.value.substr(mk.PREFIX.length).trim()),g=await this.doGetSymbolPicks(l,f,void 0,c.token,t);if(i.isCancellationRequested)return;if(g.length>0){if(n.items=g,u&&f.original.length===0){const p=Uw(g,_=>!!(_.type!=="separator"&&_.range&&L.containsPosition(_.range.decoration,u)));p&&(n.activeItems=[p])}}else f.original.length>0?this.provideLabelPick(n,m("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(n,m("noSymbolResults","No editor symbols"))}finally{i.isCancellationRequested||(n.busy=!1)}};return a.add(n.onDidChangeValue(()=>d(void 0))),d((h=r.getSelection())==null?void 0:h.getPosition()),a.add(n.onDidChangeActive(()=>{const[u]=n.activeItems;u&&u.range&&(r.revealRangeInCenter(u.range.selection,0),this.addDecorations(r,u.range.decoration))})),a}async doGetSymbolPicks(e,t,n,i,o){var _,b;const r=await e;if(i.isCancellationRequested)return[];const a=t.original.indexOf(mk.SCOPE_PREFIX)===0,l=a?1:0;let c,d;t.values&&t.values.length>1?(c=fU(t.values[0]),d=fU(t.values.slice(1))):c=t;let h;const u=(b=(_=this.options)==null?void 0:_.openSideBySideDirection)==null?void 0:b.call(_);u&&(h=[{iconClass:u==="right"?De.asClassName(J.splitHorizontal):De.asClassName(J.splitVertical),tooltip:u==="right"?m("openToSide","Open to the Side"):m("openToBottom","Open to the Bottom")}]);const f=[];for(let v=0;v<r.length;v++){const C=r[v],w=gie(C.name),y=`$(${Nk.toIcon(C.kind).id}) ${w}`,k=y.length-w.length;let x=C.containerName;n!=null&&n.extraContainerLabel&&(x?x=`${n.extraContainerLabel} • ${x}`:x=n.extraContainerLabel);let D,N,W,B;if(t.original.length>l){let U=!1;if(c!==t&&([D,N]=u2(y,{...t,values:void 0},l,k),typeof D=="number"&&(U=!0)),typeof D!="number"&&([D,N]=u2(y,c,l,k),typeof D!="number"))continue;if(!U&&d){if(x&&d.original.length>0&&([W,B]=u2(x,d)),typeof W!="number")continue;typeof D=="number"&&(D+=W)}}const z=C.tags&&C.tags.indexOf(1)>=0;f.push({index:v,kind:C.kind,score:D,label:y,ariaLabel:aie(C.name,C.kind),description:x,highlights:z?void 0:{label:N,description:B},range:{selection:L.collapseToStart(C.selectionRange),decoration:C.range},uri:o.uri,symbolName:w,strikethrough:z,buttons:h})}const g=f.sort((v,C)=>a?this.compareByKindAndScore(v,C):this.compareByScore(v,C));let p=[];if(a){let y=function(){C&&typeof v=="number"&&w>0&&(C.label=Gg(g2[v]||f2,w))},v,C,w=0;for(const k of g)v!==k.kind?(y(),v=k.kind,w=1,C={type:"separator"},p.push(C)):w++,p.push(k);y()}else g.length>0&&(p=[{label:m("symbols","symbols ({0})",f.length),type:"separator"},...g]);return p}compareByScore(e,t){if(typeof e.score!="number"&&typeof t.score=="number")return 1;if(typeof e.score=="number"&&typeof t.score!="number")return-1;if(typeof e.score=="number"&&typeof t.score=="number"){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const n=g2[e.kind]||f2,i=g2[t.kind]||f2,o=n.localeCompare(i);return o===0?this.compareByScore(e,t):o}async getDocumentSymbols(e,t){const n=await this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:n.asListOfDocumentSymbols()}},mk=Na,Na.PREFIX="@",Na.SCOPE_PREFIX=":",Na.PREFIX_BY_CATEGORY=`${Na.PREFIX}${Na.SCOPE_PREFIX}`,Na);Yf=mk=dAe([gU(0,ue),gU(1,X0)],Yf);const f2=m("property","properties ({0})"),g2={5:m("method","methods ({0})"),11:m("function","functions ({0})"),8:m("_constructor","constructors ({0})"),12:m("variable","variables ({0})"),4:m("class","classes ({0})"),22:m("struct","structs ({0})"),23:m("event","events ({0})"),24:m("operator","operators ({0})"),10:m("interface","interfaces ({0})"),2:m("namespace","namespaces ({0})"),3:m("package","packages ({0})"),25:m("typeParameter","type parameters ({0})"),1:m("modules","modules ({0})"),6:m("property","properties ({0})"),9:m("enum","enumerations ({0})"),21:m("enumMember","enumeration members ({0})"),14:m("string","strings ({0})"),0:m("file","files ({0})"),17:m("array","arrays ({0})"),15:m("number","numbers ({0})"),16:m("boolean","booleans ({0})"),18:m("object","objects ({0})"),19:m("key","keys ({0})"),7:m("field","fields ({0})"),13:m("constant","constants ({0})")};var hAe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},m2=function(s,e){return function(t,n){e(t,n,s)}};let j5=class extends Yf{constructor(e,t,n){super(t,n),this.editorService=e,this.onDidActiveTextEditorControlChange=se.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};j5=hAe([m2(0,mt),m2(1,ue),m2(2,X0)],j5);const sT=class sT extends he{constructor(){super({id:sT.ID,label:r1.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:I.hasDocumentSymbolProvider,kbOpts:{kbExpr:I.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(e){e.get(Nr).quickAccess.show(Yf.PREFIX,{itemActivation:ka.NONE})}};sT.ID="editor.action.quickOutline";let CD=sT;Q(CD);ln.as(Rm.Quickaccess).registerQuickAccessProvider({ctor:j5,prefix:Yf.PREFIX,helpEntries:[{description:r1.quickOutlineActionLabel,prefix:Yf.PREFIX,commandId:CD.ID},{description:r1.quickOutlineByCategoryActionLabel,prefix:Yf.PREFIX_BY_CATEGORY}]});function uAe(s){const e=new Map;for(const t of s)e.set(t,(e.get(t)??0)+1);return e}class aw{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(e,t){const n=this.computeEmbedding(e),i=new Map,o=[];for(const[r,a]of this.documents){if(t.isCancellationRequested)return[];for(const l of a.chunks){const c=this.computeSimilarityScore(l,n,i);c>0&&o.push({key:r,score:c})}}return o}static termFrequencies(e){return uAe(aw.splitTerms(e))}static*splitTerms(e){const t=n=>n.toLowerCase();for(const[n]of e.matchAll(new RegExp("\\b\\p{Letter}[\\p{Letter}\\d]{2,}\\b","gu"))){yield t(n);const i=n.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g);if(i.length>1)for(const o of i)o.length>2&&new RegExp("\\p{Letter}{3,}","gu").test(o)&&(yield t(o))}}updateDocuments(e){for(const{key:t}of e)this.deleteDocument(t);for(const t of e){const n=[];for(const i of t.textChunks){const o=aw.termFrequencies(i);for(const r of o.keys())this.chunkOccurrences.set(r,(this.chunkOccurrences.get(r)??0)+1);n.push({text:i,tf:o})}this.chunkCount+=n.length,this.documents.set(t.key,{chunks:n})}return this}deleteDocument(e){const t=this.documents.get(e);if(t){this.documents.delete(e),this.chunkCount-=t.chunks.length;for(const n of t.chunks)for(const i of n.tf.keys()){const o=this.chunkOccurrences.get(i);if(typeof o=="number"){const r=o-1;r<=0?this.chunkOccurrences.delete(i):this.chunkOccurrences.set(i,r)}}}}computeSimilarityScore(e,t,n){let i=0;for(const[o,r]of Object.entries(t)){const a=e.tf.get(o);if(!a)continue;let l=n.get(o);typeof l!="number"&&(l=this.computeIdf(o),n.set(o,l));const c=a*l;i+=c*r}return i}computeEmbedding(e){const t=aw.termFrequencies(e);return this.computeTfidf(t)}computeIdf(e){const t=this.chunkOccurrences.get(e)??0;return t>0?Math.log((this.chunkCount+1)/t):0}computeTfidf(e){const t=Object.create(null);for(const[n,i]of e){const o=this.computeIdf(n);o>0&&(t[n]=i*o)}return t}}function fAe(s){var n;const e=s.slice(0);e.sort((i,o)=>o.score-i.score);const t=((n=e[0])==null?void 0:n.score)??0;if(t>0)for(const i of e)i.score/=t;return e}var Qp;(function(s){s[s.NO_ACTION=0]="NO_ACTION",s[s.CLOSE_PICKER=1]="CLOSE_PICKER",s[s.REFRESH_PICKER=2]="REFRESH_PICKER",s[s.REMOVE_ITEM=3]="REMOVE_ITEM"})(Qp||(Qp={}));function p2(s){const e=s;return Array.isArray(e.items)}function mU(s){const e=s;return!!e.picks&&e.additionalPicks instanceof Promise}class gAe extends F{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,n){var c;const i=new q;e.canAcceptInBackground=!!((c=this.options)!=null&&c.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;let o;const r=i.add(new ai),a=async()=>{var _;const d=r.value=new q;o==null||o.dispose(!0),e.busy=!1,o=new an(t);const h=o.token;let u=e.value.substring(this.prefix.length);(_=this.options)!=null&&_.shouldSkipTrimPickFilter||(u=u.trim());const f=this._getPicks(u,d,h,n),g=(b,v)=>{var y;let C,w;if(p2(b)?(C=b.items,w=b.active):C=b,C.length===0){if(v)return!1;(u.length>0||e.hideInput)&&((y=this.options)!=null&&y.noResultsPick)&&(Nw(this.options.noResultsPick)?C=[this.options.noResultsPick(u)]:C=[this.options.noResultsPick])}return e.items=C,w&&(e.activeItems=[w]),!0},p=async b=>{let v=!1,C=!1;await Promise.all([(async()=>{typeof b.mergeDelay=="number"&&(await _d(b.mergeDelay),h.isCancellationRequested)||C||(v=g(b.picks,!0))})(),(async()=>{e.busy=!0;try{const w=await b.additionalPicks;if(h.isCancellationRequested)return;let y,k;p2(b.picks)?(y=b.picks.items,k=b.picks.active):y=b.picks;let x,D;if(p2(w)?(x=w.items,D=w.active):x=w,x.length>0||!v){let N;if(!k&&!D){const W=e.activeItems[0];W&&y.indexOf(W)!==-1&&(N=W)}g({items:[...y,...x],active:k||D||N})}}finally{h.isCancellationRequested||(e.busy=!1),C=!0}})()])};if(f!==null)if(mU(f))await p(f);else if(!(f instanceof Promise))g(f);else{e.busy=!0;try{const b=await f;if(h.isCancellationRequested)return;mU(b)?await p(b):g(b)}finally{h.isCancellationRequested||(e.busy=!1)}}};i.add(e.onDidChangeValue(()=>a())),a(),i.add(e.onDidAccept(d=>{var u;if(n!=null&&n.handleAccept){d.inBackground||e.hide(),(u=n.handleAccept)==null||u.call(n,e.activeItems[0]);return}const[h]=e.selectedItems;typeof(h==null?void 0:h.accept)=="function"&&(d.inBackground||e.hide(),h.accept(e.keyMods,d))}));const l=async(d,h)=>{var f;if(typeof h.trigger!="function")return;const u=((f=h.buttons)==null?void 0:f.indexOf(d))??-1;if(u>=0){const g=h.trigger(u,e.keyMods),p=typeof g=="number"?g:await g;if(t.isCancellationRequested)return;switch(p){case Qp.NO_ACTION:break;case Qp.CLOSE_PICKER:e.hide();break;case Qp.REFRESH_PICKER:a();break;case Qp.REMOVE_ITEM:{const _=e.items.indexOf(h);if(_!==-1){const b=e.items.slice(),v=b.splice(_,1),C=e.activeItems.filter(y=>y!==v[0]),w=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=b,C&&(e.activeItems=C),e.keepScrollPosition=w}break}}}};return i.add(e.onDidTriggerItemButton(({button:d,item:h})=>l(d,h))),i.add(e.onDidTriggerSeparatorButton(({button:d,separator:h})=>l(d,h))),i}}var zJ=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},fh=function(s,e){return function(t,n){e(t,n,s)}},rf,Un,Wl;let q5=(Wl=class extends gAe{constructor(e,t,n,i,o,r){super(rf.PREFIX,e),this.instantiationService=t,this.keybindingService=n,this.commandService=i,this.telemetryService=o,this.dialogService=r,this.commandsHistory=this._register(this.instantiationService.createInstance(K5)),this.options=e}async _getPicks(e,t,n,i){var f,g;const o=await this.getCommandPicks(n);if(n.isCancellationRequested)return[];const r=iu(()=>{const p=new aw;p.updateDocuments(o.map(b=>({key:b.commandId,textChunks:[this.getTfIdfChunk(b)]})));const _=p.calculateScores(e,n);return fAe(_).filter(b=>b.score>rf.TFIDF_THRESHOLD).slice(0,rf.TFIDF_MAX_RESULTS)}),a=[];for(const p of o){const _=rf.WORD_FILTER(e,p.label)??void 0,b=p.commandAlias?rf.WORD_FILTER(e,p.commandAlias)??void 0:void 0;if(_||b)p.highlights={label:_,detail:this.options.showAlias?b:void 0},a.push(p);else if(e===p.commandId)a.push(p);else if(e.length>=3){const v=r();if(n.isCancellationRequested)return[];const C=v.find(w=>w.key===p.commandId);C&&(p.tfIdfScore=C.score,a.push(p))}}const l=new Map;for(const p of a){const _=l.get(p.label);_?(p.description=p.commandId,_.description=_.commandId):l.set(p.label,p)}a.sort((p,_)=>{if(p.tfIdfScore&&_.tfIdfScore)return p.tfIdfScore===_.tfIdfScore?p.label.localeCompare(_.label):_.tfIdfScore-p.tfIdfScore;if(p.tfIdfScore)return 1;if(_.tfIdfScore)return-1;const b=this.commandsHistory.peek(p.commandId),v=this.commandsHistory.peek(_.commandId);if(b&&v)return b>v?-1:1;if(b)return-1;if(v)return 1;if(this.options.suggestedCommandIds){const C=this.options.suggestedCommandIds.has(p.commandId),w=this.options.suggestedCommandIds.has(_.commandId);if(C&&w)return 0;if(C)return-1;if(w)return 1}return p.label.localeCompare(_.label)});const c=[];let d=!1,h=!0,u=!!this.options.suggestedCommandIds;for(let p=0;p<a.length;p++){const _=a[p];p===0&&this.commandsHistory.peek(_.commandId)&&(c.push({type:"separator",label:m("recentlyUsed","recently used")}),d=!0),h&&_.tfIdfScore!==void 0&&(c.push({type:"separator",label:m("suggested","similar commands")}),h=!1),u&&_.tfIdfScore===void 0&&!this.commandsHistory.peek(_.commandId)&&((f=this.options.suggestedCommandIds)!=null&&f.has(_.commandId))&&(c.push({type:"separator",label:m("commonlyUsed","commonly used")}),d=!0,u=!1),d&&_.tfIdfScore===void 0&&!this.commandsHistory.peek(_.commandId)&&!((g=this.options.suggestedCommandIds)!=null&&g.has(_.commandId))&&(c.push({type:"separator",label:m("morecCommands","other commands")}),d=!1),c.push(this.toCommandPick(_,i))}return this.hasAdditionalCommandPicks(e,n)?{picks:c,additionalPicks:(async()=>{var b;const p=await this.getAdditionalCommandPicks(o,a,e,n);if(n.isCancellationRequested)return[];const _=p.map(v=>this.toCommandPick(v,i));return h&&((b=_[0])==null?void 0:b.type)!=="separator"&&_.unshift({type:"separator",label:m("suggested","similar commands")}),_})()}:c}toCommandPick(e,t){if(e.type==="separator")return e;const n=this.keybindingService.lookupKeybinding(e.commandId),i=n?m("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,n.getAriaLabel()):e.label;return{...e,ariaLabel:i,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:n,accept:async()=>{var o;this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:(t==null?void 0:t.from)??"quick open"});try{(o=e.args)!=null&&o.length?await this.commandService.executeCommand(e.commandId,...e.args):await this.commandService.executeCommand(e.commandId)}catch(r){Tr(r)||this.dialogService.error(m("canNotRun","Command '{0}' resulted in an error",e.label),xx(r))}}}}getTfIdfChunk({label:e,commandAlias:t,commandDescription:n}){let i=e;return t&&t!==e&&(i+=` - ${t}`),n&&n.value!==e&&(i+=` - ${n.value===n.original?n.value:`${n.value} (${n.original})`}`),i}},rf=Wl,Wl.PREFIX=">",Wl.TFIDF_THRESHOLD=.5,Wl.TFIDF_MAX_RESULTS=5,Wl.WORD_FILTER=k9(n1,Ede,GK),Wl);q5=rf=zJ([fh(1,Ce),fh(2,wt),fh(3,Wt),fh(4,Zi),fh(5,w0)],q5);var Ra;let K5=(Ra=class extends F{constructor(e,t,n){super(),this.storageService=e,this.configurationService=t,this.logService=n,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>this.updateConfiguration(e))),this._register(this.storageService.onWillSaveState(e=>{e.reason===d1.SHUTDOWN&&this.saveState()}))}updateConfiguration(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=Un.getConfiguredCommandHistoryLength(this.configurationService),Un.cache&&Un.cache.limit!==this.configuredCommandsHistoryLength&&(Un.cache.limit=this.configuredCommandsHistoryLength,Un.hasChanges=!0))}load(){const e=this.storageService.get(Un.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch(i){this.logService.error(`[CommandsHistory] invalid data: ${i}`)}const n=Un.cache=new ic(this.configuredCommandsHistoryLength,1);if(t){let i;t.usesLRU?i=t.entries:i=t.entries.sort((o,r)=>o.value-r.value),i.forEach(o=>n.set(o.key,o.value))}Un.counter=this.storageService.getNumber(Un.PREF_KEY_COUNTER,0,Un.counter)}push(e){Un.cache&&(Un.cache.set(e,Un.counter++),Un.hasChanges=!0)}peek(e){var t;return(t=Un.cache)==null?void 0:t.peek(e)}saveState(){if(!Un.cache||!Un.hasChanges)return;const e={usesLRU:!0,entries:[]};Un.cache.forEach((t,n)=>e.entries.push({key:n,value:t})),this.storageService.store(Un.PREF_KEY_CACHE,JSON.stringify(e),0,0),this.storageService.store(Un.PREF_KEY_COUNTER,Un.counter,0,0),Un.hasChanges=!1}static getConfiguredCommandHistoryLength(e){var i,o;const n=(o=(i=e.getValue().workbench)==null?void 0:i.commandPalette)==null?void 0:o.history;return typeof n=="number"?n:Un.DEFAULT_COMMANDS_HISTORY_LENGTH}},Un=Ra,Ra.DEFAULT_COMMANDS_HISTORY_LENGTH=50,Ra.PREF_KEY_CACHE="commandPalette.mru.cache",Ra.PREF_KEY_COUNTER="commandPalette.mru.counter",Ra.counter=1,Ra.hasChanges=!1,Ra);K5=Un=zJ([fh(0,da),fh(1,Ze),fh(2,Hi)],K5);class mAe extends q5{constructor(e,t,n,i,o,r){super(e,t,n,i,o,r)}getCodeEditorCommandPicks(){var n;const e=this.activeTextEditorControl;if(!e)return[];const t=[];for(const i of e.getSupportedActions()){let o;(n=i.metadata)!=null&&n.description&&(Ife(i.metadata.description)?o=i.metadata.description:o={original:i.metadata.description,value:i.metadata.description}),t.push({commandId:i.id,commandAlias:i.alias,commandDescription:o,label:E9(i.label)||i.id})}return t}}var pAe=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},bp=function(s,e){return function(t,n){e(t,n,s)}};let c0=class extends mAe{get activeTextEditorControl(){return this.codeEditorService.getFocusedCodeEditor()??void 0}constructor(e,t,n,i,o,r){super({showAlias:!1},e,n,i,o,r),this.codeEditorService=t}async getCommandPicks(){return this.getCodeEditorCommandPicks()}hasAdditionalCommandPicks(){return!1}async getAdditionalCommandPicks(){return[]}};c0=pAe([bp(0,Ce),bp(1,mt),bp(2,wt),bp(3,Wt),bp(4,Zi),bp(5,w0)],c0);const oT=class oT extends he{constructor(){super({id:oT.ID,label:gL.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:I.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(e){e.get(Nr).quickAccess.show(c0.PREFIX)}};oT.ID="editor.action.quickCommand";let wD=oT;Q(wD);ln.as(Rm.Quickaccess).registerQuickAccessProvider({ctor:c0,prefix:c0.PREFIX,helpEntries:[{description:gL.quickCommandHelp,commandId:wD.ID}]});var _Ae=function(s,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(s,e,t,n);else for(var a=s.length-1;a>=0;a--)(r=s[a])&&(o=(i<3?r(o):i>3?r(e,t,o):r(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},vp=function(s,e){return function(t,n){e(t,n,s)}};let G5=class extends pm{constructor(e,t,n,i,o,r,a){super(!0,e,t,n,i,o,r,a)}};G5=_Ae([vp(1,Ie),vp(2,mt),vp(3,En),vp(4,Ce),vp(5,da),vp(6,Ze)],G5);dt(pm.ID,G5,4);class bAe extends he{constructor(){super({id:"editor.action.toggleHighContrast",label:XA.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(e,t){const n=e.get(rr),i=n.getColorTheme();Ha(i.type)?(n.setTheme(this._originalThemeName||(cb(i.type)?N_:Hc)),this._originalThemeName=null):(n.setTheme(cb(i.type)?jf:qf),this._originalThemeName=i.themeName)}}Q(bAe);let vAe={data:""},CAe=s=>typeof window=="object"?((s?s.querySelector("#_goober"):window._goober)||Object.assign((s||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:s||vAe,wAe=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,yAe=/\/\*[^]*?\*\/|  +/g,pU=/\n+/g,gh=(s,e)=>{let t="",n="",i="";for(let o in s){let r=s[o];o[0]=="@"?o[1]=="i"?t=o+" "+r+";":n+=o[1]=="f"?gh(r,o):o+"{"+gh(r,o[1]=="k"?"":e)+"}":typeof r=="object"?n+=gh(r,e?e.replace(/([^,])+/g,a=>o.replace(/(^:.*)|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):o):r!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=gh.p?gh.p(o,r):o+":"+r+";")}return t+(e&&i?e+"{"+i+"}":i)+n},bc={},$J=s=>{if(typeof s=="object"){let e="";for(let t in s)e+=t+$J(s[t]);return e}return s},SAe=(s,e,t,n,i)=>{let o=$J(s),r=bc[o]||(bc[o]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(o));if(!bc[r]){let l=o!==s?s:(c=>{let d,h,u=[{}];for(;d=wAe.exec(c.replace(yAe,""));)d[4]?u.shift():d[3]?(h=d[3].replace(pU," ").trim(),u.unshift(u[0][h]=u[0][h]||{})):u[0][d[1]]=d[2].replace(pU," ").trim();return u[0]})(s);bc[r]=gh(i?{["@keyframes "+r]:l}:l,t?"":"."+r)}let a=t&&bc.g?bc.g:null;return t&&(bc.g=bc[r]),((l,c,d,h)=>{h?c.data=c.data.replace(h,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(bc[r],e,n,a),r},kAe=(s,e,t)=>s.reduce((n,i,o)=>{let r=e[o];if(r&&r.call){let a=r(t),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;r=l?"."+l:a&&typeof a=="object"?a.props?"":gh(a,""):a===!1?"":a}return n+i+(r??"")},"");function ZE(s){let e=this||{},t=s.call?s(e.p):s;return SAe(t.unshift?t.raw?kAe(t,[].slice.call(arguments,1),e.p):t.reduce((n,i)=>Object.assign(n,i&&i.call?i(e.p):i),{}):t,CAe(e.target),e.g,e.o,e.k)}let UJ,Z5,Y5;ZE.bind({g:1});let Dd=ZE.bind({k:1});function LAe(s,e,t,n){gh.p=e,UJ=s,Z5=t,Y5=n}function Mu(s,e){let t=this||{};return function(){let n=arguments;function i(o,r){let a=Object.assign({},o),l=a.className||i.className;t.p=Object.assign({theme:Z5&&Z5()},a),t.o=/ *go\d+/.test(l),a.className=ZE.apply(t,n)+(l?" "+l:"");let c=s;return s[0]&&(c=a.as||s,delete a.as),Y5&&c[0]&&Y5(a),UJ(c,a)}return i}}var xAe=s=>typeof s=="function",yD=(s,e)=>xAe(s)?s(e):s,DAe=(()=>{let s=0;return()=>(++s).toString()})(),jJ=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");s=!e||e.matches}return s}})(),IAe=20,pk=new Map,TAe=1e3,_U=s=>{if(pk.has(s))return;let e=setTimeout(()=>{pk.delete(s),$m({type:4,toastId:s})},TAe);pk.set(s,e)},EAe=s=>{let e=pk.get(s);e&&clearTimeout(e)},X5=(s,e)=>{switch(e.type){case 0:return{...s,toasts:[e.toast,...s.toasts].slice(0,IAe)};case 1:return e.toast.id&&EAe(e.toast.id),{...s,toasts:s.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:t}=e;return s.toasts.find(o=>o.id===t.id)?X5(s,{type:1,toast:t}):X5(s,{type:0,toast:t});case 3:let{toastId:n}=e;return n?_U(n):s.toasts.forEach(o=>{_U(o.id)}),{...s,toasts:s.toasts.map(o=>o.id===n||n===void 0?{...o,visible:!1}:o)};case 4:return e.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...s,pausedAt:e.time};case 6:let i=e.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},_k=[],bk={toasts:[],pausedAt:void 0},$m=s=>{bk=X5(bk,s),_k.forEach(e=>{e(bk)})},NAe={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},RAe=(s={})=>{let[e,t]=Id(bk);Ss(()=>(_k.push(t),()=>{let i=_k.indexOf(t);i>-1&&_k.splice(i,1)}),[e]);let n=e.toasts.map(i=>{var o,r;return{...s,...s[i.type],...i,duration:i.duration||((o=s[i.type])==null?void 0:o.duration)||(s==null?void 0:s.duration)||NAe[i.type],style:{...s.style,...(r=s[i.type])==null?void 0:r.style,...i.style}}});return{...e,toasts:n}},MAe=(s,e="blank",t)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...t,id:(t==null?void 0:t.id)||DAe()}),J0=s=>(e,t)=>{let n=MAe(e,s,t);return $m({type:2,toast:n}),n.id},vr=(s,e)=>J0("blank")(s,e);vr.error=J0("error");vr.success=J0("success");vr.loading=J0("loading");vr.custom=J0("custom");vr.dismiss=s=>{$m({type:3,toastId:s})};vr.remove=s=>$m({type:4,toastId:s});vr.promise=(s,e,t)=>{let n=vr.loading(e.loading,{...t,...t==null?void 0:t.loading});return s.then(i=>(vr.success(yD(e.success,i),{id:n,...t,...t==null?void 0:t.success}),i)).catch(i=>{vr.error(yD(e.error,i),{id:n,...t,...t==null?void 0:t.error})}),s};var AAe=(s,e)=>{$m({type:1,toast:{id:s,height:e}})},PAe=()=>{$m({type:5,time:Date.now()})},OAe=s=>{let{toasts:e,pausedAt:t}=RAe(s);Ss(()=>{if(t)return;let o=Date.now(),r=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(o-a.createdAt);if(l<0){a.visible&&vr.dismiss(a.id);return}return setTimeout(()=>vr.dismiss(a.id),l)});return()=>{r.forEach(a=>a&&clearTimeout(a))}},[e,t]);let n=ud(()=>{t&&$m({type:6,time:Date.now()})},[t]),i=ud((o,r)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=r||{},d=e.filter(f=>(f.position||c)===(o.position||c)&&f.height),h=d.findIndex(f=>f.id===o.id),u=d.filter((f,g)=>g<h&&f.visible).length;return d.filter(f=>f.visible).slice(...a?[u+1]:[0,u]).reduce((f,g)=>f+(g.height||0)+l,0)},[e]);return{toasts:e,handlers:{updateHeight:AAe,startPause:PAe,endPause:n,calculateOffset:i}}},FAe=Dd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,WAe=Dd`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,BAe=Dd`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,HAe=Mu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${FAe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${WAe} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${BAe} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,VAe=Dd`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,zAe=Mu("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${VAe} 1s linear infinite;
`,$Ae=Dd`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,UAe=Dd`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,jAe=Mu("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${$Ae} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${UAe} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,qAe=Mu("div")`
  position: absolute;
`,KAe=Mu("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,GAe=Dd`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ZAe=Mu("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${GAe} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,YAe=({toast:s})=>{let{icon:e,type:t,iconTheme:n}=s;return e!==void 0?typeof e=="string"?jn(ZAe,null,e):e:t==="blank"?null:jn(KAe,null,jn(zAe,{...n}),t!=="loading"&&jn(qAe,null,t==="error"?jn(HAe,{...n}):jn(jAe,{...n})))},XAe=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,QAe=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,JAe="0%{opacity:0;} 100%{opacity:1;}",ePe="0%{opacity:1;} 100%{opacity:0;}",tPe=Mu("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,nPe=Mu("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,iPe=(s,e)=>{let t=s.includes("top")?1:-1,[n,i]=jJ()?[JAe,ePe]:[XAe(t),QAe(t)];return{animation:e?`${Dd(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Dd(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},sPe=r3(({toast:s,position:e,style:t,children:n})=>{let i=s.height?iPe(s.position||e||"top-center",s.visible):{opacity:0},o=jn(YAe,{toast:s}),r=jn(nPe,{...s.ariaProps},yD(s.message,s));return jn(tPe,{className:s.className,style:{...i,...t,...s.style}},typeof n=="function"?n({icon:o,message:r}):jn(Yo,null,o,r))});LAe(jn);var oPe=({id:s,className:e,style:t,onHeightUpdate:n,children:i})=>{let o=ud(r=>{if(r){let a=()=>{let l=r.getBoundingClientRect().height;n(s,l)};a(),new MutationObserver(a).observe(r,{subtree:!0,childList:!0,characterData:!0})}},[s,n]);return jn("div",{ref:o,className:e,style:t},i)},rPe=(s,e)=>{let t=s.includes("top"),n=t?{top:0}:{bottom:0},i=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:jJ()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...n,...i}},aPe=ZE`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,LS=16,lPe=({reverseOrder:s,position:e="top-center",toastOptions:t,gutter:n,children:i,containerStyle:o,containerClassName:r})=>{let{toasts:a,handlers:l}=OAe(t);return jn("div",{style:{position:"fixed",zIndex:9999,top:LS,left:LS,right:LS,bottom:LS,pointerEvents:"none",...o},className:r,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let d=c.position||e,h=l.calculateOffset(c,{reverseOrder:s,gutter:n,defaultPosition:e}),u=rPe(d,h);return jn(oPe,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?aPe:"",style:u},c.type==="custom"?yD(c.message,c):i?i(c):jn(sPe,{toast:c,position:d}))}))},w5e=vr;const cPe={BASE_URL:"/SchemaGenerator"};var dPe=Symbol.for("preact-signals");function YE(){if(Fh>1)Fh--;else{for(var s,e=!1;lw!==void 0;){var t=lw;for(lw=void 0,Q5++;t!==void 0;){var n=t.o;if(t.o=void 0,t.f&=-3,!(8&t.f)&&KJ(t))try{t.c()}catch(i){e||(s=i,e=!0)}t=n}}if(Q5=0,Fh--,e)throw s}}function hPe(s){if(Fh>0)return s();Fh++;try{return s()}finally{YE()}}var An=void 0,lw=void 0,Fh=0,Q5=0,SD=0;function qJ(s){if(An!==void 0){var e=s.n;if(e===void 0||e.t!==An)return e={i:0,S:s,p:An.s,n:void 0,t:An,e:void 0,x:void 0,r:e},An.s!==void 0&&(An.s.n=e),An.s=e,s.n=e,32&An.f&&s.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=An.s,e.n=void 0,An.s.n=e,An.s=e),e}}function Os(s){this.v=s,this.i=0,this.n=void 0,this.t=void 0}Os.prototype.brand=dPe;Os.prototype.h=function(){return!0};Os.prototype.S=function(s){this.t!==s&&s.e===void 0&&(s.x=this.t,this.t!==void 0&&(this.t.e=s),this.t=s)};Os.prototype.U=function(s){if(this.t!==void 0){var e=s.e,t=s.x;e!==void 0&&(e.x=t,s.e=void 0),t!==void 0&&(t.e=e,s.x=void 0),s===this.t&&(this.t=t)}};Os.prototype.subscribe=function(s){var e=this;return ty(function(){var t=e.value,n=An;An=void 0;try{s(t)}finally{An=n}})};Os.prototype.valueOf=function(){return this.value};Os.prototype.toString=function(){return this.value+""};Os.prototype.toJSON=function(){return this.value};Os.prototype.peek=function(){var s=An;An=void 0;try{return this.value}finally{An=s}};Object.defineProperty(Os.prototype,"value",{get:function(){var s=qJ(this);return s!==void 0&&(s.i=this.i),this.v},set:function(s){if(s!==this.v){if(Q5>100)throw new Error("Cycle detected");this.v=s,this.i++,SD++,Fh++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{YE()}}}});function Jn(s){return new Os(s)}function KJ(s){for(var e=s.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function GJ(s){for(var e=s.s;e!==void 0;e=e.n){var t=e.S.n;if(t!==void 0&&(e.r=t),e.S.n=e,e.i=-1,e.n===void 0){s.s=e;break}}}function ZJ(s){for(var e=s.s,t=void 0;e!==void 0;){var n=e.p;e.i===-1?(e.S.U(e),n!==void 0&&(n.n=e.n),e.n!==void 0&&(e.n.p=n)):t=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=n}s.s=t}function Cv(s){Os.call(this,void 0),this.x=s,this.s=void 0,this.g=SD-1,this.f=4}(Cv.prototype=new Os).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===SD))return!0;if(this.g=SD,this.f|=1,this.i>0&&!KJ(this))return this.f&=-2,!0;var s=An;try{GJ(this),An=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return An=s,ZJ(this),this.f&=-2,!0};Cv.prototype.S=function(s){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}Os.prototype.S.call(this,s)};Cv.prototype.U=function(s){if(this.t!==void 0&&(Os.prototype.U.call(this,s),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};Cv.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var s=this.t;s!==void 0;s=s.x)s.t.N()}};Object.defineProperty(Cv.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var s=qJ(this);if(this.h(),s!==void 0&&(s.i=this.i),16&this.f)throw this.v;return this.v}});function Au(s){return new Cv(s)}function YJ(s){var e=s.u;if(s.u=void 0,typeof e=="function"){Fh++;var t=An;An=void 0;try{e()}catch(n){throw s.f&=-2,s.f|=8,s7(s),n}finally{An=t,YE()}}}function s7(s){for(var e=s.s;e!==void 0;e=e.n)e.S.U(e);s.x=void 0,s.s=void 0,YJ(s)}function uPe(s){if(An!==this)throw new Error("Out-of-order effect");ZJ(this),An=s,this.f&=-2,8&this.f&&s7(this),YE()}function ey(s){this.x=s,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}ey.prototype.c=function(){var s=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{s()}};ey.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,YJ(this),GJ(this),Fh++;var s=An;return An=this,uPe.bind(this,s)};ey.prototype.N=function(){2&this.f||(this.f|=2,this.o=lw,lw=this)};ey.prototype.d=function(){this.f|=8,1&this.f||s7(this)};function ty(s){var e=new ey(s);try{e.c()}catch(t){throw e.d(),t}return e.d.bind(e)}var XE,_2;function wv(s,e){xt[s]=e.bind(null,xt[s]||function(){})}function kD(s){_2&&_2(),_2=s&&s.S()}function XJ(s){var e=this,t=s.data,n=gPe(t);n.value=t;var i=Td(function(){for(var o=e.__v;o=o.__;)if(o.__c){o.__c.__$f|=4;break}return e.__$u.c=function(){var r;!SU(i.peek())&&((r=e.base)==null?void 0:r.nodeType)===3?e.base.data=i.peek():(e.__$f|=1,e.setState({}))},Au(function(){var r=n.value.value;return r===0?0:r===!0?"":r||""})},[]);return i.value}XJ.displayName="_st";Object.defineProperties(Os.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:XJ},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});wv("__b",function(s,e){if(typeof e.type=="string"){var t,n=e.props;for(var i in n)if(i!=="children"){var o=n[i];o instanceof Os&&(t||(e.__np=t={}),t[i]=o,n[i]=o.peek())}}s(e)});wv("__r",function(s,e){kD();var t,n=e.__c;n&&(n.__$f&=-2,(t=n.__$u)===void 0&&(n.__$u=t=function(i){var o;return ty(function(){o=this}),o.c=function(){n.__$f|=1,n.setState({})},o}())),XE=n,kD(t),s(e)});wv("__e",function(s,e,t,n){kD(),XE=void 0,s(e,t,n)});wv("diffed",function(s,e){kD(),XE=void 0;var t;if(typeof e.type=="string"&&(t=e.__e)){var n=e.__np,i=e.props;if(n){var o=t.U;if(o)for(var r in o){var a=o[r];a!==void 0&&!(r in n)&&(a.d(),o[r]=void 0)}else t.U=o={};for(var l in n){var c=o[l],d=n[l];c===void 0?(c=fPe(t,l,d,i),o[l]=c):c.o(d,i)}}}s(e)});function fPe(s,e,t,n){var i=e in s&&s.ownerSVGElement===void 0,o=Jn(t);return{o:function(r,a){o.value=r,n=a},d:ty(function(){var r=o.value.value;n[e]!==r&&(n[e]=r,i?s[e]=r:r?s.setAttribute(e,r):s.removeAttribute(e))})}}wv("unmount",function(s,e){if(typeof e.type=="string"){var t=e.__e;if(t){var n=t.U;if(n){t.U=void 0;for(var i in n){var o=n[i];o&&o.d()}}}}else{var r=e.__c;if(r){var a=r.__$u;a&&(r.__$u=void 0,a.d())}}s(e)});wv("__h",function(s,e,t,n){(n<3||n===9)&&(e.__$f|=2),s(e,t,n)});Xr.prototype.shouldComponentUpdate=function(s,e){var t=this.__$u;if(!(t&&t.s!==void 0||4&this.__$f)||3&this.__$f)return!0;for(var n in e)return!0;for(var i in s)if(i!=="__source"&&s[i]!==this.props[i])return!0;for(var o in this.props)if(!(o in s))return!0;return!1};function gPe(s){return Td(function(){return Jn(s)},[])}function y5e(s){var e=Ub(s);return e.current=s,XE.__$f|=4,Td(function(){return Au(function(){return e.current()})},[])}const mPe=`import { faker } from "@faker-js/faker"; // here faker-js is used, it is not mandatory but should match perfectly with this library\r
import dayjs from "dayjs"; // here dayjs is used, it is not mandatory but should match perfectly with this library\r
import { Store, WriteToFile, addTime, generate, generatePreview, getIdFn, getRandomDateFn, getRandomElementFn,\r
	getRandomElementsFn, getRandomFloatFn, getRandomIntFn, randomBoolean, randomDate, randomFloat, randomInt,\r
	randomString, shuffle, unique_, type Result, type SchemaGenerator, type TimeUnitT } from "schema-generator-utils";\r
\r
const getResult = async (): Promise<Result> => {\r
	// DO NOT CHANGE TEXT ABOVE\r
\r
	const result: Result = [];\r
\r
	type User = {\r
		id: number;\r
		name: string;\r
		email: string;\r
	};\r
\r
	const userGenerator: SchemaGenerator<User> = {\r
		id: getIdFn(),\r
		name: faker.person.fullName,\r
		email: faker.internet.email,\r
	};\r
\r
	const users = generate<User[]>([userGenerator, 100]);\r
\r
	result.push({ name: "Users", data: users });\r
\r
	return result;\r
};\r
`,pPe={fileName:"New file",code:mPe},_Pe=()=>{const s=JSON.parse(localStorage.getItem("globalState")??"{}");return{colorScheme:Jn(s.colorScheme??"dark"),isAboveMd:Jn(!1),isBelowXxs:Jn(!1),viewportSize:Jn({height:0,width:0}),codeList:Jn((s.codeList??[{...pPe}]).map(e=>Jn(e))),currentCodeIndex:Jn(s.currentCodeIndex??0),dataPreviewType:Jn(s.dataPreviewType??"raw"),result:Jn(s.result??[]),isCodePartReduced:Jn(s.isCodePartReduced??!1),isPreviewPartReduced:Jn(s.isPreviewPartReduced??!1),isConsoleDisplayed:Jn(s.isConsoleDisplayed??!1),consoleHeight:Jn(s.consoleHeight??300),monacoEditor:Jn(void 0),logList:Jn([]),logToSeeCount:Jn(0),isHeaderDisplayed:Jn(!0),isPreviewGenerated:Jn(!1),isPreviewModalOpened:Jn(!1),isGenerateModalOpened:Jn(!1)}},Kn=_Pe(),bPe=Au(()=>({colorScheme:Kn.colorScheme.value,codeList:Kn.codeList.value.map(s=>s.value),currentCodeIndex:Kn.currentCodeIndex.value,dataPreviewType:Kn.dataPreviewType.value,result:Kn.result.value,isCodePartReduced:Kn.isCodePartReduced.value,isPreviewPartReduced:Kn.isPreviewPartReduced.value,isConsoleDisplayed:Kn.isConsoleDisplayed.value,consoleHeight:Kn.consoleHeight.value}));Au(()=>Kn.isAboveMd.value?"md":"sm");const vPe=Au(()=>Kn.isAboveMd.value?"sm":"xs");Au(()=>`compact-${vPe.value}`);ty(()=>localStorage.setItem("globalState",JSON.stringify(bPe.value)));ty(()=>void document.body.classList.toggle("dark",Kn.colorScheme.value==="dark"));const S5e=s=>()=>hPe(()=>{Kn.codeList.value=[...Kn.codeList.value,Jn(s)],Kn.currentCodeIndex.value=Kn.codeList.value.length-1}),k5e=Au(()=>Kn.codeList.value[Kn.currentCodeIndex.value]),L5e=Au(()=>Kn.isHeaderDisplayed.value||Kn.viewportSize.value.height>440);function CPe(s){return new Worker(""+new URL("assets/editor.worker-oRlJJsnX.js",import.meta.url).href,{name:s==null?void 0:s.name})}function wPe(s){return new Worker(""+new URL("assets/ts.worker-Brk6wN3W.js",import.meta.url).href,{name:s==null?void 0:s.name})}const yPe=()=>{self.MonacoEnvironment={getWorker(s,e){switch(e){case"typescript":case"javascript":return wPe();default:return CPe()}}}},SPe=s=>t=>ui(m_,{fallback:!0,children:ui(s,{...t})}),kPe=s=>e=>e[s],LPe=SPe(a3(()=>ye(()=>import("./Home.chunk.js"),[],import.meta.url).then(kPe("HomePage")))),xPe=`declare interface ILocale {
	name: string;
	weekdays?: string[];
	months?: string[];
	weekStart?: number;
	weekdaysShort?: string[];
	monthsShort?: string[];
	weekdaysMin?: string[];
	ordinal?: (n: number) => number | string;
	formats: Partial<{
		LT: string;
		LTS: string;
		L: string;
		LL: string;
		LLL: string;
		LLLL: string;
	}>;
	relativeTime: Partial<{
		future: string;
		past: string;
		s: string;
		m: string;
		mm: string;
		h: string;
		hh: string;
		d: string;
		dd: string;
		M: string;
		MM: string;
		y: string;
		yy: string;
	}>;
}

export default dayjs;

declare function dayjs(date?: dayjs.ConfigType): dayjs.Dayjs;

declare function dayjs(date?: dayjs.ConfigType, format?: dayjs.OptionType, strict?: boolean): dayjs.Dayjs;

declare function dayjs(date?: dayjs.ConfigType, format?: dayjs.OptionType, locale?: string, strict?: boolean): dayjs.Dayjs;

declare namespace dayjs {
	interface ConfigTypeMap {
		default: string | number | Date | Dayjs | null | undefined;
	}

	export type ConfigType = ConfigTypeMap[keyof ConfigTypeMap];

	export interface FormatObject {
		locale?: string;
		format?: string;
		utc?: boolean;
	}

	export type OptionType = FormatObject | string | string[];

	export type UnitTypeShort = "d" | "D" | "M" | "y" | "h" | "m" | "s" | "ms";

	export type UnitTypeLong = "millisecond" | "second" | "minute" | "hour" | "day" | "month" | "year" | "date";

	export type UnitTypeLongPlural = "milliseconds" | "seconds" | "minutes" | "hours" | "days" | "months" | "years" | "dates";

	export type UnitType = UnitTypeLong | UnitTypeLongPlural | UnitTypeShort;

	export type OpUnitType = UnitType | "week" | "weeks" | "w";
	export type QUnitType = UnitType | "quarter" | "quarters" | "Q";
	export type ManipulateType = Exclude<OpUnitType, "date" | "dates">;
	class Dayjs {
		constructor(config?: ConfigType);
		/**
		 * All Day.js objects are immutable. Still, \`dayjs#clone\` can create a clone of the current object if you need one.
		 * \`\`\`
		 * dayjs().clone()// => Dayjs
		 * dayjs(dayjs('2019-01-25')) // passing a Dayjs object to a constructor will also clone it
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/parse/dayjs-clone
		 */
		clone(): Dayjs;
		/**
		 * This returns a \`boolean\` indicating whether the Day.js object contains a valid date or not.
		 * \`\`\`
		 * dayjs().isValid()// => boolean
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/parse/is-valid
		 */
		isValid(): boolean;
		/**
		 * Get the year.
		 * \`\`\`
		 * dayjs().year()// => 2020
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/year
		 */
		year(): number;
		/**
		 * Set the year.
		 * \`\`\`
		 * dayjs().year(2000)// => Dayjs
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/year
		 */
		year(value: number): Dayjs;
		/**
		 * Get the month.
		 *
		 * Months are zero indexed, so January is month 0.
		 * \`\`\`
		 * dayjs().month()// => 0-11
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/month
		 */
		month(): number;
		/**
		 * Set the month.
		 *
		 * Months are zero indexed, so January is month 0.
		 *
		 * Accepts numbers from 0 to 11. If the range is exceeded, it will bubble up to the next year.
		 * \`\`\`
		 * dayjs().month(0)// => Dayjs
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/month
		 */
		month(value: number): Dayjs;
		/**
		 * Get the date of the month.
		 * \`\`\`
		 * dayjs().date()// => 1-31
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/date
		 */
		date(): number;
		/**
		 * Set the date of the month.
		 *
		 * Accepts numbers from 1 to 31. If the range is exceeded, it will bubble up to the next months.
		 * \`\`\`
		 * dayjs().date(1)// => Dayjs
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/date
		 */
		date(value: number): Dayjs;
		/**
		 * Get the day of the week.
		 *
		 * Returns numbers from 0 (Sunday) to 6 (Saturday).
		 * \`\`\`
		 * dayjs().day()// 0-6
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/day
		 */
		day(): 0 | 1 | 2 | 3 | 4 | 5 | 6;
		/**
		 * Set the day of the week.
		 *
		 * Accepts numbers from 0 (Sunday) to 6 (Saturday). If the range is exceeded, it will bubble up to next weeks.
		 * \`\`\`
		 * dayjs().day(0)// => Dayjs
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/day
		 */
		day(value: number): Dayjs;
		/**
		 * Get the hour.
		 * \`\`\`
		 * dayjs().hour()// => 0-23
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/hour
		 */
		hour(): number;
		/**
		 * Set the hour.
		 *
		 * Accepts numbers from 0 to 23. If the range is exceeded, it will bubble up to the next day.
		 * \`\`\`
		 * dayjs().hour(12)// => Dayjs
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/hour
		 */
		hour(value: number): Dayjs;
		/**
		 * Get the minutes.
		 * \`\`\`
		 * dayjs().minute()// => 0-59
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/minute
		 */
		minute(): number;
		/**
		 * Set the minutes.
		 *
		 * Accepts numbers from 0 to 59. If the range is exceeded, it will bubble up to the next hour.
		 * \`\`\`
		 * dayjs().minute(59)// => Dayjs
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/minute
		 */
		minute(value: number): Dayjs;
		/**
		 * Get the seconds.
		 * \`\`\`
		 * dayjs().second()// => 0-59
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/second
		 */
		second(): number;
		/**
		 * Set the seconds.
		 *
		 * Accepts numbers from 0 to 59. If the range is exceeded, it will bubble up to the next minutes.
		 * \`\`\`
		 * dayjs().second(1)// Dayjs
		 * \`\`\`
		 */
		second(value: number): Dayjs;
		/**
		 * Get the milliseconds.
		 * \`\`\`
		 * dayjs().millisecond()// => 0-999
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/millisecond
		 */
		millisecond(): number;
		/**
		 * Set the milliseconds.
		 *
		 * Accepts numbers from 0 to 999. If the range is exceeded, it will bubble up to the next seconds.
		 * \`\`\`
		 * dayjs().millisecond(1)// => Dayjs
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/millisecond
		 */
		millisecond(value: number): Dayjs;
		/**
		 * Generic setter, accepting unit as first argument, and value as second, returns a new instance with the applied changes.
		 *
		 * In general:
		 * \`\`\`
		 * dayjs().set(unit, value) === dayjs()[unit](value)
		 * \`\`\`
		 * Units are case insensitive, and support plural and short forms.
		 * \`\`\`
		 * dayjs().set('date', 1)
		 * dayjs().set('month', 3) // April
		 * dayjs().set('second', 30)
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/set
		 */
		set(unit: UnitType, value: number): Dayjs;
		/**
		 * String getter, returns the corresponding information getting from Day.js object.
		 *
		 * In general:
		 * \`\`\`
		 * dayjs().get(unit) === dayjs()[unit]()
		 * \`\`\`
		 * Units are case insensitive, and support plural and short forms.
		 * \`\`\`
		 * dayjs().get('year')
		 * dayjs().get('month') // start 0
		 * dayjs().get('date')
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/get-set/get
		 */
		get(unit: UnitType): number;
		/**
		 * Returns a cloned Day.js object with a specified amount of time added.
		 * \`\`\`
		 * dayjs().add(7, 'day')// => Dayjs
		 * \`\`\`
		 * Units are case insensitive, and support plural and short forms.
		 *
		 * Docs: https://day.js.org/docs/en/manipulate/add
		 */
		add(value: number, unit?: ManipulateType): Dayjs;
		/**
		 * Returns a cloned Day.js object with a specified amount of time subtracted.
		 * \`\`\`
		 * dayjs().subtract(7, 'year')// => Dayjs
		 * \`\`\`
		 * Units are case insensitive, and support plural and short forms.
		 *
		 * Docs: https://day.js.org/docs/en/manipulate/subtract
		 */
		subtract(value: number, unit?: ManipulateType): Dayjs;
		/**
		 * Returns a cloned Day.js object and set it to the start of a unit of time.
		 * \`\`\`
		 * dayjs().startOf('year')// => Dayjs
		 * \`\`\`
		 * Units are case insensitive, and support plural and short forms.
		 *
		 * Docs: https://day.js.org/docs/en/manipulate/start-of
		 */
		startOf(unit: OpUnitType): Dayjs;
		/**
		 * Returns a cloned Day.js object and set it to the end of a unit of time.
		 * \`\`\`
		 * dayjs().endOf('month')// => Dayjs
		 * \`\`\`
		 * Units are case insensitive, and support plural and short forms.
		 *
		 * Docs: https://day.js.org/docs/en/manipulate/end-of
		 */
		endOf(unit: OpUnitType): Dayjs;
		/**
		 * Get the formatted date according to the string of tokens passed in.
		 *
		 * To escape characters, wrap them in square brackets (e.g. [MM]).
		 * \`\`\`
		 * dayjs().format()// => current date in ISO8601, without fraction seconds e.g. '2020-04-02T08:02:17-05:00'
		 * dayjs('2019-01-25').format('[YYYYescape] YYYY-MM-DDTHH:mm:ssZ[Z]')// 'YYYYescape 2019-01-25T00:00:00-02:00Z'
		 * dayjs('2019-01-25').format('DD/MM/YYYY') // '25/01/2019'
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/display/format
		 */
		format(template?: string): string;
		/**
		 * This indicates the difference between two date-time in the specified unit.
		 *
		 * To get the difference in milliseconds, use \`dayjs#diff\`
		 * \`\`\`
		 * const date1 = dayjs('2019-01-25')
		 * const date2 = dayjs('2018-06-05')
		 * date1.diff(date2) // 20214000000 default milliseconds
		 * date1.diff() // milliseconds to current time
		 * \`\`\`
		 *
		 * To get the difference in another unit of measurement, pass that measurement as the second argument.
		 * \`\`\`
		 * const date1 = dayjs('2019-01-25')
		 * date1.diff('2018-06-05', 'month') // 7
		 * \`\`\`
		 * Units are case insensitive, and support plural and short forms.
		 *
		 * Docs: https://day.js.org/docs/en/display/difference
		 */
		diff(date?: ConfigType, unit?: QUnitType | OpUnitType, float?: boolean): number;
		/**
		 * This returns the number of **milliseconds** since the Unix Epoch of the Day.js object.
		 * \`\`\`
		 * dayjs('2019-01-25').valueOf() // 1548381600000
		 * +dayjs(1548381600000) // 1548381600000
		 * \`\`\`
		 * To get a Unix timestamp (the number of seconds since the epoch) from a Day.js object, you should use Unix Timestamp \`dayjs#unix()\`.
		 *
		 * Docs: https://day.js.org/docs/en/display/unix-timestamp-milliseconds
		 */
		valueOf(): number;
		/**
		 * This returns the Unix timestamp (the number of **seconds** since the Unix Epoch) of the Day.js object.
		 * \`\`\`
		 * dayjs('2019-01-25').unix() // 1548381600
		 * \`\`\`
		 * This value is floored to the nearest second, and does not include a milliseconds component.
		 *
		 * Docs: https://day.js.org/docs/en/display/unix-timestamp
		 */
		unix(): number;
		/**
		 * Get the number of days in the current month.
		 * \`\`\`
		 * dayjs('2019-01-25').daysInMonth() // 31
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/display/days-in-month
		 */
		daysInMonth(): number;
		/**
		 * To get a copy of the native \`Date\` object parsed from the Day.js object use \`dayjs#toDate\`.
		 * \`\`\`
		 * dayjs('2019-01-25').toDate()// => Date
		 * \`\`\`
		 */
		toDate(): Date;
		/**
		 * To serialize as an ISO 8601 string.
		 * \`\`\`
		 * dayjs('2019-01-25').toJSON() // '2019-01-25T02:00:00.000Z'
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/display/as-json
		 */
		toJSON(): string;
		/**
		 * To format as an ISO 8601 string.
		 * \`\`\`
		 * dayjs('2019-01-25').toISOString() // '2019-01-25T02:00:00.000Z'
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/display/as-iso-string
		 */
		toISOString(): string;
		/**
		 * Returns a string representation of the date.
		 * \`\`\`
		 * dayjs('2019-01-25').toString() // 'Fri, 25 Jan 2019 02:00:00 GMT'
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/display/as-string
		 */
		toString(): string;
		/**
		 * Get the UTC offset in minutes.
		 * \`\`\`
		 * dayjs().utcOffset()
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/manipulate/utc-offset
		 */
		utcOffset(): number;
		/**
		 * This indicates whether the Day.js object is before the other supplied date-time.
		 * \`\`\`
		 * dayjs().isBefore(dayjs('2011-01-01')) // default milliseconds
		 * \`\`\`
		 * If you want to limit the granularity to a unit other than milliseconds, pass it as the second parameter.
		 * \`\`\`
		 * dayjs().isBefore('2011-01-01', 'year')// => boolean
		 * \`\`\`
		 * Units are case insensitive, and support plural and short forms.
		 *
		 * Docs: https://day.js.org/docs/en/query/is-before
		 */
		isBefore(date?: ConfigType, unit?: OpUnitType): boolean;
		/**
		 * This indicates whether the Day.js object is the same as the other supplied date-time.
		 * \`\`\`
		 * dayjs().isSame(dayjs('2011-01-01')) // default milliseconds
		 * \`\`\`
		 * If you want to limit the granularity to a unit other than milliseconds, pass it as the second parameter.
		 * \`\`\`
		 * dayjs().isSame('2011-01-01', 'year')// => boolean
		 * \`\`\`
		 * Docs: https://day.js.org/docs/en/query/is-same
		 */
		isSame(date?: ConfigType, unit?: OpUnitType): boolean;
		/**
		 * This indicates whether the Day.js object is after the other supplied date-time.
		 * \`\`\`
		 * dayjs().isAfter(dayjs('2011-01-01')) // default milliseconds
		 * \`\`\`
		 * If you want to limit the granularity to a unit other than milliseconds, pass it as the second parameter.
		 * \`\`\`
		 * dayjs().isAfter('2011-01-01', 'year')// => boolean
		 * \`\`\`
		 * Units are case insensitive, and support plural and short forms.
		 *
		 * Docs: https://day.js.org/docs/en/query/is-after
		 */
		isAfter(date?: ConfigType, unit?: OpUnitType): boolean;

		locale(): string;

		locale(preset: string | ILocale, object?: Partial<ILocale>): Dayjs;
	}

	export type PluginFunc<T = unknown> = (option: T, c: typeof Dayjs, d: typeof dayjs) => void;

	export function extend<T = unknown>(plugin: PluginFunc<T>, option?: T): Dayjs;

	export function locale(preset?: string | ILocale, object?: Partial<ILocale>, isLocal?: boolean): string;

	export function isDayjs(d: any): d is Dayjs;

	export function unix(t: number): Dayjs;

	const Ls: { [key: string]: ILocale };
}
`,DPe=`// Generated by dts-bundle-generator v9.5.1

/**
 * A proxy for LocaleDefinition that marks all properties as required and throws an error when an entry is accessed that is not defined.
 */
export type LocaleProxy = Readonly<{
	[key in keyof LocaleDefinition]-?: LocaleProxyCategory<LocaleDefinition[key]>;
}>;
export type LocaleProxyCategory<T> = Readonly<{
	[key in keyof T]-?: LocaleProxyEntry<T[key]>;
}>;
export type LocaleProxyEntry<T> = unknown extends T ? T : Readonly<NonNullable<T>>;
/**
 * Module to generate animal related entries.
 *
 * ### Overview
 *
 * For a general type of animal (e.g. \`'dog'\`), use [\`type()\`](https://fakerjs.dev/api/animal.html#type).
 *
 * Otherwise, use one of the more specific methods, such as [\`cat()\`](https://fakerjs.dev/api/animal.html#cat) for a specific breed of cat.
 *
 * All values may be localized.
 */
export declare class AnimalModule extends ModuleBase {
	/**
	 * Returns a random dog breed.
	 *
	 * @example
	 * faker.animal.dog() // 'Irish Water Spaniel'
	 *
	 * @since 5.5.0
	 */
	dog(): string;
	/**
	 * Returns a random cat breed.
	 *
	 * @example
	 * faker.animal.cat() // 'Singapura'
	 *
	 * @since 5.5.0
	 */
	cat(): string;
	/**
	 * Returns a random snake species.
	 *
	 * @example
	 * faker.animal.snake() // 'Eyelash viper'
	 *
	 * @since 5.5.0
	 */
	snake(): string;
	/**
	 * Returns a random bear species.
	 *
	 * @example
	 * faker.animal.bear() // 'Asian black bear'
	 *
	 * @since 5.5.0
	 */
	bear(): string;
	/**
	 * Returns a random lion species.
	 *
	 * @example
	 * faker.animal.lion() // 'Northeast Congo Lion'
	 *
	 * @since 5.5.0
	 */
	lion(): string;
	/**
	 * Returns a random cetacean species.
	 *
	 * @example
	 * faker.animal.cetacean() // 'Spinner Dolphin'
	 *
	 * @since 5.5.0
	 */
	cetacean(): string;
	/**
	 * Returns a random horse breed.
	 *
	 * @example
	 * faker.animal.horse() // 'Swedish Warmblood'
	 *
	 * @since 5.5.0
	 */
	horse(): string;
	/**
	 * Returns a random bird species.
	 *
	 * @example
	 * faker.animal.bird() // 'Buller's Shearwater'
	 *
	 * @since 5.5.0
	 */
	bird(): string;
	/**
	 * Returns a random cow species.
	 *
	 * @example
	 * faker.animal.cow() // 'Brava'
	 *
	 * @since 5.5.0
	 */
	cow(): string;
	/**
	 * Returns a random fish species.
	 *
	 * @example
	 * faker.animal.fish() // 'Mandarin fish'
	 *
	 * @since 5.5.0
	 */
	fish(): string;
	/**
	 * Returns a random crocodilian species.
	 *
	 * @example
	 * faker.animal.crocodilia() // 'Philippine Crocodile'
	 *
	 * @since 5.5.0
	 */
	crocodilia(): string;
	/**
	 * Returns a random insect species.
	 *
	 * @example
	 * faker.animal.insect() // 'Pyramid ant'
	 *
	 * @since 5.5.0
	 */
	insect(): string;
	/**
	 * Returns a random rabbit species.
	 *
	 * @example
	 * faker.animal.rabbit() // 'Florida White'
	 *
	 * @since 5.5.0
	 */
	rabbit(): string;
	/**
	 * Returns a random rodent breed.
	 *
	 * @example
	 * faker.animal.rodent() // 'Cuscomys ashanika'
	 *
	 * @since 7.4.0
	 */
	rodent(): string;
	/**
	 * Returns a random animal type.
	 *
	 * @example
	 * faker.animal.type() // 'crocodile'
	 *
	 * @since 5.5.0
	 */
	type(): string;
	/**
	 * Returns a random pet name.
	 *
	 * @example
	 * faker.animal.petName() // 'Coco'
	 *
	 * @since 9.2.0
	 */
	petName(): string;
}
/**
 * Module to generate book related entries.
 *
 * ### Overview
 *
 * - For a random title, use [\`title()\`](https://fakerjs.dev/api/book.html#title).
 * - For a random existing author name, use [\`author()\`](https://fakerjs.dev/api/book.html#author).
 * - For a random non-existing author name, use [\`faker.person.fullName()\`](https://fakerjs.dev/api/person.html#fullname).
 * - For a random genre, use [\`genre()\`](https://fakerjs.dev/api/book.html#genre).
 * - For a random series, use [\`series()\`](https://fakerjs.dev/api/book.html#series).
 * - For a random publisher, use [\`publisher()\`](https://fakerjs.dev/api/book.html#publisher).
 * - For a random book format, use [\`format()\`](https://fakerjs.dev/api/book.html#format).
 * - For a random isbn, use [\`faker.commerce.isbn()\`](https://fakerjs.dev/api/commerce.html#isbn)
 *
 * All values may be localized.
 */
export declare class BookModule extends ModuleBase {
	/**
	 * Returns a random author name.
	 *
	 * @example
	 * faker.book.author() // 'William Shakespeare'
	 *
	 * @since 9.1.0
	 */
	author(): string;
	/**
	 * Returns a random book format.
	 *
	 * @example
	 * faker.book.format() // 'Hardcover'
	 *
	 * @since 9.1.0
	 */
	format(): string;
	/**
	 * Returns a random genre.
	 *
	 * @example
	 * faker.book.genre() // 'Fantasy'
	 *
	 * @since 9.1.0
	 */
	genre(): string;
	/**
	 * Returns a random publisher.
	 *
	 * @example
	 * faker.book.publisher() // 'Addison-Wesley'
	 *
	 * @since 9.1.0
	 */
	publisher(): string;
	/**
	 * Returns a random series.
	 *
	 * @example
	 * faker.book.series() // 'Harry Potter'
	 *
	 * @since 9.1.0
	 */
	series(): string;
	/**
	 * Returns a random title.
	 *
	 * @example
	 * faker.book.title() // 'Romeo and Juliet'
	 *
	 * @since 9.1.0
	 */
	title(): string;
}
/**
 * Color space names supported by CSS.
 */
export declare enum CssSpace {
	SRGB = "sRGB",
	DisplayP3 = "display-p3",
	REC2020 = "rec2020",
	A98RGB = "a98-rgb",
	ProphotoRGB = "prophoto-rgb"
}
/**
 * Color space names supported by CSS.
 */
export type CssSpaceType = \`\${CssSpace}\`;
/**
 * Functions supported by CSS to produce color.
 */
export declare enum CssFunction {
	RGB = "rgb",
	RGBA = "rgba",
	HSL = "hsl",
	HSLA = "hsla",
	HWB = "hwb",
	CMYK = "cmyk",
	LAB = "lab",
	LCH = "lch",
	COLOR = "color"
}
/**
 * Functions supported by CSS to produce color.
 */
export type CssFunctionType = \`\${CssFunction}\`;
export type StringColorFormat = "css" | "binary";
export type NumberColorFormat = "decimal";
export type ColorFormat = StringColorFormat | NumberColorFormat;
export type Casing = "lower" | "upper" | "mixed";
/**
 * Module to generate colors.
 *
 * ### Overview
 *
 * For a human-readable color like \`'red'\`, use [\`human()\`](https://fakerjs.dev/api/color.html#human).
 *
 * For a hex color like \`#ff0000\` used in HTML/CSS, use [\`rgb()\`](https://fakerjs.dev/api/color.html#rgb). There are also methods for other color formats such as [\`hsl()\`](https://fakerjs.dev/api/color.html#hsl), [\`cmyk()\`](https://fakerjs.dev/api/color.html#cmyk), [\`hwb()\`](https://fakerjs.dev/api/color.html#hwb), [\`lab()\`](https://fakerjs.dev/api/color.html#lab), and [\`lch()\`](https://fakerjs.dev/api/color.html#lch).
 */
export declare class ColorModule extends ModuleBase {
	/**
	 * Returns a random human-readable color name.
	 *
	 * @example
	 * faker.color.human() // 'red'
	 *
	 * @since 7.0.0
	 */
	human(): string;
	/**
	 * Returns a random color space name from the worldwide accepted color spaces.
	 * Source: https://en.wikipedia.org/wiki/List_of_color_spaces_and_their_uses
	 *
	 * @example
	 * faker.color.space() // 'sRGB'
	 *
	 * @since 7.0.0
	 */
	space(): string;
	/**
	 * Returns a random css supported color function name.
	 *
	 * @example
	 * faker.color.cssSupportedFunction() // 'rgb'
	 *
	 * @since 7.0.0
	 */
	cssSupportedFunction(): CssFunctionType;
	/**
	 * Returns a random css supported color space name.
	 *
	 * @example
	 * faker.color.cssSupportedSpace() // 'display-p3'
	 *
	 * @since 7.0.0
	 */
	cssSupportedSpace(): CssSpaceType;
	/**
	 * Returns an RGB color.
	 *
	 * @example
	 * faker.color.rgb() // '#8be4ab'
	 *
	 * @since 7.0.0
	 */
	rgb(): string;
	/**
	 * Returns an RGB color.
	 *
	 * @param options Options object.
	 * @param options.prefix Prefix of the generated hex color. Only applied when 'hex' format is used. Defaults to \`'#'\`.
	 * @param options.casing Letter type case of the generated hex color. Only applied when \`'hex'\` format is used. Defaults to \`'lower'\`.
	 * @param options.format Format of generated RGB color. Defaults to \`hex\`.
	 * @param options.includeAlpha Adds an alpha value to the color (RGBA). Defaults to \`false\`.
	 *
	 * @example
	 * faker.color.rgb() // '#0d7f26'
	 * faker.color.rgb({ prefix: '0x' }) // '0x9ddc8b'
	 * faker.color.rgb({ casing: 'upper' }) // '#B8A51E'
	 * faker.color.rgb({ casing: 'lower' }) // '#b12f8b'
	 * faker.color.rgb({ prefix: '#', casing: 'lower' }) // '#eb0c16'
	 * faker.color.rgb({ format: 'hex', casing: 'lower' }) // '#bb9d17'
	 * faker.color.rgb({ format: 'css' }) // 'rgb(216, 17, 192)'
	 * faker.color.rgb({ format: 'binary' }) // '00110010 00001000 01110110'
	 * faker.color.rgb({ includeAlpha: true }) // '#f96efb5e'
	 * faker.color.rgb({ format: 'css', includeAlpha: true }) // 'rgba(180, 158, 24, 0.75)'
	 *
	 * @since 7.0.0
	 */
	rgb(options?: {
		/**
		 * Prefix of the generated hex color. Only applied when 'hex' format is used.
		 *
		 * @default '#'
		 */
		prefix?: string;
		/**
		 * Letter type case of the generated hex color. Only applied when \`'hex'\` format is used.
		 *
		 * @default 'lower'
		 */
		casing?: Casing;
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'hex'
		 */
		format?: "hex" | StringColorFormat;
		/**
		 * Adds an alpha value to the color (RGBA).
		 *
		 * @default false
		 */
		includeAlpha?: boolean;
	}): string;
	/**
	 * Returns an RGB color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'hex'\`.
	 * @param options.includeAlpha Adds an alpha value to the color (RGBA). Defaults to \`false\`.
	 *
	 * @example
	 * faker.color.rgb() // '0x8be4ab'
	 * faker.color.rgb({ format: 'decimal' }) // [64, 192,174]
	 * faker.color.rgb({ format: 'decimal', includeAlpha: true }) // [52, 250, 209, 0.21]
	 *
	 * @since 7.0.0
	 */
	rgb(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'hex'
		 */
		format?: NumberColorFormat;
		/**
		 * Adds an alpha value to the color (RGBA).
		 *
		 * @default false
		 */
		includeAlpha?: boolean;
	}): number[];
	/**
	 * Returns an RGB color.
	 *
	 * @param options Options object.
	 * @param options.prefix Prefix of the generated hex color. Only applied when \`'hex'\` format is used. Defaults to \`'#'\`.
	 * @param options.casing Letter type case of the generated hex color. Only applied when \`'hex'\` format is used. Defaults to \`'lower'\`.
	 * @param options.format Format of generated RGB color. Defaults to \`'hex'\`.
	 * @param options.includeAlpha Adds an alpha value to the color (RGBA). Defaults to \`false\`.
	 *
	 * @example
	 * faker.color.rgb() // '#0d7f26'
	 * faker.color.rgb({ prefix: '0x' }) // '0x9ddc8b'
	 * faker.color.rgb({ casing: 'upper' }) // '#B8A51E'
	 * faker.color.rgb({ casing: 'lower' }) // '#b12f8b'
	 * faker.color.rgb({ prefix: '#', casing: 'lower' }) // '#eb0c16'
	 * faker.color.rgb({ format: 'hex', casing: 'lower' }) // '#bb9d17'
	 * faker.color.rgb({ format: 'decimal' }) // [64, 192,174]
	 * faker.color.rgb({ format: 'css' }) // 'rgb(216, 17, 192)'
	 * faker.color.rgb({ format: 'binary' }) // '00110010 00001000 01110110'
	 * faker.color.rgb({ includeAlpha: true }) // '#f96efb5e'
	 * faker.color.rgb({ format: 'css', includeAlpha: true }) // 'rgba(180, 158, 24, 0.75)'
	 * faker.color.rgb({ format: 'decimal', includeAlpha: true }) // [52, 250, 209, 0.21]
	 *
	 * @since 7.0.0
	 */
	rgb(options?: {
		/**
		 * Prefix of the generated hex color. Only applied when \`'hex'\` format is used.
		 *
		 * @default '#'
		 */
		prefix?: string;
		/**
		 * Letter type case of the generated hex color. Only applied when \`'hex'\` format is used.
		 *
		 * @default 'lower'
		 */
		casing?: Casing;
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'hex'
		 */
		format?: "hex" | ColorFormat;
		/**
		 * Adds an alpha value to the color (RGBA).
		 *
		 * @default false
		 */
		includeAlpha?: boolean;
	}): string | number[];
	/**
	 * Returns a CMYK color.
	 *
	 * @example
	 * faker.color.cmyk() // [0.31, 0.52, 0.32, 0.43]
	 *
	 * @since 7.0.0
	 */
	cmyk(): number[];
	/**
	 * Returns a CMYK color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated CMYK color. Defaults to \`'decimal'\`.
	 *
	 * @example
	 * faker.color.cmyk() // [0.31, 0.52, 0.32, 0.43]
	 * faker.color.cmyk({ format: 'css' }) // cmyk(100%, 0%, 0%, 0%)
	 * faker.color.cmyk({ format: 'binary' }) // (8-32 bits) x 4
	 *
	 * @since 7.0.0
	 */
	cmyk(options?: {
		/**
		 * Format of generated CMYK color.
		 *
		 * @default 'decimal'
		 */
		format?: StringColorFormat;
	}): string;
	/**
	 * Returns a CMYK color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated CMYK color. Defaults to \`'decimal'\`.
	 *
	 * @example
	 * faker.color.cmyk() // [0.31, 0.52, 0.32, 0.43]
	 * faker.color.cmyk({ format: 'decimal' }) // [0.31, 0.52, 0.32, 0.43]
	 *
	 * @since 7.0.0
	 */
	cmyk(options?: {
		/**
		 * Format of generated CMYK color.
		 *
		 * @default 'decimal'
		 */
		format?: NumberColorFormat;
	}): number[];
	/**
	 * Returns a CMYK color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated CMYK color. Defaults to \`'decimal'\`.
	 *
	 * @example
	 * faker.color.cmyk() // [0.31, 0.52, 0.32, 0.43]
	 * faker.color.cmyk({ format: 'decimal' }) // [0.31, 0.52, 0.32, 0.43]
	 * faker.color.cmyk({ format: 'css' }) // cmyk(100%, 0%, 0%, 0%)
	 * faker.color.cmyk({ format: 'binary' }) // (8-32 bits) x 4
	 *
	 * @since 7.0.0
	 */
	cmyk(options?: {
		/**
		 * Format of generated CMYK color.
		 *
		 * @default 'decimal'
		 */
		format?: ColorFormat;
	}): string | number[];
	/**
	 * Returns an HSL color.
	 *
	 * @example
	 * faker.color.hsl() // [201, 0.23, 0.32]
	 *
	 * @since 7.0.0
	 */
	hsl(): number[];
	/**
	 * Returns an HSL color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated HSL color. Defaults to \`'decimal'\`.
	 * @param options.includeAlpha Adds an alpha value to the color (RGBA). Defaults to \`false\`.
	 *
	 * @example
	 * faker.color.hsl() // [201, 0.23, 0.32]
	 * faker.color.hsl({ format: 'css' }) // hsl(0deg, 100%, 80%)
	 * faker.color.hsl({ format: 'css', includeAlpha: true }) // hsl(0deg 100% 50% / 0.5)
	 * faker.color.hsl({ format: 'binary' }) // (8-32 bits) x 3
	 * faker.color.hsl({ format: 'binary', includeAlpha: true }) // (8-32 bits) x 4
	 *
	 * @since 7.0.0
	 */
	hsl(options?: {
		/**
		 * Format of generated HSL color.
		 *
		 * @default 'decimal'
		 */
		format?: StringColorFormat;
		/**
		 * Adds an alpha value to the color (RGBA).
		 *
		 * @default false
		 */
		includeAlpha?: boolean;
	}): string;
	/**
	 * Returns an HSL color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated HSL color. Defaults to \`'decimal'\`.
	 * @param options.includeAlpha Adds an alpha value to the color (RGBA). Defaults to \`false\`.
	 *
	 * @example
	 * faker.color.hsl() // [201, 0.23, 0.32]
	 * faker.color.hsl({ format: 'decimal' }) // [300, 0.21, 0.52]
	 * faker.color.hsl({ format: 'decimal', includeAlpha: true }) // [300, 0.21, 0.52, 0.28]
	 *
	 * @since 7.0.0
	 */
	hsl(options?: {
		/**
		 * Format of generated HSL color.
		 *
		 * @default 'decimal'
		 */
		format?: NumberColorFormat;
		/**
		 * Adds an alpha value to the color (RGBA).
		 *
		 * @default false
		 */
		includeAlpha?: boolean;
	}): number[];
	/**
	 * Returns an HSL color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated HSL color. Defaults to \`'decimal'\`.
	 * @param options.includeAlpha Adds an alpha value to the color (RGBA). Defaults to \`false\`.
	 *
	 * @example
	 * faker.color.hsl() // [201, 0.23, 0.32]
	 * faker.color.hsl({ format: 'decimal' }) // [300, 0.21, 0.52]
	 * faker.color.hsl({ format: 'decimal', includeAlpha: true }) // [300, 0.21, 0.52, 0.28]
	 * faker.color.hsl({ format: 'css' }) // hsl(0deg, 100%, 80%)
	 * faker.color.hsl({ format: 'css', includeAlpha: true }) // hsl(0deg 100% 50% / 0.5)
	 * faker.color.hsl({ format: 'binary' }) // (8-32 bits) x 3
	 * faker.color.hsl({ format: 'binary', includeAlpha: true }) // (8-32 bits) x 4
	 *
	 * @since 7.0.0
	 */
	hsl(options?: {
		/**
		 * Format of generated HSL color.
		 *
		 * @default 'decimal'
		 */
		format?: ColorFormat;
		/**
		 * Adds an alpha value to the color (RGBA).
		 *
		 * @default false
		 */
		includeAlpha?: boolean;
	}): string | number[];
	/**
	 * Returns an HWB color.
	 *
	 * @example
	 * faker.color.hwb() // [201, 0.21, 0.31]
	 *
	 * @since 7.0.0
	 */
	hwb(): number[];
	/**
	 * Returns an HWB color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'decimal'\`.
	 *
	 * @example
	 * faker.color.hwb() // [201, 0.21, 0.31]
	 * faker.color.hwb({ format: 'css' }) // hwb(194 0% 0%)
	 * faker.color.hwb({ format: 'binary' }) // (8-32 bits x 3)
	 *
	 * @since 7.0.0
	 */
	hwb(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'decimal'
		 */
		format?: StringColorFormat;
	}): string;
	/**
	 * Returns an HWB color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'decimal'\`.
	 *
	 * @example
	 * faker.color.hwb() // [201, 0.21, 0.31]
	 * faker.color.hwb({ format: 'decimal' }) // [201, 0.21, 0.31]
	 *
	 * @since 7.0.0
	 */
	hwb(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'decimal'
		 */
		format?: NumberColorFormat;
	}): number[];
	/**
	 * Returns an HWB color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'decimal'\`.
	 *
	 * @example
	 * faker.color.hwb() // [201, 0.21, 0.31]
	 * faker.color.hwb({ format: 'decimal' }) // [201, 0.21, 0.31]
	 * faker.color.hwb({ format: 'css' }) // hwb(194 0% 0%)
	 * faker.color.hwb({ format: 'binary' }) // (8-32 bits x 3)
	 *
	 * @since 7.0.0
	 */
	hwb(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'decimal'
		 */
		format?: ColorFormat;
	}): string | number[];
	/**
	 * Returns a LAB (CIELAB) color.
	 *
	 * @example
	 * faker.color.lab() // [0.832133, -80.3245, 100.1234]
	 *
	 * @since 7.0.0
	 */
	lab(): number[];
	/**
	 * Returns a LAB (CIELAB) color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'decimal'\`.
	 *
	 * @example
	 * faker.color.lab() // [0.832133, -80.3245, 100.1234]
	 * faker.color.lab({ format: 'css' }) // lab(29.2345% 39.3825 20.0664)
	 * faker.color.lab({ format: 'binary' }) // (8-32 bits x 3)
	 *
	 * @since 7.0.0
	 */
	lab(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'decimal'
		 */
		format?: StringColorFormat;
	}): string;
	/**
	 * Returns a LAB (CIELAB) color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'decimal'\`.
	 *
	 * @example
	 * faker.color.lab() // [0.832133, -80.3245, 100.1234]
	 * faker.color.lab({ format: 'decimal' }) // [0.856773, -80.2345, 100.2341]
	 *
	 * @since 7.0.0
	 */
	lab(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'decimal'
		 */
		format?: NumberColorFormat;
	}): number[];
	/**
	 * Returns a LAB (CIELAB) color.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'decimal'\`.
	 *
	 * @example
	 * faker.color.lab() // [0.832133, -80.3245, 100.1234]
	 * faker.color.lab({ format: 'decimal' }) // [0.856773, -80.2345, 100.2341]
	 * faker.color.lab({ format: 'css' }) // lab(29.2345% 39.3825 20.0664)
	 * faker.color.lab({ format: 'binary' }) // (8-32 bits x 3)
	 *
	 * @since 7.0.0
	 */
	lab(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'decimal'
		 */
		format?: ColorFormat;
	}): string | number[];
	/**
	 * Returns an LCH color. Even though upper bound of
	 * chroma in LCH color space is theoretically unbounded,
	 * it is bounded to 230 as anything above will not
	 * make a noticeable difference in the browser.
	 *
	 * @example
	 * faker.color.lch() // [0.522345, 72.2, 56.2]
	 *
	 * @since 7.0.0
	 */
	lch(): number[];
	/**
	 * Returns an LCH color. Even though upper bound of
	 * chroma in LCH color space is theoretically unbounded,
	 * it is bounded to 230 as anything above will not
	 * make a noticeable difference in the browser.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'decimal'\`.
	 *
	 * @example
	 * faker.color.lch() // [0.522345, 72.2, 56.2]
	 * faker.color.lch({ format: 'css' }) // lch(52.2345% 72.2 56.2)
	 * faker.color.lch({ format: 'binary' }) // (8-32 bits x 3)
	 *
	 * @since 7.0.0
	 */
	lch(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'decimal'
		 */
		format?: StringColorFormat;
	}): string;
	/**
	 * Returns an LCH color. Even though upper bound of
	 * chroma in LCH color space is theoretically unbounded,
	 * it is bounded to 230 as anything above will not
	 * make a noticeable difference in the browser.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'decimal'\`.
	 *
	 * @example
	 * faker.color.lch() // [0.522345, 72.2, 56.2]
	 * faker.color.lch({ format: 'decimal' }) // [0.522345, 72.2, 56.2]
	 *
	 * @since 7.0.0
	 */
	lch(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'decimal'
		 */
		format?: NumberColorFormat;
	}): number[];
	/**
	 * Returns an LCH color. Even though upper bound of
	 * chroma in LCH color space is theoretically unbounded,
	 * it is bounded to 230 as anything above will not
	 * make a noticeable difference in the browser.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'decimal'\`.
	 *
	 * @example
	 * faker.color.lch() // [0.522345, 72.2, 56.2]
	 * faker.color.lch({ format: 'decimal' }) // [0.522345, 72.2, 56.2]
	 * faker.color.lch({ format: 'css' }) // lch(52.2345% 72.2 56.2)
	 * faker.color.lch({ format: 'binary' }) // (8-32 bits x 3)
	 *
	 * @since 7.0.0
	 */
	lch(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'decimal'
		 */
		format?: ColorFormat;
	}): string | number[];
	/**
	 * Returns a random color based on CSS color space specified.
	 *
	 * @example
	 * faker.color.colorByCSSColorSpace() // [0.93, 1, 0.82]
	 *
	 * @since 7.0.0
	 */
	colorByCSSColorSpace(): number[];
	/**
	 * Returns a random color based on CSS color space specified.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'decimal'\`.
	 * @param options.space Color space to generate the color for. Defaults to \`'sRGB'\`.
	 *
	 * @example
	 * faker.color.colorByCSSColorSpace() // [0.93, 1, 0.82]
	 * faker.color.colorByCSSColorSpace({ format: 'css', space: 'display-p3' }) // color(display-p3 0.12 1 0.23)
	 * faker.color.colorByCSSColorSpace({ format: 'binary' }) // (8-32 bits x 3)
	 *
	 * @since 7.0.0
	 */
	colorByCSSColorSpace(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'decimal'
		 */
		format?: StringColorFormat;
		/**
		 * Color space to generate the color for.
		 *
		 * @default 'sRGB'
		 */
		space?: CssSpaceType;
	}): string;
	/**
	 * Returns a random color based on CSS color space specified.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'decimal'\`.
	 * @param options.space Color space to generate the color for. Defaults to \`'sRGB'\`.
	 *
	 * @example
	 * faker.color.colorByCSSColorSpace() // [0.93, 1, 0.82]
	 * faker.color.colorByCSSColorSpace({ format: 'decimal' }) // [0.12, 0.21, 0.31]
	 *
	 * @since 7.0.0
	 */
	colorByCSSColorSpace(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'decimal'
		 */
		format?: NumberColorFormat;
		/**
		 * Color space to generate the color for.
		 *
		 * @default 'sRGB'
		 */
		space?: CssSpaceType;
	}): number[];
	/**
	 * Returns a random color based on CSS color space specified.
	 *
	 * @param options Options object.
	 * @param options.format Format of generated RGB color. Defaults to \`'decimal'\`.
	 * @param options.space Color space to generate the color for. Defaults to \`'sRGB'\`.
	 *
	 * @example
	 * faker.color.colorByCSSColorSpace() // [0.93, 1, 0.82]
	 * faker.color.colorByCSSColorSpace({ format: 'decimal' }) // [0.12, 0.21, 0.31]
	 * faker.color.colorByCSSColorSpace({ format: 'css', space: 'display-p3' }) // color(display-p3 0.12 1 0.23)
	 * faker.color.colorByCSSColorSpace({ format: 'binary' }) // (8-32 bits x 3)
	 *
	 * @since 7.0.0
	 */
	colorByCSSColorSpace(options?: {
		/**
		 * Format of generated RGB color.
		 *
		 * @default 'decimal'
		 */
		format?: ColorFormat;
		/**
		 * Color space to generate the color for.
		 *
		 * @default 'sRGB'
		 */
		space?: CssSpaceType;
	}): string | number[];
}
/**
 * Module to generate commerce and product related entries.
 *
 * ### Overview
 *
 * For a long product name like \`'Incredible Soft Gloves'\`, use [\`productName()\`](https://fakerjs.dev/api/commerce.html#productname). The product names are generated from a list of adjectives, materials, and products, which can each be accessed separately using [\`productAdjective()\`](https://fakerjs.dev/api/commerce.html#productadjective), [\`productMaterial()\`](https://fakerjs.dev/api/commerce.html#productmaterial), and [\`product()\`](https://fakerjs.dev/api/commerce.html#product). You can also create a description using [\`productDescription()\`](https://fakerjs.dev/api/commerce.html#productdescription).
 *
 * For a department in a shop or product category, use [\`department()\`](https://fakerjs.dev/api/commerce.html#department).
 *
 * You can also create a price using [\`price()\`](https://fakerjs.dev/api/commerce.html#price).
 */
export declare class CommerceModule extends ModuleBase {
	/**
	 * Returns a department inside a shop.
	 *
	 * @example
	 * faker.commerce.department() // 'Garden'
	 *
	 * @since 3.0.0
	 */
	department(): string;
	/**
	 * Generates a random descriptive product name.
	 *
	 * @example
	 * faker.commerce.productName() // 'Incredible Soft Gloves'
	 *
	 * @since 3.0.0
	 */
	productName(): string;
	/**
	 * Generates a price between min and max (inclusive).
	 *
	 * To better represent real-world prices, when \`options.dec\` is greater than \`0\`, the final decimal digit in the returned string will be generated as follows:
	 *
	 * - 50% of the time: \`9\`
	 * - 30% of the time: \`5\`
	 * - 10% of the time: \`0\`
	 * - 10% of the time: a random digit from \`0\` to \`9\`
	 *
	 * @param options An options object.
	 * @param options.min The minimum price. Defaults to \`1\`.
	 * @param options.max The maximum price. Defaults to \`1000\`.
	 * @param options.dec The number of decimal places. Defaults to \`2\`.
	 * @param options.symbol The currency value to use. Defaults to \`''\`.
	 *
	 * @example
	 * faker.commerce.price() // 828.07
	 * faker.commerce.price({ min: 100 }) // 904.19
	 * faker.commerce.price({ min: 100, max: 200 }) // 154.55
	 * faker.commerce.price({ min: 100, max: 200, dec: 0 }) // 133
	 * faker.commerce.price({ min: 100, max: 200, dec: 0, symbol: '$' }) // $114
	 *
	 * @since 3.0.0
	 */
	price(options?: {
		/**
		 * The minimum price.
		 *
		 * @default 1
		 */
		min?: number;
		/**
		 * The maximum price.
		 *
		 * @default 1000
		 */
		max?: number;
		/**
		 * The number of decimal places.
		 *
		 * @default 2
		 */
		dec?: number;
		/**
		 * The currency value to use.
		 *
		 * @default ''
		 */
		symbol?: string;
	}): string;
	/**
	 * Returns an adjective describing a product.
	 *
	 * @example
	 * faker.commerce.productAdjective() // 'Handcrafted'
	 *
	 * @since 3.0.0
	 */
	productAdjective(): string;
	/**
	 * Returns a material of a product.
	 *
	 * @example
	 * faker.commerce.productMaterial() // 'Rubber'
	 *
	 * @since 3.0.0
	 */
	productMaterial(): string;
	/**
	 * Returns a short product name.
	 *
	 * @example
	 * faker.commerce.product() // 'Computer'
	 *
	 * @since 3.0.0
	 */
	product(): string;
	/**
	 * Returns a product description.
	 *
	 * @example
	 * faker.commerce.productDescription() // 'Featuring Phosphorus-enhanced technology, our Fish offers unparalleled Modern performance'
	 *
	 * @since 5.0.0
	 */
	productDescription(): string;
	/**
	 * Returns a random [ISBN](https://en.wikipedia.org/wiki/ISBN) identifier.
	 *
	 * @param options The variant to return or an options object.
	 * @param options.variant The variant to return. Can be either \`10\` (10-digit format)
	 * or \`13\` (13-digit format). Defaults to \`13\`.
	 * @param options.separator The separator to use in the format. Defaults to \`'-'\`.
	 *
	 * @example
	 * faker.commerce.isbn() // '978-0-692-82459-7'
	 * faker.commerce.isbn(10) // '1-155-36404-X'
	 * faker.commerce.isbn(13) // '978-1-60808-867-6'
	 * faker.commerce.isbn({ separator: ' ' }) // '978 0 452 81498 1'
	 * faker.commerce.isbn({ variant: 10, separator: ' ' }) // '0 940319 49 7'
	 * faker.commerce.isbn({ variant: 13, separator: ' ' }) // '978 1 6618 9122 0'
	 *
	 * @since 8.1.0
	 */
	isbn(options?: 10 | 13 | {
		/**
		 * The variant of the identifier to return.
		 * Can be either \`10\` (10-digit format)
		 * or \`13\` (13-digit format).
		 *
		 * @default 13
		 */
		variant?: 10 | 13;
		/**
		 * The separator to use in the format.
		 *
		 * @default '-'
		 */
		separator?: string;
	}): string;
}
/**
 * Module to generate company related entries.
 *
 * ### Overview
 *
 * To generate a random company name, use [\`name()\`](https://fakerjs.dev/api/company.html#name). This is localized in many locales.
 *
 * To generate jargon-filled company catchphrases and buzzwords, use [\`catchPhrase()\`](https://fakerjs.dev/api/company.html#catchphrase) or [\`buzzPhrase()\`](https://fakerjs.dev/api/company.html#buzzphrase).
 *
 * ### Related Modules
 *
 * - For products and commerce, use [\`faker.commerce\`](https://fakerjs.dev/api/commerce.html).
 * - For finance-related entries, use [\`faker.finance\`](https://fakerjs.dev/api/finance.html).
 */
export declare class CompanyModule extends ModuleBase {
	/**
	 * Generates a random company name.
	 *
	 * @example
	 * faker.company.name() // 'Zieme, Hauck and McClure'
	 *
	 * @since 7.4.0
	 */
	name(): string;
	/**
	 * Generates a random catch phrase that can be displayed to an end user.
	 *
	 * @example
	 * faker.company.catchPhrase() // 'Upgradable systematic flexibility'
	 *
	 * @since 2.0.1
	 */
	catchPhrase(): string;
	/**
	 * Generates a random buzz phrase that can be used to demonstrate data being viewed by a manager.
	 *
	 * @example
	 * faker.company.buzzPhrase() // 'cultivate synergistic e-markets'
	 *
	 * @since 8.0.0
	 */
	buzzPhrase(): string;
	/**
	 * Returns a random catch phrase adjective that can be displayed to an end user..
	 *
	 * @example
	 * faker.company.catchPhraseAdjective() // 'Multi-tiered'
	 *
	 * @since 2.0.1
	 */
	catchPhraseAdjective(): string;
	/**
	 * Returns a random catch phrase descriptor that can be displayed to an end user..
	 *
	 * @example
	 * faker.company.catchPhraseDescriptor() // 'composite'
	 *
	 * @since 2.0.1
	 */
	catchPhraseDescriptor(): string;
	/**
	 * Returns a random catch phrase noun that can be displayed to an end user..
	 *
	 * @example
	 * faker.company.catchPhraseNoun() // 'leverage'
	 *
	 * @since 2.0.1
	 */
	catchPhraseNoun(): string;
	/**
	 * Returns a random buzz adjective that can be used to demonstrate data being viewed by a manager.
	 *
	 * @example
	 * faker.company.buzzAdjective() // 'one-to-one'
	 *
	 * @since 8.0.0
	 */
	buzzAdjective(): string;
	/**
	 * Returns a random buzz verb that can be used to demonstrate data being viewed by a manager.
	 *
	 * @example
	 * faker.company.buzzVerb() // 'empower'
	 *
	 * @since 8.0.0
	 */
	buzzVerb(): string;
	/**
	 * Returns a random buzz noun that can be used to demonstrate data being viewed by a manager.
	 *
	 * @example
	 * faker.company.buzzNoun() // 'paradigms'
	 *
	 * @since 8.0.0
	 */
	buzzNoun(): string;
}
/**
 * Module to generate database related entries.
 *
 * ### Overview
 *
 * Traditional relational database tables have data organized in columns with specific types - [\`column()\`](https://fakerjs.dev/api/database.html#column), [\`type()\`](https://fakerjs.dev/api/database.html#type). The database usually has an [\`engine()\`](https://fakerjs.dev/api/database.html#engine) and a default [\`collation()\`](https://fakerjs.dev/api/database.html#collation) for sorting.
 *
 * For the NoSQL database MongoDB, [\`mongodbObjectId()\`](https://fakerjs.dev/api/database.html#mongodbobjectid) provides a random ID.
 */
export declare class DatabaseModule extends ModuleBase {
	/**
	 * Returns a random database column name.
	 *
	 * @example
	 * faker.database.column() // 'createdAt'
	 *
	 * @since 4.0.0
	 */
	column(): string;
	/**
	 * Returns a random database column type.
	 *
	 * @example
	 * faker.database.type() // 'timestamp'
	 *
	 * @since 4.0.0
	 */
	type(): string;
	/**
	 * Returns a random database collation.
	 *
	 * @example
	 * faker.database.collation() // 'utf8_unicode_ci'
	 *
	 * @since 4.0.0
	 */
	collation(): string;
	/**
	 * Returns a random database engine.
	 *
	 * @example
	 * faker.database.engine() // 'ARCHIVE'
	 *
	 * @since 4.0.0
	 */
	engine(): string;
	/**
	 * Returns a MongoDB [ObjectId](https://docs.mongodb.com/manual/reference/method/ObjectId/) string.
	 *
	 * @example
	 * faker.database.mongodbObjectId() // 'e175cac316a79afdd0ad3afb'
	 *
	 * @since 6.2.0
	 */
	mongodbObjectId(): string;
}
/**
 * Module to generate dates (without methods requiring localized data).
 */
export declare class SimpleDateModule extends SimpleModuleBase {
	/**
	 * Generates a random date that can be either in the past or in the future.
	 *
	 * @param options The optional options object.
	 * @param options.refDate The date to use as reference point for the newly generated date. Defaults to \`faker.defaultRefDate()\`.
	 *
	 * @see faker.date.between(): For generating dates in a specific range.
	 * @see faker.date.past(): For generating dates explicitly in the past.
	 * @see faker.date.future(): For generating dates explicitly in the future.
	 *
	 * @example
	 * faker.date.anytime() // '2022-07-31T01:33:29.567Z'
	 *
	 * @since 8.0.0
	 */
	anytime(options?: {
		/**
		 * The date to use as reference point for the newly generated date.
		 *
		 * @default faker.defaultRefDate()
		 */
		refDate?: string | Date | number;
	}): Date;
	/**
	 * Generates a random date in the past.
	 *
	 * @param options The optional options object.
	 * @param options.years The range of years the date may be in the past. Defaults to \`1\`.
	 * @param options.refDate The date to use as reference point for the newly generated date. Defaults to \`faker.defaultRefDate()\`.
	 *
	 * @see faker.date.recent(): For generating dates in the recent past (days instead of years).
	 *
	 * @example
	 * faker.date.past() // '2021-12-03T05:40:44.408Z'
	 * faker.date.past({ years: 10 }) // '2017-10-25T21:34:19.488Z'
	 * faker.date.past({ years: 10, refDate: '2020-01-01T00:00:00.000Z' }) // '2017-08-18T02:59:12.350Z'
	 *
	 * @since 8.0.0
	 */
	past(options?: {
		/**
		 * The range of years the date may be in the past.
		 *
		 * @default 1
		 */
		years?: number;
		/**
		 * The date to use as reference point for the newly generated date.
		 *
		 * @default faker.defaultRefDate()
		 */
		refDate?: string | Date | number;
	}): Date;
	/**
	 * Generates a random date in the future.
	 *
	 * @param options The optional options object.
	 * @param options.years The range of years the date may be in the future. Defaults to \`1\`.
	 * @param options.refDate The date to use as reference point for the newly generated date. Defaults to \`faker.defaultRefDate()\`.
	 *
	 * @see faker.date.soon(): For generating dates in the near future (days instead of years).
	 *
	 * @example
	 * faker.date.future() // '2022-11-19T05:52:49.100Z'
	 * faker.date.future({ years: 10 }) // '2030-11-23T09:38:28.710Z'
	 * faker.date.future({ years: 10, refDate: '2020-01-01T00:00:00.000Z' }) // '2020-12-13T22:45:10.252Z'
	 *
	 * @since 8.0.0
	 */
	future(options?: {
		/**
		 * The range of years the date may be in the future.
		 *
		 * @default 1
		 */
		years?: number;
		/**
		 * The date to use as reference point for the newly generated date.
		 *
		 * @default faker.defaultRefDate()
		 */
		refDate?: string | Date | number;
	}): Date;
	/**
	 * Generates a random date between the given boundaries.
	 *
	 * @param options The options object.
	 * @param options.from The early date boundary.
	 * @param options.to The late date boundary.
	 *
	 * @throws If \`from\` or \`to\` are not provided.
	 * @throws If \`from\` is after \`to\`.
	 *
	 * @example
	 * faker.date.between({ from: '2020-01-01T00:00:00.000Z', to: '2030-01-01T00:00:00.000Z' }) // '2026-05-16T02:22:53.002Z'
	 *
	 * @since 8.0.0
	 */
	between(options: {
		/**
		 * The early date boundary.
		 */
		from: string | Date | number;
		/**
		 * The late date boundary.
		 */
		to: string | Date | number;
	}): Date;
	/**
	 * Generates random dates between the given boundaries. The dates will be returned in an array sorted in chronological order.
	 *
	 * @param options The options object.
	 * @param options.from The early date boundary.
	 * @param options.to The late date boundary.
	 * @param options.count The number of dates to generate. Defaults to \`3\`.
	 *
	 * @throws If \`from\` or \`to\` are not provided.
	 * @throws If \`from\` is after \`to\`.
	 *
	 * @example
	 * faker.date.betweens({ from: '2020-01-01T00:00:00.000Z', to: '2030-01-01T00:00:00.000Z' })
	 * // [
	 * //   2022-07-02T06:00:00.000Z,
	 * //   2024-12-31T12:00:00.000Z,
	 * //   2027-07-02T18:00:00.000Z
	 * // ]
	 * faker.date.betweens({ from: '2020-01-01T00:00:00.000Z', to: '2030-01-01T00:00:00.000Z', count: 2 })
	 * // [ 2023-05-02T16:00:00.000Z, 2026-09-01T08:00:00.000Z ]
	 * faker.date.betweens({ from: '2020-01-01T00:00:00.000Z', to: '2030-01-01T00:00:00.000Z', count: { min: 2, max: 5 }})
	 * // [
	 * //   2021-12-19T06:35:40.191Z,
	 * //   2022-09-10T08:03:51.351Z,
	 * //   2023-04-19T11:41:17.501Z
	 * // ]
	 *
	 * @since 8.0.0
	 */
	betweens(options: {
		/**
		 * The early date boundary.
		 */
		from: string | Date | number;
		/**
		 * The late date boundary.
		 */
		to: string | Date | number;
		/**
		 * The number of dates to generate.
		 *
		 * @default 3
		 */
		count?: number | {
			/**
			 * The minimum number of dates to generate.
			 */
			min: number;
			/**
			 * The maximum number of dates to generate.
			 */
			max: number;
		};
	}): Date[];
	/**
	 * Generates a random date in the recent past.
	 *
	 * @param options The optional options object.
	 * @param options.days The range of days the date may be in the past. Defaults to \`1\`.
	 * @param options.refDate The date to use as reference point for the newly generated date. Defaults to \`faker.defaultRefDate()\`.
	 *
	 * @see faker.date.past(): For generating dates further back in time (years instead of days).
	 *
	 * @example
	 * faker.date.recent() // '2022-02-04T02:09:35.077Z'
	 * faker.date.recent({ days: 10 }) // '2022-01-29T06:12:12.829Z'
	 * faker.date.recent({ days: 10, refDate: '2020-01-01T00:00:00.000Z' }) // '2019-12-27T18:11:19.117Z'
	 *
	 * @since 8.0.0
	 */
	recent(options?: {
		/**
		 * The range of days the date may be in the past.
		 *
		 * @default 1
		 */
		days?: number;
		/**
		 * The date to use as reference point for the newly generated date.
		 *
		 * @default faker.defaultRefDate()
		 */
		refDate?: string | Date | number;
	}): Date;
	/**
	 * Generates a random date in the near future.
	 *
	 * @param options The optional options object.
	 * @param options.days The range of days the date may be in the future. Defaults to \`1\`.
	 * @param options.refDate The date to use as reference point for the newly generated date. Defaults to \`faker.defaultRefDate()\`.
	 *
	 * @see faker.date.future(): For generating dates further in the future (years instead of days).
	 *
	 * @example
	 * faker.date.soon() // '2022-02-05T09:55:39.216Z'
	 * faker.date.soon({ days: 10 }) // '2022-02-11T05:14:39.138Z'
	 * faker.date.soon({ days: 10, refDate: '2020-01-01T00:00:00.000Z' }) // '2020-01-01T02:40:44.990Z'
	 *
	 * @since 8.0.0
	 */
	soon(options?: {
		/**
		 * The range of days the date may be in the future.
		 *
		 * @default 1
		 */
		days?: number;
		/**
		 * The date to use as reference point for the newly generated date.
		 *
		 * @default faker.defaultRefDate()
		 */
		refDate?: string | Date | number;
	}): Date;
	/**
	 * Returns a random birthdate. By default, the birthdate is generated for an adult between 18 and 80 years old.
	 * But you can customize the \`'age'\` range or the \`'year'\` range to generate a more specific birthdate.
	 *
	 * @param options The options to use to generate the birthdate.
	 * @param options.refDate The date to use as reference point for the newly generated date. Defaults to \`faker.defaultRefDate()\`.
	 *
	 * @example
	 * faker.date.birthdate() // 1977-07-10T01:37:30.719Z
	 *
	 * @since 7.0.0
	 */
	birthdate(options?: {
		/**
		 * The date to use as reference point for the newly generated date.
		 *
		 * @default faker.defaultRefDate()
		 */
		refDate?: string | Date | number;
	}): Date;
	/**
	 * Returns a random birthdate for a given age range.
	 *
	 * @param options The options to use to generate the birthdate.
	 * @param options.mode \`'age'\` to generate a birthdate based on the age range. It is also possible to generate a birthdate based on a \`'year'\` range.
	 * @param options.min The minimum age to generate a birthdate for.
	 * @param options.max The maximum age to generate a birthdate for.
	 * @param options.refDate The date to use as reference point for the newly generated date. Defaults to \`faker.defaultRefDate()\`.
	 *
	 * @example
	 * faker.date.birthdate({ mode: 'age', min: 18, max: 65 }) // 2003-11-02T20:03:20.116Z
	 *
	 * @since 7.0.0
	 */
	birthdate(options: {
		/**
		 * \`'age'\` to generate a birthdate based on the age range.
		 * It is also possible to generate a birthdate based on a \`'year'\` range.
		 */
		mode: "age";
		/**
		 * The minimum age to generate a birthdate for.
		 */
		min: number;
		/**
		 * The maximum age to generate a birthdate for.
		 */
		max: number;
		/**
		 * The date to use as reference point for the newly generated date.
		 *
		 * @default faker.defaultRefDate()
		 */
		refDate?: string | Date | number;
	}): Date;
	/**
	 * Returns a random birthdate in the given range of years.
	 *
	 * @param options The options to use to generate the birthdate.
	 * @param options.mode \`'year'\` to generate a birthdate based on the year range. It is also possible to generate a birthdate based on a \`'age'\` range.
	 * @param options.min The minimum year to generate a birthdate in.
	 * @param options.max The maximum year to generate a birthdate in.
	 *
	 * @example
	 * faker.date.birthdate({ mode: 'year', min: 1900, max: 2000 }) // 1940-08-20T08:53:07.538Z
	 *
	 * @since 7.0.0
	 */
	birthdate(options: {
		/**
		 * \`'year'\` to generate a birthdate based on the year range.
		 * It is also possible to generate a birthdate based on an \`'age'\` range.
		 */
		mode: "year";
		/**
		 * The minimum year to generate a birthdate in.
		 */
		min: number;
		/**
		 * The maximum year to generate a birthdate in.
		 */
		max: number;
	}): Date;
	/**
	 * Returns a random birthdate. By default, the birthdate is generated for an adult between 18 and 80 years old.
	 * But you can customize the \`'age'\` range or the \`'year'\` range to generate a more specific birthdate.
	 *
	 * @param options The options to use to generate the birthdate.
	 * @param options.mode Either \`'age'\` or \`'year'\` to generate a birthdate based on the age or year range.
	 * @param options.min The minimum age or year to generate a birthdate in.
	 * @param options.max The maximum age or year to generate a birthdate in.
	 * @param options.refDate The date to use as reference point for the newly generated date.
	 * Only used when \`mode\` is \`'age'\`.
	 * Defaults to \`faker.defaultRefDate()\`.
	 *
	 * @example
	 * faker.date.birthdate() // 1977-07-10T01:37:30.719Z
	 * faker.date.birthdate({ mode: 'age', min: 18, max: 65 }) // 2003-11-02T20:03:20.116Z
	 * faker.date.birthdate({ mode: 'year', min: 1900, max: 2000 }) // 1940-08-20T08:53:07.538Z
	 *
	 * @since 7.0.0
	 */
	birthdate(options?: {
		/**
		 * The date to use as reference point for the newly generated date.
		 *
		 * @default faker.defaultRefDate()
		 */
		refDate?: string | Date | number;
	} | {
		/**
		 * Either \`'age'\` or \`'year'\` to generate a birthdate based on the age or year range.
		 */
		mode: "age" | "year";
		/**
		 * The minimum age/year to generate a birthdate for/in.
		 */
		min: number;
		/**
		 * The maximum age/year to generate a birthdate for/in.
		 */
		max: number;
		/**
		 * The date to use as reference point for the newly generated date.
		 * Only used when \`mode\` is \`'age'\`.
		 *
		 * @default faker.defaultRefDate()
		 */
		refDate?: string | Date | number;
	}): Date;
}
/**
 * Module to generate dates.
 *
 * ### Overview
 *
 * To quickly generate a date in the past, use [\`recent()\`](https://fakerjs.dev/api/date.html#recent) (last day) or [\`past()\`](https://fakerjs.dev/api/date.html#past) (last year).
 * To quickly generate a date in the future, use [\`soon()\`](https://fakerjs.dev/api/date.html#soon) (next day) or [\`future()\`](https://fakerjs.dev/api/date.html#future) (next year).
 * For a realistic birthdate for an adult, use [\`birthdate()\`](https://fakerjs.dev/api/date.html#birthdate).
 *
 * For more control, any of these methods can be customized with further options, or use [\`between()\`](https://fakerjs.dev/api/date.html#between) to generate a single date between two dates, or [\`betweens()\`](https://fakerjs.dev/api/date.html#betweens) for multiple dates.
 *
 * If you need to generate a date range (start-end), you can do so using either of these two methods:
 *
 * - \`const start = faker.date.soon(); const end = faker.date.soon({ refDate: start });\`
 * - \`const [start, end] = faker.date.betweens({ from, to, count: 2 });\` // does not work with tsconfig's \`noUncheckedIndexedAccess: true\`
 *
 * Dates can be specified as Javascript Date objects, strings or UNIX timestamps.
 * For example to generate a date between 1st January 2000 and now, use:
 * \`\`\`ts
 * faker.date.between({ from: '2000-01-01', to: Date.now() });
 * \`\`\`
 *
 * You can generate random localized month and weekday names using [\`month()\`](https://fakerjs.dev/api/date.html#month) and [\`weekday()\`](https://fakerjs.dev/api/date.html#weekday).
 *
 * These methods have additional concerns about reproducibility, see [Reproducible Results](https://fakerjs.dev/guide/usage.html#reproducible-results).
 */
export declare class DateModule extends SimpleDateModule {
	protected readonly faker: Faker;
	constructor(faker: Faker);
	/**
	 * Returns a random name of a month.
	 *
	 * @param options The optional options to use.
	 * @param options.abbreviated Whether to return an abbreviation. Defaults to \`false\`.
	 * @param options.context Whether to return the name of a month in the context of a date. In the default \`en\` locale this has no effect, however, in other locales like \`fr\` or \`ru\`, this may affect grammar or capitalization, for example \`'январь'\` with \`{ context: false }\` and \`'января'\` with \`{ context: true }\` in \`ru\`. Defaults to \`false\`.
	 *
	 * @example
	 * faker.date.month() // 'October'
	 * faker.date.month({ abbreviated: true }) // 'Feb'
	 * faker.date.month({ context: true }) // 'June'
	 * faker.date.month({ abbreviated: true, context: true }) // 'Sep'
	 *
	 * @since 3.0.1
	 */
	month(options?: {
		/**
		 * Whether to return an abbreviation.
		 *
		 * @default false
		 */
		abbreviated?: boolean;
		/**
		 * Whether to return the name of a month in the context of a date.
		 *
		 * In the default \`en\` locale this has no effect,
		 * however, in other locales like \`fr\` or \`ru\`, this may affect grammar or capitalization,
		 * for example \`'январь'\` with \`{ context: false }\` and \`'января'\` with \`{ context: true }\` in \`ru\`.
		 *
		 * @default false
		 */
		context?: boolean;
	}): string;
	/**
	 * Returns a random day of the week.
	 *
	 * @param options The optional options to use.
	 * @param options.abbreviated Whether to return an abbreviation. Defaults to \`false\`.
	 * @param options.context Whether to return the day of the week in the context of a date. In the default \`en\` locale this has no effect, however, in other locales like \`fr\` or \`ru\`, this may affect grammar or capitalization, for example \`'Lundi'\` with \`{ context: false }\` and \`'lundi'\` with \`{ context: true }\` in \`fr\`. Defaults to \`false\`.
	 *
	 * @example
	 * faker.date.weekday() // 'Monday'
	 * faker.date.weekday({ abbreviated: true }) // 'Thu'
	 * faker.date.weekday({ context: true }) // 'Thursday'
	 * faker.date.weekday({ abbreviated: true, context: true }) // 'Fri'
	 *
	 * @since 3.0.1
	 */
	weekday(options?: {
		/**
		 * Whether to return an abbreviation.
		 *
		 * @default false
		 */
		abbreviated?: boolean;
		/**
		 * Whether to return the day of the week in the context of a date.
		 *
		 * In the default \`en\` locale this has no effect,
		 * however, in other locales like \`fr\` or \`ru\`, this may affect grammar or capitalization,
		 * for example \`'Lundi'\` with \`{ context: false }\` and \`'lundi'\` with \`{ context: true }\` in \`fr\`.
		 *
		 * @default false
		 */
		context?: boolean;
	}): string;
	/**
	 * Returns a random IANA time zone name.
	 *
	 * The returned time zone is not tied to the current locale.
	 *
	 * @see [IANA Time Zone Database](https://www.iana.org/time-zones)
	 * @see faker.location.timeZone(): For generating a timezone based on the current locale.
	 *
	 * @example
	 * faker.location.timeZone() // 'Pacific/Guam'
	 *
	 * @since 9.0.0
	 */
	timeZone(): string;
}
/**
 * Type that provides auto-suggestions but also any string.
 *
 * @see https://github.com/microsoft/TypeScript/issues/29729#issuecomment-471566609
 */
export type LiteralUnion<TSuggested extends TBase, TBase = string> = TSuggested | (TBase & {
	zz_IGNORE_ME?: never;
});
type Casing$1 = "upper" | "lower" | "mixed";
export type LowerAlphaChar = "a" | "b" | "c" | "d" | "e" | "f" | "g" | "h" | "i" | "j" | "k" | "l" | "m" | "n" | "o" | "p" | "q" | "r" | "s" | "t" | "u" | "v" | "w" | "x" | "y" | "z";
export type UpperAlphaChar = "A" | "B" | "C" | "D" | "E" | "F" | "G" | "H" | "I" | "J" | "K" | "L" | "M" | "N" | "O" | "P" | "Q" | "R" | "S" | "T" | "U" | "V" | "W" | "X" | "Y" | "Z";
export type NumericChar = "0" | "1" | "2" | "3" | "4" | "5" | "6" | "7" | "8" | "9";
export type AlphaChar = LowerAlphaChar | UpperAlphaChar;
export type AlphaNumericChar = AlphaChar | NumericChar;
/**
 * Module to generate string related entries.
 *
 * ### Overview
 *
 * For a string containing just A-Z characters, use [\`alpha()\`](https://fakerjs.dev/api/string.html#alpha). To add digits too, use [\`alphanumeric()\`](https://fakerjs.dev/api/string.html#alphanumeric). If you only want punctuation marks/symbols, use [\`symbol()\`](https://fakerjs.dev/api/string.html). For a full set of ASCII characters, use [\`sample()\`](https://fakerjs.dev/api/string.html#sample). For a custom set of characters, use [\`fromCharacters()\`](https://fakerjs.dev/api/string.html#fromcharacters).
 *
 * For strings of base-ten digits, use [\`numeric()\`](https://fakerjs.dev/api/string.html#numeric). For other bases, use [\`binary()\`](https://fakerjs.dev/api/string.html#binary), [\`octal()\`](https://fakerjs.dev/api/string.html#octal), or [\`hexadecimal()\`](https://fakerjs.dev/api/string.html#hexadecimal)).
 *
 * You can generate standard ID strings using [\`uuid()\`](https://fakerjs.dev/api/string.html#uuid) or [\`nanoid()\`](https://fakerjs.dev/api/string.html#nanoid).
 *
 * ### Related modules
 *
 * - Emoji can be found at [\`faker.internet.emoji()\`](https://fakerjs.dev/api/internet.html#emoji).
 * - The [\`faker.helpers\`](https://fakerjs.dev/api/helpers.html) module includes a number of string related methods.
 */
export declare class StringModule extends SimpleModuleBase {
	/**
	 * Generates a string from the given characters.
	 *
	 * @param characters The characters to use for the string. Can be a string or an array of characters.
	 * If it is an array, then each element is treated as a single character even if it is a string with multiple characters.
	 * @param length The length of the string to generate either as a fixed length or as a length range. Defaults to \`1\`.
	 * @param length.min The minimum length of the string to generate.
	 * @param length.max The maximum length of the string to generate.
	 *
	 * @example
	 * faker.string.fromCharacters('abc') // 'c'
	 * faker.string.fromCharacters(['a', 'b', 'c']) // 'a'
	 * faker.string.fromCharacters('abc', 10) // 'cbbbacbacb'
	 * faker.string.fromCharacters('abc', { min: 5, max: 10 }) // 'abcaaaba'
	 *
	 * @since 8.0.0
	 */
	fromCharacters(characters: string | ReadonlyArray<string>, length?: number | {
		/**
		 * The minimum length of the string to generate.
		 */
		min: number;
		/**
		 * The maximum length of the string to generate.
		 */
		max: number;
	}): string;
	/**
	 * Generating a string consisting of letters in the English alphabet.
	 *
	 * @param options Either the length of the string to generate or the optional options object.
	 * @param options.length The length of the string to generate either as a fixed length or as a length range. Defaults to \`1\`.
	 * @param options.casing The casing of the characters. Defaults to \`'mixed'\`.
	 * @param options.exclude An array with characters which should be excluded in the generated string. Defaults to \`[]\`.
	 *
	 * @example
	 * faker.string.alpha() // 'b'
	 * faker.string.alpha(10) // 'fEcAaCVbaR'
	 * faker.string.alpha({ length: { min: 5, max: 10 } }) // 'HcVrCf'
	 * faker.string.alpha({ casing: 'lower' }) // 'r'
	 * faker.string.alpha({ exclude: ['W'] }) // 'Z'
	 * faker.string.alpha({ length: 5, casing: 'upper', exclude: ['A'] }) // 'DTCIC'
	 *
	 * @since 8.0.0
	 */
	alpha(options?: number | {
		/**
		 * The length of the string to generate either as a fixed length or as a length range.
		 *
		 * @default 1
		 */
		length?: number | {
			/**
			 * The minimum length of the string to generate.
			 */
			min: number;
			/**
			 * The maximum length of the string to generate.
			 */
			max: number;
		};
		/**
		 * The casing of the characters.
		 *
		 * @default 'mixed'
		 */
		casing?: Casing$1;
		/**
		 * An array with characters which should be excluded in the generated string.
		 *
		 * @default []
		 */
		exclude?: ReadonlyArray<LiteralUnion<AlphaChar>> | string;
	}): string;
	/**
	 * Generating a string consisting of alpha characters and digits.
	 *
	 * @param options Either the length of the string to generate or the optional options object.
	 * @param options.length The length of the string to generate either as a fixed length or as a length range. Defaults to \`1\`.
	 * @param options.casing The casing of the characters. Defaults to \`'mixed'\`.
	 * @param options.exclude An array of characters and digits which should be excluded in the generated string. Defaults to \`[]\`.
	 *
	 * @example
	 * faker.string.alphanumeric() // '2'
	 * faker.string.alphanumeric(5) // '3e5V7'
	 * faker.string.alphanumeric({ length: { min: 5, max: 10 } }) // 'muaApG'
	 * faker.string.alphanumeric({ casing: 'upper' }) // 'A'
	 * faker.string.alphanumeric({ exclude: ['W'] }) // 'r'
	 * faker.string.alphanumeric({ length: 5, exclude: ["a"] }) // 'x1Z7f'
	 *
	 * @since 8.0.0
	 */
	alphanumeric(options?: number | {
		/**
		 * The length of the string to generate either as a fixed length or as a length range.
		 *
		 * @default 1
		 */
		length?: number | {
			/**
			 * The minimum length of the string to generate.
			 */
			min: number;
			/**
			 * The maximum length of the string to generate.
			 */
			max: number;
		};
		/**
		 * The casing of the characters.
		 *
		 * @default 'mixed'
		 */
		casing?: Casing$1;
		/**
		 * An array of characters and digits which should be excluded in the generated string.
		 *
		 * @default []
		 */
		exclude?: ReadonlyArray<LiteralUnion<AlphaNumericChar>> | string;
	}): string;
	/**
	 * Returns a [binary](https://en.wikipedia.org/wiki/Binary_number) string.
	 *
	 * @param options The optional options object.
	 * @param options.length The length of the string (excluding the prefix) to generate either as a fixed length or as a length range. Defaults to \`1\`.
	 * @param options.prefix Prefix for the generated number. Defaults to \`'0b'\`.
	 *
	 * @see faker.number.binary(): For generating a binary number (within a range).
	 *
	 * @example
	 * faker.string.binary() // '0b1'
	 * faker.string.binary({ length: 10 }) // '0b1101011011'
	 * faker.string.binary({ length: { min: 5, max: 10 } }) // '0b11101011'
	 * faker.string.binary({ prefix: '0b' }) // '0b1'
	 * faker.string.binary({ length: 10, prefix: 'bin_' }) // 'bin_1101011011'
	 *
	 * @since 8.0.0
	 */
	binary(options?: {
		/**
		 * The length of the string (excluding the prefix) to generate either as a fixed length or as a length range.
		 *
		 * @default 1
		 */
		length?: number | {
			/**
			 * The minimum length of the string (excluding the prefix) to generate.
			 */
			min: number;
			/**
			 * The maximum length of the string (excluding the prefix) to generate.
			 */
			max: number;
		};
		/**
		 * Prefix for the generated number.
		 *
		 * @default '0b'
		 */
		prefix?: string;
	}): string;
	/**
	 * Returns an [octal](https://en.wikipedia.org/wiki/Octal) string.
	 *
	 * @param options The optional options object.
	 * @param options.length The length of the string (excluding the prefix) to generate either as a fixed length or as a length range. Defaults to \`1\`.
	 * @param options.prefix Prefix for the generated number. Defaults to \`'0o'\`.
	 *
	 * @see faker.number.octal(): For generating an octal number (within a range).
	 *
	 * @example
	 * faker.string.octal() // '0o3'
	 * faker.string.octal({ length: 10 }) // '0o1526216210'
	 * faker.string.octal({ length: { min: 5, max: 10 } }) // '0o15263214'
	 * faker.string.octal({ prefix: '0o' }) // '0o7'
	 * faker.string.octal({ length: 10, prefix: 'oct_' }) // 'oct_1542153414'
	 *
	 * @since 8.0.0
	 */
	octal(options?: {
		/**
		 * The length of the string (excluding the prefix) to generate either as a fixed length or as a length range.
		 *
		 * @default 1
		 */
		length?: number | {
			/**
			 * The minimum length of the string (excluding the prefix) to generate.
			 */
			min: number;
			/**
			 * The maximum length of the string (excluding the prefix) to generate.
			 */
			max: number;
		};
		/**
		 * Prefix for the generated number.
		 *
		 * @default '0o'
		 */
		prefix?: string;
	}): string;
	/**
	 * Returns a [hexadecimal](https://en.wikipedia.org/wiki/Hexadecimal) string.
	 *
	 * @param options The optional options object.
	 * @param options.length The length of the string (excluding the prefix) to generate either as a fixed length or as a length range. Defaults to \`1\`.
	 * @param options.casing Casing of the generated number. Defaults to \`'mixed'\`.
	 * @param options.prefix Prefix for the generated number. Defaults to \`'0x'\`.
	 *
	 * @example
	 * faker.string.hexadecimal() // '0xB'
	 * faker.string.hexadecimal({ length: 10 }) // '0xaE13d044cB'
	 * faker.string.hexadecimal({ length: { min: 5, max: 10 } }) // '0x7dEf7FCD'
	 * faker.string.hexadecimal({ prefix: '0x' }) // '0xE'
	 * faker.string.hexadecimal({ casing: 'lower' }) // '0xf'
	 * faker.string.hexadecimal({ length: 10, prefix: '#' }) // '#f12a974eB1'
	 * faker.string.hexadecimal({ length: 10, casing: 'upper' }) // '0xE3F38014FB'
	 * faker.string.hexadecimal({ casing: 'lower', prefix: '' }) // 'd'
	 * faker.string.hexadecimal({ length: 10, casing: 'mixed', prefix: '0x' }) // '0xAdE330a4D1'
	 *
	 * @since 8.0.0
	 */
	hexadecimal(options?: {
		/**
		 * The length of the string (excluding the prefix) to generate either as a fixed length or as a length range.
		 *
		 * @default 1
		 */
		length?: number | {
			/**
			 * The minimum length of the string (excluding the prefix) to generate.
			 */
			min: number;
			/**
			 * The maximum length of the string (excluding the prefix) to generate.
			 */
			max: number;
		};
		/**
		 * Casing of the generated number.
		 *
		 * @default 'mixed'
		 */
		casing?: Casing$1;
		/**
		 * Prefix for the generated number.
		 *
		 * @default '0x'
		 */
		prefix?: string;
	}): string;
	/**
	 * Generates a given length string of digits.
	 *
	 * @param options Either the length of the string to generate or the optional options object.
	 * @param options.length The length of the string to generate either as a fixed length or as a length range. Defaults to \`1\`.
	 * @param options.allowLeadingZeros Whether leading zeros are allowed or not. Defaults to \`true\`.
	 * @param options.exclude An array of digits which should be excluded in the generated string. Defaults to \`[]\`.
	 *
	 * @see faker.number.int(): For generating a number (within a range).
	 *
	 * @example
	 * faker.string.numeric() // '2'
	 * faker.string.numeric(5) // '31507'
	 * faker.string.numeric(42) // '06434563150765416546479875435481513188548'
	 * faker.string.numeric({ length: { min: 5, max: 10 } }) // '197089478'
	 * faker.string.numeric({ length: 42, allowLeadingZeros: false }) // '72564846278453876543517840713421451546115'
	 * faker.string.numeric({ length: 6, exclude: ['0'] }) // '943228'
	 *
	 * @since 8.0.0
	 */
	numeric(options?: number | {
		/**
		 * The length of the string to generate either as a fixed length or as a length range.
		 *
		 * @default 1
		 */
		length?: number | {
			/**
			 * The minimum length of the string to generate.
			 */
			min: number;
			/**
			 * The maximum length of the string to generate.
			 */
			max: number;
		};
		/**
		 * Whether leading zeros are allowed or not.
		 *
		 * @default true
		 */
		allowLeadingZeros?: boolean;
		/**
		 * An array of digits which should be excluded in the generated string.
		 *
		 * @default []
		 */
		exclude?: ReadonlyArray<LiteralUnion<NumericChar>> | string;
	}): string;
	/**
	 * Returns a string containing UTF-16 chars between 33 and 125 (\`!\` to \`}\`).
	 *
	 * @param length The length of the string (excluding the prefix) to generate either as a fixed length or as a length range. Defaults to \`10\`.
	 * @param length.min The minimum length of the string to generate.
	 * @param length.max The maximum length of the string to generate.
	 *
	 * @example
	 * faker.string.sample() // 'Zo!.:*e>wR'
	 * faker.string.sample(5) // '6Bye8'
	 * faker.string.sample({ min: 5, max: 10 }) // 'FeKunG'
	 *
	 * @since 8.0.0
	 */
	sample(length?: number | {
		/**
		 * The minimum length of the string to generate.
		 */
		min: number;
		/**
		 * The maximum length of the string to generate.
		 */
		max: number;
	}): string;
	/**
	 * Returns a UUID v4 ([Universally Unique Identifier](https://en.wikipedia.org/wiki/Universally_unique_identifier)).
	 *
	 * @example
	 * faker.string.uuid() // '4136cd0b-d90b-4af7-b485-5d1ded8db252'
	 *
	 * @since 8.0.0
	 */
	uuid(): string;
	/**
	 * Returns a ULID ([Universally Unique Lexicographically Sortable Identifier](https://github.com/ulid/spec)).
	 *
	 * @param options The optional options object.
	 * @param options.refDate The timestamp to encode into the ULID.
	 * The encoded timestamp is represented by the first 10 characters of the result.
	 * Defaults to \`faker.defaultRefDate()\`.
	 *
	 * @example
	 * faker.string.ulid() // '01ARZ3NDEKTSV4RRFFQ69G5FAV'
	 * faker.string.ulid({ refDate: '2020-01-01T00:00:00.000Z' }) // '01DXF6DT00CX9QNNW7PNXQ3YR8'
	 *
	 * @since 9.1.0
	 */
	ulid(options?: {
		/**
		 * The date to use as reference point for the newly generated ULID encoded timestamp.
		 * The encoded timestamp is represented by the first 10 characters of the result.
		 *
		 * @default faker.defaultRefDate()
		 */
		refDate?: string | Date | number;
	}): string;
	/**
	 * Generates a [Nano ID](https://github.com/ai/nanoid).
	 *
	 * @param length The length of the string to generate either as a fixed length or as a length range. Defaults to \`21\`.
	 * @param length.min The minimum length of the Nano ID to generate.
	 * @param length.max The maximum length of the Nano ID to generate.
	 *
	 * @example
	 * faker.string.nanoid() // ptL0KpX_yRMI98JFr6B3n
	 * faker.string.nanoid(10) // VsvwSdm_Am
	 * faker.string.nanoid({ min: 13, max: 37 }) // KIRsdEL9jxVgqhBDlm
	 *
	 * @since 8.0.0
	 */
	nanoid(length?: number | {
		/**
		 * The minimum length of the Nano ID to generate.
		 */
		min: number;
		/**
		 * The maximum length of the Nano ID to generate.
		 */
		max: number;
	}): string;
	/**
	 * Returns a string containing only special characters from the following list:
	 *
	 * \`\`\`txt
	 * ! " # $ % & ' ( ) * + , - . / : ; < = > ? @ [ \\ ] ^ _ \` { | } ~
	 * \`\`\`
	 *
	 * @param length The length of the string to generate either as a fixed length or as a length range. Defaults to \`1\`.
	 * @param length.min The minimum length of the string to generate.
	 * @param length.max The maximum length of the string to generate.
	 *
	 * @example
	 * faker.string.symbol() // '$'
	 * faker.string.symbol(5) // '#*!.~'
	 * faker.string.symbol({ min: 5, max: 10 }) // ')|@*>^+'
	 *
	 * @since 8.0.0
	 */
	symbol(length?: number | {
		/**
		 * The minimum length of the string to generate.
		 */
		min: number;
		/**
		 * The maximum length of the string to generate.
		 */
		max: number;
	}): string;
}
/**
 * The bitcoin address families.
 */
export declare enum BitcoinAddressFamily {
	Legacy = "legacy",
	Segwit = "segwit",
	Bech32 = "bech32",
	Taproot = "taproot"
}
/**
 * The bitcoin address families.
 */
export type BitcoinAddressFamilyType = \`\${BitcoinAddressFamily}\`;
/**
 * The different bitcoin networks.
 */
export declare enum BitcoinNetwork {
	Mainnet = "mainnet",
	Testnet = "testnet"
}
/**
 * The different bitcoin networks.
 */
export type BitcoinNetworkType = \`\${BitcoinNetwork}\`;
/**
 * The possible definitions related to currency entries.
 */
export interface Currency {
	/**
	 * The full name for the currency (e.g. \`US Dollar\`).
	 */
	name: string;
	/**
	 * The code/short text/abbreviation for the currency (e.g. \`USD\`).
	 */
	code: string;
	/**
	 * The symbol for the currency (e.g. \`$\`).
	 */
	symbol: string;
}
/**
 * Module to generate finance and money related entries.
 *
 * ### Overview
 *
 * For a random amount, use [\`amount()\`](https://fakerjs.dev/api/finance.html#amount).
 *
 * For traditional bank accounts, use: [\`accountNumber()\`](https://fakerjs.dev/api/finance.html#accountnumber), [\`accountName()\`](https://fakerjs.dev/api/finance.html#accountname), [\`bic()\`](https://fakerjs.dev/api/finance.html#bic), [\`iban()\`](https://fakerjs.dev/api/finance.html#iban), [\`pin()\`](https://fakerjs.dev/api/finance.html#pin) and [\`routingNumber()\`](https://fakerjs.dev/api/finance.html#routingnumber).
 *
 * For credit card related methods, use: [\`creditCardNumber()\`](https://fakerjs.dev/api/finance.html#creditcardnumber), [\`creditCardCVV()\`](https://fakerjs.dev/api/finance.html#creditcardcvv), [\`creditCardIssuer()\`](https://fakerjs.dev/api/finance.html#creditcardissuer), [\`transactionDescription()\`](https://fakerjs.dev/api/finance.html#transactiondescription) and [\`transactionType()\`](https://fakerjs.dev/api/finance.html#transactiontype).
 *
 * For blockchain related methods, use: [\`bitcoinAddress()\`](https://fakerjs.dev/api/finance.html#bitcoinaddress), [\`ethereumAddress()\`](https://fakerjs.dev/api/finance.html#ethereumaddress) and [\`litecoinAddress()\`](https://fakerjs.dev/api/finance.html#litecoinaddress).
 */
export declare class FinanceModule extends ModuleBase {
	/**
	 * Generates a random account number.
	 *
	 * @param length The length of the account number. Defaults to \`8\`.
	 *
	 * @example
	 * faker.finance.accountNumber() // 92842238
	 * faker.finance.accountNumber(5) // 32564
	 *
	 * @since 8.0.0
	 */
	accountNumber(length?: number): string;
	/**
	 * Generates a random account number.
	 *
	 * @param options An options object.
	 * @param options.length The length of the account number. Defaults to \`8\`.
	 *
	 * @example
	 * faker.finance.accountNumber() // 92842238
	 * faker.finance.accountNumber({ length: 5 }) // 32564
	 *
	 * @since 8.0.0
	 */
	accountNumber(options?: {
		/**
		 * The length of the account number.
		 *
		 * @default 8
		 */
		length?: number;
	}): string;
	/**
	 * Generates a random account number.
	 *
	 * @param optionsOrLength An options object or the length of the account number.
	 * @param optionsOrLength.length The length of the account number. Defaults to \`8\`.
	 *
	 * @example
	 * faker.finance.accountNumber() // 92842238
	 * faker.finance.accountNumber(5) // 28736
	 * faker.finance.accountNumber({ length: 5 }) // 32564
	 *
	 * @since 8.0.0
	 */
	accountNumber(optionsOrLength?: number | {
		/**
		 * The length of the account number.
		 *
		 * @default 8
		 */
		length?: number;
	}): string;
	/**
	 * Generates a random account name.
	 *
	 * @example
	 * faker.finance.accountName() // 'Personal Loan Account'
	 *
	 * @since 2.0.1
	 */
	accountName(): string;
	/**
	 * Generates a random routing number.
	 *
	 * @example
	 * faker.finance.routingNumber() // '522814402'
	 *
	 * @since 5.0.0
	 */
	routingNumber(): string;
	/**
	 * Generates a random masked number.
	 *
	 * @param length The length of the unmasked number. Defaults to \`4\`.
	 *
	 * @example
	 * faker.finance.maskedNumber() // '(...9711)'
	 * faker.finance.maskedNumber(3) // '(...342)'
	 *
	 * @since 8.0.0
	 *
	 * @deprecated Use \`faker.finance.iban().replace(/(?<=.{4})\\w(?=.{2})/g, '*')\` or a similar approach instead.
	 */
	maskedNumber(length?: number): string;
	/**
	 * Generates a random masked number.
	 *
	 * @param options An options object.
	 * @param options.length The length of the unmasked number. Defaults to \`4\`.
	 * @param options.parens Whether to use surrounding parenthesis. Defaults to \`true\`.
	 * @param options.ellipsis Whether to prefix the numbers with an ellipsis. Defaults to \`true\`.
	 *
	 * @example
	 * faker.finance.maskedNumber() // '(...9711)'
	 * faker.finance.maskedNumber({ length: 3 }) // '(...342)'
	 * faker.finance.maskedNumber({ length: 3, parens: false }) // '...236'
	 * faker.finance.maskedNumber({ length: 3, parens: false, ellipsis: false }) // '298'
	 *
	 * @since 8.0.0
	 *
	 * @deprecated Use \`faker.finance.iban().replace(/(?<=.{4})\\w(?=.{2})/g, '*')\` or a similar approach instead.
	 */
	maskedNumber(options?: {
		/**
		 * The length of the unmasked number.
		 *
		 * @default 4
		 */
		length?: number;
		/**
		 * Whether to use surrounding parenthesis.
		 *
		 * @default true
		 */
		parens?: boolean;
		/**
		 * Whether to prefix the numbers with an ellipsis.
		 *
		 * @default true
		 */
		ellipsis?: boolean;
	}): string;
	/**
	 * Generates a random masked number.
	 *
	 * @param optionsOrLength An options object or the length of the unmask number.
	 * @param optionsOrLength.length The length of the unmasked number. Defaults to \`4\`.
	 * @param optionsOrLength.parens Whether to use surrounding parenthesis. Defaults to \`true\`.
	 * @param optionsOrLength.ellipsis Whether to prefix the numbers with an ellipsis. Defaults to \`true\`.
	 *
	 * @example
	 * faker.finance.maskedNumber() // '(...9711)'
	 * faker.finance.maskedNumber(3) // '(...342)'
	 * faker.finance.maskedNumber({ length: 3 }) // '(...342)'
	 * faker.finance.maskedNumber({ length: 3, parens: false }) // '...236'
	 * faker.finance.maskedNumber({ length: 3, parens: false, ellipsis: false }) // '298'
	 *
	 * @since 8.0.0
	 *
	 * @deprecated Use \`faker.finance.iban().replace(/(?<=.{4})\\w(?=.{2})/g, '*')\` or a similar approach instead.
	 */
	maskedNumber(optionsOrLength?: number | {
		/**
		 * The length of the unmasked number.
		 *
		 * @default 4
		 */
		length?: number;
		/**
		 * Whether to use surrounding parenthesis.
		 *
		 * @default true
		 */
		parens?: boolean;
		/**
		 * Whether to prefix the numbers with an ellipsis.
		 *
		 * @default true
		 */
		ellipsis?: boolean;
	}): string;
	/**
	 * Generates a random amount between the given bounds (inclusive).
	 *
	 * @param options An options object.
	 * @param options.min The lower bound for the amount. Defaults to \`0\`.
	 * @param options.max The upper bound for the amount. Defaults to \`1000\`.
	 * @param options.dec The number of decimal places for the amount. Defaults to \`2\`.
	 * @param options.symbol The symbol used to prefix the amount. Defaults to \`''\`.
	 * @param options.autoFormat If true this method will use \`Number.toLocaleString()\`. Otherwise it will use \`Number.toFixed()\`.
	 *
	 * @example
	 * faker.finance.amount() // '617.87'
	 * faker.finance.amount({ min: 5, max: 10 }) // '5.53'
	 * faker.finance.amount({ min: 5, max: 10, dec: 0 }) // '8'
	 * faker.finance.amount({ min: 5, max: 10, dec: 2, symbol: '$' }) // '$5.85'
	 * faker.finance.amount({ min: 5, max: 10, dec: 5, symbol: '', autoFormat: true }) // '9,75067'
	 *
	 * @since 2.0.1
	 */
	amount(options?: {
		/**
		 * The lower bound for the amount.
		 *
		 * @default 0
		 */
		min?: number;
		/**
		 * The upper bound for the amount.
		 *
		 * @default 1000
		 */
		max?: number;
		/**
		 * The number of decimal places for the amount.
		 *
		 * @default 2
		 */
		dec?: number;
		/**
		 * The symbol used to prefix the amount.
		 *
		 * @default ''
		 */
		symbol?: string;
		/**
		 * If true this method will use \`Number.toLocaleString()\`. Otherwise it will use \`Number.toFixed()\`.
		 *
		 * @default false
		 */
		autoFormat?: boolean;
	}): string;
	/**
	 * Returns a random transaction type.
	 *
	 * @example
	 * faker.finance.transactionType() // 'payment'
	 *
	 * @since 2.0.1
	 */
	transactionType(): string;
	/**
	 * Returns a random currency object, containing \`code\`, \`name \`and \`symbol\` properties.
	 *
	 * @see faker.finance.currencyCode(): For generating specifically the currency code.
	 * @see faker.finance.currencyName(): For generating specifically the currency name.
	 * @see faker.finance.currencySymbol(): For generating specifically the currency symbol.
	 *
	 * @example
	 * faker.finance.currency() // { code: 'USD', name: 'US Dollar', symbol: '$' }
	 *
	 * @since 8.0.0
	 */
	currency(): Currency;
	/**
	 * Returns a random currency code.
	 * (The short text/abbreviation for the currency (e.g. \`US Dollar\` -> \`USD\`))
	 *
	 * @example
	 * faker.finance.currencyCode() // 'USD'
	 *
	 * @since 2.0.1
	 */
	currencyCode(): string;
	/**
	 * Returns a random currency name.
	 *
	 * @example
	 * faker.finance.currencyName() // 'US Dollar'
	 *
	 * @since 2.0.1
	 */
	currencyName(): string;
	/**
	 * Returns a random currency symbol.
	 *
	 * @example
	 * faker.finance.currencySymbol() // '$'
	 *
	 * @since 2.0.1
	 */
	currencySymbol(): string;
	/**
	 * Generates a random Bitcoin address.
	 *
	 * @param options An optional options object.
	 * @param options.type The bitcoin address type (\`'legacy'\`, \`'sewgit'\`, \`'bech32'\` or \`'taproot'\`). Defaults to a random address type.
	 * @param options.network The bitcoin network (\`'mainnet'\` or \`'testnet'\`). Defaults to \`'mainnet'\`.
	 *
	 * @example
	 * faker.finance.bitcoinAddress() // '1TeZEFLmGPLEQrSRdAcnZLoWwYeiHwmRog'
	 * faker.finance.bitcoinAddress({ type: 'bech32' }) // 'bc1qw508d6qejxtdg4y5r3zarvary0c5xw7kv8f3t4'
	 * faker.finance.bitcoinAddress({ type: 'bech32', network: 'testnet' }) // 'tb1qw508d6qejxtdg4y5r3zarvary0c5xw7kxpjzsx'
	 *
	 * @since 3.1.0
	 */
	bitcoinAddress(options?: {
		/**
		 * The bitcoin address type (\`'legacy'\`, \`'sewgit'\`, \`'bech32'\` or \`'taproot'\`).
		 *
		 * @default faker.helpers.arrayElement(['legacy','sewgit','bech32','taproot'])
		 */
		type?: BitcoinAddressFamilyType;
		/**
		 * The bitcoin network (\`'mainnet'\` or \`'testnet'\`).
		 *
		 * @default 'mainnet'
		 */
		network?: BitcoinNetworkType;
	}): string;
	/**
	 * Generates a random Litecoin address.
	 *
	 * @example
	 * faker.finance.litecoinAddress() // 'MoQaSTGWBRXkWfyxKbNKuPrAWGELzcW'
	 *
	 * @since 5.0.0
	 */
	litecoinAddress(): string;
	/**
	 * Generates a random credit card number.
	 *
	 * @param issuer The name of the issuer (case-insensitive) or the format used to generate one.
	 *
	 * @example
	 * faker.finance.creditCardNumber() // '4427163488662'
	 * faker.finance.creditCardNumber('visa') // '4882664999007'
	 * faker.finance.creditCardNumber('63[7-9]#-####-####-###L') // '6375-3265-4676-6646'
	 *
	 * @since 5.0.0
	 */
	creditCardNumber(issuer?: string): string;
	/**
	 * Generates a random credit card number.
	 *
	 * @param options An options object.
	 * @param options.issuer The name of the issuer (case-insensitive) or the format used to generate one. Defaults to \`''\`.
	 *
	 * @example
	 * faker.finance.creditCardNumber() // '4427163488662'
	 * faker.finance.creditCardNumber({ issuer: 'visa' }) // '4882664999007'
	 * faker.finance.creditCardNumber({ issuer: '63[7-9]#-####-####-###L' }) // '6375-3265-4676-6646'
	 *
	 * @since 5.0.0
	 */
	creditCardNumber(options?: {
		/**
		 * The name of the issuer (case-insensitive) or the format used to generate one.
		 *
		 * @default ''
		 */
		issuer?: string;
	}): string;
	/**
	 * Generates a random credit card number.
	 *
	 * @param options An options object, the issuer or a custom format.
	 * @param options.issuer The name of the issuer (case-insensitive) or the format used to generate one. Defaults to \`''\`.
	 *
	 * @example
	 * faker.finance.creditCardNumber() // '4427163488662'
	 * faker.finance.creditCardNumber({ issuer: 'visa' }) // '4882664999007'
	 * faker.finance.creditCardNumber({ issuer: '63[7-9]#-####-####-###L' }) // '6375-3265-4676-6646'
	 * faker.finance.creditCardNumber('visa') // '1226423499765'
	 *
	 * @since 5.0.0
	 */
	creditCardNumber(options?: string | {
		/**
		 * The name of the issuer (case-insensitive) or the format used to generate one.
		 *
		 * @default ''
		 */
		issuer?: string;
	}): string;
	/**
	 * Generates a random credit card CVV.
	 *
	 * @example
	 * faker.finance.creditCardCVV() // '506'
	 *
	 * @since 5.0.0
	 */
	creditCardCVV(): string;
	/**
	 * Returns a random credit card issuer.
	 *
	 * @example
	 * faker.finance.creditCardIssuer() // 'discover'
	 *
	 * @since 6.3.0
	 */
	creditCardIssuer(): string;
	/**
	 * Generates a random PIN number.
	 *
	 * @param length The length of the PIN to generate. Defaults to \`4\`.
	 *
	 * @throws Will throw an error if length is less than 1.
	 *
	 * @example
	 * faker.finance.pin() // '5067'
	 * faker.finance.pin(6) // '213789'
	 *
	 * @since 6.2.0
	 */
	pin(length?: number): string;
	/**
	 * Generates a random PIN number.
	 *
	 * @param options An options object.
	 * @param options.length The length of the PIN to generate. Defaults to \`4\`.
	 *
	 * @throws Will throw an error if length is less than 1.
	 *
	 * @example
	 * faker.finance.pin() // '5067'
	 * faker.finance.pin({ length: 6 }) // '213789'
	 *
	 * @since 6.2.0
	 */
	pin(options?: {
		/**
		 * The length of the PIN to generate.
		 *
		 * @default 4
		 */
		length?: number;
	}): string;
	/**
	 * Generates a random PIN number.
	 *
	 * @param options An options object or the length of the PIN.
	 * @param options.length The length of the PIN to generate. Defaults to \`4\`.
	 *
	 * @throws Will throw an error if length is less than 1.
	 *
	 * @example
	 * faker.finance.pin() // '5067'
	 * faker.finance.pin({ length: 6 }) // '213789'
	 * faker.finance.pin(6) // '213789'
	 *
	 * @since 6.2.0
	 */
	pin(options?: number | {
		/**
		 * The length of the PIN to generate.
		 *
		 * @default 4
		 */
		length?: number;
	}): string;
	/**
	 * Creates a random, non-checksum Ethereum address.
	 *
	 * To generate a checksummed Ethereum address (with specific per character casing), wrap this method in a custom method and use third-party libraries to transform the result.
	 *
	 * @example
	 * faker.finance.ethereumAddress() // '0xf03dfeecbafc5147241cc4c4ca20b3c9dfd04c4a'
	 *
	 * @since 5.0.0
	 */
	ethereumAddress(): string;
	/**
	 * Generates a random IBAN.
	 *
	 * Please note that the generated IBAN might be invalid due to randomly generated bank codes/other country specific validation rules.
	 *
	 * @param options An options object.
	 * @param options.formatted Return a formatted version of the generated IBAN. Defaults to \`false\`.
	 * @param options.countryCode The country code from which you want to generate an IBAN, if none is provided a random country will be used.
	 *
	 * @throws Will throw an error if the passed country code is not supported.
	 *
	 * @example
	 * faker.finance.iban() // 'TR736918640040966092800056'
	 * faker.finance.iban({ formatted: true }) // 'FR20 8008 2330 8984 74S3 Z620 224'
	 * faker.finance.iban({ formatted: true, countryCode: 'DE' }) // 'DE84 1022 7075 0900 1170 01'
	 *
	 * @since 4.0.0
	 */
	iban(options?: {
		/**
		 * Return a formatted version of the generated IBAN.
		 *
		 * @default false
		 */
		formatted?: boolean;
		/**
		 * The country code from which you want to generate an IBAN,
		 * if none is provided a random country will be used.
		 */
		countryCode?: string;
	}): string;
	/**
	 * Generates a random SWIFT/BIC code based on the [ISO-9362](https://en.wikipedia.org/wiki/ISO_9362) format.
	 *
	 * @param options Options object.
	 * @param options.includeBranchCode Whether to include a three-digit branch code at the end of the generated code. Defaults to a random boolean value.
	 *
	 * @example
	 * faker.finance.bic() // 'WYAUPGX1'
	 * faker.finance.bic({ includeBranchCode: true }) // 'KCAUPGR1432'
	 * faker.finance.bic({ includeBranchCode: false }) // 'XDAFQGT7'
	 *
	 * @since 4.0.0
	 */
	bic(options?: {
		/**
		 * Whether to include a three-digit branch code at the end of the generated code.
		 *
		 * @default faker.datatype.boolean()
		 */
		includeBranchCode?: boolean;
	}): string;
	/**
	 * Generates a random transaction description.
	 *
	 * @example
	 * faker.finance.transactionDescription()
	 * // 'invoice transaction at Kilback - Durgan using card ending with ************4316 for UAH 783.82 in account ***16168663'
	 *
	 * @since 5.1.0
	 */
	transactionDescription(): string;
}
/**
 * Module for generating food-related data.
 *
 * ### Overview
 *
 * This module provides methods to generate various food-related information, such as items on a menu.
 * To generate the name of a dish, use [\`dish()\`](https://fakerjs.dev/api/food.html#dish) and to generate a long description for a dish use [\`description()\`](https://fakerjs.dev/api/food.html#description). Note that these will not correspond with each other.
 * You can also generate individual components of a dish such as [spices](https://fakerjs.dev/api/food.html#spice), [vegetables](https://fakerjs.dev/api/food.html#vegetable), [meats](https://fakerjs.dev/api/food.html#meat), [fruits](https://fakerjs.dev/api/food.html#fruit), or generic [ingredients](https://fakerjs.dev/api/food.html#ingredient).
 */
export declare class FoodModule extends ModuleBase {
	/**
	 * Generates a random dish adjective.
	 *
	 * @example
	 * faker.food.adjective() // 'crispy'
	 *
	 * @since 9.0.0
	 */
	adjective(): string;
	/**
	 * Generates a random dish description.
	 *
	 * @example
	 * faker.food.description() // 'An exquisite ostrich roast, infused with the essence of longan, slow-roasted to bring out its natural flavors and served with a side of creamy red cabbage'
	 *
	 * @since 9.0.0
	 */
	description(): string;
	/**
	 * Generates a random dish name.
	 *
	 * @example
	 * faker.food.dish() // 'Tagine-Rubbed Venison Salad'
	 *
	 * @since 9.0.0
	 */
	dish(): string;
	/**
	 * Generates a random food's ethnic category.
	 *
	 * @example
	 * faker.food.ethnicCategory() // 'Italian'
	 *
	 * @since 9.0.0
	 */
	ethnicCategory(): string;
	/**
	 * Generates a random fruit name.
	 *
	 * @example
	 * faker.food.fruit() // 'lemon'
	 *
	 * @since 9.0.0
	 */
	fruit(): string;
	/**
	 * Generates a random ingredient name.
	 *
	 * @example
	 * faker.food.ingredient() // 'butter'
	 *
	 * @since 9.0.0
	 */
	ingredient(): string;
	/**
	 * Generates a random meat
	 *
	 * @example
	 * faker.food.meat() // 'venison'
	 *
	 * @since 9.0.0
	 */
	meat(): string;
	/**
	 * Generates a random spice name.
	 *
	 * @example
	 * faker.food.spice() // 'chilli'
	 *
	 * @since 9.0.0
	 */
	spice(): string;
	/**
	 * Generates a random vegetable name.
	 *
	 * @example
	 * faker.food.vegetable() // 'broccoli'
	 *
	 * @since 9.0.0
	 */
	vegetable(): string;
}
/**
 * Module to generate git related entries.
 *
 * ### Overview
 *
 * [\`commitEntry()\`](https://fakerjs.dev/api/git.html#commitentry) generates a random commit entry as printed by \`git log\`. This includes a commit hash [\`commitSha()\`](https://fakerjs.dev/api/git.html#commitsha), author, date [\`commitDate()\`](https://fakerjs.dev/api/git.html#commitdate), and commit message [\`commitMessage()\`](https://fakerjs.dev/api/git.html#commitmessage). You can also generate a random branch name with [\`branch()\`](https://fakerjs.dev/api/git.html#branch).
 */
export declare class GitModule extends ModuleBase {
	/**
	 * Generates a random branch name.
	 *
	 * @example
	 * faker.git.branch() // 'feed-parse'
	 *
	 * @since 5.0.0
	 */
	branch(): string;
	/**
	 * Generates a random commit entry as printed by \`git log\`.
	 *
	 * @param options Options for the commit entry.
	 * @param options.merge Whether to generate a merge message line. Defaults to 20% \`true\` and 80% \`false\`.
	 * @param options.eol Choose the end of line character to use. Defaults to \`'CRLF'\`.
	 * 'LF' = '\\n',
	 * 'CRLF' = '\\r\\n'
	 * @param options.refDate The date to use as reference point for the commit. Defaults to \`new Date()\`.
	 *
	 * @example
	 * faker.git.commitEntry()
	 * // commit fe8c38a965d13d9794eb36918cb24cebe49a45c2
	 * // Author: Marion Becker <Marion_Becker49@gmail.com>
	 * // Date: Mon Nov 7 05:38:37 2022 -0600
	 * //
	 * //     generate open-source system
	 *
	 * @since 5.0.0
	 */
	commitEntry(options?: {
		/**
		 * Set to \`true\` to generate a merge message line.
		 *
		 * @default faker.datatype.boolean({ probability: 0.2 })
		 */
		merge?: boolean;
		/**
		 * Choose the end of line character to use.
		 *
		 * - 'LF' = '\\n',
		 * - 'CRLF' = '\\r\\n'
		 *
		 * @default 'CRLF'
		 */
		eol?: "LF" | "CRLF";
		/**
		 * The date to use as reference point for the commit.
		 *
		 * @default new Date()
		 */
		refDate?: string | Date | number;
	}): string;
	/**
	 * Generates a random commit message.
	 *
	 * @example
	 * faker.git.commitMessage() // 'reboot cross-platform driver'
	 *
	 * @since 5.0.0
	 */
	commitMessage(): string;
	/**
	 * Generates a date string for a git commit using the same format as \`git log\`.
	 *
	 * @param options The optional options object.
	 * @param options.refDate The date to use as reference point for the commit. Defaults to \`faker.defaultRefDate()\`.
	 *
	 * @example
	 * faker.git.commitDate() // 'Mon Nov 7 14:40:58 2022 +0600'
	 * faker.git.commitDate({ refDate: '2020-01-01' }) // 'Tue Dec 31 05:40:59 2019 -0400'
	 *
	 * @since 8.0.0
	 */
	commitDate(options?: {
		/**
		 * The date to use as reference point for the commit.
		 *
		 * @default faker.defaultRefDate()
		 */
		refDate?: string | Date | number;
	}): string;
	/**
	 * Generates a random commit sha.
	 *
	 * By default, the length of the commit sha is 40 characters.
	 *
	 * For a shorter commit sha, use the \`length\` option.
	 *
	 * Usual short commit sha length is:
	 * - 7 for GitHub
	 * - 8 for GitLab
	 *
	 * @param options Options for the commit sha.
	 * @param options.length The length of the commit sha. Defaults to \`40\`.
	 *
	 * @example
	 * faker.git.commitSha() // '2c6e3880fd94ddb7ef72d34e683cdc0c47bec6e6'
	 * faker.git.commitSha({ length: 7 }) // 'dbee57b'
	 * faker.git.commitSha({ length: 8 }) // '0e52376a'
	 *
	 * @since 5.0.0
	 */
	commitSha(options?: {
		/**
		 * The length of the commit sha.
		 *
		 * @default 40
		 */
		length?: number;
	}): string;
}
/**
 * Module to generate hacker/IT words and phrases.
 *
 * ### Overview
 *
 * There are methods for different parts of speech, such as [\`abbreviation()\`](https://fakerjs.dev/api/hacker.html#abbreviation), [\`adjective()\`](https://fakerjs.dev/api/hacker.html#adjective), [\`noun()\`](https://fakerjs.dev/api/hacker.html#noun), [\`verb()\`](https://fakerjs.dev/api/hacker.html#verb), and [\`ingverb()\`](https://fakerjs.dev/api/hacker.html#ingverb). Alternatively, [\`phrase()\`](https://fakerjs.dev/api/hacker.html#phrase) creates a longer phrase combining these words.
 *
 * ### Related modules
 *
 * Various modules allow for generating other types of words and phrases:
 *
 * - [faker.word](https://fakerjs.dev/api/word.html) uses general vocabulary rather than hacker-specific terms.
 * - [faker.lorem](https://fakerjs.dev/api/lorem.html) uses faux-Latin "lorem ipsum" text.
 * - [faker.company](https://fakerjs.dev/api/company.html) includes corporate catchphrases and buzzwords.
 */
export declare class HackerModule extends ModuleBase {
	/**
	 * Returns a random hacker/IT abbreviation.
	 *
	 * @example
	 * faker.hacker.abbreviation() // 'THX'
	 *
	 * @since 2.0.1
	 */
	abbreviation(): string;
	/**
	 * Returns a random hacker/IT adjective.
	 *
	 * @example
	 * faker.hacker.adjective() // 'cross-platform'
	 *
	 * @since 2.0.1
	 */
	adjective(): string;
	/**
	 * Returns a random hacker/IT noun.
	 *
	 * @example
	 * faker.hacker.noun() // 'system'
	 *
	 * @since 2.0.1
	 */
	noun(): string;
	/**
	 * Returns a random hacker/IT verb.
	 *
	 * @example
	 * faker.hacker.verb() // 'copy'
	 *
	 * @since 2.0.1
	 */
	verb(): string;
	/**
	 * Returns a random hacker/IT verb for continuous actions (en: ing suffix; e.g. hacking).
	 *
	 * @example
	 * faker.hacker.ingverb() // 'navigating'
	 *
	 * @since 2.0.1
	 */
	ingverb(): string;
	/**
	 * Generates a random hacker/IT phrase.
	 *
	 * @example
	 * faker.hacker.phrase()
	 * // 'If we override the card, we can get to the HDD feed through the back-end HDD sensor!'
	 *
	 * @since 2.0.1
	 */
	phrase(): string;
}
/**
 * Module with various helper methods providing basic (seed-dependent) operations useful for implementing faker methods (without methods requiring localized data).
 */
export declare class SimpleHelpersModule extends SimpleModuleBase {
	/**
	 * Slugifies the given string.
	 * For that all spaces (\` \`) are replaced by hyphens (\`-\`)
	 * and most non word characters except for dots and hyphens will be removed.
	 *
	 * @param string The input to slugify. Defaults to \`''\`.
	 *
	 * @example
	 * faker.helpers.slugify() // ''
	 * faker.helpers.slugify("Hello world!") // 'Hello-world'
	 *
	 * @since 2.0.1
	 */
	slugify(string?: string): string;
	/**
	 * Parses the given string symbol by symbols and replaces the placeholder appropriately.
	 *
	 * - \`#\` will be replaced with a digit (\`0\` - \`9\`).
	 * - \`?\` will be replaced with an upper letter ('A' - 'Z')
	 * - and \`*\` will be replaced with either a digit or letter.
	 *
	 * @param string The template string to parse. Defaults to \`''\`.
	 *
	 * @example
	 * faker.helpers.replaceSymbols() // ''
	 * faker.helpers.replaceSymbols('#####') // '98441'
	 * faker.helpers.replaceSymbols('?????') // 'ZYRQQ'
	 * faker.helpers.replaceSymbols('*****') // '4Z3P7'
	 * faker.helpers.replaceSymbols('Your pin is: #?*#?*') // '0T85L1'
	 *
	 * @since 3.0.0
	 */
	replaceSymbols(string?: string): string;
	/**
	 * Replaces the symbols and patterns in a credit card schema including Luhn checksum.
	 *
	 * This method supports both range patterns \`[4-9]\` as well as the patterns used by \`replaceSymbolWithNumber()\`.
	 * \`L\` will be replaced with the appropriate Luhn checksum.
	 *
	 * @param string The credit card format pattern. Defaults to \`'6453-####-####-####-###L'\`.
	 * @param symbol The symbol to replace with a digit. Defaults to \`'#'\`.
	 *
	 * @example
	 * faker.helpers.replaceCreditCardSymbols() // '6453-4876-8626-8995-3771'
	 * faker.helpers.replaceCreditCardSymbols('1234-[4-9]-##!!-L') // '1234-9-5298-2'
	 *
	 * @since 5.0.0
	 */
	replaceCreditCardSymbols(string?: string, symbol?: string): string;
	/**
	 * Generates a string matching the given regex like expressions.
	 *
	 * This function doesn't provide full support of actual \`RegExp\`.
	 * Features such as grouping, anchors and character classes are not supported.
	 * If you are looking for a library that randomly generates strings based on
	 * \`RegExp\`s, see [randexp.js](https://github.com/fent/randexp.js)
	 *
	 * Supported patterns:
	 * - \`x{times}\` => Repeat the \`x\` exactly \`times\` times.
	 * - \`x{min,max}\` => Repeat the \`x\` \`min\` to \`max\` times.
	 * - \`[x-y]\` => Randomly get a character between \`x\` and \`y\` (inclusive).
	 * - \`[x-y]{times}\` => Randomly get a character between \`x\` and \`y\` (inclusive) and repeat it \`times\` times.
	 * - \`[x-y]{min,max}\` => Randomly get a character between \`x\` and \`y\` (inclusive) and repeat it \`min\` to \`max\` times.
	 * - \`[^...]\` => Randomly get an ASCII number or letter character that is not in the given range. (e.g. \`[^0-9]\` will get a random non-numeric character).
	 * - \`[-...]\` => Include dashes in the range. Must be placed after the negate character \`^\` and before any character sets if used (e.g. \`[^-0-9]\` will not get any numeric characters or dashes).
	 * - \`/[x-y]/i\` => Randomly gets an uppercase or lowercase character between \`x\` and \`y\` (inclusive).
	 * - \`x?\` => Randomly decide to include or not include \`x\`.
	 * - \`[x-y]?\` => Randomly decide to include or not include characters between \`x\` and \`y\` (inclusive).
	 * - \`x*\` => Repeat \`x\` 0 or more times.
	 * - \`[x-y]*\` => Repeat characters between \`x\` and \`y\` (inclusive) 0 or more times.
	 * - \`x+\` => Repeat \`x\` 1 or more times.
	 * - \`[x-y]+\` => Repeat characters between \`x\` and \`y\` (inclusive) 1 or more times.
	 * - \`.\` => returns a wildcard ASCII character that can be any number, character or symbol. Can be combined with quantifiers as well.
	 *
	 * @param pattern The template string/RegExp to generate a matching string for.
	 *
	 * @throws If min value is more than max value in quantifier, e.g. \`#{10,5}\`.
	 * @throws If an invalid quantifier symbol is passed in.
	 *
	 * @example
	 * faker.helpers.fromRegExp('#{5}') // '#####'
	 * faker.helpers.fromRegExp('#{2,9}') // '#######'
	 * faker.helpers.fromRegExp('[1-7]') // '5'
	 * faker.helpers.fromRegExp('#{3}test[1-5]') // '###test3'
	 * faker.helpers.fromRegExp('[0-9a-dmno]') // '5'
	 * faker.helpers.fromRegExp('[^a-zA-Z0-8]') // '9'
	 * faker.helpers.fromRegExp('[a-d0-6]{2,8}') // 'a0dc45b0'
	 * faker.helpers.fromRegExp('[-a-z]{5}') // 'a-zab'
	 * faker.helpers.fromRegExp(/[A-Z0-9]{4}-[A-Z0-9]{4}/) // 'BS4G-485H'
	 * faker.helpers.fromRegExp(/[A-Z]{5}/i) // 'pDKfh'
	 * faker.helpers.fromRegExp(/.{5}/) // '14(#B'
	 * faker.helpers.fromRegExp(/Joh?n/) // 'Jon'
	 * faker.helpers.fromRegExp(/ABC*DE/) // 'ABDE'
	 * faker.helpers.fromRegExp(/bee+p/) // 'beeeeeeeep'
	 *
	 * @since 8.0.0
	 */
	fromRegExp(pattern: string | RegExp): string;
	/**
	 * Takes an array and randomizes it in place then returns it.
	 *
	 * @template T The type of the elements to shuffle.
	 *
	 * @param list The array to shuffle.
	 * @param options The options to use when shuffling.
	 * @param options.inplace Whether to shuffle the array in place or return a new array. Defaults to \`false\`.
	 *
	 * @example
	 * faker.helpers.shuffle(['a', 'b', 'c'], { inplace: true }) // [ 'b', 'c', 'a' ]
	 *
	 * @since 8.0.0
	 */
	shuffle<const T>(list: T[], options: {
		/**
		 * Whether to shuffle the array in place or return a new array.
		 *
		 * @default false
		 */
		inplace: true;
	}): T[];
	/**
	 * Returns a randomized version of the array.
	 *
	 * @template T The type of the elements to shuffle.
	 *
	 * @param list The array to shuffle.
	 * @param options The options to use when shuffling.
	 * @param options.inplace Whether to shuffle the array in place or return a new array. Defaults to \`false\`.
	 *
	 * @example
	 * faker.helpers.shuffle(['a', 'b', 'c']) // [ 'b', 'c', 'a' ]
	 * faker.helpers.shuffle(['a', 'b', 'c'], { inplace: false }) // [ 'b', 'c', 'a' ]
	 *
	 * @since 2.0.1
	 */
	shuffle<const T>(list: ReadonlyArray<T>, options?: {
		/**
		 * Whether to shuffle the array in place or return a new array.
		 *
		 * @default false
		 */
		inplace?: false;
	}): T[];
	/**
	 * Returns a randomized version of the array.
	 *
	 * @template T The type of the elements to shuffle.
	 *
	 * @param list The array to shuffle.
	 * @param options The options to use when shuffling.
	 * @param options.inplace Whether to shuffle the array in place or return a new array. Defaults to \`false\`.
	 *
	 * @example
	 * faker.helpers.shuffle(['a', 'b', 'c']) // [ 'b', 'c', 'a' ]
	 * faker.helpers.shuffle(['a', 'b', 'c'], { inplace: true }) // [ 'b', 'c', 'a' ]
	 * faker.helpers.shuffle(['a', 'b', 'c'], { inplace: false }) // [ 'b', 'c', 'a' ]
	 *
	 * @since 2.0.1
	 */
	shuffle<const T>(list: T[], options?: {
		/**
		 * Whether to shuffle the array in place or return a new array.
		 *
		 * @default false
		 */
		inplace?: boolean;
	}): T[];
	/**
	 * Takes an array of strings or function that returns a string
	 * and outputs a unique array of strings based on that source.
	 * This method does not store the unique state between invocations.
	 *
	 * If there are not enough unique values to satisfy the length, if
	 * the source is an array, it will only return as many items as are
	 * in the array. If the source is a function, it will return after
	 * a maximum number of attempts has been reached.
	 *
	 * @template T The type of the elements.
	 *
	 * @param source The strings to choose from or a function that generates a string.
	 * @param length The number of elements to generate.
	 *
	 * @example
	 * faker.helpers.uniqueArray(faker.word.sample, 50)
	 * faker.helpers.uniqueArray(faker.definitions.person.first_name, 6)
	 * faker.helpers.uniqueArray(["Hello", "World", "Goodbye"], 2)
	 *
	 * @since 6.0.0
	 */
	uniqueArray<const T>(source: ReadonlyArray<T> | (() => T), length: number): T[];
	/**
	 * Replaces the \`{{placeholder}}\` patterns in the given string mustache style.
	 *
	 * @param str The template string to parse.
	 * @param data The data used to populate the placeholders.
	 * This is a record where the key is the template placeholder,
	 * whereas the value is either a string or a function suitable for \`String.replace()\`.
	 *
	 * @example
	 * faker.helpers.mustache('I found {{count}} instances of "{{word}}".', {
	 *   count: () => \`\${faker.number.int()}\`,
	 *   word: "this word",
	 * }) // 'I found 57591 instances of "this word".'
	 *
	 * @since 2.0.1
	 */
	mustache(str: string | undefined, data: Record<string, string | Parameters<string["replace"]>[1]>): string;
	/**
	 * Returns the result of the callback if the probability check was successful, otherwise \`undefined\`.
	 *
	 * @template TResult The type of result of the given callback.
	 *
	 * @param callback The callback to that will be invoked if the probability check was successful.
	 * @param options The options to use.
	 * @param options.probability The probability (\`[0.00, 1.00]\`) of the callback being invoked. Defaults to \`0.5\`.
	 *
	 * @example
	 * faker.helpers.maybe(() => 'Hello World!') // 'Hello World!'
	 * faker.helpers.maybe(() => 'Hello World!', { probability: 0.1 }) // undefined
	 * faker.helpers.maybe(() => 'Hello World!', { probability: 0.9 }) // 'Hello World!'
	 *
	 * @since 6.3.0
	 */
	maybe<const TResult>(callback: () => TResult, options?: {
		/**
		 * The probability (\`[0.00, 1.00]\`) of the callback being invoked.
		 *
		 * @default 0.5
		 */
		probability?: number;
	}): TResult | undefined;
	/**
	 * Returns a random key from given object.
	 *
	 * @template T The type of the object to select from.
	 *
	 * @param object The object to be used.
	 *
	 * @throws If the given object is empty.
	 *
	 * @example
	 * faker.helpers.objectKey({ myProperty: 'myValue' }) // 'myProperty'
	 *
	 * @since 6.3.0
	 */
	objectKey<const T extends Record<string, unknown>>(object: T): keyof T;
	/**
	 * Returns a random value from given object.
	 *
	 * @template T The type of object to select from.
	 *
	 * @param object The object to be used.
	 *
	 * @throws If the given object is empty.
	 *
	 * @example
	 * faker.helpers.objectValue({ myProperty: 'myValue' }) // 'myValue'
	 *
	 * @since 6.3.0
	 */
	objectValue<const T extends Record<string, unknown>>(object: T): T[keyof T];
	/**
	 * Returns a random \`[key, value]\` pair from the given object.
	 *
	 * @template T The type of the object to select from.
	 *
	 * @param object The object to be used.
	 *
	 * @throws If the given object is empty.
	 *
	 * @example
	 * faker.helpers.objectEntry({ prop1: 'value1', prop2: 'value2' }) // ['prop1', 'value1']
	 *
	 * @since 8.0.0
	 */
	objectEntry<const T extends Record<string, unknown>>(object: T): [
		keyof T,
		T[keyof T]
	];
	/**
	 * Returns random element from the given array.
	 *
	 * @template T The type of the elements to pick from.
	 *
	 * @param array The array to pick the value from.
	 *
	 * @throws If the given array is empty.
	 *
	 * @example
	 * faker.helpers.arrayElement(['cat', 'dog', 'mouse']) // 'dog'
	 *
	 * @since 6.3.0
	 */
	arrayElement<const T>(array: ReadonlyArray<T>): T;
	/**
	 * Returns a weighted random element from the given array. Each element of the array should be an object with two keys \`weight\` and \`value\`.
	 *
	 * - Each \`weight\` key should be a number representing the probability of selecting the value, relative to the sum of the weights. Weights can be any positive float or integer.
	 * - Each \`value\` key should be the corresponding value.
	 *
	 * For example, if there are two values A and B, with weights 1 and 2 respectively, then the probability of picking A is 1/3 and the probability of picking B is 2/3.
	 *
	 * @template T The type of the elements to pick from.
	 *
	 * @param array Array to pick the value from.
	 * @param array[].weight The weight of the value.
	 * @param array[].value The value to pick.
	 *
	 * @example
	 * faker.helpers.weightedArrayElement([{ weight: 5, value: 'sunny' }, { weight: 4, value: 'rainy' }, { weight: 1, value: 'snowy' }]) // 'sunny', 50% of the time, 'rainy' 40% of the time, 'snowy' 10% of the time
	 *
	 * @since 8.0.0
	 */
	weightedArrayElement<const T>(array: ReadonlyArray<{
		/**
		 * The weight of the value.
		 */
		weight: number;
		/**
		 * The value to pick.
		 */
		value: T;
	}>): T;
	/**
	 * Returns a subset with random elements of the given array in random order.
	 *
	 * @template T The type of the elements to pick from.
	 *
	 * @param array Array to pick the value from.
	 * @param count Number or range of elements to pick.
	 *    When not provided, random number of elements will be picked.
	 *    When value exceeds array boundaries, it will be limited to stay inside.
	 *
	 * @example
	 * faker.helpers.arrayElements(['cat', 'dog', 'mouse']) // ['mouse', 'cat']
	 * faker.helpers.arrayElements([1, 2, 3, 4, 5], 2) // [4, 2]
	 * faker.helpers.arrayElements([1, 2, 3, 4, 5], { min: 2, max: 4 }) // [3, 5, 1]
	 *
	 * @since 6.3.0
	 */
	arrayElements<const T>(array: ReadonlyArray<T>, count?: number | {
		/**
		 * The minimum number of elements to pick.
		 */
		min: number;
		/**
		 * The maximum number of elements to pick.
		 */
		max: number;
	}): T[];
	/**
	 * Returns a random value from an Enum object.
	 *
	 * This does the same as \`objectValue\` except that it ignores (the values assigned to) the numeric keys added for TypeScript enums.
	 *
	 * @template T Type of generic enums, automatically inferred by TypeScript.
	 *
	 * @param enumObject Enum to pick the value from.
	 *
	 * @example
	 * enum Color { Red, Green, Blue }
	 * faker.helpers.enumValue(Color) // 1 (Green)
	 *
	 * enum Direction { North = 'North', South = 'South'}
	 * faker.helpers.enumValue(Direction) // 'South'
	 *
	 * enum HttpStatus { Ok = 200, Created = 201, BadRequest = 400, Unauthorized = 401 }
	 * faker.helpers.enumValue(HttpStatus) // 200 (Ok)
	 *
	 * @since 8.0.0
	 */
	enumValue<T extends Record<string | number, string | number>>(enumObject: T): T[keyof T];
	/**
	 * Helper method that converts the given number or range to a number.
	 *
	 * @param numberOrRange The number or range to convert.
	 * @param numberOrRange.min The minimum value for the range.
	 * @param numberOrRange.max The maximum value for the range.
	 *
	 * @example
	 * faker.helpers.rangeToNumber(1) // 1
	 * faker.helpers.rangeToNumber({ min: 1, max: 10 }) // 5
	 *
	 * @since 8.0.0
	 */
	rangeToNumber(numberOrRange: number | {
		/**
		 * The minimum value for the range.
		 */
		min: number;
		/**
		 * The maximum value for the range.
		 */
		max: number;
	}): number;
	/**
	 * Generates an array containing values returned by the given method.
	 *
	 * @template TResult The type of elements.
	 *
	 * @param method The method used to generate the values.
	 * The method will be called with \`(_, index)\`, to allow using the index in the generated value e.g. as id.
	 * @param options The optional options object.
	 * @param options.count The number or range of elements to generate. Defaults to \`3\`.
	 *
	 * @example
	 * faker.helpers.multiple(() => faker.person.firstName()) // [ 'Aniya', 'Norval', 'Dallin' ]
	 * faker.helpers.multiple(() => faker.person.firstName(), { count: 3 }) // [ 'Santos', 'Lavinia', 'Lavinia' ]
	 * faker.helpers.multiple((_, i) => \`\${faker.color.human()}-\${i + 1}\`) // [ 'orange-1', 'orchid-2', 'sky blue-3' ]
	 *
	 * @since 8.0.0
	 */
	multiple<const TResult>(method: (v: unknown, index: number) => TResult, options?: {
		/**
		 * The number or range of elements to generate.
		 *
		 * @default 3
		 */
		count?: number | {
			/**
			 * The minimum value for the range.
			 */
			min: number;
			/**
			 * The maximum value for the range.
			 */
			max: number;
		};
	}): TResult[];
}
/**
 * Module with various helper methods providing basic (seed-dependent) operations useful for implementing faker methods.
 *
 * ### Overview
 *
 * A particularly helpful method is [\`arrayElement()\`](https://fakerjs.dev/api/helpers.html#arrayelement) which returns a random element from an array. This is useful when adding custom data that Faker doesn't contain.
 *
 * There are alternatives of this method for objects ([\`objectKey()\`](https://fakerjs.dev/api/helpers.html#objectkey) and [\`objectValue()\`](https://fakerjs.dev/api/helpers.html#objectvalue)) and enums ([\`enumValue()\`](https://fakerjs.dev/api/helpers.html#enumvalue)). You can also return multiple elements ([\`arrayElements()\`](https://fakerjs.dev/api/helpers.html#arrayelements)) or elements according to a weighting ([\`weightedArrayElement()\`](https://fakerjs.dev/api/helpers.html#weightedarrayelement)).
 *
 * A number of methods can generate strings according to various patterns: [\`replaceSymbols()\`](https://fakerjs.dev/api/helpers.html#replacesymbols) and [\`fromRegExp()\`](https://fakerjs.dev/api/helpers.html#fromregexp).
 */
export declare class HelpersModule extends SimpleHelpersModule {
	protected readonly faker: Faker;
	constructor(faker: Faker);
	/**
	 * Generator for combining faker methods based on a static string input.
	 *
	 * Note: We recommend using string template literals instead of \`fake()\`,
	 * which are faster and strongly typed (if you are using TypeScript),
	 * e.g. \`\`const address = \`\${faker.location.zipCode()} \${faker.location.city()}\`;\`\`
	 *
	 * This method is useful if you have to build a random string from a static, non-executable source
	 * (e.g. string coming from a user, stored in a database or a file).
	 *
	 * It checks the given string for placeholders and replaces them by calling faker methods:
	 *
	 * \`\`\`js
	 * const hello = faker.helpers.fake('Hi, my name is {{person.firstName}} {{person.lastName}}!');
	 * \`\`\`
	 *
	 * This would use the \`faker.person.firstName()\` and \`faker.person.lastName()\` method to resolve the placeholders respectively.
	 *
	 * It is also possible to provide parameters. At first, they will be parsed as json,
	 * and if that isn't possible, we will fall back to string:
	 *
	 * \`\`\`js
	 * const message = faker.helpers.fake('You can call me at {{phone.number(+!# !## #### #####!)}}.');
	 * \`\`\`
	 *
	 * It is also possible to use multiple parameters (comma separated).
	 *
	 * \`\`\`js
	 * const message = faker.helpers.fake('Your pin is {{string.numeric(4, {"allowLeadingZeros": true})}}.');
	 * \`\`\`
	 *
	 * It is also NOT possible to use any non-faker methods or plain javascript in such patterns.
	 *
	 * @param pattern The pattern string that will get interpolated.
	 *
	 * @see faker.helpers.mustache(): For using custom functions to resolve templates.
	 *
	 * @example
	 * faker.helpers.fake('{{person.lastName}}') // 'Barrows'
	 * faker.helpers.fake('{{person.lastName}}, {{person.firstName}} {{person.suffix}}') // 'Durgan, Noe MD'
	 * faker.helpers.fake('This is static test.') // 'This is static test.'
	 * faker.helpers.fake('Good Morning {{person.firstName}}!') // 'Good Morning Estelle!'
	 * faker.helpers.fake('You can visit me at {{location.streetAddress(true)}}.') // 'You can visit me at 3393 Ronny Way Apt. 742.'
	 * faker.helpers.fake('I flipped the coin and got: {{helpers.arrayElement(["heads", "tails"])}}') // 'I flipped the coin and got: tails'
	 * faker.helpers.fake('Your PIN number is: {{string.numeric(4, {"exclude": ["0"]})}}') // 'Your PIN number is: 4834'
	 *
	 * @since 7.4.0
	 */
	fake(pattern: string): string;
	/**
	 * Generator for combining faker methods based on an array containing static string inputs.
	 *
	 * Note: We recommend using string template literals instead of \`fake()\`,
	 * which are faster and strongly typed (if you are using TypeScript),
	 * e.g. \`\`const address = \`\${faker.location.zipCode()} \${faker.location.city()}\`;\`\`
	 *
	 * This method is useful if you have to build a random string from a static, non-executable source
	 * (e.g. string coming from a user, stored in a database or a file).
	 *
	 * It checks the given string for placeholders and replaces them by calling faker methods:
	 *
	 * \`\`\`js
	 * const hello = faker.helpers.fake(['Hi, my name is {{person.firstName}} {{person.lastName}}!']);
	 * \`\`\`
	 *
	 * This would use the \`faker.person.firstName()\` and \`faker.person.lastName()\` method to resolve the placeholders respectively.
	 *
	 * It is also possible to provide parameters. At first, they will be parsed as json,
	 * and if that isn't possible, it will fall back to string:
	 *
	 * \`\`\`js
	 * const message = faker.helpers.fake([
	 *   'You can call me at {{phone.number(+!# !## #### #####!)}}.',
	 *   'My email is {{internet.email}}.',
	 * ]);
	 * \`\`\`
	 *
	 * It is also possible to use multiple parameters (comma separated).
	 *
	 * \`\`\`js
	 * const message = faker.helpers.fake(['Your pin is {{string.numeric(4, {"allowLeadingZeros": true})}}.']);
	 * \`\`\`
	 *
	 * It is also NOT possible to use any non-faker methods or plain javascript in such patterns.
	 *
	 * @param patterns The array to select a pattern from, that will then get interpolated. Must not be empty.
	 *
	 * @see faker.helpers.mustache(): For using custom functions to resolve templates.
	 *
	 * @example
	 * faker.helpers.fake(['A: {{person.firstName}}', 'B: {{person.lastName}}']) // 'A: Barry'
	 *
	 * @since 8.0.0
	 */
	fake(patterns: ReadonlyArray<string>): string;
	/**
	 * Generator for combining faker methods based on a static string input or an array of static string inputs.
	 *
	 * Note: We recommend using string template literals instead of \`fake()\`,
	 * which are faster and strongly typed (if you are using TypeScript),
	 * e.g. \`\`const address = \`\${faker.location.zipCode()} \${faker.location.city()}\`;\`\`
	 *
	 * This method is useful if you have to build a random string from a static, non-executable source
	 * (e.g. string coming from a user, stored in a database or a file).
	 *
	 * It checks the given string for placeholders and replaces them by calling faker methods:
	 *
	 * \`\`\`js
	 * const hello = faker.helpers.fake('Hi, my name is {{person.firstName}} {{person.lastName}}!');
	 * \`\`\`
	 *
	 * This would use the \`faker.person.firstName()\` and \`faker.person.lastName()\` method to resolve the placeholders respectively.
	 *
	 * It is also possible to provide parameters. At first, they will be parsed as json,
	 * and if that isn't possible, it will fall back to string:
	 *
	 * \`\`\`js
	 * const message = faker.helpers.fake('You can call me at {{phone.number(+!# !## #### #####!)}}.');
	 * \`\`\`
	 *
	 * It is also possible to use multiple parameters (comma separated).
	 *
	 * \`\`\`js
	 * const message = faker.helpers.fake('Your pin is {{string.numeric(4, {"allowLeadingZeros": true})}}.');
	 * \`\`\`
	 *
	 * It is also NOT possible to use any non-faker methods or plain javascript in such patterns.
	 *
	 * @param pattern The pattern string that will get interpolated. If an array is passed, a random element will be picked and interpolated.
	 *
	 * @see faker.helpers.mustache(): For using custom functions to resolve templates.
	 *
	 * @example
	 * faker.helpers.fake('{{person.lastName}}') // 'Barrows'
	 * faker.helpers.fake('{{person.lastName}}, {{person.firstName}} {{person.suffix}}') // 'Durgan, Noe MD'
	 * faker.helpers.fake('This is static test.') // 'This is static test.'
	 * faker.helpers.fake('Good Morning {{person.firstName}}!') // 'Good Morning Estelle!'
	 * faker.helpers.fake('You can visit me at {{location.streetAddress(true)}}.') // 'You can visit me at 3393 Ronny Way Apt. 742.'
	 * faker.helpers.fake('I flipped the coin and got: {{helpers.arrayElement(["heads", "tails"])}}') // 'I flipped the coin and got: tails'
	 * faker.helpers.fake(['A: {{person.firstName}}', 'B: {{person.lastName}}']) // 'A: Barry'
	 *
	 * @since 7.4.0
	 */
	fake(pattern: string | ReadonlyArray<string>): string;
}
/**
 * Module to generate images.
 *
 * ### Overview
 *
 * For a random image, use [\`url()\`](https://fakerjs.dev/api/image.html#url). This will not return the image directly but a URL pointing to an image from one of two demo image providers "Picsum" and "LoremFlickr". You can request an image specifically from one of two providers using [\`urlLoremFlickr()\`](https://fakerjs.dev/api/image.html#urlloremflickr) or [\`urlPicsumPhotos()\`](https://fakerjs.dev/api/image.html#urlpicsumphotos).
 *
 * For a random placeholder image containing only solid color and text, use [\`urlPlaceholder()\`](https://fakerjs.dev/api/image.html#urlplaceholder) (uses a third-party service) or [\`dataUri()\`](https://fakerjs.dev/api/image.html#datauri) (returns a SVG string).
 *
 * For a random user avatar image, use [\`avatar()\`](https://fakerjs.dev/api/image.html#avatar).
 *
 * If you need more control over the content of the images, you can pass a \`category\` parameter e.g. \`'cat'\` or \`'nature'\` to [\`urlLoremFlickr()\`](https://fakerjs.dev/api/image.html#urlloremflickr) or simply use [\`faker.helpers.arrayElement()\`](https://fakerjs.dev/api/helpers.html#arrayelement) with your own array of image URLs.
 */
export declare class ImageModule extends ModuleBase {
	/**
	 * Generates a random avatar image url.
	 *
	 * @example
	 * faker.image.avatar()
	 * // 'https://avatars.githubusercontent.com/u/97165289'
	 *
	 * @since 2.0.1
	 */
	avatar(): string;
	/**
	 * Generates a random avatar from GitHub.
	 *
	 * @example
	 * faker.image.avatarGitHub()
	 * // 'https://avatars.githubusercontent.com/u/97165289'
	 *
	 * @since 8.0.0
	 */
	avatarGitHub(): string;
	/**
	 * Generates a random avatar from \`https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar\`.
	 *
	 * @example
	 * faker.image.avatarLegacy()
	 * // 'https://cloudflare-ipfs.com/ipfs/Qmd3W5DuhgHirLHGVixi6V76LhCkZUz6pnFt5AJBiyvHye/avatar/170.jpg'
	 *
	 * @since 8.0.0
	 *
	 * @deprecated The links are no longer working. Use \`avatar()\` instead.
	 */
	avatarLegacy(): string;
	/**
	 * Generates a random image url.
	 *
	 * @param options Options for generating a URL for an image.
	 * @param options.width The width of the image. Defaults to a random integer between \`1\` and \`3999\`.
	 * @param options.height The height of the image. Defaults to a random integer between \`1\` and \`3999\`.
	 *
	 * @example
	 * faker.image.url() // 'https://loremflickr.com/640/480?lock=1234'
	 *
	 * @since 8.0.0
	 */
	url(options?: {
		/**
		 * The width of the image.
		 *
		 * @default faker.number.int({ min: 1, max: 3999 })
		 */
		width?: number;
		/**
		 * The height of the image.
		 *
		 * @default faker.number.int({ min: 1, max: 3999 })
		 */
		height?: number;
	}): string;
	/**
	 * Generates a random image url provided via https://loremflickr.com.
	 *
	 * @param options Options for generating a URL for an image.
	 * @param options.width The width of the image. Defaults to a random integer between \`1\` and \`3999\`.
	 * @param options.height The height of the image. Defaults to a random integer between \`1\` and \`3999\`.
	 * @param options.category Category to use for the image.
	 *
	 * @example
	 * faker.image.urlLoremFlickr() // 'https://loremflickr.com/640/480?lock=1234'
	 * faker.image.urlLoremFlickr({ width: 128 }) // 'https://loremflickr.com/128/480?lock=1234'
	 * faker.image.urlLoremFlickr({ height: 128 }) // 'https://loremflickr.com/640/128?lock=1234'
	 * faker.image.urlLoremFlickr({ category: 'nature' }) // 'https://loremflickr.com/640/480/nature?lock=1234'
	 *
	 * @since 8.0.0
	 */
	urlLoremFlickr(options?: {
		/**
		 * The width of the image.
		 *
		 * @default faker.number.int({ min: 1, max: 3999 })
		 */
		width?: number;
		/**
		 * The height of the image.
		 *
		 * @default faker.number.int({ min: 1, max: 3999 })
		 */
		height?: number;
		/**
		 * Category to use for the image.
		 */
		category?: string;
	}): string;
	/**
	 * Generates a random image url provided via https://picsum.photos.
	 *
	 * @param options Options for generating a URL for an image.
	 * @param options.width The width of the image. Defaults to a random integer between \`1\` and \`3999\`.
	 * @param options.height The height of the image. Defaults to a random integer between \`1\` and \`3999\`.
	 * @param options.grayscale Whether the image should be grayscale. Defaults to a random boolean value.
	 * @param options.blur Whether the image should be blurred. \`0\` disables the blur. Defaults to a random integer between \`0\` and \`10\`.
	 *
	 * @example
	 * faker.image.urlPicsumPhotos() // 'https://picsum.photos/seed/NWbJM2B/640/480'
	 * faker.image.urlPicsumPhotos({ width: 128 }) // 'https://picsum.photos/seed/NWbJM2B/128/480'
	 * faker.image.urlPicsumPhotos({ height: 128 }) // 'https://picsum.photos/seed/NWbJM2B/640/128'
	 * faker.image.urlPicsumPhotos({ grayscale: true }) // 'https://picsum.photos/seed/NWbJM2B/640/480?grayscale'
	 * faker.image.urlPicsumPhotos({ blur: 4 }) // 'https://picsum.photos/seed/NWbJM2B/640/480?blur=4'
	 * faker.image.urlPicsumPhotos({ blur: 4, grayscale: true }) // 'https://picsum.photos/seed/NWbJM2B/640/480?grayscale&blur=4'
	 *
	 * @since 8.0.0
	 */
	urlPicsumPhotos(options?: {
		/**
		 * The width of the image.
		 *
		 * @default faker.number.int({ min: 1, max: 3999 })
		 */
		width?: number;
		/**
		 * The height of the image.
		 *
		 * @default faker.number.int({ min: 1, max: 3999 })
		 */
		height?: number;
		/**
		 * Whether the image should be grayscale.
		 *
		 * @default faker.datatype.boolean()
		 */
		grayscale?: boolean;
		/**
		 * Whether the image should be blurred. \`0\` disables the blur.
		 *
		 * @default faker.number.int({ max: 10 })
		 */
		blur?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10;
	}): string;
	/**
	 * Generates a random image url provided via https://via.placeholder.com/.
	 *
	 * @param options Options for generating a URL for an image.
	 * @param options.width The width of the image. Defaults to a random number between 1 and 3999.
	 * @param options.height The height of the image. Defaults to a random number between 1 and 3999.
	 * @param options.backgroundColor The background color of the image. Defaults to a random hex color.
	 * @param options.textColor The text color of the image. Defaults to a random hex color.
	 * @param options.format The format of the image. Defaults to a random format.
	 * @param options.text The text to display on the image. Defaults to a random string.
	 *
	 * @example
	 * faker.image.urlPlaceholder() // 'https://via.placeholder.com/150x180/FF0000/FFFFFF.webp?text=lorem'
	 * faker.image.urlPlaceholder({ width: 128 }) // 'https://via.placeholder.com/128x180/FF0000/FFFFFF.webp?text=lorem'
	 * faker.image.urlPlaceholder({ height: 128 }) // 'https://via.placeholder.com/150x128/FF0000/FFFFFF.webp?text=lorem'
	 * faker.image.urlPlaceholder({ backgroundColor: '000000' }) // 'https://via.placeholder.com/150x180/000000/FFFFFF.webp?text=lorem'
	 * faker.image.urlPlaceholder({ textColor: '000000' }) // 'https://via.placeholder.com/150x180/FF0000/000000.webp?text=lorem'
	 * faker.image.urlPlaceholder({ format: 'png' }) // 'https://via.placeholder.com/150x180/FF0000/FFFFFF.png?text=lorem'
	 * faker.image.urlPlaceholder({ text: 'lorem ipsum' }) // 'https://via.placeholder.com/150x180/FF0000/FFFFFF.webp?text=lorem+ipsum'
	 * faker.image.urlPlaceholder({ width: 128, height: 128, backgroundColor: '000000', textColor: 'FF0000', format: 'png', text: 'lorem ipsum' }) // 'https://via.placeholder.com/128x128/000000/FF0000.png?text=lorem+ipsum'
	 *
	 * @since 8.0.0
	 */
	urlPlaceholder(options?: {
		/**
		 * The width of the image.
		 *
		 * @default faker.number.int({ min: 1, max: 3999 })
		 */
		width?: number;
		/**
		 * The height of the image.
		 *
		 * @default faker.number.int({ min: 1, max: 3999 })
		 */
		height?: number;
		/**
		 * The background color of the image.
		 *
		 * @default faker.color.rgb({ format: 'hex', prefix: '' })
		 */
		backgroundColor?: string;
		/**
		 * The text color of the image.
		 *
		 * @default faker.color.rgb({ format: 'hex', prefix: '' })
		 */
		textColor?: string;
		/**
		 * The format of the image.
		 *
		 * @default faker.helpers.arrayElement(['gif', 'jpeg', 'jpg', 'png', 'webp'])
		 */
		format?: "gif" | "jpeg" | "jpg" | "png" | "webp";
		/**
		 * The text to display on the image.
		 *
		 * @default faker.lorem.words()
		 */
		text?: string;
	}): string;
	/**
	 * Generates a random data uri containing an URL-encoded SVG image or a Base64-encoded SVG image.
	 *
	 * @param options Options for generating a data uri.
	 * @param options.width The width of the image. Defaults to a random integer between \`1\` and \`3999\`.
	 * @param options.height The height of the image. Defaults to a random integer between \`1\` and \`3999\`.
	 * @param options.color The color of the image. Must be a color supported by svg. Defaults to a random color.
	 * @param options.type The type of the image. Defaults to a random type.
	 *
	 * @example
	 * faker.image.dataUri() // 'data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http...'
	 * faker.image.dataUri({ type: 'svg-base64' }) // 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3...'
	 *
	 * @since 4.0.0
	 */
	dataUri(options?: {
		/**
		 * The width of the image.
		 *
		 * @default faker.number.int({ min: 1, max: 3999 })
		 */
		width?: number;
		/**
		 * The height of the image.
		 *
		 * @default faker.number.int({ min: 1, max: 3999 })
		 */
		height?: number;
		/**
		 * The color of the image. Must be a color supported by svg.
		 *
		 * @default faker.color.rgb()
		 */
		color?: string;
		/**
		 * The type of the image to return. Consisting of
		 * the file extension and the used encoding.
		 *
		 * @default faker.helpers.arrayElements(['svg-uri', 'svg-base64'])
		 */
		type?: "svg-uri" | "svg-base64";
	}): string;
}
export type EmojiType = "smiley" | "body" | "person" | "nature" | "food" | "travel" | "activity" | "object" | "symbol" | "flag";
export type HTTPStatusCodeType = "informational" | "success" | "clientError" | "serverError" | "redirection";
export type HTTPProtocolType = "http" | "https";
export declare enum IPv4Network {
	/**
	 * Equivalent to: \`0.0.0.0/0\`
	 */
	Any = "any",
	/**
	 * Equivalent to: \`127.0.0.0/8\`
	 *
	 * @see [RFC1122](https://www.rfc-editor.org/rfc/rfc1122)
	 */
	Loopback = "loopback",
	/**
	 * Equivalent to: \`10.0.0.0/8\`
	 *
	 * @see [RFC1918](https://www.rfc-editor.org/rfc/rfc1918)
	 */
	PrivateA = "private-a",
	/**
	 * Equivalent to: \`172.16.0.0/12\`
	 *
	 * @see [RFC1918](https://www.rfc-editor.org/rfc/rfc1918)
	 */
	PrivateB = "private-b",
	/**
	 * Equivalent to: \`192.168.0.0/16\`
	 *
	 * @see [RFC1918](https://www.rfc-editor.org/rfc/rfc1918)
	 */
	PrivateC = "private-c",
	/**
	 * Equivalent to: \`192.0.2.0/24\`
	 *
	 * @see [RFC5737](https://www.rfc-editor.org/rfc/rfc5737)
	 */
	TestNet1 = "test-net-1",
	/**
	 * Equivalent to: \`198.51.100.0/24\`
	 *
	 * @see [RFC5737](https://www.rfc-editor.org/rfc/rfc5737)
	 */
	TestNet2 = "test-net-2",
	/**
	 * Equivalent to: \`203.0.113.0/24\`
	 *
	 * @see [RFC5737](https://www.rfc-editor.org/rfc/rfc5737)
	 */
	TestNet3 = "test-net-3",
	/**
	 * Equivalent to: \`169.254.0.0/16\`
	 *
	 * @see [RFC3927](https://www.rfc-editor.org/rfc/rfc3927)
	 */
	LinkLocal = "link-local",
	/**
	 * Equivalent to: \`224.0.0.0/4\`
	 *
	 * @see [RFC5771](https://www.rfc-editor.org/rfc/rfc5771)
	 */
	Multicast = "multicast"
}
export type IPv4NetworkType = \`\${IPv4Network}\`;
/**
 * Module to generate internet related entries.
 *
 * ### Overview
 *
 * For user accounts, you may need an [\`email()\`](https://fakerjs.dev/api/internet.html#email) and a [\`password()\`](https://fakerjs.dev/api/internet.html#password), as well as a ASCII [\`username()\`](https://fakerjs.dev/api/internet.html#username) or Unicode [\`displayName()\`](https://fakerjs.dev/api/internet.html#displayname). Since the emails generated could coincidentally be real email addresses, you should not use these for sending real email addresses. If this is a concern, use [\`exampleEmail()\`](https://fakerjs.dev/api/internet.html#exampleemail) instead.
 *
 * For websites, you can generate a [\`domainName()\`](https://fakerjs.dev/api/internet.html#domainname) or a full [\`url()\`](https://fakerjs.dev/api/internet.html#url).
 *
 * To make your data more 🔥, you can use [\`emoji()\`](https://fakerjs.dev/api/internet.html#emoji).
 *
 * You also have access to a number of the more technical elements of web requests, such as [\`httpMethod\`](https://fakerjs.dev/api/internet.html#httpmethod), [\`httpStatusCode\`](https://fakerjs.dev/api/internet.html#httpstatuscode), [\`ip\`](https://fakerjs.dev/api/internet.html#ip), [\`mac\`](https://fakerjs.dev/api/internet.html#mac), [\`userAgent\`](https://fakerjs.dev/api/internet.html#useragent), and [\`port\`](https://fakerjs.dev/api/internet.html#port).
 */
export declare class InternetModule extends ModuleBase {
	/**
	 * Generates an email address using the given person's name as base.
	 *
	 * @param options The options to use.
	 * @param options.firstName The optional first name to use. If not specified, a random one will be chosen.
	 * @param options.lastName The optional last name to use. If not specified, a random one will be chosen.
	 * @param options.provider The mail provider domain to use. If not specified, a random free mail provider will be chosen.
	 * @param options.allowSpecialCharacters Whether special characters such as \`\`.!#$%&'*+-/=?^_\`{|}~\`\` should be included
	 * in the email address. Defaults to \`false\`.
	 *
	 * @example
	 * faker.internet.email() // 'Kassandra4@hotmail.com'
	 * faker.internet.email({ firstName: 'Jeanne'}) // 'Jeanne63@yahoo.com'
	 * faker.internet.email({ firstName: 'Jeanne'}) // 'Jeanne_Smith63@yahoo.com'
	 * faker.internet.email({ firstName: 'Jeanne', lastName: 'Doe' }) // 'Jeanne.Doe63@yahoo.com'
	 * faker.internet.email({ firstName: 'Jeanne', lastName: 'Doe', provider: 'example.fakerjs.dev' }) // 'Jeanne_Doe88@example.fakerjs.dev'
	 * faker.internet.email({ firstName: 'Jeanne', lastName: 'Doe', provider: 'example.fakerjs.dev', allowSpecialCharacters: true }) // 'Jeanne%Doe88@example.fakerjs.dev'
	 *
	 * @since 2.0.1
	 */
	email(options?: {
		/**
		 * The optional first name to use.
		 *
		 * @default faker.person.firstName()
		 */
		firstName?: string;
		/**
		 * The optional last name to use.
		 *
		 * @default faker.person.lastName()
		 */
		lastName?: string;
		/**
		 * The mail provider domain to use. If not specified, a random free mail provider will be chosen.
		 */
		provider?: string;
		/**
		 * Whether special characters such as \`\`.!#$%&'*+-/=?^_\`{|}~\`\` should be included in the email address.
		 *
		 * @default false
		 */
		allowSpecialCharacters?: boolean;
	}): string;
	/**
	 * Generates an email address using an example mail provider using the given person's name as base.
	 *
	 * @param options An options object.
	 * @param options.firstName The optional first name to use. If not specified, a random one will be chosen.
	 * @param options.lastName The optional last name to use. If not specified, a random one will be chosen.
	 * @param options.allowSpecialCharacters Whether special characters such as \`\`.!#$%&'*+-/=?^_\`{|}~\`\` should be included
	 * in the email address. Defaults to \`false\`.
	 *
	 * @example
	 * faker.internet.exampleEmail() // 'Helmer.Graham23@example.com'
	 * faker.internet.exampleEmail({ firstName: 'Jeanne' }) // 'Jeanne96@example.net'
	 * faker.internet.exampleEmail({ firstName: 'Jeanne' }) // 'Jeanne.Smith96@example.net'
	 * faker.internet.exampleEmail({ firstName: 'Jeanne', lastName: 'Doe' }) // 'Jeanne_Doe96@example.net'
	 * faker.internet.exampleEmail({ firstName: 'Jeanne', lastName: 'Doe', allowSpecialCharacters: true }) // 'Jeanne%Doe88@example.com'
	 *
	 * @since 3.1.0
	 */
	exampleEmail(options?: {
		/**
		 * The optional first name to use.
		 *
		 * @default faker.person.firstName()
		 */
		firstName?: string;
		/**
		 * The optional last name to use.
		 *
		 * @default faker.person.lastName()
		 */
		lastName?: string;
		/**
		 * Whether special characters such as \`\`.!#$%&'*+-/=?^_\`{|}~\`\` should be included in the email address.
		 *
		 * @default false
		 */
		allowSpecialCharacters?: boolean;
	}): string;
	/**
	 * Generates a username using the given person's name as base.
	 * The resulting username may use neither, one or both of the names provided.
	 * This will always return a plain ASCII string.
	 * Some basic stripping of accents and transliteration of characters will be done.
	 *
	 * @param options An options object.
	 * @param options.firstName The optional first name to use. If not specified, a random one will be chosen.
	 * @param options.lastName The optional last name to use. If not specified, a random one will be chosen.
	 *
	 * @see faker.internet.displayName(): For generating an Unicode display name.
	 *
	 * @example
	 * faker.internet.userName() // 'Nettie_Zboncak40'
	 * faker.internet.userName({ firstName: 'Jeanne' }) // 'Jeanne98'
	 * faker.internet.userName({ firstName: 'Jeanne' }) // 'Jeanne.Smith98'
	 * faker.internet.userName({ firstName: 'Jeanne', lastName: 'Doe'}) // 'Jeanne_Doe98'
	 * faker.internet.userName({ firstName: 'John', lastName: 'Doe' }) // 'John.Doe'
	 * faker.internet.userName({ firstName: 'Hélene', lastName: 'Müller' }) // 'Helene_Muller11'
	 * faker.internet.userName({ firstName: 'Фёдор', lastName: 'Достоевский' }) // 'Fedor.Dostoevskii50'
	 * faker.internet.userName({ firstName: '大羽', lastName: '陳' }) // 'hlzp8d.tpv45' - note neither name is used
	 *
	 * @since 2.0.1
	 *
	 * @deprecated Use \`faker.internet.username()\` instead.
	 */
	userName(options?: {
		/**
		 * The optional first name to use.
		 *
		 * @default faker.person.firstName()
		 */
		firstName?: string;
		/**
		 * The optional last name to use.
		 *
		 * @default faker.person.lastName()
		 */
		lastName?: string;
	}): string;
	/**
	 * Generates a username using the given person's name as base.
	 * The resulting username may use neither, one or both of the names provided.
	 * This will always return a plain ASCII string.
	 * Some basic stripping of accents and transliteration of characters will be done.
	 *
	 * @param options An options object.
	 * @param options.firstName The optional first name to use. If not specified, a random one will be chosen.
	 * @param options.lastName The optional last name to use. If not specified, a random one will be chosen.
	 *
	 * @see faker.internet.displayName(): For generating an Unicode display name.
	 *
	 * @example
	 * faker.internet.username() // 'Nettie_Zboncak40'
	 * faker.internet.username({ firstName: 'Jeanne' }) // 'Jeanne98'
	 * faker.internet.username({ firstName: 'Jeanne' }) // 'Jeanne.Smith98'
	 * faker.internet.username({ firstName: 'Jeanne', lastName: 'Doe'}) // 'Jeanne_Doe98'
	 * faker.internet.username({ firstName: 'John', lastName: 'Doe' }) // 'John.Doe'
	 * faker.internet.username({ firstName: 'Hélene', lastName: 'Müller' }) // 'Helene_Muller11'
	 * faker.internet.username({ firstName: 'Фёдор', lastName: 'Достоевский' }) // 'Fedor.Dostoevskii50'
	 * faker.internet.username({ firstName: '大羽', lastName: '陳' }) // 'hlzp8d.tpv45' - note neither name is used
	 *
	 * @since 9.1.0
	 */
	username(options?: {
		/**
		 * The optional first name to use.
		 *
		 * @default faker.person.firstName()
		 */
		firstName?: string;
		/**
		 * The optional last name to use.
		 *
		 * @default faker.person.lastName()
		 */
		lastName?: string;
	}): string;
	/**
	 * Generates a display name using the given person's name as base.
	 * The resulting display name may use one or both of the provided names.
	 * If the input names include Unicode characters, the resulting display name will contain Unicode characters.
	 * It will not contain spaces.
	 *
	 * @param options An options object.
	 * @param options.firstName The optional first name to use. If not specified, a random one will be chosen.
	 * @param options.lastName The optional last name to use. If not specified, a random one will be chosen.
	 *
	 * @see faker.internet.username(): For generating a plain ASCII username.
	 *
	 * @example
	 * faker.internet.displayName() // 'Nettie_Zboncak40'
	 * faker.internet.displayName({ firstName: 'Jeanne', lastName: 'Doe' }) // 'Jeanne98' - note surname not used.
	 * faker.internet.displayName({ firstName: 'John', lastName: 'Doe' }) // 'John.Doe'
	 * faker.internet.displayName({ firstName: 'Hélene', lastName: 'Müller' }) // 'Hélene_Müller11'
	 * faker.internet.displayName({ firstName: 'Фёдор', lastName: 'Достоевский' }) // 'Фёдор.Достоевский50'
	 * faker.internet.displayName({ firstName: '大羽', lastName: '陳' }) // '大羽.陳'
	 *
	 * @since 8.0.0
	 */
	displayName(options?: {
		/**
		 * The optional first name to use.
		 *
		 * @default faker.person.firstName()
		 */
		firstName?: string;
		/**
		 * The optional last name to use.
		 *
		 * @default faker.person.lastName()
		 */
		lastName?: string;
	}): string;
	/**
	 * Returns a random web protocol. Either \`http\` or \`https\`.
	 *
	 * @example
	 * faker.internet.protocol() // 'http'
	 * faker.internet.protocol() // 'https'
	 *
	 * @since 2.1.5
	 */
	protocol(): "http" | "https";
	/**
	 * Returns a random http method.
	 *
	 * Can be either of the following:
	 *
	 * - \`GET\`
	 * - \`POST\`
	 * - \`PUT\`
	 * - \`DELETE\`
	 * - \`PATCH\`
	 *
	 * @example
	 * faker.internet.httpMethod() // 'PATCH'
	 *
	 * @since 5.4.0
	 */
	httpMethod(): "GET" | "POST" | "PUT" | "DELETE" | "PATCH";
	/**
	 * Generates a random HTTP status code.
	 *
	 * @param options Options object.
	 * @param options.types A list of the HTTP status code types that should be used.
	 *
	 * @example
	 * faker.internet.httpStatusCode() // 200
	 * faker.internet.httpStatusCode({ types: ['success', 'serverError'] }) // 500
	 *
	 * @since 7.0.0
	 */
	httpStatusCode(options?: {
		/**
		 * A list of the HTTP status code types that should be used.
		 *
		 * @default Object.keys(faker.definitions.internet.http_status_code)
		 */
		types?: ReadonlyArray<HTTPStatusCodeType>;
	}): number;
	/**
	 * Generates a random http(s) url.
	 *
	 * @param options Optional options object.
	 * @param options.appendSlash Whether to append a slash to the end of the url (path). Defaults to a random boolean value.
	 * @param options.protocol The protocol to use. Defaults to \`'https'\`.
	 *
	 * @example
	 * faker.internet.url() // 'https://remarkable-hackwork.info'
	 * faker.internet.url({ appendSlash: true }) // 'https://slow-timer.info/'
	 * faker.internet.url({ protocol: 'http', appendSlash: false }) // 'http://www.terrible-idea.com'
	 *
	 * @since 2.1.5
	 */
	url(options?: {
		/**
		 * Whether to append a slash to the end of the url (path).
		 *
		 * @default faker.datatype.boolean()
		 */
		appendSlash?: boolean;
		/**
		 * The protocol to use.
		 *
		 * @default 'https'
		 */
		protocol?: HTTPProtocolType;
	}): string;
	/**
	 * Generates a random domain name.
	 *
	 * @example
	 * faker.internet.domainName() // 'slow-timer.info'
	 *
	 * @since 2.0.1
	 */
	domainName(): string;
	/**
	 * Returns a random domain suffix.
	 *
	 * @example
	 * faker.internet.domainSuffix() // 'com'
	 * faker.internet.domainSuffix() // 'name'
	 *
	 * @since 2.0.1
	 */
	domainSuffix(): string;
	/**
	 * Generates a random domain word.
	 *
	 * @example
	 * faker.internet.domainWord() // 'close-reality'
	 * faker.internet.domainWord() // 'weird-cytoplasm'
	 *
	 * @since 2.0.1
	 */
	domainWord(): string;
	/**
	 * Generates a random IPv4 or IPv6 address.
	 *
	 * @example
	 * faker.internet.ip() // '245.108.222.0'
	 * faker.internet.ip() // '4e5:f9c5:4337:abfd:9caf:1135:41ad:d8d3'
	 *
	 * @since 2.0.1
	 */
	ip(): string;
	/**
	 * Generates a random IPv4 address.
	 *
	 * @param options The optional options object.
	 * @param options.cidrBlock The optional CIDR block to use. Must be in the format \`x.x.x.x/y\`. Defaults to \`'0.0.0.0/0'\`.
	 *
	 * @example
	 * faker.internet.ipv4() // '245.108.222.0'
	 * faker.internet.ipv4({ cidrBlock: '192.168.0.0/16' }) // '192.168.215.224'
	 *
	 * @since 6.1.1
	 */
	ipv4(options?: {
		/**
		 * The optional CIDR block to use. Must be in the format \`x.x.x.x/y\`.
		 *
		 * @default '0.0.0.0/0'
		 */
		cidrBlock?: string;
	}): string;
	/**
	 * Generates a random IPv4 address.
	 *
	 * @param options The optional options object.
	 * @param options.network The optional network to use. This is intended as an alias for well-known \`cidrBlock\`s. Defaults to \`'any'\`.
	 *
	 * @example
	 * faker.internet.ipv4() // '245.108.222.0'
	 * faker.internet.ipv4({ network: 'private-a' }) // '10.199.154.205'
	 *
	 * @since 6.1.1
	 */
	ipv4(options?: {
		/**
		 * The optional network to use. This is intended as an alias for well-known \`cidrBlock\`s.
		 *
		 * @default 'any'
		 */
		network?: IPv4NetworkType;
	}): string;
	/**
	 * Generates a random IPv4 address.
	 *
	 * @param options The optional options object.
	 * @param options.cidrBlock The optional CIDR block to use. Must be in the format \`x.x.x.x/y\`. Defaults to \`'0.0.0.0/0'\`.
	 * @param options.network The optional network to use. This is intended as an alias for well-known \`cidrBlock\`s. Defaults to \`'any'\`.
	 *
	 * @example
	 * faker.internet.ipv4() // '245.108.222.0'
	 * faker.internet.ipv4({ cidrBlock: '192.168.0.0/16' }) // '192.168.215.224'
	 * faker.internet.ipv4({ network: 'private-a' }) // '10.199.154.205'
	 *
	 * @since 6.1.1
	 */
	ipv4(options?: {
		/**
		 * The optional CIDR block to use. Must be in the format \`x.x.x.x/y\`.
		 *
		 * @default '0.0.0.0/0'
		 */
		cidrBlock?: string;
	} | {
		/**
		 * The optional network to use. This is intended as an alias for well-known \`cidrBlock\`s.
		 *
		 * @default 'any'
		 */
		network?: IPv4NetworkType;
	}): string;
	/**
	 * Generates a random IPv6 address.
	 *
	 * @example
	 * faker.internet.ipv6() // '269f:1230:73e3:318d:842b:daab:326d:897b'
	 *
	 * @since 4.0.0
	 */
	ipv6(): string;
	/**
	 * Generates a random port number.
	 *
	 * @example
	 * faker.internet.port() // '9414'
	 *
	 * @since 5.4.0
	 */
	port(): number;
	/**
	 * Generates a random user agent string.
	 *
	 * @example
	 * faker.internet.userAgent()
	 * // 'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_8_8)  AppleWebKit/536.0.2 (KHTML, like Gecko) Chrome/27.0.849.0 Safari/536.0.2'
	 *
	 * @since 2.0.1
	 */
	userAgent(): string;
	/**
	 * Generates a random css hex color code in aesthetically pleasing color palette.
	 *
	 * Based on
	 * http://stackoverflow.com/questions/43044/algorithm-to-randomly-generate-an-aesthetically-pleasing-color-palette
	 *
	 * @param options An options object.
	 * @param options.redBase The optional base red in range between \`0\` and \`255\`. Defaults to \`0\`.
	 * @param options.greenBase The optional base green in range between \`0\` and \`255\`. Defaults to \`0\`.
	 * @param options.blueBase The optional base blue in range between \`0\` and \`255\`. Defaults to \`0\`.
	 *
	 * @example
	 * faker.internet.color() // '#30686e'
	 * faker.internet.color({ redBase: 100, greenBase: 100, blueBase: 100 }) // '#4e5f8b'
	 *
	 * @since 2.0.1
	 */
	color(options?: {
		/**
		 * The optional base red in range between \`0\` and \`255\`.
		 *
		 * @default 0
		 */
		redBase?: number;
		/**
		 * The optional base green in range between \`0\` and \`255\`.
		 *
		 * @default 0
		 */
		greenBase?: number;
		/**
		 * The optional base blue in range between \`0\` and \`255\`.
		 *
		 * @default 0
		 */
		blueBase?: number;
	}): string;
	/**
	 * Generates a random mac address.
	 *
	 * @param options An options object.
	 * @param separator The optional separator to use. Can be either \`':'\`, \`'-'\` or \`''\`. Defaults to \`':'\`.
	 *
	 * @example
	 * faker.internet.mac() // '32:8e:2e:09:c6:05'
	 *
	 * @since 3.0.0
	 */
	mac(options?: {
		/**
		 * The optional separator to use. Can be either \`':'\`, \`'-'\` or \`''\`.
		 *
		 * @default ':'
		 */
		separator?: string;
	}): string;
	/**
	 * Generates a random mac address.
	 *
	 * @param sep The optional separator to use. Can be either \`':'\`, \`'-'\` or \`''\`. Defaults to \`':'\`.
	 *
	 * @example
	 * faker.internet.mac() // '32:8e:2e:09:c6:05'
	 *
	 * @since 3.0.0
	 */
	mac(sep?: string): string;
	/**
	 * Generates a random mac address.
	 *
	 * @param options The optional separator or an options object.
	 * @param separator The optional separator to use. Can be either \`':'\`, \`'-'\` or \`''\`. Defaults to \`':'\`.
	 *
	 * @example
	 * faker.internet.mac() // '32:8e:2e:09:c6:05'
	 *
	 * @since 3.0.0
	 */
	mac(options?: string | {
		/**
		 * The optional separator to use. Can be either \`':'\`, \`'-'\` or \`''\`.
		 *
		 * @default ':'
		 */
		separator?: string;
	}): string;
	/**
	 * Generates a random password-like string. Do not use this method for generating actual passwords for users.
	 * Since the source of the randomness is not cryptographically secure, neither is this generator.
	 *
	 * @param options An options object.
	 * @param options.length The length of the password to generate. Defaults to \`15\`.
	 * @param options.memorable Whether the generated password should be memorable. Defaults to \`false\`.
	 * @param options.pattern The pattern that all chars should match.
	 * This option will be ignored, if \`memorable\` is \`true\`. Defaults to \`/\\w/\`.
	 * @param options.prefix The prefix to use. Defaults to \`''\`.
	 *
	 * @example
	 * faker.internet.password() // '89G1wJuBLbGziIs'
	 * faker.internet.password({ length: 20 }) // 'aF55c_8O9kZaPOrysFB_'
	 * faker.internet.password({ length: 20, memorable: true }) // 'lawetimufozujosodedi'
	 * faker.internet.password({ length: 20, memorable: true, pattern: /[A-Z]/ }) // 'HMAQDFFYLDDUTBKVNFVS'
	 * faker.internet.password({ length: 20, memorable: true, pattern: /[A-Z]/, prefix: 'Hello ' }) // 'Hello IREOXTDWPERQSB'
	 *
	 * @since 2.0.1
	 */
	password(options?: {
		/**
		 * The length of the password to generate.
		 *
		 * @default 15
		 */
		length?: number;
		/**
		 * Whether the generated password should be memorable.
		 *
		 * @default false
		 */
		memorable?: boolean;
		/**
		 * The pattern that all chars should match.
		 * This option will be ignored, if \`memorable\` is \`true\`.
		 *
		 * @default /\\w/
		 */
		pattern?: RegExp;
		/**
		 * The prefix to use.
		 *
		 * @default ''
		 */
		prefix?: string;
	}): string;
	/**
	 * Generates a random emoji.
	 *
	 * @param options Options object.
	 * @param options.types A list of the emoji types that should be included. Possible values are \`'smiley'\`, \`'body'\`, \`'person'\`, \`'nature'\`, \`'food'\`, \`'travel'\`, \`'activity'\`, \`'object'\`, \`'symbol'\`, \`'flag'\`. By default, emojis from any type will be included.
	 *
	 * @example
	 * faker.internet.emoji() // '🥰'
	 * faker.internet.emoji({ types: ['food', 'nature'] }) // '🥐'
	 *
	 * @since 6.2.0
	 */
	emoji(options?: {
		/**
		 * A list of the emoji types that should be used.
		 *
		 * @default Object.keys(faker.definitions.internet.emoji)
		 */
		types?: ReadonlyArray<EmojiType>;
	}): string;
	/**
	 * Generates a random JWT (JSON Web Token) Algorithm.
	 *
	 * @see faker.internet.jwt(): For generating random JWT (JSON Web Token).
	 *
	 * @example
	 * faker.internet.jwtAlgorithm() // 'HS256'
	 * faker.internet.jwtAlgorithm() // 'RS512'
	 *
	 * @since 9.1.0
	 */
	jwtAlgorithm(): string;
	/**
	 * Generates a random JWT (JSON Web Token).
	 *
	 * Please note that this method generates a random signature instead of a valid one.
	 *
	 * @param options The optional options object.
	 * @param options.header The Header to use for the token. Defaults to a random object with the following fields: \`alg\` and \`typ\`.
	 * @param options.payload The Payload to use for the token. Defaults to a random object with the following fields: \`iat\`, \`exp\`, \`nbf\`, \`iss\`, \`sub\`, \`aud\`, and \`jti\`.
	 * @param options.refDate The date to use as reference point for the newly generated date.
	 *
	 * @see https://datatracker.ietf.org/doc/html/rfc7519
	 * @see faker.internet.jwtAlgorithm(): For generating random JWT (JSON Web Token) Algorithm.
	 *
	 * @example
	 * faker.internet.jwt()
	 * faker.internet.jwt({ header: { alg: 'HS256' }}) // 'eyJhbGciOiJIUzI1NiJ9.eyJpYXQiOjE3MTg2MTM3MTIsImV4cCI6MTcxODYzMzY3OSwibmJmIjoxNjk3MjYzNjMwLCJpc3MiOiJEb3lsZSBhbmQgU29ucyIsInN1YiI6IjYxYWRkYWFmLWY4MjktNDkzZS1iNTI1LTJjMGJkNjkzOTdjNyIsImF1ZCI6IjczNjcyMjVjLWIwMWMtNGE1My1hYzQyLTYwOWJkZmI1MzBiOCIsImp0aSI6IjU2Y2ZkZjAxLWRhMzMtNGUxNi04MzJiLTFlYTk3ZGY1MTQ2YSJ9.5iUgaCaFVPZ8d1QD0xMjoeJbmPVyUfKfoRQ6Njzm5MLp5F4UMh5REbPCrW70fAkr'
	 * faker.internet.jwt({ payload: { iss: 'Acme' }}) // 'eyJhbGciOiJFUzM4NCIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJBY21lIn0.syUt0GBukNac8Cn1AGKFq2SWAXWy1YIfl0uOYiwg6TZ3omAW0c7FGWY6bC7ZOFSt'
	 * faker.internet.jwt({ refDate: '2020-01-01T00:00:00.000Z' }) // 'eyJhbGciOiJFUzM4NCIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE1Nzc4MDY4NDUsImV4cCI6MTU3Nzg0NjI4MCwibmJmIjoxNTgxNTQyMDYwLCJpc3MiOiJLcmVpZ2VyLCBBbHRlbndlcnRoIGFuZCBQYXVjZWsiLCJzdWIiOiI5NzVjMjMyOS02MDlhLTRjYTYtYjBkZi05ZmY4MGZiNDUwN2QiLCJhdWQiOiI0ODQxZWYwNi01OWYwLTQzMWEtYmFmZi0xMjkxZmRhZDdhNjgiLCJqdGkiOiJmNDBjZTJiYi00ZWYyLTQ1MjMtOGIxMy1kN2Q4NTA5N2M2ZTUifQ.cuClEZQ0CyPIMVS5uxrMwWXz0wcqFFdt0oNne3PMryyly0jghkxVurss2TapMC3C'
	 *
	 * @since 9.1.0
	 */
	jwt(options?: {
		/**
		 * The header to use for the token. If present, it will replace any default values.
		 *
		 * @default
		 * {
		 *   alg: faker.internet.jwtAlgorithm(),
		 *   typ: 'JWT'
		 * }
		 */
		header?: Record<string, unknown>;
		/**
		 * The payload to use for the token. If present, it will replace any default values.
		 *
		 * @default
		 * {
		 *   iat: faker.date.recent(),
		 *   exp: faker.date.soon(),
		 *   nbf: faker.date.anytime(),
		 *   iss: faker.company.name(),
		 *   sub: faker.string.uuid(),
		 *   aud: faker.string.uuid(),
		 *   jti: faker.string.uuid()
		 * }
		 */
		payload?: Record<string, unknown>;
		/**
		 * The date to use as reference point for the newly generated date.
		 *
		 * @default faker.defaultRefDate()
		 */
		refDate?: string | Date | number;
	}): string;
}
/**
 * Module to generate addresses and locations. Prior to Faker 8.0.0, this module was known as \`faker.address\`.
 *
 * ### Overview
 *
 * For a typical street address for a locale, use [\`streetAddress()\`](https://fakerjs.dev/api/location.html#streetaddress), [\`city()\`](https://fakerjs.dev/api/location.html#city), [\`state()\`](https://fakerjs.dev/api/location.html#state)), and [\`zipCode()\`](https://fakerjs.dev/api/location.html#zipcode). Most locales provide localized versions for a specific country.
 *
 * If you need latitude and longitude coordinates, use [\`latitude()\`](https://fakerjs.dev/api/location.html#latitude) and [\`longitude()\`](https://fakerjs.dev/api/location.html#longitude), or [\`nearbyGPSCoordinate()\`](https://fakerjs.dev/api/location.html#nearbygpscoordinate) for a latitude/longitude near a given location.
 *
 * For a random country, you can use [\`country()\`](https://fakerjs.dev/api/location.html#country) or [\`countryCode()\`](https://fakerjs.dev/api/location.html#countrycode).
 */
export declare class LocationModule extends ModuleBase {
	/**
	 * Generates random zip code from specified format. If format is not specified,
	 * the locale's zip format is used.
	 *
	 * @param options The format used to generate the zip code or an options object.
	 * @param options.state The state to generate the zip code for.
	 * If the current locale does not have a corresponding \`postcode_by_state\` definition, an error is thrown.
	 * @param options.format The optional format used to generate the zip code.
	 * By default, a random format is used from the locale zip formats.
	 * This won't be used if the state option is specified.
	 *
	 * @see faker.helpers.replaceSymbols(): For more information about how the pattern is used.
	 *
	 * @example
	 * faker.location.zipCode() // '17839'
	 * faker.location.zipCode('####') // '6925'
	 *
	 * @since 8.0.0
	 */
	zipCode(options?: string | {
		/**
		 * The state to generate the zip code for.
		 *
		 * If the current locale does not have a corresponding \`postcode_by_state\` definition, an error is thrown.
		 */
		state?: string;
		/**
		 * The optional format used to generate the zip code.
		 *
		 * This won't be used if the state option is specified.
		 *
		 * @default faker.definitions.location.postcode
		 */
		format?: string;
	}): string;
	/**
	 * Generates a random localized city name.
	 *
	 * @example
	 * faker.location.city() // 'East Jarretmouth'
	 * fakerDE.location.city() // 'Bad Lilianadorf'
	 *
	 * @since 8.0.0
	 */
	city(): string;
	/**
	 * Generates a random building number.
	 *
	 * @example
	 * faker.location.buildingNumber() // '379'
	 *
	 * @since 8.0.0
	 */
	buildingNumber(): string;
	/**
	 * Generates a random localized street name.
	 *
	 * @example
	 * faker.location.street() // 'Schroeder Isle'
	 *
	 * @since 8.0.0
	 */
	street(): string;
	/**
	 * Generates a random localized street address.
	 *
	 * @param options Whether to use a full address or an options object.
	 * @param options.useFullAddress When true this will generate a full address.
	 * Otherwise it will just generate a street address.
	 *
	 * @example
	 * faker.location.streetAddress() // '0917 O'Conner Estates'
	 * faker.location.streetAddress(false) // '34830 Erdman Hollow'
	 * faker.location.streetAddress(true) // '3393 Ronny Way Apt. 742'
	 * faker.location.streetAddress({ useFullAddress: true }) // '7917 Miller Park Apt. 410'
	 *
	 * @since 8.0.0
	 */
	streetAddress(options?: boolean | {
		/**
		 * When true this will generate a full address.
		 * Otherwise it will just generate a street address.
		 */
		useFullAddress?: boolean;
	}): string;
	/**
	 * Generates a random localized secondary address. This refers to a specific location at a given address
	 * such as an apartment or room number.
	 *
	 * @example
	 * faker.location.secondaryAddress() // 'Apt. 861'
	 *
	 * @since 8.0.0
	 */
	secondaryAddress(): string;
	/**
	 * Returns a random localized county, or other equivalent second-level administrative entity for the locale's country such as a district or department.
	 *
	 * @example
	 * fakerEN_GB.location.county() // 'Cambridgeshire'
	 * fakerEN_US.location.county() // 'Monroe County'
	 *
	 * @since 8.0.0
	 */
	county(): string;
	/**
	 * Returns a random country name.
	 *
	 * @example
	 * faker.location.country() // 'Greece'
	 *
	 * @since 8.0.0
	 */
	country(): string;
	/**
	 * Returns a random continent name.
	 *
	 * @example
	 * faker.location.continent() // 'Asia'
	 *
	 * @since 9.1.0
	 */
	continent(): string;
	/**
	 * Returns a random [ISO_3166-1](https://en.wikipedia.org/wiki/ISO_3166-1) country code.
	 *
	 * @param options The code to return or an options object.
	 * @param options.variant The variant to return. Can be one of:
	 *
	 * - \`'alpha-2'\` (two-letter code)
	 * - \`'alpha-3'\` (three-letter code)
	 * - \`'numeric'\` (numeric code)
	 *
	 * Defaults to \`'alpha-2'\`.
	 *
	 * @example
	 * faker.location.countryCode() // 'SJ'
	 * faker.location.countryCode('alpha-2') // 'GA'
	 * faker.location.countryCode('alpha-3') // 'TJK'
	 * faker.location.countryCode('numeric') // '528'
	 *
	 * @since 8.0.0
	 */
	countryCode(options?: "alpha-2" | "alpha-3" | "numeric" | {
		/**
		 * The code to return.
		 * Can be either \`'alpha-2'\` (two-letter code),
		 * \`'alpha-3'\` (three-letter code)
		 * or \`'numeric'\` (numeric code).
		 *
		 * @default 'alpha-2'
		 */
		variant?: "alpha-2" | "alpha-3" | "numeric";
	}): string;
	/**
	 * Returns a random localized state, or other equivalent first-level administrative entity for the locale's country such as a province or region.
	 * Generally, these are the ISO 3166-2 subdivisions for a country.
	 * If a locale doesn't correspond to one specific country, the method may return ISO 3166-2 subdivisions from one or more countries that uses that language. For example, the \`ar\` locale includes subdivisions from Arabic-speaking countries, such as Tunisia, Algeria, Syria, Lebanon, etc.
	 * For historical compatibility reasons, the default \`en\` locale only includes states in the United States (identical to \`en_US\`). However, you can use other English locales, such as \`en_IN\`, \`en_GB\`, and \`en_AU\`, if needed.
	 *
	 * @param options An options object.
	 * @param options.abbreviated If true this will return abbreviated first-level administrative entity names.
	 * Otherwise this will return the long name. Defaults to \`false\`.
	 *
	 * @example
	 * faker.location.state() // 'Mississippi'
	 * fakerEN_CA.location.state() // 'Saskatchewan'
	 * fakerDE.location.state() // 'Nordrhein-Westfalen'
	 * faker.location.state({ abbreviated: true }) // 'LA'
	 *
	 * @since 8.0.0
	 */
	state(options?: {
		/**
		 * If true this will return abbreviated first-level administrative entity names.
		 * Otherwise this will return the long name.
		 *
		 * @default false
		 */
		abbreviated?: boolean;
	}): string;
	/**
	 * Generates a random latitude.
	 *
	 * @param options An options object.
	 * @param options.max The upper bound for the latitude to generate. Defaults to \`90\`.
	 * @param options.min The lower bound for the latitude to generate. Defaults to \`-90\`.
	 * @param options.precision The number of decimal points of precision for the latitude. Defaults to \`4\`.
	 *
	 * @example
	 * faker.location.latitude() // -30.9501
	 * faker.location.latitude({ max: 10 }) // 5.7225
	 * faker.location.latitude({ max: 10, min: -10 }) // -9.6273
	 * faker.location.latitude({ max: 10, min: -10, precision: 5 }) // 2.68452
	 *
	 * @since 8.0.0
	 */
	latitude(options?: {
		/**
		 * The upper bound for the latitude to generate.
		 *
		 * @default 90
		 */
		max?: number;
		/**
		 * The lower bound for the latitude to generate.
		 *
		 * @default -90
		 */
		min?: number;
		/**
		 * The number of decimal points of precision for the latitude.
		 *
		 * @default 4
		 */
		precision?: number;
	}): number;
	/**
	 * Generates a random longitude.
	 *
	 * @param options An options object.
	 * @param options.max The upper bound for the longitude to generate. Defaults to \`180\`.
	 * @param options.min The lower bound for the longitude to generate. Defaults to \`-180\`.
	 * @param options.precision The number of decimal points of precision for the longitude. Defaults to \`4\`.
	 *
	 * @example
	 * faker.location.longitude() // -30.9501
	 * faker.location.longitude({ max: 10 }) // 5.7225
	 * faker.location.longitude({ max: 10, min: -10 }) // -9.6273
	 * faker.location.longitude({ max: 10, min: -10, precision: 5 }) // 2.68452
	 *
	 * @since 8.0.0
	 */
	longitude(options?: {
		/**
		 * The upper bound for the longitude to generate.
		 *
		 * @default 180
		 */
		max?: number;
		/**
		 * The lower bound for the longitude to generate.
		 *
		 * @default -180
		 */
		min?: number;
		/**
		 * The number of decimal points of precision for the longitude.
		 *
		 * @default 4
		 */
		precision?: number;
	}): number;
	/**
	 * Returns a random direction (cardinal and ordinal; northwest, east, etc).
	 *
	 * @param options The options to use.
	 * @param options.abbreviated If true this will return abbreviated directions (NW, E, etc).
	 * Otherwise this will return the long name. Defaults to \`false\`.
	 *
	 * @example
	 * faker.location.direction() // 'Northeast'
	 * faker.location.direction({ abbreviated: true }) // 'SW'
	 *
	 * @since 8.0.0
	 */
	direction(options?: {
		/**
		 * If true this will return abbreviated directions (NW, E, etc).
		 * Otherwise this will return the long name.
		 *
		 * @default false
		 */
		abbreviated?: boolean;
	}): string;
	/**
	 * Returns a random cardinal direction (north, east, south, west).
	 *
	 * @param options The options to use.
	 * @param options.abbreviated If true this will return abbreviated directions (N, E, etc).
	 * Otherwise this will return the long name. Defaults to \`false\`.
	 *
	 * @example
	 * faker.location.cardinalDirection() // 'North'
	 * faker.location.cardinalDirection({ abbreviated: true }) // 'W'
	 *
	 * @since 8.0.0
	 */
	cardinalDirection(options?: {
		/**
		 * If true this will return abbreviated directions (N, E, etc).
		 * Otherwise this will return the long name.
		 *
		 * @default false
		 */
		abbreviated?: boolean;
	}): string;
	/**
	 * Returns a random ordinal direction (northwest, southeast, etc).
	 *
	 * @param options Whether to use abbreviated or an options object.
	 * @param options.abbreviated If true this will return abbreviated directions (NW, SE, etc).
	 * Otherwise this will return the long name. Defaults to \`false\`.
	 *
	 * @example
	 * faker.location.ordinalDirection() // 'Northeast'
	 * faker.location.ordinalDirection({ abbreviated: true }) // 'SW'
	 *
	 * @since 8.0.0
	 */
	ordinalDirection(options?: {
		/**
		 * If true this will return abbreviated directions (NW, SE, etc).
		 * Otherwise this will return the long name.
		 *
		 * @default false
		 */
		abbreviated?: boolean;
	}): string;
	/**
	 * Generates a random GPS coordinate within the specified radius from the given coordinate.
	 *
	 * @param options The options for generating a GPS coordinate.
	 * @param options.origin The original coordinate to get a new coordinate close to.
	 * If no coordinate is given, a random one will be chosen.
	 * @param options.radius The maximum distance from the given coordinate to the new coordinate. Defaults to \`10\`.
	 * @param options.isMetric If \`true\` assume the radius to be in kilometers. If \`false\` for miles. Defaults to \`false\`.
	 *
	 * @example
	 * faker.location.nearbyGPSCoordinate() // [ 33.8475, -170.5953 ]
	 * faker.location.nearbyGPSCoordinate({ origin: [33, -170] }) // [ 33.0165, -170.0636 ]
	 * faker.location.nearbyGPSCoordinate({ origin: [33, -170], radius: 1000, isMetric: true }) // [ 37.9163, -179.2408 ]
	 *
	 * @since 8.0.0
	 */
	nearbyGPSCoordinate(options?: {
		/**
		 * The original coordinate to get a new coordinate close to.
		 */
		origin?: [
			latitude: number,
			longitude: number
		];
		/**
		 * The maximum distance from the given coordinate to the new coordinate.
		 *
		 * @default 10
		 */
		radius?: number;
		/**
		 * If \`true\` assume the radius to be in kilometers. If \`false\` for miles.
		 *
		 * @default false
		 */
		isMetric?: boolean;
	}): [
		latitude: number,
		longitude: number
	];
	/**
	 * Returns a random IANA time zone relevant to this locale.
	 *
	 * The returned time zone is tied to the current locale.
	 *
	 * @see [IANA Time Zone Database](https://www.iana.org/time-zones)
	 * @see faker.date.timeZone(): For generating a random time zone from all available time zones.
	 *
	 * @example
	 * faker.location.timeZone() // 'Pacific/Guam'
	 *
	 * @since 8.0.0
	 */
	timeZone(): string;
}
/**
 * Module to generate random texts and words.
 *
 * ### Overview
 *
 * Generate dummy content using traditional faux-Latin [lorem ipsum](https://en.wikipedia.org/wiki/Lorem_ipsum) (in other locales to \`en\`, alternative words may be used).
 *
 * In order of increasing size you can generate a single [\`word()\`](https://fakerjs.dev/api/lorem.html#word), multiple [\`words()\`](https://fakerjs.dev/api/lorem.html#words), a [\`sentence()\`](https://fakerjs.dev/api/lorem.html#sentence), multiple [\`sentences()\`](https://fakerjs.dev/api/lorem.html#sentences), [\`lines()\`](https://fakerjs.dev/api/lorem.html#lines) separated by newlines, one [\`paragraph()\`](https://fakerjs.dev/api/lorem.html#paragraph), or multiple [\`paragraphs()\`](https://fakerjs.dev/api/lorem.html#paragraphs).
 *
 * The generic [\`text()\`](https://fakerjs.dev/api/lorem.html#text) method can be used to generate some text between one sentence and multiple paragraphs, while [\`slug()\`](https://fakerjs.dev/api/lorem.html#slug) generates an URL-friendly hyphenated string.
 */
export declare class LoremModule extends ModuleBase {
	/**
	 * Generates a word of a specified length.
	 *
	 * @param options The expected length of the word or the options to use.
	 * @param options.length The expected length of the word.
	 * @param options.strategy The strategy to apply when no words with a matching length are found.
	 *
	 * Available error handling strategies:
	 *
	 * - \`fail\`: Throws an error if no words with the given length are found.
	 * - \`shortest\`: Returns any of the shortest words.
	 * - \`closest\`: Returns any of the words closest to the given length.
	 * - \`longest\`: Returns any of the longest words.
	 * - \`any-length\`: Returns a word with any length.
	 *
	 * Defaults to \`'any-length'\`.
	 *
	 * @example
	 * faker.lorem.word() // 'temporibus'
	 * faker.lorem.word(5) // 'velit'
	 * faker.lorem.word({ strategy: 'shortest' }) // 'a'
	 * faker.lorem.word({ length: { min: 5, max: 7 }, strategy: 'fail' }) // 'quaerat'
	 *
	 * @since 3.1.0
	 */
	word(options?: number | {
		/**
		 * The expected length of the word.
		 *
		 * @default 1
		 */
		length?: number | {
			/**
			 * The minimum length of the word.
			 */
			min: number;
			/**
			 * The maximum length of the word.
			 */
			max: number;
		};
		/**
		 * The strategy to apply when no words with a matching length are found.
		 *
		 * Available error handling strategies:
		 *
		 * - \`fail\`: Throws an error if no words with the given length are found.
		 * - \`shortest\`: Returns any of the shortest words.
		 * - \`closest\`: Returns any of the words closest to the given length.
		 * - \`longest\`: Returns any of the longest words.
		 * - \`any-length\`: Returns a word with any length.
		 *
		 * @default 'any-length'
		 */
		strategy?: "fail" | "closest" | "shortest" | "longest" | "any-length";
	}): string;
	/**
	 * Generates a space separated list of words.
	 *
	 * @param wordCount The number of words to generate. Defaults to \`3\`.
	 * @param wordCount.min The minimum number of words to generate.
	 * @param wordCount.max The maximum number of words to generate.
	 *
	 * @example
	 * faker.lorem.words() // 'qui praesentium pariatur'
	 * faker.lorem.words(10) // 'debitis consectetur voluptatem non doloremque ipsum autem totam eum ratione'
	 * faker.lorem.words({ min: 1, max: 3 }) // 'tenetur error cum'
	 *
	 * @since 2.0.1
	 */
	words(wordCount?: number | {
		/**
		 * The minimum number of words to generate.
		 */
		min: number;
		/**
		 * The maximum number of words to generate.
		 */
		max: number;
	}): string;
	/**
	 * Generates a space separated list of words beginning with a capital letter and ending with a period.
	 *
	 * @param wordCount The number of words, that should be in the sentence. Defaults to a random number between \`3\` and \`10\`.
	 * @param wordCount.min The minimum number of words to generate. Defaults to \`3\`.
	 * @param wordCount.max The maximum number of words to generate. Defaults to \`10\`.
	 *
	 * @example
	 * faker.lorem.sentence() // 'Voluptatum cupiditate suscipit autem eveniet aut dolorem aut officiis distinctio.'
	 * faker.lorem.sentence(5) // 'Laborum voluptatem officiis est et.'
	 * faker.lorem.sentence({ min: 3, max: 5 }) // 'Fugiat repellendus nisi.'
	 *
	 * @since 2.0.1
	 */
	sentence(wordCount?: number | {
		/**
		 * The minimum number of words to generate.
		 */
		min: number;
		/**
		 * The maximum number of words to generate.
		 */
		max: number;
	}): string;
	/**
	 * Generates a slugified text consisting of the given number of hyphen separated words.
	 *
	 * @param wordCount The number of words to generate. Defaults to \`3\`.
	 * @param wordCount.min The minimum number of words to generate.
	 * @param wordCount.max The maximum number of words to generate.
	 *
	 * @example
	 * faker.lorem.slug() // 'dolores-illo-est'
	 * faker.lorem.slug(5) // 'delectus-totam-iusto-itaque-placeat'
	 * faker.lorem.slug({ min: 1, max: 3 }) // 'illo-ratione'
	 *
	 * @since 4.0.0
	 */
	slug(wordCount?: number | {
		/**
		 * The minimum number of words to generate.
		 */
		min: number;
		/**
		 * The maximum number of words to generate.
		 */
		max: number;
	}): string;
	/**
	 * Generates the given number of sentences.
	 *
	 * @param sentenceCount The number of sentences to generate. Defaults to a random number between \`2\` and \`6\`.
	 * @param sentenceCount.min The minimum number of sentences to generate. Defaults to \`2\`.
	 * @param sentenceCount.max The maximum number of sentences to generate. Defaults to \`6\`.
	 * @param separator The separator to add between sentences. Defaults to \`' '\`.
	 *
	 * @example
	 * faker.lorem.sentences() // 'Iste molestiae incidunt aliquam possimus reprehenderit eum corrupti. Deleniti modi voluptatem nostrum ut esse.'
	 * faker.lorem.sentences(2) // 'Maxime vel numquam quibusdam. Dignissimos ex molestias quos aut molestiae quam nihil occaecati maiores.'
	 * faker.lorem.sentences(2, '\\n')
	 * // 'Et rerum a unde tempora magnam sit nisi.
	 * // Et perspiciatis ipsam omnis.'
	 * faker.lorem.sentences({ min: 1, max: 3 }) // 'Placeat ex natus tenetur repellendus repellendus iste. Optio nostrum veritatis.'
	 *
	 * @since 2.0.1
	 */
	sentences(sentenceCount?: number | {
		/**
		 * The minimum number of sentences to generate.
		 */
		min: number;
		/**
		 * The maximum number of sentences to generate.
		 */
		max: number;
	}, separator?: string): string;
	/**
	 * Generates a paragraph with the given number of sentences.
	 *
	 * @param sentenceCount The number of sentences to generate. Defaults to \`3\`.
	 * @param sentenceCount.min The minimum number of sentences to generate.
	 * @param sentenceCount.max The maximum number of sentences to generate.
	 *
	 * @example
	 * faker.lorem.paragraph() // 'Non architecto nam unde sint. Ex tenetur dolor facere optio aut consequatur. Ea laudantium reiciendis repellendus.'
	 * faker.lorem.paragraph(2) // 'Animi possimus nemo consequuntur ut ea et tempore unde qui. Quis corporis esse occaecati.'
	 * faker.lorem.paragraph({ min: 1, max: 3 }) // 'Quis doloribus necessitatibus sint. Rerum accusamus impedit corporis porro.'
	 *
	 * @since 2.0.1
	 */
	paragraph(sentenceCount?: number | {
		/**
		 * The minimum number of sentences to generate.
		 */
		min: number;
		/**
		 * The maximum number of sentences to generate.
		 */
		max: number;
	}): string;
	/**
	 * Generates the given number of paragraphs.
	 *
	 * @param paragraphCount The number of paragraphs to generate. Defaults to \`3\`.
	 * @param paragraphCount.min The minimum number of paragraphs to generate.
	 * @param paragraphCount.max The maximum number of paragraphs to generate.
	 * @param separator The separator to use. Defaults to \`'\\n'\`.
	 *
	 * @example
	 * faker.lorem.paragraphs()
	 * // 'Beatae voluptatem dicta et assumenda fugit eaque quidem consequatur. Fuga unde provident. Id reprehenderit soluta facilis est laborum laborum. Illum aut non ut. Est nulla rem ipsa.
	 * // Voluptatibus quo pariatur est. Temporibus deleniti occaecati pariatur nemo est molestias voluptas. Doloribus commodi et et exercitationem vel et. Omnis inventore cum aut amet.
	 * // Sapiente deleniti et. Ducimus maiores eum. Rem dolorem itaque aliquam.'
	 *
	 * faker.lorem.paragraphs(5)
	 * // 'Quia hic sunt ducimus expedita quo impedit soluta. Quam impedit et ipsum optio. Unde dolores nulla nobis vero et aspernatur officiis.
	 * // Aliquam dolorem temporibus dolores voluptatem voluptatem qui nostrum quia. Sit hic facilis rerum eius. Beatae doloribus nesciunt iste ipsum.
	 * // Natus nam eum nulla voluptas molestiae fuga libero nihil voluptatibus. Sed quam numquam eum ipsam temporibus eaque ut et. Enim quas debitis quasi quis. Vitae et vitae.
	 * // Repellat voluptatem est laborum illo harum sed reprehenderit aut. Quo sit et. Exercitationem blanditiis totam velit ad dicta placeat.
	 * // Rerum non eum incidunt amet quo. Eaque laborum ut. Recusandae illo ab distinctio veritatis. Cum quis architecto ad maxime a.'
	 *
	 * faker.lorem.paragraphs(2, '<br/>\\n')
	 * // 'Eos magnam aut qui accusamus. Sapiente quas culpa totam excepturi. Blanditiis totam distinctio occaecati dignissimos cumque atque qui officiis.<br/>
	 * // Nihil quis vel consequatur. Blanditiis commodi deserunt sunt animi dolorum. A optio porro hic dolorum fugit aut et sint voluptas. Minima ad sed ipsa est non dolores.'
	 *
	 * faker.lorem.paragraphs({ min: 1, max: 3 })
	 * // 'Eum nam fugiat laudantium.
	 * // Dignissimos tempore porro necessitatibus commodi nam.
	 * // Veniam at commodi iste perferendis totam dolorum corporis ipsam.'
	 *
	 * @since 2.0.1
	 */
	paragraphs(paragraphCount?: number | {
		/**
		 * The minimum number of paragraphs to generate.
		 */
		min: number;
		/**
		 * The maximum number of paragraphs to generate.
		 */
		max: number;
	}, separator?: string): string;
	/**
	 * Generates a random text based on a random lorem method.
	 *
	 * @example
	 * faker.lorem.text() // 'Doloribus autem non quis vero quia.'
	 * faker.lorem.text()
	 * // 'Rerum eum reiciendis id ipsa hic dolore aut laborum provident.
	 * // Quis beatae quis corporis veritatis corrupti ratione delectus sapiente ut.
	 * // Quis ut dolor dolores facilis possimus tempore voluptates.
	 * // Iure nam officia optio cumque.
	 * // Dolor tempora iusto.'
	 *
	 * @since 3.1.0
	 */
	text(): string;
	/**
	 * Generates the given number lines of lorem separated by \`'\\n'\`.
	 *
	 * @param lineCount The number of lines to generate. Defaults to a random number between \`1\` and \`5\`.
	 * @param lineCount.min The minimum number of lines to generate. Defaults to \`1\`.
	 * @param lineCount.max The maximum number of lines to generate. Defaults to \`5\`.
	 *
	 * @example
	 * faker.lorem.lines()
	 * // 'Rerum quia aliquam pariatur explicabo sint minima eos.
	 * // Voluptatem repellat consequatur deleniti qui quibusdam harum cumque.
	 * // Enim eveniet a qui.
	 * // Consectetur velit eligendi animi nostrum veritatis.'
	 *
	 * faker.lorem.lines()
	 * // 'Soluta deserunt eos quam reiciendis libero autem enim nam ut.
	 * // Voluptate aut aut.'
	 *
	 * faker.lorem.lines(2)
	 * // 'Quod quas nam quis impedit aut consequuntur.
	 * // Animi dolores aspernatur.'
	 *
	 * faker.lorem.lines({ min: 1, max: 3 })
	 * // 'Error dolorem natus quos eum consequatur necessitatibus.'
	 *
	 * @since 3.1.0
	 */
	lines(lineCount?: number | {
		/**
		 * The minimum number of lines to generate.
		 */
		min: number;
		/**
		 * The maximum number of lines to generate.
		 */
		max: number;
	}): string;
}
/**
 * Module to generate music related entries.
 *
 * ### Overview
 *
 * Generate random music content.
 *
 * For a random album name, use [\`album()\`](https://fakerjs.dev/api/music.html#album).
 *
 * For a random artist, use [\`artist()\`](https://fakerjs.dev/api/music.html#artist).
 *
 * For a random genre, use [\`genre()\`](https://fakerjs.dev/api/music.html#genre).
 *
 * For a random song name, [\`songName()\`](https://fakerjs.dev/api/music.html#songname).
 *
 * All data types may be localized.
 */
export declare class MusicModule extends ModuleBase {
	/**
	 * Returns a random album name.
	 *
	 * @example
	 * faker.music.album() // '1989'
	 *
	 * @since 9.0.0
	 */
	album(): string;
	/**
	 * Returns a random artist name.
	 *
	 * @example
	 * faker.music.artist() // 'The Beatles'
	 *
	 * @since 9.0.0
	 */
	artist(): string;
	/**
	 * Returns a random music genre.
	 *
	 * @example
	 * faker.music.genre() // 'Reggae'
	 *
	 * @since 5.2.0
	 */
	genre(): string;
	/**
	 * Returns a random song name.
	 *
	 * @example
	 * faker.music.songName() // 'White Christmas'
	 *
	 * @since 7.1.0
	 */
	songName(): string;
}
export declare enum Sex {
	Female = "female",
	Male = "male"
}
export type SexType = \`\${Sex}\`;
/**
 * Module to generate people's personal information such as names and job titles. Prior to Faker 8.0.0, this module was known as \`faker.name\`.
 *
 * ### Overview
 *
 * To generate a full name, use [\`fullName\`](https://fakerjs.dev/api/person.html#fullname). Note that this is not the same as simply concatenating [\`firstName\`](https://fakerjs.dev/api/person.html#firstname) and [\`lastName\`](https://fakerjs.dev/api/person.html#lastname), as the full name may contain a prefix, suffix, or both. Additionally, different supported locales will have differing name patterns. For example, the last name may appear before the first name, or there may be a double or hyphenated first or last name.
 *
 * You can also generate the parts of a name separately, using [\`prefix\`](https://fakerjs.dev/api/person.html#prefix), [\`firstName\`](https://fakerjs.dev/api/person.html#firstname), [\`middleName\`](https://fakerjs.dev/api/person.html#middlename), [\`lastName\`](https://fakerjs.dev/api/person.html#lastname), and [\`suffix\`](https://fakerjs.dev/api/person.html#suffix). Not all locales support all of these parts.
 *
 * Many of the methods in this module can optionally choose either female, male or mixed names.
 *
 * Job-related data is also available. To generate a job title, use [\`jobTitle\`](https://fakerjs.dev/api/person.html#jobtitle).
 *
 * This module can also generate other personal information which might appear in user profiles, such as [\`gender\`](https://fakerjs.dev/api/person.html#gender), [\`zodiacSign\`](https://fakerjs.dev/api/person.html#zodiacsign), and [\`bio\`](https://fakerjs.dev/api/person.html#bio).
 *
 * ### Related modules
 *
 * For personal contact information like phone numbers and email addresses, see the [\`faker.phone\`](https://fakerjs.dev/api/phone.html) and [\`faker.internet\`](https://fakerjs.dev/api/internet.html) modules.
 */
export declare class PersonModule extends ModuleBase {
	/**
	 * Returns a random first name.
	 *
	 * @param sex The optional sex to use.
	 * Can be either \`'female'\` or \`'male'\`.
	 *
	 * @example
	 * faker.person.firstName() // 'Antwan'
	 * faker.person.firstName('female') // 'Victoria'
	 * faker.person.firstName('male') // 'Tom'
	 *
	 * @since 8.0.0
	 */
	firstName(sex?: SexType): string;
	/**
	 * Returns a random last name.
	 *
	 * @param sex The optional sex to use.
	 * Can be either \`'female'\` or \`'male'\`.
	 *
	 * @example
	 * faker.person.lastName() // 'Hauck'
	 * faker.person.lastName('female') // 'Grady'
	 * faker.person.lastName('male') // 'Barton'
	 *
	 * @since 8.0.0
	 */
	lastName(sex?: SexType): string;
	/**
	 * Returns a random middle name.
	 *
	 * @param sex The optional sex to use.
	 * Can be either \`'female'\` or \`'male'\`.
	 *
	 * @example
	 * faker.person.middleName() // 'James'
	 * faker.person.middleName('female') // 'Eloise'
	 * faker.person.middleName('male') // 'Asher'
	 *
	 * @since 8.0.0
	 */
	middleName(sex?: SexType): string;
	/**
	 * Generates a random full name.
	 *
	 * @param options An options object.
	 * @param options.firstName The optional first name to use. If not specified a random one will be chosen.
	 * @param options.lastName The optional last name to use. If not specified a random one will be chosen.
	 * @param options.sex The optional sex to use. Can be either \`'female'\` or \`'male'\`.
	 *
	 * @example
	 * faker.person.fullName() // 'Allen Brown'
	 * faker.person.fullName({ firstName: 'Joann' }) // 'Joann Osinski'
	 * faker.person.fullName({ firstName: 'Marcella', sex: 'female' }) // 'Mrs. Marcella Huels'
	 * faker.person.fullName({ lastName: 'Beer' }) // 'Mr. Alfonso Beer'
	 * faker.person.fullName({ sex: 'male' }) // 'Fernando Schaefer'
	 *
	 * @since 8.0.0
	 */
	fullName(options?: {
		/**
		 * The optional first name to use. If not specified a random one will be chosen.
		 *
		 * @default faker.person.firstName(sex)
		 */
		firstName?: string;
		/**
		 * The optional last name to use. If not specified a random one will be chosen.
		 *
		 * @default faker.person.lastName(sex)
		 */
		lastName?: string;
		/**
		 * The optional sex to use. Can be either \`'female'\` or \`'male'\`.
		 *
		 * @default faker.helpers.arrayElement(['female', 'male'])
		 */
		sex?: SexType;
	}): string;
	/**
	 * Returns a random gender.
	 *
	 * @see faker.person.sex(): For generating a binary-gender value.
	 *
	 * @example
	 * faker.person.gender() // 'Trans*Man'
	 *
	 * @since 8.0.0
	 */
	gender(): string;
	/**
	 * Returns a random sex.
	 *
	 * Output of this method is localised, so it should not be used to fill the parameter \`sex\`
	 * available in some other modules for example \`faker.person.firstName()\`.
	 *
	 * @see faker.person.gender(): For generating a gender related value.
	 * @see faker.person.sexType(): For generating a sex value to be used as a parameter.
	 *
	 * @example
	 * faker.person.sex() // 'female'
	 *
	 * @since 8.0.0
	 */
	sex(): string;
	/**
	 * Returns a random sex type. The \`SexType\` is intended to be used in parameters and conditions.
	 *
	 * @see faker.person.gender(): For generating a gender related value in forms.
	 * @see faker.person.sex(): For generating a binary-gender value in forms.
	 *
	 * @example
	 * faker.person.sexType() // Sex.Female
	 *
	 * @since 8.0.0
	 */
	sexType(): SexType;
	/**
	 * Returns a random short biography
	 *
	 * @example
	 * faker.person.bio() // 'oatmeal advocate, veteran 🐠'
	 *
	 * @since 8.0.0
	 */
	bio(): string;
	/**
	 * Returns a random person prefix.
	 *
	 * @param sex The optional sex to use. Can be either \`'female'\` or \`'male'\`.
	 *
	 * @example
	 * faker.person.prefix() // 'Miss'
	 * faker.person.prefix('female') // 'Ms.'
	 * faker.person.prefix('male') // 'Mr.'
	 *
	 * @since 8.0.0
	 */
	prefix(sex?: SexType): string;
	/**
	 * Returns a random person suffix.
	 *
	 * @example
	 * faker.person.suffix() // 'DDS'
	 *
	 * @since 8.0.0
	 */
	suffix(): string;
	/**
	 * Generates a random job title.
	 *
	 * @example
	 * faker.person.jobTitle() // 'Global Accounts Engineer'
	 *
	 * @since 8.0.0
	 */
	jobTitle(): string;
	/**
	 * Generates a random job descriptor.
	 *
	 * @example
	 * faker.person.jobDescriptor() // 'Customer'
	 *
	 * @since 8.0.0
	 */
	jobDescriptor(): string;
	/**
	 * Generates a random job area.
	 *
	 * @example
	 * faker.person.jobArea() // 'Brand'
	 *
	 * @since 8.0.0
	 */
	jobArea(): string;
	/**
	 * Generates a random job type.
	 *
	 * @example
	 * faker.person.jobType() // 'Assistant'
	 *
	 * @since 8.0.0
	 */
	jobType(): string;
	/**
	 * Returns a random zodiac sign.
	 *
	 * @example
	 * faker.person.zodiacSign() // 'Pisces'
	 *
	 * @since 8.0.0
	 */
	zodiacSign(): string;
}
/**
 * Module to generate phone-related data.
 *
 * ### Overview
 *
 * For a phone number, use [\`number()\`](https://fakerjs.dev/api/phone.html#number). Many locales provide country-specific formats.
 */
export declare class PhoneModule extends ModuleBase {
	/**
	 * Generates a random phone number.
	 *
	 * @param options Options object
	 * @param options.style Style of the phone number. Defaults to \`'human'\`.
	 *
	 * @see faker.string.numeric(): For generating a random string of numbers.
	 * @see faker.helpers.fromRegExp(): For generating a phone number matching a regular expression.
	 *
	 * @example
	 * faker.phone.number() // '961-770-7727'
	 * faker.phone.number({ style: 'human' }) // '555.770.7727 x1234'
	 * faker.phone.number({ style: 'national' }) // '(961) 770-7727'
	 * faker.phone.number({ style: 'international' }) // '+15551234567'
	 *
	 * @since 7.3.0
	 */
	number(options?: {
		/**
		 * Style of the generated phone number:
		 * - \`'human'\`: (default) A human-input phone number, e.g. \`555-770-7727\` or \`555.770.7727 x1234\`
		 * - \`'national'\`: A phone number in a standardized national format, e.g. \`(555) 123-4567\`.
		 * - \`'international'\`: A phone number in the E.123 international format, e.g. \`+15551234567\`
		 *
		 * @default 'human'
		 */
		style?: "human" | "national" | "international";
	}): string;
	/**
	 * Generates IMEI number.
	 *
	 * @example
	 * faker.phone.imei() // '13-850175-913761-7'
	 *
	 * @since 6.2.0
	 */
	imei(): string;
}
/**
 * The possible definitions related to elements.
 */
export interface ChemicalElement {
	/**
	 * The symbol for the element (e.g. \`'He'\`).
	 */
	symbol: string;
	/**
	 * The name for the element (e.g. \`'Cerium'\`).
	 */
	name: string;
	/**
	 * The atomic number for the element (e.g. \`52\`).
	 */
	atomicNumber: number;
}
export interface Unit {
	/**
	 * The long version of the unit (e.g. \`meter\`).
	 */
	name: string;
	/**
	 * The short version/abbreviation of the element (e.g. \`Pa\`).
	 */
	symbol: string;
}
/**
 * Module to generate science related entries.
 *
 * ### Overview
 *
 * Both methods in this module return objects rather than strings. For example, you can use \`faker.science.chemicalElement().name\` to pick out the specific property you need.
 */
export declare class ScienceModule extends ModuleBase {
	/**
	 * Returns a random periodic table element.
	 *
	 * @example
	 * faker.science.chemicalElement() // { symbol: 'H', name: 'Hydrogen', atomicNumber: 1 }
	 * faker.science.chemicalElement() // { symbol: 'Xe', name: 'Xenon', atomicNumber: 54 }
	 * faker.science.chemicalElement() // { symbol: 'Ce', name: 'Cerium', atomicNumber: 58 }
	 *
	 * @since 7.2.0
	 */
	chemicalElement(): ChemicalElement;
	/**
	 * Returns a random scientific unit.
	 *
	 * @example
	 * faker.science.unit() // { name: 'meter', symbol: 'm' }
	 * faker.science.unit() // { name: 'second', symbol: 's' }
	 * faker.science.unit() // { name: 'mole', symbol: 'mol' }
	 *
	 * @since 7.2.0
	 */
	unit(): Unit;
}
declare const commonInterfaceTypes: readonly [
	"en",
	"wl",
	"ww"
];
declare const commonInterfaceSchemas: {
	readonly index: "o";
	readonly slot: "s";
	readonly mac: "x";
	readonly pci: "p";
};
/**
 * Generates fake data for many computer systems properties.
 */
export declare class SystemModule extends ModuleBase {
	/**
	 * Returns a random file name with extension.
	 *
	 * @param options An options object.
	 * @param options.extensionCount Define how many extensions the file name should have. Defaults to \`1\`.
	 *
	 * @example
	 * faker.system.fileName() // 'faithfully_calculating.u8mdn'
	 * faker.system.fileName({ extensionCount: 2 }) // 'times_after.swf.ntf'
	 * faker.system.fileName({ extensionCount: { min: 1, max: 2 } }) // 'jaywalk_like_ill.osfpvg'
	 *
	 * @since 3.1.0
	 */
	fileName(options?: {
		/**
		 * Define how many extensions the file name should have.
		 *
		 * @default 1
		 */
		extensionCount?: number | {
			/**
			 * Minimum number of extensions.
			 */
			min: number;
			/**
			 * Maximum number of extensions.
			 */
			max: number;
		};
	}): string;
	/**
	 * Returns a random file name with a given extension or a commonly used extension.
	 *
	 * @param ext Extension. Empty string is considered to be not set.
	 *
	 * @example
	 * faker.system.commonFileName() // 'dollar.jpg'
	 * faker.system.commonFileName('txt') // 'global_borders_wyoming.txt'
	 *
	 * @since 3.1.0
	 */
	commonFileName(ext?: string): string;
	/**
	 * Returns a mime-type.
	 *
	 * @example
	 * faker.system.mimeType() // 'video/vnd.vivo'
	 *
	 * @since 3.1.0
	 */
	mimeType(): string;
	/**
	 * Returns a commonly used file type.
	 *
	 * @example
	 * faker.system.commonFileType() // 'audio'
	 *
	 * @since 3.1.0
	 */
	commonFileType(): string;
	/**
	 * Returns a commonly used file extension.
	 *
	 * @example
	 * faker.system.commonFileExt() // 'gif'
	 *
	 * @since 3.1.0
	 */
	commonFileExt(): string;
	/**
	 * Returns a file type.
	 *
	 * @example
	 * faker.system.fileType() // 'message'
	 *
	 * @since 3.1.0
	 */
	fileType(): string;
	/**
	 * Returns a file extension.
	 *
	 * @param mimeType Valid [mime-type](https://github.com/jshttp/mime-db/blob/master/db.json)
	 *
	 * @example
	 * faker.system.fileExt() // 'emf'
	 * faker.system.fileExt('application/json') // 'json'
	 *
	 * @since 3.1.0
	 */
	fileExt(mimeType?: string): string;
	/**
	 * Returns a directory path.
	 *
	 * @example
	 * faker.system.directoryPath() // '/etc/mail'
	 *
	 * @since 3.1.0
	 */
	directoryPath(): string;
	/**
	 * Returns a file path.
	 *
	 * @example
	 * faker.system.filePath() // '/usr/local/src/money.dotx'
	 *
	 * @since 3.1.0
	 */
	filePath(): string;
	/**
	 * Returns a [semantic version](https://semver.org).
	 *
	 * @example
	 * faker.system.semver() // '1.1.2'
	 *
	 * @since 3.1.0
	 */
	semver(): string;
	/**
	 * Returns a random [network interface](https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/networking_guide/sec-understanding_the_predictable_network_interface_device_names).
	 *
	 * @param options The options to use.
	 * @param options.interfaceType The interface type. Can be one of \`en\`, \`wl\`, \`ww\`.
	 * @param options.interfaceSchema The interface schema. Can be one of \`index\`, \`slot\`, \`mac\`, \`pci\`.
	 *
	 * @example
	 * faker.system.networkInterface() // 'enp0s3'
	 * faker.system.networkInterface({ interfaceType: 'wl' }) // 'wlo1'
	 * faker.system.networkInterface({ interfaceSchema: 'mac' }) // 'enx000c29c00000'
	 * faker.system.networkInterface({ interfaceType: 'en', interfaceSchema: 'pci' }) // 'enp5s0f1d0'
	 *
	 * @since 7.4.0
	 */
	networkInterface(options?: {
		/**
		 * The interface type. Can be one of \`en\`, \`wl\`, \`ww\`.
		 *
		 * @default faker.helpers.arrayElement(['en', 'wl', 'ww'])
		 */
		interfaceType?: (typeof commonInterfaceTypes)[number];
		/**
		 * The interface schema. Can be one of \`index\`, \`slot\`, \`mac\`, \`pci\`.
		 *
		 * @default faker.helpers.objectKey(['index' | 'slot' | 'mac' | 'pci'])
		 */
		interfaceSchema?: keyof typeof commonInterfaceSchemas;
	}): string;
	/**
	 * Returns a random cron expression.
	 *
	 * @param options The optional options to use.
	 * @param options.includeYear Whether to include a year in the generated expression. Defaults to \`false\`.
	 * @param options.includeNonStandard Whether to include a \`@yearly\`, \`@monthly\`, \`@daily\`, etc text labels in the generated expression. Defaults to \`false\`.
	 *
	 * @example
	 * faker.system.cron() // '45 23 * * 6'
	 * faker.system.cron({ includeYear: true }) // '45 23 * * 6 2067'
	 * faker.system.cron({ includeYear: false }) // '45 23 * * 6'
	 * faker.system.cron({ includeNonStandard: false }) // '45 23 * * 6'
	 * faker.system.cron({ includeNonStandard: true }) // '@yearly'
	 *
	 * @since 7.5.0
	 */
	cron(options?: {
		/**
		 * Whether to include a year in the generated expression.
		 *
		 * @default false
		 */
		includeYear?: boolean;
		/**
		 * Whether to include a \`@yearly\`, \`@monthly\`, \`@daily\`, etc text labels in the generated expression.
		 *
		 * @default false
		 */
		includeNonStandard?: boolean;
	}): string;
}
/**
 * Module to generate vehicle related entries.
 *
 * ### Overview
 *
 * Most methods are related to cars/automobiles: a [\`vehicle()\`](https://fakerjs.dev/api/vehicle.html#vehicle) name is comprised of a car [\`manufacturer()\`](https://fakerjs.dev/api/vehicle.html#manufacturer) and [\`model()\`](https://fakerjs.dev/api/vehicle.html#model). You can also generate [\`fuel()\`](https://fakerjs.dev/api/vehicle.html#fuel), [\`type()\`](https://fakerjs.dev/api/vehicle.html#type), and [\`color()\`](https://fakerjs.dev/api/vehicle.html#color), as well as typical car registration IDs [\`vin()\`](https://fakerjs.dev/api/vehicle.html#vin) and [\`vrm()\`](https://fakerjs.dev/api/vehicle.html#vrm).
 *
 * If you prefer two wheels, you can generate a [\`bicycle()\`](https://fakerjs.dev/api/vehicle.html#bicycle) type instead.
 */
export declare class VehicleModule extends ModuleBase {
	/**
	 * Returns a random vehicle.
	 *
	 * @example
	 * faker.vehicle.vehicle() // 'BMW Explorer'
	 *
	 * @since 5.0.0
	 */
	vehicle(): string;
	/**
	 * Returns a manufacturer name.
	 *
	 * @example
	 * faker.vehicle.manufacturer() // 'Ford'
	 *
	 * @since 5.0.0
	 */
	manufacturer(): string;
	/**
	 * Returns a vehicle model.
	 *
	 * @example
	 * faker.vehicle.model() // 'Explorer'
	 *
	 * @since 5.0.0
	 */
	model(): string;
	/**
	 * Returns a vehicle type.
	 *
	 * @example
	 * faker.vehicle.type() // 'Coupe'
	 *
	 * @since 5.0.0
	 */
	type(): string;
	/**
	 * Returns a fuel type.
	 *
	 * @example
	 * faker.vehicle.fuel() // 'Electric'
	 *
	 * @since 5.0.0
	 */
	fuel(): string;
	/**
	 * Returns a vehicle identification number (VIN).
	 *
	 * @example
	 * faker.vehicle.vin() // 'YV1MH682762184654'
	 *
	 * @since 5.0.0
	 */
	vin(): string;
	/**
	 * Returns a vehicle color.
	 *
	 * @example
	 * faker.vehicle.color() // 'red'
	 *
	 * @since 5.0.0
	 */
	color(): string;
	/**
	 * Returns a vehicle registration number (Vehicle Registration Mark - VRM)
	 *
	 * @example
	 * faker.vehicle.vrm() // 'MF56UPA'
	 *
	 * @since 5.4.0
	 */
	vrm(): string;
	/**
	 * Returns a type of bicycle.
	 *
	 * @example
	 * faker.vehicle.bicycle() // 'Adventure Road Bicycle'
	 *
	 * @since 5.5.0
	 */
	bicycle(): string;
}
/**
 * Module to return various types of words.
 */
export declare class WordModule extends ModuleBase {
	/**
	 * Returns a random adjective.
	 *
	 * @param options The expected length of the word or the options to use.
	 * @param options.length The expected length of the word.
	 * @param options.strategy The strategy to apply when no words with a matching length are found.
	 *
	 * Available error handling strategies:
	 *
	 * - \`fail\`: Throws an error if no words with the given length are found.
	 * - \`shortest\`: Returns any of the shortest words.
	 * - \`closest\`: Returns any of the words closest to the given length.
	 * - \`longest\`: Returns any of the longest words.
	 * - \`any-length\`: Returns a word with any length.
	 *
	 * Defaults to \`'any-length'\`.
	 *
	 * @example
	 * faker.word.adjective() // 'pungent'
	 * faker.word.adjective(5) // 'slimy'
	 * faker.word.adjective(100) // 'complete'
	 * faker.word.adjective({ strategy: 'shortest' }) // 'icy'
	 * faker.word.adjective({ length: { min: 5, max: 7 }, strategy: "fail" }) // 'distant'
	 *
	 * @since 6.0.0
	 */
	adjective(options?: number | {
		/**
		 * The expected length of the word.
		 */
		length?: number | {
			/**
			 * The minimum length of the word.
			 */
			min: number;
			/**
			 * The maximum length of the word.
			 */
			max: number;
		};
		/**
		 * The strategy to apply when no words with a matching length are found.
		 *
		 * Available error handling strategies:
		 *
		 * - \`fail\`: Throws an error if no words with the given length are found.
		 * - \`shortest\`: Returns any of the shortest words.
		 * - \`closest\`: Returns any of the words closest to the given length.
		 * - \`longest\`: Returns any of the longest words.
		 * - \`any-length\`: Returns a word with any length.
		 *
		 * @default 'any-length'
		 */
		strategy?: "fail" | "closest" | "shortest" | "longest" | "any-length";
	}): string;
	/**
	 * Returns a random adverb.
	 *
	 * @param options The expected length of the word or the options to use.
	 * @param options.length The expected length of the word.
	 * @param options.strategy The strategy to apply when no words with a matching length are found.
	 *
	 * Available error handling strategies:
	 *
	 * - \`fail\`: Throws an error if no words with the given length are found.
	 * - \`shortest\`: Returns any of the shortest words.
	 * - \`closest\`: Returns any of the words closest to the given length.
	 * - \`longest\`: Returns any of the longest words.
	 * - \`any-length\`: Returns a word with any length.
	 *
	 * Defaults to \`'any-length'\`.
	 *
	 * @example
	 * faker.word.adverb() // 'quarrelsomely'
	 * faker.word.adverb(5) // 'madly'
	 * faker.word.adverb(100) // 'sadly'
	 * faker.word.adverb({ strategy: 'shortest' }) // 'too'
	 * faker.word.adverb({ length: { min: 5, max: 7 }, strategy: "fail" }) // 'sweetly'
	 *
	 * @since 6.0.0
	 */
	adverb(options?: number | {
		/**
		 * The expected length of the word.
		 */
		length?: number | {
			/**
			 * The minimum length of the word.
			 */
			min: number;
			/**
			 * The maximum length of the word.
			 */
			max: number;
		};
		/**
		 * The strategy to apply when no words with a matching length are found.
		 *
		 * Available error handling strategies:
		 *
		 * - \`fail\`: Throws an error if no words with the given length are found.
		 * - \`shortest\`: Returns any of the shortest words.
		 * - \`closest\`: Returns any of the words closest to the given length.
		 * - \`longest\`: Returns any of the longest words.
		 * - \`any-length\`: Returns a word with any length.
		 *
		 * @default 'any-length'
		 */
		strategy?: "fail" | "closest" | "shortest" | "longest" | "any-length";
	}): string;
	/**
	 * Returns a random conjunction.
	 *
	 * @param options The expected length of the word or the options to use.
	 * @param options.length The expected length of the word.
	 * @param options.strategy The strategy to apply when no words with a matching length are found.
	 *
	 * Available error handling strategies:
	 *
	 * - \`fail\`: Throws an error if no words with the given length are found.
	 * - \`shortest\`: Returns any of the shortest words.
	 * - \`closest\`: Returns any of the words closest to the given length.
	 * - \`longest\`: Returns any of the longest words.
	 * - \`any-length\`: Returns a word with any length.
	 *
	 * Defaults to \`'any-length'\`.
	 *
	 * @example
	 * faker.word.conjunction() // 'in order that'
	 * faker.word.conjunction(5) // 'since'
	 * faker.word.conjunction(100) // 'as long as'
	 * faker.word.conjunction({ strategy: 'shortest' }) // 'or'
	 * faker.word.conjunction({ length: { min: 5, max: 7 }, strategy: "fail" }) // 'hence'
	 *
	 * @since 6.0.0
	 */
	conjunction(options?: number | {
		/**
		 * The expected length of the word.
		 */
		length?: number | {
			/**
			 * The minimum length of the word.
			 */
			min: number;
			/**
			 * The maximum length of the word.
			 */
			max: number;
		};
		/**
		 * The strategy to apply when no words with a matching length are found.
		 *
		 * Available error handling strategies:
		 *
		 * - \`fail\`: Throws an error if no words with the given length are found.
		 * - \`shortest\`: Returns any of the shortest words.
		 * - \`closest\`: Returns any of the words closest to the given length.
		 * - \`longest\`: Returns any of the longest words.
		 * - \`any-length\`: Returns a word with any length.
		 *
		 * @default 'any-length'
		 */
		strategy?: "fail" | "closest" | "shortest" | "longest" | "any-length";
	}): string;
	/**
	 * Returns a random interjection.
	 *
	 * @param options The expected length of the word or the options to use.
	 * @param options.length The expected length of the word.
	 * @param options.strategy The strategy to apply when no words with a matching length are found.
	 *
	 * Available error handling strategies:
	 *
	 * - \`fail\`: Throws an error if no words with the given length are found.
	 * - \`shortest\`: Returns any of the shortest words.
	 * - \`closest\`: Returns any of the words closest to the given length.
	 * - \`longest\`: Returns any of the longest words.
	 * - \`any-length\`: Returns a word with any length.
	 *
	 * Defaults to \`'any-length'\`.
	 *
	 * @example
	 * faker.word.interjection() // 'gah'
	 * faker.word.interjection(5) // 'fooey'
	 * faker.word.interjection(100) // 'yowza'
	 * faker.word.interjection({ strategy: 'shortest' }) // 'hm'
	 * faker.word.interjection({ length: { min: 5, max: 7 }, strategy: "fail" }) // 'boohoo'
	 *
	 * @since 6.0.0
	 */
	interjection(options?: number | {
		/**
		 * The expected length of the word.
		 */
		length?: number | {
			/**
			 * The minimum length of the word.
			 */
			min: number;
			/**
			 * The maximum length of the word.
			 */
			max: number;
		};
		/**
		 * The strategy to apply when no words with a matching length are found.
		 *
		 * Available error handling strategies:
		 *
		 * - \`fail\`: Throws an error if no words with the given length are found.
		 * - \`shortest\`: Returns any of the shortest words.
		 * - \`closest\`: Returns any of the words closest to the given length.
		 * - \`longest\`: Returns any of the longest words.
		 * - \`any-length\`: Returns a word with any length.
		 *
		 * @default 'any-length'
		 */
		strategy?: "fail" | "closest" | "shortest" | "longest" | "any-length";
	}): string;
	/**
	 * Returns a random noun.
	 *
	 * @param options The expected length of the word or the options to use.
	 * @param options.length The expected length of the word.
	 * @param options.strategy The strategy to apply when no words with a matching length are found.
	 *
	 * Available error handling strategies:
	 *
	 * - \`fail\`: Throws an error if no words with the given length are found.
	 * - \`shortest\`: Returns any of the shortest words.
	 * - \`closest\`: Returns any of the words closest to the given length.
	 * - \`longest\`: Returns any of the longest words.
	 * - \`any-length\`: Returns a word with any length.
	 *
	 * Defaults to \`'any-length'\`.
	 *
	 * @example
	 * faker.word.noun() // 'external'
	 * faker.word.noun(5) // 'front'
	 * faker.word.noun(100) // 'care'
	 * faker.word.noun({ strategy: 'shortest' }) // 'ad'
	 * faker.word.noun({ length: { min: 5, max: 7 }, strategy: "fail" }) // 'average'
	 *
	 * @since 6.0.0
	 */
	noun(options?: number | {
		/**
		 * The expected length of the word.
		 */
		length?: number | {
			/**
			 * The minimum length of the word.
			 */
			min: number;
			/**
			 * The maximum length of the word.
			 */
			max: number;
		};
		/**
		 * The strategy to apply when no words with a matching length are found.
		 *
		 * Available error handling strategies:
		 *
		 * - \`fail\`: Throws an error if no words with the given length are found.
		 * - \`shortest\`: Returns any of the shortest words.
		 * - \`closest\`: Returns any of the words closest to the given length.
		 * - \`longest\`: Returns any of the longest words.
		 * - \`any-length\`: Returns a word with any length.
		 *
		 * @default 'any-length'
		 */
		strategy?: "fail" | "closest" | "shortest" | "longest" | "any-length";
	}): string;
	/**
	 * Returns a random preposition.
	 *
	 * @param options The expected length of the word or the options to use.
	 * @param options.length The expected length of the word.
	 * @param options.strategy The strategy to apply when no words with a matching length are found.
	 *
	 * Available error handling strategies:
	 *
	 * - \`fail\`: Throws an error if no words with the given length are found.
	 * - \`shortest\`: Returns any of the shortest words.
	 * - \`closest\`: Returns any of the words closest to the given length.
	 * - \`longest\`: Returns any of the longest words.
	 * - \`any-length\`: Returns a word with any length.
	 *
	 * Defaults to \`'any-length'\`.
	 *
	 * @example
	 * faker.word.preposition() // 'without'
	 * faker.word.preposition(5) // 'abaft'
	 * faker.word.preposition(100) // 'an'
	 * faker.word.preposition({ strategy: 'shortest' }) // 'a'
	 * faker.word.preposition({ length: { min: 5, max: 7 }, strategy: "fail" }) // 'given'
	 *
	 * @since 6.0.0
	 */
	preposition(options?: number | {
		/**
		 * The expected length of the word.
		 */
		length?: number | {
			/**
			 * The minimum length of the word.
			 */
			min: number;
			/**
			 * The maximum length of the word.
			 */
			max: number;
		};
		/**
		 * The strategy to apply when no words with a matching length are found.
		 *
		 * Available error handling strategies:
		 *
		 * - \`fail\`: Throws an error if no words with the given length are found.
		 * - \`shortest\`: Returns any of the shortest words.
		 * - \`closest\`: Returns any of the words closest to the given length.
		 * - \`longest\`: Returns any of the longest words.
		 * - \`any-length\`: Returns a word with any length.
		 *
		 * @default 'any-length'
		 */
		strategy?: "fail" | "closest" | "shortest" | "longest" | "any-length";
	}): string;
	/**
	 * Returns a random verb.
	 *
	 * @param options The expected length of the word or the options to use.
	 * @param options.length The expected length of the word.
	 * @param options.strategy The strategy to apply when no words with a matching length are found.
	 *
	 * Available error handling strategies:
	 *
	 * - \`fail\`: Throws an error if no words with the given length are found.
	 * - \`shortest\`: Returns any of the shortest words.
	 * - \`closest\`: Returns any of the words closest to the given length.
	 * - \`longest\`: Returns any of the longest words.
	 * - \`any-length\`: Returns a word with any length.
	 *
	 * Defaults to \`'any-length'\`.
	 *
	 * @example
	 * faker.word.verb() // 'act'
	 * faker.word.verb(5) // 'tinge'
	 * faker.word.verb(100) // 'mess'
	 * faker.word.verb({ strategy: 'shortest' }) // 'do'
	 * faker.word.verb({ length: { min: 5, max: 7 }, strategy: "fail" }) // 'vault'
	 *
	 * @since 6.0.0
	 */
	verb(options?: number | {
		/**
		 * The expected length of the word.
		 */
		length?: number | {
			/**
			 * The minimum length of the word.
			 */
			min: number;
			/**
			 * The maximum length of the word.
			 */
			max: number;
		};
		/**
		 * The strategy to apply when no words with a matching length are found.
		 *
		 * Available error handling strategies:
		 *
		 * - \`fail\`: Throws an error if no words with the given length are found.
		 * - \`shortest\`: Returns any of the shortest words.
		 * - \`closest\`: Returns any of the words closest to the given length.
		 * - \`longest\`: Returns any of the longest words.
		 * - \`any-length\`: Returns a word with any length.
		 *
		 * @default 'any-length'
		 */
		strategy?: "fail" | "closest" | "shortest" | "longest" | "any-length";
	}): string;
	/**
	 * Returns a random word, that can be an adjective, adverb, conjunction, interjection, noun, preposition, or verb.
	 *
	 * @param options The expected length of the word or the options to use.
	 * @param options.length The expected length of the word.
	 * @param options.strategy The strategy to apply when no words with a matching length are found.
	 *
	 * Available error handling strategies:
	 *
	 * - \`fail\`: Throws an error if no words with the given length are found.
	 * - \`shortest\`: Returns any of the shortest words.
	 * - \`closest\`: Returns any of the words closest to the given length.
	 * - \`longest\`: Returns any of the longest words.
	 * - \`any-length\`: Returns a word with any length.
	 *
	 * Defaults to \`'any-length'\`.
	 *
	 * @example
	 * faker.word.sample() // 'incidentally'
	 * faker.word.sample(5) // 'fruit'
	 *
	 * @since 8.0.0
	 */
	sample(options?: number | {
		/**
		 * The expected length of the word.
		 */
		length?: number | {
			/**
			 * The minimum length of the word.
			 */
			min: number;
			/**
			 * The maximum length of the word.
			 */
			max: number;
		};
		/**
		 * The strategy to apply when no words with a matching length are found.
		 *
		 * Available error handling strategies:
		 *
		 * - \`fail\`: Throws an error if no words with the given length are found.
		 * - \`shortest\`: Returns any of the shortest words.
		 * - \`closest\`: Returns any of the words closest to the given length.
		 * - \`longest\`: Returns any of the longest words.
		 * - \`any-length\`: Returns a word with any length.
		 *
		 * @default 'any-length'
		 */
		strategy?: "fail" | "closest" | "shortest" | "longest" | "any-length";
	}): string;
	/**
	 * Returns a random string containing some words separated by spaces.
	 *
	 * @param options The optional options object or the number of words to return.
	 * @param options.count The number of words to return. Defaults to a random value between \`1\` and \`3\`.
	 *
	 * @example
	 * faker.word.words() // 'almost'
	 * faker.word.words(5) // 'before hourly patiently dribble equal'
	 * faker.word.words({ count: 5 }) // 'whoever edible um kissingly faraway'
	 * faker.word.words({ count: { min: 5, max: 10 } }) // 'vice buoyant through apropos poised total wary boohoo'
	 *
	 * @since 8.0.0
	 */
	words(options?: number | {
		/**
		 * The number of words to return.
		 *
		 * @default { min: 1, max: 3 }
		 */
		count?: number | {
			/**
			 * The minimum number of words to return.
			 */
			min: number;
			/**
			 * The maximum number of words to return.
			 */
			max: number;
		};
	}): string;
}
/**
 * Interface for a random number generator.
 *
 * **Note:** Normally there is no need to implement this interface directly,
 * unless you want to achieve a specific goal with it.
 *
 * This interface enables you to use random generators from third party libraries such as [pure-rand](https://github.com/dubzzz/pure-rand).
 *
 * Instances are expected to be ready for use before being passed to any Faker constructor,
 * this includes being \`seed()\`ed with either a random or fixed value.
 *
 * For more information please refer to the [documentation](https://fakerjs.dev/api/randomizer.html).
 *
 * @example
 * import { Faker, Randomizer, SimpleFaker } from '@faker-js/faker';
 * import { RandomGenerator, xoroshiro128plus } from 'pure-rand';
 *
 * function generatePureRandRandomizer(
 *   seed: number | number[] = Date.now() ^ (Math.random() * 0x100000000),
 *   factory: (seed: number) => RandomGenerator = xoroshiro128plus
 * ): Randomizer {
 *   const self = {
 *     next: () => (self.generator.unsafeNext() >>> 0) / 0x100000000,
 *     seed: (seed: number | number[]) => {
 *       self.generator = factory(typeof seed === 'number' ? seed : seed[0]);
 *     },
 *   } as Randomizer & { generator: RandomGenerator };
 *   self.seed(seed);
 *   return self;
 * }
 *
 * const randomizer = generatePureRandRandomizer();
 *
 * const simpleFaker = new SimpleFaker({ randomizer });
 *
 * const faker = new Faker({
 *   locale: ...,
 *   randomizer,
 * });
 *
 * @since 8.2.0
 */
export interface Randomizer {
	/**
	 * Generates a random float between 0 (inclusive) and 1 (exclusive).
	 *
	 * @example
	 * randomizer.next() // 0.3404027920160495
	 * randomizer.next() // 0.929890375900335
	 * randomizer.next() // 0.5866362918861691
	 *
	 * @since 8.2.0
	 */
	next(): number;
	/**
	 * Sets the seed to use.
	 *
	 * @param seed The seed to use.
	 *
	 * @example
	 * // Random seeds
	 * randomizer.seed(Date.now() ^ (Math.random() * 0x100000000));
	 * // Fixed seeds (for reproducibility)
	 * randomizer.seed(42);
	 * randomizer.seed([42, 13.37]);
	 *
	 * @since 8.2.0
	 */
	seed(seed: number | number[]): void;
}
/**
 * Module to generate boolean values.
 *
 * ### Overview
 *
 * For a simple random true or false value, use [\`boolean()\`](https://fakerjs.dev/api/datatype.html#boolean).
 */
export declare class DatatypeModule extends SimpleModuleBase {
	/**
	 * Returns the boolean value true or false.
	 *
	 * **Note:**
	 * A probability of \`0.75\` results in \`true\` being returned \`75%\` of the calls; likewise \`0.3\` => \`30%\`.
	 * If the probability is \`<= 0.0\`, it will always return \`false\`.
	 * If the probability is \`>= 1.0\`, it will always return \`true\`.
	 * The probability is limited to two decimal places.
	 *
	 * @param options The optional options object or the probability (\`[0.00, 1.00]\`) of returning \`true\`.
	 * @param options.probability The probability (\`[0.00, 1.00]\`) of returning \`true\`. Defaults to \`0.5\`.
	 *
	 * @example
	 * faker.datatype.boolean() // false
	 * faker.datatype.boolean(0.9) // true
	 * faker.datatype.boolean({ probability: 0.1 }) // false
	 *
	 * @since 5.5.0
	 */
	boolean(options?: number | {
		/**
		 * The probability (\`[0.00, 1.00]\`) of returning \`true\`.
		 *
		 * @default 0.5
		 */
		probability?: number;
	}): boolean;
}
/**
 * Module to generate numbers of any kind.
 *
 * ### Overview
 *
 * For simple integers, use [\`int()\`](https://fakerjs.dev/api/number.html#int). For decimal/floating-point numbers, use [\`float()\`](https://fakerjs.dev/api/number.html#float).
 *
 * For numbers not in base-10, you can use [\`hex()\`](https://fakerjs.dev/api/number.html#hex), [\`octal()\`](https://fakerjs.dev/api/number.html#octal) and [\`binary()\`](https://fakerjs.dev/api/number.html#binary)\`.
 *
 * ### Related modules
 *
 * - For numeric strings of a given length, use [\`faker.string.numeric()\`](https://fakerjs.dev/api/string.html#numeric).
 * - For credit card numbers, use [\`faker.finance.creditCardNumber()\`](https://fakerjs.dev/api/finance.html#creditcardnumber).
 */
export declare class NumberModule extends SimpleModuleBase {
	/**
	 * Returns a single random integer between zero and the given max value or the given range.
	 * The bounds are inclusive.
	 *
	 * @param options Maximum value or options object.
	 * @param options.min Lower bound for generated number. Defaults to \`0\`.
	 * @param options.max Upper bound for generated number. Defaults to \`Number.MAX_SAFE_INTEGER\`.
	 * @param options.multipleOf Generated number will be a multiple of the given integer. Defaults to \`1\`.
	 *
	 * @throws When \`min\` is greater than \`max\`.
	 * @throws When there are no suitable integers between \`min\` and \`max\`.
	 * @throws When \`multipleOf\` is not a positive integer.
	 *
	 * @see faker.string.numeric(): For generating a \`string\` of digits with a given length (range).
	 *
	 * @example
	 * faker.number.int() // 2900970162509863
	 * faker.number.int(100) // 52
	 * faker.number.int({ min: 1000000 }) // 2900970162509863
	 * faker.number.int({ max: 100 }) // 42
	 * faker.number.int({ min: 10, max: 100 }) // 57
	 * faker.number.int({ min: 10, max: 100, multipleOf: 10 }) // 50
	 *
	 * @since 8.0.0
	 */
	int(options?: number | {
		/**
		 * Lower bound for generated number.
		 *
		 * @default 0
		 */
		min?: number;
		/**
		 * Upper bound for generated number.
		 *
		 * @default Number.MAX_SAFE_INTEGER
		 */
		max?: number;
		/**
		 * Generated number will be a multiple of the given integer.
		 *
		 * @default 1
		 */
		multipleOf?: number;
	}): number;
	/**
	 * Returns a single random floating-point number, by default between \`0.0\` and \`1.0\`. To change the range, pass a \`min\` and \`max\` value. To limit the number of decimal places, pass a \`multipleOf\` or \`fractionDigits\` parameter.
	 *
	 * @param options Upper bound or options object.
	 * @param options.min Lower bound for generated number, inclusive. Defaults to \`0.0\`.
	 * @param options.max Upper bound for generated number, exclusive, unless \`multipleOf\` or \`fractionDigits\` are passed. Defaults to \`1.0\`.
	 * @param options.multipleOf The generated number will be a multiple of this parameter. Only one of \`multipleOf\` or \`fractionDigits\` should be passed.
	 * @param options.fractionDigits The maximum number of digits to appear after the decimal point, for example \`2\` will round to 2 decimal points.  Only one of \`multipleOf\` or \`fractionDigits\` should be passed.
	 *
	 * @throws When \`min\` is greater than \`max\`.
	 * @throws When \`multipleOf\` is negative.
	 * @throws When \`fractionDigits\` is negative.
	 * @throws When \`fractionDigits\` and \`multipleOf\` is passed in the same options object.
	 *
	 * @example
	 * faker.number.float() // 0.5688541042618454
	 * faker.number.float(3) // 2.367973240558058
	 * faker.number.float({ max: 100 }) // 17.3687307164073
	 * faker.number.float({ min: 20, max: 30 }) // 23.94764115102589
	 * faker.number.float({ multipleOf: 0.25, min: 0, max:10 }) // 7.75
	 * faker.number.float({ fractionDigits: 1 }) // 0.9
	 * faker.number.float({ min: 10, max: 100, multipleOf: 0.02 }) // 35.42
	 * faker.number.float({ min: 10, max: 100, fractionDigits: 3 }) // 65.716
	 * faker.number.float({ min: 10, max: 100, multipleOf: 0.001 }) // 65.716 - same as above
	 *
	 * @since 8.0.0
	 */
	float(options?: number | {
		/**
		 * Lower bound for generated number, inclusive.
		 *
		 * @default 0.0
		 */
		min?: number;
		/**
		 * Upper bound for generated number, exclusive, unless \`multipleOf\` or \`fractionDigits\` are passed.
		 *
		 * @default 1.0
		 */
		max?: number;
		/**
		 * The maximum number of digits to appear after the decimal point, for example \`2\` will round to 2 decimal points.  Only one of \`multipleOf\` or \`fractionDigits\` should be passed.
		 */
		fractionDigits?: number;
		/**
		 * The generated number will be a multiple of this parameter. Only one of \`multipleOf\` or \`fractionDigits\` should be passed.
		 */
		multipleOf?: number;
	}): number;
	/**
	 * Returns a [binary](https://en.wikipedia.org/wiki/Binary_number) number.
	 * The bounds are inclusive.
	 *
	 * @param options Maximum value or options object.
	 * @param options.min Lower bound for generated number. Defaults to \`0\`.
	 * @param options.max Upper bound for generated number. Defaults to \`1\`.
	 *
	 * @throws When \`min\` is greater than \`max\`.
	 * @throws When there are no integers between \`min\` and \`max\`.
	 *
	 * @see faker.string.binary(): For generating a \`binary string\` with a given length (range).
	 *
	 * @example
	 * faker.number.binary() // '1'
	 * faker.number.binary(255) // '110101'
	 * faker.number.binary({ min: 0, max: 65535 }) // '10110101'
	 *
	 * @since 8.0.0
	 */
	binary(options?: number | {
		/**
		 * Lower bound for generated number.
		 *
		 * @default 0
		 */
		min?: number;
		/**
		 * Upper bound for generated number.
		 *
		 * @default 1
		 */
		max?: number;
	}): string;
	/**
	 * Returns an [octal](https://en.wikipedia.org/wiki/Octal) number.
	 * The bounds are inclusive.
	 *
	 * @param options Maximum value or options object.
	 * @param options.min Lower bound for generated number. Defaults to \`0\`.
	 * @param options.max Upper bound for generated number. Defaults to \`7\`.
	 *
	 * @throws When \`min\` is greater than \`max\`.
	 * @throws When there are no integers between \`min\` and \`max\`.
	 *
	 * @see faker.string.octal(): For generating an \`octal string\` with a given length (range).
	 *
	 * @example
	 * faker.number.octal() // '5'
	 * faker.number.octal(255) // '377'
	 * faker.number.octal({ min: 0, max: 65535 }) // '4766'
	 *
	 * @since 8.0.0
	 */
	octal(options?: number | {
		/**
		 * Lower bound for generated number.
		 *
		 * @default 0
		 */
		min?: number;
		/**
		 * Upper bound for generated number.
		 *
		 * @default 7
		 */
		max?: number;
	}): string;
	/**
	 * Returns a lowercase [hexadecimal](https://en.wikipedia.org/wiki/Hexadecimal) number.
	 * The bounds are inclusive.
	 *
	 * @param options Maximum value or options object.
	 * @param options.min Lower bound for generated number. Defaults to \`0\`.
	 * @param options.max Upper bound for generated number. Defaults to \`15\`.
	 *
	 * @throws When \`min\` is greater than \`max\`.
	 * @throws When there are no integers between \`min\` and \`max\`.
	 *
	 * @example
	 * faker.number.hex() // 'b'
	 * faker.number.hex(255) // '9d'
	 * faker.number.hex({ min: 0, max: 65535 }) // 'af17'
	 *
	 * @since 8.0.0
	 */
	hex(options?: number | {
		/**
		 * Lower bound for generated number.
		 *
		 * @default 0
		 */
		min?: number;
		/**
		 * Upper bound for generated number.
		 *
		 * @default 15
		 */
		max?: number;
	}): string;
	/**
	 * Returns a [BigInt](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#bigint_type) number.
	 * The bounds are inclusive.
	 *
	 * @param options Maximum value or options object.
	 * @param options.min Lower bound for generated bigint. Defaults to \`0n\`.
	 * @param options.max Upper bound for generated bigint. Defaults to \`min + 999999999999999n\`.
	 *
	 * @throws When \`min\` is greater than \`max\`.
	 *
	 * @example
	 * faker.number.bigInt() // 55422n
	 * faker.number.bigInt(100n) // 52n
	 * faker.number.bigInt({ min: 1000000n }) // 431433n
	 * faker.number.bigInt({ max: 100n }) // 42n
	 * faker.number.bigInt({ min: 10n, max: 100n }) // 36n
	 *
	 * @since 8.0.0
	 */
	bigInt(options?: bigint | number | string | boolean | {
		/**
		 * Lower bound for generated bigint.
		 *
		 * @default 0n
		 */
		min?: bigint | number | string | boolean;
		/**
		 * Upper bound for generated bigint.
		 *
		 * @default min + 999999999999999n
		 */
		max?: bigint | number | string | boolean;
	}): bigint;
	/**
	 * Returns a roman numeral in String format.
	 * The bounds are inclusive.
	 *
	 * @param options Maximum value or options object.
	 * @param options.min Lower bound for generated roman numerals. Defaults to \`1\`.
	 * @param options.max Upper bound for generated roman numerals. Defaults to \`3999\`.
	 *
	 * @throws When \`min\` is greater than \`max\`.
	 * @throws When \`min\`, \`max\` is not a number.
	 * @throws When \`min\` is less than \`1\`.
	 * @throws When \`max\` is greater than \`3999\`.
	 *
	 * @example
	 * faker.number.romanNumeral() // "CMXCIII"
	 * faker.number.romanNumeral(5) // "III"
	 * faker.number.romanNumeral({ min: 10 }) // "XCIX"
	 * faker.number.romanNumeral({ max: 20 }) // "XVII"
	 * faker.number.romanNumeral({ min: 5, max: 10 }) // "VII"
	 *
	 * @since 9.2.0
	 */
	romanNumeral(options?: number | {
		/**
		 * Lower bound for generated number.
		 *
		 * @default 1
		 */
		min?: number;
		/**
		 * Upper bound for generated number.
		 *
		 * @default 3999
		 */
		max?: number;
	}): string;
}
/**
 * This is a simplified Faker class that doesn't need any localized data to generate its output.
 *
 * It only includes methods from:
 * - \`datatype\`
 * - \`date\` (without \`month\` and \`weekday\`)
 * - \`helpers\` (without \`fake\`)
 * - \`number\`
 * - \`string\`
 *
 * @example
 * import { simpleFaker } from '@faker-js/faker';
 * // const { simpleFaker } = require('@faker-js/faker');
 *
 * // simpleFaker.seed(1234);
 *
 * simpleFaker.number.int(10); // 4
 * simpleFaker.string.uuid(); // 'c50e1f5c-86e8-4aa9-888e-168e0a182519'
 */
export declare class SimpleFaker {
	protected _defaultRefDate: () => Date;
	/**
	 * Gets a new reference date used to generate relative dates.
	 */
	get defaultRefDate(): () => Date;
	/**
	 * Sets the \`refDate\` source to use if no \`refDate\` date is passed to the date methods.
	 *
	 * @param dateOrSource The function or the static value used to generate the \`refDate\` date instance.
	 * The function must return a new valid \`Date\` instance for every call.
	 * Defaults to \`() => new Date()\`.
	 *
	 * @see [Reproducible Results](https://fakerjs.dev/guide/usage.html#reproducible-results)
	 * @see faker.seed(): For generating reproducible values.
	 *
	 * @example
	 * faker.seed(1234);
	 *
	 * // Default behavior
	 * // faker.setDefaultRefDate();
	 * faker.date.past(); // Changes based on the current date/time
	 *
	 * // Use a static ref date
	 * faker.setDefaultRefDate(new Date('2020-01-01'));
	 * faker.date.past(); // Reproducible '2019-07-03T08:27:58.118Z'
	 *
	 * // Use a ref date that changes every time it is used
	 * let clock = new Date("2020-01-01").getTime();
	 * faker.setDefaultRefDate(() => {
	 *   clock += 1000; // +1s
	 *   return new Date(clock);
	 * });
	 *
	 * faker.defaultRefDate() // 2020-01-01T00:00:01Z
	 * faker.defaultRefDate() // 2020-01-01T00:00:02Z
	 *
	 * @since 8.0.0
	 */
	setDefaultRefDate(dateOrSource?: string | Date | number | (() => Date)): void;
	readonly datatype: DatatypeModule;
	readonly date: SimpleDateModule;
	readonly helpers: SimpleHelpersModule;
	readonly number: NumberModule;
	readonly string: StringModule;
	/**
	 * Creates a new instance of SimpleFaker.
	 *
	 * In nearly any case you should use the prebuilt \`simpleFaker\` instances instead of the constructor.
	 *
	 * @param options The options to use.
	 * @param options.randomizer The Randomizer to use.
	 * Specify this only if you want to use it to achieve a specific goal,
	 * such as sharing the same random generator with other instances/tools.
	 * Defaults to faker's Mersenne Twister based pseudo random number generator.
	 * @param options.seed The initial seed to use.
	 * The seed can be used to generate reproducible values.
	 * Refer to the \`seed()\` method for more information.
	 * Defaults to a random seed.
	 *
	 * @example
	 * import { SimpleFaker } from '@faker-js/faker';
	 * // const { SimpleFaker } = require('@faker-js/faker');
	 *
	 * // create a SimpleFaker without any locale data
	 * const customSimpleFaker = new SimpleFaker();
	 *
	 * customSimpleFaker.helpers.arrayElement(['red', 'green', 'blue']); // 'green'
	 * customSimpleFaker.number.int(10); // 4
	 *
	 * @since 8.1.0
	 */
	constructor(options?: {
		/**
		 * The Randomizer to use.
		 * Specify this only if you want to use it to achieve a specific goal,
		 * such as sharing the same random generator with other instances/tools.
		 *
		 * @default generateMersenne53Randomizer()
		 */
		randomizer?: Randomizer;
		/**
		 * The initial seed to use.
		 * The seed can be used to generate reproducible values.
		 *
		 * Refer to the \`seed()\` method for more information.
		 *
		 * Defaults to a random seed.
		 */
		seed?: number;
	});
	/**
	 * Sets the seed or generates a new one.
	 *
	 * Please note that generated values are dependent on both the seed and the
	 * number of calls that have been made since it was set.
	 *
	 * This method is intended to allow for consistent values in tests, so you
	 * might want to use hardcoded values as the seed.
	 *
	 * In addition to that it can be used for creating truly random tests
	 * (by passing no arguments), that still can be reproduced if needed,
	 * by logging the result and explicitly setting it if needed.
	 *
	 * @param seed The seed to use. Defaults to a random number.
	 *
	 * @returns The seed that was set.
	 *
	 * @see [Reproducible Results](https://fakerjs.dev/guide/usage.html#reproducible-results)
	 * @see faker.setDefaultRefDate(): For generating reproducible relative dates.
	 *
	 * @example
	 * // Consistent values for tests:
	 * faker.seed(42)
	 * faker.number.int(10); // 4
	 * faker.number.int(10); // 8
	 *
	 * faker.seed(42)
	 * faker.number.int(10); // 4
	 * faker.number.int(10); // 8
	 *
	 * // Random but reproducible tests:
	 * // Simply log the seed, and if you need to reproduce it, insert the seed here
	 * console.log('Running test with seed:', faker.seed());
	 *
	 * @since 6.0.0
	 */
	seed(seed?: number): number;
	/**
	 * Sets the seed array.
	 *
	 * Please note that generated values are dependent on both the seed and the
	 * number of calls that have been made since it was set.
	 *
	 * This method is intended to allow for consistent values in a tests, so you
	 * might want to use hardcoded values as the seed.
	 *
	 * In addition to that it can be used for creating truly random tests
	 * (by passing no arguments), that still can be reproduced if needed,
	 * by logging the result and explicitly setting it if needed.
	 *
	 * @param seedArray The seed array to use.
	 *
	 * @returns The seed array that was set.
	 *
	 * @see [Reproducible Results](https://fakerjs.dev/guide/usage.html#reproducible-results)
	 * @see faker.setDefaultRefDate(): For generating reproducible relative dates.
	 *
	 * @example
	 * // Consistent values for tests:
	 * faker.seed([42, 13, 17])
	 * faker.number.int(10); // 4
	 * faker.number.int(10); // 8
	 *
	 * faker.seed([42, 13, 17])
	 * faker.number.int(10); // 4
	 * faker.number.int(10); // 8
	 *
	 * // Random but reproducible tests:
	 * // Simply log the seed, and if you need to reproduce it, insert the seed here
	 * console.log('Running test with seed:', faker.seed());
	 *
	 * @since 6.0.0
	 */
	seed(seedArray: number[]): number[];
	/**
	 * Sets the seed or generates a new one.
	 *
	 * Please note that generated values are dependent on both the seed and the
	 * number of calls that have been made since it was set.
	 *
	 * This method is intended to allow for consistent values in a tests, so you
	 * might want to use hardcoded values as the seed.
	 *
	 * In addition to that it can be used for creating truly random tests
	 * (by passing no arguments), that still can be reproduced if needed,
	 * by logging the result and explicitly setting it if needed.
	 *
	 * @param seed The seed or seed array to use.
	 *
	 * @returns The seed that was set.
	 *
	 * @see [Reproducible Results](https://fakerjs.dev/guide/usage.html#reproducible-results)
	 * @see faker.setDefaultRefDate(): For generating reproducible dates.
	 *
	 * @example
	 * // Consistent values for tests (using a number):
	 * faker.seed(42)
	 * faker.number.int(10); // 4
	 * faker.number.int(10); // 8
	 *
	 * faker.seed(42)
	 * faker.number.int(10); // 4
	 * faker.number.int(10); // 8
	 *
	 * // Consistent values for tests (using an array):
	 * faker.seed([42, 13, 17])
	 * faker.number.int(10); // 4
	 * faker.number.int(10); // 8
	 *
	 * faker.seed([42, 13, 17])
	 * faker.number.int(10); // 4
	 * faker.number.int(10); // 8
	 *
	 * // Random but reproducible tests:
	 * // Simply log the seed, and if you need to reproduce it, insert the seed here
	 * console.log('Running test with seed:', faker.seed());
	 *
	 * @since 6.0.0
	 */
	seed(seed?: number | number[]): number | number[];
}
export declare const simpleFaker: SimpleFaker;
/**
 * This is Faker's main class containing all modules that can be used to generate data.
 *
 * Please have a look at the individual modules and methods for more information and examples.
 *
 * @example
 * import { faker } from '@faker-js/faker';
 * // const { faker } = require('@faker-js/faker');
 *
 * // faker.seed(1234);
 *
 * faker.person.firstName(); // 'John'
 * faker.person.lastName(); // 'Doe'
 * @example
 * import { Faker, es } from '@faker-js/faker';
 * // const { Faker, es } = require('@faker-js/faker');
 *
 * // create a Faker instance with only es data and no en fallback (=> smaller bundle size)
 * const customFaker = new Faker({ locale: [es] });
 *
 * customFaker.person.firstName(); // 'Javier'
 * customFaker.person.lastName(); // 'Ocampo Corrales'
 *
 * customFaker.music.genre(); // throws Error as this data is not available in \`es\`
 */
export declare class Faker extends SimpleFaker {
	readonly rawDefinitions: LocaleDefinition;
	readonly definitions: LocaleProxy;
	readonly airline: AirlineModule;
	readonly animal: AnimalModule;
	readonly book: BookModule;
	readonly color: ColorModule;
	readonly commerce: CommerceModule;
	readonly company: CompanyModule;
	readonly database: DatabaseModule;
	readonly date: DateModule;
	readonly finance: FinanceModule;
	readonly food: FoodModule;
	readonly git: GitModule;
	readonly hacker: HackerModule;
	readonly helpers: HelpersModule;
	readonly image: ImageModule;
	readonly internet: InternetModule;
	readonly location: LocationModule;
	readonly lorem: LoremModule;
	readonly music: MusicModule;
	readonly person: PersonModule;
	readonly phone: PhoneModule;
	readonly science: ScienceModule;
	readonly system: SystemModule;
	readonly vehicle: VehicleModule;
	readonly word: WordModule;
	/** @deprecated Use {@link Faker#location} instead */
	get address(): LocationModule;
	/** @deprecated Use {@link Faker#person} instead */
	get name(): PersonModule;
	/**
	 * Creates a new instance of Faker.
	 *
	 * In most cases you should use one of the prebuilt Faker instances instead of the constructor, for example \`fakerDE\`, \`fakerFR\`, ...
	 *
	 * You only need to use the constructor if you need custom fallback logic or a custom locale.
	 *
	 * For more information see our [Localization Guide](https://fakerjs.dev/guide/localization.html).
	 *
	 * @param options The options to use.
	 * @param options.locale The locale data to use.
	 * @param options.randomizer The Randomizer to use.
	 * Specify this only if you want to use it to achieve a specific goal,
	 * such as sharing the same random generator with other instances/tools.
	 * Defaults to faker's Mersenne Twister based pseudo random number generator.
	 * @param options.seed The initial seed to use.
	 * The seed can be used to generate reproducible values.
	 * Refer to the \`seed()\` method for more information.
	 * Defaults to a random seed.
	 *
	 * @example
	 * import { Faker, es } from '@faker-js/faker';
	 * // const { Faker, es } = require('@faker-js/faker');
	 *
	 * // create a Faker instance with only es data and no en fallback (=> smaller bundle size)
	 * const customFaker = new Faker({ locale: [es] });
	 *
	 * customFaker.person.firstName(); // 'Javier'
	 * customFaker.person.lastName(); // 'Ocampo Corrales'
	 *
	 * customFaker.music.genre(); // throws Error as this data is not available in \`es\`
	 *
	 * @since 8.0.0
	 */
	constructor(options: {
		/**
		 * The locale data to use for this instance.
		 * If an array is provided, the first locale that has a definition for a given property will be used.
		 *
		 * @see mergeLocales(): For more information about how the locales are merged.
		 */
		locale: LocaleDefinition | LocaleDefinition[];
		/**
		 * The Randomizer to use.
		 * Specify this only if you want to use it to achieve a specific goal,
		 * such as sharing the same random generator with other instances/tools.
		 *
		 * @default generateMersenne53Randomizer()
		 */
		randomizer?: Randomizer;
		/**
		 * The initial seed to use.
		 * The seed can be used to generate reproducible values.
		 *
		 * Refer to the \`seed()\` method for more information.
		 *
		 * Defaults to a random seed.
		 */
		seed?: number;
	});
	/**
	 * Returns an object with metadata about the current locale.
	 *
	 * @example
	 * import { faker, fakerES_MX } from '@faker-js/faker';
	 * // const { faker, fakerES_MX } = require("@faker-js/faker")
	 * faker.getMetadata(); // { title: 'English', code: 'en', language: 'en', endonym: 'English', dir: 'ltr', script: 'Latn' }
	 * fakerES_MX.getMetadata(); // { title: 'Spanish (Mexico)', code: 'es_MX', language: 'es', endonym: 'Español (México)', dir: 'ltr', script: 'Latn', country: 'MX' }
	 *
	 * @since 8.1.0
	 */
	getMetadata(): MetadataDefinition;
}
export type FakerOptions = ConstructorParameters<typeof Faker>[0];
declare abstract class SimpleModuleBase {
	protected readonly faker: SimpleFaker;
	constructor(faker: SimpleFaker);
}
declare abstract class ModuleBase extends SimpleModuleBase {
	protected readonly faker: Faker;
	constructor(faker: Faker);
}
export declare enum Aircraft {
	Narrowbody = "narrowbody",
	Regional = "regional",
	Widebody = "widebody"
}
export type AircraftType = \`\${Aircraft}\`;
export interface Airline {
	/**
	 * The name of the airline (e.g. \`'American Airlines'\`).
	 */
	readonly name: string;
	/**
	 * The 2 character IATA code of the airline (e.g. \`'AA'\`).
	 */
	readonly iataCode: string;
}
export interface Airplane {
	/**
	 * The name of the airplane (e.g. \`'Airbus A321'\`).
	 */
	readonly name: string;
	/**
	 * The IATA code of the airplane (e.g. \`'321'\`).
	 */
	readonly iataTypeCode: string;
}
export interface Airport {
	/**
	 * The name of the airport (e.g. \`'Dallas Fort Worth International Airport'\`).
	 */
	readonly name: string;
	/**
	 * The IATA code of the airport (e.g. \`'DFW'\`).
	 */
	readonly iataCode: string;
}
/**
 * Module to generate airline and airport related data.
 *
 * ### Overview
 *
 * Several methods in this module return objects rather than strings. For example, you can use \`faker.airline.airport().iataCode\` to pick out the specific property you need.
 *
 * For a random airport, use [\`airport()\`](https://fakerjs.dev/api/airline.html#airport).
 *
 * For a random airline, use [\`airline()\`](https://fakerjs.dev/api/airline.html#airline).
 *
 * For a dummy booking, a passenger will generally book a flight on a specific [\`flightNumber()\`](https://fakerjs.dev/api/airline.html#flightnumber), [\`airplane()\`](https://fakerjs.dev/api/airline.html#airplane), be allocated a [\`seat()\`](https://fakerjs.dev/api/airline.html#seat), and [\`recordLocator()\`](https://fakerjs.dev/api/airline.html#recordlocator).
 *
 * ### Related Modules
 *
 * - To generate sample passenger data, you can use the methods of the [\`faker.person\`](https://fakerjs.dev/api/person.html) module.
 */
export declare class AirlineModule extends ModuleBase {
	/**
	 * Generates a random airport.
	 *
	 * @example
	 * faker.airline.airport() // { name: 'Dallas Fort Worth International Airport', iataCode: 'DFW' }
	 *
	 * @since 8.0.0
	 */
	airport(): Airport;
	/**
	 * Generates a random airline.
	 *
	 * @example
	 * faker.airline.airline() // { name: 'American Airlines', iataCode: 'AA' }
	 *
	 * @since 8.0.0
	 */
	airline(): Airline;
	/**
	 * Generates a random airplane.
	 *
	 * @example
	 * faker.airline.airplane() // { name: 'Airbus A321neo', iataTypeCode: '32Q' }
	 *
	 * @since 8.0.0
	 */
	airplane(): Airplane;
	/**
	 * Generates a random [record locator](https://en.wikipedia.org/wiki/Record_locator). Record locators
	 * are used by airlines to identify reservations. They're also known as booking reference numbers,
	 * locator codes, confirmation codes, or reservation codes.
	 *
	 * @param options The options to use.
	 * @param options.allowNumerics Whether to allow numeric characters. Defaults to \`false\`.
	 * @param options.allowVisuallySimilarCharacters Whether to allow visually similar characters such as '1' and 'I'. Defaults to \`false\`.
	 *
	 * @example
	 * faker.airline.recordLocator() // 'KIFRWE'
	 * faker.airline.recordLocator({ allowNumerics: true }) // 'E5TYEM'
	 * faker.airline.recordLocator({ allowVisuallySimilarCharacters: true }) // 'ANZNEI'
	 * faker.airline.recordLocator({ allowNumerics: true, allowVisuallySimilarCharacters: true }) // '1Z2Z3E'
	 *
	 * @since 8.0.0
	 */
	recordLocator(options?: {
		/**
		 * Whether to allow numeric characters.
		 *
		 * @default false
		 */
		allowNumerics?: boolean;
		/**
		 * Whether to allow visually similar characters such as '1' and 'I'.
		 *
		 * @default false
		 */
		allowVisuallySimilarCharacters?: boolean;
	}): string;
	/**
	 * Generates a random seat.
	 *
	 * @param options The options to use.
	 * @param options.aircraftType The aircraft type. Can be one of \`narrowbody\`, \`regional\`, \`widebody\`. Defaults to \`narrowbody\`.
	 *
	 * @example
	 * faker.airline.seat() // '22C'
	 * faker.airline.seat({ aircraftType: 'regional' }) // '7A'
	 * faker.airline.seat({ aircraftType: 'widebody' }) // '42K'
	 *
	 * @since 8.0.0
	 */
	seat(options?: {
		/**
		 * The aircraft type. Can be one of \`narrowbody\`, \`regional\`, \`widebody\`.
		 *
		 * @default 'narrowbody'
		 */
		aircraftType?: AircraftType;
	}): string;
	/**
	 * Returns a random aircraft type.
	 *
	 * @example
	 * faker.airline.aircraftType() // 'narrowbody'
	 *
	 * @since 8.0.0
	 */
	aircraftType(): AircraftType;
	/**
	 * Returns a random flight number. Flight numbers are always 1 to 4 digits long. Sometimes they are
	 * used without leading zeros (e.g.: \`American Airlines flight 425\`) and sometimes with leading
	 * zeros, often with the airline code prepended (e.g.: \`AA0425\`).
	 *
	 * To generate a flight number prepended with an airline code, combine this function with the
	 * \`airline()\` function and use template literals:
	 * \`\`\`
	 * \`\${faker.airline.airline().iataCode}\${faker.airline.flightNumber({ addLeadingZeros: true })}\` // 'AA0798'
	 * \`\`\`
	 *
	 * @param options The options to use.
	 * @param options.length The number or range of digits to generate. Defaults to \`{ min: 1, max: 4 }\`.
	 * @param options.addLeadingZeros Whether to pad the flight number up to 4 digits with leading zeros. Defaults to \`false\`.
	 *
	 * @example
	 * faker.airline.flightNumber() // '2405'
	 * faker.airline.flightNumber({ addLeadingZeros: true }) // '0249'
	 * faker.airline.flightNumber({ addLeadingZeros: true, length: 2 }) // '0042'
	 * faker.airline.flightNumber({ addLeadingZeros: true, length: { min: 2, max: 3 } }) // '0624'
	 * faker.airline.flightNumber({ length: 3 }) // '425'
	 * faker.airline.flightNumber({ length: { min: 2, max: 3 } }) // '84'
	 *
	 * @since 8.0.0
	 */
	flightNumber(options?: {
		/**
		 * The number or range of digits to generate.
		 *
		 * @default { min: 1, max: 4 }
		 */
		length?: number | {
			/**
			 * The minimum number of digits to generate.
			 */
			min: number;
			/**
			 * The maximum number of digits to generate.
			 */
			max: number;
		};
		/**
		 * Whether to pad the flight number up to 4 digits with leading zeros.
		 *
		 * @default false
		 */
		addLeadingZeros?: boolean;
	}): string;
}
/**
 * The possible definitions related to animals.
 */
export type AnimalDefinition = LocaleEntry<{
	bear: string[];
	bird: string[];
	cat: string[];
	cetacean: string[];
	cow: string[];
	crocodilia: string[];
	dog: string[];
	fish: string[];
	horse: string[];
	insect: string[];
	lion: string[];
	rabbit: string[];
	rodent: string[];
	snake: string[];
	type: string[];
	pet_name: string[];
}>;
/**
 * The possible definitions related to books.
 */
export type BookDefinition = LocaleEntry<{
	/**
	 * The names of actual book authors.
	 */
	author: string[];
	/**
	 * The formats of a book.
	 */
	format: string[];
	/**
	 * The names of some book genres.
	 */
	genre: string[];
	/**
	 * The names of actual book series.
	 */
	series: string[];
	/**
	 * The names of actual book titles.
	 */
	title: string[];
	/**
	 * The names of actual book publishers.
	 */
	publisher: string[];
}>;
/**
 * The possible definitions related to colors.
 */
export type ColorDefinition = LocaleEntry<{
	/**
	 * Human-readable color names.
	 */
	human: string[];
	/**
	 * Color space names.
	 */
	space: string[];
}>;
/**
 * The possible definitions related to commerce.
 */
export type CommerceDefinition = LocaleEntry<{
	/**
	 * Department names inside a shop.
	 */
	department: string[];
	/**
	 * Product name generation definitions.
	 */
	product_name: CommerceProductNameDefinition;
	/**
	 * Descriptions for products.
	 */
	product_description: string[];
}>;
/**
 * The possible definitions related to product name generation.
 */
export interface CommerceProductNameDefinition {
	/**
	 * Adjectives describing a product (e.g. tasty).
	 */
	adjective: string[];
	/**
	 * Materials describing a product (e.g. wood).
	 */
	material: string[];
	/**
	 * Types of products (e.g. chair).
	 */
	product: string[];
}
/**
 * The possible definitions related to companies.
 */
export type CompanyDefinition = LocaleEntry<{
	/**
	 * Business/products related adjectives that can be used to demonstrate data being viewed by a manager.
	 */
	buzz_adjective: string[];
	/**
	 * Business/products related nouns that can be used to demonstrate data being viewed by a manager.
	 */
	buzz_noun: string[];
	/**
	 * Business/products related verbs that can be used to demonstrate data being viewed by a manager.
	 */
	buzz_verb: string[];
	/**
	 * Catchphrase adjectives that can be displayed to an end user.
	 */
	adjective: string[];
	/**
	 * Catchphrase descriptors that can be displayed to an end user.
	 */
	descriptor: string[];
	/**
	 * A list of patterns used to generate company names.
	 */
	name_pattern: string[];
	/**
	 * Catchphrase nouns that can be displayed to an end user.
	 */
	noun: string[];
}>;
/**
 * The possible definitions related to databases.
 */
export type DatabaseDefinition = LocaleEntry<{
	/**
	 * Database engines.
	 */
	engine: string[];
	/**
	 * Database collations.
	 */
	collation: string[];
	/**
	 * Column names.
	 */
	column: string[];
	/**
	 * Column types.
	 */
	type: string[];
}>;
/**
 * The possible definitions related to dates.
 */
export type DateDefinition = LocaleEntry<{
	/**
	 * The translations for months (January - December).
	 */
	month: DateEntryDefinition;
	/**
	 * The translations for weekdays (Sunday - Saturday).
	 */
	weekday: DateEntryDefinition;
	/**
	 * The names of the IANA time zones. Not tied to the current locale.
	 *
	 * Since this is the same for all locales, it is only defined in the \`base\` locale.
	 *
	 * @see [IANA Time Zone Database](https://www.iana.org/time-zones)
	 */
	time_zone: string[];
}>;
/**
 * The possible definitions related to date entries.
 */
export interface DateEntryDefinition {
	/**
	 * The long name of the entry.
	 */
	wide: string[];
	/**
	 * The short name/abbreviation of the entry.
	 * If null, the locale does not support a short name/abbreviation for the entry.
	 */
	abbr: string[] | null;
	/**
	 * The wide name of the entry when used in context. If absent wide will be used instead.
	 * It is used to specify a word in context, which may differ from a stand-alone word.
	 */
	wide_context?: string[];
	/**
	 * The short name/abbreviation name of the entry when used in context. If absent abbr will be used instead.
	 * It is used to specify a word in context, which may differ from a stand-alone word.
	 */
	abbr_context?: string[];
}
/**
 * The possible definitions related to finance.
 */
export type FinanceDefinition = LocaleEntry<{
	/**
	 * The types of accounts/purposes of an account (e.g. \`Savings\` account).
	 */
	account_type: string[];
	/**
	 * The pattern by (lowercase) issuer name used to generate credit card codes.
	 * \`L\` will be replaced by the check bit.
	 *
	 * @see faker.helpers.replaceCreditCardSymbols(): For more information about how the pattern is used.
	 */
	credit_card: {
		[issuer: string]: string[];
	};
	/**
	 * Currencies including their name, code and symbol (e.g. \`US Dollar\` / \`USD\` / \`$\`).
	 */
	currency: Currency[];
	/**
	 * Types of transactions (e.g. \`deposit\`).
	 */
	transaction_type: string[];
}>;
export type FoodDefinition = LocaleEntry<{
	/**
	 * Common food adjectives.
	 */
	adjective: string[];
	/**
	 * List of description patterns.
	 */
	description_pattern: string[];
	/**
	 * Common dish names.
	 */
	dish: string[];
	/**
	 * List of dish patterns.
	 */
	dish_pattern: string[];
	/**
	 * A list of cooking styles that are commonly associated with a particular food item or recipe.
	 */
	ethnic_category: string[];
	/**
	 * A list of common fruit names.
	 */
	fruit: string[];
	/**
	 * Common ingredient names.
	 */
	ingredient: string[];
	/**
	 * Common meat names.
	 */
	meat: string[];
	/**
	 * A list of common spice names.
	 */
	spice: string[];
	/**
	 * A list of common vegetable names.
	 */
	vegetable: string[];
}>;
/**
 * The possible definitions related to computers.
 */
export type HackerDefinition = LocaleEntry<{
	/**
	 * Generic computer related abbreviations (e.g. \`RAM\`, \`EXE\`).
	 */
	abbreviation: string[];
	/**
	 * Some computer related adjectives or descriptors (e.g. \`digital\`, \`bluetooth\`)
	 */
	adjective: string[];
	/**
	 * Some computer related verbs for continuous actions (en: \`ing\` suffix; e.g. \`hacking\`).
	 */
	ingverb: string[];
	/**
	 * Some computer related nouns (e.g. \`protocol\`, \`sensor\`).
	 */
	noun: string[];
	/**
	 * Some phrases that will be injected with random hacker words.
	 * May use any of the HackerDefinition keys wrapped in double braces
	 * (e.g. \`I'm {{ingverb}} {{adjective}} {{noun}}\`).
	 *
	 * @see faker.helpers.mustache(): For more information about how the phrases are generated.
	 */
	phrase: string[];
	/**
	 * Some computer related verbs (e.g. \`hack\`).
	 */
	verb: string[];
}>;
/**
 * The possible definitions related to internet stuff.
 */
export type InternetDefinition = LocaleEntry<{
	/**
	 * Common top level and similar domains (e.g \`de\`, \`co.uk\`).
	 */
	domain_suffix: string[];
	/**
	 * Some email domains containing \`example\` (e.g. \`example.com\`).
	 */
	example_email: string[];
	/**
	 * Some free-mail domains used in that country (e.g. \`gmail.de\`).
	 */
	free_email: string[];
	/**
	 * List of all fully-qualified emojis.
	 */
	emoji: Record<EmojiType, string[]>;
	/**
	 * List of some HTTP status codes.
	 */
	http_status_code: Record<HTTPStatusCodeType, number[]>;
	jwt_algorithm: string[];
}>;
/**
 * The possible definitions related to addresses and locations.
 */
export type LocationDefinition = LocaleEntry<{
	/**
	 * Postcodes patterns by state
	 */
	postcode_by_state: {
		[state: string]: string | string[];
	};
	/**
	 * Postcodes patterns.
	 */
	postcode: string | string[];
	/**
	 * The patterns to generate city names.
	 */
	city_pattern: string[];
	/**
	 * The names of actual cities.
	 */
	city_name: string[];
	/**
	 * Common city prefixes.
	 */
	city_prefix: string[];
	/**
	 * Common city suffixes.
	 */
	city_suffix: string[];
	/**
	 * The names of all continents.
	 */
	continent: string[];
	/**
	 * The names of all countries.
	 */
	country: string[];
	/**
	 * The [ISO_3166-1](https://en.wikipedia.org/wiki/ISO_3166-1) country codes.
	 */
	country_code: Array<{
		alpha2: string;
		alpha3: string;
		numeric: string;
	}>;
	/**
	 * The names of this country's states, or other first-level administrative areas.
	 */
	state: string[];
	/**
	 * The abbreviated names of this country's states, or other first-level administrative areas.
	 */
	state_abbr: string[];
	/**
	 * The names of counties, or other second-level administrative areas, inside the country's states.
	 */
	county: string[];
	/**
	 * The names of the compass directions.
	 * First the 4 cardinal directions, then the 4 ordinal directions.
	 */
	direction: {
		/**
		 * The names of the cardinal compass directions.
		 * Cardinal directions are the four main points of a compass.
		 */
		cardinal: string[];
		/**
		 * The abbreviated names of the cardinal compass directions.
		 * Cardinal directions are the four main points of a compass.
		 */
		cardinal_abbr: string[];
		/**
		 * The names of ordinal compass directions.
		 * Ordinal directions are combinations of cardinal directions.
		 */
		ordinal: string[];
		/**
		 * The abbreviated names of ordinal compass directions.
		 * Ordinal directions are combinations of cardinal directions.
		 */
		ordinal_abbr: string[];
	};
	/**
	 * The pattern used to generate building numbers. Since building numbers rarely start with 0, any consecutive # characters will be replaced by a number without a leading zero.
	 */
	building_number: string[];
	/**
	 * The patterns to generate street names.
	 */
	street_pattern: string[];
	/**
	 * The names of actual streets.
	 */
	street_name: string[];
	/**
	 * Common street prefixes.
	 */
	street_prefix: string[];
	/**
	 * Common street suffixes.
	 */
	street_suffix: string[];
	/**
	 * The pattern used to generate street addresses.
	 */
	street_address: {
		/**
		 * The fake pattern to generate only the street address.
		 */
		normal: string;
		/**
		 * The fake pattern to generate the full street address including the secondary address.
		 */
		full: string;
	};
	/**
	 * The address "inside" an address/e.g. an apartment or office. Since these rarely start with 0, any consecutive # characters will be replaced by a number without a leading zero.
	 */
	secondary_address: string[];
	/**
	 * A list of time zones names relevant to this locale.
	 *
	 * @see [IANA Time Zone Database](https://www.iana.org/time-zones)
	 */
	time_zone: string[];
}>;
/**
 * The possible definitions related to lorem texts.
 */
export type LoremDefinition = LocaleEntry<{
	/**
	 * Lorem words used to generate dummy texts.
	 */
	word: string[];
}>;
/**
 * Metadata for pre-built locales.
 */
export type PreBuiltMetadataDefinition = {
	/**
	 * The English name of the language (and the specific country, if defined).
	 */
	title: string;
	/**
	 * The full code of the locale, including the country code if applicable.
	 */
	code: string;
	/**
	 * The endonym (native name) of the language (and the specific country, if defined).
	 *
	 * @see https://en.wikipedia.org/wiki/List_of_countries_and_dependencies_and_their_capitals_in_native_languages
	 */
	endonym: string;
	/**
	 * The ISO 639-1 code of the language.
	 *
	 * @see https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes
	 */
	language: string;
	/**
	 * The specific variant of the language. This usually refers to a dialect or slang.
	 */
	variant?: string;
	/**
	 * The direction of the language, either 'ltr' (left to right) or 'rtl' (right to left).
	 */
	dir: "ltr" | "rtl";
	/**
	 * The ISO 15924 code of the script.
	 *
	 * @see https://en.wikipedia.org/wiki/ISO_15924
	 */
	script: string;
};
/**
 * Metadata for pre-built locales for a specific country.
 */
export type PreBuiltMetadataDefinitionForCountry = PreBuiltMetadataDefinition & {
	/**
	 * The ISO 3166-1 alpha-2 code of the country.
	 *
	 * @see https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2
	 */
	country: string;
};
/**
 * Metadata for the current locale.
 */
export type MetadataDefinition = LocaleEntry<PreBuiltMetadataDefinitionForCountry>;
/**
 * The possible definitions related to music.
 */
export type MusicDefinition = LocaleEntry<{
	/**
	 * The names of some albums.
	 */
	album: string[];
	/**
	 * The names of some artists.
	 */
	artist: string[];
	/**
	 * The names of some music genres.
	 */
	genre: string[];
	/**
	 * The names of some songs.
	 */
	song_name: string[];
}>;
export type PersonEntryDefinition<T> = {
	generic?: T[];
	male: T[];
	female: T[];
} | {
	generic: T[];
	male?: never;
	female?: never;
};
export type SimplePersonEntryDefinition = PersonEntryDefinition<string>;
export type WeightedPersonEntryDefinition = PersonEntryDefinition<{
	value: string;
	weight: number;
}>;
/**
 * The possible definitions related to people's names.
 */
export type PersonDefinition = LocaleEntry<{
	gender: string[];
	sex: string[];
	prefix: SimplePersonEntryDefinition;
	first_name: SimplePersonEntryDefinition;
	middle_name: SimplePersonEntryDefinition;
	last_name: SimplePersonEntryDefinition;
	suffix: string[];
	/**
	 * A weighted list of patterns used to generate names.
	 */
	name: Array<{
		value: string;
		weight: number;
	}>;
	/**
	 * A weighted list of patterns used to generate last names.
	 */
	last_name_pattern: WeightedPersonEntryDefinition;
	bio_pattern: string[];
	job_descriptor: string[];
	job_area: string[];
	job_type: string[];
	job_title_pattern: string[];
	western_zodiac_sign: string[];
}>;
/**
 * The possible definitions related to phone numbers.
 */
export type PhoneNumberDefinition = LocaleEntry<{
	/**
	 * Some patterns used to generate phone numbers.
	 * \`#\` will be replaced by a random digit (0-9).
	 * \`!\` will be replaced by a random digit (2-9).
	 * (e.g. \`!##-!##-####\` -> 272-285-0453)
	 *
	 * @see faker.helpers.replaceSymbolWithNumber(format): For more information about how the patterns are used.
	 */
	format: {
		/**
		 * Formats for a human-input phone number, e.g. \`555-770-7727\` or \`555.770.7727 x1234\`
		 */
		human: string[];
		/**
		 * Formats for a phone number in a standardized national format, e.g. \`(555) 123-4567\`.
		 */
		national: string[];
		/**
		 * Formats for a phone number in the standardised E.123 format, e.g. \`+15551234567\`
		 */
		international: string[];
	};
}>;
/**
 * The possible definitions related to science.
 */
export type ScienceDefinition = LocaleEntry<{
	/**
	 * Some science units.
	 */
	unit: ReadonlyArray<Unit>;
	/**
	 * Some periodic table element information.
	 */
	chemical_element: ReadonlyArray<ChemicalElement>;
}>;
/**
 * The possible definitions related to files and operating systems.
 */
export type SystemDefinition = LocaleEntry<{
	/**
	 * Returns some common file paths.
	 */
	directory_path: string[];
	/**
	 * The mime type definitions with some additional information.
	 */
	mime_type: {
		[mimeType: string]: SystemMimeTypeEntryDefinition;
	};
}>;
/**
 * The mime-type entry details.
 */
export interface SystemMimeTypeEntryDefinition {
	extensions: string[];
}
/**
 * The possible definitions related to vehicles.
 */
export type VehicleDefinition = LocaleEntry<{
	/**
	 * Some types of bicycles.
	 */
	bicycle_type: string[];
	/**
	 * Some types of fuel (e.g. \`Gasoline\`).
	 */
	fuel: string[];
	/**
	 * Some brands of manufactures (e.g. \`Tesla\`).
	 */
	manufacturer: string[];
	/**
	 * Some names of models (e.g. \`Fiesta\`).
	 */
	model: string[];
	/**
	 * Some types of vehicles (e.g. \`Minivan\`).
	 */
	type: string[];
}>;
/**
 * The possible definitions related to words.
 */
export type WordDefinition = LocaleEntry<{
	adjective: string[];
	adverb: string[];
	conjunction: string[];
	interjection: string[];
	noun: string[];
	preposition: string[];
	verb: string[];
}>;
/**
 * Wrapper type for all definition categories that will make all properties optional and allow extra properties.
 */
export type LocaleEntry<TCategoryDefinition extends Record<string, unknown>> = {
	[P in keyof TCategoryDefinition]?: TCategoryDefinition[P] | null;
} & Record<string, unknown>;
/**
 * The definitions as used by the translations/locales.
 */
export type LocaleDefinition = {
	metadata?: MetadataDefinition;
	airline?: AirlineDefinition;
	animal?: AnimalDefinition;
	book?: BookDefinition;
	color?: ColorDefinition;
	commerce?: CommerceDefinition;
	company?: CompanyDefinition;
	database?: DatabaseDefinition;
	date?: DateDefinition;
	finance?: FinanceDefinition;
	food?: FoodDefinition;
	hacker?: HackerDefinition;
	internet?: InternetDefinition;
	location?: LocationDefinition;
	lorem?: LoremDefinition;
	music?: MusicDefinition;
	person?: PersonDefinition;
	phone_number?: PhoneNumberDefinition;
	science?: ScienceDefinition;
	system?: SystemDefinition;
	vehicle?: VehicleDefinition;
	word?: WordDefinition;
} & Record<string, Record<string, unknown>>;
export type AirlineDefinition = LocaleEntry<{
	/**
	 * Some airline information
	 */
	airline: Airline[];
	/**
	 * Some airplane information
	 */
	airplane: Airplane[];
	/**
	 * Some airport information
	 */
	airport: Airport[];
}>;
/**
 * An error instance that will be thrown by faker.
 */
export declare class FakerError extends Error {
}
/**
 * The faker instance for the \`af_ZA\` locale.
 *
 * - Language: Afrikaans (South Africa)
 * - Endonym: Afrikaans (Suid-Afrika)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`af_ZA\`
 * - \`en\`
 * - \`base\`
 */
declare const faker: Faker;
/**
 * The faker instance for the \`ar\` locale.
 *
 * - Language: Arabic
 * - Endonym: اَلْعَرَبِيَّةُ
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`ar\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$1: Faker;
/**
 * The faker instance for the \`az\` locale.
 *
 * - Language: Azerbaijani
 * - Endonym: azərbaycan dili
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`az\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$2: Faker;
/**
 * The faker instance for the \`base\` locale.
 *
 * The base locale contains data that is shared across all locales such as ISO codes, time zones, and more.
 */
declare const faker$3: Faker;
/**
 * The faker instance for the \`cs_CZ\` locale.
 *
 * - Language: Czech (Czechia)
 * - Endonym: čeština (Česká republika)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`cs_CZ\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$4: Faker;
/**
 * The faker instance for the \`da\` locale.
 *
 * - Language: Danish
 * - Endonym: Dansk
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`da\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$5: Faker;
/**
 * The faker instance for the \`de\` locale.
 *
 * - Language: German
 * - Endonym: Deutsch
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`de\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$6: Faker;
/**
 * The faker instance for the \`de_AT\` locale.
 *
 * - Language: German (Austria)
 * - Endonym: Deutsch (Österreich)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`de_AT\`
 * - \`de\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$7: Faker;
/**
 * The faker instance for the \`de_CH\` locale.
 *
 * - Language: German (Switzerland)
 * - Endonym: Deutsch (Schweiz)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`de_CH\`
 * - \`de\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$8: Faker;
/**
 * The faker instance for the \`dv\` locale.
 *
 * - Language: Maldivian
 * - Endonym: ދިވެހި
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`dv\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$9: Faker;
/**
 * The faker instance for the \`el\` locale.
 *
 * - Language: Greek
 * - Endonym: Ελληνικά
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`el\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$10: Faker;
/**
 * The faker instance for the \`en\` locale.
 *
 * - Language: English
 * - Endonym: English
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en\`
 * - \`base\`
 */
declare const faker$11: Faker;
/**
 * The faker instance for the \`en_AU\` locale.
 *
 * - Language: English (Australia)
 * - Endonym: English (Australia)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en_AU\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$12: Faker;
/**
 * The faker instance for the \`en_AU_ocker\` locale.
 *
 * - Language: English (Australia Ocker)
 * - Endonym: English (Australia)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en_AU_ocker\`
 * - \`en_AU\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$13: Faker;
/**
 * The faker instance for the \`en_BORK\` locale.
 *
 * - Language: English (Bork)
 * - Endonym: English (Bork)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en_BORK\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$14: Faker;
/**
 * The faker instance for the \`en_CA\` locale.
 *
 * - Language: English (Canada)
 * - Endonym: English (Canada)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en_CA\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$15: Faker;
/**
 * The faker instance for the \`en_GB\` locale.
 *
 * - Language: English (Great Britain)
 * - Endonym: English (Great Britain)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en_GB\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$16: Faker;
/**
 * The faker instance for the \`en_GH\` locale.
 *
 * - Language: English (Ghana)
 * - Endonym: English (Ghana)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en_GH\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$17: Faker;
/**
 * The faker instance for the \`en_HK\` locale.
 *
 * - Language: English (Hong Kong)
 * - Endonym: English (Hong Kong)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en_HK\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$18: Faker;
/**
 * The faker instance for the \`en_IE\` locale.
 *
 * - Language: English (Ireland)
 * - Endonym: English (Ireland)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en_IE\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$19: Faker;
/**
 * The faker instance for the \`en_IN\` locale.
 *
 * - Language: English (India)
 * - Endonym: English (India)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en_IN\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$20: Faker;
/**
 * The faker instance for the \`en_NG\` locale.
 *
 * - Language: English (Nigeria)
 * - Endonym: English (Nigeria)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en_NG\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$21: Faker;
/**
 * The faker instance for the \`en_US\` locale.
 *
 * - Language: English (United States)
 * - Endonym: English (United States)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en_US\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$22: Faker;
/**
 * The faker instance for the \`en_ZA\` locale.
 *
 * - Language: English (South Africa)
 * - Endonym: English (South Africa)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`en_ZA\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$23: Faker;
/**
 * The faker instance for the \`eo\` locale.
 *
 * - Language: Esperanto
 * - Endonym: Esperanto
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`eo\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$24: Faker;
/**
 * The faker instance for the \`es\` locale.
 *
 * - Language: Spanish
 * - Endonym: Español
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`es\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$25: Faker;
/**
 * The faker instance for the \`es_MX\` locale.
 *
 * - Language: Spanish (Mexico)
 * - Endonym: Español (México)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`es_MX\`
 * - \`es\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$26: Faker;
/**
 * The faker instance for the \`fa\` locale.
 *
 * - Language: Farsi/Persian
 * - Endonym: فارسی
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`fa\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$27: Faker;
/**
 * The faker instance for the \`fi\` locale.
 *
 * - Language: Finnish
 * - Endonym: suomi
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`fi\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$28: Faker;
/**
 * The faker instance for the \`fr\` locale.
 *
 * - Language: French
 * - Endonym: Français
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`fr\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$29: Faker;
/**
 * The faker instance for the \`fr_BE\` locale.
 *
 * - Language: French (Belgium)
 * - Endonym: Français (Belgique)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`fr_BE\`
 * - \`fr\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$30: Faker;
/**
 * The faker instance for the \`fr_CA\` locale.
 *
 * - Language: French (Canada)
 * - Endonym: Français (Canada)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`fr_CA\`
 * - \`fr\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$31: Faker;
/**
 * The faker instance for the \`fr_CH\` locale.
 *
 * - Language: French (Switzerland)
 * - Endonym: Français (Suisse)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`fr_CH\`
 * - \`fr\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$32: Faker;
/**
 * The faker instance for the \`fr_LU\` locale.
 *
 * - Language: French (Luxembourg)
 * - Endonym: Français (Luxembourg)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`fr_LU\`
 * - \`fr\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$33: Faker;
/**
 * The faker instance for the \`fr_SN\` locale.
 *
 * - Language: French (Senegal)
 * - Endonym: Français (Sénégal)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`fr_SN\`
 * - \`fr\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$34: Faker;
/**
 * The faker instance for the \`he\` locale.
 *
 * - Language: Hebrew
 * - Endonym: עברית
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`he\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$35: Faker;
/**
 * The faker instance for the \`hr\` locale.
 *
 * - Language: Croatian
 * - Endonym: Hrvatski
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`hr\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$36: Faker;
/**
 * The faker instance for the \`hu\` locale.
 *
 * - Language: Hungarian
 * - Endonym: magyar
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`hu\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$37: Faker;
/**
 * The faker instance for the \`hy\` locale.
 *
 * - Language: Armenian
 * - Endonym: Հայերեն
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`hy\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$38: Faker;
/**
 * The faker instance for the \`id_ID\` locale.
 *
 * - Language: Indonesian (Indonesia)
 * - Endonym: Bahasa Indonesia (Indonesia)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`id_ID\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$39: Faker;
/**
 * The faker instance for the \`it\` locale.
 *
 * - Language: Italian
 * - Endonym: Italiano
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`it\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$40: Faker;
/**
 * The faker instance for the \`ja\` locale.
 *
 * - Language: Japanese
 * - Endonym: 日本語
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`ja\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$41: Faker;
/**
 * The faker instance for the \`ka_GE\` locale.
 *
 * - Language: Georgian (Georgia)
 * - Endonym: ქართული (საქართველო)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`ka_GE\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$42: Faker;
/**
 * The faker instance for the \`ko\` locale.
 *
 * - Language: Korean
 * - Endonym: 한국어
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`ko\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$43: Faker;
/**
 * The faker instance for the \`lv\` locale.
 *
 * - Language: Latvian
 * - Endonym: latviešu valoda
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`lv\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$44: Faker;
/**
 * The faker instance for the \`mk\` locale.
 *
 * - Language: Macedonian
 * - Endonym: македонски јазик
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`mk\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$45: Faker;
/**
 * The faker instance for the \`nb_NO\` locale.
 *
 * - Language: Norwegian (Norway)
 * - Endonym: Norsk bokmål (Norge)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`nb_NO\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$46: Faker;
/**
 * The faker instance for the \`ne\` locale.
 *
 * - Language: Nepali
 * - Endonym: नेपाली
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`ne\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$47: Faker;
/**
 * The faker instance for the \`nl\` locale.
 *
 * - Language: Dutch
 * - Endonym: Nederlands
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`nl\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$48: Faker;
/**
 * The faker instance for the \`nl_BE\` locale.
 *
 * - Language: Dutch (Belgium)
 * - Endonym: Nederlands (België)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`nl_BE\`
 * - \`nl\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$49: Faker;
/**
 * The faker instance for the \`pl\` locale.
 *
 * - Language: Polish
 * - Endonym: Polski
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`pl\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$50: Faker;
/**
 * The faker instance for the \`pt_BR\` locale.
 *
 * - Language: Portuguese (Brazil)
 * - Endonym: Português (Brasil)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`pt_BR\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$51: Faker;
/**
 * The faker instance for the \`pt_PT\` locale.
 *
 * - Language: Portuguese (Portugal)
 * - Endonym: Português (Portugal)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`pt_PT\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$52: Faker;
/**
 * The faker instance for the \`ro\` locale.
 *
 * - Language: Romanian
 * - Endonym: Română
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`ro\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$53: Faker;
/**
 * The faker instance for the \`ro_MD\` locale.
 *
 * - Language: Romanian (Moldova)
 * - Endonym: Română (Moldova)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`ro_MD\`
 * - \`ro\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$54: Faker;
/**
 * The faker instance for the \`ru\` locale.
 *
 * - Language: Russian
 * - Endonym: Русский
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`ru\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$55: Faker;
/**
 * The faker instance for the \`sk\` locale.
 *
 * - Language: Slovak
 * - Endonym: slovenčina
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`sk\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$56: Faker;
/**
 * The faker instance for the \`sr_RS_latin\` locale.
 *
 * - Language: Serbian (Serbia, Latin)
 * - Endonym: srpski (Srbija, latinica)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`sr_RS_latin\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$57: Faker;
/**
 * The faker instance for the \`sv\` locale.
 *
 * - Language: Swedish
 * - Endonym: Svenska
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`sv\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$58: Faker;
/**
 * The faker instance for the \`th\` locale.
 *
 * - Language: Thai
 * - Endonym: ไทย
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`th\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$59: Faker;
/**
 * The faker instance for the \`tr\` locale.
 *
 * - Language: Turkish
 * - Endonym: Türkçe
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`tr\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$60: Faker;
/**
 * The faker instance for the \`uk\` locale.
 *
 * - Language: Ukrainian
 * - Endonym: Українська
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`uk\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$61: Faker;
/**
 * The faker instance for the \`ur\` locale.
 *
 * - Language: Urdu
 * - Endonym: اردو
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`ur\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$62: Faker;
/**
 * The faker instance for the \`uz_UZ_latin\` locale.
 *
 * - Language: Uzbek (Uzbekistan, Latin)
 * - Endonym: O'zbekcha
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`uz_UZ_latin\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$63: Faker;
/**
 * The faker instance for the \`vi\` locale.
 *
 * - Language: Vietnamese
 * - Endonym: Tiếng Việt
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`vi\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$64: Faker;
/**
 * The faker instance for the \`yo_NG\` locale.
 *
 * - Language: Yoruba (Nigeria)
 * - Endonym: Yoruba (Naijiria)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`yo_NG\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$65: Faker;
/**
 * The faker instance for the \`zh_CN\` locale.
 *
 * - Language: Chinese (China)
 * - Endonym: 中文 (中国)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`zh_CN\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$66: Faker;
/**
 * The faker instance for the \`zh_TW\` locale.
 *
 * - Language: Chinese (Taiwan)
 * - Endonym: 中文 (臺灣)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`zh_TW\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$67: Faker;
/**
 * The faker instance for the \`zu_ZA\` locale.
 *
 * - Language: Zulu (South Africa)
 * - Endonym: isiZulu (Iningizimu Afrika)
 *
 * This instance uses the following locales internally (in descending precedence):
 *
 * - \`zu_ZA\`
 * - \`en\`
 * - \`base\`
 */
declare const faker$68: Faker;
export declare const allFakers: {
	readonly af_ZA: Faker;
	readonly ar: Faker;
	readonly az: Faker;
	readonly base: Faker;
	readonly cs_CZ: Faker;
	readonly da: Faker;
	readonly de: Faker;
	readonly de_AT: Faker;
	readonly de_CH: Faker;
	readonly dv: Faker;
	readonly el: Faker;
	readonly en: Faker;
	readonly en_AU: Faker;
	readonly en_AU_ocker: Faker;
	readonly en_BORK: Faker;
	readonly en_CA: Faker;
	readonly en_GB: Faker;
	readonly en_GH: Faker;
	readonly en_HK: Faker;
	readonly en_IE: Faker;
	readonly en_IN: Faker;
	readonly en_NG: Faker;
	readonly en_US: Faker;
	readonly en_ZA: Faker;
	readonly eo: Faker;
	readonly es: Faker;
	readonly es_MX: Faker;
	readonly fa: Faker;
	readonly fi: Faker;
	readonly fr: Faker;
	readonly fr_BE: Faker;
	readonly fr_CA: Faker;
	readonly fr_CH: Faker;
	readonly fr_LU: Faker;
	readonly fr_SN: Faker;
	readonly he: Faker;
	readonly hr: Faker;
	readonly hu: Faker;
	readonly hy: Faker;
	readonly id_ID: Faker;
	readonly it: Faker;
	readonly ja: Faker;
	readonly ka_GE: Faker;
	readonly ko: Faker;
	readonly lv: Faker;
	readonly mk: Faker;
	readonly nb_NO: Faker;
	readonly ne: Faker;
	readonly nl: Faker;
	readonly nl_BE: Faker;
	readonly pl: Faker;
	readonly pt_BR: Faker;
	readonly pt_PT: Faker;
	readonly ro: Faker;
	readonly ro_MD: Faker;
	readonly ru: Faker;
	readonly sk: Faker;
	readonly sr_RS_latin: Faker;
	readonly sv: Faker;
	readonly th: Faker;
	readonly tr: Faker;
	readonly uk: Faker;
	readonly ur: Faker;
	readonly uz_UZ_latin: Faker;
	readonly vi: Faker;
	readonly yo_NG: Faker;
	readonly zh_CN: Faker;
	readonly zh_TW: Faker;
	readonly zu_ZA: Faker;
};
/**
 * The locale data for the \`af_ZA\` locale.
 *
 * - Language: Afrikaans (South Africa)
 * - Endonym: Afrikaans (Suid-Afrika)
 */
export declare const af_ZA: LocaleDefinition;
/**
 * The locale data for the \`ar\` locale.
 *
 * - Language: Arabic
 * - Endonym: اَلْعَرَبِيَّةُ
 */
export declare const ar: LocaleDefinition;
/**
 * The locale data for the \`az\` locale.
 *
 * - Language: Azerbaijani
 * - Endonym: azərbaycan dili
 */
export declare const az: LocaleDefinition;
/**
 * The locale data for the \`base\` locale.
 *
 * The base locale contains data that is shared across all locales such as ISO codes, time zones, and more.
 */
export declare const base: LocaleDefinition;
/**
 * The locale data for the \`cs_CZ\` locale.
 *
 * - Language: Czech (Czechia)
 * - Endonym: čeština (Česká republika)
 */
export declare const cs_CZ: LocaleDefinition;
/**
 * The locale data for the \`da\` locale.
 *
 * - Language: Danish
 * - Endonym: Dansk
 */
export declare const da: LocaleDefinition;
/**
 * The locale data for the \`de\` locale.
 *
 * - Language: German
 * - Endonym: Deutsch
 */
export declare const de: LocaleDefinition;
/**
 * The locale data for the \`de_AT\` locale.
 *
 * - Language: German (Austria)
 * - Endonym: Deutsch (Österreich)
 */
export declare const de_AT: LocaleDefinition;
/**
 * The locale data for the \`de_CH\` locale.
 *
 * - Language: German (Switzerland)
 * - Endonym: Deutsch (Schweiz)
 */
export declare const de_CH: LocaleDefinition;
/**
 * The locale data for the \`dv\` locale.
 *
 * - Language: Maldivian
 * - Endonym: ދިވެހި
 */
export declare const dv: LocaleDefinition;
/**
 * The locale data for the \`el\` locale.
 *
 * - Language: Greek
 * - Endonym: Ελληνικά
 */
export declare const el: LocaleDefinition;
/**
 * The locale data for the \`en\` locale.
 *
 * - Language: English
 * - Endonym: English
 */
export declare const en: LocaleDefinition;
/**
 * The locale data for the \`en_AU\` locale.
 *
 * - Language: English (Australia)
 * - Endonym: English (Australia)
 */
export declare const en_AU: LocaleDefinition;
/**
 * The locale data for the \`en_AU_ocker\` locale.
 *
 * - Language: English (Australia Ocker)
 * - Endonym: English (Australia)
 */
export declare const en_AU_ocker: LocaleDefinition;
/**
 * The locale data for the \`en_BORK\` locale.
 *
 * - Language: English (Bork)
 * - Endonym: English (Bork)
 */
export declare const en_BORK: LocaleDefinition;
/**
 * The locale data for the \`en_CA\` locale.
 *
 * - Language: English (Canada)
 * - Endonym: English (Canada)
 */
export declare const en_CA: LocaleDefinition;
/**
 * The locale data for the \`en_GB\` locale.
 *
 * - Language: English (Great Britain)
 * - Endonym: English (Great Britain)
 */
export declare const en_GB: LocaleDefinition;
/**
 * The locale data for the \`en_GH\` locale.
 *
 * - Language: English (Ghana)
 * - Endonym: English (Ghana)
 */
export declare const en_GH: LocaleDefinition;
/**
 * The locale data for the \`en_HK\` locale.
 *
 * - Language: English (Hong Kong)
 * - Endonym: English (Hong Kong)
 */
export declare const en_HK: LocaleDefinition;
/**
 * The locale data for the \`en_IE\` locale.
 *
 * - Language: English (Ireland)
 * - Endonym: English (Ireland)
 */
export declare const en_IE: LocaleDefinition;
/**
 * The locale data for the \`en_IN\` locale.
 *
 * - Language: English (India)
 * - Endonym: English (India)
 */
export declare const en_IN: LocaleDefinition;
/**
 * The locale data for the \`en_NG\` locale.
 *
 * - Language: English (Nigeria)
 * - Endonym: English (Nigeria)
 */
export declare const en_NG: LocaleDefinition;
/**
 * The locale data for the \`en_US\` locale.
 *
 * - Language: English (United States)
 * - Endonym: English (United States)
 */
export declare const en_US: LocaleDefinition;
/**
 * The locale data for the \`en_ZA\` locale.
 *
 * - Language: English (South Africa)
 * - Endonym: English (South Africa)
 */
export declare const en_ZA: LocaleDefinition;
/**
 * The locale data for the \`eo\` locale.
 *
 * - Language: Esperanto
 * - Endonym: Esperanto
 */
export declare const eo: LocaleDefinition;
/**
 * The locale data for the \`es\` locale.
 *
 * - Language: Spanish
 * - Endonym: Español
 */
export declare const es: LocaleDefinition;
/**
 * The locale data for the \`es_MX\` locale.
 *
 * - Language: Spanish (Mexico)
 * - Endonym: Español (México)
 */
export declare const es_MX: LocaleDefinition;
/**
 * The locale data for the \`fa\` locale.
 *
 * - Language: Farsi/Persian
 * - Endonym: فارسی
 */
export declare const fa: LocaleDefinition;
/**
 * The locale data for the \`fi\` locale.
 *
 * - Language: Finnish
 * - Endonym: suomi
 */
export declare const fi: LocaleDefinition;
/**
 * The locale data for the \`fr\` locale.
 *
 * - Language: French
 * - Endonym: Français
 */
export declare const fr: LocaleDefinition;
/**
 * The locale data for the \`fr_BE\` locale.
 *
 * - Language: French (Belgium)
 * - Endonym: Français (Belgique)
 */
export declare const fr_BE: LocaleDefinition;
/**
 * The locale data for the \`fr_CA\` locale.
 *
 * - Language: French (Canada)
 * - Endonym: Français (Canada)
 */
export declare const fr_CA: LocaleDefinition;
/**
 * The locale data for the \`fr_CH\` locale.
 *
 * - Language: French (Switzerland)
 * - Endonym: Français (Suisse)
 */
export declare const fr_CH: LocaleDefinition;
/**
 * The locale data for the \`fr_LU\` locale.
 *
 * - Language: French (Luxembourg)
 * - Endonym: Français (Luxembourg)
 */
export declare const fr_LU: LocaleDefinition;
/**
 * The locale data for the \`fr_SN\` locale.
 *
 * - Language: French (Senegal)
 * - Endonym: Français (Sénégal)
 */
export declare const fr_SN: LocaleDefinition;
/**
 * The locale data for the \`he\` locale.
 *
 * - Language: Hebrew
 * - Endonym: עברית
 */
export declare const he: LocaleDefinition;
/**
 * The locale data for the \`hr\` locale.
 *
 * - Language: Croatian
 * - Endonym: Hrvatski
 */
export declare const hr: LocaleDefinition;
/**
 * The locale data for the \`hu\` locale.
 *
 * - Language: Hungarian
 * - Endonym: magyar
 */
export declare const hu: LocaleDefinition;
/**
 * The locale data for the \`hy\` locale.
 *
 * - Language: Armenian
 * - Endonym: Հայերեն
 */
export declare const hy: LocaleDefinition;
/**
 * The locale data for the \`id_ID\` locale.
 *
 * - Language: Indonesian (Indonesia)
 * - Endonym: Bahasa Indonesia (Indonesia)
 */
export declare const id_ID: LocaleDefinition;
/**
 * The locale data for the \`it\` locale.
 *
 * - Language: Italian
 * - Endonym: Italiano
 */
export declare const it: LocaleDefinition;
/**
 * The locale data for the \`ja\` locale.
 *
 * - Language: Japanese
 * - Endonym: 日本語
 */
export declare const ja: LocaleDefinition;
/**
 * The locale data for the \`ka_GE\` locale.
 *
 * - Language: Georgian (Georgia)
 * - Endonym: ქართული (საქართველო)
 */
export declare const ka_GE: LocaleDefinition;
/**
 * The locale data for the \`ko\` locale.
 *
 * - Language: Korean
 * - Endonym: 한국어
 */
export declare const ko: LocaleDefinition;
/**
 * The locale data for the \`lv\` locale.
 *
 * - Language: Latvian
 * - Endonym: latviešu valoda
 */
export declare const lv: LocaleDefinition;
/**
 * The locale data for the \`mk\` locale.
 *
 * - Language: Macedonian
 * - Endonym: македонски јазик
 */
export declare const mk: LocaleDefinition;
/**
 * The locale data for the \`nb_NO\` locale.
 *
 * - Language: Norwegian (Norway)
 * - Endonym: Norsk bokmål (Norge)
 */
export declare const nb_NO: LocaleDefinition;
/**
 * The locale data for the \`ne\` locale.
 *
 * - Language: Nepali
 * - Endonym: नेपाली
 */
export declare const ne: LocaleDefinition;
/**
 * The locale data for the \`nl\` locale.
 *
 * - Language: Dutch
 * - Endonym: Nederlands
 */
export declare const nl: LocaleDefinition;
/**
 * The locale data for the \`nl_BE\` locale.
 *
 * - Language: Dutch (Belgium)
 * - Endonym: Nederlands (België)
 */
export declare const nl_BE: LocaleDefinition;
/**
 * The locale data for the \`pl\` locale.
 *
 * - Language: Polish
 * - Endonym: Polski
 */
export declare const pl: LocaleDefinition;
/**
 * The locale data for the \`pt_BR\` locale.
 *
 * - Language: Portuguese (Brazil)
 * - Endonym: Português (Brasil)
 */
export declare const pt_BR: LocaleDefinition;
/**
 * The locale data for the \`pt_PT\` locale.
 *
 * - Language: Portuguese (Portugal)
 * - Endonym: Português (Portugal)
 */
export declare const pt_PT: LocaleDefinition;
/**
 * The locale data for the \`ro\` locale.
 *
 * - Language: Romanian
 * - Endonym: Română
 */
export declare const ro: LocaleDefinition;
/**
 * The locale data for the \`ro_MD\` locale.
 *
 * - Language: Romanian (Moldova)
 * - Endonym: Română (Moldova)
 */
export declare const ro_MD: LocaleDefinition;
/**
 * The locale data for the \`ru\` locale.
 *
 * - Language: Russian
 * - Endonym: Русский
 */
export declare const ru: LocaleDefinition;
/**
 * The locale data for the \`sk\` locale.
 *
 * - Language: Slovak
 * - Endonym: slovenčina
 */
export declare const sk: LocaleDefinition;
/**
 * The locale data for the \`sr_RS_latin\` locale.
 *
 * - Language: Serbian (Serbia, Latin)
 * - Endonym: srpski (Srbija, latinica)
 */
export declare const sr_RS_latin: LocaleDefinition;
/**
 * The locale data for the \`sv\` locale.
 *
 * - Language: Swedish
 * - Endonym: Svenska
 */
export declare const sv: LocaleDefinition;
/**
 * The locale data for the \`th\` locale.
 *
 * - Language: Thai
 * - Endonym: ไทย
 */
export declare const th: LocaleDefinition;
/**
 * The locale data for the \`tr\` locale.
 *
 * - Language: Turkish
 * - Endonym: Türkçe
 */
export declare const tr: LocaleDefinition;
/**
 * The locale data for the \`uk\` locale.
 *
 * - Language: Ukrainian
 * - Endonym: Українська
 */
export declare const uk: LocaleDefinition;
/**
 * The locale data for the \`ur\` locale.
 *
 * - Language: Urdu
 * - Endonym: اردو
 */
export declare const ur: LocaleDefinition;
/**
 * The locale data for the \`uz_UZ_latin\` locale.
 *
 * - Language: Uzbek (Uzbekistan, Latin)
 * - Endonym: O'zbekcha
 */
export declare const uz_UZ_latin: LocaleDefinition;
/**
 * The locale data for the \`vi\` locale.
 *
 * - Language: Vietnamese
 * - Endonym: Tiếng Việt
 */
export declare const vi: LocaleDefinition;
/**
 * The locale data for the \`yo_NG\` locale.
 *
 * - Language: Yoruba (Nigeria)
 * - Endonym: Yoruba (Naijiria)
 */
export declare const yo_NG: LocaleDefinition;
/**
 * The locale data for the \`zh_CN\` locale.
 *
 * - Language: Chinese (China)
 * - Endonym: 中文 (中国)
 */
export declare const zh_CN: LocaleDefinition;
/**
 * The locale data for the \`zh_TW\` locale.
 *
 * - Language: Chinese (Taiwan)
 * - Endonym: 中文 (臺灣)
 */
export declare const zh_TW: LocaleDefinition;
/**
 * The locale data for the \`zu_ZA\` locale.
 *
 * - Language: Zulu (South Africa)
 * - Endonym: isiZulu (Iningizimu Afrika)
 */
export declare const zu_ZA: LocaleDefinition;
export declare const allLocales: {
	af_ZA: LocaleDefinition;
	ar: LocaleDefinition;
	az: LocaleDefinition;
	base: LocaleDefinition;
	cs_CZ: LocaleDefinition;
	da: LocaleDefinition;
	de: LocaleDefinition;
	de_AT: LocaleDefinition;
	de_CH: LocaleDefinition;
	dv: LocaleDefinition;
	el: LocaleDefinition;
	en: LocaleDefinition;
	en_AU: LocaleDefinition;
	en_AU_ocker: LocaleDefinition;
	en_BORK: LocaleDefinition;
	en_CA: LocaleDefinition;
	en_GB: LocaleDefinition;
	en_GH: LocaleDefinition;
	en_HK: LocaleDefinition;
	en_IE: LocaleDefinition;
	en_IN: LocaleDefinition;
	en_NG: LocaleDefinition;
	en_US: LocaleDefinition;
	en_ZA: LocaleDefinition;
	eo: LocaleDefinition;
	es: LocaleDefinition;
	es_MX: LocaleDefinition;
	fa: LocaleDefinition;
	fi: LocaleDefinition;
	fr: LocaleDefinition;
	fr_BE: LocaleDefinition;
	fr_CA: LocaleDefinition;
	fr_CH: LocaleDefinition;
	fr_LU: LocaleDefinition;
	fr_SN: LocaleDefinition;
	he: LocaleDefinition;
	hr: LocaleDefinition;
	hu: LocaleDefinition;
	hy: LocaleDefinition;
	id_ID: LocaleDefinition;
	it: LocaleDefinition;
	ja: LocaleDefinition;
	ka_GE: LocaleDefinition;
	ko: LocaleDefinition;
	lv: LocaleDefinition;
	mk: LocaleDefinition;
	nb_NO: LocaleDefinition;
	ne: LocaleDefinition;
	nl: LocaleDefinition;
	nl_BE: LocaleDefinition;
	pl: LocaleDefinition;
	pt_BR: LocaleDefinition;
	pt_PT: LocaleDefinition;
	ro: LocaleDefinition;
	ro_MD: LocaleDefinition;
	ru: LocaleDefinition;
	sk: LocaleDefinition;
	sr_RS_latin: LocaleDefinition;
	sv: LocaleDefinition;
	th: LocaleDefinition;
	tr: LocaleDefinition;
	uk: LocaleDefinition;
	ur: LocaleDefinition;
	uz_UZ_latin: LocaleDefinition;
	vi: LocaleDefinition;
	yo_NG: LocaleDefinition;
	zh_CN: LocaleDefinition;
	zh_TW: LocaleDefinition;
	zu_ZA: LocaleDefinition;
};
/**
 * Merges the given locales into one locale.
 * The locales are merged in the order they are given.
 * The first locale that provides an entry for a category will be used for that.
 * Mutating the category entries in the returned locale will also mutate the entries in the respective source locale.
 *
 * @param locales The locales to merge.
 *
 * @returns The newly merged locale.
 *
 * @example
 * import { de_CH, de, en, mergeLocales } from '@faker-js/faker';
 *
 * const de_CH_with_fallbacks = mergeLocales([ de_CH, de, en ]);
 *
 * @since 8.0.0
 */
export declare function mergeLocales(locales: LocaleDefinition[]): LocaleDefinition;
/**
 * Generates a MersenneTwister19937 randomizer with 32 bits of precision.
 * This is the default randomizer used by faker prior to v9.0.
 *
 * @param seed The initial seed to use. Defaults to a random number.
 *
 * @example
 * import { de, en, generateMersenne32Randomizer, Faker } from '@faker-js/faker';
 *
 * const randomizer = generateMersenne32Randomizer();
 * randomizer.seed(42);
 * // Share the same randomizer between multiple instances
 * const customFaker1 = new Faker({ locale: de, randomizer });
 * const customFaker2 = new Faker({ locale: en, randomizer });
 *
 * @since 8.2.0
 */
export declare function generateMersenne32Randomizer(seed?: number): Randomizer;
/**
 * Generates a MersenneTwister19937 randomizer with 53 bits of precision.
 * This is the default randomizer used by faker starting with v9.0.
 *
 * @param seed The initial seed to use. Defaults to a random number.
 *
 * @example
 * import { de, en, generateMersenne53Randomizer, Faker } from '@faker-js/faker';
 *
 * const randomizer = generateMersenne53Randomizer();
 * randomizer.seed(42);
 * // Share the same randomizer between multiple instances
 * const customFaker1 = new Faker({ locale: de, randomizer });
 * const customFaker2 = new Faker({ locale: en, randomizer });
 *
 * @since 9.0.0
 */
export declare function generateMersenne53Randomizer(seed?: number): Randomizer;

export {
	faker as fakerAF_ZA,
	faker$1 as fakerAR,
	faker$10 as fakerEL,
	faker$11 as faker,
	faker$11 as fakerEN,
	faker$12 as fakerEN_AU,
	faker$13 as fakerEN_AU_ocker,
	faker$14 as fakerEN_BORK,
	faker$15 as fakerEN_CA,
	faker$16 as fakerEN_GB,
	faker$17 as fakerEN_GH,
	faker$18 as fakerEN_HK,
	faker$19 as fakerEN_IE,
	faker$2 as fakerAZ,
	faker$20 as fakerEN_IN,
	faker$21 as fakerEN_NG,
	faker$22 as fakerEN_US,
	faker$23 as fakerEN_ZA,
	faker$24 as fakerEO,
	faker$25 as fakerES,
	faker$26 as fakerES_MX,
	faker$27 as fakerFA,
	faker$28 as fakerFI,
	faker$29 as fakerFR,
	faker$3 as fakerBASE,
	faker$30 as fakerFR_BE,
	faker$31 as fakerFR_CA,
	faker$32 as fakerFR_CH,
	faker$33 as fakerFR_LU,
	faker$34 as fakerFR_SN,
	faker$35 as fakerHE,
	faker$36 as fakerHR,
	faker$37 as fakerHU,
	faker$38 as fakerHY,
	faker$39 as fakerID_ID,
	faker$4 as fakerCS_CZ,
	faker$40 as fakerIT,
	faker$41 as fakerJA,
	faker$42 as fakerKA_GE,
	faker$43 as fakerKO,
	faker$44 as fakerLV,
	faker$45 as fakerMK,
	faker$46 as fakerNB_NO,
	faker$47 as fakerNE,
	faker$48 as fakerNL,
	faker$49 as fakerNL_BE,
	faker$5 as fakerDA,
	faker$50 as fakerPL,
	faker$51 as fakerPT_BR,
	faker$52 as fakerPT_PT,
	faker$53 as fakerRO,
	faker$54 as fakerRO_MD,
	faker$55 as fakerRU,
	faker$56 as fakerSK,
	faker$57 as fakerSR_RS_latin,
	faker$58 as fakerSV,
	faker$59 as fakerTH,
	faker$6 as fakerDE,
	faker$60 as fakerTR,
	faker$61 as fakerUK,
	faker$62 as fakerUR,
	faker$63 as fakerUZ_UZ_latin,
	faker$64 as fakerVI,
	faker$65 as fakerYO_NG,
	faker$66 as fakerZH_CN,
	faker$67 as fakerZH_TW,
	faker$68 as fakerZU_ZA,
	faker$7 as fakerDE_AT,
	faker$8 as fakerDE_CH,
	faker$9 as fakerDV,
};

export {};
// "9.2.0" \r
`,IPe=`export { addTime, getIdFn, getRandomDateFn, getRandomElementFn, getRandomElementsFn, getRandomFloatFn, getRandomIntFn, randomBoolean, randomDate, randomFloat, randomInt, randomString, shuffle, Store, unique_, type SchemaGenerator, type TimeUnitT, } from "schema-generator";
/** The result of the generation. */
export type Result = {
    /** The name of the file. */
    name: string;
    /** The data generated. */
    data: unknown[];
}[];
/**
 * Generate an object from a generator. It has a limit of 10 elements in the array whether the \`--preview\` argument is provided. \\
 * For complex objects, you will need to specify the type of the generator. \\
 * If the number of elements to generate for an array is not specified, it will be between 0 (included) and 10 (included). \\
 * If the number of elements to generate for an array is specified, it will be between min (included) and max (included).
 * @template T type of the object
 * @param generator generator for the object
 * @returns the generated object
 */
export declare const generate: <T>(generator: import("schema-generator").SchemaGenerator<T>) => T, generatePreview: <T>(generator: import("schema-generator").SchemaGenerator<T>) => T;
/** Options for writing the result to a file. */
export type WriteToFileOptions = {
    /** The folder where to write the files. */
    folder?: string;
    /** Whether to zip the files. */
    bZip?: boolean;
    /** Whether to make the json pretty. */
    bPretty?: boolean;
};
/**
 * Write the result to multiple files or a zip file.
 * @param result
 * @param options options
 * @param options.folder the folder where to write the files, can be set with the \`--output\` flag followed by the folder
 * @param options.bZip whether to zip the files, can be set with the \`--zip\` flag
 * @param options.bPretty whether to make the json pretty, can be set with the \`--pretty\` flag
 */
export declare const WriteToFile: (result: Result, options?: WriteToFileOptions) => Promise<void>;
`,TPe=s=>Ss(s,[]),x5e=({selector:s="#root",children:e})=>(TPe(()=>{const t=document.createElement("style");t.innerHTML=`
			html, body, ${s} {
				height: 100%;
				margin: 0;
				padding: 0;
			}
		`,t.id="full-viewport",document.head.appendChild(t)}),ui(Yo,{children:e})),b2=document.createElement("div"),EPe=s=>{try{return b2.style.cssText="",Object.assign(b2.style,s),b2.style.cssText}catch{return console.warn(`css error with: ${JSON.stringify(s)}`),s.cssText??""}},NPe=(s,e)=>{let t=document.getElementById(s);t||(t=document.createElement("style"),t.id=s,document.head.appendChild(t)),t.innerHTML=Object.entries(e).reduce((n,[i,o])=>(n+=`.${i} { ${EPe(o)} }
`,n),t.innerHTML)},RPe=()=>(Ss(()=>{NPe("vanilla-classes",{horizontal:{display:"flex",flexDirection:"row"},vertical:{display:"flex",flexDirection:"column"},overlap:{position:"relative"},"overlap > *":{position:"absolute",height:"100%",width:"100%"}})},[]),ui(Yo,{})),QJ=({padding:s,paddingTop:e,paddingLeft:t})=>s?{padding:s}:{paddingTop:e,paddingLeft:t},JJ=({margin:s,marginTop:e,marginLeft:t})=>s?{margin:s}:{marginTop:e,marginLeft:t},o7=Sm(({layout:s,alignItems:e,justifyContent:t,gap:n,width:i,widthMaxContent:o,height:r,heightMaxContent:a,padding:l,paddingTop:c,paddingLeft:d,margin:h,marginTop:u,marginLeft:f,flexGrow:g,...p},_)=>ui("div",{...p,ref:_,className:Ree(s,p.class,p.className),style:{alignItems:e,justifyContent:t,gap:n,width:o?"max-content":i,height:a?"max-content":r,...QJ({padding:l,paddingTop:c,paddingLeft:d}),...JJ({margin:h,marginTop:u,marginLeft:f}),flexGrow:g,...typeof p.style=="object"?p.style:{}}})),D5e=Sm((s,e)=>ui(o7,{ref:e,alignItems:"center",...s,layout:"horizontal"})),I5e=Sm((s,e)=>ui(o7,{ref:e,...s,layout:"vertical"})),T5e=Sm((s,e)=>ui(o7,{ref:e,...s,layout:"overlap"}));Sm(({width:s,widthMaxContent:e,height:t,heightMaxContent:n,padding:i,paddingTop:o,paddingLeft:r,margin:a,marginTop:l,marginLeft:c,flexGrow:d,...h},u)=>ui("div",{ref:u,...h,style:{width:e?"max-content":s,height:n?"max-content":t,...QJ({padding:i,paddingTop:o,paddingLeft:r}),...JJ({margin:a,marginTop:l,marginLeft:c}),flexGrow:d,...typeof h.style=="object"?{...h.style}:{}}}));const MPe={primaryColor:"green",white:"#e9ecef"};yPe();yE.typescript.typescriptDefaults.addExtraLib(`declare module '@faker-js/faker' { ${DPe} }`);yE.typescript.typescriptDefaults.addExtraLib(`declare module 'dayjs' { ${xPe} }`);yE.typescript.typescriptDefaults.addExtraLib(`declare module 'schema-generator-utils' { ${IPe} }`);GY.defineTheme("custom-light",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":"#e9ecef"}});const APe=()=>{const s=new URL(window.location.href),e=O7("(min-width: 62em)"),t=O7("(max-width: 25em)"),{height:n,width:i}=Nee();return Ss(()=>void(Kn.isAboveMd.value=!!e),[e]),Ss(()=>void(Kn.isBelowXxs.value=!!t),[t]),Ss(()=>void(Kn.viewportSize.value={height:n,width:i}),[n,i]),ui(Yo,{children:[ui(RPe,{}),ui(lPe,{position:"bottom-center",toastOptions:{duration:2e3}}),ui(hj,{theme:MPe,forceColorScheme:Kn.colorScheme.value,children:s.pathname===`${cPe.BASE_URL}/`&&ui(LPe,{})})]})};document.startViewTransition||(document.startViewTransition=s=>{const e=new Promise(o=>o(void 0)),t=new Promise(o=>(s(),o(void 0))),n=new Promise(o=>o(void 0));return{ready:e,finished:t,updateCallbackDone:n,skipTransition:()=>{}}});tb(ui(APe,{}),document.getElementById("root"));export{hPe as $,Ub as A,JU as B,lT as C,FPe as D,B7 as E,vc as F,aT as G,F7 as H,FU as I,H7 as J,Gee as K,Au as L,Kn as M,Jn as N,D5e as O,VU as P,T5e as Q,k5e as R,gPe as S,Td as T,y5e as U,I5e as V,w5e as W,L5e as X,TPe as Y,GY as Z,ym as _,jn as a,pPe as a0,S5e as a1,wSe as a2,CSe as a3,ty as a4,x5e as a5,Yo as b,xee as c,ij as d,O7 as e,Ree as f,aj as g,Id as h,zPe as i,WPe as j,BPe as k,HPe as l,V0 as m,Pf as n,rj as o,p3 as p,ud as q,Re as r,ZU as s,uX as t,ui as u,s3 as v,Sm as w,jb as x,Ss as y,VPe as z};
